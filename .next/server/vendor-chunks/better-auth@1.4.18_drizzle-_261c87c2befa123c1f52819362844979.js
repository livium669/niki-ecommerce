"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979";
exports.ids = ["vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979"];
exports.modules = {

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export),\n/* harmony export */   __reExport: () => (/* binding */ __reExport)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") {\n\t\tfor (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\t\tkey = keys[i];\n\t\t\tif (!__hasOwnProp.call(to, key) && key !== except) {\n\t\t\t\t__defProp(to, key, {\n\t\t\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn to;\n};\nvar __reExport = (target, mod, secondTarget, symbols) => {\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t\tsecondTarget && __defProp(secondTarget, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\t__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\");\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQ0FBMEMsaUJBQWlCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsT0FBTztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGlCQUFpQjtBQUMzRCxnRUFBZ0UsaUJBQWlCO0FBQ2pGO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxfdmlydHVhbFxccm9sbGRvd25fcnVudGltZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHJvbGxkb3duOnJ1bnRpbWVcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKGFsbCwgc3ltYm9scykgPT4ge1xuXHRsZXQgdGFyZ2V0ID0ge307XG5cdGZvciAodmFyIG5hbWUgaW4gYWxsKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgbmFtZSwge1xuXHRcdFx0Z2V0OiBhbGxbbmFtZV0sXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdH1cblx0aWYgKHN5bWJvbHMpIHtcblx0XHRfX2RlZlByb3AodGFyZ2V0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSk7XG5cdH1cblx0cmV0dXJuIHRhcmdldDtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuXHRpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0Zm9yICh2YXIga2V5cyA9IF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pLCBpID0gMCwgbiA9IGtleXMubGVuZ3RoLCBrZXk7IGkgPCBuOyBpKyspIHtcblx0XHRcdGtleSA9IGtleXNbaV07XG5cdFx0XHRpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KSB7XG5cdFx0XHRcdF9fZGVmUHJvcCh0bywga2V5LCB7XG5cdFx0XHRcdFx0Z2V0OiAoKGspID0+IGZyb21ba10pLmJpbmQobnVsbCwga2V5KSxcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHRvO1xufTtcbnZhciBfX3JlRXhwb3J0ID0gKHRhcmdldCwgbW9kLCBzZWNvbmRUYXJnZXQsIHN5bWJvbHMpID0+IHtcblx0aWYgKHN5bWJvbHMpIHtcblx0XHRfX2RlZlByb3AodGFyZ2V0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSk7XG5cdFx0c2Vjb25kVGFyZ2V0ICYmIF9fZGVmUHJvcChzZWNvbmRUYXJnZXQsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KTtcblx0fVxuXHRfX2NvcHlQcm9wcyh0YXJnZXQsIG1vZCwgXCJkZWZhdWx0XCIpLCBzZWNvbmRUYXJnZXQgJiYgX19jb3B5UHJvcHMoc2Vjb25kVGFyZ2V0LCBtb2QsIFwiZGVmYXVsdFwiKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX19leHBvcnQsIF9fcmVFeHBvcnQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs ***!
  \********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drizzleAdapter: () => (/* binding */ drizzleAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm */ \"(action-browser)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm */ \"(action-browser)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(action-browser)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(action-browser)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/functions/aggregate.js\");\n\n\n\n\n\n//#region src/adapters/drizzle-adapter/drizzle-adapter.ts\nconst drizzleAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst createCustomAdapter = (db$1) => ({ getFieldName, options }) => {\n\t\tfunction getSchema(model) {\n\t\t\tconst schema = config.schema || db$1._.fullSchema;\n\t\t\tif (!schema) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.\");\n\t\t\tconst schemaModel = schema[model];\n\t\t\tif (!schemaModel) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`[# Drizzle Adapter]: The model \"${model}\" was not found in the schema object. Please pass the schema directly to the adapter options.`);\n\t\t\treturn schemaModel;\n\t\t}\n\t\tconst withReturning = async (model, builder, data, where) => {\n\t\t\tif (config.provider !== \"mysql\") return (await builder.returning())[0];\n\t\t\tawait builder.execute();\n\t\t\tconst schemaModel = getSchema(model);\n\t\t\tconst builderVal = builder.config?.values;\n\t\t\tif (where?.length) {\n\t\t\t\tconst clause = convertWhereClause(where.map((w) => {\n\t\t\t\t\tif (data[w.field] !== void 0) return {\n\t\t\t\t\t\t...w,\n\t\t\t\t\t\tvalue: data[w.field]\n\t\t\t\t\t};\n\t\t\t\t\treturn w;\n\t\t\t\t}), model);\n\t\t\t\treturn (await db$1.select().from(schemaModel).where(...clause))[0];\n\t\t\t} else if (builderVal && builderVal[0]?.id?.value) {\n\t\t\t\tlet tId = builderVal[0]?.id?.value;\n\t\t\t\tif (!tId) tId = (await db$1.select({ id: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`LAST_INSERT_ID()` }).from(schemaModel).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(schemaModel.id)).limit(1))[0].id;\n\t\t\t\treturn (await db$1.select().from(schemaModel).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel.id, tId)).limit(1).execute())[0];\n\t\t\t} else if (data.id) return (await db$1.select().from(schemaModel).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel.id, data.id)).limit(1).execute())[0];\n\t\t\telse {\n\t\t\t\tif (!(\"id\" in schemaModel)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The model \"${model}\" does not have an \"id\" field. Please use the \"id\" field as your primary key.`);\n\t\t\t\treturn (await db$1.select().from(schemaModel).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(schemaModel.id)).limit(1).execute())[0];\n\t\t\t}\n\t\t};\n\t\tfunction convertWhereClause(where, model) {\n\t\t\tconst schemaModel = getSchema(model);\n\t\t\tif (!where) return [];\n\t\t\tif (where.length === 1) {\n\t\t\t\tconst w = where[0];\n\t\t\t\tif (!w) return [];\n\t\t\t\tconst field = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: w.field\n\t\t\t\t});\n\t\t\t\tif (!schemaModel[field]) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The field \"${w.field}\" does not exist in the schema for the model \"${model}\". Please update your schema.`);\n\t\t\t\tif (w.operator === \"in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`);\n\t\t\t\t\treturn [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.inArray)(schemaModel[field], w.value)];\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"not_in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"not_in\" operator.`);\n\t\t\t\t\treturn [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.notInArray)(schemaModel[field], w.value)];\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"contains\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}%`)];\n\t\t\t\tif (w.operator === \"starts_with\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `${w.value}%`)];\n\t\t\t\tif (w.operator === \"ends_with\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}`)];\n\t\t\t\tif (w.operator === \"lt\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lt)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"lte\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lte)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"ne\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.ne)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"gt\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gt)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"gte\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gte)(schemaModel[field], w.value)];\n\t\t\t\treturn [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel[field], w.value)];\n\t\t\t}\n\t\t\tconst andGroup = where.filter((w) => w.connector === \"AND\" || !w.connector);\n\t\t\tconst orGroup = where.filter((w) => w.connector === \"OR\");\n\t\t\tconst andClause = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)(...andGroup.map((w) => {\n\t\t\t\tconst field = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: w.field\n\t\t\t\t});\n\t\t\t\tif (w.operator === \"in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.inArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"not_in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"not_in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.notInArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"contains\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}%`);\n\t\t\t\tif (w.operator === \"starts_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `${w.value}%`);\n\t\t\t\tif (w.operator === \"ends_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}`);\n\t\t\t\tif (w.operator === \"lt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"lte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"ne\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.ne)(schemaModel[field], w.value);\n\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel[field], w.value);\n\t\t\t}));\n\t\t\tconst orClause = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.or)(...orGroup.map((w) => {\n\t\t\t\tconst field = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: w.field\n\t\t\t\t});\n\t\t\t\tif (w.operator === \"in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.inArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"not_in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"not_in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.notInArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"contains\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}%`);\n\t\t\t\tif (w.operator === \"starts_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `${w.value}%`);\n\t\t\t\tif (w.operator === \"ends_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}`);\n\t\t\t\tif (w.operator === \"lt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"lte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"ne\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.ne)(schemaModel[field], w.value);\n\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel[field], w.value);\n\t\t\t}));\n\t\t\tconst clause = [];\n\t\t\tif (andGroup.length) clause.push(andClause);\n\t\t\tif (orGroup.length) clause.push(orClause);\n\t\t\treturn clause;\n\t\t}\n\t\tfunction checkMissingFields(schema, model, values) {\n\t\t\tif (!schema) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.\");\n\t\t\tfor (const key in values) if (!schema[key]) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The field \"${key}\" does not exist in the \"${model}\" Drizzle schema. Please update your drizzle schema or re-generate using \"npx @better-auth/cli@latest generate\".`);\n\t\t}\n\t\treturn {\n\t\t\tasync create({ model, data: values }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tcheckMissingFields(schemaModel, model, values);\n\t\t\t\treturn await withReturning(model, db$1.insert(schemaModel).values(values), values);\n\t\t\t},\n\t\t\tasync findOne({ model, where, join }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\tif (options.experimental?.joins) if (!db$1.query || !db$1.query[model]) {\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[# Drizzle Adapter]: The model \"${model}\" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using \"npx @better-auth/cli@latest generate\".`);\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Falling back to regular query\");\n\t\t\t\t} else {\n\t\t\t\t\tlet includes;\n\t\t\t\t\tconst pluralJoinResults = [];\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tincludes = {};\n\t\t\t\t\t\tconst joinEntries = Object.entries(join);\n\t\t\t\t\t\tfor (const [model$1, joinAttr] of joinEntries) {\n\t\t\t\t\t\t\tconst limit = joinAttr.limit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\t\tconst pluralSuffix = isUnique || config.usePlural ? \"\" : \"s\";\n\t\t\t\t\t\t\tincludes[`${model$1}${pluralSuffix}`] = isUnique ? true : { limit };\n\t\t\t\t\t\t\tif (!isUnique) pluralJoinResults.push(`${model$1}${pluralSuffix}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst res$1 = await db$1.query[model].findFirst({\n\t\t\t\t\t\twhere: clause[0],\n\t\t\t\t\t\twith: includes\n\t\t\t\t\t});\n\t\t\t\t\tif (res$1) for (const pluralJoinResult of pluralJoinResults) {\n\t\t\t\t\t\tconst singularKey = !config.usePlural ? pluralJoinResult.slice(0, -1) : pluralJoinResult;\n\t\t\t\t\t\tres$1[singularKey] = res$1[pluralJoinResult];\n\t\t\t\t\t\tif (pluralJoinResult !== singularKey) delete res$1[pluralJoinResult];\n\t\t\t\t\t}\n\t\t\t\t\treturn res$1;\n\t\t\t\t}\n\t\t\t\tconst res = await db$1.select().from(schemaModel).where(...clause);\n\t\t\t\tif (!res.length) return null;\n\t\t\t\treturn res[0];\n\t\t\t},\n\t\t\tasync findMany({ model, where, sortBy, limit, offset, join }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = where ? convertWhereClause(where, model) : [];\n\t\t\t\tconst sortFn = sortBy?.direction === \"desc\" ? drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc : drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.asc;\n\t\t\t\tif (options.experimental?.joins) if (!db$1.query[model]) {\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[# Drizzle Adapter]: The model \"${model}\" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using \"npx @better-auth/cli@latest generate\".`);\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Falling back to regular query\");\n\t\t\t\t} else {\n\t\t\t\t\tlet includes;\n\t\t\t\t\tconst pluralJoinResults = [];\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tincludes = {};\n\t\t\t\t\t\tconst joinEntries = Object.entries(join);\n\t\t\t\t\t\tfor (const [model$1, joinAttr] of joinEntries) {\n\t\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\t\tconst limit$1 = joinAttr.limit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\t\t\t\t\tconst pluralSuffix = isUnique || config.usePlural ? \"\" : \"s\";\n\t\t\t\t\t\t\tincludes[`${model$1}${pluralSuffix}`] = isUnique ? true : { limit: limit$1 };\n\t\t\t\t\t\t\tif (!isUnique) pluralJoinResults.push(`${model$1}${pluralSuffix}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet orderBy = void 0;\n\t\t\t\t\tif (sortBy?.field) orderBy = [sortFn(schemaModel[getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy?.field\n\t\t\t\t\t})])];\n\t\t\t\t\tconst res = await db$1.query[model].findMany({\n\t\t\t\t\t\twhere: clause[0],\n\t\t\t\t\t\twith: includes,\n\t\t\t\t\t\tlimit: limit ?? 100,\n\t\t\t\t\t\toffset: offset ?? 0,\n\t\t\t\t\t\torderBy\n\t\t\t\t\t});\n\t\t\t\t\tif (res) for (const item of res) for (const pluralJoinResult of pluralJoinResults) {\n\t\t\t\t\t\tconst singularKey = !config.usePlural ? pluralJoinResult.slice(0, -1) : pluralJoinResult;\n\t\t\t\t\t\tif (singularKey === pluralJoinResult) continue;\n\t\t\t\t\t\titem[singularKey] = item[pluralJoinResult];\n\t\t\t\t\t\tdelete item[pluralJoinResult];\n\t\t\t\t\t}\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tlet builder = db$1.select().from(schemaModel);\n\t\t\t\tconst effectiveLimit = limit;\n\t\t\t\tconst effectiveOffset = offset;\n\t\t\t\tif (typeof effectiveLimit !== \"undefined\") builder = builder.limit(effectiveLimit);\n\t\t\t\tif (typeof effectiveOffset !== \"undefined\") builder = builder.offset(effectiveOffset);\n\t\t\t\tif (sortBy?.field) builder = builder.orderBy(sortFn(schemaModel[getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: sortBy?.field\n\t\t\t\t})]));\n\t\t\t\treturn await builder.where(...clause);\n\t\t\t},\n\t\t\tasync count({ model, where }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = where ? convertWhereClause(where, model) : [];\n\t\t\t\treturn (await db$1.select({ count: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.count)() }).from(schemaModel).where(...clause))[0].count;\n\t\t\t},\n\t\t\tasync update({ model, where, update: values }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\treturn await withReturning(model, db$1.update(schemaModel).set(values).where(...clause), values, where);\n\t\t\t},\n\t\t\tasync updateMany({ model, where, update: values }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\treturn await db$1.update(schemaModel).set(values).where(...clause);\n\t\t\t},\n\t\t\tasync delete({ model, where }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\treturn await db$1.delete(schemaModel).where(...clause);\n\t\t\t},\n\t\t\tasync deleteMany({ model, where }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\tconst res = await db$1.delete(schemaModel).where(...clause);\n\t\t\t\tlet count$1 = 0;\n\t\t\t\tif (res && \"rowCount\" in res) count$1 = res.rowCount;\n\t\t\t\telse if (Array.isArray(res)) count$1 = res.length;\n\t\t\t\telse if (res && (\"affectedRows\" in res || \"rowsAffected\" in res || \"changes\" in res)) count$1 = res.affectedRows ?? res.rowsAffected ?? res.changes;\n\t\t\t\tif (typeof count$1 !== \"number\") _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.\", {\n\t\t\t\t\tres,\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere\n\t\t\t\t});\n\t\t\t\treturn count$1;\n\t\t\t},\n\t\t\toptions: config\n\t\t};\n\t};\n\tlet adapterOptions = null;\n\tadapterOptions = {\n\t\tconfig: {\n\t\t\tadapterId: \"drizzle\",\n\t\t\tadapterName: \"Drizzle Adapter\",\n\t\t\tusePlural: config.usePlural ?? false,\n\t\t\tdebugLogs: config.debugLogs ?? false,\n\t\t\tsupportsUUIDs: config.provider === \"pg\" ? true : false,\n\t\t\tsupportsJSON: config.provider === \"pg\" ? true : false,\n\t\t\tsupportsArrays: config.provider === \"pg\" ? true : false,\n\t\t\ttransaction: config.transaction ?? false ? (cb) => db.transaction((tx) => {\n\t\t\t\treturn cb((0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_2__.createAdapterFactory)({\n\t\t\t\t\tconfig: adapterOptions.config,\n\t\t\t\t\tadapter: createCustomAdapter(tx)\n\t\t\t\t})(lazyOptions));\n\t\t\t}) : false\n\t\t},\n\t\tadapter: createCustomAdapter(db)\n\t};\n\tconst adapter = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_2__.createAdapterFactory)(adapterOptions);\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapter(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=drizzle-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMvZHJpenpsZS1hZGFwdGVyL2RyaXp6bGUtYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0M7QUFDVztBQUNVO0FBQzhDOztBQUVsSDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsdUJBQXVCO0FBQ2pFO0FBQ0E7QUFDQSwwQkFBMEIsb0VBQWU7QUFDekM7QUFDQSwrQkFBK0Isb0VBQWUsb0NBQW9DLE1BQU07QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLHlDQUF5QyxJQUFJLGdEQUFHLG9CQUFvQiw0QkFBNEIsaURBQUk7QUFDcEcsd0RBQXdELCtDQUFFO0FBQzFELEtBQUssc0VBQXNFLCtDQUFFO0FBQzdFO0FBQ0EsMENBQTBDLG9FQUFlLGVBQWUsTUFBTTtBQUM5RSwwREFBMEQsaURBQUk7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1Q0FBdUMsb0VBQWUsZUFBZSxRQUFRLGdEQUFnRCxNQUFNO0FBQ25JO0FBQ0EsNENBQTRDLG9FQUFlLDZCQUE2QixRQUFRO0FBQ2hHLGFBQWEsb0RBQU87QUFDcEI7QUFDQTtBQUNBLDRDQUE0QyxvRUFBZSw2QkFBNkIsUUFBUTtBQUNoRyxhQUFhLHVEQUFVO0FBQ3ZCO0FBQ0EsMkNBQTJDLGlEQUFJLHlCQUF5QixRQUFRO0FBQ2hGLDhDQUE4QyxpREFBSSx3QkFBd0IsUUFBUTtBQUNsRiw0Q0FBNEMsaURBQUkseUJBQXlCLFFBQVE7QUFDakYscUNBQXFDLCtDQUFFO0FBQ3ZDLHNDQUFzQyxnREFBRztBQUN6QyxxQ0FBcUMsK0NBQUU7QUFDdkMscUNBQXFDLCtDQUFFO0FBQ3ZDLHNDQUFzQyxnREFBRztBQUN6QyxZQUFZLCtDQUFFO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdEQUFHO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDRDQUE0QyxvRUFBZSw2QkFBNkIsUUFBUTtBQUNoRyxZQUFZLG9EQUFPO0FBQ25CO0FBQ0E7QUFDQSw0Q0FBNEMsb0VBQWUsNkJBQTZCLFFBQVE7QUFDaEcsWUFBWSx1REFBVTtBQUN0QjtBQUNBLDBDQUEwQyxpREFBSSx5QkFBeUIsUUFBUTtBQUMvRSw2Q0FBNkMsaURBQUksd0JBQXdCLFFBQVE7QUFDakYsMkNBQTJDLGlEQUFJLHlCQUF5QixRQUFRO0FBQ2hGLG9DQUFvQywrQ0FBRTtBQUN0QyxxQ0FBcUMsZ0RBQUc7QUFDeEMsb0NBQW9DLCtDQUFFO0FBQ3RDLHFDQUFxQyxnREFBRztBQUN4QyxvQ0FBb0MsK0NBQUU7QUFDdEMsV0FBVywrQ0FBRTtBQUNiLElBQUk7QUFDSixvQkFBb0IsK0NBQUU7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNENBQTRDLG9FQUFlLDZCQUE2QixRQUFRO0FBQ2hHLFlBQVksb0RBQU87QUFDbkI7QUFDQTtBQUNBLDRDQUE0QyxvRUFBZSw2QkFBNkIsUUFBUTtBQUNoRyxZQUFZLHVEQUFVO0FBQ3RCO0FBQ0EsMENBQTBDLGlEQUFJLHlCQUF5QixRQUFRO0FBQy9FLDZDQUE2QyxpREFBSSx3QkFBd0IsUUFBUTtBQUNqRiwyQ0FBMkMsaURBQUkseUJBQXlCLFFBQVE7QUFDaEYsb0NBQW9DLCtDQUFFO0FBQ3RDLHFDQUFxQyxnREFBRztBQUN4QyxvQ0FBb0MsK0NBQUU7QUFDdEMscUNBQXFDLGdEQUFHO0FBQ3hDLG9DQUFvQywrQ0FBRTtBQUN0QyxXQUFXLCtDQUFFO0FBQ2IsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvRUFBZTtBQUN6Qyx5REFBeUQsb0VBQWUsZUFBZSxJQUFJLDJCQUEyQixNQUFNO0FBQzVIO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixtQkFBbUIsb0JBQW9CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLEtBQUsseURBQU0sMENBQTBDLE1BQU07QUFDM0QsS0FBSyx5REFBTTtBQUNYLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUSxFQUFFLGFBQWEseUJBQXlCO0FBQ25FLGdEQUFnRCxRQUFRLEVBQUUsYUFBYTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG9CQUFvQiwyQ0FBMkM7QUFDL0Q7QUFDQTtBQUNBLGtEQUFrRCw2Q0FBSSxHQUFHLDRDQUFHO0FBQzVEO0FBQ0EsS0FBSyx5REFBTSwwQ0FBMEMsTUFBTTtBQUMzRCxLQUFLLHlEQUFNO0FBQ1gsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixRQUFRLEVBQUUsYUFBYSx5QkFBeUI7QUFDbkUsZ0RBQWdELFFBQVEsRUFBRSxhQUFhO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBLGdDQUFnQyxPQUFPLGtEQUFLLElBQUk7QUFDaEQsSUFBSTtBQUNKLGtCQUFrQiw4QkFBOEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHNCQUFzQiw4QkFBOEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5REFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0ZBQW9CO0FBQ2xDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0EsaUJBQWlCLGtGQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxkcml6emxlLWFkYXB0ZXJcXGRyaXp6bGUtYWRhcHRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVBZGFwdGVyRmFjdG9yeSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYi9hZGFwdGVyXCI7XG5pbXBvcnQgeyBhbmQsIGFzYywgY291bnQsIGRlc2MsIGVxLCBndCwgZ3RlLCBpbkFycmF5LCBsaWtlLCBsdCwgbHRlLCBuZSwgbm90SW5BcnJheSwgb3IsIHNxbCB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2RyaXp6bGUtYWRhcHRlci9kcml6emxlLWFkYXB0ZXIudHNcbmNvbnN0IGRyaXp6bGVBZGFwdGVyID0gKGRiLCBjb25maWcpID0+IHtcblx0bGV0IGxhenlPcHRpb25zID0gbnVsbDtcblx0Y29uc3QgY3JlYXRlQ3VzdG9tQWRhcHRlciA9IChkYiQxKSA9PiAoeyBnZXRGaWVsZE5hbWUsIG9wdGlvbnMgfSkgPT4ge1xuXHRcdGZ1bmN0aW9uIGdldFNjaGVtYShtb2RlbCkge1xuXHRcdFx0Y29uc3Qgc2NoZW1hID0gY29uZmlnLnNjaGVtYSB8fCBkYiQxLl8uZnVsbFNjaGVtYTtcblx0XHRcdGlmICghc2NoZW1hKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRHJpenpsZSBhZGFwdGVyIGZhaWxlZCB0byBpbml0aWFsaXplLiBTY2hlbWEgbm90IGZvdW5kLiBQbGVhc2UgcHJvdmlkZSBhIHNjaGVtYSBvYmplY3QgaW4gdGhlIGFkYXB0ZXIgb3B0aW9ucyBvYmplY3QuXCIpO1xuXHRcdFx0Y29uc3Qgc2NoZW1hTW9kZWwgPSBzY2hlbWFbbW9kZWxdO1xuXHRcdFx0aWYgKCFzY2hlbWFNb2RlbCkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihgWyMgRHJpenpsZSBBZGFwdGVyXTogVGhlIG1vZGVsIFwiJHttb2RlbH1cIiB3YXMgbm90IGZvdW5kIGluIHRoZSBzY2hlbWEgb2JqZWN0LiBQbGVhc2UgcGFzcyB0aGUgc2NoZW1hIGRpcmVjdGx5IHRvIHRoZSBhZGFwdGVyIG9wdGlvbnMuYCk7XG5cdFx0XHRyZXR1cm4gc2NoZW1hTW9kZWw7XG5cdFx0fVxuXHRcdGNvbnN0IHdpdGhSZXR1cm5pbmcgPSBhc3luYyAobW9kZWwsIGJ1aWxkZXIsIGRhdGEsIHdoZXJlKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlnLnByb3ZpZGVyICE9PSBcIm15c3FsXCIpIHJldHVybiAoYXdhaXQgYnVpbGRlci5yZXR1cm5pbmcoKSlbMF07XG5cdFx0XHRhd2FpdCBidWlsZGVyLmV4ZWN1dGUoKTtcblx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdGNvbnN0IGJ1aWxkZXJWYWwgPSBidWlsZGVyLmNvbmZpZz8udmFsdWVzO1xuXHRcdFx0aWYgKHdoZXJlPy5sZW5ndGgpIHtcblx0XHRcdFx0Y29uc3QgY2xhdXNlID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLm1hcCgodykgPT4ge1xuXHRcdFx0XHRcdGlmIChkYXRhW3cuZmllbGRdICE9PSB2b2lkIDApIHJldHVybiB7XG5cdFx0XHRcdFx0XHQuLi53LFxuXHRcdFx0XHRcdFx0dmFsdWU6IGRhdGFbdy5maWVsZF1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHJldHVybiB3O1xuXHRcdFx0XHR9KSwgbW9kZWwpO1xuXHRcdFx0XHRyZXR1cm4gKGF3YWl0IGRiJDEuc2VsZWN0KCkuZnJvbShzY2hlbWFNb2RlbCkud2hlcmUoLi4uY2xhdXNlKSlbMF07XG5cdFx0XHR9IGVsc2UgaWYgKGJ1aWxkZXJWYWwgJiYgYnVpbGRlclZhbFswXT8uaWQ/LnZhbHVlKSB7XG5cdFx0XHRcdGxldCB0SWQgPSBidWlsZGVyVmFsWzBdPy5pZD8udmFsdWU7XG5cdFx0XHRcdGlmICghdElkKSB0SWQgPSAoYXdhaXQgZGIkMS5zZWxlY3QoeyBpZDogc3FsYExBU1RfSU5TRVJUX0lEKClgIH0pLmZyb20oc2NoZW1hTW9kZWwpLm9yZGVyQnkoZGVzYyhzY2hlbWFNb2RlbC5pZCkpLmxpbWl0KDEpKVswXS5pZDtcblx0XHRcdFx0cmV0dXJuIChhd2FpdCBkYiQxLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLndoZXJlKGVxKHNjaGVtYU1vZGVsLmlkLCB0SWQpKS5saW1pdCgxKS5leGVjdXRlKCkpWzBdO1xuXHRcdFx0fSBlbHNlIGlmIChkYXRhLmlkKSByZXR1cm4gKGF3YWl0IGRiJDEuc2VsZWN0KCkuZnJvbShzY2hlbWFNb2RlbCkud2hlcmUoZXEoc2NoZW1hTW9kZWwuaWQsIGRhdGEuaWQpKS5saW1pdCgxKS5leGVjdXRlKCkpWzBdO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmICghKFwiaWRcIiBpbiBzY2hlbWFNb2RlbCkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSBtb2RlbCBcIiR7bW9kZWx9XCIgZG9lcyBub3QgaGF2ZSBhbiBcImlkXCIgZmllbGQuIFBsZWFzZSB1c2UgdGhlIFwiaWRcIiBmaWVsZCBhcyB5b3VyIHByaW1hcnkga2V5LmApO1xuXHRcdFx0XHRyZXR1cm4gKGF3YWl0IGRiJDEuc2VsZWN0KCkuZnJvbShzY2hlbWFNb2RlbCkub3JkZXJCeShkZXNjKHNjaGVtYU1vZGVsLmlkKSkubGltaXQoMSkuZXhlY3V0ZSgpKVswXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGZ1bmN0aW9uIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpIHtcblx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdGlmICghd2hlcmUpIHJldHVybiBbXTtcblx0XHRcdGlmICh3aGVyZS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0Y29uc3QgdyA9IHdoZXJlWzBdO1xuXHRcdFx0XHRpZiAoIXcpIHJldHVybiBbXTtcblx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdGZpZWxkOiB3LmZpZWxkXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXNjaGVtYU1vZGVsW2ZpZWxkXSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihgVGhlIGZpZWxkIFwiJHt3LmZpZWxkfVwiIGRvZXMgbm90IGV4aXN0IGluIHRoZSBzY2hlbWEgZm9yIHRoZSBtb2RlbCBcIiR7bW9kZWx9XCIuIFBsZWFzZSB1cGRhdGUgeW91ciBzY2hlbWEuYCk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImluXCIpIHtcblx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkody52YWx1ZSkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSB2YWx1ZSBmb3IgdGhlIGZpZWxkIFwiJHt3LmZpZWxkfVwiIG11c3QgYmUgYW4gYXJyYXkgd2hlbiB1c2luZyB0aGUgXCJpblwiIG9wZXJhdG9yLmApO1xuXHRcdFx0XHRcdHJldHVybiBbaW5BcnJheShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJub3RfaW5cIikge1xuXHRcdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh3LnZhbHVlKSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihgVGhlIHZhbHVlIGZvciB0aGUgZmllbGQgXCIke3cuZmllbGR9XCIgbXVzdCBiZSBhbiBhcnJheSB3aGVuIHVzaW5nIHRoZSBcIm5vdF9pblwiIG9wZXJhdG9yLmApO1xuXHRcdFx0XHRcdHJldHVybiBbbm90SW5BcnJheShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJjb250YWluc1wiKSByZXR1cm4gW2xpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJSR7dy52YWx1ZX0lYCldO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJzdGFydHNfd2l0aFwiKSByZXR1cm4gW2xpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJHt3LnZhbHVlfSVgKV07XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImVuZHNfd2l0aFwiKSByZXR1cm4gW2xpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJSR7dy52YWx1ZX1gKV07XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImx0XCIpIHJldHVybiBbbHQoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImx0ZVwiKSByZXR1cm4gW2x0ZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibmVcIikgcmV0dXJuIFtuZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZ3RcIikgcmV0dXJuIFtndChzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZ3RlXCIpIHJldHVybiBbZ3RlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSldO1xuXHRcdFx0XHRyZXR1cm4gW2VxKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSldO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgYW5kR3JvdXAgPSB3aGVyZS5maWx0ZXIoKHcpID0+IHcuY29ubmVjdG9yID09PSBcIkFORFwiIHx8ICF3LmNvbm5lY3Rvcik7XG5cdFx0XHRjb25zdCBvckdyb3VwID0gd2hlcmUuZmlsdGVyKCh3KSA9PiB3LmNvbm5lY3RvciA9PT0gXCJPUlwiKTtcblx0XHRcdGNvbnN0IGFuZENsYXVzZSA9IGFuZCguLi5hbmRHcm91cC5tYXAoKHcpID0+IHtcblx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdGZpZWxkOiB3LmZpZWxkXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJpblwiKSB7XG5cdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHcudmFsdWUpKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgdmFsdWUgZm9yIHRoZSBmaWVsZCBcIiR7dy5maWVsZH1cIiBtdXN0IGJlIGFuIGFycmF5IHdoZW4gdXNpbmcgdGhlIFwiaW5cIiBvcGVyYXRvci5gKTtcblx0XHRcdFx0XHRyZXR1cm4gaW5BcnJheShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcIm5vdF9pblwiKSB7XG5cdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHcudmFsdWUpKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgdmFsdWUgZm9yIHRoZSBmaWVsZCBcIiR7dy5maWVsZH1cIiBtdXN0IGJlIGFuIGFycmF5IHdoZW4gdXNpbmcgdGhlIFwibm90X2luXCIgb3BlcmF0b3IuYCk7XG5cdFx0XHRcdFx0cmV0dXJuIG5vdEluQXJyYXkoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJjb250YWluc1wiKSByZXR1cm4gbGlrZShzY2hlbWFNb2RlbFtmaWVsZF0sIGAlJHt3LnZhbHVlfSVgKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwic3RhcnRzX3dpdGhcIikgcmV0dXJuIGxpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJHt3LnZhbHVlfSVgKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZW5kc193aXRoXCIpIHJldHVybiBsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCUke3cudmFsdWV9YCk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImx0XCIpIHJldHVybiBsdChzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJsdGVcIikgcmV0dXJuIGx0ZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJndFwiKSByZXR1cm4gZ3Qoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZ3RlXCIpIHJldHVybiBndGUoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibmVcIikgcmV0dXJuIG5lKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdHJldHVybiBlcShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0fSkpO1xuXHRcdFx0Y29uc3Qgb3JDbGF1c2UgPSBvciguLi5vckdyb3VwLm1hcCgodykgPT4ge1xuXHRcdFx0XHRjb25zdCBmaWVsZCA9IGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0ZmllbGQ6IHcuZmllbGRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImluXCIpIHtcblx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkody52YWx1ZSkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSB2YWx1ZSBmb3IgdGhlIGZpZWxkIFwiJHt3LmZpZWxkfVwiIG11c3QgYmUgYW4gYXJyYXkgd2hlbiB1c2luZyB0aGUgXCJpblwiIG9wZXJhdG9yLmApO1xuXHRcdFx0XHRcdHJldHVybiBpbkFycmF5KHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibm90X2luXCIpIHtcblx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkody52YWx1ZSkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSB2YWx1ZSBmb3IgdGhlIGZpZWxkIFwiJHt3LmZpZWxkfVwiIG11c3QgYmUgYW4gYXJyYXkgd2hlbiB1c2luZyB0aGUgXCJub3RfaW5cIiBvcGVyYXRvci5gKTtcblx0XHRcdFx0XHRyZXR1cm4gbm90SW5BcnJheShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImNvbnRhaW5zXCIpIHJldHVybiBsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCUke3cudmFsdWV9JWApO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJzdGFydHNfd2l0aFwiKSByZXR1cm4gbGlrZShzY2hlbWFNb2RlbFtmaWVsZF0sIGAke3cudmFsdWV9JWApO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJlbmRzX3dpdGhcIikgcmV0dXJuIGxpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJSR7dy52YWx1ZX1gKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibHRcIikgcmV0dXJuIGx0KHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImx0ZVwiKSByZXR1cm4gbHRlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImd0XCIpIHJldHVybiBndChzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJndGVcIikgcmV0dXJuIGd0ZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJuZVwiKSByZXR1cm4gbmUoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0cmV0dXJuIGVxKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHR9KSk7XG5cdFx0XHRjb25zdCBjbGF1c2UgPSBbXTtcblx0XHRcdGlmIChhbmRHcm91cC5sZW5ndGgpIGNsYXVzZS5wdXNoKGFuZENsYXVzZSk7XG5cdFx0XHRpZiAob3JHcm91cC5sZW5ndGgpIGNsYXVzZS5wdXNoKG9yQ2xhdXNlKTtcblx0XHRcdHJldHVybiBjbGF1c2U7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGNoZWNrTWlzc2luZ0ZpZWxkcyhzY2hlbWEsIG1vZGVsLCB2YWx1ZXMpIHtcblx0XHRcdGlmICghc2NoZW1hKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRHJpenpsZSBhZGFwdGVyIGZhaWxlZCB0byBpbml0aWFsaXplLiBEcml6emxlIFNjaGVtYSBub3QgZm91bmQuIFBsZWFzZSBwcm92aWRlIGEgc2NoZW1hIG9iamVjdCBpbiB0aGUgYWRhcHRlciBvcHRpb25zIG9iamVjdC5cIik7XG5cdFx0XHRmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZXMpIGlmICghc2NoZW1hW2tleV0pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSBmaWVsZCBcIiR7a2V5fVwiIGRvZXMgbm90IGV4aXN0IGluIHRoZSBcIiR7bW9kZWx9XCIgRHJpenpsZSBzY2hlbWEuIFBsZWFzZSB1cGRhdGUgeW91ciBkcml6emxlIHNjaGVtYSBvciByZS1nZW5lcmF0ZSB1c2luZyBcIm5weCBAYmV0dGVyLWF1dGgvY2xpQGxhdGVzdCBnZW5lcmF0ZVwiLmApO1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0YXN5bmMgY3JlYXRlKHsgbW9kZWwsIGRhdGE6IHZhbHVlcyB9KSB7XG5cdFx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdFx0Y2hlY2tNaXNzaW5nRmllbGRzKHNjaGVtYU1vZGVsLCBtb2RlbCwgdmFsdWVzKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHdpdGhSZXR1cm5pbmcobW9kZWwsIGRiJDEuaW5zZXJ0KHNjaGVtYU1vZGVsKS52YWx1ZXModmFsdWVzKSwgdmFsdWVzKTtcblx0XHRcdH0sXG5cdFx0XHRhc3luYyBmaW5kT25lKHsgbW9kZWwsIHdoZXJlLCBqb2luIH0pIHtcblx0XHRcdFx0Y29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuXHRcdFx0XHRjb25zdCBjbGF1c2UgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0aWYgKG9wdGlvbnMuZXhwZXJpbWVudGFsPy5qb2lucykgaWYgKCFkYiQxLnF1ZXJ5IHx8ICFkYiQxLnF1ZXJ5W21vZGVsXSkge1xuXHRcdFx0XHRcdGxvZ2dlci5lcnJvcihgWyMgRHJpenpsZSBBZGFwdGVyXTogVGhlIG1vZGVsIFwiJHttb2RlbH1cIiB3YXMgbm90IGZvdW5kIGluIHRoZSBxdWVyeSBvYmplY3QuIFBsZWFzZSB1cGRhdGUgeW91ciBEcml6emxlIHNjaGVtYSB0byBpbmNsdWRlIHJlbGF0aW9ucyBvciByZS1nZW5lcmF0ZSB1c2luZyBcIm5weCBAYmV0dGVyLWF1dGgvY2xpQGxhdGVzdCBnZW5lcmF0ZVwiLmApO1xuXHRcdFx0XHRcdGxvZ2dlci5pbmZvKFwiRmFsbGluZyBiYWNrIHRvIHJlZ3VsYXIgcXVlcnlcIik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGV0IGluY2x1ZGVzO1xuXHRcdFx0XHRcdGNvbnN0IHBsdXJhbEpvaW5SZXN1bHRzID0gW107XG5cdFx0XHRcdFx0aWYgKGpvaW4pIHtcblx0XHRcdFx0XHRcdGluY2x1ZGVzID0ge307XG5cdFx0XHRcdFx0XHRjb25zdCBqb2luRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGpvaW4pO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbbW9kZWwkMSwgam9pbkF0dHJdIG9mIGpvaW5FbnRyaWVzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbWl0ID0gam9pbkF0dHIubGltaXQgPz8gb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmRlZmF1bHRGaW5kTWFueUxpbWl0ID8/IDEwMDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNVbmlxdWUgPSBqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCI7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHBsdXJhbFN1ZmZpeCA9IGlzVW5pcXVlIHx8IGNvbmZpZy51c2VQbHVyYWwgPyBcIlwiIDogXCJzXCI7XG5cdFx0XHRcdFx0XHRcdGluY2x1ZGVzW2Ake21vZGVsJDF9JHtwbHVyYWxTdWZmaXh9YF0gPSBpc1VuaXF1ZSA/IHRydWUgOiB7IGxpbWl0IH07XG5cdFx0XHRcdFx0XHRcdGlmICghaXNVbmlxdWUpIHBsdXJhbEpvaW5SZXN1bHRzLnB1c2goYCR7bW9kZWwkMX0ke3BsdXJhbFN1ZmZpeH1gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgcmVzJDEgPSBhd2FpdCBkYiQxLnF1ZXJ5W21vZGVsXS5maW5kRmlyc3Qoe1xuXHRcdFx0XHRcdFx0d2hlcmU6IGNsYXVzZVswXSxcblx0XHRcdFx0XHRcdHdpdGg6IGluY2x1ZGVzXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKHJlcyQxKSBmb3IgKGNvbnN0IHBsdXJhbEpvaW5SZXN1bHQgb2YgcGx1cmFsSm9pblJlc3VsdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNpbmd1bGFyS2V5ID0gIWNvbmZpZy51c2VQbHVyYWwgPyBwbHVyYWxKb2luUmVzdWx0LnNsaWNlKDAsIC0xKSA6IHBsdXJhbEpvaW5SZXN1bHQ7XG5cdFx0XHRcdFx0XHRyZXMkMVtzaW5ndWxhcktleV0gPSByZXMkMVtwbHVyYWxKb2luUmVzdWx0XTtcblx0XHRcdFx0XHRcdGlmIChwbHVyYWxKb2luUmVzdWx0ICE9PSBzaW5ndWxhcktleSkgZGVsZXRlIHJlcyQxW3BsdXJhbEpvaW5SZXN1bHRdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzJDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgZGIkMS5zZWxlY3QoKS5mcm9tKHNjaGVtYU1vZGVsKS53aGVyZSguLi5jbGF1c2UpO1xuXHRcdFx0XHRpZiAoIXJlcy5sZW5ndGgpIHJldHVybiBudWxsO1xuXHRcdFx0XHRyZXR1cm4gcmVzWzBdO1xuXHRcdFx0fSxcblx0XHRcdGFzeW5jIGZpbmRNYW55KHsgbW9kZWwsIHdoZXJlLCBzb3J0QnksIGxpbWl0LCBvZmZzZXQsIGpvaW4gfSkge1xuXHRcdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGNsYXVzZSA9IHdoZXJlID8gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCkgOiBbXTtcblx0XHRcdFx0Y29uc3Qgc29ydEZuID0gc29ydEJ5Py5kaXJlY3Rpb24gPT09IFwiZGVzY1wiID8gZGVzYyA6IGFzYztcblx0XHRcdFx0aWYgKG9wdGlvbnMuZXhwZXJpbWVudGFsPy5qb2lucykgaWYgKCFkYiQxLnF1ZXJ5W21vZGVsXSkge1xuXHRcdFx0XHRcdGxvZ2dlci5lcnJvcihgWyMgRHJpenpsZSBBZGFwdGVyXTogVGhlIG1vZGVsIFwiJHttb2RlbH1cIiB3YXMgbm90IGZvdW5kIGluIHRoZSBxdWVyeSBvYmplY3QuIFBsZWFzZSB1cGRhdGUgeW91ciBEcml6emxlIHNjaGVtYSB0byBpbmNsdWRlIHJlbGF0aW9ucyBvciByZS1nZW5lcmF0ZSB1c2luZyBcIm5weCBAYmV0dGVyLWF1dGgvY2xpQGxhdGVzdCBnZW5lcmF0ZVwiLmApO1xuXHRcdFx0XHRcdGxvZ2dlci5pbmZvKFwiRmFsbGluZyBiYWNrIHRvIHJlZ3VsYXIgcXVlcnlcIik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGV0IGluY2x1ZGVzO1xuXHRcdFx0XHRcdGNvbnN0IHBsdXJhbEpvaW5SZXN1bHRzID0gW107XG5cdFx0XHRcdFx0aWYgKGpvaW4pIHtcblx0XHRcdFx0XHRcdGluY2x1ZGVzID0ge307XG5cdFx0XHRcdFx0XHRjb25zdCBqb2luRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGpvaW4pO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbbW9kZWwkMSwgam9pbkF0dHJdIG9mIGpvaW5FbnRyaWVzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlzVW5pcXVlID0gam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW1pdCQxID0gam9pbkF0dHIubGltaXQgPz8gb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmRlZmF1bHRGaW5kTWFueUxpbWl0ID8/IDEwMDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGx1cmFsU3VmZml4ID0gaXNVbmlxdWUgfHwgY29uZmlnLnVzZVBsdXJhbCA/IFwiXCIgOiBcInNcIjtcblx0XHRcdFx0XHRcdFx0aW5jbHVkZXNbYCR7bW9kZWwkMX0ke3BsdXJhbFN1ZmZpeH1gXSA9IGlzVW5pcXVlID8gdHJ1ZSA6IHsgbGltaXQ6IGxpbWl0JDEgfTtcblx0XHRcdFx0XHRcdFx0aWYgKCFpc1VuaXF1ZSkgcGx1cmFsSm9pblJlc3VsdHMucHVzaChgJHttb2RlbCQxfSR7cGx1cmFsU3VmZml4fWApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsZXQgb3JkZXJCeSA9IHZvaWQgMDtcblx0XHRcdFx0XHRpZiAoc29ydEJ5Py5maWVsZCkgb3JkZXJCeSA9IFtzb3J0Rm4oc2NoZW1hTW9kZWxbZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeT8uZmllbGRcblx0XHRcdFx0XHR9KV0pXTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBkYiQxLnF1ZXJ5W21vZGVsXS5maW5kTWFueSh7XG5cdFx0XHRcdFx0XHR3aGVyZTogY2xhdXNlWzBdLFxuXHRcdFx0XHRcdFx0d2l0aDogaW5jbHVkZXMsXG5cdFx0XHRcdFx0XHRsaW1pdDogbGltaXQgPz8gMTAwLFxuXHRcdFx0XHRcdFx0b2Zmc2V0OiBvZmZzZXQgPz8gMCxcblx0XHRcdFx0XHRcdG9yZGVyQnlcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAocmVzKSBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzKSBmb3IgKGNvbnN0IHBsdXJhbEpvaW5SZXN1bHQgb2YgcGx1cmFsSm9pblJlc3VsdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNpbmd1bGFyS2V5ID0gIWNvbmZpZy51c2VQbHVyYWwgPyBwbHVyYWxKb2luUmVzdWx0LnNsaWNlKDAsIC0xKSA6IHBsdXJhbEpvaW5SZXN1bHQ7XG5cdFx0XHRcdFx0XHRpZiAoc2luZ3VsYXJLZXkgPT09IHBsdXJhbEpvaW5SZXN1bHQpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0aXRlbVtzaW5ndWxhcktleV0gPSBpdGVtW3BsdXJhbEpvaW5SZXN1bHRdO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIGl0ZW1bcGx1cmFsSm9pblJlc3VsdF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGV0IGJ1aWxkZXIgPSBkYiQxLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpO1xuXHRcdFx0XHRjb25zdCBlZmZlY3RpdmVMaW1pdCA9IGxpbWl0O1xuXHRcdFx0XHRjb25zdCBlZmZlY3RpdmVPZmZzZXQgPSBvZmZzZXQ7XG5cdFx0XHRcdGlmICh0eXBlb2YgZWZmZWN0aXZlTGltaXQgIT09IFwidW5kZWZpbmVkXCIpIGJ1aWxkZXIgPSBidWlsZGVyLmxpbWl0KGVmZmVjdGl2ZUxpbWl0KTtcblx0XHRcdFx0aWYgKHR5cGVvZiBlZmZlY3RpdmVPZmZzZXQgIT09IFwidW5kZWZpbmVkXCIpIGJ1aWxkZXIgPSBidWlsZGVyLm9mZnNldChlZmZlY3RpdmVPZmZzZXQpO1xuXHRcdFx0XHRpZiAoc29ydEJ5Py5maWVsZCkgYnVpbGRlciA9IGJ1aWxkZXIub3JkZXJCeShzb3J0Rm4oc2NoZW1hTW9kZWxbZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRmaWVsZDogc29ydEJ5Py5maWVsZFxuXHRcdFx0XHR9KV0pKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGJ1aWxkZXIud2hlcmUoLi4uY2xhdXNlKTtcblx0XHRcdH0sXG5cdFx0XHRhc3luYyBjb3VudCh7IG1vZGVsLCB3aGVyZSB9KSB7XG5cdFx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgY2xhdXNlID0gd2hlcmUgPyBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKSA6IFtdO1xuXHRcdFx0XHRyZXR1cm4gKGF3YWl0IGRiJDEuc2VsZWN0KHsgY291bnQ6IGNvdW50KCkgfSkuZnJvbShzY2hlbWFNb2RlbCkud2hlcmUoLi4uY2xhdXNlKSlbMF0uY291bnQ7XG5cdFx0XHR9LFxuXHRcdFx0YXN5bmMgdXBkYXRlKHsgbW9kZWwsIHdoZXJlLCB1cGRhdGU6IHZhbHVlcyB9KSB7XG5cdFx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgY2xhdXNlID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdHJldHVybiBhd2FpdCB3aXRoUmV0dXJuaW5nKG1vZGVsLCBkYiQxLnVwZGF0ZShzY2hlbWFNb2RlbCkuc2V0KHZhbHVlcykud2hlcmUoLi4uY2xhdXNlKSwgdmFsdWVzLCB3aGVyZSk7XG5cdFx0XHR9LFxuXHRcdFx0YXN5bmMgdXBkYXRlTWFueSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuXHRcdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgZGIkMS51cGRhdGUoc2NoZW1hTW9kZWwpLnNldCh2YWx1ZXMpLndoZXJlKC4uLmNsYXVzZSk7XG5cdFx0XHR9LFxuXHRcdFx0YXN5bmMgZGVsZXRlKHsgbW9kZWwsIHdoZXJlIH0pIHtcblx0XHRcdFx0Y29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuXHRcdFx0XHRjb25zdCBjbGF1c2UgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGRiJDEuZGVsZXRlKHNjaGVtYU1vZGVsKS53aGVyZSguLi5jbGF1c2UpO1xuXHRcdFx0fSxcblx0XHRcdGFzeW5jIGRlbGV0ZU1hbnkoeyBtb2RlbCwgd2hlcmUgfSkge1xuXHRcdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBkYiQxLmRlbGV0ZShzY2hlbWFNb2RlbCkud2hlcmUoLi4uY2xhdXNlKTtcblx0XHRcdFx0bGV0IGNvdW50JDEgPSAwO1xuXHRcdFx0XHRpZiAocmVzICYmIFwicm93Q291bnRcIiBpbiByZXMpIGNvdW50JDEgPSByZXMucm93Q291bnQ7XG5cdFx0XHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVzKSkgY291bnQkMSA9IHJlcy5sZW5ndGg7XG5cdFx0XHRcdGVsc2UgaWYgKHJlcyAmJiAoXCJhZmZlY3RlZFJvd3NcIiBpbiByZXMgfHwgXCJyb3dzQWZmZWN0ZWRcIiBpbiByZXMgfHwgXCJjaGFuZ2VzXCIgaW4gcmVzKSkgY291bnQkMSA9IHJlcy5hZmZlY3RlZFJvd3MgPz8gcmVzLnJvd3NBZmZlY3RlZCA/PyByZXMuY2hhbmdlcztcblx0XHRcdFx0aWYgKHR5cGVvZiBjb3VudCQxICE9PSBcIm51bWJlclwiKSBsb2dnZXIuZXJyb3IoXCJbRHJpenpsZSBBZGFwdGVyXSBUaGUgcmVzdWx0IG9mIHRoZSBkZWxldGVNYW55IG9wZXJhdGlvbiBpcyBub3QgYSBudW1iZXIuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIHRoZSBhZGFwdGVyLiBQbGVhc2UgcmVwb3J0IHRoaXMgaXNzdWUgdG8gdGhlIEJldHRlciBBdXRoIHRlYW0uXCIsIHtcblx0XHRcdFx0XHRyZXMsXG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0d2hlcmVcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjb3VudCQxO1xuXHRcdFx0fSxcblx0XHRcdG9wdGlvbnM6IGNvbmZpZ1xuXHRcdH07XG5cdH07XG5cdGxldCBhZGFwdGVyT3B0aW9ucyA9IG51bGw7XG5cdGFkYXB0ZXJPcHRpb25zID0ge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0YWRhcHRlcklkOiBcImRyaXp6bGVcIixcblx0XHRcdGFkYXB0ZXJOYW1lOiBcIkRyaXp6bGUgQWRhcHRlclwiLFxuXHRcdFx0dXNlUGx1cmFsOiBjb25maWcudXNlUGx1cmFsID8/IGZhbHNlLFxuXHRcdFx0ZGVidWdMb2dzOiBjb25maWcuZGVidWdMb2dzID8/IGZhbHNlLFxuXHRcdFx0c3VwcG9ydHNVVUlEczogY29uZmlnLnByb3ZpZGVyID09PSBcInBnXCIgPyB0cnVlIDogZmFsc2UsXG5cdFx0XHRzdXBwb3J0c0pTT046IGNvbmZpZy5wcm92aWRlciA9PT0gXCJwZ1wiID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0c3VwcG9ydHNBcnJheXM6IGNvbmZpZy5wcm92aWRlciA9PT0gXCJwZ1wiID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0dHJhbnNhY3Rpb246IGNvbmZpZy50cmFuc2FjdGlvbiA/PyBmYWxzZSA/IChjYikgPT4gZGIudHJhbnNhY3Rpb24oKHR4KSA9PiB7XG5cdFx0XHRcdHJldHVybiBjYihjcmVhdGVBZGFwdGVyRmFjdG9yeSh7XG5cdFx0XHRcdFx0Y29uZmlnOiBhZGFwdGVyT3B0aW9ucy5jb25maWcsXG5cdFx0XHRcdFx0YWRhcHRlcjogY3JlYXRlQ3VzdG9tQWRhcHRlcih0eClcblx0XHRcdFx0fSkobGF6eU9wdGlvbnMpKTtcblx0XHRcdH0pIDogZmFsc2Vcblx0XHR9LFxuXHRcdGFkYXB0ZXI6IGNyZWF0ZUN1c3RvbUFkYXB0ZXIoZGIpXG5cdH07XG5cdGNvbnN0IGFkYXB0ZXIgPSBjcmVhdGVBZGFwdGVyRmFjdG9yeShhZGFwdGVyT3B0aW9ucyk7XG5cdHJldHVybiAob3B0aW9ucykgPT4ge1xuXHRcdGxhenlPcHRpb25zID0gb3B0aW9ucztcblx0XHRyZXR1cm4gYWRhcHRlcihvcHRpb25zKTtcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZHJpenpsZUFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyaXp6bGUtYWRhcHRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drizzleAdapter: () => (/* reexport safe */ _drizzle_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.drizzleAdapter)\n/* harmony export */ });\n/* harmony import */ var _drizzle_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drizzle-adapter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMvZHJpenpsZS1hZGFwdGVyL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xcZHJpenpsZS1hZGFwdGVyXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpenpsZUFkYXB0ZXIgfSBmcm9tIFwiLi9kcml6emxlLWFkYXB0ZXIubWpzXCI7XG5cbmV4cG9ydCB7IGRyaXp6bGVBZGFwdGVyIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs ***!
  \**********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BunSqliteDialect: () => (/* binding */ BunSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/bun-sqlite-dialect.ts\nvar BunSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar BunSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new BunSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar BunSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst stmt = this.#db.prepare(sql$1);\n\t\treturn Promise.resolve({ rows: stmt.all(parameters) });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (await this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar BunSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar BunSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar BunSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new BunSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new BunSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new BunSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new BunSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=bun-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvYnVuLXNxbGl0ZS1kaWFsZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5SDs7QUFFekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5QkFBeUI7QUFDbkM7QUFDQSwyQkFBMkIsNEJBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpQ0FBaUM7QUFDOUQ7QUFDQSwyRUFBMkUsMkRBQXVCLHNCQUFzQixnRUFBNEI7QUFDcEo7QUFDQSxtQ0FBbUMsTUFBTTtBQUN6QztBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyQ0FBRyxxQkFBcUIsTUFBTTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx3REFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xca3lzZWx5LWFkYXB0ZXJcXGJ1bi1zcWxpdGUtZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcGlsZWRRdWVyeSwgREVGQVVMVF9NSUdSQVRJT05fTE9DS19UQUJMRSwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUsIERlZmF1bHRRdWVyeUNvbXBpbGVyLCBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvYnVuLXNxbGl0ZS1kaWFsZWN0LnRzXG52YXIgQnVuU3FsaXRlQWRhcHRlciA9IGNsYXNzIHtcblx0Z2V0IHN1cHBvcnRzQ3JlYXRlSWZOb3RFeGlzdHMoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0Z2V0IHN1cHBvcnRzVHJhbnNhY3Rpb25hbERkbCgpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Z2V0IHN1cHBvcnRzUmV0dXJuaW5nKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGFzeW5jIGFjcXVpcmVNaWdyYXRpb25Mb2NrKCkge31cblx0YXN5bmMgcmVsZWFzZU1pZ3JhdGlvbkxvY2soKSB7fVxuXHRnZXQgc3VwcG9ydHNPdXRwdXQoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlRHJpdmVyID0gY2xhc3Mge1xuXHQjY29uZmlnO1xuXHQjY29ubmVjdGlvbk11dGV4ID0gbmV3IENvbm5lY3Rpb25NdXRleCgpO1xuXHQjZGI7XG5cdCNjb25uZWN0aW9uO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHR0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuXHR9XG5cdGFzeW5jIGluaXQoKSB7XG5cdFx0dGhpcy4jZGIgPSB0aGlzLiNjb25maWcuZGF0YWJhc2U7XG5cdFx0dGhpcy4jY29ubmVjdGlvbiA9IG5ldyBCdW5TcWxpdGVDb25uZWN0aW9uKHRoaXMuI2RiKTtcblx0XHRpZiAodGhpcy4jY29uZmlnLm9uQ3JlYXRlQ29ubmVjdGlvbikgYXdhaXQgdGhpcy4jY29uZmlnLm9uQ3JlYXRlQ29ubmVjdGlvbih0aGlzLiNjb25uZWN0aW9uKTtcblx0fVxuXHRhc3luYyBhY3F1aXJlQ29ubmVjdGlvbigpIHtcblx0XHRhd2FpdCB0aGlzLiNjb25uZWN0aW9uTXV0ZXgubG9jaygpO1xuXHRcdHJldHVybiB0aGlzLiNjb25uZWN0aW9uO1xuXHR9XG5cdGFzeW5jIGJlZ2luVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwiYmVnaW5cIikpO1xuXHR9XG5cdGFzeW5jIGNvbW1pdFRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImNvbW1pdFwiKSk7XG5cdH1cblx0YXN5bmMgcm9sbGJhY2tUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJyb2xsYmFja1wiKSk7XG5cdH1cblx0YXN5bmMgcmVsZWFzZUNvbm5lY3Rpb24oKSB7XG5cdFx0dGhpcy4jY29ubmVjdGlvbk11dGV4LnVubG9jaygpO1xuXHR9XG5cdGFzeW5jIGRlc3Ryb3koKSB7XG5cdFx0dGhpcy4jZGI/LmNsb3NlKCk7XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlQ29ubmVjdGlvbiA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0ZXhlY3V0ZVF1ZXJ5KGNvbXBpbGVkUXVlcnkpIHtcblx0XHRjb25zdCB7IHNxbDogc3FsJDEsIHBhcmFtZXRlcnMgfSA9IGNvbXBpbGVkUXVlcnk7XG5cdFx0Y29uc3Qgc3RtdCA9IHRoaXMuI2RiLnByZXBhcmUoc3FsJDEpO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoeyByb3dzOiBzdG10LmFsbChwYXJhbWV0ZXJzKSB9KTtcblx0fVxuXHRhc3luYyAqc3RyZWFtUXVlcnkoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtaW5nIHF1ZXJ5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgU1FMaXRlIGRyaXZlci5cIik7XG5cdH1cbn07XG52YXIgQ29ubmVjdGlvbk11dGV4ID0gY2xhc3Mge1xuXHQjcHJvbWlzZTtcblx0I3Jlc29sdmU7XG5cdGFzeW5jIGxvY2soKSB7XG5cdFx0d2hpbGUgKGF3YWl0IHRoaXMuI3Byb21pc2UpIGF3YWl0IHRoaXMuI3Byb21pc2U7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLiNyZXNvbHZlID0gcmVzb2x2ZTtcblx0XHR9KTtcblx0fVxuXHR1bmxvY2soKSB7XG5cdFx0Y29uc3QgcmVzb2x2ZSA9IHRoaXMuI3Jlc29sdmU7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IHZvaWQgMDtcblx0XHR0aGlzLiNyZXNvbHZlID0gdm9pZCAwO1xuXHRcdHJlc29sdmU/LigpO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZUludHJvc3BlY3RvciA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0YXN5bmMgZ2V0U2NoZW1hcygpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0YXN5bmMgZ2V0VGFibGVzKG9wdGlvbnMgPSB7IHdpdGhJbnRlcm5hbEt5c2VseVRhYmxlczogZmFsc2UgfSkge1xuXHRcdGxldCBxdWVyeSA9IHRoaXMuI2RiLnNlbGVjdEZyb20oXCJzcWxpdGVfc2NoZW1hXCIpLndoZXJlKFwidHlwZVwiLCBcIj1cIiwgXCJ0YWJsZVwiKS53aGVyZShcIm5hbWVcIiwgXCJub3QgbGlrZVwiLCBcInNxbGl0ZV8lXCIpLnNlbGVjdChcIm5hbWVcIikuJGNhc3RUbygpO1xuXHRcdGlmICghb3B0aW9ucy53aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXMpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoXCJuYW1lXCIsIFwiIT1cIiwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUpLndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUpO1xuXHRcdGNvbnN0IHRhYmxlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwodGFibGVzLm1hcCgoeyBuYW1lIH0pID0+IHRoaXMuI2dldFRhYmxlTWV0YWRhdGEobmFtZSkpKTtcblx0fVxuXHRhc3luYyBnZXRNZXRhZGF0YShvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHsgdGFibGVzOiBhd2FpdCB0aGlzLmdldFRhYmxlcyhvcHRpb25zKSB9O1xuXHR9XG5cdGFzeW5jICNnZXRUYWJsZU1ldGFkYXRhKHRhYmxlKSB7XG5cdFx0Y29uc3QgZGIgPSB0aGlzLiNkYjtcblx0XHRjb25zdCBhdXRvSW5jcmVtZW50Q29sID0gKGF3YWl0IGRiLnNlbGVjdEZyb20oXCJzcWxpdGVfbWFzdGVyXCIpLndoZXJlKFwibmFtZVwiLCBcIj1cIiwgdGFibGUpLnNlbGVjdChcInNxbFwiKS4kY2FzdFRvKCkuZXhlY3V0ZSgpKVswXT8uc3FsPy5zcGxpdCgvW1xcKFxcKSxdLyk/LmZpbmQoKGl0KSA9PiBpdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYXV0b2luY3JlbWVudFwiKSk/LnNwbGl0KC9cXHMrLyk/LlswXT8ucmVwbGFjZSgvW1wiYF0vZywgXCJcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRhYmxlLFxuXHRcdFx0Y29sdW1uczogKGF3YWl0IGRiLnNlbGVjdEZyb20oc3FsYHByYWdtYV90YWJsZV9pbmZvKCR7dGFibGV9KWAuYXMoXCJ0YWJsZV9pbmZvXCIpKS5zZWxlY3QoW1xuXHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XCJ0eXBlXCIsXG5cdFx0XHRcdFwibm90bnVsbFwiLFxuXHRcdFx0XHRcImRmbHRfdmFsdWVcIlxuXHRcdFx0XSkuZXhlY3V0ZSgpKS5tYXAoKGNvbCkgPT4gKHtcblx0XHRcdFx0bmFtZTogY29sLm5hbWUsXG5cdFx0XHRcdGRhdGFUeXBlOiBjb2wudHlwZSxcblx0XHRcdFx0aXNOdWxsYWJsZTogIWNvbC5ub3RudWxsLFxuXHRcdFx0XHRpc0F1dG9JbmNyZW1lbnRpbmc6IGNvbC5uYW1lID09PSBhdXRvSW5jcmVtZW50Q29sLFxuXHRcdFx0XHRoYXNEZWZhdWx0VmFsdWU6IGNvbC5kZmx0X3ZhbHVlICE9IG51bGxcblx0XHRcdH0pKSxcblx0XHRcdGlzVmlldzogdHJ1ZVxuXHRcdH07XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlUXVlcnlDb21waWxlciA9IGNsYXNzIGV4dGVuZHMgRGVmYXVsdFF1ZXJ5Q29tcGlsZXIge1xuXHRnZXRDdXJyZW50UGFyYW1ldGVyUGxhY2Vob2xkZXIoKSB7XG5cdFx0cmV0dXJuIFwiP1wiO1xuXHR9XG5cdGdldExlZnRJZGVudGlmaWVyV3JhcHBlcigpIHtcblx0XHRyZXR1cm4gXCJcXFwiXCI7XG5cdH1cblx0Z2V0UmlnaHRJZGVudGlmaWVyV3JhcHBlcigpIHtcblx0XHRyZXR1cm4gXCJcXFwiXCI7XG5cdH1cblx0Z2V0QXV0b0luY3JlbWVudCgpIHtcblx0XHRyZXR1cm4gXCJhdXRvaW5jcmVtZW50XCI7XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlRGlhbGVjdCA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRjcmVhdGVEcml2ZXIoKSB7XG5cdFx0cmV0dXJuIG5ldyBCdW5TcWxpdGVEcml2ZXIodGhpcy4jY29uZmlnKTtcblx0fVxuXHRjcmVhdGVRdWVyeUNvbXBpbGVyKCkge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlUXVlcnlDb21waWxlcigpO1xuXHR9XG5cdGNyZWF0ZUFkYXB0ZXIoKSB7XG5cdFx0cmV0dXJuIG5ldyBCdW5TcWxpdGVBZGFwdGVyKCk7XG5cdH1cblx0Y3JlYXRlSW50cm9zcGVjdG9yKGRiKSB7XG5cdFx0cmV0dXJuIG5ldyBCdW5TcWxpdGVJbnRyb3NwZWN0b3IoZGIpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJ1blNxbGl0ZURpYWxlY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1bi1zcWxpdGUtZGlhbGVjdC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs ***!
  \***********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* binding */ createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* binding */ getKyselyDatabaseType)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/sqlite/sqlite-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/mysql/mysql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/postgres/postgres-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/mssql/mssql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/kysely.js\");\n\n\n//#region src/adapters/kysely-adapter/dialect.ts\nfunction getKyselyDatabaseType(db) {\n\tif (!db) return null;\n\tif (\"dialect\" in db) return getKyselyDatabaseType(db.dialect);\n\tif (\"createDriver\" in db) {\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect) return \"sqlite\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect) return \"mysql\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect) return \"postgres\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_3__.MssqlDialect) return \"mssql\";\n\t}\n\tif (\"aggregate\" in db) return \"sqlite\";\n\tif (\"getConnection\" in db) return \"mysql\";\n\tif (\"connect\" in db) return \"postgres\";\n\tif (\"fileControl\" in db) return \"sqlite\";\n\tif (\"open\" in db && \"close\" in db && \"prepare\" in db) return \"sqlite\";\n\treturn null;\n}\nconst createKyselyAdapter = async (config) => {\n\tconst db = config.database;\n\tif (!db) return {\n\t\tkysely: null,\n\t\tdatabaseType: null,\n\t\ttransaction: void 0\n\t};\n\tif (\"db\" in db) return {\n\t\tkysely: db.db,\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tif (\"dialect\" in db) return {\n\t\tkysely: new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect: db.dialect }),\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tlet dialect = void 0;\n\tconst databaseType = getKyselyDatabaseType(db);\n\tif (\"createDriver\" in db) dialect = db;\n\tif (\"aggregate\" in db && !(\"createSession\" in db)) dialect = new kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect({ database: db });\n\tif (\"getConnection\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect(db);\n\tif (\"connect\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect({ pool: db });\n\tif (\"fileControl\" in db) {\n\t\tconst { BunSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ./bun-sqlite-dialect.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\"));\n\t\tdialect = new BunSqliteDialect({ database: db });\n\t}\n\tif (\"createSession\" in db) {\n\t\tlet DatabaseSync = void 0;\n\t\ttry {\n\t\t\tconst nodeSqlite = \"node:sqlite\";\n\t\t\t({DatabaseSync} = await import(\n\t\t\t\t/* @vite-ignore */\n\t\t\t\t/* webpackIgnore: true */\n\t\t\t\tnodeSqlite\n));\n\t\t} catch (error) {\n\t\t\tif (error !== null && typeof error === \"object\" && \"code\" in error && error.code !== \"ERR_UNKNOWN_BUILTIN_MODULE\") throw error;\n\t\t}\n\t\tif (DatabaseSync && db instanceof DatabaseSync) {\n\t\t\tconst { NodeSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ./node-sqlite-dialect.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\"));\n\t\t\tdialect = new NodeSqliteDialect({ database: db });\n\t\t}\n\t}\n\treturn {\n\t\tkysely: dialect ? new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect }) : null,\n\t\tdatabaseType,\n\t\ttransaction: void 0\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvZGlhbGVjdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE0Rjs7QUFFNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpREFBYTtBQUNqQyxvQkFBb0IsZ0RBQVk7QUFDaEMsb0JBQW9CLG1EQUFlO0FBQ25DLG9CQUFvQixnREFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDBDQUFNLEdBQUcscUJBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxpREFBYSxHQUFHLGNBQWM7QUFDaEcsMENBQTBDLGdEQUFZO0FBQ3RELG9DQUFvQyxtREFBZSxHQUFHLFVBQVU7QUFDaEU7QUFDQSxVQUFVLG1CQUFtQixRQUFRLDBYQUFrQztBQUN2RSxtQ0FBbUMsY0FBYztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxjQUFjO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0JBQW9CLFFBQVEsNFhBQW1DO0FBQzFFLHFDQUFxQyxjQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQ0FBTSxHQUFHLFNBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0Q7QUFDdEQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXGt5c2VseS1hZGFwdGVyXFxkaWFsZWN0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLeXNlbHksIE1zc3FsRGlhbGVjdCwgTXlzcWxEaWFsZWN0LCBQb3N0Z3Jlc0RpYWxlY3QsIFNxbGl0ZURpYWxlY3QgfSBmcm9tIFwia3lzZWx5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvZGlhbGVjdC50c1xuZnVuY3Rpb24gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiKSB7XG5cdGlmICghZGIpIHJldHVybiBudWxsO1xuXHRpZiAoXCJkaWFsZWN0XCIgaW4gZGIpIHJldHVybiBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGIuZGlhbGVjdCk7XG5cdGlmIChcImNyZWF0ZURyaXZlclwiIGluIGRiKSB7XG5cdFx0aWYgKGRiIGluc3RhbmNlb2YgU3FsaXRlRGlhbGVjdCkgcmV0dXJuIFwic3FsaXRlXCI7XG5cdFx0aWYgKGRiIGluc3RhbmNlb2YgTXlzcWxEaWFsZWN0KSByZXR1cm4gXCJteXNxbFwiO1xuXHRcdGlmIChkYiBpbnN0YW5jZW9mIFBvc3RncmVzRGlhbGVjdCkgcmV0dXJuIFwicG9zdGdyZXNcIjtcblx0XHRpZiAoZGIgaW5zdGFuY2VvZiBNc3NxbERpYWxlY3QpIHJldHVybiBcIm1zc3FsXCI7XG5cdH1cblx0aWYgKFwiYWdncmVnYXRlXCIgaW4gZGIpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRpZiAoXCJnZXRDb25uZWN0aW9uXCIgaW4gZGIpIHJldHVybiBcIm15c3FsXCI7XG5cdGlmIChcImNvbm5lY3RcIiBpbiBkYikgcmV0dXJuIFwicG9zdGdyZXNcIjtcblx0aWYgKFwiZmlsZUNvbnRyb2xcIiBpbiBkYikgcmV0dXJuIFwic3FsaXRlXCI7XG5cdGlmIChcIm9wZW5cIiBpbiBkYiAmJiBcImNsb3NlXCIgaW4gZGIgJiYgXCJwcmVwYXJlXCIgaW4gZGIpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRyZXR1cm4gbnVsbDtcbn1cbmNvbnN0IGNyZWF0ZUt5c2VseUFkYXB0ZXIgPSBhc3luYyAoY29uZmlnKSA9PiB7XG5cdGNvbnN0IGRiID0gY29uZmlnLmRhdGFiYXNlO1xuXHRpZiAoIWRiKSByZXR1cm4ge1xuXHRcdGt5c2VseTogbnVsbCxcblx0XHRkYXRhYmFzZVR5cGU6IG51bGwsXG5cdFx0dHJhbnNhY3Rpb246IHZvaWQgMFxuXHR9O1xuXHRpZiAoXCJkYlwiIGluIGRiKSByZXR1cm4ge1xuXHRcdGt5c2VseTogZGIuZGIsXG5cdFx0ZGF0YWJhc2VUeXBlOiBkYi50eXBlLFxuXHRcdHRyYW5zYWN0aW9uOiBkYi50cmFuc2FjdGlvblxuXHR9O1xuXHRpZiAoXCJkaWFsZWN0XCIgaW4gZGIpIHJldHVybiB7XG5cdFx0a3lzZWx5OiBuZXcgS3lzZWx5KHsgZGlhbGVjdDogZGIuZGlhbGVjdCB9KSxcblx0XHRkYXRhYmFzZVR5cGU6IGRiLnR5cGUsXG5cdFx0dHJhbnNhY3Rpb246IGRiLnRyYW5zYWN0aW9uXG5cdH07XG5cdGxldCBkaWFsZWN0ID0gdm9pZCAwO1xuXHRjb25zdCBkYXRhYmFzZVR5cGUgPSBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGIpO1xuXHRpZiAoXCJjcmVhdGVEcml2ZXJcIiBpbiBkYikgZGlhbGVjdCA9IGRiO1xuXHRpZiAoXCJhZ2dyZWdhdGVcIiBpbiBkYiAmJiAhKFwiY3JlYXRlU2Vzc2lvblwiIGluIGRiKSkgZGlhbGVjdCA9IG5ldyBTcWxpdGVEaWFsZWN0KHsgZGF0YWJhc2U6IGRiIH0pO1xuXHRpZiAoXCJnZXRDb25uZWN0aW9uXCIgaW4gZGIpIGRpYWxlY3QgPSBuZXcgTXlzcWxEaWFsZWN0KGRiKTtcblx0aWYgKFwiY29ubmVjdFwiIGluIGRiKSBkaWFsZWN0ID0gbmV3IFBvc3RncmVzRGlhbGVjdCh7IHBvb2w6IGRiIH0pO1xuXHRpZiAoXCJmaWxlQ29udHJvbFwiIGluIGRiKSB7XG5cdFx0Y29uc3QgeyBCdW5TcWxpdGVEaWFsZWN0IH0gPSBhd2FpdCBpbXBvcnQoXCIuL2J1bi1zcWxpdGUtZGlhbGVjdC5tanNcIik7XG5cdFx0ZGlhbGVjdCA9IG5ldyBCdW5TcWxpdGVEaWFsZWN0KHsgZGF0YWJhc2U6IGRiIH0pO1xuXHR9XG5cdGlmIChcImNyZWF0ZVNlc3Npb25cIiBpbiBkYikge1xuXHRcdGxldCBEYXRhYmFzZVN5bmMgPSB2b2lkIDA7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IG5vZGVTcWxpdGUgPSBcIm5vZGU6c3FsaXRlXCI7XG5cdFx0XHQoe0RhdGFiYXNlU3luY30gPSBhd2FpdCBpbXBvcnQoXG5cdFx0XHRcdC8qIEB2aXRlLWlnbm9yZSAqL1xuXHRcdFx0XHQvKiB3ZWJwYWNrSWdub3JlOiB0cnVlICovXG5cdFx0XHRcdG5vZGVTcWxpdGVcbikpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRpZiAoZXJyb3IgIT09IG51bGwgJiYgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIFwiY29kZVwiIGluIGVycm9yICYmIGVycm9yLmNvZGUgIT09IFwiRVJSX1VOS05PV05fQlVJTFRJTl9NT0RVTEVcIikgdGhyb3cgZXJyb3I7XG5cdFx0fVxuXHRcdGlmIChEYXRhYmFzZVN5bmMgJiYgZGIgaW5zdGFuY2VvZiBEYXRhYmFzZVN5bmMpIHtcblx0XHRcdGNvbnN0IHsgTm9kZVNxbGl0ZURpYWxlY3QgfSA9IGF3YWl0IGltcG9ydChcIi4vbm9kZS1zcWxpdGUtZGlhbGVjdC5tanNcIik7XG5cdFx0XHRkaWFsZWN0ID0gbmV3IE5vZGVTcWxpdGVEaWFsZWN0KHsgZGF0YWJhc2U6IGRiIH0pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4ge1xuXHRcdGt5c2VseTogZGlhbGVjdCA/IG5ldyBLeXNlbHkoeyBkaWFsZWN0IH0pIDogbnVsbCxcblx0XHRkYXRhYmFzZVR5cGUsXG5cdFx0dHJhbnNhY3Rpb246IHZvaWQgMFxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVLeXNlbHlBZGFwdGVyLCBnZXRLeXNlbHlEYXRhYmFzZVR5cGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpYWxlY3QubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType),\n/* harmony export */   kyselyAdapter: () => (/* reexport safe */ _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__.kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialect.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kysely-adapter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJFO0FBQ3RCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxreXNlbHktYWRhcHRlclxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIsIGdldEt5c2VseURhdGFiYXNlVHlwZSB9IGZyb20gXCIuL2RpYWxlY3QubWpzXCI7XG5pbXBvcnQgeyBreXNlbHlBZGFwdGVyIH0gZnJvbSBcIi4va3lzZWx5LWFkYXB0ZXIubWpzXCI7XG5cbmV4cG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIsIGdldEt5c2VseURhdGFiYXNlVHlwZSwga3lzZWx5QWRhcHRlciB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kyselyAdapter: () => (/* binding */ kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/kysely-adapter/kysely-adapter.ts\nconst kyselyAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst createCustomAdapter = (db$1) => {\n\t\treturn ({ getFieldName, schema, getDefaultFieldName, getDefaultModelName, getFieldAttributes, getModelName }) => {\n\t\t\tconst selectAllJoins = (join) => {\n\t\t\t\tconst allSelects = [];\n\t\t\t\tconst allSelectsStr = [];\n\t\t\t\tif (join) for (const [joinModel, _] of Object.entries(join)) {\n\t\t\t\t\tconst fields = schema[getDefaultModelName(joinModel)]?.fields;\n\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\tif (!fields) continue;\n\t\t\t\t\tfields.id = { type: \"string\" };\n\t\t\t\t\tfor (const [field, fieldAttr] of Object.entries(fields)) {\n\t\t\t\t\t\tallSelects.push((0,kysely__WEBPACK_IMPORTED_MODULE_1__.sql)`${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`join_${joinModelName}`)}.${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(fieldAttr.fieldName || field)} as ${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`_joined_${joinModelName}_${fieldAttr.fieldName || field}`)}`);\n\t\t\t\t\t\tallSelectsStr.push({\n\t\t\t\t\t\t\tjoinModel,\n\t\t\t\t\t\t\tjoinModelRef: joinModelName,\n\t\t\t\t\t\t\tfieldName: fieldAttr.fieldName || field\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tallSelectsStr,\n\t\t\t\t\tallSelects\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst withReturning = async (values, builder, model, where) => {\n\t\t\t\tlet res;\n\t\t\t\tif (config?.type === \"mysql\") {\n\t\t\t\t\tawait builder.execute();\n\t\t\t\t\tconst field = values.id ? \"id\" : where.length > 0 && where[0]?.field ? where[0].field : \"id\";\n\t\t\t\t\tif (!values.id && where.length === 0) {\n\t\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t}), \"desc\").limit(1).executeTakeFirst();\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = values[field] || where[0]?.value;\n\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"desc\").where(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"=\", value).limit(1).executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\tres = await builder.outputAll(\"inserted\").executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tres = await builder.returningAll().executeTakeFirst();\n\t\t\t\treturn res;\n\t\t\t};\n\t\t\tfunction convertWhereClause(model, w) {\n\t\t\t\tif (!w) return {\n\t\t\t\t\tand: null,\n\t\t\t\t\tor: null\n\t\t\t\t};\n\t\t\t\tconst conditions = {\n\t\t\t\t\tand: [],\n\t\t\t\t\tor: []\n\t\t\t\t};\n\t\t\t\tw.forEach((condition) => {\n\t\t\t\t\tconst { field: _field, value: _value, operator = \"=\", connector = \"AND\" } = condition;\n\t\t\t\t\tconst value = _value;\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: _field\n\t\t\t\t\t});\n\t\t\t\t\tconst expr = (eb) => {\n\t\t\t\t\t\tconst f = `${model}.${field}`;\n\t\t\t\t\t\tif (operator.toLowerCase() === \"in\") return eb(f, \"in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator.toLowerCase() === \"not_in\") return eb(f, \"not in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator === \"contains\") return eb(f, \"like\", `%${value}%`);\n\t\t\t\t\t\tif (operator === \"starts_with\") return eb(f, \"like\", `${value}%`);\n\t\t\t\t\t\tif (operator === \"ends_with\") return eb(f, \"like\", `%${value}`);\n\t\t\t\t\t\tif (operator === \"eq\") return eb(f, \"=\", value);\n\t\t\t\t\t\tif (operator === \"ne\") return eb(f, \"<>\", value);\n\t\t\t\t\t\tif (operator === \"gt\") return eb(f, \">\", value);\n\t\t\t\t\t\tif (operator === \"gte\") return eb(f, \">=\", value);\n\t\t\t\t\t\tif (operator === \"lt\") return eb(f, \"<\", value);\n\t\t\t\t\t\tif (operator === \"lte\") return eb(f, \"<=\", value);\n\t\t\t\t\t\treturn eb(f, operator, value);\n\t\t\t\t\t};\n\t\t\t\t\tif (connector === \"OR\") conditions.or.push(expr);\n\t\t\t\t\telse conditions.and.push(expr);\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tand: conditions.and.length ? conditions.and : null,\n\t\t\t\t\tor: conditions.or.length ? conditions.or : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction processJoinedResults(rows, joinConfig, allSelectsStr) {\n\t\t\t\tif (!joinConfig || !rows.length) return rows;\n\t\t\t\tconst groupedByMainId = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const currentRow of rows) {\n\t\t\t\t\tconst mainModelFields = {};\n\t\t\t\t\tconst joinedModelFields = {};\n\t\t\t\t\tfor (const [joinModel] of Object.entries(joinConfig)) joinedModelFields[getModelName(joinModel)] = {};\n\t\t\t\t\tfor (const [key, value] of Object.entries(currentRow)) {\n\t\t\t\t\t\tconst keyStr = String(key);\n\t\t\t\t\t\tlet assigned = false;\n\t\t\t\t\t\tfor (const { joinModel, fieldName, joinModelRef } of allSelectsStr) if (keyStr === `_joined_${joinModelRef}_${fieldName}`) {\n\t\t\t\t\t\t\tjoinedModelFields[getModelName(joinModel)][getFieldName({\n\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\tfield: fieldName\n\t\t\t\t\t\t\t})] = value;\n\t\t\t\t\t\t\tassigned = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!assigned) mainModelFields[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tconst mainId = mainModelFields.id;\n\t\t\t\t\tif (!mainId) continue;\n\t\t\t\t\tif (!groupedByMainId.has(mainId)) {\n\t\t\t\t\t\tconst entry$1 = { ...mainModelFields };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) entry$1[getModelName(joinModel)] = joinAttr.relation === \"one-to-one\" ? null : [];\n\t\t\t\t\t\tgroupedByMainId.set(mainId, entry$1);\n\t\t\t\t\t}\n\t\t\t\t\tconst entry = groupedByMainId.get(mainId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) {\n\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tconst joinedObj = joinedModelFields[getModelName(joinModel)];\n\t\t\t\t\t\tconst hasData = joinedObj && Object.keys(joinedObj).length > 0 && Object.values(joinedObj).some((value) => value !== null && value !== void 0);\n\t\t\t\t\t\tif (isUnique) entry[getModelName(joinModel)] = hasData ? joinedObj : null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (Array.isArray(entry[joinModelName]) && hasData) {\n\t\t\t\t\t\t\t\tif (entry[joinModelName].length >= limit) continue;\n\t\t\t\t\t\t\t\tconst idFieldName = getFieldName({\n\t\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconst joinedId = joinedObj[idFieldName];\n\t\t\t\t\t\t\t\tif (joinedId) {\n\t\t\t\t\t\t\t\t\tif (!entry[joinModelName].some((item) => item[idFieldName] === joinedId) && entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t\t} else if (entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst result = Array.from(groupedByMainId.values());\n\t\t\t\tfor (const entry of result) for (const [joinModel, joinAttr] of Object.entries(joinConfig)) if (joinAttr.relation !== \"one-to-one\") {\n\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\tif (Array.isArray(entry[joinModelName])) {\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tif (entry[joinModelName].length > limit) entry[joinModelName] = entry[joinModelName].slice(0, limit);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tasync create({ data, model }) {\n\t\t\t\t\treturn await withReturning(data, db$1.insertInto(model).values(data), model, []);\n\t\t\t\t},\n\t\t\t\tasync findOne({ model, where, select, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res || !Array.isArray(res) || res.length === 0) return null;\n\t\t\t\t\tconst row = res[0];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr)[0];\n\t\t\t\t\treturn row;\n\t\t\t\t},\n\t\t\t\tasync findMany({ model, where, limit, offset, sortBy, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\t\t\tif (offset !== void 0) {\n\t\t\t\t\t\t\t\tif (!sortBy) b = b.orderBy(getFieldName({\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tb = b.offset(offset).fetch(limit || 100);\n\t\t\t\t\t\t\t} else if (limit !== void 0) b = b.top(limit);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (limit !== void 0) b = b.limit(limit);\n\t\t\t\t\t\t\tif (offset !== void 0) b = b.offset(offset);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sortBy?.field) b = b.orderBy(`${getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tif (sortBy?.field) query = query.orderBy(`${getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res) return [];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\t\t\t\tasync update({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\treturn await withReturning(values, query, model, where);\n\t\t\t\t},\n\t\t\t\tasync updateMany({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numUpdatedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\tasync count({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom(model).select(db$1.fn.count(\"id\").as(\"count\"));\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (typeof res[0].count === \"number\") return res[0].count;\n\t\t\t\t\tif (typeof res[0].count === \"bigint\") return Number(res[0].count);\n\t\t\t\t\treturn parseInt(res[0].count);\n\t\t\t\t},\n\t\t\t\tasync delete({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tawait query.execute();\n\t\t\t\t},\n\t\t\t\tasync deleteMany({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numDeletedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\toptions: config\n\t\t\t};\n\t\t};\n\t};\n\tlet adapterOptions = null;\n\tadapterOptions = {\n\t\tconfig: {\n\t\t\tadapterId: \"kysely\",\n\t\t\tadapterName: \"Kysely Adapter\",\n\t\t\tusePlural: config?.usePlural,\n\t\t\tdebugLogs: config?.debugLogs,\n\t\t\tsupportsBooleans: config?.type === \"sqlite\" || config?.type === \"mssql\" || config?.type === \"mysql\" || !config?.type ? false : true,\n\t\t\tsupportsDates: config?.type === \"sqlite\" || config?.type === \"mssql\" || !config?.type ? false : true,\n\t\t\tsupportsJSON: config?.type === \"postgres\" ? true : false,\n\t\t\tsupportsArrays: false,\n\t\t\tsupportsUUIDs: config?.type === \"postgres\" ? true : false,\n\t\t\ttransaction: config?.transaction ? (cb) => db.transaction().execute((trx) => {\n\t\t\t\treturn cb((0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)({\n\t\t\t\t\tconfig: adapterOptions.config,\n\t\t\t\t\tadapter: createCustomAdapter(trx)\n\t\t\t\t})(lazyOptions));\n\t\t\t}) : false\n\t\t},\n\t\tadapter: createCustomAdapter(db)\n\t};\n\tconst adapter = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)(adapterOptions);\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapter(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=kysely-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIva3lzZWx5LWFkYXB0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QjtBQUN1Qzs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtHQUFrRztBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBLHNCQUFzQiwyQ0FBRyxHQUFHLHVDQUFHLGFBQWEsY0FBYyxHQUFHLEdBQUcsdUNBQUcsb0NBQW9DLEtBQUssdUNBQUcsZ0JBQWdCLGNBQWMsR0FBRyw2QkFBNkIsR0FBRztBQUNoTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsa0VBQWtFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsbUJBQW1CLE1BQU0sR0FBRyxNQUFNO0FBQ2xDO0FBQ0E7QUFDQSw0REFBNEQsTUFBTTtBQUNsRSw4REFBOEQsTUFBTTtBQUNwRSw2REFBNkQsTUFBTTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUNBQXFDLDRDQUE0QyxhQUFhLEdBQUcsVUFBVTtBQUM5SDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsYUFBYTtBQUNoQztBQUNBLEtBQUs7QUFDTCxvQkFBb0IsNEJBQTRCO0FBQ2hELGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxnQ0FBZ0MsV0FBVyxVQUFVLGNBQWMsb0NBQW9DLGNBQWMsR0FBRyxlQUFlLG1CQUFtQixpQkFBaUI7QUFDM0s7QUFDQSxhQUFhLDRCQUE0QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLDJDQUEyQztBQUNoRSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0EsT0FBTyxFQUFFO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxnQ0FBZ0MsV0FBVyxVQUFVLGNBQWMsb0NBQW9DLGNBQWMsR0FBRyxlQUFlLG1CQUFtQixpQkFBaUI7QUFDM0s7QUFDQSxhQUFhLDRCQUE0QjtBQUN6QztBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0EsTUFBTSxFQUFFO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLDhCQUE4QjtBQUNqRCxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCLDhCQUE4QjtBQUNyRCxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxrQkFBa0IsY0FBYztBQUNoQyxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLGNBQWM7QUFDakMsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QixjQUFjO0FBQ3JDLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtGQUFvQjtBQUNsQztBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLGlCQUFpQixrRkFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xca3lzZWx5LWFkYXB0ZXJcXGt5c2VseS1hZGFwdGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5pbXBvcnQgeyBjcmVhdGVBZGFwdGVyRmFjdG9yeSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYi9hZGFwdGVyXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIva3lzZWx5LWFkYXB0ZXIudHNcbmNvbnN0IGt5c2VseUFkYXB0ZXIgPSAoZGIsIGNvbmZpZykgPT4ge1xuXHRsZXQgbGF6eU9wdGlvbnMgPSBudWxsO1xuXHRjb25zdCBjcmVhdGVDdXN0b21BZGFwdGVyID0gKGRiJDEpID0+IHtcblx0XHRyZXR1cm4gKHsgZ2V0RmllbGROYW1lLCBzY2hlbWEsIGdldERlZmF1bHRGaWVsZE5hbWUsIGdldERlZmF1bHRNb2RlbE5hbWUsIGdldEZpZWxkQXR0cmlidXRlcywgZ2V0TW9kZWxOYW1lIH0pID0+IHtcblx0XHRcdGNvbnN0IHNlbGVjdEFsbEpvaW5zID0gKGpvaW4pID0+IHtcblx0XHRcdFx0Y29uc3QgYWxsU2VsZWN0cyA9IFtdO1xuXHRcdFx0XHRjb25zdCBhbGxTZWxlY3RzU3RyID0gW107XG5cdFx0XHRcdGlmIChqb2luKSBmb3IgKGNvbnN0IFtqb2luTW9kZWwsIF9dIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGRzID0gc2NoZW1hW2dldERlZmF1bHRNb2RlbE5hbWUoam9pbk1vZGVsKV0/LmZpZWxkcztcblx0XHRcdFx0XHRjb25zdCBbX2pvaW5Nb2RlbFNjaGVtYSwgam9pbk1vZGVsTmFtZV0gPSBqb2luTW9kZWwuaW5jbHVkZXMoXCIuXCIpID8gam9pbk1vZGVsLnNwbGl0KFwiLlwiKSA6IFt2b2lkIDAsIGpvaW5Nb2RlbF07XG5cdFx0XHRcdFx0aWYgKCFmaWVsZHMpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGZpZWxkcy5pZCA9IHsgdHlwZTogXCJzdHJpbmdcIiB9O1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2ZpZWxkLCBmaWVsZEF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcykpIHtcblx0XHRcdFx0XHRcdGFsbFNlbGVjdHMucHVzaChzcWxgJHtzcWwucmVmKGBqb2luXyR7am9pbk1vZGVsTmFtZX1gKX0uJHtzcWwucmVmKGZpZWxkQXR0ci5maWVsZE5hbWUgfHwgZmllbGQpfSBhcyAke3NxbC5yZWYoYF9qb2luZWRfJHtqb2luTW9kZWxOYW1lfV8ke2ZpZWxkQXR0ci5maWVsZE5hbWUgfHwgZmllbGR9YCl9YCk7XG5cdFx0XHRcdFx0XHRhbGxTZWxlY3RzU3RyLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRqb2luTW9kZWwsXG5cdFx0XHRcdFx0XHRcdGpvaW5Nb2RlbFJlZjogam9pbk1vZGVsTmFtZSxcblx0XHRcdFx0XHRcdFx0ZmllbGROYW1lOiBmaWVsZEF0dHIuZmllbGROYW1lIHx8IGZpZWxkXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRhbGxTZWxlY3RzU3RyLFxuXHRcdFx0XHRcdGFsbFNlbGVjdHNcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0XHRjb25zdCB3aXRoUmV0dXJuaW5nID0gYXN5bmMgKHZhbHVlcywgYnVpbGRlciwgbW9kZWwsIHdoZXJlKSA9PiB7XG5cdFx0XHRcdGxldCByZXM7XG5cdFx0XHRcdGlmIChjb25maWc/LnR5cGUgPT09IFwibXlzcWxcIikge1xuXHRcdFx0XHRcdGF3YWl0IGJ1aWxkZXIuZXhlY3V0ZSgpO1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkID0gdmFsdWVzLmlkID8gXCJpZFwiIDogd2hlcmUubGVuZ3RoID4gMCAmJiB3aGVyZVswXT8uZmllbGQgPyB3aGVyZVswXS5maWVsZCA6IFwiaWRcIjtcblx0XHRcdFx0XHRpZiAoIXZhbHVlcy5pZCAmJiB3aGVyZS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdHJlcyA9IGF3YWl0IGRiJDEuc2VsZWN0RnJvbShtb2RlbCkuc2VsZWN0QWxsKCkub3JkZXJCeShnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdFx0ZmllbGRcblx0XHRcdFx0XHRcdH0pLCBcImRlc2NcIikubGltaXQoMSkuZXhlY3V0ZVRha2VGaXJzdCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNbZmllbGRdIHx8IHdoZXJlWzBdPy52YWx1ZTtcblx0XHRcdFx0XHRyZXMgPSBhd2FpdCBkYiQxLnNlbGVjdEZyb20obW9kZWwpLnNlbGVjdEFsbCgpLm9yZGVyQnkoZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGRcblx0XHRcdFx0XHR9KSwgXCJkZXNjXCIpLndoZXJlKGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkXG5cdFx0XHRcdFx0fSksIFwiPVwiLCB2YWx1ZSkubGltaXQoMSkuZXhlY3V0ZVRha2VGaXJzdCgpO1xuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiKSB7XG5cdFx0XHRcdFx0cmVzID0gYXdhaXQgYnVpbGRlci5vdXRwdXRBbGwoXCJpbnNlcnRlZFwiKS5leGVjdXRlVGFrZUZpcnN0KCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXMgPSBhd2FpdCBidWlsZGVyLnJldHVybmluZ0FsbCgpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcblx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdH07XG5cdFx0XHRmdW5jdGlvbiBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHcpIHtcblx0XHRcdFx0aWYgKCF3KSByZXR1cm4ge1xuXHRcdFx0XHRcdGFuZDogbnVsbCxcblx0XHRcdFx0XHRvcjogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCBjb25kaXRpb25zID0ge1xuXHRcdFx0XHRcdGFuZDogW10sXG5cdFx0XHRcdFx0b3I6IFtdXG5cdFx0XHRcdH07XG5cdFx0XHRcdHcuZm9yRWFjaCgoY29uZGl0aW9uKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgeyBmaWVsZDogX2ZpZWxkLCB2YWx1ZTogX3ZhbHVlLCBvcGVyYXRvciA9IFwiPVwiLCBjb25uZWN0b3IgPSBcIkFORFwiIH0gPSBjb25kaXRpb247XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBfdmFsdWU7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRmaWVsZDogX2ZpZWxkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgZXhwciA9IChlYikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZiA9IGAke21vZGVsfS4ke2ZpZWxkfWA7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IudG9Mb3dlckNhc2UoKSA9PT0gXCJpblwiKSByZXR1cm4gZWIoZiwgXCJpblwiLCBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IudG9Mb3dlckNhc2UoKSA9PT0gXCJub3RfaW5cIikgcmV0dXJuIGViKGYsIFwibm90IGluXCIsIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJjb250YWluc1wiKSByZXR1cm4gZWIoZiwgXCJsaWtlXCIsIGAlJHt2YWx1ZX0lYCk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwic3RhcnRzX3dpdGhcIikgcmV0dXJuIGViKGYsIFwibGlrZVwiLCBgJHt2YWx1ZX0lYCk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiZW5kc193aXRoXCIpIHJldHVybiBlYihmLCBcImxpa2VcIiwgYCUke3ZhbHVlfWApO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImVxXCIpIHJldHVybiBlYihmLCBcIj1cIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcIm5lXCIpIHJldHVybiBlYihmLCBcIjw+XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJndFwiKSByZXR1cm4gZWIoZiwgXCI+XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJndGVcIikgcmV0dXJuIGViKGYsIFwiPj1cIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImx0XCIpIHJldHVybiBlYihmLCBcIjxcIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImx0ZVwiKSByZXR1cm4gZWIoZiwgXCI8PVwiLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWIoZiwgb3BlcmF0b3IsIHZhbHVlKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGlmIChjb25uZWN0b3IgPT09IFwiT1JcIikgY29uZGl0aW9ucy5vci5wdXNoKGV4cHIpO1xuXHRcdFx0XHRcdGVsc2UgY29uZGl0aW9ucy5hbmQucHVzaChleHByKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YW5kOiBjb25kaXRpb25zLmFuZC5sZW5ndGggPyBjb25kaXRpb25zLmFuZCA6IG51bGwsXG5cdFx0XHRcdFx0b3I6IGNvbmRpdGlvbnMub3IubGVuZ3RoID8gY29uZGl0aW9ucy5vciA6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGZ1bmN0aW9uIHByb2Nlc3NKb2luZWRSZXN1bHRzKHJvd3MsIGpvaW5Db25maWcsIGFsbFNlbGVjdHNTdHIpIHtcblx0XHRcdFx0aWYgKCFqb2luQ29uZmlnIHx8ICFyb3dzLmxlbmd0aCkgcmV0dXJuIHJvd3M7XG5cdFx0XHRcdGNvbnN0IGdyb3VwZWRCeU1haW5JZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0XHRcdGZvciAoY29uc3QgY3VycmVudFJvdyBvZiByb3dzKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWFpbk1vZGVsRmllbGRzID0ge307XG5cdFx0XHRcdFx0Y29uc3Qgam9pbmVkTW9kZWxGaWVsZHMgPSB7fTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWxdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW5Db25maWcpKSBqb2luZWRNb2RlbEZpZWxkc1tnZXRNb2RlbE5hbWUoam9pbk1vZGVsKV0gPSB7fTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjdXJyZW50Um93KSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qga2V5U3RyID0gU3RyaW5nKGtleSk7XG5cdFx0XHRcdFx0XHRsZXQgYXNzaWduZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgeyBqb2luTW9kZWwsIGZpZWxkTmFtZSwgam9pbk1vZGVsUmVmIH0gb2YgYWxsU2VsZWN0c1N0cikgaWYgKGtleVN0ciA9PT0gYF9qb2luZWRfJHtqb2luTW9kZWxSZWZ9XyR7ZmllbGROYW1lfWApIHtcblx0XHRcdFx0XHRcdFx0am9pbmVkTW9kZWxGaWVsZHNbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldW2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdFx0bW9kZWw6IGpvaW5Nb2RlbCxcblx0XHRcdFx0XHRcdFx0XHRmaWVsZDogZmllbGROYW1lXG5cdFx0XHRcdFx0XHRcdH0pXSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhc3NpZ25lZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCFhc3NpZ25lZCkgbWFpbk1vZGVsRmllbGRzW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgbWFpbklkID0gbWFpbk1vZGVsRmllbGRzLmlkO1xuXHRcdFx0XHRcdGlmICghbWFpbklkKSBjb250aW51ZTtcblx0XHRcdFx0XHRpZiAoIWdyb3VwZWRCeU1haW5JZC5oYXMobWFpbklkKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZW50cnkkMSA9IHsgLi4ubWFpbk1vZGVsRmllbGRzIH07XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkgZW50cnkkMVtnZXRNb2RlbE5hbWUoam9pbk1vZGVsKV0gPSBqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCIgPyBudWxsIDogW107XG5cdFx0XHRcdFx0XHRncm91cGVkQnlNYWluSWQuc2V0KG1haW5JZCwgZW50cnkkMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IGVudHJ5ID0gZ3JvdXBlZEJ5TWFpbklkLmdldChtYWluSWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW5Db25maWcpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBpc1VuaXF1ZSA9IGpvaW5BdHRyLnJlbGF0aW9uID09PSBcIm9uZS10by1vbmVcIjtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbWl0ID0gam9pbkF0dHIubGltaXQgPz8gMTAwO1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pbmVkT2JqID0gam9pbmVkTW9kZWxGaWVsZHNbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldO1xuXHRcdFx0XHRcdFx0Y29uc3QgaGFzRGF0YSA9IGpvaW5lZE9iaiAmJiBPYmplY3Qua2V5cyhqb2luZWRPYmopLmxlbmd0aCA+IDAgJiYgT2JqZWN0LnZhbHVlcyhqb2luZWRPYmopLnNvbWUoKHZhbHVlKSA9PiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKTtcblx0XHRcdFx0XHRcdGlmIChpc1VuaXF1ZSkgZW50cnlbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldID0gaGFzRGF0YSA/IGpvaW5lZE9iaiA6IG51bGw7XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShlbnRyeVtqb2luTW9kZWxOYW1lXSkgJiYgaGFzRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChlbnRyeVtqb2luTW9kZWxOYW1lXS5sZW5ndGggPj0gbGltaXQpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlkRmllbGROYW1lID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdFx0XHRcdG1vZGVsOiBqb2luTW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgam9pbmVkSWQgPSBqb2luZWRPYmpbaWRGaWVsZE5hbWVdO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChqb2luZWRJZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFlbnRyeVtqb2luTW9kZWxOYW1lXS5zb21lKChpdGVtKSA9PiBpdGVtW2lkRmllbGROYW1lXSA9PT0gam9pbmVkSWQpICYmIGVudHJ5W2pvaW5Nb2RlbE5hbWVdLmxlbmd0aCA8IGxpbWl0KSBlbnRyeVtqb2luTW9kZWxOYW1lXS5wdXNoKGpvaW5lZE9iaik7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlbnRyeVtqb2luTW9kZWxOYW1lXS5sZW5ndGggPCBsaW1pdCkgZW50cnlbam9pbk1vZGVsTmFtZV0ucHVzaChqb2luZWRPYmopO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20oZ3JvdXBlZEJ5TWFpbklkLnZhbHVlcygpKTtcblx0XHRcdFx0Zm9yIChjb25zdCBlbnRyeSBvZiByZXN1bHQpIGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW5Db25maWcpKSBpZiAoam9pbkF0dHIucmVsYXRpb24gIT09IFwib25lLXRvLW9uZVwiKSB7XG5cdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGVudHJ5W2pvaW5Nb2RlbE5hbWVdKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGltaXQgPSBqb2luQXR0ci5saW1pdCA/PyAxMDA7XG5cdFx0XHRcdFx0XHRpZiAoZW50cnlbam9pbk1vZGVsTmFtZV0ubGVuZ3RoID4gbGltaXQpIGVudHJ5W2pvaW5Nb2RlbE5hbWVdID0gZW50cnlbam9pbk1vZGVsTmFtZV0uc2xpY2UoMCwgbGltaXQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0YXN5bmMgY3JlYXRlKHsgZGF0YSwgbW9kZWwgfSkge1xuXHRcdFx0XHRcdHJldHVybiBhd2FpdCB3aXRoUmV0dXJuaW5nKGRhdGEsIGRiJDEuaW5zZXJ0SW50byhtb2RlbCkudmFsdWVzKGRhdGEpLCBtb2RlbCwgW10pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyBmaW5kT25lKHsgbW9kZWwsIHdoZXJlLCBzZWxlY3QsIGpvaW4gfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5zZWxlY3RGcm9tKChlYikgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGIgPSBlYi5zZWxlY3RGcm9tKG1vZGVsKTtcblx0XHRcdFx0XHRcdGlmIChhbmQpIGIgPSBiLndoZXJlKChlYiQxKSA9PiBlYiQxLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0aWYgKG9yKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIkMSkpKSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYi5zZWxlY3RBbGwoKS5hcyhcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0fSkuc2VsZWN0QWxsKFwicHJpbWFyeVwiKTtcblx0XHRcdFx0XHRpZiAoam9pbikgZm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IFtfam9pbk1vZGVsU2NoZW1hLCBqb2luTW9kZWxOYW1lXSA9IGpvaW5Nb2RlbC5pbmNsdWRlcyhcIi5cIikgPyBqb2luTW9kZWwuc3BsaXQoXCIuXCIpIDogW3ZvaWQgMCwgam9pbk1vZGVsXTtcblx0XHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkubGVmdEpvaW4oYCR7am9pbk1vZGVsfSBhcyBqb2luXyR7am9pbk1vZGVsTmFtZX1gLCAoam9pbiQxKSA9PiBqb2luJDEub25SZWYoYGpvaW5fJHtqb2luTW9kZWxOYW1lfS4ke2pvaW5BdHRyLm9uLnRvfWAsIFwiPVwiLCBgcHJpbWFyeS4ke2pvaW5BdHRyLm9uLmZyb219YCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGFsbFNlbGVjdHNTdHIsIGFsbFNlbGVjdHMgfSA9IHNlbGVjdEFsbEpvaW5zKGpvaW4pO1xuXHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkuc2VsZWN0KGFsbFNlbGVjdHMpO1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRcdFx0XHRpZiAoIXJlcyB8fCAhQXJyYXkuaXNBcnJheShyZXMpIHx8IHJlcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IHJvdyA9IHJlc1swXTtcblx0XHRcdFx0XHRpZiAoam9pbikgcmV0dXJuIHByb2Nlc3NKb2luZWRSZXN1bHRzKHJlcywgam9pbiwgYWxsU2VsZWN0c1N0cilbMF07XG5cdFx0XHRcdFx0cmV0dXJuIHJvdztcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZmluZE1hbnkoeyBtb2RlbCwgd2hlcmUsIGxpbWl0LCBvZmZzZXQsIHNvcnRCeSwgam9pbiB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLnNlbGVjdEZyb20oKGViKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgYiA9IGViLnNlbGVjdEZyb20obW9kZWwpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc29ydEJ5KSBiID0gYi5vcmRlckJ5KGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCJcblx0XHRcdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0XHRcdFx0YiA9IGIub2Zmc2V0KG9mZnNldCkuZmV0Y2gobGltaXQgfHwgMTAwKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsaW1pdCAhPT0gdm9pZCAwKSBiID0gYi50b3AobGltaXQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKGxpbWl0ICE9PSB2b2lkIDApIGIgPSBiLmxpbWl0KGxpbWl0KTtcblx0XHRcdFx0XHRcdFx0aWYgKG9mZnNldCAhPT0gdm9pZCAwKSBiID0gYi5vZmZzZXQob2Zmc2V0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChzb3J0Qnk/LmZpZWxkKSBiID0gYi5vcmRlckJ5KGAke2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0XHRmaWVsZDogc29ydEJ5LmZpZWxkXG5cdFx0XHRcdFx0XHR9KX1gLCBzb3J0QnkuZGlyZWN0aW9uKTtcblx0XHRcdFx0XHRcdGlmIChhbmQpIGIgPSBiLndoZXJlKChlYiQxKSA9PiBlYiQxLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0aWYgKG9yKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIkMSkpKSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYi5zZWxlY3RBbGwoKS5hcyhcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0fSkuc2VsZWN0QWxsKFwicHJpbWFyeVwiKTtcblx0XHRcdFx0XHRpZiAoam9pbikgZm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IFtfam9pbk1vZGVsU2NoZW1hLCBqb2luTW9kZWxOYW1lXSA9IGpvaW5Nb2RlbC5pbmNsdWRlcyhcIi5cIikgPyBqb2luTW9kZWwuc3BsaXQoXCIuXCIpIDogW3ZvaWQgMCwgam9pbk1vZGVsXTtcblx0XHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkubGVmdEpvaW4oYCR7am9pbk1vZGVsfSBhcyBqb2luXyR7am9pbk1vZGVsTmFtZX1gLCAoam9pbiQxKSA9PiBqb2luJDEub25SZWYoYGpvaW5fJHtqb2luTW9kZWxOYW1lfS4ke2pvaW5BdHRyLm9uLnRvfWAsIFwiPVwiLCBgcHJpbWFyeS4ke2pvaW5BdHRyLm9uLmZyb219YCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGFsbFNlbGVjdHNTdHIsIGFsbFNlbGVjdHMgfSA9IHNlbGVjdEFsbEpvaW5zKGpvaW4pO1xuXHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkuc2VsZWN0KGFsbFNlbGVjdHMpO1xuXHRcdFx0XHRcdGlmIChzb3J0Qnk/LmZpZWxkKSBxdWVyeSA9IHF1ZXJ5Lm9yZGVyQnkoYCR7Z2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeS5maWVsZFxuXHRcdFx0XHRcdH0pfWAsIHNvcnRCeS5kaXJlY3Rpb24pO1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRcdFx0XHRpZiAoIXJlcykgcmV0dXJuIFtdO1xuXHRcdFx0XHRcdGlmIChqb2luKSByZXR1cm4gcHJvY2Vzc0pvaW5lZFJlc3VsdHMocmVzLCBqb2luLCBhbGxTZWxlY3RzU3RyKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyB1cGRhdGUoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZTogdmFsdWVzIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEudXBkYXRlVGFibGUobW9kZWwpLnNldCh2YWx1ZXMpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyh2YWx1ZXMsIHF1ZXJ5LCBtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyB1cGRhdGVNYW55KHsgbW9kZWwsIHdoZXJlLCB1cGRhdGU6IHZhbHVlcyB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLnVwZGF0ZVRhYmxlKG1vZGVsKS5zZXQodmFsdWVzKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gKGF3YWl0IHF1ZXJ5LmV4ZWN1dGVUYWtlRmlyc3QoKSkubnVtVXBkYXRlZFJvd3M7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcyA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSID8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgOiBOdW1iZXIocmVzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgY291bnQoeyBtb2RlbCwgd2hlcmUgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5zZWxlY3RGcm9tKG1vZGVsKS5zZWxlY3QoZGIkMS5mbi5jb3VudChcImlkXCIpLmFzKFwiY291bnRcIikpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXNbMF0uY291bnQgPT09IFwibnVtYmVyXCIpIHJldHVybiByZXNbMF0uY291bnQ7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXNbMF0uY291bnQgPT09IFwiYmlnaW50XCIpIHJldHVybiBOdW1iZXIocmVzWzBdLmNvdW50KTtcblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VJbnQocmVzWzBdLmNvdW50KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZGVsZXRlKHsgbW9kZWwsIHdoZXJlIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEuZGVsZXRlRnJvbShtb2RlbCk7XG5cdFx0XHRcdFx0aWYgKGFuZCkgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRpZiAob3IpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZGVsZXRlTWFueSh7IG1vZGVsLCB3aGVyZSB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLmRlbGV0ZUZyb20obW9kZWwpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSAoYXdhaXQgcXVlcnkuZXhlY3V0ZVRha2VGaXJzdCgpKS5udW1EZWxldGVkUm93cztcblx0XHRcdFx0XHRyZXR1cm4gcmVzID4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgPyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA6IE51bWJlcihyZXMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcHRpb25zOiBjb25maWdcblx0XHRcdH07XG5cdFx0fTtcblx0fTtcblx0bGV0IGFkYXB0ZXJPcHRpb25zID0gbnVsbDtcblx0YWRhcHRlck9wdGlvbnMgPSB7XG5cdFx0Y29uZmlnOiB7XG5cdFx0XHRhZGFwdGVySWQ6IFwia3lzZWx5XCIsXG5cdFx0XHRhZGFwdGVyTmFtZTogXCJLeXNlbHkgQWRhcHRlclwiLFxuXHRcdFx0dXNlUGx1cmFsOiBjb25maWc/LnVzZVBsdXJhbCxcblx0XHRcdGRlYnVnTG9nczogY29uZmlnPy5kZWJ1Z0xvZ3MsXG5cdFx0XHRzdXBwb3J0c0Jvb2xlYW5zOiBjb25maWc/LnR5cGUgPT09IFwic3FsaXRlXCIgfHwgY29uZmlnPy50eXBlID09PSBcIm1zc3FsXCIgfHwgY29uZmlnPy50eXBlID09PSBcIm15c3FsXCIgfHwgIWNvbmZpZz8udHlwZSA/IGZhbHNlIDogdHJ1ZSxcblx0XHRcdHN1cHBvcnRzRGF0ZXM6IGNvbmZpZz8udHlwZSA9PT0gXCJzcWxpdGVcIiB8fCBjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIiB8fCAhY29uZmlnPy50eXBlID8gZmFsc2UgOiB0cnVlLFxuXHRcdFx0c3VwcG9ydHNKU09OOiBjb25maWc/LnR5cGUgPT09IFwicG9zdGdyZXNcIiA/IHRydWUgOiBmYWxzZSxcblx0XHRcdHN1cHBvcnRzQXJyYXlzOiBmYWxzZSxcblx0XHRcdHN1cHBvcnRzVVVJRHM6IGNvbmZpZz8udHlwZSA9PT0gXCJwb3N0Z3Jlc1wiID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0dHJhbnNhY3Rpb246IGNvbmZpZz8udHJhbnNhY3Rpb24gPyAoY2IpID0+IGRiLnRyYW5zYWN0aW9uKCkuZXhlY3V0ZSgodHJ4KSA9PiB7XG5cdFx0XHRcdHJldHVybiBjYihjcmVhdGVBZGFwdGVyRmFjdG9yeSh7XG5cdFx0XHRcdFx0Y29uZmlnOiBhZGFwdGVyT3B0aW9ucy5jb25maWcsXG5cdFx0XHRcdFx0YWRhcHRlcjogY3JlYXRlQ3VzdG9tQWRhcHRlcih0cngpXG5cdFx0XHRcdH0pKGxhenlPcHRpb25zKSk7XG5cdFx0XHR9KSA6IGZhbHNlXG5cdFx0fSxcblx0XHRhZGFwdGVyOiBjcmVhdGVDdXN0b21BZGFwdGVyKGRiKVxuXHR9O1xuXHRjb25zdCBhZGFwdGVyID0gY3JlYXRlQWRhcHRlckZhY3RvcnkoYWRhcHRlck9wdGlvbnMpO1xuXHRyZXR1cm4gKG9wdGlvbnMpID0+IHtcblx0XHRsYXp5T3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0cmV0dXJuIGFkYXB0ZXIob3B0aW9ucyk7XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGt5c2VseUFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWt5c2VseS1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeSqliteDialect: () => (/* binding */ NodeSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/node-sqlite-dialect.ts\nvar NodeSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar NodeSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new NodeSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar NodeSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst rows = this.#db.prepare(sql$1).all(...parameters);\n\t\treturn Promise.resolve({ rows });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (await this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar NodeSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar NodeSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar NodeSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new NodeSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new NodeSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new NodeSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new NodeSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=node-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvbm9kZS1zcWxpdGUtZGlhbGVjdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUg7O0FBRXpIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUJBQXlCO0FBQ25DO0FBQ0EsMkJBQTJCLE1BQU07QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBLDJFQUEyRSwyREFBdUIsc0JBQXNCLGdFQUE0QjtBQUNwSjtBQUNBLG1DQUFtQyxNQUFNO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJDQUFHLHFCQUFxQixNQUFNO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHdEQUFvQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxreXNlbHktYWRhcHRlclxcbm9kZS1zcWxpdGUtZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcGlsZWRRdWVyeSwgREVGQVVMVF9NSUdSQVRJT05fTE9DS19UQUJMRSwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUsIERlZmF1bHRRdWVyeUNvbXBpbGVyLCBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvbm9kZS1zcWxpdGUtZGlhbGVjdC50c1xudmFyIE5vZGVTcWxpdGVBZGFwdGVyID0gY2xhc3Mge1xuXHRnZXQgc3VwcG9ydHNDcmVhdGVJZk5vdEV4aXN0cygpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRnZXQgc3VwcG9ydHNUcmFuc2FjdGlvbmFsRGRsKCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRnZXQgc3VwcG9ydHNSZXR1cm5pbmcoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0YXN5bmMgYWNxdWlyZU1pZ3JhdGlvbkxvY2soKSB7fVxuXHRhc3luYyByZWxlYXNlTWlncmF0aW9uTG9jaygpIHt9XG5cdGdldCBzdXBwb3J0c091dHB1dCgpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxufTtcbnZhciBOb2RlU3FsaXRlRHJpdmVyID0gY2xhc3Mge1xuXHQjY29uZmlnO1xuXHQjY29ubmVjdGlvbk11dGV4ID0gbmV3IENvbm5lY3Rpb25NdXRleCgpO1xuXHQjZGI7XG5cdCNjb25uZWN0aW9uO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHR0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuXHR9XG5cdGFzeW5jIGluaXQoKSB7XG5cdFx0dGhpcy4jZGIgPSB0aGlzLiNjb25maWcuZGF0YWJhc2U7XG5cdFx0dGhpcy4jY29ubmVjdGlvbiA9IG5ldyBOb2RlU3FsaXRlQ29ubmVjdGlvbih0aGlzLiNkYik7XG5cdFx0aWYgKHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24pIGF3YWl0IHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24odGhpcy4jY29ubmVjdGlvbik7XG5cdH1cblx0YXN5bmMgYWNxdWlyZUNvbm5lY3Rpb24oKSB7XG5cdFx0YXdhaXQgdGhpcy4jY29ubmVjdGlvbk11dGV4LmxvY2soKTtcblx0XHRyZXR1cm4gdGhpcy4jY29ubmVjdGlvbjtcblx0fVxuXHRhc3luYyBiZWdpblRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImJlZ2luXCIpKTtcblx0fVxuXHRhc3luYyBjb21taXRUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJjb21taXRcIikpO1xuXHR9XG5cdGFzeW5jIHJvbGxiYWNrVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwicm9sbGJhY2tcIikpO1xuXHR9XG5cdGFzeW5jIHJlbGVhc2VDb25uZWN0aW9uKCkge1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb25NdXRleC51bmxvY2soKTtcblx0fVxuXHRhc3luYyBkZXN0cm95KCkge1xuXHRcdHRoaXMuI2RiPy5jbG9zZSgpO1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVDb25uZWN0aW9uID0gY2xhc3Mge1xuXHQjZGI7XG5cdGNvbnN0cnVjdG9yKGRiKSB7XG5cdFx0dGhpcy4jZGIgPSBkYjtcblx0fVxuXHRleGVjdXRlUXVlcnkoY29tcGlsZWRRdWVyeSkge1xuXHRcdGNvbnN0IHsgc3FsOiBzcWwkMSwgcGFyYW1ldGVycyB9ID0gY29tcGlsZWRRdWVyeTtcblx0XHRjb25zdCByb3dzID0gdGhpcy4jZGIucHJlcGFyZShzcWwkMSkuYWxsKC4uLnBhcmFtZXRlcnMpO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoeyByb3dzIH0pO1xuXHR9XG5cdGFzeW5jICpzdHJlYW1RdWVyeSgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYW1pbmcgcXVlcnkgaXMgbm90IHN1cHBvcnRlZCBieSBTUUxpdGUgZHJpdmVyLlwiKTtcblx0fVxufTtcbnZhciBDb25uZWN0aW9uTXV0ZXggPSBjbGFzcyB7XG5cdCNwcm9taXNlO1xuXHQjcmVzb2x2ZTtcblx0YXN5bmMgbG9jaygpIHtcblx0XHR3aGlsZSAoYXdhaXQgdGhpcy4jcHJvbWlzZSkgYXdhaXQgdGhpcy4jcHJvbWlzZTtcblx0XHR0aGlzLiNwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdHRoaXMuI3Jlc29sdmUgPSByZXNvbHZlO1xuXHRcdH0pO1xuXHR9XG5cdHVubG9jaygpIHtcblx0XHRjb25zdCByZXNvbHZlID0gdGhpcy4jcmVzb2x2ZTtcblx0XHR0aGlzLiNwcm9taXNlID0gdm9pZCAwO1xuXHRcdHRoaXMuI3Jlc29sdmUgPSB2b2lkIDA7XG5cdFx0cmVzb2x2ZT8uKCk7XG5cdH1cbn07XG52YXIgTm9kZVNxbGl0ZUludHJvc3BlY3RvciA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0YXN5bmMgZ2V0U2NoZW1hcygpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0YXN5bmMgZ2V0VGFibGVzKG9wdGlvbnMgPSB7IHdpdGhJbnRlcm5hbEt5c2VseVRhYmxlczogZmFsc2UgfSkge1xuXHRcdGxldCBxdWVyeSA9IHRoaXMuI2RiLnNlbGVjdEZyb20oXCJzcWxpdGVfc2NoZW1hXCIpLndoZXJlKFwidHlwZVwiLCBcIj1cIiwgXCJ0YWJsZVwiKS53aGVyZShcIm5hbWVcIiwgXCJub3QgbGlrZVwiLCBcInNxbGl0ZV8lXCIpLnNlbGVjdChcIm5hbWVcIikuJGNhc3RUbygpO1xuXHRcdGlmICghb3B0aW9ucy53aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXMpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoXCJuYW1lXCIsIFwiIT1cIiwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUpLndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUpO1xuXHRcdGNvbnN0IHRhYmxlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwodGFibGVzLm1hcCgoeyBuYW1lIH0pID0+IHRoaXMuI2dldFRhYmxlTWV0YWRhdGEobmFtZSkpKTtcblx0fVxuXHRhc3luYyBnZXRNZXRhZGF0YShvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHsgdGFibGVzOiBhd2FpdCB0aGlzLmdldFRhYmxlcyhvcHRpb25zKSB9O1xuXHR9XG5cdGFzeW5jICNnZXRUYWJsZU1ldGFkYXRhKHRhYmxlKSB7XG5cdFx0Y29uc3QgZGIgPSB0aGlzLiNkYjtcblx0XHRjb25zdCBhdXRvSW5jcmVtZW50Q29sID0gKGF3YWl0IGRiLnNlbGVjdEZyb20oXCJzcWxpdGVfbWFzdGVyXCIpLndoZXJlKFwibmFtZVwiLCBcIj1cIiwgdGFibGUpLnNlbGVjdChcInNxbFwiKS4kY2FzdFRvKCkuZXhlY3V0ZSgpKVswXT8uc3FsPy5zcGxpdCgvW1xcKFxcKSxdLyk/LmZpbmQoKGl0KSA9PiBpdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYXV0b2luY3JlbWVudFwiKSk/LnNwbGl0KC9cXHMrLyk/LlswXT8ucmVwbGFjZSgvW1wiYF0vZywgXCJcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRhYmxlLFxuXHRcdFx0Y29sdW1uczogKGF3YWl0IGRiLnNlbGVjdEZyb20oc3FsYHByYWdtYV90YWJsZV9pbmZvKCR7dGFibGV9KWAuYXMoXCJ0YWJsZV9pbmZvXCIpKS5zZWxlY3QoW1xuXHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XCJ0eXBlXCIsXG5cdFx0XHRcdFwibm90bnVsbFwiLFxuXHRcdFx0XHRcImRmbHRfdmFsdWVcIlxuXHRcdFx0XSkuZXhlY3V0ZSgpKS5tYXAoKGNvbCkgPT4gKHtcblx0XHRcdFx0bmFtZTogY29sLm5hbWUsXG5cdFx0XHRcdGRhdGFUeXBlOiBjb2wudHlwZSxcblx0XHRcdFx0aXNOdWxsYWJsZTogIWNvbC5ub3RudWxsLFxuXHRcdFx0XHRpc0F1dG9JbmNyZW1lbnRpbmc6IGNvbC5uYW1lID09PSBhdXRvSW5jcmVtZW50Q29sLFxuXHRcdFx0XHRoYXNEZWZhdWx0VmFsdWU6IGNvbC5kZmx0X3ZhbHVlICE9IG51bGxcblx0XHRcdH0pKSxcblx0XHRcdGlzVmlldzogdHJ1ZVxuXHRcdH07XG5cdH1cbn07XG52YXIgTm9kZVNxbGl0ZVF1ZXJ5Q29tcGlsZXIgPSBjbGFzcyBleHRlbmRzIERlZmF1bHRRdWVyeUNvbXBpbGVyIHtcblx0Z2V0Q3VycmVudFBhcmFtZXRlclBsYWNlaG9sZGVyKCkge1xuXHRcdHJldHVybiBcIj9cIjtcblx0fVxuXHRnZXRMZWZ0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldFJpZ2h0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldEF1dG9JbmNyZW1lbnQoKSB7XG5cdFx0cmV0dXJuIFwiYXV0b2luY3JlbWVudFwiO1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVEaWFsZWN0ID0gY2xhc3Mge1xuXHQjY29uZmlnO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHR0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuXHR9XG5cdGNyZWF0ZURyaXZlcigpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVEcml2ZXIodGhpcy4jY29uZmlnKTtcblx0fVxuXHRjcmVhdGVRdWVyeUNvbXBpbGVyKCkge1xuXHRcdHJldHVybiBuZXcgTm9kZVNxbGl0ZVF1ZXJ5Q29tcGlsZXIoKTtcblx0fVxuXHRjcmVhdGVBZGFwdGVyKCkge1xuXHRcdHJldHVybiBuZXcgTm9kZVNxbGl0ZUFkYXB0ZXIoKTtcblx0fVxuXHRjcmVhdGVJbnRyb3NwZWN0b3IoZGIpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVJbnRyb3NwZWN0b3IoZGIpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IE5vZGVTcWxpdGVEaWFsZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub2RlLXNxbGl0ZS1kaWFsZWN0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* reexport safe */ _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./memory-adapter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMvbWVtb3J5LWFkYXB0ZXIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxtZW1vcnktYWRhcHRlclxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lbW9yeUFkYXB0ZXIgfSBmcm9tIFwiLi9tZW1vcnktYWRhcHRlci5tanNcIjtcblxuZXhwb3J0IHsgbWVtb3J5QWRhcHRlciB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* binding */ memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/memory-adapter/memory-adapter.ts\nconst memoryAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst adapterCreator = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__.createAdapterFactory)({\n\t\tconfig: {\n\t\t\tadapterId: \"memory\",\n\t\t\tadapterName: \"Memory Adapter\",\n\t\t\tusePlural: false,\n\t\t\tdebugLogs: config?.debugLogs || false,\n\t\t\tsupportsArrays: true,\n\t\t\tcustomTransformInput(props) {\n\t\t\t\tif ((props.options.advanced?.database?.useNumberId || props.options.advanced?.database?.generateId === \"serial\") && props.field === \"id\" && props.action === \"create\") return db[props.model].length + 1;\n\t\t\t\treturn props.data;\n\t\t\t},\n\t\t\ttransaction: async (cb) => {\n\t\t\t\tconst clone = structuredClone(db);\n\t\t\t\ttry {\n\t\t\t\t\treturn await cb(adapterCreator(lazyOptions));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tObject.keys(db).forEach((key) => {\n\t\t\t\t\t\tdb[key] = clone[key];\n\t\t\t\t\t});\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadapter: ({ getFieldName, options, getModelName }) => {\n\t\t\tconst applySortToRecords = (records, sortBy, model) => {\n\t\t\t\tif (!sortBy) return records;\n\t\t\t\treturn records.sort((a, b) => {\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t});\n\t\t\t\t\tconst aValue = a[field];\n\t\t\t\t\tconst bValue = b[field];\n\t\t\t\t\tlet comparison = 0;\n\t\t\t\t\tif (aValue == null && bValue == null) comparison = 0;\n\t\t\t\t\telse if (aValue == null) comparison = -1;\n\t\t\t\t\telse if (bValue == null) comparison = 1;\n\t\t\t\t\telse if (typeof aValue === \"string\" && typeof bValue === \"string\") comparison = aValue.localeCompare(bValue);\n\t\t\t\t\telse if (aValue instanceof Date && bValue instanceof Date) comparison = aValue.getTime() - bValue.getTime();\n\t\t\t\t\telse if (typeof aValue === \"number\" && typeof bValue === \"number\") comparison = aValue - bValue;\n\t\t\t\t\telse if (typeof aValue === \"boolean\" && typeof bValue === \"boolean\") comparison = aValue === bValue ? 0 : aValue ? 1 : -1;\n\t\t\t\t\telse comparison = String(aValue).localeCompare(String(bValue));\n\t\t\t\t\treturn sortBy.direction === \"asc\" ? comparison : -comparison;\n\t\t\t\t});\n\t\t\t};\n\t\t\tfunction convertWhereClause(where, model, join) {\n\t\t\t\tconst execute = (where$1, model$1) => {\n\t\t\t\t\tconst table = db[model$1];\n\t\t\t\t\tif (!table) {\n\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] Model ${model$1} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\tthrow new Error(`Model ${model$1} not found`);\n\t\t\t\t\t}\n\t\t\t\t\tconst evalClause = (record, clause) => {\n\t\t\t\t\t\tconst { field, value, operator } = clause;\n\t\t\t\t\t\tswitch (operator) {\n\t\t\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"not_in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn !value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"contains\": return record[field].includes(value);\n\t\t\t\t\t\t\tcase \"starts_with\": return record[field].startsWith(value);\n\t\t\t\t\t\t\tcase \"ends_with\": return record[field].endsWith(value);\n\t\t\t\t\t\t\tcase \"ne\": return record[field] !== value;\n\t\t\t\t\t\t\tcase \"gt\": return value != null && Boolean(record[field] > value);\n\t\t\t\t\t\t\tcase \"gte\": return value != null && Boolean(record[field] >= value);\n\t\t\t\t\t\t\tcase \"lt\": return value != null && Boolean(record[field] < value);\n\t\t\t\t\t\t\tcase \"lte\": return value != null && Boolean(record[field] <= value);\n\t\t\t\t\t\t\tdefault: return record[field] === value;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treturn table.filter((record) => {\n\t\t\t\t\t\tif (!where$1.length || where$1.length === 0) return true;\n\t\t\t\t\t\tlet result = evalClause(record, where$1[0]);\n\t\t\t\t\t\tfor (const clause of where$1) {\n\t\t\t\t\t\t\tconst clauseResult = evalClause(record, clause);\n\t\t\t\t\t\t\tif (clause.connector === \"OR\") result = result || clauseResult;\n\t\t\t\t\t\t\telse result = result && clauseResult;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tif (!join) return execute(where, model);\n\t\t\t\tconst baseRecords = execute(where, model);\n\t\t\t\tconst grouped = /* @__PURE__ */ new Map();\n\t\t\t\tconst seenIds = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const baseRecord of baseRecords) {\n\t\t\t\t\tconst baseId = String(baseRecord.id);\n\t\t\t\t\tif (!grouped.has(baseId)) {\n\t\t\t\t\t\tconst nested = { ...baseRecord };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nested[joinModelName] = null;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnested[joinModelName] = [];\n\t\t\t\t\t\t\t\tseenIds.set(`${baseId}-${joinModel}`, /* @__PURE__ */ new Set());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgrouped.set(baseId, nested);\n\t\t\t\t\t}\n\t\t\t\t\tconst nestedEntry = grouped.get(baseId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\tconst joinTable = db[joinModelName];\n\t\t\t\t\t\tif (!joinTable) {\n\t\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] JoinOption model ${joinModelName} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\t\tthrow new Error(`JoinOption model ${joinModelName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst matchingRecords = joinTable.filter((joinRecord) => joinRecord[joinAttr.on.to] === baseRecord[joinAttr.on.from]);\n\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nestedEntry[joinModelName] = matchingRecords[0] || null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst seenSet = seenIds.get(`${baseId}-${joinModel}`);\n\t\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\t\tlet count = 0;\n\t\t\t\t\t\t\tfor (const matchingRecord of matchingRecords) {\n\t\t\t\t\t\t\t\tif (count >= limit) break;\n\t\t\t\t\t\t\t\tif (!seenSet.has(matchingRecord.id)) {\n\t\t\t\t\t\t\t\t\tnestedEntry[joinModelName].push(matchingRecord);\n\t\t\t\t\t\t\t\t\tseenSet.add(matchingRecord.id);\n\t\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Array.from(grouped.values());\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcreate: async ({ model, data }) => {\n\t\t\t\t\tif (options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\") data.id = db[getModelName(model)].length + 1;\n\t\t\t\t\tif (!db[model]) db[model] = [];\n\t\t\t\t\tdb[model].push(data);\n\t\t\t\t\treturn data;\n\t\t\t\t},\n\t\t\t\tfindOne: async ({ model, where, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return null;\n\t\t\t\t\t\treturn resArray[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tfindMany: async ({ model, where, sortBy, limit, offset, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where || [], model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return [];\n\t\t\t\t\t\tapplySortToRecords(resArray, sortBy, model);\n\t\t\t\t\t\tlet paginatedRecords = resArray;\n\t\t\t\t\t\tif (offset !== void 0) paginatedRecords = paginatedRecords.slice(offset);\n\t\t\t\t\t\tif (limit !== void 0) paginatedRecords = paginatedRecords.slice(0, limit);\n\t\t\t\t\t\treturn paginatedRecords;\n\t\t\t\t\t}\n\t\t\t\t\tlet table = applySortToRecords(res, sortBy, model);\n\t\t\t\t\tif (offset !== void 0) table = table.slice(offset);\n\t\t\t\t\tif (limit !== void 0) table = table.slice(0, limit);\n\t\t\t\t\treturn table || [];\n\t\t\t\t},\n\t\t\t\tcount: async ({ model, where }) => {\n\t\t\t\t\tif (where) return convertWhereClause(where, model).length;\n\t\t\t\t\treturn db[model].length;\n\t\t\t\t},\n\t\t\t\tupdate: async ({ model, where, update }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tdelete: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tdb[model] = table.filter((record) => !res.includes(record));\n\t\t\t\t},\n\t\t\t\tdeleteMany: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\tdb[model] = table.filter((record) => {\n\t\t\t\t\t\tif (res.includes(record)) {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn !res.includes(record);\n\t\t\t\t\t});\n\t\t\t\t\treturn count;\n\t\t\t\t},\n\t\t\t\tupdateMany({ model, where, update }) {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapterCreator(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=memory-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMvbWVtb3J5LWFkYXB0ZXIvbWVtb3J5LWFkYXB0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQztBQUNxQjs7QUFFcEU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtGQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsY0FBYyxxQ0FBcUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBTSxnQ0FBZ0MsU0FBUztBQUNyRCwrQkFBK0IsU0FBUztBQUN4QztBQUNBO0FBQ0EsY0FBYyx5QkFBeUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPLEdBQUcsVUFBVTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHlEQUFNLDJDQUEyQyxlQUFlO0FBQ3ZFLDJDQUEyQyxlQUFlO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU8sR0FBRyxVQUFVO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsc0JBQXNCLG9CQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsMkNBQTJDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBLEtBQUs7QUFDTCxxQkFBcUIsc0JBQXNCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTCxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wseUJBQXlCLGNBQWM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXG1lbW9yeS1hZGFwdGVyXFxtZW1vcnktYWRhcHRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgY3JlYXRlQWRhcHRlckZhY3RvcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGIvYWRhcHRlclwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL21lbW9yeS1hZGFwdGVyL21lbW9yeS1hZGFwdGVyLnRzXG5jb25zdCBtZW1vcnlBZGFwdGVyID0gKGRiLCBjb25maWcpID0+IHtcblx0bGV0IGxhenlPcHRpb25zID0gbnVsbDtcblx0Y29uc3QgYWRhcHRlckNyZWF0b3IgPSBjcmVhdGVBZGFwdGVyRmFjdG9yeSh7XG5cdFx0Y29uZmlnOiB7XG5cdFx0XHRhZGFwdGVySWQ6IFwibWVtb3J5XCIsXG5cdFx0XHRhZGFwdGVyTmFtZTogXCJNZW1vcnkgQWRhcHRlclwiLFxuXHRcdFx0dXNlUGx1cmFsOiBmYWxzZSxcblx0XHRcdGRlYnVnTG9nczogY29uZmlnPy5kZWJ1Z0xvZ3MgfHwgZmFsc2UsXG5cdFx0XHRzdXBwb3J0c0FycmF5czogdHJ1ZSxcblx0XHRcdGN1c3RvbVRyYW5zZm9ybUlucHV0KHByb3BzKSB7XG5cdFx0XHRcdGlmICgocHJvcHMub3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkIHx8IHByb3BzLm9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkID09PSBcInNlcmlhbFwiKSAmJiBwcm9wcy5maWVsZCA9PT0gXCJpZFwiICYmIHByb3BzLmFjdGlvbiA9PT0gXCJjcmVhdGVcIikgcmV0dXJuIGRiW3Byb3BzLm1vZGVsXS5sZW5ndGggKyAxO1xuXHRcdFx0XHRyZXR1cm4gcHJvcHMuZGF0YTtcblx0XHRcdH0sXG5cdFx0XHR0cmFuc2FjdGlvbjogYXN5bmMgKGNiKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNsb25lID0gc3RydWN0dXJlZENsb25lKGRiKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgY2IoYWRhcHRlckNyZWF0b3IobGF6eU9wdGlvbnMpKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhkYikuZm9yRWFjaCgoa2V5KSA9PiB7XG5cdFx0XHRcdFx0XHRkYltrZXldID0gY2xvbmVba2V5XTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YWRhcHRlcjogKHsgZ2V0RmllbGROYW1lLCBvcHRpb25zLCBnZXRNb2RlbE5hbWUgfSkgPT4ge1xuXHRcdFx0Y29uc3QgYXBwbHlTb3J0VG9SZWNvcmRzID0gKHJlY29yZHMsIHNvcnRCeSwgbW9kZWwpID0+IHtcblx0XHRcdFx0aWYgKCFzb3J0QnkpIHJldHVybiByZWNvcmRzO1xuXHRcdFx0XHRyZXR1cm4gcmVjb3Jkcy5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRmaWVsZDogc29ydEJ5LmZpZWxkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgYVZhbHVlID0gYVtmaWVsZF07XG5cdFx0XHRcdFx0Y29uc3QgYlZhbHVlID0gYltmaWVsZF07XG5cdFx0XHRcdFx0bGV0IGNvbXBhcmlzb24gPSAwO1xuXHRcdFx0XHRcdGlmIChhVmFsdWUgPT0gbnVsbCAmJiBiVmFsdWUgPT0gbnVsbCkgY29tcGFyaXNvbiA9IDA7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYVZhbHVlID09IG51bGwpIGNvbXBhcmlzb24gPSAtMTtcblx0XHRcdFx0XHRlbHNlIGlmIChiVmFsdWUgPT0gbnVsbCkgY29tcGFyaXNvbiA9IDE7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgYlZhbHVlID09PSBcInN0cmluZ1wiKSBjb21wYXJpc29uID0gYVZhbHVlLmxvY2FsZUNvbXBhcmUoYlZhbHVlKTtcblx0XHRcdFx0XHRlbHNlIGlmIChhVmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmIGJWYWx1ZSBpbnN0YW5jZW9mIERhdGUpIGNvbXBhcmlzb24gPSBhVmFsdWUuZ2V0VGltZSgpIC0gYlZhbHVlLmdldFRpbWUoKTtcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgYVZhbHVlID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBiVmFsdWUgPT09IFwibnVtYmVyXCIpIGNvbXBhcmlzb24gPSBhVmFsdWUgLSBiVmFsdWU7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gXCJib29sZWFuXCIgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gXCJib29sZWFuXCIpIGNvbXBhcmlzb24gPSBhVmFsdWUgPT09IGJWYWx1ZSA/IDAgOiBhVmFsdWUgPyAxIDogLTE7XG5cdFx0XHRcdFx0ZWxzZSBjb21wYXJpc29uID0gU3RyaW5nKGFWYWx1ZSkubG9jYWxlQ29tcGFyZShTdHJpbmcoYlZhbHVlKSk7XG5cdFx0XHRcdFx0cmV0dXJuIHNvcnRCeS5kaXJlY3Rpb24gPT09IFwiYXNjXCIgPyBjb21wYXJpc29uIDogLWNvbXBhcmlzb247XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHRcdGZ1bmN0aW9uIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwsIGpvaW4pIHtcblx0XHRcdFx0Y29uc3QgZXhlY3V0ZSA9ICh3aGVyZSQxLCBtb2RlbCQxKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFibGUgPSBkYlttb2RlbCQxXTtcblx0XHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoYFtNZW1vcnlBZGFwdGVyXSBNb2RlbCAke21vZGVsJDF9IG5vdCBmb3VuZCBpbiB0aGUgREJgLCBPYmplY3Qua2V5cyhkYikpO1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBNb2RlbCAke21vZGVsJDF9IG5vdCBmb3VuZGApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBldmFsQ2xhdXNlID0gKHJlY29yZCwgY2xhdXNlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCB7IGZpZWxkLCB2YWx1ZSwgb3BlcmF0b3IgfSA9IGNsYXVzZTtcblx0XHRcdFx0XHRcdHN3aXRjaCAob3BlcmF0b3IpIHtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImluXCI6XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgbXVzdCBiZSBhbiBhcnJheVwiKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWUuaW5jbHVkZXMocmVjb3JkW2ZpZWxkXSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJub3RfaW5cIjpcblx0XHRcdFx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBtdXN0IGJlIGFuIGFycmF5XCIpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAhdmFsdWUuaW5jbHVkZXMocmVjb3JkW2ZpZWxkXSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJjb250YWluc1wiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXS5pbmNsdWRlcyh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJzdGFydHNfd2l0aFwiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXS5zdGFydHNXaXRoKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImVuZHNfd2l0aFwiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXS5lbmRzV2l0aCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJuZVwiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXSAhPT0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJndFwiOiByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBCb29sZWFuKHJlY29yZFtmaWVsZF0gPiB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJndGVcIjogcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgQm9vbGVhbihyZWNvcmRbZmllbGRdID49IHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImx0XCI6IHJldHVybiB2YWx1ZSAhPSBudWxsICYmIEJvb2xlYW4ocmVjb3JkW2ZpZWxkXSA8IHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImx0ZVwiOiByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBCb29sZWFuKHJlY29yZFtmaWVsZF0gPD0gdmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRkZWZhdWx0OiByZXR1cm4gcmVjb3JkW2ZpZWxkXSA9PT0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRyZXR1cm4gdGFibGUuZmlsdGVyKChyZWNvcmQpID0+IHtcblx0XHRcdFx0XHRcdGlmICghd2hlcmUkMS5sZW5ndGggfHwgd2hlcmUkMS5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0bGV0IHJlc3VsdCA9IGV2YWxDbGF1c2UocmVjb3JkLCB3aGVyZSQxWzBdKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2xhdXNlIG9mIHdoZXJlJDEpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2xhdXNlUmVzdWx0ID0gZXZhbENsYXVzZShyZWNvcmQsIGNsYXVzZSk7XG5cdFx0XHRcdFx0XHRcdGlmIChjbGF1c2UuY29ubmVjdG9yID09PSBcIk9SXCIpIHJlc3VsdCA9IHJlc3VsdCB8fCBjbGF1c2VSZXN1bHQ7XG5cdFx0XHRcdFx0XHRcdGVsc2UgcmVzdWx0ID0gcmVzdWx0ICYmIGNsYXVzZVJlc3VsdDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGlmICgham9pbikgcmV0dXJuIGV4ZWN1dGUod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgYmFzZVJlY29yZHMgPSBleGVjdXRlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGdyb3VwZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdFx0XHRjb25zdCBzZWVuSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRcdFx0Zm9yIChjb25zdCBiYXNlUmVjb3JkIG9mIGJhc2VSZWNvcmRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmFzZUlkID0gU3RyaW5nKGJhc2VSZWNvcmQuaWQpO1xuXHRcdFx0XHRcdGlmICghZ3JvdXBlZC5oYXMoYmFzZUlkKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVzdGVkID0geyAuLi5iYXNlUmVjb3JkIH07XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBqb2luTW9kZWxOYW1lID0gZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCk7XG5cdFx0XHRcdFx0XHRcdGlmIChqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCIpIG5lc3RlZFtqb2luTW9kZWxOYW1lXSA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdG5lc3RlZFtqb2luTW9kZWxOYW1lXSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdHNlZW5JZHMuc2V0KGAke2Jhc2VJZH0tJHtqb2luTW9kZWx9YCwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGdyb3VwZWQuc2V0KGJhc2VJZCwgbmVzdGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgbmVzdGVkRW50cnkgPSBncm91cGVkLmdldChiYXNlSWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBqb2luTW9kZWxOYW1lID0gZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCk7XG5cdFx0XHRcdFx0XHRjb25zdCBqb2luVGFibGUgPSBkYltqb2luTW9kZWxOYW1lXTtcblx0XHRcdFx0XHRcdGlmICgham9pblRhYmxlKSB7XG5cdFx0XHRcdFx0XHRcdGxvZ2dlci5lcnJvcihgW01lbW9yeUFkYXB0ZXJdIEpvaW5PcHRpb24gbW9kZWwgJHtqb2luTW9kZWxOYW1lfSBub3QgZm91bmQgaW4gdGhlIERCYCwgT2JqZWN0LmtleXMoZGIpKTtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBKb2luT3B0aW9uIG1vZGVsICR7am9pbk1vZGVsTmFtZX0gbm90IGZvdW5kYCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb25zdCBtYXRjaGluZ1JlY29yZHMgPSBqb2luVGFibGUuZmlsdGVyKChqb2luUmVjb3JkKSA9PiBqb2luUmVjb3JkW2pvaW5BdHRyLm9uLnRvXSA9PT0gYmFzZVJlY29yZFtqb2luQXR0ci5vbi5mcm9tXSk7XG5cdFx0XHRcdFx0XHRpZiAoam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiKSBuZXN0ZWRFbnRyeVtqb2luTW9kZWxOYW1lXSA9IG1hdGNoaW5nUmVjb3Jkc1swXSB8fCBudWxsO1xuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNlZW5TZXQgPSBzZWVuSWRzLmdldChgJHtiYXNlSWR9LSR7am9pbk1vZGVsfWApO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW1pdCA9IGpvaW5BdHRyLmxpbWl0ID8/IDEwMDtcblx0XHRcdFx0XHRcdFx0bGV0IGNvdW50ID0gMDtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBtYXRjaGluZ1JlY29yZCBvZiBtYXRjaGluZ1JlY29yZHMpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY291bnQgPj0gbGltaXQpIGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc2VlblNldC5oYXMobWF0Y2hpbmdSZWNvcmQuaWQpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXN0ZWRFbnRyeVtqb2luTW9kZWxOYW1lXS5wdXNoKG1hdGNoaW5nUmVjb3JkKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlZW5TZXQuYWRkKG1hdGNoaW5nUmVjb3JkLmlkKTtcblx0XHRcdFx0XHRcdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBBcnJheS5mcm9tKGdyb3VwZWQudmFsdWVzKCkpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y3JlYXRlOiBhc3luYyAoeyBtb2RlbCwgZGF0YSB9KSA9PiB7XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCB8fCBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIikgZGF0YS5pZCA9IGRiW2dldE1vZGVsTmFtZShtb2RlbCldLmxlbmd0aCArIDE7XG5cdFx0XHRcdFx0aWYgKCFkYlttb2RlbF0pIGRiW21vZGVsXSA9IFtdO1xuXHRcdFx0XHRcdGRiW21vZGVsXS5wdXNoKGRhdGEpO1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kT25lOiBhc3luYyAoeyBtb2RlbCwgd2hlcmUsIGpvaW4gfSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwsIGpvaW4pO1xuXHRcdFx0XHRcdGlmIChqb2luKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNBcnJheSA9IHJlcztcblx0XHRcdFx0XHRcdGlmICghcmVzQXJyYXkubGVuZ3RoKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRcdHJldHVybiByZXNBcnJheVswXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc1swXSB8fCBudWxsO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kTWFueTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlLCBzb3J0QnksIGxpbWl0LCBvZmZzZXQsIGpvaW4gfSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSB8fCBbXSwgbW9kZWwsIGpvaW4pO1xuXHRcdFx0XHRcdGlmIChqb2luKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNBcnJheSA9IHJlcztcblx0XHRcdFx0XHRcdGlmICghcmVzQXJyYXkubGVuZ3RoKSByZXR1cm4gW107XG5cdFx0XHRcdFx0XHRhcHBseVNvcnRUb1JlY29yZHMocmVzQXJyYXksIHNvcnRCeSwgbW9kZWwpO1xuXHRcdFx0XHRcdFx0bGV0IHBhZ2luYXRlZFJlY29yZHMgPSByZXNBcnJheTtcblx0XHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkgcGFnaW5hdGVkUmVjb3JkcyA9IHBhZ2luYXRlZFJlY29yZHMuc2xpY2Uob2Zmc2V0KTtcblx0XHRcdFx0XHRcdGlmIChsaW1pdCAhPT0gdm9pZCAwKSBwYWdpbmF0ZWRSZWNvcmRzID0gcGFnaW5hdGVkUmVjb3Jkcy5zbGljZSgwLCBsaW1pdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFnaW5hdGVkUmVjb3Jkcztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGV0IHRhYmxlID0gYXBwbHlTb3J0VG9SZWNvcmRzKHJlcywgc29ydEJ5LCBtb2RlbCk7XG5cdFx0XHRcdFx0aWYgKG9mZnNldCAhPT0gdm9pZCAwKSB0YWJsZSA9IHRhYmxlLnNsaWNlKG9mZnNldCk7XG5cdFx0XHRcdFx0aWYgKGxpbWl0ICE9PSB2b2lkIDApIHRhYmxlID0gdGFibGUuc2xpY2UoMCwgbGltaXQpO1xuXHRcdFx0XHRcdHJldHVybiB0YWJsZSB8fCBbXTtcblx0XHRcdFx0fSxcblx0XHRcdFx0Y291bnQ6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG5cdFx0XHRcdFx0aWYgKHdoZXJlKSByZXR1cm4gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCkubGVuZ3RoO1xuXHRcdFx0XHRcdHJldHVybiBkYlttb2RlbF0ubGVuZ3RoO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cGRhdGU6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0XHRyZXMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG5cdFx0XHRcdFx0XHRPYmplY3QuYXNzaWduKHJlY29yZCwgdXBkYXRlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzWzBdIHx8IG51bGw7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGV0ZTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCB0YWJsZSA9IGRiW21vZGVsXTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0XHRkYlttb2RlbF0gPSB0YWJsZS5maWx0ZXIoKHJlY29yZCkgPT4gIXJlcy5pbmNsdWRlcyhyZWNvcmQpKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVsZXRlTWFueTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCB0YWJsZSA9IGRiW21vZGVsXTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0XHRsZXQgY291bnQgPSAwO1xuXHRcdFx0XHRcdGRiW21vZGVsXSA9IHRhYmxlLmZpbHRlcigocmVjb3JkKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocmVzLmluY2x1ZGVzKHJlY29yZCkpIHtcblx0XHRcdFx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuICFyZXMuaW5jbHVkZXMocmVjb3JkKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm4gY291bnQ7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVwZGF0ZU1hbnkoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZSB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0cmVzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuXHRcdFx0XHRcdFx0T2JqZWN0LmFzc2lnbihyZWNvcmQsIHVwZGF0ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc1swXSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiAob3B0aW9ucykgPT4ge1xuXHRcdGxhenlPcHRpb25zID0gb3B0aW9ucztcblx0XHRyZXR1cm4gYWRhcHRlckNyZWF0b3Iob3B0aW9ucyk7XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1lbW9yeUFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeS1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ better_call__WEBPACK_IMPORTED_MODULE_20__.APIError),\n/* harmony export */   accountInfo: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo),\n/* harmony export */   callbackOAuth: () => (/* reexport safe */ _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth),\n/* harmony export */   changeEmail: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail),\n/* harmony export */   changePassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword),\n/* harmony export */   checkEndpointConflicts: () => (/* binding */ checkEndpointConflicts),\n/* harmony export */   createAuthEndpoint: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.createAuthMiddleware),\n/* harmony export */   createEmailVerificationToken: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.createEmailVerificationToken),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback),\n/* harmony export */   error: () => (/* reexport safe */ _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error),\n/* harmony export */   formCsrfMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware),\n/* harmony export */   freshSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.freshSessionMiddleware),\n/* harmony export */   getAccessToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken),\n/* harmony export */   getEndpoints: () => (/* binding */ getEndpoints),\n/* harmony export */   getIp: () => (/* reexport safe */ _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp),\n/* harmony export */   getOAuthState: () => (/* reexport safe */ _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__.getOAuthState),\n/* harmony export */   getSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession),\n/* harmony export */   getSessionFromCtx: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx),\n/* harmony export */   linkSocialAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount),\n/* harmony export */   listSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions),\n/* harmony export */   listUserAccounts: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts),\n/* harmony export */   ok: () => (/* reexport safe */ _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok),\n/* harmony export */   optionsMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.optionsMiddleware),\n/* harmony export */   originCheck: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware),\n/* harmony export */   refreshToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.requestOnlySessionMiddleware),\n/* harmony export */   requestPasswordReset: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword),\n/* harmony export */   revokeOtherSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession),\n/* harmony export */   revokeSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions),\n/* harmony export */   router: () => (/* binding */ router),\n/* harmony export */   sendVerificationEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmailFn),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sessionMiddleware),\n/* harmony export */   setPassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword),\n/* harmony export */   signInEmail: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail),\n/* harmony export */   signInSocial: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial),\n/* harmony export */   signOut: () => (/* reexport safe */ _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut),\n/* harmony export */   signUpEmail: () => (/* reexport safe */ _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail),\n/* harmony export */   unlinkAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount),\n/* harmony export */   updateUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser),\n/* harmony export */   verifyEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./middlewares/oauth.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./middlewares/origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./middlewares/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rate-limiter/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs\");\n/* harmony import */ var _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routes/session.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/account.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./routes/callback.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./routes/email-verification.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routes/error.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./routes/ok.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./routes/password.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./routes/sign-in.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./routes/sign-out.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./routes/sign-up.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./routes/update-user.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs\");\n/* harmony import */ var _routes_index_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./routes/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs\");\n/* harmony import */ var _to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./to-auth-endpoints.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/index.ts\nfunction checkEndpointConflicts(options, logger$1) {\n\tconst endpointRegistry = /* @__PURE__ */ new Map();\n\toptions.plugins?.forEach((plugin) => {\n\t\tif (plugin.endpoints) {\n\t\t\tfor (const [key, endpoint] of Object.entries(plugin.endpoints)) if (endpoint && \"path\" in endpoint && typeof endpoint.path === \"string\") {\n\t\t\t\tconst path = endpoint.path;\n\t\t\t\tlet methods = [];\n\t\t\t\tif (endpoint.options && \"method\" in endpoint.options) {\n\t\t\t\t\tif (Array.isArray(endpoint.options.method)) methods = endpoint.options.method;\n\t\t\t\t\telse if (typeof endpoint.options.method === \"string\") methods = [endpoint.options.method];\n\t\t\t\t}\n\t\t\t\tif (methods.length === 0) methods = [\"*\"];\n\t\t\t\tif (!endpointRegistry.has(path)) endpointRegistry.set(path, []);\n\t\t\t\tendpointRegistry.get(path).push({\n\t\t\t\t\tpluginId: plugin.id,\n\t\t\t\t\tendpointKey: key,\n\t\t\t\t\tmethods\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\tconst conflicts = [];\n\tfor (const [path, entries] of endpointRegistry.entries()) if (entries.length > 1) {\n\t\tconst methodMap = /* @__PURE__ */ new Map();\n\t\tlet hasConflict = false;\n\t\tfor (const entry of entries) for (const method of entry.methods) {\n\t\t\tif (!methodMap.has(method)) methodMap.set(method, []);\n\t\t\tmethodMap.get(method).push(entry.pluginId);\n\t\t\tif (methodMap.get(method).length > 1) hasConflict = true;\n\t\t\tif (method === \"*\" && entries.length > 1) hasConflict = true;\n\t\t\telse if (method !== \"*\" && methodMap.has(\"*\")) hasConflict = true;\n\t\t}\n\t\tif (hasConflict) {\n\t\t\tconst uniquePlugins = [...new Set(entries.map((e) => e.pluginId))];\n\t\t\tconst conflictingMethods = [];\n\t\t\tfor (const [method, plugins] of methodMap.entries()) if (plugins.length > 1 || method === \"*\" && entries.length > 1 || method !== \"*\" && methodMap.has(\"*\")) conflictingMethods.push(method);\n\t\t\tconflicts.push({\n\t\t\t\tpath,\n\t\t\t\tplugins: uniquePlugins,\n\t\t\t\tconflictingMethods\n\t\t\t});\n\t\t}\n\t}\n\tif (conflicts.length > 0) {\n\t\tconst conflictMessages = conflicts.map((conflict) => `  - \"${conflict.path}\" [${conflict.conflictingMethods.join(\", \")}] used by plugins: ${conflict.plugins.join(\", \")}`).join(\"\\n\");\n\t\tlogger$1.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:\n${conflictMessages}\n\nTo resolve this, you can:\n\t1. Use only one of the conflicting plugins\n\t2. Configure the plugins to use different paths (if supported)\n\t3. Ensure plugins use different HTTP methods for the same path\n`);\n\t}\n}\nfunction getEndpoints(ctx, options) {\n\tconst pluginEndpoints = options.plugins?.reduce((acc, plugin) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t...plugin.endpoints\n\t\t};\n\t}, {}) ?? {};\n\tconst middlewares = options.plugins?.map((plugin) => plugin.middlewares?.map((m) => {\n\t\tconst middleware = (async (context) => {\n\t\t\tconst authContext = await ctx;\n\t\t\treturn m.middleware({\n\t\t\t\t...context,\n\t\t\t\tcontext: {\n\t\t\t\t\t...authContext,\n\t\t\t\t\t...context.context\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tmiddleware.options = m.middleware.options;\n\t\treturn {\n\t\t\tpath: m.path,\n\t\t\tmiddleware\n\t\t};\n\t})).filter((plugin) => plugin !== void 0).flat() || [];\n\treturn {\n\t\tapi: (0,_to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__.toAuthEndpoints)({\n\t\t\tsignInSocial: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial)(),\n\t\t\tcallbackOAuth: _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth,\n\t\t\tgetSession: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession)(),\n\t\t\tsignOut: _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut,\n\t\t\tsignUpEmail: (0,_routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail)(),\n\t\t\tsignInEmail: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail)(),\n\t\t\tresetPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword,\n\t\t\tverifyPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword,\n\t\t\tverifyEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail,\n\t\t\tsendVerificationEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail,\n\t\t\tchangeEmail: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail,\n\t\t\tchangePassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword,\n\t\t\tsetPassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword,\n\t\t\tupdateUser: (0,_routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser)(),\n\t\t\tdeleteUser: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser,\n\t\t\trequestPasswordReset: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset,\n\t\t\trequestPasswordResetCallback: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback,\n\t\t\tlistSessions: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions)(),\n\t\t\trevokeSession: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession,\n\t\t\trevokeSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions,\n\t\t\trevokeOtherSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions,\n\t\t\tlinkSocialAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount,\n\t\t\tlistUserAccounts: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts,\n\t\t\tdeleteUserCallback: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback,\n\t\t\tunlinkAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount,\n\t\t\trefreshToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken,\n\t\t\tgetAccessToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken,\n\t\t\taccountInfo: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo,\n\t\t\t...pluginEndpoints,\n\t\t\tok: _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok,\n\t\t\terror: _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error\n\t\t}, ctx),\n\t\tmiddlewares\n\t};\n}\nconst router = (ctx, options) => {\n\tconst { api, middlewares } = getEndpoints(ctx, options);\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\treturn (0,better_call__WEBPACK_IMPORTED_MODULE_20__.createRouter)(api, {\n\t\trouterContext: ctx,\n\t\topenapi: { disabled: true },\n\t\tbasePath,\n\t\trouterMiddleware: [{\n\t\t\tpath: \"/**\",\n\t\t\tmiddleware: _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware\n\t\t}, ...middlewares],\n\t\tallowedMediaTypes: [\"application/json\"],\n\t\tskipTrailingSlashes: options.advanced?.skipTrailingSlashes ?? false,\n\t\tasync onRequest(req) {\n\t\t\tconst disabledPaths = ctx.options.disabledPaths || [];\n\t\t\tconst normalizedPath = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_19__.normalizePathname)(req.url, basePath);\n\t\t\tif (disabledPaths.includes(normalizedPath)) return new Response(\"Not Found\", { status: 404 });\n\t\t\tlet currentRequest = req;\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onRequest) {\n\t\t\t\tconst response = await plugin.onRequest(currentRequest, ctx);\n\t\t\t\tif (response && \"response\" in response) return response.response;\n\t\t\t\tif (response && \"request\" in response) currentRequest = response.request;\n\t\t\t}\n\t\t\tconst rateLimitResponse = await (0,_rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__.onRequestRateLimit)(currentRequest, ctx);\n\t\t\tif (rateLimitResponse) return rateLimitResponse;\n\t\t\treturn currentRequest;\n\t\t},\n\t\tasync onResponse(res) {\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onResponse) {\n\t\t\t\tconst response = await plugin.onResponse(res, ctx);\n\t\t\t\tif (response) return response.response;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\tonError(e) {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_20__.APIError && e.status === \"FOUND\") return;\n\t\t\tif (options.onAPIError?.throw) throw e;\n\t\t\tif (options.onAPIError?.onError) {\n\t\t\t\toptions.onAPIError.onError(e, ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst optLogLevel = options.logger?.level;\n\t\t\tconst log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__.logger : void 0;\n\t\t\tif (options.logger?.disabled !== true) {\n\t\t\t\tif (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n\t\t\t\t\tif (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n\t\t\t\t\t\tctx.logger?.error(e.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_20__.APIError) {\n\t\t\t\t\tif (e.status === \"INTERNAL_SERVER_ERROR\") ctx.logger.error(e.status, e);\n\t\t\t\t\tlog?.error(e.message);\n\t\t\t\t} else ctx.logger?.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\t\t}\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvRDtBQUNJO0FBQ2dEO0FBQ3ZFO0FBQzZCO0FBQzhLO0FBQ3ZHO0FBQy9FO0FBQ3NGO0FBQ2pHO0FBQ047QUFDcUY7QUFDekQ7QUFDakI7QUFDRztBQUM2RTtBQUNwRztBQUM4QjtBQUNYO0FBQ2E7QUFDaUI7QUFDdUI7O0FBRXBHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxjQUFjLEtBQUssdUNBQXVDLHFCQUFxQiw0QkFBNEI7QUFDMUs7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsT0FBTyx3RUFBZTtBQUN0QixpQkFBaUIsa0VBQVk7QUFDN0IsZ0JBQWdCO0FBQ2hCLGVBQWUsK0RBQVU7QUFDekIsVUFBVTtBQUNWLGdCQUFnQixpRUFBVztBQUMzQixnQkFBZ0IsaUVBQVc7QUFDM0IsZ0JBQWdCO0FBQ2hCLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2Qsd0JBQXdCO0FBQ3hCLGNBQWM7QUFDZCxpQkFBaUI7QUFDakIsY0FBYztBQUNkLGVBQWUsb0VBQVU7QUFDekIsYUFBYTtBQUNiLHVCQUF1QjtBQUN2QiwrQkFBK0I7QUFDL0IsaUJBQWlCLGlFQUFZO0FBQzdCLGdCQUFnQjtBQUNoQixpQkFBaUI7QUFDakIsc0JBQXNCO0FBQ3RCLG9CQUFvQjtBQUNwQixtQkFBbUI7QUFDbkIscUJBQXFCO0FBQ3JCLGdCQUFnQjtBQUNoQixlQUFlO0FBQ2YsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZDtBQUNBLEtBQUs7QUFDTCxRQUFRO0FBQ1IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQkFBbUI7QUFDNUI7QUFDQSxRQUFRLDBEQUFZO0FBQ3BCO0FBQ0EsYUFBYSxnQkFBZ0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnRkFBcUI7QUFDcEMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJFQUFpQjtBQUMzQyxrRkFBa0YsYUFBYTtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkVBQWtCO0FBQ3JEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esb0JBQW9CLGtEQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RiwwREFBTTtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrREFBVTtBQUMvQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDaTBCO0FBQ2owQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IGdldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9vYXV0aC5tanNcIjtcbmltcG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSwgb3JpZ2luQ2hlY2ssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSB9IGZyb20gXCIuL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCBcIi4vbWlkZGxld2FyZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBvblJlcXVlc3RSYXRlTGltaXQgfSBmcm9tIFwiLi9yYXRlLWxpbWl0ZXIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlzdFNlc3Npb25zLCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBhY2NvdW50SW5mbywgZ2V0QWNjZXNzVG9rZW4sIGxpbmtTb2NpYWxBY2NvdW50LCBsaXN0VXNlckFjY291bnRzLCByZWZyZXNoVG9rZW4sIHVubGlua0FjY291bnQgfSBmcm9tIFwiLi9yb3V0ZXMvYWNjb3VudC5tanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrT0F1dGggfSBmcm9tIFwiLi9yb3V0ZXMvY2FsbGJhY2subWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCB2ZXJpZnlFbWFpbCB9IGZyb20gXCIuL3JvdXRlcy9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBlcnJvciB9IGZyb20gXCIuL3JvdXRlcy9lcnJvci5tanNcIjtcbmltcG9ydCB7IG9rIH0gZnJvbSBcIi4vcm91dGVzL29rLm1qc1wiO1xuaW1wb3J0IHsgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIi4vcm91dGVzL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgc2lnbkluRW1haWwsIHNpZ25JblNvY2lhbCB9IGZyb20gXCIuL3JvdXRlcy9zaWduLWluLm1qc1wiO1xuaW1wb3J0IHsgc2lnbk91dCB9IGZyb20gXCIuL3JvdXRlcy9zaWduLW91dC5tanNcIjtcbmltcG9ydCB7IHNpZ25VcEVtYWlsIH0gZnJvbSBcIi4vcm91dGVzL3NpZ24tdXAubWpzXCI7XG5pbXBvcnQgeyBjaGFuZ2VFbWFpbCwgY2hhbmdlUGFzc3dvcmQsIGRlbGV0ZVVzZXIsIGRlbGV0ZVVzZXJDYWxsYmFjaywgc2V0UGFzc3dvcmQsIHVwZGF0ZVVzZXIgfSBmcm9tIFwiLi9yb3V0ZXMvdXBkYXRlLXVzZXIubWpzXCI7XG5pbXBvcnQgXCIuL3JvdXRlcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHRvQXV0aEVuZHBvaW50cyB9IGZyb20gXCIuL3RvLWF1dGgtZW5kcG9pbnRzLm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgbm9ybWFsaXplUGF0aG5hbWUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IEFQSUVycm9yLCBBUElFcnJvciBhcyBBUElFcnJvciQxLCBjcmVhdGVSb3V0ZXIgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUsIG9wdGlvbnNNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9pbmRleC50c1xuZnVuY3Rpb24gY2hlY2tFbmRwb2ludENvbmZsaWN0cyhvcHRpb25zLCBsb2dnZXIkMSkge1xuXHRjb25zdCBlbmRwb2ludFJlZ2lzdHJ5ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0b3B0aW9ucy5wbHVnaW5zPy5mb3JFYWNoKChwbHVnaW4pID0+IHtcblx0XHRpZiAocGx1Z2luLmVuZHBvaW50cykge1xuXHRcdFx0Zm9yIChjb25zdCBba2V5LCBlbmRwb2ludF0gb2YgT2JqZWN0LmVudHJpZXMocGx1Z2luLmVuZHBvaW50cykpIGlmIChlbmRwb2ludCAmJiBcInBhdGhcIiBpbiBlbmRwb2ludCAmJiB0eXBlb2YgZW5kcG9pbnQucGF0aCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gZW5kcG9pbnQucGF0aDtcblx0XHRcdFx0bGV0IG1ldGhvZHMgPSBbXTtcblx0XHRcdFx0aWYgKGVuZHBvaW50Lm9wdGlvbnMgJiYgXCJtZXRob2RcIiBpbiBlbmRwb2ludC5vcHRpb25zKSB7XG5cdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZW5kcG9pbnQub3B0aW9ucy5tZXRob2QpKSBtZXRob2RzID0gZW5kcG9pbnQub3B0aW9ucy5tZXRob2Q7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGVuZHBvaW50Lm9wdGlvbnMubWV0aG9kID09PSBcInN0cmluZ1wiKSBtZXRob2RzID0gW2VuZHBvaW50Lm9wdGlvbnMubWV0aG9kXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobWV0aG9kcy5sZW5ndGggPT09IDApIG1ldGhvZHMgPSBbXCIqXCJdO1xuXHRcdFx0XHRpZiAoIWVuZHBvaW50UmVnaXN0cnkuaGFzKHBhdGgpKSBlbmRwb2ludFJlZ2lzdHJ5LnNldChwYXRoLCBbXSk7XG5cdFx0XHRcdGVuZHBvaW50UmVnaXN0cnkuZ2V0KHBhdGgpLnB1c2goe1xuXHRcdFx0XHRcdHBsdWdpbklkOiBwbHVnaW4uaWQsXG5cdFx0XHRcdFx0ZW5kcG9pbnRLZXk6IGtleSxcblx0XHRcdFx0XHRtZXRob2RzXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cdGNvbnN0IGNvbmZsaWN0cyA9IFtdO1xuXHRmb3IgKGNvbnN0IFtwYXRoLCBlbnRyaWVzXSBvZiBlbmRwb2ludFJlZ2lzdHJ5LmVudHJpZXMoKSkgaWYgKGVudHJpZXMubGVuZ3RoID4gMSkge1xuXHRcdGNvbnN0IG1ldGhvZE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0bGV0IGhhc0NvbmZsaWN0ID0gZmFsc2U7XG5cdFx0Zm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSBmb3IgKGNvbnN0IG1ldGhvZCBvZiBlbnRyeS5tZXRob2RzKSB7XG5cdFx0XHRpZiAoIW1ldGhvZE1hcC5oYXMobWV0aG9kKSkgbWV0aG9kTWFwLnNldChtZXRob2QsIFtdKTtcblx0XHRcdG1ldGhvZE1hcC5nZXQobWV0aG9kKS5wdXNoKGVudHJ5LnBsdWdpbklkKTtcblx0XHRcdGlmIChtZXRob2RNYXAuZ2V0KG1ldGhvZCkubGVuZ3RoID4gMSkgaGFzQ29uZmxpY3QgPSB0cnVlO1xuXHRcdFx0aWYgKG1ldGhvZCA9PT0gXCIqXCIgJiYgZW50cmllcy5sZW5ndGggPiAxKSBoYXNDb25mbGljdCA9IHRydWU7XG5cdFx0XHRlbHNlIGlmIChtZXRob2QgIT09IFwiKlwiICYmIG1ldGhvZE1hcC5oYXMoXCIqXCIpKSBoYXNDb25mbGljdCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmIChoYXNDb25mbGljdCkge1xuXHRcdFx0Y29uc3QgdW5pcXVlUGx1Z2lucyA9IFsuLi5uZXcgU2V0KGVudHJpZXMubWFwKChlKSA9PiBlLnBsdWdpbklkKSldO1xuXHRcdFx0Y29uc3QgY29uZmxpY3RpbmdNZXRob2RzID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IFttZXRob2QsIHBsdWdpbnNdIG9mIG1ldGhvZE1hcC5lbnRyaWVzKCkpIGlmIChwbHVnaW5zLmxlbmd0aCA+IDEgfHwgbWV0aG9kID09PSBcIipcIiAmJiBlbnRyaWVzLmxlbmd0aCA+IDEgfHwgbWV0aG9kICE9PSBcIipcIiAmJiBtZXRob2RNYXAuaGFzKFwiKlwiKSkgY29uZmxpY3RpbmdNZXRob2RzLnB1c2gobWV0aG9kKTtcblx0XHRcdGNvbmZsaWN0cy5wdXNoKHtcblx0XHRcdFx0cGF0aCxcblx0XHRcdFx0cGx1Z2luczogdW5pcXVlUGx1Z2lucyxcblx0XHRcdFx0Y29uZmxpY3RpbmdNZXRob2RzXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0aWYgKGNvbmZsaWN0cy5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgY29uZmxpY3RNZXNzYWdlcyA9IGNvbmZsaWN0cy5tYXAoKGNvbmZsaWN0KSA9PiBgICAtIFwiJHtjb25mbGljdC5wYXRofVwiIFske2NvbmZsaWN0LmNvbmZsaWN0aW5nTWV0aG9kcy5qb2luKFwiLCBcIil9XSB1c2VkIGJ5IHBsdWdpbnM6ICR7Y29uZmxpY3QucGx1Z2lucy5qb2luKFwiLCBcIil9YCkuam9pbihcIlxcblwiKTtcblx0XHRsb2dnZXIkMS5lcnJvcihgRW5kcG9pbnQgcGF0aCBjb25mbGljdHMgZGV0ZWN0ZWQhIE11bHRpcGxlIHBsdWdpbnMgYXJlIHRyeWluZyB0byB1c2UgdGhlIHNhbWUgZW5kcG9pbnQgcGF0aHMgd2l0aCBjb25mbGljdGluZyBIVFRQIG1ldGhvZHM6XG4ke2NvbmZsaWN0TWVzc2FnZXN9XG5cblRvIHJlc29sdmUgdGhpcywgeW91IGNhbjpcblx0MS4gVXNlIG9ubHkgb25lIG9mIHRoZSBjb25mbGljdGluZyBwbHVnaW5zXG5cdDIuIENvbmZpZ3VyZSB0aGUgcGx1Z2lucyB0byB1c2UgZGlmZmVyZW50IHBhdGhzIChpZiBzdXBwb3J0ZWQpXG5cdDMuIEVuc3VyZSBwbHVnaW5zIHVzZSBkaWZmZXJlbnQgSFRUUCBtZXRob2RzIGZvciB0aGUgc2FtZSBwYXRoXG5gKTtcblx0fVxufVxuZnVuY3Rpb24gZ2V0RW5kcG9pbnRzKGN0eCwgb3B0aW9ucykge1xuXHRjb25zdCBwbHVnaW5FbmRwb2ludHMgPSBvcHRpb25zLnBsdWdpbnM/LnJlZHVjZSgoYWNjLCBwbHVnaW4pID0+IHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4uYWNjLFxuXHRcdFx0Li4ucGx1Z2luLmVuZHBvaW50c1xuXHRcdH07XG5cdH0sIHt9KSA/PyB7fTtcblx0Y29uc3QgbWlkZGxld2FyZXMgPSBvcHRpb25zLnBsdWdpbnM/Lm1hcCgocGx1Z2luKSA9PiBwbHVnaW4ubWlkZGxld2FyZXM/Lm1hcCgobSkgPT4ge1xuXHRcdGNvbnN0IG1pZGRsZXdhcmUgPSAoYXN5bmMgKGNvbnRleHQpID0+IHtcblx0XHRcdGNvbnN0IGF1dGhDb250ZXh0ID0gYXdhaXQgY3R4O1xuXHRcdFx0cmV0dXJuIG0ubWlkZGxld2FyZSh7XG5cdFx0XHRcdC4uLmNvbnRleHQsXG5cdFx0XHRcdGNvbnRleHQ6IHtcblx0XHRcdFx0XHQuLi5hdXRoQ29udGV4dCxcblx0XHRcdFx0XHQuLi5jb250ZXh0LmNvbnRleHRcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0bWlkZGxld2FyZS5vcHRpb25zID0gbS5taWRkbGV3YXJlLm9wdGlvbnM7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHBhdGg6IG0ucGF0aCxcblx0XHRcdG1pZGRsZXdhcmVcblx0XHR9O1xuXHR9KSkuZmlsdGVyKChwbHVnaW4pID0+IHBsdWdpbiAhPT0gdm9pZCAwKS5mbGF0KCkgfHwgW107XG5cdHJldHVybiB7XG5cdFx0YXBpOiB0b0F1dGhFbmRwb2ludHMoe1xuXHRcdFx0c2lnbkluU29jaWFsOiBzaWduSW5Tb2NpYWwoKSxcblx0XHRcdGNhbGxiYWNrT0F1dGgsXG5cdFx0XHRnZXRTZXNzaW9uOiBnZXRTZXNzaW9uKCksXG5cdFx0XHRzaWduT3V0LFxuXHRcdFx0c2lnblVwRW1haWw6IHNpZ25VcEVtYWlsKCksXG5cdFx0XHRzaWduSW5FbWFpbDogc2lnbkluRW1haWwoKSxcblx0XHRcdHJlc2V0UGFzc3dvcmQsXG5cdFx0XHR2ZXJpZnlQYXNzd29yZCxcblx0XHRcdHZlcmlmeUVtYWlsLFxuXHRcdFx0c2VuZFZlcmlmaWNhdGlvbkVtYWlsLFxuXHRcdFx0Y2hhbmdlRW1haWwsXG5cdFx0XHRjaGFuZ2VQYXNzd29yZCxcblx0XHRcdHNldFBhc3N3b3JkLFxuXHRcdFx0dXBkYXRlVXNlcjogdXBkYXRlVXNlcigpLFxuXHRcdFx0ZGVsZXRlVXNlcixcblx0XHRcdHJlcXVlc3RQYXNzd29yZFJlc2V0LFxuXHRcdFx0cmVxdWVzdFBhc3N3b3JkUmVzZXRDYWxsYmFjayxcblx0XHRcdGxpc3RTZXNzaW9uczogbGlzdFNlc3Npb25zKCksXG5cdFx0XHRyZXZva2VTZXNzaW9uLFxuXHRcdFx0cmV2b2tlU2Vzc2lvbnMsXG5cdFx0XHRyZXZva2VPdGhlclNlc3Npb25zLFxuXHRcdFx0bGlua1NvY2lhbEFjY291bnQsXG5cdFx0XHRsaXN0VXNlckFjY291bnRzLFxuXHRcdFx0ZGVsZXRlVXNlckNhbGxiYWNrLFxuXHRcdFx0dW5saW5rQWNjb3VudCxcblx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdGdldEFjY2Vzc1Rva2VuLFxuXHRcdFx0YWNjb3VudEluZm8sXG5cdFx0XHQuLi5wbHVnaW5FbmRwb2ludHMsXG5cdFx0XHRvayxcblx0XHRcdGVycm9yXG5cdFx0fSwgY3R4KSxcblx0XHRtaWRkbGV3YXJlc1xuXHR9O1xufVxuY29uc3Qgcm91dGVyID0gKGN0eCwgb3B0aW9ucykgPT4ge1xuXHRjb25zdCB7IGFwaSwgbWlkZGxld2FyZXMgfSA9IGdldEVuZHBvaW50cyhjdHgsIG9wdGlvbnMpO1xuXHRjb25zdCBiYXNlUGF0aCA9IG5ldyBVUkwoY3R4LmJhc2VVUkwpLnBhdGhuYW1lO1xuXHRyZXR1cm4gY3JlYXRlUm91dGVyKGFwaSwge1xuXHRcdHJvdXRlckNvbnRleHQ6IGN0eCxcblx0XHRvcGVuYXBpOiB7IGRpc2FibGVkOiB0cnVlIH0sXG5cdFx0YmFzZVBhdGgsXG5cdFx0cm91dGVyTWlkZGxld2FyZTogW3tcblx0XHRcdHBhdGg6IFwiLyoqXCIsXG5cdFx0XHRtaWRkbGV3YXJlOiBvcmlnaW5DaGVja01pZGRsZXdhcmVcblx0XHR9LCAuLi5taWRkbGV3YXJlc10sXG5cdFx0YWxsb3dlZE1lZGlhVHlwZXM6IFtcImFwcGxpY2F0aW9uL2pzb25cIl0sXG5cdFx0c2tpcFRyYWlsaW5nU2xhc2hlczogb3B0aW9ucy5hZHZhbmNlZD8uc2tpcFRyYWlsaW5nU2xhc2hlcyA/PyBmYWxzZSxcblx0XHRhc3luYyBvblJlcXVlc3QocmVxKSB7XG5cdFx0XHRjb25zdCBkaXNhYmxlZFBhdGhzID0gY3R4Lm9wdGlvbnMuZGlzYWJsZWRQYXRocyB8fCBbXTtcblx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplUGF0aG5hbWUocmVxLnVybCwgYmFzZVBhdGgpO1xuXHRcdFx0aWYgKGRpc2FibGVkUGF0aHMuaW5jbHVkZXMobm9ybWFsaXplZFBhdGgpKSByZXR1cm4gbmV3IFJlc3BvbnNlKFwiTm90IEZvdW5kXCIsIHsgc3RhdHVzOiA0MDQgfSk7XG5cdFx0XHRsZXQgY3VycmVudFJlcXVlc3QgPSByZXE7XG5cdFx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBjdHgub3B0aW9ucy5wbHVnaW5zIHx8IFtdKSBpZiAocGx1Z2luLm9uUmVxdWVzdCkge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHBsdWdpbi5vblJlcXVlc3QoY3VycmVudFJlcXVlc3QsIGN0eCk7XG5cdFx0XHRcdGlmIChyZXNwb25zZSAmJiBcInJlc3BvbnNlXCIgaW4gcmVzcG9uc2UpIHJldHVybiByZXNwb25zZS5yZXNwb25zZTtcblx0XHRcdFx0aWYgKHJlc3BvbnNlICYmIFwicmVxdWVzdFwiIGluIHJlc3BvbnNlKSBjdXJyZW50UmVxdWVzdCA9IHJlc3BvbnNlLnJlcXVlc3Q7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCByYXRlTGltaXRSZXNwb25zZSA9IGF3YWl0IG9uUmVxdWVzdFJhdGVMaW1pdChjdXJyZW50UmVxdWVzdCwgY3R4KTtcblx0XHRcdGlmIChyYXRlTGltaXRSZXNwb25zZSkgcmV0dXJuIHJhdGVMaW1pdFJlc3BvbnNlO1xuXHRcdFx0cmV0dXJuIGN1cnJlbnRSZXF1ZXN0O1xuXHRcdH0sXG5cdFx0YXN5bmMgb25SZXNwb25zZShyZXMpIHtcblx0XHRcdGZvciAoY29uc3QgcGx1Z2luIG9mIGN0eC5vcHRpb25zLnBsdWdpbnMgfHwgW10pIGlmIChwbHVnaW4ub25SZXNwb25zZSkge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHBsdWdpbi5vblJlc3BvbnNlKHJlcywgY3R4KTtcblx0XHRcdFx0aWYgKHJlc3BvbnNlKSByZXR1cm4gcmVzcG9uc2UucmVzcG9uc2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzO1xuXHRcdH0sXG5cdFx0b25FcnJvcihlKSB7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yJDEgJiYgZS5zdGF0dXMgPT09IFwiRk9VTkRcIikgcmV0dXJuO1xuXHRcdFx0aWYgKG9wdGlvbnMub25BUElFcnJvcj8udGhyb3cpIHRocm93IGU7XG5cdFx0XHRpZiAob3B0aW9ucy5vbkFQSUVycm9yPy5vbkVycm9yKSB7XG5cdFx0XHRcdG9wdGlvbnMub25BUElFcnJvci5vbkVycm9yKGUsIGN0eCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnN0IG9wdExvZ0xldmVsID0gb3B0aW9ucy5sb2dnZXI/LmxldmVsO1xuXHRcdFx0Y29uc3QgbG9nID0gb3B0TG9nTGV2ZWwgPT09IFwiZXJyb3JcIiB8fCBvcHRMb2dMZXZlbCA9PT0gXCJ3YXJuXCIgfHwgb3B0TG9nTGV2ZWwgPT09IFwiZGVidWdcIiA/IGxvZ2dlciA6IHZvaWQgMDtcblx0XHRcdGlmIChvcHRpb25zLmxvZ2dlcj8uZGlzYWJsZWQgIT09IHRydWUpIHtcblx0XHRcdFx0aWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgXCJtZXNzYWdlXCIgaW4gZSAmJiB0eXBlb2YgZS5tZXNzYWdlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0aWYgKGUubWVzc2FnZS5pbmNsdWRlcyhcIm5vIGNvbHVtblwiKSB8fCBlLm1lc3NhZ2UuaW5jbHVkZXMoXCJjb2x1bW5cIikgfHwgZS5tZXNzYWdlLmluY2x1ZGVzKFwicmVsYXRpb25cIikgfHwgZS5tZXNzYWdlLmluY2x1ZGVzKFwidGFibGVcIikgfHwgZS5tZXNzYWdlLmluY2x1ZGVzKFwiZG9lcyBub3QgZXhpc3RcIikpIHtcblx0XHRcdFx0XHRcdGN0eC5sb2dnZXI/LmVycm9yKGUubWVzc2FnZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IkMSkge1xuXHRcdFx0XHRcdGlmIChlLnN0YXR1cyA9PT0gXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIikgY3R4LmxvZ2dlci5lcnJvcihlLnN0YXR1cywgZSk7XG5cdFx0XHRcdFx0bG9nPy5lcnJvcihlLm1lc3NhZ2UpO1xuXHRcdFx0XHR9IGVsc2UgY3R4LmxvZ2dlcj8uZXJyb3IoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlID8gZS5uYW1lIDogXCJcIiwgZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQVBJRXJyb3IsIGFjY291bnRJbmZvLCBjYWxsYmFja09BdXRoLCBjaGFuZ2VFbWFpbCwgY2hhbmdlUGFzc3dvcmQsIGNoZWNrRW5kcG9pbnRDb25mbGljdHMsIGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUsIGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4sIGRlbGV0ZVVzZXIsIGRlbGV0ZVVzZXJDYWxsYmFjaywgZXJyb3IsIGZvcm1Dc3JmTWlkZGxld2FyZSwgZnJlc2hTZXNzaW9uTWlkZGxld2FyZSwgZ2V0QWNjZXNzVG9rZW4sIGdldEVuZHBvaW50cywgZ2V0SXAsIGdldE9BdXRoU3RhdGUsIGdldFNlc3Npb24sIGdldFNlc3Npb25Gcm9tQ3R4LCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFNlc3Npb25zLCBsaXN0VXNlckFjY291bnRzLCBvaywgb3B0aW9uc01pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUsIHJlZnJlc2hUb2tlbiwgcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSwgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHJldm9rZU90aGVyU2Vzc2lvbnMsIHJldm9rZVNlc3Npb24sIHJldm9rZVNlc3Npb25zLCByb3V0ZXIsIHNlbmRWZXJpZmljYXRpb25FbWFpbCwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4sIHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlLCBzZXNzaW9uTWlkZGxld2FyZSwgc2V0UGFzc3dvcmQsIHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwsIHNpZ25PdXQsIHNpZ25VcEVtYWlsLCB1bmxpbmtBY2NvdW50LCB1cGRhdGVVc2VyLCB2ZXJpZnlFbWFpbCwgdmVyaWZ5UGFzc3dvcmQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./oauth.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL21pZGRsZXdhcmVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7QUFBNEM7QUFDZ0QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxtaWRkbGV3YXJlc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi9vYXV0aC5tanNcIjtcbmltcG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSwgb3JpZ2luQ2hlY2ssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSB9IGZyb20gXCIuL29yaWdpbi1jaGVjay5tanNcIjtcblxuZXhwb3J0IHsgIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOAuthState: () => (/* binding */ getOAuthState),\n/* harmony export */   setOAuthState: () => (/* binding */ setOAuthState)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/api/middlewares/oauth.ts\nconst { get: getOAuthState, set: setOAuthState } = (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.defineRequestState)(() => null);\n\n//#endregion\n\n//# sourceMappingURL=oauth.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL21pZGRsZXdhcmVzL29hdXRoLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0Q7O0FBRS9EO0FBQ0EsUUFBUSx5Q0FBeUMsRUFBRSw2RUFBa0I7O0FBRXJFO0FBQ3dDO0FBQ3hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxcbWlkZGxld2FyZXNcXG9hdXRoLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVSZXF1ZXN0U3RhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9taWRkbGV3YXJlcy9vYXV0aC50c1xuY29uc3QgeyBnZXQ6IGdldE9BdXRoU3RhdGUsIHNldDogc2V0T0F1dGhTdGF0ZSB9ID0gZGVmaW5lUmVxdWVzdFN0YXRlKCgpID0+IG51bGwpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldE9BdXRoU3RhdGUsIHNldE9BdXRoU3RhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9hdXRoLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs":
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formCsrfMiddleware: () => (/* binding */ formCsrfMiddleware),\n/* harmony export */   originCheck: () => (/* binding */ originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* binding */ originCheckMiddleware)\n/* harmony export */ });\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../auth/trusted-origins.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n//#region src/api/middlewares/origin-check.ts\n/**\n* Checks if CSRF should be skipped for backward compatibility.\n* Previously, disableOriginCheck also disabled CSRF checks.\n* This maintains that behavior when disableCSRFCheck isn't explicitly set.\n* Only triggers for skipOriginCheck === true, not for path arrays.\n*/\nfunction shouldSkipCSRFForBackwardCompat(ctx) {\n\treturn ctx.context.skipOriginCheck === true && ctx.context.options.advanced?.disableCSRFCheck === void 0;\n}\n/**\n* Logs deprecation warning for users relying on coupled behavior.\n* Only logs if user explicitly set disableOriginCheck (not test environment default).\n*/\nconst logBackwardCompatWarning = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.deprecate)(function logBackwardCompatWarning$1() {}, \"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config.\");\n/**\n* A middleware to validate callbackURL and origin against trustedOrigins.\n* Also handles CSRF protection using Fetch Metadata for first-login scenarios.\n*/\nconst originCheckMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (ctx.request?.method === \"GET\" || ctx.request?.method === \"OPTIONS\" || ctx.request?.method === \"HEAD\" || !ctx.request) return;\n\tawait validateOrigin(ctx);\n\tif (ctx.context.skipOriginCheck) return;\n\tconst { body, query } = ctx;\n\tconst callbackURL = body?.callbackURL || query?.callbackURL;\n\tconst redirectURL = body?.redirectTo;\n\tconst errorCallbackURL = body?.errorCallbackURL;\n\tconst newUserCallbackURL = body?.newUserCallbackURL;\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tcallbackURL && validateURL(callbackURL, \"callbackURL\");\n\tredirectURL && validateURL(redirectURL, \"redirectURL\");\n\terrorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n\tnewUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tif (ctx.context.skipOriginCheck) return;\n\tconst callbackURL = getValue(ctx);\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tconst callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n\tfor (const url of callbacks) validateURL(url, \"callbackURL\");\n});\n/**\n* Validates origin header against trusted origins.\n* @param ctx - The endpoint context\n* @param forceValidate - If true, always validate origin regardless of cookies/skip flags\n*/\nasync function validateOrigin(ctx, forceValidate = false) {\n\tconst headers = ctx.request?.headers;\n\tif (!headers || !ctx.request) return;\n\tconst originHeader = headers.get(\"origin\") || headers.get(\"referer\") || \"\";\n\tconst useCookies = headers.has(\"cookie\");\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) {\n\t\tctx.context.options.advanced?.disableOriginCheck === true && logBackwardCompatWarning();\n\t\treturn;\n\t}\n\tconst skipOriginCheck = ctx.context.skipOriginCheck;\n\tif (Array.isArray(skipOriginCheck)) try {\n\t\tconst basePath = new URL(ctx.context.baseURL).pathname;\n\t\tconst currentPath = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.normalizePathname)(ctx.request.url, basePath);\n\t\tif (skipOriginCheck.some((skipPath) => currentPath.startsWith(skipPath))) return;\n\t} catch {}\n\tif (!(forceValidate || useCookies)) return;\n\tif (!originHeader || originHeader === \"null\") throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.MISSING_OR_NULL_ORIGIN });\n\tconst trustedOrigins = Array.isArray(ctx.context.options.trustedOrigins) ? ctx.context.trustedOrigins : [...ctx.context.trustedOrigins, ...(await ctx.context.options.trustedOrigins?.(ctx.request))?.filter((v) => Boolean(v)) || []];\n\tif (!trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__.matchesOriginPattern)(originHeader, origin))) {\n\t\tctx.context.logger.error(`Invalid origin: ${originHeader}`);\n\t\tctx.context.logger.info(`If it's a valid URL, please add ${originHeader} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${trustedOrigins}`);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: \"Invalid origin\" });\n\t}\n}\n/**\n* Middleware for CSRF protection using Fetch Metadata headers.\n* This prevents cross-site navigation login attacks while supporting progressive enhancement.\n*/\nconst formCsrfMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tawait validateFormCsrf(ctx);\n});\n/**\n* Validates CSRF protection for first-login scenarios using Fetch Metadata headers.\n* This prevents cross-site form submission attacks while supporting progressive enhancement.\n*/\nasync function validateFormCsrf(ctx) {\n\tconst req = ctx.request;\n\tif (!req) return;\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) return;\n\tconst headers = req.headers;\n\tif (headers.has(\"cookie\")) return await validateOrigin(ctx);\n\tconst site = headers.get(\"Sec-Fetch-Site\");\n\tconst mode = headers.get(\"Sec-Fetch-Mode\");\n\tconst dest = headers.get(\"Sec-Fetch-Dest\");\n\tif (Boolean(site && site.trim() || mode && mode.trim() || dest && dest.trim())) {\n\t\tif (site === \"cross-site\" && mode === \"navigate\") {\n\t\t\tctx.context.logger.error(\"Blocked cross-site navigation login attempt (CSRF protection)\", {\n\t\t\t\tsecFetchSite: site,\n\t\t\t\tsecFetchMode: mode,\n\t\t\t\tsecFetchDest: dest\n\t\t\t});\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED });\n\t\t}\n\t\treturn await validateOrigin(ctx, true);\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=origin-check.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0U7QUFDWDtBQUNZO0FBQ2hDO0FBQ3NCOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGtFQUFTLHlDQUF5QztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwyRUFBb0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsU0FBUyxjQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx3Q0FBd0M7QUFDbEYsdUNBQXVDLE1BQU0sSUFBSSxJQUFJO0FBQ3JELDhEQUE4RCxLQUFLLDZFQUE2RSwyQkFBMkI7QUFDM0ssYUFBYSxpREFBUSxnQkFBZ0Isb0JBQW9CLE1BQU0sR0FBRztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0NBQWtDLDJFQUFvQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdDQUF3QztBQUNsRix1Q0FBdUMsTUFBTSxJQUFJLElBQUk7QUFDckQsOERBQThELEtBQUssNkVBQTZFLDJCQUEyQjtBQUMzSyxhQUFhLGlEQUFRLGdCQUFnQixvQkFBb0IsTUFBTSxHQUFHO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwRUFBaUI7QUFDdkM7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5REFBeUQsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHlCQUF5QjtBQUNuSTtBQUNBLHNDQUFzQywrRUFBb0I7QUFDMUQsOENBQThDLGFBQWE7QUFDM0QsNkRBQTZELGNBQWMsNkVBQTZFLGVBQWU7QUFDdkssWUFBWSxpREFBUSxnQkFBZ0IsMkJBQTJCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwyRUFBb0I7QUFDL0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHNDQUFzQztBQUNwRztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrRTtBQUNsRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXG1pZGRsZXdhcmVzXFxvcmlnaW4tY2hlY2subWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdGNoZXNPcmlnaW5QYXR0ZXJuIH0gZnJvbSBcIi4uLy4uL2F1dGgvdHJ1c3RlZC1vcmlnaW5zLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgZGVwcmVjYXRlLCBub3JtYWxpemVQYXRobmFtZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2sudHNcbi8qKlxuKiBDaGVja3MgaWYgQ1NSRiBzaG91bGQgYmUgc2tpcHBlZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbiogUHJldmlvdXNseSwgZGlzYWJsZU9yaWdpbkNoZWNrIGFsc28gZGlzYWJsZWQgQ1NSRiBjaGVja3MuXG4qIFRoaXMgbWFpbnRhaW5zIHRoYXQgYmVoYXZpb3Igd2hlbiBkaXNhYmxlQ1NSRkNoZWNrIGlzbid0IGV4cGxpY2l0bHkgc2V0LlxuKiBPbmx5IHRyaWdnZXJzIGZvciBza2lwT3JpZ2luQ2hlY2sgPT09IHRydWUsIG5vdCBmb3IgcGF0aCBhcnJheXMuXG4qL1xuZnVuY3Rpb24gc2hvdWxkU2tpcENTUkZGb3JCYWNrd2FyZENvbXBhdChjdHgpIHtcblx0cmV0dXJuIGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjayA9PT0gdHJ1ZSAmJiBjdHguY29udGV4dC5vcHRpb25zLmFkdmFuY2VkPy5kaXNhYmxlQ1NSRkNoZWNrID09PSB2b2lkIDA7XG59XG4vKipcbiogTG9ncyBkZXByZWNhdGlvbiB3YXJuaW5nIGZvciB1c2VycyByZWx5aW5nIG9uIGNvdXBsZWQgYmVoYXZpb3IuXG4qIE9ubHkgbG9ncyBpZiB1c2VyIGV4cGxpY2l0bHkgc2V0IGRpc2FibGVPcmlnaW5DaGVjayAobm90IHRlc3QgZW52aXJvbm1lbnQgZGVmYXVsdCkuXG4qL1xuY29uc3QgbG9nQmFja3dhcmRDb21wYXRXYXJuaW5nID0gZGVwcmVjYXRlKGZ1bmN0aW9uIGxvZ0JhY2t3YXJkQ29tcGF0V2FybmluZyQxKCkge30sIFwiZGlzYWJsZU9yaWdpbkNoZWNrOiB0cnVlIGN1cnJlbnRseSBhbHNvIGRpc2FibGVzIENTUkYgY2hlY2tzLiBJbiBhIGZ1dHVyZSB2ZXJzaW9uLCBkaXNhYmxlT3JpZ2luQ2hlY2sgd2lsbCBPTkxZIGRpc2FibGUgVVJMIHZhbGlkYXRpb24uIFRvIGtlZXAgQ1NSRiBkaXNhYmxlZCwgYWRkIGRpc2FibGVDU1JGQ2hlY2s6IHRydWUgdG8geW91ciBjb25maWcuXCIpO1xuLyoqXG4qIEEgbWlkZGxld2FyZSB0byB2YWxpZGF0ZSBjYWxsYmFja1VSTCBhbmQgb3JpZ2luIGFnYWluc3QgdHJ1c3RlZE9yaWdpbnMuXG4qIEFsc28gaGFuZGxlcyBDU1JGIHByb3RlY3Rpb24gdXNpbmcgRmV0Y2ggTWV0YWRhdGEgZm9yIGZpcnN0LWxvZ2luIHNjZW5hcmlvcy5cbiovXG5jb25zdCBvcmlnaW5DaGVja01pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGlmIChjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIkdFVFwiIHx8IGN0eC5yZXF1ZXN0Py5tZXRob2QgPT09IFwiT1BUSU9OU1wiIHx8IGN0eC5yZXF1ZXN0Py5tZXRob2QgPT09IFwiSEVBRFwiIHx8ICFjdHgucmVxdWVzdCkgcmV0dXJuO1xuXHRhd2FpdCB2YWxpZGF0ZU9yaWdpbihjdHgpO1xuXHRpZiAoY3R4LmNvbnRleHQuc2tpcE9yaWdpbkNoZWNrKSByZXR1cm47XG5cdGNvbnN0IHsgYm9keSwgcXVlcnkgfSA9IGN0eDtcblx0Y29uc3QgY2FsbGJhY2tVUkwgPSBib2R5Py5jYWxsYmFja1VSTCB8fCBxdWVyeT8uY2FsbGJhY2tVUkw7XG5cdGNvbnN0IHJlZGlyZWN0VVJMID0gYm9keT8ucmVkaXJlY3RUbztcblx0Y29uc3QgZXJyb3JDYWxsYmFja1VSTCA9IGJvZHk/LmVycm9yQ2FsbGJhY2tVUkw7XG5cdGNvbnN0IG5ld1VzZXJDYWxsYmFja1VSTCA9IGJvZHk/Lm5ld1VzZXJDYWxsYmFja1VSTDtcblx0Y29uc3QgdmFsaWRhdGVVUkwgPSAodXJsLCBsYWJlbCkgPT4ge1xuXHRcdGlmICghdXJsKSByZXR1cm47XG5cdFx0aWYgKCFjdHguY29udGV4dC5pc1RydXN0ZWRPcmlnaW4odXJsLCB7IGFsbG93UmVsYXRpdmVQYXRoczogbGFiZWwgIT09IFwib3JpZ2luXCIgfSkpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgSW52YWxpZCAke2xhYmVsfTogJHt1cmx9YCk7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuaW5mbyhgSWYgaXQncyBhIHZhbGlkIFVSTCwgcGxlYXNlIGFkZCAke3VybH0gdG8gdHJ1c3RlZE9yaWdpbnMgaW4geW91ciBhdXRoIGNvbmZpZ1xcbmAsIGBDdXJyZW50IGxpc3Qgb2YgdHJ1c3RlZE9yaWdpbnM6ICR7Y3R4LmNvbnRleHQudHJ1c3RlZE9yaWdpbnN9YCk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBgSW52YWxpZCAke2xhYmVsfWAgfSk7XG5cdFx0fVxuXHR9O1xuXHRjYWxsYmFja1VSTCAmJiB2YWxpZGF0ZVVSTChjYWxsYmFja1VSTCwgXCJjYWxsYmFja1VSTFwiKTtcblx0cmVkaXJlY3RVUkwgJiYgdmFsaWRhdGVVUkwocmVkaXJlY3RVUkwsIFwicmVkaXJlY3RVUkxcIik7XG5cdGVycm9yQ2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwoZXJyb3JDYWxsYmFja1VSTCwgXCJlcnJvckNhbGxiYWNrVVJMXCIpO1xuXHRuZXdVc2VyQ2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwobmV3VXNlckNhbGxiYWNrVVJMLCBcIm5ld1VzZXJDYWxsYmFja1VSTFwiKTtcbn0pO1xuY29uc3Qgb3JpZ2luQ2hlY2sgPSAoZ2V0VmFsdWUpID0+IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHgucmVxdWVzdCkgcmV0dXJuO1xuXHRpZiAoY3R4LmNvbnRleHQuc2tpcE9yaWdpbkNoZWNrKSByZXR1cm47XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gZ2V0VmFsdWUoY3R4KTtcblx0Y29uc3QgdmFsaWRhdGVVUkwgPSAodXJsLCBsYWJlbCkgPT4ge1xuXHRcdGlmICghdXJsKSByZXR1cm47XG5cdFx0aWYgKCFjdHguY29udGV4dC5pc1RydXN0ZWRPcmlnaW4odXJsLCB7IGFsbG93UmVsYXRpdmVQYXRoczogbGFiZWwgIT09IFwib3JpZ2luXCIgfSkpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgSW52YWxpZCAke2xhYmVsfTogJHt1cmx9YCk7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuaW5mbyhgSWYgaXQncyBhIHZhbGlkIFVSTCwgcGxlYXNlIGFkZCAke3VybH0gdG8gdHJ1c3RlZE9yaWdpbnMgaW4geW91ciBhdXRoIGNvbmZpZ1xcbmAsIGBDdXJyZW50IGxpc3Qgb2YgdHJ1c3RlZE9yaWdpbnM6ICR7Y3R4LmNvbnRleHQudHJ1c3RlZE9yaWdpbnN9YCk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBgSW52YWxpZCAke2xhYmVsfWAgfSk7XG5cdFx0fVxuXHR9O1xuXHRjb25zdCBjYWxsYmFja3MgPSBBcnJheS5pc0FycmF5KGNhbGxiYWNrVVJMKSA/IGNhbGxiYWNrVVJMIDogW2NhbGxiYWNrVVJMXTtcblx0Zm9yIChjb25zdCB1cmwgb2YgY2FsbGJhY2tzKSB2YWxpZGF0ZVVSTCh1cmwsIFwiY2FsbGJhY2tVUkxcIik7XG59KTtcbi8qKlxuKiBWYWxpZGF0ZXMgb3JpZ2luIGhlYWRlciBhZ2FpbnN0IHRydXN0ZWQgb3JpZ2lucy5cbiogQHBhcmFtIGN0eCAtIFRoZSBlbmRwb2ludCBjb250ZXh0XG4qIEBwYXJhbSBmb3JjZVZhbGlkYXRlIC0gSWYgdHJ1ZSwgYWx3YXlzIHZhbGlkYXRlIG9yaWdpbiByZWdhcmRsZXNzIG9mIGNvb2tpZXMvc2tpcCBmbGFnc1xuKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlT3JpZ2luKGN0eCwgZm9yY2VWYWxpZGF0ZSA9IGZhbHNlKSB7XG5cdGNvbnN0IGhlYWRlcnMgPSBjdHgucmVxdWVzdD8uaGVhZGVycztcblx0aWYgKCFoZWFkZXJzIHx8ICFjdHgucmVxdWVzdCkgcmV0dXJuO1xuXHRjb25zdCBvcmlnaW5IZWFkZXIgPSBoZWFkZXJzLmdldChcIm9yaWdpblwiKSB8fCBoZWFkZXJzLmdldChcInJlZmVyZXJcIikgfHwgXCJcIjtcblx0Y29uc3QgdXNlQ29va2llcyA9IGhlYWRlcnMuaGFzKFwiY29va2llXCIpO1xuXHRpZiAoY3R4LmNvbnRleHQuc2tpcENTUkZDaGVjaykgcmV0dXJuO1xuXHRpZiAoc2hvdWxkU2tpcENTUkZGb3JCYWNrd2FyZENvbXBhdChjdHgpKSB7XG5cdFx0Y3R4LmNvbnRleHQub3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZU9yaWdpbkNoZWNrID09PSB0cnVlICYmIGxvZ0JhY2t3YXJkQ29tcGF0V2FybmluZygpO1xuXHRcdHJldHVybjtcblx0fVxuXHRjb25zdCBza2lwT3JpZ2luQ2hlY2sgPSBjdHguY29udGV4dC5za2lwT3JpZ2luQ2hlY2s7XG5cdGlmIChBcnJheS5pc0FycmF5KHNraXBPcmlnaW5DaGVjaykpIHRyeSB7XG5cdFx0Y29uc3QgYmFzZVBhdGggPSBuZXcgVVJMKGN0eC5jb250ZXh0LmJhc2VVUkwpLnBhdGhuYW1lO1xuXHRcdGNvbnN0IGN1cnJlbnRQYXRoID0gbm9ybWFsaXplUGF0aG5hbWUoY3R4LnJlcXVlc3QudXJsLCBiYXNlUGF0aCk7XG5cdFx0aWYgKHNraXBPcmlnaW5DaGVjay5zb21lKChza2lwUGF0aCkgPT4gY3VycmVudFBhdGguc3RhcnRzV2l0aChza2lwUGF0aCkpKSByZXR1cm47XG5cdH0gY2F0Y2gge31cblx0aWYgKCEoZm9yY2VWYWxpZGF0ZSB8fCB1c2VDb29raWVzKSkgcmV0dXJuO1xuXHRpZiAoIW9yaWdpbkhlYWRlciB8fCBvcmlnaW5IZWFkZXIgPT09IFwibnVsbFwiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLk1JU1NJTkdfT1JfTlVMTF9PUklHSU4gfSk7XG5cdGNvbnN0IHRydXN0ZWRPcmlnaW5zID0gQXJyYXkuaXNBcnJheShjdHguY29udGV4dC5vcHRpb25zLnRydXN0ZWRPcmlnaW5zKSA/IGN0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zIDogWy4uLmN0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zLCAuLi4oYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy50cnVzdGVkT3JpZ2lucz8uKGN0eC5yZXF1ZXN0KSk/LmZpbHRlcigodikgPT4gQm9vbGVhbih2KSkgfHwgW11dO1xuXHRpZiAoIXRydXN0ZWRPcmlnaW5zLnNvbWUoKG9yaWdpbikgPT4gbWF0Y2hlc09yaWdpblBhdHRlcm4ob3JpZ2luSGVhZGVyLCBvcmlnaW4pKSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgSW52YWxpZCBvcmlnaW46ICR7b3JpZ2luSGVhZGVyfWApO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKGBJZiBpdCdzIGEgdmFsaWQgVVJMLCBwbGVhc2UgYWRkICR7b3JpZ2luSGVhZGVyfSB0byB0cnVzdGVkT3JpZ2lucyBpbiB5b3VyIGF1dGggY29uZmlnXFxuYCwgYEN1cnJlbnQgbGlzdCBvZiB0cnVzdGVkT3JpZ2luczogJHt0cnVzdGVkT3JpZ2luc31gKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBcIkludmFsaWQgb3JpZ2luXCIgfSk7XG5cdH1cbn1cbi8qKlxuKiBNaWRkbGV3YXJlIGZvciBDU1JGIHByb3RlY3Rpb24gdXNpbmcgRmV0Y2ggTWV0YWRhdGEgaGVhZGVycy5cbiogVGhpcyBwcmV2ZW50cyBjcm9zcy1zaXRlIG5hdmlnYXRpb24gbG9naW4gYXR0YWNrcyB3aGlsZSBzdXBwb3J0aW5nIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50LlxuKi9cbmNvbnN0IGZvcm1Dc3JmTWlkZGxld2FyZSA9IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHgucmVxdWVzdCkgcmV0dXJuO1xuXHRhd2FpdCB2YWxpZGF0ZUZvcm1Dc3JmKGN0eCk7XG59KTtcbi8qKlxuKiBWYWxpZGF0ZXMgQ1NSRiBwcm90ZWN0aW9uIGZvciBmaXJzdC1sb2dpbiBzY2VuYXJpb3MgdXNpbmcgRmV0Y2ggTWV0YWRhdGEgaGVhZGVycy5cbiogVGhpcyBwcmV2ZW50cyBjcm9zcy1zaXRlIGZvcm0gc3VibWlzc2lvbiBhdHRhY2tzIHdoaWxlIHN1cHBvcnRpbmcgcHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQuXG4qL1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVGb3JtQ3NyZihjdHgpIHtcblx0Y29uc3QgcmVxID0gY3R4LnJlcXVlc3Q7XG5cdGlmICghcmVxKSByZXR1cm47XG5cdGlmIChjdHguY29udGV4dC5za2lwQ1NSRkNoZWNrKSByZXR1cm47XG5cdGlmIChzaG91bGRTa2lwQ1NSRkZvckJhY2t3YXJkQ29tcGF0KGN0eCkpIHJldHVybjtcblx0Y29uc3QgaGVhZGVycyA9IHJlcS5oZWFkZXJzO1xuXHRpZiAoaGVhZGVycy5oYXMoXCJjb29raWVcIikpIHJldHVybiBhd2FpdCB2YWxpZGF0ZU9yaWdpbihjdHgpO1xuXHRjb25zdCBzaXRlID0gaGVhZGVycy5nZXQoXCJTZWMtRmV0Y2gtU2l0ZVwiKTtcblx0Y29uc3QgbW9kZSA9IGhlYWRlcnMuZ2V0KFwiU2VjLUZldGNoLU1vZGVcIik7XG5cdGNvbnN0IGRlc3QgPSBoZWFkZXJzLmdldChcIlNlYy1GZXRjaC1EZXN0XCIpO1xuXHRpZiAoQm9vbGVhbihzaXRlICYmIHNpdGUudHJpbSgpIHx8IG1vZGUgJiYgbW9kZS50cmltKCkgfHwgZGVzdCAmJiBkZXN0LnRyaW0oKSkpIHtcblx0XHRpZiAoc2l0ZSA9PT0gXCJjcm9zcy1zaXRlXCIgJiYgbW9kZSA9PT0gXCJuYXZpZ2F0ZVwiKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJCbG9ja2VkIGNyb3NzLXNpdGUgbmF2aWdhdGlvbiBsb2dpbiBhdHRlbXB0IChDU1JGIHByb3RlY3Rpb24pXCIsIHtcblx0XHRcdFx0c2VjRmV0Y2hTaXRlOiBzaXRlLFxuXHRcdFx0XHRzZWNGZXRjaE1vZGU6IG1vZGUsXG5cdFx0XHRcdHNlY0ZldGNoRGVzdDogZGVzdFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNST1NTX1NJVEVfTkFWSUdBVElPTl9MT0dJTl9CTE9DS0VEIH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gYXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4LCB0cnVlKTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSwgb3JpZ2luQ2hlY2ssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3JpZ2luLWNoZWNrLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onRequestRateLimit: () => (/* binding */ onRequestRateLimit)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/get-request-ip.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/wildcard.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//#region src/api/rate-limiter/index.ts\nconst memory = /* @__PURE__ */ new Map();\nfunction shouldRateLimit(max, window, rateLimitData) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn now - rateLimitData.lastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n\treturn new Response(JSON.stringify({ message: \"Too many requests. Please try again later.\" }), {\n\t\tstatus: 429,\n\t\tstatusText: \"Too Many Requests\",\n\t\theaders: { \"X-Retry-After\": retryAfter.toString() }\n\t});\n}\nfunction getRetryAfter(lastRequest, window) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDatabaseStorageWrapper(ctx) {\n\tconst model = \"rateLimit\";\n\tconst db = ctx.adapter;\n\treturn {\n\t\tget: async (key) => {\n\t\t\tconst data = (await db.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"key\",\n\t\t\t\t\tvalue: key\n\t\t\t\t}]\n\t\t\t}))[0];\n\t\t\tif (typeof data?.lastRequest === \"bigint\") data.lastRequest = Number(data.lastRequest);\n\t\t\treturn data;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\ttry {\n\t\t\t\tif (_update) await db.updateMany({\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"key\",\n\t\t\t\t\t\tvalue: key\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\telse await db.create({\n\t\t\t\t\tmodel,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tctx.logger.error(\"Error setting rate limit\", e);\n\t\t\t}\n\t\t}\n\t};\n}\nfunction getRateLimitStorage(ctx, rateLimitSettings) {\n\tif (ctx.options.rateLimit?.customStorage) return ctx.options.rateLimit.customStorage;\n\tconst storage = ctx.rateLimit.storage;\n\tif (storage === \"secondary-storage\") return {\n\t\tget: async (key) => {\n\t\t\tconst data = await ctx.options.secondaryStorage?.get(key);\n\t\t\treturn data ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(data) : null;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tawait ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value), ttl);\n\t\t}\n\t};\n\telse if (storage === \"memory\") return {\n\t\tasync get(key) {\n\t\t\tconst entry = memory.get(key);\n\t\t\tif (!entry) return null;\n\t\t\tif (Date.now() >= entry.expiresAt) {\n\t\t\t\tmemory.delete(key);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn entry.data;\n\t\t},\n\t\tasync set(key, value, _update) {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tconst expiresAt = Date.now() + ttl * 1e3;\n\t\t\tmemory.set(key, {\n\t\t\t\tdata: value,\n\t\t\t\texpiresAt\n\t\t\t});\n\t\t}\n\t};\n\treturn createDatabaseStorageWrapper(ctx);\n}\nasync function onRequestRateLimit(req, ctx) {\n\tif (!ctx.rateLimit.enabled) return;\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\tconst path = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.normalizePathname)(req.url, basePath);\n\tlet currentWindow = ctx.rateLimit.window;\n\tlet currentMax = ctx.rateLimit.max;\n\tconst ip = (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp)(req, ctx.options);\n\tif (!ip) return;\n\tconst key = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.createRateLimitKey)(ip, path);\n\tconst specialRule = getDefaultSpecialRules().find((rule) => rule.pathMatcher(path));\n\tif (specialRule) {\n\t\tcurrentWindow = specialRule.window;\n\t\tcurrentMax = specialRule.max;\n\t}\n\tfor (const plugin of ctx.options.plugins || []) if (plugin.rateLimit) {\n\t\tconst matchedRule = plugin.rateLimit.find((rule) => rule.pathMatcher(path));\n\t\tif (matchedRule) {\n\t\t\tcurrentWindow = matchedRule.window;\n\t\t\tcurrentMax = matchedRule.max;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (ctx.rateLimit.customRules) {\n\t\tconst _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n\t\t\tif (p.includes(\"*\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(p)(path);\n\t\t\treturn p === path;\n\t\t});\n\t\tif (_path) {\n\t\t\tconst customRule = ctx.rateLimit.customRules[_path];\n\t\t\tconst resolved = typeof customRule === \"function\" ? await customRule(req, {\n\t\t\t\twindow: currentWindow,\n\t\t\t\tmax: currentMax\n\t\t\t}) : customRule;\n\t\t\tif (resolved) {\n\t\t\t\tcurrentWindow = resolved.window;\n\t\t\t\tcurrentMax = resolved.max;\n\t\t\t}\n\t\t\tif (resolved === false) return;\n\t\t}\n\t}\n\tconst storage = getRateLimitStorage(ctx, { window: currentWindow });\n\tconst data = await storage.get(key);\n\tconst now = Date.now();\n\tif (!data) await storage.set(key, {\n\t\tkey,\n\t\tcount: 1,\n\t\tlastRequest: now\n\t});\n\telse {\n\t\tconst timeSinceLastRequest = now - data.lastRequest;\n\t\tif (shouldRateLimit(currentMax, currentWindow, data)) return rateLimitResponse(getRetryAfter(data.lastRequest, currentWindow));\n\t\telse if (timeSinceLastRequest > currentWindow * 1e3) await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t\telse await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: data.count + 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t}\n}\nfunction getDefaultSpecialRules() {\n\treturn [{\n\t\tpathMatcher(path) {\n\t\t\treturn path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n\t\t},\n\t\twindow: 10,\n\t\tmax: 3\n\t}];\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JhdGUtbGltaXRlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RDtBQUNFO0FBQ3NDOztBQUUvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHVEQUF1RDtBQUM3RjtBQUNBO0FBQ0EsYUFBYTtBQUNiLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzRUFBYTtBQUM5QixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDBFQUFpQjtBQUMvQjtBQUNBO0FBQ0EsWUFBWSxnRUFBSztBQUNqQjtBQUNBLGFBQWEsMkVBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixrRUFBYTtBQUM1QztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHVCQUF1QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyYXRlLWxpbWl0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi8uLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IHdpbGRjYXJkTWF0Y2ggfSBmcm9tIFwiLi4vLi4vdXRpbHMvd2lsZGNhcmQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVSYXRlTGltaXRLZXksIG5vcm1hbGl6ZVBhdGhuYW1lLCBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JhdGUtbGltaXRlci9pbmRleC50c1xuY29uc3QgbWVtb3J5ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIHNob3VsZFJhdGVMaW1pdChtYXgsIHdpbmRvdywgcmF0ZUxpbWl0RGF0YSkge1xuXHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRjb25zdCB3aW5kb3dJbk1zID0gd2luZG93ICogMWUzO1xuXHRyZXR1cm4gbm93IC0gcmF0ZUxpbWl0RGF0YS5sYXN0UmVxdWVzdCA8IHdpbmRvd0luTXMgJiYgcmF0ZUxpbWl0RGF0YS5jb3VudCA+PSBtYXg7XG59XG5mdW5jdGlvbiByYXRlTGltaXRSZXNwb25zZShyZXRyeUFmdGVyKSB7XG5cdHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiBcIlRvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiIH0pLCB7XG5cdFx0c3RhdHVzOiA0MjksXG5cdFx0c3RhdHVzVGV4dDogXCJUb28gTWFueSBSZXF1ZXN0c1wiLFxuXHRcdGhlYWRlcnM6IHsgXCJYLVJldHJ5LUFmdGVyXCI6IHJldHJ5QWZ0ZXIudG9TdHJpbmcoKSB9XG5cdH0pO1xufVxuZnVuY3Rpb24gZ2V0UmV0cnlBZnRlcihsYXN0UmVxdWVzdCwgd2luZG93KSB7XG5cdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdGNvbnN0IHdpbmRvd0luTXMgPSB3aW5kb3cgKiAxZTM7XG5cdHJldHVybiBNYXRoLmNlaWwoKGxhc3RSZXF1ZXN0ICsgd2luZG93SW5NcyAtIG5vdykgLyAxZTMpO1xufVxuZnVuY3Rpb24gY3JlYXRlRGF0YWJhc2VTdG9yYWdlV3JhcHBlcihjdHgpIHtcblx0Y29uc3QgbW9kZWwgPSBcInJhdGVMaW1pdFwiO1xuXHRjb25zdCBkYiA9IGN0eC5hZGFwdGVyO1xuXHRyZXR1cm4ge1xuXHRcdGdldDogYXN5bmMgKGtleSkgPT4ge1xuXHRcdFx0Y29uc3QgZGF0YSA9IChhd2FpdCBkYi5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJrZXlcIixcblx0XHRcdFx0XHR2YWx1ZToga2V5XG5cdFx0XHRcdH1dXG5cdFx0XHR9KSlbMF07XG5cdFx0XHRpZiAodHlwZW9mIGRhdGE/Lmxhc3RSZXF1ZXN0ID09PSBcImJpZ2ludFwiKSBkYXRhLmxhc3RSZXF1ZXN0ID0gTnVtYmVyKGRhdGEubGFzdFJlcXVlc3QpO1xuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fSxcblx0XHRzZXQ6IGFzeW5jIChrZXksIHZhbHVlLCBfdXBkYXRlKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAoX3VwZGF0ZSkgYXdhaXQgZGIudXBkYXRlTWFueSh7XG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJrZXlcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBrZXlcblx0XHRcdFx0XHR9XSxcblx0XHRcdFx0XHR1cGRhdGU6IHtcblx0XHRcdFx0XHRcdGNvdW50OiB2YWx1ZS5jb3VudCxcblx0XHRcdFx0XHRcdGxhc3RSZXF1ZXN0OiB2YWx1ZS5sYXN0UmVxdWVzdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGVsc2UgYXdhaXQgZGIuY3JlYXRlKHtcblx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRrZXksXG5cdFx0XHRcdFx0XHRjb3VudDogdmFsdWUuY291bnQsXG5cdFx0XHRcdFx0XHRsYXN0UmVxdWVzdDogdmFsdWUubGFzdFJlcXVlc3Rcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjdHgubG9nZ2VyLmVycm9yKFwiRXJyb3Igc2V0dGluZyByYXRlIGxpbWl0XCIsIGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cbmZ1bmN0aW9uIGdldFJhdGVMaW1pdFN0b3JhZ2UoY3R4LCByYXRlTGltaXRTZXR0aW5ncykge1xuXHRpZiAoY3R4Lm9wdGlvbnMucmF0ZUxpbWl0Py5jdXN0b21TdG9yYWdlKSByZXR1cm4gY3R4Lm9wdGlvbnMucmF0ZUxpbWl0LmN1c3RvbVN0b3JhZ2U7XG5cdGNvbnN0IHN0b3JhZ2UgPSBjdHgucmF0ZUxpbWl0LnN0b3JhZ2U7XG5cdGlmIChzdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIpIHJldHVybiB7XG5cdFx0Z2V0OiBhc3luYyAoa2V5KSA9PiB7XG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgY3R4Lm9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZT8uZ2V0KGtleSk7XG5cdFx0XHRyZXR1cm4gZGF0YSA/IHNhZmVKU09OUGFyc2UoZGF0YSkgOiBudWxsO1xuXHRcdH0sXG5cdFx0c2V0OiBhc3luYyAoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkgPT4ge1xuXHRcdFx0Y29uc3QgdHRsID0gcmF0ZUxpbWl0U2V0dGluZ3M/LndpbmRvdyA/PyBjdHgub3B0aW9ucy5yYXRlTGltaXQ/LndpbmRvdyA/PyAxMDtcblx0XHRcdGF3YWl0IGN0eC5vcHRpb25zLnNlY29uZGFyeVN0b3JhZ2U/LnNldD8uKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpLCB0dGwpO1xuXHRcdH1cblx0fTtcblx0ZWxzZSBpZiAoc3RvcmFnZSA9PT0gXCJtZW1vcnlcIikgcmV0dXJuIHtcblx0XHRhc3luYyBnZXQoa2V5KSB7XG5cdFx0XHRjb25zdCBlbnRyeSA9IG1lbW9yeS5nZXQoa2V5KTtcblx0XHRcdGlmICghZW50cnkpIHJldHVybiBudWxsO1xuXHRcdFx0aWYgKERhdGUubm93KCkgPj0gZW50cnkuZXhwaXJlc0F0KSB7XG5cdFx0XHRcdG1lbW9yeS5kZWxldGUoa2V5KTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZW50cnkuZGF0YTtcblx0XHR9LFxuXHRcdGFzeW5jIHNldChrZXksIHZhbHVlLCBfdXBkYXRlKSB7XG5cdFx0XHRjb25zdCB0dGwgPSByYXRlTGltaXRTZXR0aW5ncz8ud2luZG93ID8/IGN0eC5vcHRpb25zLnJhdGVMaW1pdD8ud2luZG93ID8/IDEwO1xuXHRcdFx0Y29uc3QgZXhwaXJlc0F0ID0gRGF0ZS5ub3coKSArIHR0bCAqIDFlMztcblx0XHRcdG1lbW9yeS5zZXQoa2V5LCB7XG5cdFx0XHRcdGRhdGE6IHZhbHVlLFxuXHRcdFx0XHRleHBpcmVzQXRcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblx0cmV0dXJuIGNyZWF0ZURhdGFiYXNlU3RvcmFnZVdyYXBwZXIoY3R4KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG9uUmVxdWVzdFJhdGVMaW1pdChyZXEsIGN0eCkge1xuXHRpZiAoIWN0eC5yYXRlTGltaXQuZW5hYmxlZCkgcmV0dXJuO1xuXHRjb25zdCBiYXNlUGF0aCA9IG5ldyBVUkwoY3R4LmJhc2VVUkwpLnBhdGhuYW1lO1xuXHRjb25zdCBwYXRoID0gbm9ybWFsaXplUGF0aG5hbWUocmVxLnVybCwgYmFzZVBhdGgpO1xuXHRsZXQgY3VycmVudFdpbmRvdyA9IGN0eC5yYXRlTGltaXQud2luZG93O1xuXHRsZXQgY3VycmVudE1heCA9IGN0eC5yYXRlTGltaXQubWF4O1xuXHRjb25zdCBpcCA9IGdldElwKHJlcSwgY3R4Lm9wdGlvbnMpO1xuXHRpZiAoIWlwKSByZXR1cm47XG5cdGNvbnN0IGtleSA9IGNyZWF0ZVJhdGVMaW1pdEtleShpcCwgcGF0aCk7XG5cdGNvbnN0IHNwZWNpYWxSdWxlID0gZ2V0RGVmYXVsdFNwZWNpYWxSdWxlcygpLmZpbmQoKHJ1bGUpID0+IHJ1bGUucGF0aE1hdGNoZXIocGF0aCkpO1xuXHRpZiAoc3BlY2lhbFJ1bGUpIHtcblx0XHRjdXJyZW50V2luZG93ID0gc3BlY2lhbFJ1bGUud2luZG93O1xuXHRcdGN1cnJlbnRNYXggPSBzcGVjaWFsUnVsZS5tYXg7XG5cdH1cblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgY3R4Lm9wdGlvbnMucGx1Z2lucyB8fCBbXSkgaWYgKHBsdWdpbi5yYXRlTGltaXQpIHtcblx0XHRjb25zdCBtYXRjaGVkUnVsZSA9IHBsdWdpbi5yYXRlTGltaXQuZmluZCgocnVsZSkgPT4gcnVsZS5wYXRoTWF0Y2hlcihwYXRoKSk7XG5cdFx0aWYgKG1hdGNoZWRSdWxlKSB7XG5cdFx0XHRjdXJyZW50V2luZG93ID0gbWF0Y2hlZFJ1bGUud2luZG93O1xuXHRcdFx0Y3VycmVudE1heCA9IG1hdGNoZWRSdWxlLm1heDtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHRpZiAoY3R4LnJhdGVMaW1pdC5jdXN0b21SdWxlcykge1xuXHRcdGNvbnN0IF9wYXRoID0gT2JqZWN0LmtleXMoY3R4LnJhdGVMaW1pdC5jdXN0b21SdWxlcykuZmluZCgocCkgPT4ge1xuXHRcdFx0aWYgKHAuaW5jbHVkZXMoXCIqXCIpKSByZXR1cm4gd2lsZGNhcmRNYXRjaChwKShwYXRoKTtcblx0XHRcdHJldHVybiBwID09PSBwYXRoO1xuXHRcdH0pO1xuXHRcdGlmIChfcGF0aCkge1xuXHRcdFx0Y29uc3QgY3VzdG9tUnVsZSA9IGN0eC5yYXRlTGltaXQuY3VzdG9tUnVsZXNbX3BhdGhdO1xuXHRcdFx0Y29uc3QgcmVzb2x2ZWQgPSB0eXBlb2YgY3VzdG9tUnVsZSA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgY3VzdG9tUnVsZShyZXEsIHtcblx0XHRcdFx0d2luZG93OiBjdXJyZW50V2luZG93LFxuXHRcdFx0XHRtYXg6IGN1cnJlbnRNYXhcblx0XHRcdH0pIDogY3VzdG9tUnVsZTtcblx0XHRcdGlmIChyZXNvbHZlZCkge1xuXHRcdFx0XHRjdXJyZW50V2luZG93ID0gcmVzb2x2ZWQud2luZG93O1xuXHRcdFx0XHRjdXJyZW50TWF4ID0gcmVzb2x2ZWQubWF4O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlc29sdmVkID09PSBmYWxzZSkgcmV0dXJuO1xuXHRcdH1cblx0fVxuXHRjb25zdCBzdG9yYWdlID0gZ2V0UmF0ZUxpbWl0U3RvcmFnZShjdHgsIHsgd2luZG93OiBjdXJyZW50V2luZG93IH0pO1xuXHRjb25zdCBkYXRhID0gYXdhaXQgc3RvcmFnZS5nZXQoa2V5KTtcblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0aWYgKCFkYXRhKSBhd2FpdCBzdG9yYWdlLnNldChrZXksIHtcblx0XHRrZXksXG5cdFx0Y291bnQ6IDEsXG5cdFx0bGFzdFJlcXVlc3Q6IG5vd1xuXHR9KTtcblx0ZWxzZSB7XG5cdFx0Y29uc3QgdGltZVNpbmNlTGFzdFJlcXVlc3QgPSBub3cgLSBkYXRhLmxhc3RSZXF1ZXN0O1xuXHRcdGlmIChzaG91bGRSYXRlTGltaXQoY3VycmVudE1heCwgY3VycmVudFdpbmRvdywgZGF0YSkpIHJldHVybiByYXRlTGltaXRSZXNwb25zZShnZXRSZXRyeUFmdGVyKGRhdGEubGFzdFJlcXVlc3QsIGN1cnJlbnRXaW5kb3cpKTtcblx0XHRlbHNlIGlmICh0aW1lU2luY2VMYXN0UmVxdWVzdCA+IGN1cnJlbnRXaW5kb3cgKiAxZTMpIGF3YWl0IHN0b3JhZ2Uuc2V0KGtleSwge1xuXHRcdFx0Li4uZGF0YSxcblx0XHRcdGNvdW50OiAxLFxuXHRcdFx0bGFzdFJlcXVlc3Q6IG5vd1xuXHRcdH0sIHRydWUpO1xuXHRcdGVsc2UgYXdhaXQgc3RvcmFnZS5zZXQoa2V5LCB7XG5cdFx0XHQuLi5kYXRhLFxuXHRcdFx0Y291bnQ6IGRhdGEuY291bnQgKyAxLFxuXHRcdFx0bGFzdFJlcXVlc3Q6IG5vd1xuXHRcdH0sIHRydWUpO1xuXHR9XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0U3BlY2lhbFJ1bGVzKCkge1xuXHRyZXR1cm4gW3tcblx0XHRwYXRoTWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRyZXR1cm4gcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24taW5cIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24tdXBcIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL2NoYW5nZS1wYXNzd29yZFwiKSB8fCBwYXRoLnN0YXJ0c1dpdGgoXCIvY2hhbmdlLWVtYWlsXCIpO1xuXHRcdH0sXG5cdFx0d2luZG93OiAxMCxcblx0XHRtYXg6IDNcblx0fV07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb25SZXF1ZXN0UmF0ZUxpbWl0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountInfo: () => (/* binding */ accountInfo),\n/* harmony export */   getAccessToken: () => (/* binding */ getAccessToken),\n/* harmony export */   linkSocialAccount: () => (/* binding */ linkSocialAccount),\n/* harmony export */   listUserAccounts: () => (/* binding */ listUserAccounts),\n/* harmony export */   refreshToken: () => (/* binding */ refreshToken),\n/* harmony export */   unlinkAccount: () => (/* binding */ unlinkAccount)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./session.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/account.ts\nconst listUserAccounts = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/list-accounts\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserAccounts\",\n\t\tdescription: \"List all accounts linked to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tproviderId: { type: \"string\" },\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\taccountId: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\tscopes: {\n\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\titems: { type: \"string\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"providerId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\",\n\t\t\t\t\t\t\"accountId\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"scopes\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst accounts = await c.context.internalAdapter.findAccounts(session.user.id);\n\treturn c.json(accounts.map((a) => {\n\t\tconst { scope, ...parsed } = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseAccountOutput)(c.context.options, a);\n\t\treturn {\n\t\t\t...parsed,\n\t\t\tscopes: scope?.split(\",\") || []\n\t\t};\n\t}));\n});\nconst linkSocialAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/link-social\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after the user has signed in\" }).optional(),\n\t\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__.SocialProviderListEnum,\n\t\tidToken: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).optional()\n\t\t}).optional(),\n\t\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional(),\n\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).meta({ description: \"Additional scopes to request from the provider\" }).optional(),\n\t\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to if there is an error during the link process\" }).optional(),\n\t\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\t\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.any()).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Link a social account to the user\",\n\t\toperationId: \"linkSocialAccount\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The authorization URL to redirect the user to\"\n\t\t\t\t\t},\n\t\t\t\t\tredirect: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the user should be redirected to the authorization URL\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: { type: \"boolean\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"redirect\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst linkingUserInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!linkingUserInfo || !linkingUserInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tconst linkingUserId = String(linkingUserInfo.user.id);\n\t\tif (!linkingUserInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tif ((await c.context.internalAdapter.findAccounts(session.user.id)).find((a) => a.providerId === provider.id && a.accountId === linkingUserId)) return c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - linking not allowed\" });\n\t\tif (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - different emails not allowed\" });\n\t\ttry {\n\t\t\tawait c.context.internalAdapter.createAccount({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: linkingUserId,\n\t\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\t\tidToken: token,\n\t\t\t\trefreshToken: c.body.idToken.refreshToken,\n\t\t\t\tscope: c.body.idToken.scopes?.join(\",\")\n\t\t\t});\n\t\t} catch {\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"EXPECTATION_FAILED\", { message: \"Account not linked - unable to create account\" });\n\t\t}\n\t\tif (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) try {\n\t\t\tawait c.context.internalAdapter.updateUser(session.user.id, {\n\t\t\t\tname: linkingUserInfo.user?.name,\n\t\t\t\timage: linkingUserInfo.user?.image\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Could not update user - \" + e.toString());\n\t\t}\n\t\treturn c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t}\n\tconst state = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__.generateState)(c, {\n\t\tuserId: session.user.id,\n\t\temail: session.user.email\n\t}, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate: state.state,\n\t\tcodeVerifier: state.codeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst unlinkAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/unlink-account\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.freshSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Unlink an account\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId } = ctx.body;\n\tconst accounts = await ctx.context.internalAdapter.findAccounts(ctx.context.session.user.id);\n\tif (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT });\n\tconst accountExist = accounts.find((account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId);\n\tif (!accountExist) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ACCOUNT_NOT_FOUND });\n\tawait ctx.context.internalAdapter.deleteAccount(accountExist.id);\n\treturn ctx.json({ status: true });\n});\nconst getAccessToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/get-access-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Get a valid access token, doing a refresh if needed\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"A Valid access token\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body || {};\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw ctx.error(\"UNAUTHORIZED\");\n\tif (!ctx.context.socialProviders.find((p) => p.id === providerId)) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} is not supported.` });\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tlet account = void 0;\n\tif (accountData && providerId === accountData.providerId && (!accountId || accountData.id === accountId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\ttry {\n\t\tlet newTokens = null;\n\t\tconst accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n\t\tif (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n\t\t\tconst refreshToken$1 = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.refreshToken, ctx.context);\n\t\t\tnewTokens = await provider.refreshAccessToken(refreshToken$1);\n\t\t\tconst updatedData = {\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.accessToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.refreshToken, ctx.context),\n\t\t\t\trefreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n\t\t\t};\n\t\t\tlet updatedAccount = null;\n\t\t\tif (account.id) updatedAccount = await ctx.context.internalAdapter.updateAccount(account.id, updatedData);\n\t\t\tif (ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t\t...account,\n\t\t\t\t...updatedAccount ?? updatedData\n\t\t\t});\n\t\t}\n\t\tconst accessTokenExpiresAt = (() => {\n\t\t\tif (newTokens?.accessTokenExpiresAt) {\n\t\t\t\tif (typeof newTokens.accessTokenExpiresAt === \"string\") return new Date(newTokens.accessTokenExpiresAt);\n\t\t\t\treturn newTokens.accessTokenExpiresAt;\n\t\t\t}\n\t\t\tif (account.accessTokenExpiresAt) {\n\t\t\t\tif (typeof account.accessTokenExpiresAt === \"string\") return new Date(account.accessTokenExpiresAt);\n\t\t\t\treturn account.accessTokenExpiresAt;\n\t\t\t}\n\t\t})();\n\t\tconst tokens = {\n\t\t\taccessToken: newTokens?.accessToken ?? await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.accessToken ?? \"\", ctx.context),\n\t\t\taccessTokenExpiresAt,\n\t\t\tscopes: account.scope?.split(\",\") ?? [],\n\t\t\tidToken: newTokens?.idToken ?? account.idToken ?? void 0\n\t\t};\n\t\treturn ctx.json(tokens);\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to get a valid access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst refreshToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/refresh-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Refresh the access token using a refresh token\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Access token refreshed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\trefreshToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body;\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Either userId or session is required` });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\tif (!provider.refreshAccessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} does not support token refreshing.` });\n\tlet account = void 0;\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tif (accountData && (!providerId || providerId === accountData?.providerId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tlet refreshToken$1 = void 0;\n\tif (accountData && providerId === accountData.providerId) refreshToken$1 = accountData.refreshToken ?? void 0;\n\telse refreshToken$1 = account.refreshToken ?? void 0;\n\tif (!refreshToken$1) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Refresh token not found\" });\n\ttry {\n\t\tconst decryptedRefreshToken = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(refreshToken$1, ctx.context);\n\t\tconst tokens = await provider.refreshAccessToken(decryptedRefreshToken);\n\t\tif (account.id) {\n\t\t\tconst updateData = {\n\t\t\t\t...account || {},\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\t\tidToken: tokens.idToken || account.idToken\n\t\t\t};\n\t\t\tawait ctx.context.internalAdapter.updateAccount(account.id, updateData);\n\t\t}\n\t\tif (accountData && providerId === accountData.providerId && ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t...accountData,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || accountData.scope,\n\t\t\tidToken: tokens.idToken || accountData.idToken\n\t\t});\n\t\treturn ctx.json({\n\t\t\taccessToken: tokens.accessToken,\n\t\t\trefreshToken: tokens.refreshToken,\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\tidToken: tokens.idToken || account.idToken,\n\t\t\tproviderId: account.providerId,\n\t\t\taccountId: account.accountId\n\t\t});\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to refresh access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst accountInfoQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.optional(zod__WEBPACK_IMPORTED_MODULE_9__.object({ accountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider given account id for which to get the account info\" }).optional() }));\nconst accountInfo = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/account-info\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the account info provided by the provider\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tname: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\timage: { type: \"string\" },\n\t\t\t\t\t\t\temailVerified: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"id\", \"emailVerified\"]\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\tadditionalProperties: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"data\"],\n\t\t\t\tadditionalProperties: false\n\t\t\t} } }\n\t\t} }\n\t} },\n\tquery: accountInfoQuerySchema\n}, async (ctx) => {\n\tconst providedAccountId = ctx.query?.accountId;\n\tlet account = void 0;\n\tif (!providedAccountId) {\n\t\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\t\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\t\t\tif (accountData) account = accountData;\n\t\t}\n\t} else {\n\t\tconst accountData = await ctx.context.internalAdapter.findAccount(providedAccountId);\n\t\tif (accountData) account = accountData;\n\t}\n\tif (!account || account.userId !== ctx.context.session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === account.providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `Provider account provider is ${account.providerId} but it is not configured` });\n\tconst tokens = await getAccessToken({\n\t\t...ctx,\n\t\tmethod: \"POST\",\n\t\tbody: {\n\t\t\taccountId: account.id,\n\t\t\tproviderId: account.providerId\n\t\t},\n\t\treturnHeaders: false,\n\t\treturnStatus: false\n\t});\n\tif (!tokens.accessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Access token not found\" });\n\tconst info = await provider.getUserInfo({\n\t\t...tokens,\n\t\taccessToken: tokens.accessToken\n\t});\n\treturn ctx.json(info);\n});\n\n//#endregion\n\n//# sourceMappingURL=account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9hY2NvdW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQzRCO0FBQzlCO0FBQ2tCO0FBQ29CO0FBQ2xDO0FBQ3BCO0FBQ2Q7QUFDbUQ7QUFDakI7O0FBRTNEO0FBQ0EseUJBQXlCLHlFQUFrQjtBQUMzQztBQUNBLE9BQU8sMkRBQWlCO0FBQ3hCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QixvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLGdCQUFnQjtBQUNuQyxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtQkFBbUIsRUFBRSxrRUFBa0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELDBCQUEwQix5RUFBa0I7QUFDNUM7QUFDQTtBQUNBLE9BQU8sdUNBQVE7QUFDZixlQUFlLHVDQUFRLFVBQVUsb0VBQW9FO0FBQ3JHLFlBQVksc0ZBQXNCO0FBQ2xDLFdBQVcsdUNBQVE7QUFDbkIsVUFBVSx1Q0FBUTtBQUNsQixVQUFVLHVDQUFRO0FBQ2xCLGdCQUFnQix1Q0FBUTtBQUN4QixpQkFBaUIsdUNBQVE7QUFDekIsV0FBVyxzQ0FBTyxDQUFDLHVDQUFRO0FBQzNCLEdBQUc7QUFDSCxpQkFBaUIsd0NBQVM7QUFDMUIsVUFBVSxzQ0FBTyxDQUFDLHVDQUFRLFdBQVcsK0RBQStEO0FBQ3BHLG9CQUFvQix1Q0FBUSxVQUFVLG9GQUFvRjtBQUMxSCxtQkFBbUIsd0NBQVMsVUFBVSw0R0FBNEc7QUFDbEosa0JBQWtCLHVDQUFRLENBQUMsdUNBQVEsSUFBSSxvQ0FBSztBQUM1QyxFQUFFO0FBQ0YsT0FBTywyREFBaUI7QUFDeEIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixlQUFlO0FBQ2YsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG9HQUFvRywyQkFBMkI7QUFDL0gsWUFBWSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSwyQkFBMkI7QUFDMUcsYUFBYSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IseUJBQXlCO0FBQ3ZGO0FBQ0EsVUFBVSxlQUFlO0FBQ3pCO0FBQ0EsZ0RBQWdELDJCQUEyQjtBQUMzRSxhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHVEQUF1RCwyQkFBMkI7QUFDbEYsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsMEJBQTBCO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwyQkFBMkI7QUFDL0UsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsdUJBQXVCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsOE1BQThNLGlEQUFRLG1CQUFtQixxREFBcUQ7QUFDOVIsK0lBQStJLGlEQUFRLG1CQUFtQiw4REFBOEQ7QUFDeE87QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSixhQUFhLGlEQUFRLHlCQUF5QiwwREFBMEQ7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EscUJBQXFCLGdFQUFhO0FBQ2xDO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQixZQUFZLFlBQVk7QUFDNUQ7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELHNCQUFzQix5RUFBa0I7QUFDeEM7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsY0FBYyx1Q0FBUTtBQUN0QixhQUFhLHVDQUFRO0FBQ3JCLEVBQUU7QUFDRixPQUFPLGdFQUFzQjtBQUM3QixhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixVQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLHdCQUF3QjtBQUNqQztBQUNBLHlHQUF5RyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsZ0NBQWdDO0FBQzVMO0FBQ0EsOEJBQThCLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDckc7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0QsdUJBQXVCLHlFQUFrQjtBQUN6QztBQUNBLE9BQU8sdUNBQVE7QUFDZixjQUFjLHVDQUFRLFVBQVUsdURBQXVEO0FBQ3ZGLGFBQWEsdUNBQVEsVUFBVSxpRUFBaUU7QUFDaEcsVUFBVSx1Q0FBUSxVQUFVLHdEQUF3RDtBQUNwRixFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkMsaUJBQWlCLGdCQUFnQjtBQUNqQyxxQkFBcUIsZ0JBQWdCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixVQUFVO0FBQ1Y7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLGdDQUFnQztBQUN6QztBQUNBLHVCQUF1QiwrREFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLGlEQUFRLGtCQUFrQixxQkFBcUIsWUFBWSxvQkFBb0I7QUFDN0osMkJBQTJCLDRFQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVEsa0JBQWtCLDhCQUE4QjtBQUNqRjtBQUNBLDBCQUEwQixpREFBUSxrQkFBa0IscUJBQXFCLFlBQVksYUFBYTtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvRUFBaUI7QUFDakQ7QUFDQTtBQUNBLHVCQUF1QiwrREFBWTtBQUNuQztBQUNBLHdCQUF3QiwrREFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCw0RUFBZ0I7QUFDOUU7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGdEQUFnRCxvRUFBaUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0QscUJBQXFCLHlFQUFrQjtBQUN2QztBQUNBLE9BQU8sdUNBQVE7QUFDZixjQUFjLHVDQUFRLFVBQVUsdURBQXVEO0FBQ3ZGLGFBQWEsdUNBQVEsVUFBVSxpRUFBaUU7QUFDaEcsVUFBVSx1Q0FBUSxVQUFVLHdEQUF3RDtBQUNwRixFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkMsaUJBQWlCLGdCQUFnQjtBQUNqQyxxQkFBcUIsZ0JBQWdCO0FBQ3JDLHNCQUFzQixnQkFBZ0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixVQUFVO0FBQ1Y7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLGdDQUFnQztBQUN6QztBQUNBLHVCQUF1QiwrREFBaUI7QUFDeEM7QUFDQTtBQUNBLGdDQUFnQyxpREFBUSxrQkFBa0IsaURBQWlEO0FBQzNHO0FBQ0EsMEJBQTBCLGlEQUFRLGtCQUFrQixxQkFBcUIsWUFBWSxhQUFhO0FBQ2xHLDZDQUE2QyxpREFBUSxrQkFBa0IscUJBQXFCLFlBQVkscUNBQXFDO0FBQzdJO0FBQ0EsMkJBQTJCLDRFQUFnQjtBQUMzQztBQUNBO0FBQ0EseUJBQXlCLGlEQUFRLGtCQUFrQiw4QkFBOEI7QUFDakY7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFRLGtCQUFrQixvQ0FBb0M7QUFDOUY7QUFDQSxzQ0FBc0Msb0VBQWlCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQix1QkFBdUIsK0RBQVk7QUFDbkMsd0JBQXdCLCtEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUhBQXFILDRFQUFnQjtBQUNySTtBQUNBLHNCQUFzQiwrREFBWTtBQUNsQyx1QkFBdUIsK0RBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSCxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0QsK0JBQStCLHlDQUFVLENBQUMsdUNBQVEsR0FBRyxXQUFXLHVDQUFRLFVBQVUsZ0ZBQWdGLGNBQWM7QUFDaEwsb0JBQW9CLHlFQUFrQjtBQUN0QztBQUNBLE9BQU8sMkRBQWlCO0FBQ3hCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QixlQUFlLGdCQUFnQjtBQUMvQixnQkFBZ0IsZ0JBQWdCO0FBQ2hDLGdCQUFnQixnQkFBZ0I7QUFDaEMsd0JBQXdCO0FBQ3hCLE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEVBQWdCO0FBQzdDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGlEQUFRLGtCQUFrQiw4QkFBOEI7QUFDbkk7QUFDQSwwQkFBMEIsaURBQVEsNEJBQTRCLHlDQUF5QyxvQkFBb0IsMkJBQTJCO0FBQ3RKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTtBQUNGLG9DQUFvQyxpREFBUSxrQkFBa0IsbUNBQW1DO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLENBQUM7O0FBRUQ7QUFDeUc7QUFDekciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXGFjY291bnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlQWNjb3VudE91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRBY2NvdW50Q29va2llLCBzZXRBY2NvdW50Q29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvc2Vzc2lvbi1zdG9yZS5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3RhdGUgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgZGVjcnlwdE9BdXRoVG9rZW4sIHNldFRva2VuVXRpbCB9IGZyb20gXCIuLi8uLi9vYXV0aDIvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uRnJvbUN0eCwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgU29jaWFsUHJvdmlkZXJMaXN0RW51bSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9zb2NpYWwtcHJvdmlkZXJzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9hY2NvdW50LnRzXG5jb25zdCBsaXN0VXNlckFjY291bnRzID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2xpc3QtYWNjb3VudHNcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImxpc3RVc2VyQWNjb3VudHNcIixcblx0XHRkZXNjcmlwdGlvbjogXCJMaXN0IGFsbCBhY2NvdW50cyBsaW5rZWQgdG8gdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRpdGVtczoge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0aWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0cHJvdmlkZXJJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGFjY291bnRJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHR1c2VySWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0c2NvcGVzOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0XHRcdFx0aXRlbXM6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XCJwcm92aWRlcklkXCIsXG5cdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIixcblx0XHRcdFx0XHRcdFwiYWNjb3VudElkXCIsXG5cdFx0XHRcdFx0XHRcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0XCJzY29wZXNcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYy5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFjY291bnRzID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKTtcblx0cmV0dXJuIGMuanNvbihhY2NvdW50cy5tYXAoKGEpID0+IHtcblx0XHRjb25zdCB7IHNjb3BlLCAuLi5wYXJzZWQgfSA9IHBhcnNlQWNjb3VudE91dHB1dChjLmNvbnRleHQub3B0aW9ucywgYSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnBhcnNlZCxcblx0XHRcdHNjb3Blczogc2NvcGU/LnNwbGl0KFwiLFwiKSB8fCBbXVxuXHRcdH07XG5cdH0pKTtcbn0pO1xuY29uc3QgbGlua1NvY2lhbEFjY291bnQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbGluay1zb2NpYWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGhhcyBzaWduZWQgaW5cIiB9KS5vcHRpb25hbCgpLFxuXHRcdHByb3ZpZGVyOiBTb2NpYWxQcm92aWRlckxpc3RFbnVtLFxuXHRcdGlkVG9rZW46IHoub2JqZWN0KHtcblx0XHRcdHRva2VuOiB6LnN0cmluZygpLFxuXHRcdFx0bm9uY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdGFjY2Vzc1Rva2VuOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRyZWZyZXNoVG9rZW46IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXG5cdFx0fSkub3B0aW9uYWwoKSxcblx0XHRyZXF1ZXN0U2lnblVwOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuXHRcdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQWRkaXRpb25hbCBzY29wZXMgdG8gcmVxdWVzdCBmcm9tIHRoZSBwcm92aWRlclwiIH0pLm9wdGlvbmFsKCksXG5cdFx0ZXJyb3JDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBpZiB0aGVyZSBpcyBhbiBlcnJvciBkdXJpbmcgdGhlIGxpbmsgcHJvY2Vzc1wiIH0pLm9wdGlvbmFsKCksXG5cdFx0ZGlzYWJsZVJlZGlyZWN0OiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGlzYWJsZSBhdXRvbWF0aWMgcmVkaXJlY3Rpb24gdG8gdGhlIHByb3ZpZGVyLiBVc2VmdWwgZm9yIGhhbmRsaW5nIHRoZSByZWRpcmVjdGlvbiB5b3Vyc2VsZlwiIH0pLm9wdGlvbmFsKCksXG5cdFx0YWRkaXRpb25hbERhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkxpbmsgYSBzb2NpYWwgYWNjb3VudCB0byB0aGUgdXNlclwiLFxuXHRcdG9wZXJhdGlvbklkOiBcImxpbmtTb2NpYWxBY2NvdW50XCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR1cmw6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgYXV0aG9yaXphdGlvbiBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG9cIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVkaXJlY3Q6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSB1c2VyIHNob3VsZCBiZSByZWRpcmVjdGVkIHRvIHRoZSBhdXRob3JpemF0aW9uIFVSTFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wicmVkaXJlY3RcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGMpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGMuY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5ib2R5LnByb3ZpZGVyKTtcblx0aWYgKCFwcm92aWRlcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQcm92aWRlciBub3QgZm91bmQuIE1ha2Ugc3VyZSB0byBhZGQgdGhlIHByb3ZpZGVyIGluIHlvdXIgYXV0aCBjb25maWdcIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUFJPVklERVJfTk9UX0ZPVU5EIH0pO1xuXHR9XG5cdGlmIChjLmJvZHkuaWRUb2tlbikge1xuXHRcdGlmICghcHJvdmlkZXIudmVyaWZ5SWRUb2tlbikge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIGRvZXMgbm90IHN1cHBvcnQgaWQgdG9rZW4gdmVyaWZpY2F0aW9uXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSURfVE9LRU5fTk9UX1NVUFBPUlRFRCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyB0b2tlbiwgbm9uY2UgfSA9IGMuYm9keS5pZFRva2VuO1xuXHRcdGlmICghYXdhaXQgcHJvdmlkZXIudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBpZCB0b2tlblwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IGxpbmtpbmdVc2VySW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcblx0XHRcdGlkVG9rZW46IHRva2VuLFxuXHRcdFx0YWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW5cblx0XHR9KTtcblx0XHRpZiAoIWxpbmtpbmdVc2VySW5mbyB8fCAhbGlua2luZ1VzZXJJbmZvPy51c2VyKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm9cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GTyB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbGlua2luZ1VzZXJJZCA9IFN0cmluZyhsaW5raW5nVXNlckluZm8udXNlci5pZCk7XG5cdFx0aWYgKCFsaW5raW5nVXNlckluZm8udXNlci5lbWFpbCkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgZW1haWwgbm90IGZvdW5kXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9FTUFJTF9OT1RfRk9VTkQgfSk7XG5cdFx0fVxuXHRcdGlmICgoYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKSkuZmluZCgoYSkgPT4gYS5wcm92aWRlcklkID09PSBwcm92aWRlci5pZCAmJiBhLmFjY291bnRJZCA9PT0gbGlua2luZ1VzZXJJZCkpIHJldHVybiBjLmpzb24oe1xuXHRcdFx0dXJsOiBcIlwiLFxuXHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0cmVkaXJlY3Q6IGZhbHNlXG5cdFx0fSk7XG5cdFx0aWYgKCEoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnMpPy5pbmNsdWRlcyhwcm92aWRlci5pZCkgJiYgIWxpbmtpbmdVc2VySW5mby51c2VyLmVtYWlsVmVyaWZpZWQgfHwgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmVuYWJsZWQgPT09IGZhbHNlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGxpbmtlZCAtIGxpbmtpbmcgbm90IGFsbG93ZWRcIiB9KTtcblx0XHRpZiAobGlua2luZ1VzZXJJbmZvLnVzZXIuZW1haWwgIT09IHNlc3Npb24udXNlci5lbWFpbCAmJiBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uYWxsb3dEaWZmZXJlbnRFbWFpbHMgIT09IHRydWUpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgbGlua2VkIC0gZGlmZmVyZW50IGVtYWlscyBub3QgYWxsb3dlZFwiIH0pO1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZUFjY291bnQoe1xuXHRcdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdFx0cHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG5cdFx0XHRcdGFjY291bnRJZDogbGlua2luZ1VzZXJJZCxcblx0XHRcdFx0YWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbixcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW4sXG5cdFx0XHRcdHNjb3BlOiBjLmJvZHkuaWRUb2tlbi5zY29wZXM/LmpvaW4oXCIsXCIpXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkVYUEVDVEFUSU9OX0ZBSUxFRFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgbGlua2VkIC0gdW5hYmxlIHRvIGNyZWF0ZSBhY2NvdW50XCIgfSk7XG5cdFx0fVxuXHRcdGlmIChjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8udXBkYXRlVXNlckluZm9PbkxpbmsgPT09IHRydWUpIHRyeSB7XG5cdFx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkLCB7XG5cdFx0XHRcdG5hbWU6IGxpbmtpbmdVc2VySW5mby51c2VyPy5uYW1lLFxuXHRcdFx0XHRpbWFnZTogbGlua2luZ1VzZXJJbmZvLnVzZXI/LmltYWdlXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIHVzZXIgLSBcIiArIGUudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHRcdHJldHVybiBjLmpzb24oe1xuXHRcdFx0dXJsOiBcIlwiLFxuXHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0cmVkaXJlY3Q6IGZhbHNlXG5cdFx0fSk7XG5cdH1cblx0Y29uc3Qgc3RhdGUgPSBhd2FpdCBnZW5lcmF0ZVN0YXRlKGMsIHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsXG5cdH0sIGMuYm9keS5hZGRpdGlvbmFsRGF0YSk7XG5cdGNvbnN0IHVybCA9IGF3YWl0IHByb3ZpZGVyLmNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdHN0YXRlOiBzdGF0ZS5zdGF0ZSxcblx0XHRjb2RlVmVyaWZpZXI6IHN0YXRlLmNvZGVWZXJpZmllcixcblx0XHRyZWRpcmVjdFVSSTogYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9YCxcblx0XHRzY29wZXM6IGMuYm9keS5zY29wZXNcblx0fSk7XG5cdGlmICghYy5ib2R5LmRpc2FibGVSZWRpcmVjdCkgYy5zZXRIZWFkZXIoXCJMb2NhdGlvblwiLCB1cmwudG9TdHJpbmcoKSk7XG5cdHJldHVybiBjLmpzb24oe1xuXHRcdHVybDogdXJsLnRvU3RyaW5nKCksXG5cdFx0cmVkaXJlY3Q6ICFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0XG5cdH0pO1xufSk7XG5jb25zdCB1bmxpbmtBY2NvdW50ID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3VubGluay1hY2NvdW50XCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdHByb3ZpZGVySWQ6IHouc3RyaW5nKCksXG5cdFx0YWNjb3VudElkOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW2ZyZXNoU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiVW5saW5rIGFuIGFjY291bnRcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBwcm92aWRlcklkLCBhY2NvdW50SWQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKTtcblx0aWYgKGFjY291bnRzLmxlbmd0aCA9PT0gMSAmJiAhY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uYWxsb3dVbmxpbmtpbmdBbGwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fVU5MSU5LX0xBU1RfQUNDT1VOVCB9KTtcblx0Y29uc3QgYWNjb3VudEV4aXN0ID0gYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudElkID8gYWNjb3VudC5hY2NvdW50SWQgPT09IGFjY291bnRJZCAmJiBhY2NvdW50LnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQgOiBhY2NvdW50LnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIWFjY291bnRFeGlzdCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkFDQ09VTlRfTk9UX0ZPVU5EIH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlQWNjb3VudChhY2NvdW50RXhpc3QuaWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IGdldEFjY2Vzc1Rva2VuID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2dldC1hY2Nlc3MtdG9rZW5cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0cHJvdmlkZXJJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHByb3ZpZGVyIElEIGZvciB0aGUgT0F1dGggcHJvdmlkZXJcIiB9KSxcblx0XHRhY2NvdW50SWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBhY2NvdW50IElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVmcmVzaCB0b2tlblwiIH0pLm9wdGlvbmFsKCksXG5cdFx0dXNlcklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIGFjY291bnRcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiR2V0IGEgdmFsaWQgYWNjZXNzIHRva2VuLCBkb2luZyBhIHJlZnJlc2ggaWYgbmVlZGVkXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHQyMDA6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQSBWYWxpZCBhY2Nlc3MgdG9rZW5cIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHRva2VuVHlwZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRpZFRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0sXG5cdFx0XHQ0MDA6IHsgZGVzY3JpcHRpb246IFwiSW52YWxpZCByZWZyZXNoIHRva2VuIG9yIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb25cIiB9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBwcm92aWRlcklkLCBhY2NvdW50SWQsIHVzZXJJZCB9ID0gY3R4LmJvZHkgfHwge307XG5cdGNvbnN0IHJlcSA9IGN0eC5yZXF1ZXN0O1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKHJlcSAmJiAhc2Vzc2lvbikgdGhyb3cgY3R4LmVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRjb25zdCByZXNvbHZlZFVzZXJJZCA9IHNlc3Npb24/LnVzZXI/LmlkIHx8IHVzZXJJZDtcblx0aWYgKCFyZXNvbHZlZFVzZXJJZCkgdGhyb3cgY3R4LmVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRpZiAoIWN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBpcyBub3Qgc3VwcG9ydGVkLmAgfSk7XG5cdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRsZXQgYWNjb3VudCA9IHZvaWQgMDtcblx0aWYgKGFjY291bnREYXRhICYmIHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhLnByb3ZpZGVySWQgJiYgKCFhY2NvdW50SWQgfHwgYWNjb3VudERhdGEuaWQgPT09IGFjY291bnRJZCkpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0ZWxzZSBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMocmVzb2x2ZWRVc2VySWQpKS5maW5kKChhY2MpID0+IGFjY291bnRJZCA/IGFjYy5pZCA9PT0gYWNjb3VudElkICYmIGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIWFjY291bnQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xuXHRjb25zdCBwcm92aWRlciA9IGN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFwcm92aWRlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBub3QgZm91bmQuYCB9KTtcblx0dHJ5IHtcblx0XHRsZXQgbmV3VG9rZW5zID0gbnVsbDtcblx0XHRjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZWQgPSBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0ICYmIG5ldyBEYXRlKGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkgPCA1ZTM7XG5cdFx0aWYgKGFjY291bnQucmVmcmVzaFRva2VuICYmIGFjY2Vzc1Rva2VuRXhwaXJlZCAmJiBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4pIHtcblx0XHRcdGNvbnN0IHJlZnJlc2hUb2tlbiQxID0gYXdhaXQgZGVjcnlwdE9BdXRoVG9rZW4oYWNjb3VudC5yZWZyZXNoVG9rZW4sIGN0eC5jb250ZXh0KTtcblx0XHRcdG5ld1Rva2VucyA9IGF3YWl0IHByb3ZpZGVyLnJlZnJlc2hBY2Nlc3NUb2tlbihyZWZyZXNoVG9rZW4kMSk7XG5cdFx0XHRjb25zdCB1cGRhdGVkRGF0YSA9IHtcblx0XHRcdFx0YWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChuZXdUb2tlbnMuYWNjZXNzVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwobmV3VG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IG5ld1Rva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXRcblx0XHRcdH07XG5cdFx0XHRsZXQgdXBkYXRlZEFjY291bnQgPSBudWxsO1xuXHRcdFx0aWYgKGFjY291bnQuaWQpIHVwZGF0ZWRBY2NvdW50ID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwgdXBkYXRlZERhdGEpO1xuXHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGN0eCwge1xuXHRcdFx0XHQuLi5hY2NvdW50LFxuXHRcdFx0XHQuLi51cGRhdGVkQWNjb3VudCA/PyB1cGRhdGVkRGF0YVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gKCgpID0+IHtcblx0XHRcdGlmIChuZXdUb2tlbnM/LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3VG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0ID09PSBcInN0cmluZ1wiKSByZXR1cm4gbmV3IERhdGUobmV3VG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0KTtcblx0XHRcdFx0cmV0dXJuIG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdDtcblx0XHRcdH1cblx0XHRcdGlmIChhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBEYXRlKGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQpO1xuXHRcdFx0XHRyZXR1cm4gYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdDtcblx0XHRcdH1cblx0XHR9KSgpO1xuXHRcdGNvbnN0IHRva2VucyA9IHtcblx0XHRcdGFjY2Vzc1Rva2VuOiBuZXdUb2tlbnM/LmFjY2Vzc1Rva2VuID8/IGF3YWl0IGRlY3J5cHRPQXV0aFRva2VuKGFjY291bnQuYWNjZXNzVG9rZW4gPz8gXCJcIiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRzY29wZXM6IGFjY291bnQuc2NvcGU/LnNwbGl0KFwiLFwiKSA/PyBbXSxcblx0XHRcdGlkVG9rZW46IG5ld1Rva2Vucz8uaWRUb2tlbiA/PyBhY2NvdW50LmlkVG9rZW4gPz8gdm9pZCAwXG5cdFx0fTtcblx0XHRyZXR1cm4gY3R4Lmpzb24odG9rZW5zKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgYSB2YWxpZCBhY2Nlc3MgdG9rZW5cIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pO1xuXHR9XG59KTtcbmNvbnN0IHJlZnJlc2hUb2tlbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZWZyZXNoLXRva2VuXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdHByb3ZpZGVySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBJRCBmb3IgdGhlIE9BdXRoIHByb3ZpZGVyXCIgfSksXG5cdFx0YWNjb3VudElkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgYWNjb3VudCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlZnJlc2ggdG9rZW5cIiB9KS5vcHRpb25hbCgpLFxuXHRcdHVzZXJJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBhY2NvdW50XCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiB1c2luZyBhIHJlZnJlc2ggdG9rZW5cIixcblx0XHRyZXNwb25zZXM6IHtcblx0XHRcdDIwMDoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBY2Nlc3MgdG9rZW4gcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0dG9rZW5UeXBlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGlkVG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0YWNjZXNzVG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0cmVmcmVzaFRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0NDAwOiB7IGRlc2NyaXB0aW9uOiBcIkludmFsaWQgcmVmcmVzaCB0b2tlbiBvciBwcm92aWRlciBjb25maWd1cmF0aW9uXCIgfVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkLCB1c2VySWQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCByZXEgPSBjdHgucmVxdWVzdDtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmIChyZXEgJiYgIXNlc3Npb24pIHRocm93IGN0eC5lcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3QgcmVzb2x2ZWRVc2VySWQgPSBzZXNzaW9uPy51c2VyPy5pZCB8fCB1c2VySWQ7XG5cdGlmICghcmVzb2x2ZWRVc2VySWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYEVpdGhlciB1c2VySWQgb3Igc2Vzc2lvbiBpcyByZXF1aXJlZGAgfSk7XG5cdGNvbnN0IHByb3ZpZGVyID0gY3R4LmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIXByb3ZpZGVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGBQcm92aWRlciAke3Byb3ZpZGVySWR9IG5vdCBmb3VuZC5gIH0pO1xuXHRpZiAoIXByb3ZpZGVyLnJlZnJlc2hBY2Nlc3NUb2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBkb2VzIG5vdCBzdXBwb3J0IHRva2VuIHJlZnJlc2hpbmcuYCB9KTtcblx0bGV0IGFjY291bnQgPSB2b2lkIDA7XG5cdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRpZiAoYWNjb3VudERhdGEgJiYgKCFwcm92aWRlcklkIHx8IHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhPy5wcm92aWRlcklkKSkgYWNjb3VudCA9IGFjY291bnREYXRhO1xuXHRlbHNlIGFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhyZXNvbHZlZFVzZXJJZCkpLmZpbmQoKGFjYykgPT4gYWNjb3VudElkID8gYWNjLmlkID09PSBhY2NvdW50SWQgJiYgYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQgOiBhY2MucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXJJZCk7XG5cdGlmICghYWNjb3VudCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XG5cdGxldCByZWZyZXNoVG9rZW4kMSA9IHZvaWQgMDtcblx0aWYgKGFjY291bnREYXRhICYmIHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhLnByb3ZpZGVySWQpIHJlZnJlc2hUb2tlbiQxID0gYWNjb3VudERhdGEucmVmcmVzaFRva2VuID8/IHZvaWQgMDtcblx0ZWxzZSByZWZyZXNoVG9rZW4kMSA9IGFjY291bnQucmVmcmVzaFRva2VuID8/IHZvaWQgMDtcblx0aWYgKCFyZWZyZXNoVG9rZW4kMSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kXCIgfSk7XG5cdHRyeSB7XG5cdFx0Y29uc3QgZGVjcnlwdGVkUmVmcmVzaFRva2VuID0gYXdhaXQgZGVjcnlwdE9BdXRoVG9rZW4ocmVmcmVzaFRva2VuJDEsIGN0eC5jb250ZXh0KTtcblx0XHRjb25zdCB0b2tlbnMgPSBhd2FpdCBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4oZGVjcnlwdGVkUmVmcmVzaFRva2VuKTtcblx0XHRpZiAoYWNjb3VudC5pZCkge1xuXHRcdFx0Y29uc3QgdXBkYXRlRGF0YSA9IHtcblx0XHRcdFx0Li4uYWNjb3VudCB8fCB7fSxcblx0XHRcdFx0YWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMuYWNjZXNzVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKSB8fCBhY2NvdW50LnNjb3BlLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbnMuaWRUb2tlbiB8fCBhY2NvdW50LmlkVG9rZW5cblx0XHRcdH07XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChhY2NvdW50LmlkLCB1cGRhdGVEYXRhKTtcblx0XHR9XG5cdFx0aWYgKGFjY291bnREYXRhICYmIHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhLnByb3ZpZGVySWQgJiYgY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIGF3YWl0IHNldEFjY291bnRDb29raWUoY3R4LCB7XG5cdFx0XHQuLi5hY2NvdW50RGF0YSxcblx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMucmVmcmVzaFRva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpIHx8IGFjY291bnREYXRhLnNjb3BlLFxuXHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4gfHwgYWNjb3VudERhdGEuaWRUb2tlblxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2Vzc1Rva2VuLFxuXHRcdFx0cmVmcmVzaFRva2VuOiB0b2tlbnMucmVmcmVzaFRva2VuLFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogdG9rZW5zLnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKSB8fCBhY2NvdW50LnNjb3BlLFxuXHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4gfHwgYWNjb3VudC5pZFRva2VuLFxuXHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0YWNjb3VudElkOiBhY2NvdW50LmFjY291bnRJZFxuXHRcdH0pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJlZnJlc2ggYWNjZXNzIHRva2VuXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KTtcblx0fVxufSk7XG5jb25zdCBhY2NvdW50SW5mb1F1ZXJ5U2NoZW1hID0gei5vcHRpb25hbCh6Lm9iamVjdCh7IGFjY291bnRJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHByb3ZpZGVyIGdpdmVuIGFjY291bnQgaWQgZm9yIHdoaWNoIHRvIGdldCB0aGUgYWNjb3VudCBpbmZvXCIgfSkub3B0aW9uYWwoKSB9KSk7XG5jb25zdCBhY2NvdW50SW5mbyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hY2NvdW50LWluZm9cIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgYWNjb3VudCBpbmZvIHByb3ZpZGVkIGJ5IHRoZSBwcm92aWRlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0ZW1haWw6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRpbWFnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHsgdHlwZTogXCJib29sZWFuXCIgfVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJpZFwiLCBcImVtYWlsVmVyaWZpZWRcIl1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7fSxcblx0XHRcdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1widXNlclwiLCBcImRhdGFcIl0sXG5cdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9LFxuXHRxdWVyeTogYWNjb3VudEluZm9RdWVyeVNjaGVtYVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBwcm92aWRlZEFjY291bnRJZCA9IGN0eC5xdWVyeT8uYWNjb3VudElkO1xuXHRsZXQgYWNjb3VudCA9IHZvaWQgMDtcblx0aWYgKCFwcm92aWRlZEFjY291bnRJZCkge1xuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkge1xuXHRcdFx0Y29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCBnZXRBY2NvdW50Q29va2llKGN0eCk7XG5cdFx0XHRpZiAoYWNjb3VudERhdGEpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnQocHJvdmlkZWRBY2NvdW50SWQpO1xuXHRcdGlmIChhY2NvdW50RGF0YSkgYWNjb3VudCA9IGFjY291bnREYXRhO1xuXHR9XG5cdGlmICghYWNjb3VudCB8fCBhY2NvdW50LnVzZXJJZCAhPT0gY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgcHJvdmlkZXIgPSBjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYWNjb3VudC5wcm92aWRlcklkKTtcblx0aWYgKCFwcm92aWRlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyIGFjY291bnQgcHJvdmlkZXIgaXMgJHthY2NvdW50LnByb3ZpZGVySWR9IGJ1dCBpdCBpcyBub3QgY29uZmlndXJlZGAgfSk7XG5cdGNvbnN0IHRva2VucyA9IGF3YWl0IGdldEFjY2Vzc1Rva2VuKHtcblx0XHQuLi5jdHgsXG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiB7XG5cdFx0XHRhY2NvdW50SWQ6IGFjY291bnQuaWQsXG5cdFx0XHRwcm92aWRlcklkOiBhY2NvdW50LnByb3ZpZGVySWRcblx0XHR9LFxuXHRcdHJldHVybkhlYWRlcnM6IGZhbHNlLFxuXHRcdHJldHVyblN0YXR1czogZmFsc2Vcblx0fSk7XG5cdGlmICghdG9rZW5zLmFjY2Vzc1Rva2VuKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQWNjZXNzIHRva2VuIG5vdCBmb3VuZFwiIH0pO1xuXHRjb25zdCBpbmZvID0gYXdhaXQgcHJvdmlkZXIuZ2V0VXNlckluZm8oe1xuXHRcdC4uLnRva2Vucyxcblx0XHRhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2Vzc1Rva2VuXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oaW5mbyk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhY2NvdW50SW5mbywgZ2V0QWNjZXNzVG9rZW4sIGxpbmtTb2NpYWxBY2NvdW50LCBsaXN0VXNlckFjY291bnRzLCByZWZyZXNoVG9rZW4sIHVubGlua0FjY291bnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjY291bnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callbackOAuth: () => (/* binding */ callbackOAuth)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/callback.ts\nconst schema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tdevice_id: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tstate: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tuser: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()\n});\nconst callbackOAuth = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/callback/:id\", {\n\tmethod: [\"GET\", \"POST\"],\n\toperationId: \"handleOAuthCallback\",\n\tbody: schema.optional(),\n\tquery: schema.optional(),\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__.HIDE_METADATA,\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t}\n}, async (c) => {\n\tlet queryOrBody;\n\tconst defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tif (c.method === \"POST\") {\n\t\tconst postData = c.body ? schema.parse(c.body) : {};\n\t\tconst queryData = c.query ? schema.parse(c.query) : {};\n\t\tconst mergedData = schema.parse({\n\t\t\t...postData,\n\t\t\t...queryData\n\t\t});\n\t\tconst params = new URLSearchParams();\n\t\tfor (const [key, value] of Object.entries(mergedData)) if (value !== void 0 && value !== null) params.set(key, String(value));\n\t\tconst redirectURL = `${c.context.baseURL}/callback/${c.params.id}?${params.toString()}`;\n\t\tthrow c.redirect(redirectURL);\n\t}\n\ttry {\n\t\tif (c.method === \"GET\") queryOrBody = schema.parse(c.query);\n\t\telse if (c.method === \"POST\") queryOrBody = schema.parse(c.body);\n\t\telse throw new Error(\"Unsupported method\");\n\t} catch (e) {\n\t\tc.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n\t\tthrow c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n\t}\n\tconst { code, error, state, error_description, device_id, user: userData } = queryOrBody;\n\tif (!state) {\n\t\tc.context.logger.error(\"State not found\", error);\n\t\tconst url = `${defaultErrorURL}${defaultErrorURL.includes(\"?\") ? \"&\" : \"?\"}state=state_not_found`;\n\t\tthrow c.redirect(url);\n\t}\n\tconst { codeVerifier, callbackURL, link, errorURL, newUserURL, requestSignUp } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState)(c);\n\tfunction redirectOnError(error$1, description) {\n\t\tconst baseURL = errorURL ?? defaultErrorURL;\n\t\tconst params = new URLSearchParams({ error: error$1 });\n\t\tif (description) params.set(\"error_description\", description);\n\t\tconst url = `${baseURL}${baseURL.includes(\"?\") ? \"&\" : \"?\"}${params.toString()}`;\n\t\tthrow c.redirect(url);\n\t}\n\tif (error) redirectOnError(error, error_description);\n\tif (!code) {\n\t\tc.context.logger.error(\"Code not found\");\n\t\tthrow redirectOnError(\"no_code\");\n\t}\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.params.id);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Oauth provider with id\", c.params.id, \"not found\");\n\t\tthrow redirectOnError(\"oauth_provider_not_found\");\n\t}\n\tlet tokens;\n\ttry {\n\t\ttokens = await provider.validateAuthorizationCode({\n\t\t\tcode,\n\t\t\tcodeVerifier,\n\t\t\tdeviceId: device_id,\n\t\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`\n\t\t});\n\t} catch (e) {\n\t\tc.context.logger.error(\"\", e);\n\t\tthrow redirectOnError(\"invalid_code\");\n\t}\n\tif (!tokens) throw redirectOnError(\"invalid_code\");\n\tconst parsedUserData = userData ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(userData) : null;\n\tconst userInfo = await provider.getUserInfo({\n\t\t...tokens,\n\t\tuser: parsedUserData ?? void 0\n\t}).then((res) => res?.user);\n\tif (!userInfo) {\n\t\tc.context.logger.error(\"Unable to get user info\");\n\t\treturn redirectOnError(\"unable_to_get_user_info\");\n\t}\n\tif (!callbackURL) {\n\t\tc.context.logger.error(\"No callback URL found\");\n\t\tthrow redirectOnError(\"no_callback_url\");\n\t}\n\tif (link) {\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\tc.context.logger.error(\"Unable to link account - untrusted provider\");\n\t\t\treturn redirectOnError(\"unable_to_link_account\");\n\t\t}\n\t\tif (userInfo.email !== link.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) return redirectOnError(\"email_doesn't_match\");\n\t\tconst existingAccount = await c.context.internalAdapter.findAccount(String(userInfo.id));\n\t\tif (existingAccount) {\n\t\t\tif (existingAccount.userId.toString() !== link.userId.toString()) return redirectOnError(\"account_already_linked_to_different_user\");\n\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\tawait c.context.internalAdapter.updateAccount(existingAccount.id, updateData);\n\t\t} else if (!await c.context.internalAdapter.createAccount({\n\t\t\tuserId: link.userId,\n\t\t\tproviderId: provider.id,\n\t\t\taccountId: String(userInfo.id),\n\t\t\t...tokens,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t})) return redirectOnError(\"unable_to_link_account\");\n\t\tlet toRedirectTo$1;\n\t\ttry {\n\t\t\ttoRedirectTo$1 = callbackURL.toString();\n\t\t} catch {\n\t\t\ttoRedirectTo$1 = callbackURL;\n\t\t}\n\t\tthrow c.redirect(toRedirectTo$1);\n\t}\n\tif (!userInfo.email) {\n\t\tc.context.logger.error(\"Provider did not return email. This could be due to misconfiguration in the provider settings.\");\n\t\treturn redirectOnError(\"email_not_found\");\n\t}\n\tconst accountData = {\n\t\tproviderId: provider.id,\n\t\taccountId: String(userInfo.id),\n\t\t...tokens,\n\t\tscope: tokens.scopes?.join(\",\")\n\t};\n\tconst result = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__.handleOAuthUserInfo)(c, {\n\t\tuserInfo: {\n\t\t\t...userInfo,\n\t\t\tid: String(userInfo.id),\n\t\t\temail: userInfo.email,\n\t\t\tname: userInfo.name || userInfo.email\n\t\t},\n\t\taccount: accountData,\n\t\tcallbackURL,\n\t\tdisableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n\t\toverrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n\t});\n\tif (result.error) {\n\t\tc.context.logger.error(result.error.split(\" \").join(\"_\"));\n\t\treturn redirectOnError(result.error.split(\" \").join(\"_\"));\n\t}\n\tconst { session, user } = result.data;\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.setSessionCookie)(c, {\n\t\tsession,\n\t\tuser\n\t});\n\tlet toRedirectTo;\n\ttry {\n\t\ttoRedirectTo = (result.isRegister ? newUserURL || callbackURL : callbackURL).toString();\n\t} catch {\n\t\ttoRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n\t}\n\tthrow c.redirect(toRedirectTo);\n});\n\n//#endregion\n\n//# sourceMappingURL=callback.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9jYWxsYmFjay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1A7QUFDRTtBQUNjO0FBQ047QUFDTjtBQUMvQjtBQUNrQzs7QUFFM0Q7QUFDQSxlQUFlLHVDQUFRO0FBQ3ZCLE9BQU8sdUNBQVE7QUFDZixRQUFRLHVDQUFRO0FBQ2hCLFlBQVksdUNBQVE7QUFDcEIsb0JBQW9CLHVDQUFRO0FBQzVCLFFBQVEsdUNBQVE7QUFDaEIsT0FBTyx1Q0FBUTtBQUNmLENBQUM7QUFDRCxzQkFBc0IseUVBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLG1FQUFhO0FBQ2xCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxzRUFBc0Usa0JBQWtCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQixZQUFZLFlBQVksR0FBRyxrQkFBa0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0JBQXNCLGdCQUFnQjtBQUN0QztBQUNBLFNBQVMsbUVBQW1FO0FBQzVFO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCLEVBQUUsMENBQTBDO0FBQzdFO0FBQ0E7QUFDQSxTQUFTLHVFQUF1RSxRQUFRLDZEQUFVO0FBQ2xHO0FBQ0E7QUFDQSx1Q0FBdUMsZ0JBQWdCO0FBQ3ZEO0FBQ0EsaUJBQWlCLFFBQVEsRUFBRSxrQ0FBa0MsRUFBRSxrQkFBa0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQixZQUFZLFlBQVk7QUFDN0QsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxzRUFBYTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFZO0FBQ25DLHdCQUF3QiwrREFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrREFBWTtBQUNsQyx1QkFBdUIsK0RBQVk7QUFDbkM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkVBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdCQUFnQjtBQUN6QixPQUFPLG9FQUFnQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxjYWxsYmFjay5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdGF0ZSB9IGZyb20gXCIuLi8uLi9vYXV0aDIvc3RhdGUubWpzXCI7XG5pbXBvcnQgeyBzZXRUb2tlblV0aWwgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgaGFuZGxlT0F1dGhVc2VySW5mbyB9IGZyb20gXCIuLi8uLi9vYXV0aDIvbGluay1hY2NvdW50Lm1qc1wiO1xuaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuLi8uLi91dGlscy9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9jYWxsYmFjay50c1xuY29uc3Qgc2NoZW1hID0gei5vYmplY3Qoe1xuXHRjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGVycm9yOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGRldmljZV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRlcnJvcl9kZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRzdGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHR1c2VyOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgY2FsbGJhY2tPQXV0aCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9jYWxsYmFjay86aWRcIiwge1xuXHRtZXRob2Q6IFtcIkdFVFwiLCBcIlBPU1RcIl0sXG5cdG9wZXJhdGlvbklkOiBcImhhbmRsZU9BdXRoQ2FsbGJhY2tcIixcblx0Ym9keTogc2NoZW1hLm9wdGlvbmFsKCksXG5cdHF1ZXJ5OiBzY2hlbWEub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHtcblx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdXG5cdH1cbn0sIGFzeW5jIChjKSA9PiB7XG5cdGxldCBxdWVyeU9yQm9keTtcblx0Y29uc3QgZGVmYXVsdEVycm9yVVJMID0gYy5jb250ZXh0Lm9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwgfHwgYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2Vycm9yYDtcblx0aWYgKGMubWV0aG9kID09PSBcIlBPU1RcIikge1xuXHRcdGNvbnN0IHBvc3REYXRhID0gYy5ib2R5ID8gc2NoZW1hLnBhcnNlKGMuYm9keSkgOiB7fTtcblx0XHRjb25zdCBxdWVyeURhdGEgPSBjLnF1ZXJ5ID8gc2NoZW1hLnBhcnNlKGMucXVlcnkpIDoge307XG5cdFx0Y29uc3QgbWVyZ2VkRGF0YSA9IHNjaGVtYS5wYXJzZSh7XG5cdFx0XHQuLi5wb3N0RGF0YSxcblx0XHRcdC4uLnF1ZXJ5RGF0YVxuXHRcdH0pO1xuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhtZXJnZWREYXRhKSkgaWYgKHZhbHVlICE9PSB2b2lkIDAgJiYgdmFsdWUgIT09IG51bGwpIHBhcmFtcy5zZXQoa2V5LCBTdHJpbmcodmFsdWUpKTtcblx0XHRjb25zdCByZWRpcmVjdFVSTCA9IGAke2MuY29udGV4dC5iYXNlVVJMfS9jYWxsYmFjay8ke2MucGFyYW1zLmlkfT8ke3BhcmFtcy50b1N0cmluZygpfWA7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdChyZWRpcmVjdFVSTCk7XG5cdH1cblx0dHJ5IHtcblx0XHRpZiAoYy5tZXRob2QgPT09IFwiR0VUXCIpIHF1ZXJ5T3JCb2R5ID0gc2NoZW1hLnBhcnNlKGMucXVlcnkpO1xuXHRcdGVsc2UgaWYgKGMubWV0aG9kID09PSBcIlBPU1RcIikgcXVlcnlPckJvZHkgPSBzY2hlbWEucGFyc2UoYy5ib2R5KTtcblx0XHRlbHNlIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIG1ldGhvZFwiKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJJTlZBTElEX0NBTExCQUNLX1JFUVVFU1RcIiwgZSk7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtkZWZhdWx0RXJyb3JVUkx9P2Vycm9yPWludmFsaWRfY2FsbGJhY2tfcmVxdWVzdGApO1xuXHR9XG5cdGNvbnN0IHsgY29kZSwgZXJyb3IsIHN0YXRlLCBlcnJvcl9kZXNjcmlwdGlvbiwgZGV2aWNlX2lkLCB1c2VyOiB1c2VyRGF0YSB9ID0gcXVlcnlPckJvZHk7XG5cdGlmICghc3RhdGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiU3RhdGUgbm90IGZvdW5kXCIsIGVycm9yKTtcblx0XHRjb25zdCB1cmwgPSBgJHtkZWZhdWx0RXJyb3JVUkx9JHtkZWZhdWx0RXJyb3JVUkwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn1zdGF0ZT1zdGF0ZV9ub3RfZm91bmRgO1xuXHRcdHRocm93IGMucmVkaXJlY3QodXJsKTtcblx0fVxuXHRjb25zdCB7IGNvZGVWZXJpZmllciwgY2FsbGJhY2tVUkwsIGxpbmssIGVycm9yVVJMLCBuZXdVc2VyVVJMLCByZXF1ZXN0U2lnblVwIH0gPSBhd2FpdCBwYXJzZVN0YXRlKGMpO1xuXHRmdW5jdGlvbiByZWRpcmVjdE9uRXJyb3IoZXJyb3IkMSwgZGVzY3JpcHRpb24pIHtcblx0XHRjb25zdCBiYXNlVVJMID0gZXJyb3JVUkwgPz8gZGVmYXVsdEVycm9yVVJMO1xuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyBlcnJvcjogZXJyb3IkMSB9KTtcblx0XHRpZiAoZGVzY3JpcHRpb24pIHBhcmFtcy5zZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiLCBkZXNjcmlwdGlvbik7XG5cdFx0Y29uc3QgdXJsID0gYCR7YmFzZVVSTH0ke2Jhc2VVUkwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn0ke3BhcmFtcy50b1N0cmluZygpfWA7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdCh1cmwpO1xuXHR9XG5cdGlmIChlcnJvcikgcmVkaXJlY3RPbkVycm9yKGVycm9yLCBlcnJvcl9kZXNjcmlwdGlvbik7XG5cdGlmICghY29kZSkge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJDb2RlIG5vdCBmb3VuZFwiKTtcblx0XHR0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJub19jb2RlXCIpO1xuXHR9XG5cdGNvbnN0IHByb3ZpZGVyID0gYy5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBjLnBhcmFtcy5pZCk7XG5cdGlmICghcHJvdmlkZXIpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiT2F1dGggcHJvdmlkZXIgd2l0aCBpZFwiLCBjLnBhcmFtcy5pZCwgXCJub3QgZm91bmRcIik7XG5cdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwib2F1dGhfcHJvdmlkZXJfbm90X2ZvdW5kXCIpO1xuXHR9XG5cdGxldCB0b2tlbnM7XG5cdHRyeSB7XG5cdFx0dG9rZW5zID0gYXdhaXQgcHJvdmlkZXIudmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG5cdFx0XHRjb2RlLFxuXHRcdFx0Y29kZVZlcmlmaWVyLFxuXHRcdFx0ZGV2aWNlSWQ6IGRldmljZV9pZCxcblx0XHRcdHJlZGlyZWN0VVJJOiBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtwcm92aWRlci5pZH1gXG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiXCIsIGUpO1xuXHRcdHRocm93IHJlZGlyZWN0T25FcnJvcihcImludmFsaWRfY29kZVwiKTtcblx0fVxuXHRpZiAoIXRva2VucykgdGhyb3cgcmVkaXJlY3RPbkVycm9yKFwiaW52YWxpZF9jb2RlXCIpO1xuXHRjb25zdCBwYXJzZWRVc2VyRGF0YSA9IHVzZXJEYXRhID8gc2FmZUpTT05QYXJzZSh1c2VyRGF0YSkgOiBudWxsO1xuXHRjb25zdCB1c2VySW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcblx0XHQuLi50b2tlbnMsXG5cdFx0dXNlcjogcGFyc2VkVXNlckRhdGEgPz8gdm9pZCAwXG5cdH0pLnRoZW4oKHJlcykgPT4gcmVzPy51c2VyKTtcblx0aWYgKCF1c2VySW5mbykge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVbmFibGUgdG8gZ2V0IHVzZXIgaW5mb1wiKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hYmxlX3RvX2dldF91c2VyX2luZm9cIik7XG5cdH1cblx0aWYgKCFjYWxsYmFja1VSTCkge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJObyBjYWxsYmFjayBVUkwgZm91bmRcIik7XG5cdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwibm9fY2FsbGJhY2tfdXJsXCIpO1xuXHR9XG5cdGlmIChsaW5rKSB7XG5cdFx0aWYgKCEoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnMpPy5pbmNsdWRlcyhwcm92aWRlci5pZCkgJiYgIXVzZXJJbmZvLmVtYWlsVmVyaWZpZWQgfHwgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmVuYWJsZWQgPT09IGZhbHNlKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGxpbmsgYWNjb3VudCAtIHVudHJ1c3RlZCBwcm92aWRlclwiKTtcblx0XHRcdHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmFibGVfdG9fbGlua19hY2NvdW50XCIpO1xuXHRcdH1cblx0XHRpZiAodXNlckluZm8uZW1haWwgIT09IGxpbmsuZW1haWwgJiYgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93RGlmZmVyZW50RW1haWxzICE9PSB0cnVlKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiZW1haWxfZG9lc24ndF9tYXRjaFwiKTtcblx0XHRjb25zdCBleGlzdGluZ0FjY291bnQgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50KFN0cmluZyh1c2VySW5mby5pZCkpO1xuXHRcdGlmIChleGlzdGluZ0FjY291bnQpIHtcblx0XHRcdGlmIChleGlzdGluZ0FjY291bnQudXNlcklkLnRvU3RyaW5nKCkgIT09IGxpbmsudXNlcklkLnRvU3RyaW5nKCkpIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJhY2NvdW50X2FscmVhZHlfbGlua2VkX3RvX2RpZmZlcmVudF91c2VyXCIpO1xuXHRcdFx0Y29uc3QgdXBkYXRlRGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh7XG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbnMuaWRUb2tlbixcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIilcblx0XHRcdH0pLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgIT09IHZvaWQgMCkpO1xuXHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGV4aXN0aW5nQWNjb3VudC5pZCwgdXBkYXRlRGF0YSk7XG5cdFx0fSBlbHNlIGlmICghYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogbGluay51c2VySWQsXG5cdFx0XHRwcm92aWRlcklkOiBwcm92aWRlci5pZCxcblx0XHRcdGFjY291bnRJZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcblx0XHRcdC4uLnRva2Vucyxcblx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKVxuXHRcdH0pKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hYmxlX3RvX2xpbmtfYWNjb3VudFwiKTtcblx0XHRsZXQgdG9SZWRpcmVjdFRvJDE7XG5cdFx0dHJ5IHtcblx0XHRcdHRvUmVkaXJlY3RUbyQxID0gY2FsbGJhY2tVUkwudG9TdHJpbmcoKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRvUmVkaXJlY3RUbyQxID0gY2FsbGJhY2tVUkw7XG5cdFx0fVxuXHRcdHRocm93IGMucmVkaXJlY3QodG9SZWRpcmVjdFRvJDEpO1xuXHR9XG5cdGlmICghdXNlckluZm8uZW1haWwpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUHJvdmlkZXIgZGlkIG5vdCByZXR1cm4gZW1haWwuIFRoaXMgY291bGQgYmUgZHVlIHRvIG1pc2NvbmZpZ3VyYXRpb24gaW4gdGhlIHByb3ZpZGVyIHNldHRpbmdzLlwiKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiZW1haWxfbm90X2ZvdW5kXCIpO1xuXHR9XG5cdGNvbnN0IGFjY291bnREYXRhID0ge1xuXHRcdHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuXHRcdGFjY291bnRJZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcblx0XHQuLi50b2tlbnMsXG5cdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpXG5cdH07XG5cdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZU9BdXRoVXNlckluZm8oYywge1xuXHRcdHVzZXJJbmZvOiB7XG5cdFx0XHQuLi51c2VySW5mbyxcblx0XHRcdGlkOiBTdHJpbmcodXNlckluZm8uaWQpLFxuXHRcdFx0ZW1haWw6IHVzZXJJbmZvLmVtYWlsLFxuXHRcdFx0bmFtZTogdXNlckluZm8ubmFtZSB8fCB1c2VySW5mby5lbWFpbFxuXHRcdH0sXG5cdFx0YWNjb3VudDogYWNjb3VudERhdGEsXG5cdFx0Y2FsbGJhY2tVUkwsXG5cdFx0ZGlzYWJsZVNpZ25VcDogcHJvdmlkZXIuZGlzYWJsZUltcGxpY2l0U2lnblVwICYmICFyZXF1ZXN0U2lnblVwIHx8IHByb3ZpZGVyLm9wdGlvbnM/LmRpc2FibGVTaWduVXAsXG5cdFx0b3ZlcnJpZGVVc2VySW5mbzogcHJvdmlkZXIub3B0aW9ucz8ub3ZlcnJpZGVVc2VySW5mb09uU2lnbkluXG5cdH0pO1xuXHRpZiAocmVzdWx0LmVycm9yKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihyZXN1bHQuZXJyb3Iuc3BsaXQoXCIgXCIpLmpvaW4oXCJfXCIpKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKHJlc3VsdC5lcnJvci5zcGxpdChcIiBcIikuam9pbihcIl9cIikpO1xuXHR9XG5cdGNvbnN0IHsgc2Vzc2lvbiwgdXNlciB9ID0gcmVzdWx0LmRhdGE7XG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoYywge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlclxuXHR9KTtcblx0bGV0IHRvUmVkaXJlY3RUbztcblx0dHJ5IHtcblx0XHR0b1JlZGlyZWN0VG8gPSAocmVzdWx0LmlzUmVnaXN0ZXIgPyBuZXdVc2VyVVJMIHx8IGNhbGxiYWNrVVJMIDogY2FsbGJhY2tVUkwpLnRvU3RyaW5nKCk7XG5cdH0gY2F0Y2gge1xuXHRcdHRvUmVkaXJlY3RUbyA9IHJlc3VsdC5pc1JlZ2lzdGVyID8gbmV3VXNlclVSTCB8fCBjYWxsYmFja1VSTCA6IGNhbGxiYWNrVVJMO1xuXHR9XG5cdHRocm93IGMucmVkaXJlY3QodG9SZWRpcmVjdFRvKTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNhbGxiYWNrT0F1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGxiYWNrLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmailVerificationToken: () => (/* binding */ createEmailVerificationToken),\n/* harmony export */   sendVerificationEmail: () => (/* binding */ sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* binding */ sendVerificationEmailFn),\n/* harmony export */   verifyEmail: () => (/* binding */ verifyEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./session.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose_errors__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jose/errors */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/errors.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/email-verification.ts\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600, extraPayload) {\n\treturn await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.signJWT)({\n\t\temail: email.toLowerCase(),\n\t\tupdateTo,\n\t\t...extraPayload\n\t}, secret, expiresIn);\n}\n/**\n* A function to send a verification email to the user\n*/\nasync function sendVerificationEmailFn(ctx, user) {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await createEmailVerificationToken(ctx.context.secret, user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser,\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n}\nconst sendVerificationEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/send-verification-email\", {\n\tmethod: \"POST\",\n\toperationId: \"sendVerificationEmail\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email to send the verification email to\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to use for email verification callback\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"sendVerificationEmail\",\n\t\tdescription: \"Send a verification email to the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The email to send the verification email to\",\n\t\t\t\t\texample: \"user@example.com\"\n\t\t\t\t},\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The URL to use for email verification callback\",\n\t\t\t\t\texample: \"https://example.com/callback\",\n\t\t\t\t\tnullable: true\n\t\t\t\t}\n\t\t\t},\n\t\t\trequired: [\"email\"]\n\t\t} } } },\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was sent successfully\",\n\t\t\t\t\t\texample: true\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"400\": {\n\t\t\t\tdescription: \"Bad Request\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Error message\",\n\t\t\t\t\t\texample: \"Verification email isn't enabled\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst { email } = ctx.body;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\t\tif (!user) {\n\t\t\tawait createEmailVerificationToken(ctx.context.secret, email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\treturn ctx.json({ status: true });\n\t\t}\n\t\tawait sendVerificationEmailFn(ctx, user.user);\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (session?.user.email !== email) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_MISMATCH });\n\tif (session?.user.emailVerified) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_ALREADY_VERIFIED });\n\tawait sendVerificationEmailFn(ctx, session.user);\n\treturn ctx.json({ status: true });\n});\nconst verifyEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-email\", {\n\tmethod: \"GET\",\n\toperationId: \"verifyEmail\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to verify the email\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify the email of the user\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The token to verify the email\",\n\t\t\trequired: true,\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The URL to redirect to after email verification\",\n\t\t\trequired: false,\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was verified successfully\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tfunction redirectOnError(error) {\n\t\tif (ctx.query.callbackURL) {\n\t\t\tif (ctx.query.callbackURL.includes(\"?\")) throw ctx.redirect(`${ctx.query.callbackURL}&error=${error}`);\n\t\t\tthrow ctx.redirect(`${ctx.query.callbackURL}?error=${error}`);\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: error });\n\t}\n\tconst { token } = ctx.query;\n\tlet jwt;\n\ttry {\n\t\tjwt = await (0,jose__WEBPACK_IMPORTED_MODULE_10__.jwtVerify)(token, new TextEncoder().encode(ctx.context.secret), { algorithms: [\"HS256\"] });\n\t} catch (e) {\n\t\tif (e instanceof jose_errors__WEBPACK_IMPORTED_MODULE_11__.JWTExpired) return redirectOnError(\"token_expired\");\n\t\treturn redirectOnError(\"invalid_token\");\n\t}\n\tconst parsed = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email(),\n\t\tupdateTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\trequestType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}).parse(jwt.payload);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(parsed.email);\n\tif (!user) return redirectOnError(\"user_not_found\");\n\tif (parsed.updateTo) {\n\t\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (session && session.user.email !== parsed.email) return redirectOnError(\"unauthorized\");\n\t\tswitch (parsed.requestType) {\n\t\t\tcase \"change-email-confirmation\": {\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.email, parsed.updateTo, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`;\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...user.user,\n\t\t\t\t\t\temail: parsed.updateTo\n\t\t\t\t\t},\n\t\t\t\t\turl,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t}\n\t\t\tcase \"change-email-verification\": {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: true\n\t\t\t\t});\n\t\t\t\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser$1, ctx.request);\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: false\n\t\t\t\t});\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.updateTo);\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: updatedUser$1,\n\t\t\t\t\turl: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tif (user.user.emailVerified) {\n\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tuser: null\n\t\t});\n\t}\n\tif (ctx.context.options.emailVerification?.beforeEmailVerification) await ctx.context.options.emailVerification.beforeEmailVerification(user.user, ctx.request);\n\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\tconst updatedUser = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, { emailVerified: true });\n\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser, ctx.request);\n\tif (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n\t\tconst currentSession = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (!currentSession || currentSession.user.email !== parsed.email) {\n\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to create session\" });\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\tsession,\n\t\t\t\tuser: {\n\t\t\t\t\t...user.user,\n\t\t\t\t\temailVerified: true\n\t\t\t\t}\n\t\t\t});\n\t\t} else await (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\tsession: currentSession.session,\n\t\t\tuser: {\n\t\t\t\t...currentSession.user,\n\t\t\t\temailVerified: true\n\t\t\t}\n\t\t});\n\t}\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tuser: null\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=email-verification.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9lbWFpbC12ZXJpZmljYXRpb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDUTtBQUM1QjtBQUNhO0FBQ1k7QUFDVDtBQUNTO0FBQ3BCO0FBQ2Q7QUFDa0M7QUFDMUI7QUFDUTs7QUFFekM7QUFDQTtBQUNBLGNBQWMsd0RBQU87QUFDckI7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsNkNBQTZDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQkFBb0Isc0JBQXNCLE1BQU0sZUFBZSxZQUFZO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsOEJBQThCLHlFQUFrQjtBQUNoRDtBQUNBO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLFNBQVMsc0NBQU8sVUFBVSw0REFBNEQ7QUFDdEYsZUFBZSx1Q0FBUSxVQUFVLCtEQUErRDtBQUNoRyxFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsV0FBVyxzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQiw2Q0FBNkM7QUFDbkY7QUFDQSxTQUFTLFFBQVE7QUFDakIsdUJBQXVCLCtEQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixjQUFjO0FBQ25DO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBLDhDQUE4QyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsaUJBQWlCO0FBQ2xILDRDQUE0QyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IseUJBQXlCO0FBQ3hIO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELG9CQUFvQix5RUFBa0I7QUFDdEM7QUFDQTtBQUNBLFFBQVEsdUNBQVE7QUFDaEIsU0FBUyx1Q0FBUSxVQUFVLDhDQUE4QztBQUN6RSxlQUFlLHVDQUFRLFVBQVUsZ0VBQWdFO0FBQ2pHLEVBQUU7QUFDRixPQUFPLDBFQUFXO0FBQ2xCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSCxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxrRUFBa0Usc0JBQXNCLFNBQVMsTUFBTTtBQUN2Ryx5QkFBeUIsc0JBQXNCLFNBQVMsTUFBTTtBQUM5RDtBQUNBLFlBQVksaURBQVEsbUJBQW1CLGdCQUFnQjtBQUN2RDtBQUNBLFNBQVMsUUFBUTtBQUNqQjtBQUNBO0FBQ0EsY0FBYyxnREFBUyx3REFBd0QsdUJBQXVCO0FBQ3RHLEdBQUc7QUFDSCxtQkFBbUIsb0RBQVU7QUFDN0I7QUFDQTtBQUNBLGdCQUFnQix1Q0FBUTtBQUN4QixTQUFTLHNDQUFPO0FBQ2hCLFlBQVksdUNBQVE7QUFDcEIsZUFBZSx1Q0FBUTtBQUN2QixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtEQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSwrSkFBK0osMENBQTBDO0FBQ3pNO0FBQ0EsbUJBQW1CLG9CQUFvQixzQkFBc0IsU0FBUyxlQUFlLGtCQUFrQjtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0JBQXNCLGNBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFVBQVUsb0VBQWdCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtEQUFlO0FBQzFCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFRLDRCQUE0QixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsb0JBQW9CLHNCQUFzQixTQUFTLGVBQWUsa0JBQWtCO0FBQ2pHO0FBQ0EsS0FBSztBQUNMLFVBQVUsb0VBQWdCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtEQUFlO0FBQzFCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixxQkFBcUI7QUFDOUc7QUFDQTtBQUNBLCtCQUErQiwrREFBaUI7QUFDaEQ7QUFDQTtBQUNBLDJCQUEyQixpREFBUSw0QkFBNEIscUNBQXFDO0FBQ3BHLFNBQVMsb0VBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSSxXQUFXLG9FQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNxRztBQUNyRyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcZW1haWwtdmVyaWZpY2F0aW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgb3JpZ2luQ2hlY2sgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IFwiLi4vbWlkZGxld2FyZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzaWduSldUIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCB9IGZyb20gXCIuL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgSldURXhwaXJlZCB9IGZyb20gXCJqb3NlL2Vycm9yc1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLnRzXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKHNlY3JldCwgZW1haWwsIHVwZGF0ZVRvLCBleHBpcmVzSW4gPSAzNjAwLCBleHRyYVBheWxvYWQpIHtcblx0cmV0dXJuIGF3YWl0IHNpZ25KV1Qoe1xuXHRcdGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdHVwZGF0ZVRvLFxuXHRcdC4uLmV4dHJhUGF5bG9hZFxuXHR9LCBzZWNyZXQsIGV4cGlyZXNJbik7XG59XG4vKipcbiogQSBmdW5jdGlvbiB0byBzZW5kIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIHRoZSB1c2VyXG4qL1xuYXN5bmMgZnVuY3Rpb24gc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4oY3R4LCB1c2VyKSB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWQuXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHVzZXIuZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0Y29uc3QgY2FsbGJhY2tVUkwgPSBjdHguYm9keS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChjdHguYm9keS5jYWxsYmFja1VSTCkgOiBlbmNvZGVVUklDb21wb25lbnQoXCIvXCIpO1xuXHRjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHR1c2VyLFxuXHRcdHVybCxcblx0XHR0b2tlblxuXHR9LCBjdHgucmVxdWVzdCkpO1xufVxuY29uc3Qgc2VuZFZlcmlmaWNhdGlvbkVtYWlsID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NlbmQtdmVyaWZpY2F0aW9uLWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2VuZFZlcmlmaWNhdGlvbkVtYWlsXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRlbWFpbDogei5lbWFpbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgdG8gc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGVtYWlsIHRvXCIgfSksXG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gdXNlIGZvciBlbWFpbCB2ZXJpZmljYXRpb24gY2FsbGJhY2tcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwic2VuZFZlcmlmaWNhdGlvbkVtYWlsXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2VuZCBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byB0aGUgdXNlclwiLFxuXHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIHRvIHNlbmQgdGhlIHZlcmlmaWNhdGlvbiBlbWFpbCB0b1wiLFxuXHRcdFx0XHRcdGV4YW1wbGU6IFwidXNlckBleGFtcGxlLmNvbVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNhbGxiYWNrVVJMOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCIsXG5cdFx0XHRcdFx0ZXhhbXBsZTogXCJodHRwczovL2V4YW1wbGUuY29tL2NhbGxiYWNrXCIsXG5cdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHJlcXVpcmVkOiBbXCJlbWFpbFwiXVxuXHRcdH0gfSB9IH0sXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgZW1haWwgd2FzIHNlbnQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdFx0XHRleGFtcGxlOiB0cnVlXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0XCI0MDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJCYWQgUmVxdWVzdFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiRXJyb3IgbWVzc2FnZVwiLFxuXHRcdFx0XHRcdFx0ZXhhbXBsZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZC5cIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgeyBlbWFpbCB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHtcblx0XHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCk7XG5cdFx0aWYgKCF1c2VyKSB7XG5cdFx0XHRhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHR9XG5cdFx0YXdhaXQgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4oY3R4LCB1c2VyLnVzZXIpO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0fVxuXHRpZiAoc2Vzc2lvbj8udXNlci5lbWFpbCAhPT0gZW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9NSVNNQVRDSCB9KTtcblx0aWYgKHNlc3Npb24/LnVzZXIuZW1haWxWZXJpZmllZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX0FMUkVBRFlfVkVSSUZJRUQgfSk7XG5cdGF3YWl0IHNlbmRWZXJpZmljYXRpb25FbWFpbEZuKGN0eCwgc2Vzc2lvbi51c2VyKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5jb25zdCB2ZXJpZnlFbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi92ZXJpZnktZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG9wZXJhdGlvbklkOiBcInZlcmlmeUVtYWlsXCIsXG5cdHF1ZXJ5OiB6Lm9iamVjdCh7XG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byB2ZXJpZnkgdGhlIGVtYWlsXCIgfSksXG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgZW1haWwgdmVyaWZpY2F0aW9uXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0dXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgdGhlIGVtYWlsIG9mIHRoZSB1c2VyXCIsXG5cdFx0cGFyYW1ldGVyczogW3tcblx0XHRcdG5hbWU6IFwidG9rZW5cIixcblx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gdmVyaWZ5IHRoZSBlbWFpbFwiLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0fSwge1xuXHRcdFx0bmFtZTogXCJjYWxsYmFja1VSTFwiLFxuXHRcdFx0aW46IFwicXVlcnlcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgZW1haWwgdmVyaWZpY2F0aW9uXCIsXG5cdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0fV0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN0YXR1czoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGVtYWlsIHdhcyB2ZXJpZmllZCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIiwgXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRmdW5jdGlvbiByZWRpcmVjdE9uRXJyb3IoZXJyb3IpIHtcblx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB7XG5cdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMLmluY2x1ZGVzKFwiP1wiKSkgdGhyb3cgY3R4LnJlZGlyZWN0KGAke2N0eC5xdWVyeS5jYWxsYmFja1VSTH0mZXJyb3I9JHtlcnJvcn1gKTtcblx0XHRcdHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9P2Vycm9yPSR7ZXJyb3J9YCk7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IGVycm9yIH0pO1xuXHR9XG5cdGNvbnN0IHsgdG9rZW4gfSA9IGN0eC5xdWVyeTtcblx0bGV0IGp3dDtcblx0dHJ5IHtcblx0XHRqd3QgPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShjdHguY29udGV4dC5zZWNyZXQpLCB7IGFsZ29yaXRobXM6IFtcIkhTMjU2XCJdIH0pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKGUgaW5zdGFuY2VvZiBKV1RFeHBpcmVkKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidG9rZW5fZXhwaXJlZFwiKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiaW52YWxpZF90b2tlblwiKTtcblx0fVxuXHRjb25zdCBwYXJzZWQgPSB6Lm9iamVjdCh7XG5cdFx0ZW1haWw6IHouZW1haWwoKSxcblx0XHR1cGRhdGVUbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdHJlcXVlc3RUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0fSkucGFyc2Uoand0LnBheWxvYWQpO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChwYXJzZWQuZW1haWwpO1xuXHRpZiAoIXVzZXIpIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1c2VyX25vdF9mb3VuZFwiKTtcblx0aWYgKHBhcnNlZC51cGRhdGVUbykge1xuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRcdGlmIChzZXNzaW9uICYmIHNlc3Npb24udXNlci5lbWFpbCAhPT0gcGFyc2VkLmVtYWlsKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hdXRob3JpemVkXCIpO1xuXHRcdHN3aXRjaCAocGFyc2VkLnJlcXVlc3RUeXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhbmdlLWVtYWlsLWNvbmZpcm1hdGlvblwiOiB7XG5cdFx0XHRcdGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHBhcnNlZC5lbWFpbCwgcGFyc2VkLnVwZGF0ZVRvLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4sIHsgcmVxdWVzdFR5cGU6IFwiY2hhbmdlLWVtYWlsLXZlcmlmaWNhdGlvblwiIH0pO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVDYWxsYmFja1VSTCA9IGN0eC5xdWVyeS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0XHRcdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7bmV3VG9rZW59JmNhbGxiYWNrVVJMPSR7dXBkYXRlQ2FsbGJhY2tVUkx9YDtcblx0XHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0Li4udXNlci51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUb1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dXJsLFxuXHRcdFx0XHRcdHRva2VuOiBuZXdUb2tlblxuXHRcdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImNoYW5nZS1lbWFpbC12ZXJpZmljYXRpb25cIjoge1xuXHRcdFx0XHRsZXQgYWN0aXZlU2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0XHRcdGlmICghYWN0aXZlU2Vzc2lvbikge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRcdFx0XHRcdGlmICghbmV3U2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0XHRcdFx0YWN0aXZlU2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IG5ld1Nlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiB1c2VyLnVzZXJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLm9uRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBjdHgucmVxdWVzdCk7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRVc2VyJDEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsLCB7XG5cdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKHVwZGF0ZWRVc2VyJDEsIGN0eC5yZXF1ZXN0KTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uOiBhY3RpdmVTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0Li4uYWN0aXZlU2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHRydWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyJDEpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZGVmYXVsdDoge1xuXHRcdFx0XHRsZXQgYWN0aXZlU2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0XHRcdGlmICghYWN0aXZlU2Vzc2lvbikge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRcdFx0XHRcdGlmICghbmV3U2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0XHRcdFx0YWN0aXZlU2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IG5ld1Nlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiB1c2VyLnVzZXJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRVc2VyJDEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsLCB7XG5cdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgbmV3VG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgcGFyc2VkLnVwZGF0ZVRvKTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlQ2FsbGJhY2tVUkwgPSBjdHgucXVlcnkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSA6IGVuY29kZVVSSUNvbXBvbmVudChcIi9cIik7XG5cdFx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHRcdHVzZXI6IHVwZGF0ZWRVc2VyJDEsXG5cdFx0XHRcdFx0dXJsOiBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHtuZXdUb2tlbn0mY2FsbGJhY2tVUkw9JHt1cGRhdGVDYWxsYmFja1VSTH1gLFxuXHRcdFx0XHRcdHRva2VuOiBuZXdUb2tlblxuXHRcdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRcdHNlc3Npb246IGFjdGl2ZVNlc3Npb24uc2Vzc2lvbixcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHQuLi5hY3RpdmVTZXNzaW9uLnVzZXIsXG5cdFx0XHRcdFx0XHRlbWFpbDogcGFyc2VkLnVwZGF0ZVRvLFxuXHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyJDEpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRpZiAodXNlci51c2VyLmVtYWlsVmVyaWZpZWQpIHtcblx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0dXNlcjogbnVsbFxuXHRcdH0pO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5iZWZvcmVFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5iZWZvcmVFbWFpbFZlcmlmaWNhdGlvbih1c2VyLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/Lm9uRW1haWxWZXJpZmljYXRpb24pIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbih1c2VyLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLmFmdGVyRW1haWxWZXJpZmljYXRpb24odXBkYXRlZFVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmF1dG9TaWduSW5BZnRlclZlcmlmaWNhdGlvbikge1xuXHRcdGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0XHRpZiAoIWN1cnJlbnRTZXNzaW9uIHx8IGN1cnJlbnRTZXNzaW9uLnVzZXIuZW1haWwgIT09IHBhcnNlZC5lbWFpbCkge1xuXHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIudXNlci5pZCk7XG5cdFx0XHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uXCIgfSk7XG5cdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0Li4udXNlci51c2VyLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHRydWVcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRzZXNzaW9uOiBjdXJyZW50U2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0dXNlcjoge1xuXHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3RhdHVzOiB0cnVlLFxuXHRcdHVzZXI6IG51bGxcblx0fSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCB2ZXJpZnlFbWFpbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1haWwtdmVyaWZpY2F0aW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   error: () => (/* binding */ error)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/api/routes/error.ts\nfunction sanitize(input) {\n\treturn input.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g, \"&amp;\");\n}\nconst html = (options, code = \"Unknown\", description = null) => {\n\tconst custom = options.onAPIError?.customizeDefaultErrorPage;\n\treturn `<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Error</title>\n    <style>\n      * {\n        box-sizing: border-box;\n      }\n      body {\n        font-family: ${custom?.font?.defaultFamily || \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\"};\n        background: ${custom?.colors?.background || \"var(--background)\"};\n        color: var(--foreground);\n        margin: 0;\n      }\n      :root,\n      :host {\n        --spacing: 0.25rem;\n        --container-md: 28rem;\n        --text-sm: ${custom?.size?.textSm || \"0.875rem\"};\n        --text-sm--line-height: calc(1.25 / 0.875);\n        --text-2xl: ${custom?.size?.text2xl || \"1.5rem\"};\n        --text-2xl--line-height: calc(2 / 1.5);\n        --text-4xl: ${custom?.size?.text4xl || \"2.25rem\"};\n        --text-4xl--line-height: calc(2.5 / 2.25);\n        --text-6xl: ${custom?.size?.text6xl || \"3rem\"};\n        --text-6xl--line-height: 1;\n        --font-weight-medium: 500;\n        --font-weight-semibold: 600;\n        --font-weight-bold: 700;\n        --default-transition-duration: 150ms;\n        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n        --radius: ${custom?.size?.radiusSm || \"0.625rem\"};\n        --default-mono-font-family: ${custom?.font?.monoFamily || \"var(--font-geist-mono)\"};\n        --primary: ${custom?.colors?.primary || \"black\"};\n        --primary-foreground: ${custom?.colors?.primaryForeground || \"white\"};\n        --background: ${custom?.colors?.background || \"white\"};\n        --foreground: ${custom?.colors?.foreground || \"oklch(0.271 0 0)\"};\n        --border: ${custom?.colors?.border || \"oklch(0.89 0 0)\"};\n        --destructive: ${custom?.colors?.destructive || \"oklch(0.55 0.15 25.723)\"};\n        --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.545 0 0)\"};\n        --corner-border: ${custom?.colors?.cornerBorder || \"#404040\"};\n      }\n\n      button, .btn {\n        cursor: pointer;\n        background: none;\n        border: none;\n        color: inherit;\n        font: inherit;\n        transition: all var(--default-transition-duration)\n          var(--default-transition-timing-function);\n      }\n      button:hover, .btn:hover {\n        opacity: 0.8;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        :root,\n        :host {\n          --primary: ${custom?.colors?.primary || \"white\"};\n          --primary-foreground: ${custom?.colors?.primaryForeground || \"black\"};\n          --background: ${custom?.colors?.background || \"oklch(0.15 0 0)\"};\n          --foreground: ${custom?.colors?.foreground || \"oklch(0.98 0 0)\"};\n          --border: ${custom?.colors?.border || \"oklch(0.27 0 0)\"};\n          --destructive: ${custom?.colors?.destructive || \"oklch(0.65 0.15 25.723)\"};\n          --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.65 0 0)\"};\n          --corner-border: ${custom?.colors?.cornerBorder || \"#a0a0a0\"};\n        }\n      }\n      @media (max-width: 640px) {\n        :root, :host {\n          --text-6xl: 2.5rem;\n          --text-2xl: 1.25rem;\n          --text-sm: 0.8125rem;\n        }\n      }\n      @media (max-width: 480px) {\n        :root, :host {\n          --text-6xl: 2rem;\n          --text-2xl: 1.125rem;\n        }\n      }\n    </style>\n  </head>\n  <body style=\"width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;\">\n    <div\n        style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            gap: 1.5rem;\n            position: relative;\n            width: 100%;\n            min-height: 100vh;\n            padding: 1rem;\n        \"\n        >\n${custom?.disableBackgroundGrid ? \"\" : `\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          background-image: linear-gradient(to right, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px),\n            linear-gradient(to bottom, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px);\n          background-size: 40px 40px;\n          opacity: 0.6;\n          pointer-events: none;\n          width: 100vw;\n          height: 100vh;\n        \"\n      ></div>\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: ${custom?.colors?.background || \"var(--background)\"};\n          mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          pointer-events: none;\n        \"\n      ></div>\n`}\n\n<div\n  style=\"\n    position: relative;\n    z-index: 10;\n    border: 2px solid var(--border);\n    background: ${custom?.colors?.cardBackground || \"var(--background)\"};\n    padding: 1.5rem;\n    max-width: 42rem;\n    width: 100%;\n  \"\n>\n    ${custom?.disableCornerDecorations ? \"\" : `\n        <!-- Corner decorations -->\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>\n  \n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>`}\n\n        <div style=\"text-align: center; margin-bottom: 1.5rem;\">\n          <div style=\"margin-bottom: 1.5rem;\">\n            <div\n              style=\"\n                display: inline-block;\n                border: 2px solid ${custom?.disableTitleBorder ? \"transparent\" : custom?.colors?.titleBorder || \"var(--destructive)\"};\n                padding: 0.375rem 1rem;\n              \"\n            >\n              <h1\n                style=\"\n                  font-size: var(--text-6xl);\n                  font-weight: var(--font-weight-semibold);\n                  color: ${custom?.colors?.titleColor || \"var(--foreground)\"};\n                  letter-spacing: -0.02em;\n                  margin: 0;\n                \"\n              >\n                ERROR\n              </h1>\n            </div>\n            <div\n              style=\"\n                height: 2px;\n                background-color: var(--border);\n                width: calc(100% + 3rem);\n                margin-left: -1.5rem;\n                margin-top: 1.5rem;\n              \"\n            ></div>\n          </div>\n\n          <h2\n            style=\"\n              font-size: var(--text-2xl);\n              font-weight: var(--font-weight-semibold);\n              color: var(--foreground);\n              margin: 0 0 1rem;\n            \"\n          >\n            Something went wrong\n          </h2>\n\n          <div\n            style=\"\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n                border: 2px solid var(--border);\n                background-color: var(--muted);\n                padding: 0.375rem 0.75rem;\n                margin: 0 0 1rem;\n                flex-wrap: wrap;\n                justify-content: center;\n            \"\n            >\n            <span\n                style=\"\n                font-size: 0.75rem;\n                color: var(--muted-foreground);\n                font-weight: var(--font-weight-semibold);\n                \"\n            >\n                CODE:\n            </span>\n            <span\n                style=\"\n                font-size: var(--text-sm);\n                font-family: var(--default-mono-font-family, monospace);\n                color: var(--foreground);\n                word-break: break-all;\n                \"\n            >\n                ${sanitize(code)}\n            </span>\n            </div>\n\n          <p\n            style=\"\n              color: var(--muted-foreground);\n              max-width: 28rem;\n              margin: 0 auto;\n              font-size: var(--text-sm);\n              line-height: 1.5;\n              text-wrap: pretty;\n            \"\n          >\n            ${!description ? `We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/reference/errors/${encodeURIComponent(code)}' target='_blank' rel=\"noopener noreferrer\" style='color: var(--foreground); text-decoration: underline;'>here</a>.` : description}\n          </p>\n        </div>\n\n        <div\n          style=\"\n            display: flex;\n            gap: 0.75rem;\n            margin-top: 1.5rem;\n            justify-content: center;\n            flex-wrap: wrap;\n          \"\n        >\n          <a\n            href=\"/\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: var(--primary);\n                color: var(--primary-foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Go Home\n            </div>\n          </a>\n          <a\n            href=\"https://better-auth.com/docs/reference/errors/${encodeURIComponent(code)}?askai=${encodeURIComponent(`What does the error code ${code} mean?`)}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: transparent;\n                color: var(--foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Ask AI\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>`;\n};\nconst error = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthEndpoint)(\"/error\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Displays an error page\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"text/html\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The HTML content of the error page\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst url = new URL(c.request?.url || \"\");\n\tconst unsanitizedCode = url.searchParams.get(\"error\") || \"UNKNOWN\";\n\tconst unsanitizedDescription = url.searchParams.get(\"error_description\") || null;\n\tconst safeCode = /^[\\'A-Za-z0-9_-]+$/.test(unsanitizedCode || \"\") ? unsanitizedCode : \"UNKNOWN\";\n\tconst safeDescription = unsanitizedDescription ? sanitize(unsanitizedDescription) : null;\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.set(\"error\", safeCode);\n\tif (unsanitizedDescription) queryParams.set(\"error_description\", unsanitizedDescription);\n\tconst options = c.context.options;\n\tconst errorURL = options.onAPIError?.errorURL;\n\tif (errorURL) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `${errorURL}${errorURL.includes(\"?\") ? \"&\" : \"?\"}${queryParams.toString()}` }\n\t});\n\tif (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.isProduction && !options.onAPIError?.customizeDefaultErrorPage) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `/?${queryParams.toString()}` }\n\t});\n\treturn new Response(html(c.context.options, safeCode, safeDescription), { headers: { \"Content-Type\": \"text/html\" } });\n});\n\n//#endregion\n\n//# sourceMappingURL=error.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9lcnJvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE4RDtBQUNUO0FBQ007O0FBRTNEO0FBQ0E7QUFDQSxpQ0FBaUMsc0JBQXNCLHdCQUF3Qix1QkFBdUIsb0JBQW9CLElBQUksSUFBSSxNQUFNLEtBQUssZ0JBQWdCLFNBQVMsV0FBVztBQUNqTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsc0NBQXNDO0FBQ3RDLHFCQUFxQjtBQUNyQixnQ0FBZ0M7QUFDaEMsd0JBQXdCO0FBQ3hCLHdCQUF3QjtBQUN4QixvQkFBb0I7QUFDcEIseUJBQXlCO0FBQ3pCLDhCQUE4QjtBQUM5QiwyQkFBMkI7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QixrQ0FBa0M7QUFDbEMsMEJBQTBCO0FBQzFCLDBCQUEwQjtBQUMxQixzQkFBc0I7QUFDdEIsMkJBQTJCO0FBQzNCLGdDQUFnQztBQUNoQyw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtQkFBbUIsb0JBQW9CLGlCQUFpQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCw4Q0FBOEM7QUFDdEcseUNBQXlDLDhDQUE4QztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDLHNCQUFzQjtBQUM5RCw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLCtOQUErTix5QkFBeUIsNkVBQTZFLDJCQUEyQjtBQUM5VztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSx5QkFBeUIsU0FBUywrQ0FBK0MsTUFBTSxRQUFRO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHlFQUFrQjtBQUNoQztBQUNBO0FBQ0EsS0FBSyxtRUFBYTtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGFBQWEsU0FBUyxFQUFFLG1DQUFtQyxFQUFFLHVCQUF1QjtBQUNqRyxFQUFFO0FBQ0YsS0FBSywrREFBWTtBQUNqQjtBQUNBLGFBQWEsZUFBZSx1QkFBdUI7QUFDbkQsRUFBRTtBQUNGLDJFQUEyRSxXQUFXLCtCQUErQjtBQUNySCxDQUFDOztBQUVEO0FBQ2lCO0FBQ2pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxlcnJvci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuLi8uLi91dGlscy9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9kdWN0aW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvZXJyb3IudHNcbmZ1bmN0aW9uIHNhbml0aXplKGlucHV0KSB7XG5cdHJldHVybiBpbnB1dC5yZXBsYWNlKC88L2csIFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKS5yZXBsYWNlKC9cIi9nLCBcIiZxdW90O1wiKS5yZXBsYWNlKC8nL2csIFwiJiMzOTtcIikucmVwbGFjZSgvJig/IWFtcDt8bHQ7fGd0O3xxdW90O3wjMzk7fCN4WzAtOWEtZkEtRl0rO3wjWzAtOV0rOykvZywgXCImYW1wO1wiKTtcbn1cbmNvbnN0IGh0bWwgPSAob3B0aW9ucywgY29kZSA9IFwiVW5rbm93blwiLCBkZXNjcmlwdGlvbiA9IG51bGwpID0+IHtcblx0Y29uc3QgY3VzdG9tID0gb3B0aW9ucy5vbkFQSUVycm9yPy5jdXN0b21pemVEZWZhdWx0RXJyb3JQYWdlO1xuXHRyZXR1cm4gYDwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG4gIDxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiIC8+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIiAvPlxuICAgIDx0aXRsZT5FcnJvcjwvdGl0bGU+XG4gICAgPHN0eWxlPlxuICAgICAgKiB7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICB9XG4gICAgICBib2R5IHtcbiAgICAgICAgZm9udC1mYW1pbHk6ICR7Y3VzdG9tPy5mb250Py5kZWZhdWx0RmFtaWx5IHx8IFwiLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmXCJ9O1xuICAgICAgICBiYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5iYWNrZ3JvdW5kIHx8IFwidmFyKC0tYmFja2dyb3VuZClcIn07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuICAgICAgOnJvb3QsXG4gICAgICA6aG9zdCB7XG4gICAgICAgIC0tc3BhY2luZzogMC4yNXJlbTtcbiAgICAgICAgLS1jb250YWluZXItbWQ6IDI4cmVtO1xuICAgICAgICAtLXRleHQtc206ICR7Y3VzdG9tPy5zaXplPy50ZXh0U20gfHwgXCIwLjg3NXJlbVwifTtcbiAgICAgICAgLS10ZXh0LXNtLS1saW5lLWhlaWdodDogY2FsYygxLjI1IC8gMC44NzUpO1xuICAgICAgICAtLXRleHQtMnhsOiAke2N1c3RvbT8uc2l6ZT8udGV4dDJ4bCB8fCBcIjEuNXJlbVwifTtcbiAgICAgICAgLS10ZXh0LTJ4bC0tbGluZS1oZWlnaHQ6IGNhbGMoMiAvIDEuNSk7XG4gICAgICAgIC0tdGV4dC00eGw6ICR7Y3VzdG9tPy5zaXplPy50ZXh0NHhsIHx8IFwiMi4yNXJlbVwifTtcbiAgICAgICAgLS10ZXh0LTR4bC0tbGluZS1oZWlnaHQ6IGNhbGMoMi41IC8gMi4yNSk7XG4gICAgICAgIC0tdGV4dC02eGw6ICR7Y3VzdG9tPy5zaXplPy50ZXh0NnhsIHx8IFwiM3JlbVwifTtcbiAgICAgICAgLS10ZXh0LTZ4bC0tbGluZS1oZWlnaHQ6IDE7XG4gICAgICAgIC0tZm9udC13ZWlnaHQtbWVkaXVtOiA1MDA7XG4gICAgICAgIC0tZm9udC13ZWlnaHQtc2VtaWJvbGQ6IDYwMDtcbiAgICAgICAgLS1mb250LXdlaWdodC1ib2xkOiA3MDA7XG4gICAgICAgIC0tZGVmYXVsdC10cmFuc2l0aW9uLWR1cmF0aW9uOiAxNTBtcztcbiAgICAgICAgLS1kZWZhdWx0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO1xuICAgICAgICAtLXJhZGl1czogJHtjdXN0b20/LnNpemU/LnJhZGl1c1NtIHx8IFwiMC42MjVyZW1cIn07XG4gICAgICAgIC0tZGVmYXVsdC1tb25vLWZvbnQtZmFtaWx5OiAke2N1c3RvbT8uZm9udD8ubW9ub0ZhbWlseSB8fCBcInZhcigtLWZvbnQtZ2Vpc3QtbW9ubylcIn07XG4gICAgICAgIC0tcHJpbWFyeTogJHtjdXN0b20/LmNvbG9ycz8ucHJpbWFyeSB8fCBcImJsYWNrXCJ9O1xuICAgICAgICAtLXByaW1hcnktZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8ucHJpbWFyeUZvcmVncm91bmQgfHwgXCJ3aGl0ZVwifTtcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5iYWNrZ3JvdW5kIHx8IFwid2hpdGVcIn07XG4gICAgICAgIC0tZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uZm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuMjcxIDAgMClcIn07XG4gICAgICAgIC0tYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5ib3JkZXIgfHwgXCJva2xjaCgwLjg5IDAgMClcIn07XG4gICAgICAgIC0tZGVzdHJ1Y3RpdmU6ICR7Y3VzdG9tPy5jb2xvcnM/LmRlc3RydWN0aXZlIHx8IFwib2tsY2goMC41NSAwLjE1IDI1LjcyMylcIn07XG4gICAgICAgIC0tbXV0ZWQtZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8ubXV0ZWRGb3JlZ3JvdW5kIHx8IFwib2tsY2goMC41NDUgMCAwKVwifTtcbiAgICAgICAgLS1jb3JuZXItYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5jb3JuZXJCb3JkZXIgfHwgXCIjNDA0MDQwXCJ9O1xuICAgICAgfVxuXG4gICAgICBidXR0b24sIC5idG4ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgY29sb3I6IGluaGVyaXQ7XG4gICAgICAgIGZvbnQ6IGluaGVyaXQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCB2YXIoLS1kZWZhdWx0LXRyYW5zaXRpb24tZHVyYXRpb24pXG4gICAgICAgICAgdmFyKC0tZGVmYXVsdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbik7XG4gICAgICB9XG4gICAgICBidXR0b246aG92ZXIsIC5idG46aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAwLjg7XG4gICAgICB9XG5cbiAgICAgIEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcbiAgICAgICAgOnJvb3QsXG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICAtLXByaW1hcnk6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnkgfHwgXCJ3aGl0ZVwifTtcbiAgICAgICAgICAtLXByaW1hcnktZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8ucHJpbWFyeUZvcmVncm91bmQgfHwgXCJibGFja1wifTtcbiAgICAgICAgICAtLWJhY2tncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmJhY2tncm91bmQgfHwgXCJva2xjaCgwLjE1IDAgMClcIn07XG4gICAgICAgICAgLS1mb3JlZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5mb3JlZ3JvdW5kIHx8IFwib2tsY2goMC45OCAwIDApXCJ9O1xuICAgICAgICAgIC0tYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5ib3JkZXIgfHwgXCJva2xjaCgwLjI3IDAgMClcIn07XG4gICAgICAgICAgLS1kZXN0cnVjdGl2ZTogJHtjdXN0b20/LmNvbG9ycz8uZGVzdHJ1Y3RpdmUgfHwgXCJva2xjaCgwLjY1IDAuMTUgMjUuNzIzKVwifTtcbiAgICAgICAgICAtLW11dGVkLWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/Lm11dGVkRm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuNjUgMCAwKVwifTtcbiAgICAgICAgICAtLWNvcm5lci1ib3JkZXI6ICR7Y3VzdG9tPy5jb2xvcnM/LmNvcm5lckJvcmRlciB8fCBcIiNhMGEwYTBcIn07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2NDBweCkge1xuICAgICAgICA6cm9vdCwgOmhvc3Qge1xuICAgICAgICAgIC0tdGV4dC02eGw6IDIuNXJlbTtcbiAgICAgICAgICAtLXRleHQtMnhsOiAxLjI1cmVtO1xuICAgICAgICAgIC0tdGV4dC1zbTogMC44MTI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgICAgOnJvb3QsIDpob3N0IHtcbiAgICAgICAgICAtLXRleHQtNnhsOiAycmVtO1xuICAgICAgICAgIC0tdGV4dC0yeGw6IDEuMTI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgPC9zdHlsZT5cbiAgPC9oZWFkPlxuICA8Ym9keSBzdHlsZT1cIndpZHRoOiAxMDB2dzsgbWluLWhlaWdodDogMTAwdmg7IG92ZXJmbG93LXg6IGhpZGRlbjsgb3ZlcmZsb3cteTogYXV0bztcIj5cbiAgICA8ZGl2XG4gICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGdhcDogMS41cmVtO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgIFwiXG4gICAgICAgID5cbiR7Y3VzdG9tPy5kaXNhYmxlQmFja2dyb3VuZEdyaWQgPyBcIlwiIDogYFxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBpbnNldDogMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICR7Y3VzdG9tPy5jb2xvcnM/LmdyaWRDb2xvciB8fCBcInZhcigtLWJvcmRlcilcIn0gMXB4LCB0cmFuc3BhcmVudCAxcHgpLFxuICAgICAgICAgICAgbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgJHtjdXN0b20/LmNvbG9ycz8uZ3JpZENvbG9yIHx8IFwidmFyKC0tYm9yZGVyKVwifSAxcHgsIHRyYW5zcGFyZW50IDFweCk7XG4gICAgICAgICAgYmFja2dyb3VuZC1zaXplOiA0MHB4IDQwcHg7XG4gICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgIHdpZHRoOiAxMDB2dztcbiAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICBcIlxuICAgICAgPjwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBpbnNldDogMDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uYmFja2dyb3VuZCB8fCBcInZhcigtLWJhY2tncm91bmQpXCJ9O1xuICAgICAgICAgIG1hc2staW1hZ2U6IHJhZGlhbC1ncmFkaWVudChlbGxpcHNlIGF0IGNlbnRlciwgdHJhbnNwYXJlbnQgMjAlLCBibGFjayk7XG4gICAgICAgICAgLXdlYmtpdC1tYXNrLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBjZW50ZXIsIHRyYW5zcGFyZW50IDIwJSwgYmxhY2spO1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICBcIlxuICAgICAgPjwvZGl2PlxuYH1cblxuPGRpdlxuICBzdHlsZT1cIlxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB6LWluZGV4OiAxMDtcbiAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO1xuICAgIGJhY2tncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmNhcmRCYWNrZ3JvdW5kIHx8IFwidmFyKC0tYmFja2dyb3VuZClcIn07XG4gICAgcGFkZGluZzogMS41cmVtO1xuICAgIG1heC13aWR0aDogNDJyZW07XG4gICAgd2lkdGg6IDEwMCU7XG4gIFwiXG4+XG4gICAgJHtjdXN0b20/LmRpc2FibGVDb3JuZXJEZWNvcmF0aW9ucyA/IFwiXCIgOiBgXG4gICAgICAgIDwhLS0gQ29ybmVyIGRlY29yYXRpb25zIC0tPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogLTJweDtcbiAgICAgICAgICAgIGxlZnQ6IC0ycHg7XG4gICAgICAgICAgICB3aWR0aDogMnJlbTtcbiAgICAgICAgICAgIGhlaWdodDogMnJlbTtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogLTJweDtcbiAgICAgICAgICAgIHJpZ2h0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICBcIlxuICAgICAgICA+PC9kaXY+XG4gIFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogLTJweDtcbiAgICAgICAgICAgIGxlZnQ6IC0ycHg7XG4gICAgICAgICAgICB3aWR0aDogMnJlbTtcbiAgICAgICAgICAgIGhlaWdodDogMnJlbTtcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogLTJweDtcbiAgICAgICAgICAgIHJpZ2h0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICBcIlxuICAgICAgICA+PC9kaXY+YH1cblxuICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxLjVyZW07XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDEuNXJlbTtcIj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgJHtjdXN0b20/LmRpc2FibGVUaXRsZUJvcmRlciA/IFwidHJhbnNwYXJlbnRcIiA6IGN1c3RvbT8uY29sb3JzPy50aXRsZUJvcmRlciB8fCBcInZhcigtLWRlc3RydWN0aXZlKVwifTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbSAxcmVtO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8aDFcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LTZ4bCk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaWJvbGQpO1xuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7Y3VzdG9tPy5jb2xvcnM/LnRpdGxlQ29sb3IgfHwgXCJ2YXIoLS1mb3JlZ3JvdW5kKVwifTtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAtMC4wMmVtO1xuICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBFUlJPUlxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAycHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYm9yZGVyKTtcbiAgICAgICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlICsgM3JlbSk7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IC0xLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMS41cmVtO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGgyXG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICBmb250LXNpemU6IHZhcigtLXRleHQtMnhsKTtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtcbiAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICBtYXJnaW46IDAgMCAxcmVtO1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICBTb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgICAgIDwvaDI+XG5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tdXRlZCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4zNzVyZW0gMC43NXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAxcmVtO1xuICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1tdXRlZC1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaWJvbGQpO1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ09ERTpcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IHZhcigtLXRleHQtc20pO1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1kZWZhdWx0LW1vbm8tZm9udC1mYW1pbHksIG1vbm9zcGFjZSk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7c2FuaXRpemUoY29kZSl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxwXG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgIG1heC13aWR0aDogMjhyZW07XG4gICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgICBmb250LXNpemU6IHZhcigtLXRleHQtc20pO1xuICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICAgICAgICB0ZXh0LXdyYXA6IHByZXR0eTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgJHshZGVzY3JpcHRpb24gPyBgV2UgZW5jb3VudGVyZWQgYW4gdW5leHBlY3RlZCBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBvciByZXR1cm4gdG8gdGhlIGhvbWUgcGFnZS4gSWYgeW91J3JlIGEgZGV2ZWxvcGVyLCB5b3UgY2FuIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IgPGEgaHJlZj0naHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9yZWZlcmVuY2UvZXJyb3JzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvZGUpfScgdGFyZ2V0PSdfYmxhbmsnIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIiBzdHlsZT0nY29sb3I6IHZhcigtLWZvcmVncm91bmQpOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsnPmhlcmU8L2E+LmAgOiBkZXNjcmlwdGlvbn1cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGdhcDogMC43NXJlbTtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEuNXJlbTtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICAgIFwiXG4gICAgICAgID5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgaHJlZj1cIi9cIlxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgIGNsYXNzPVwiYnRuXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgR28gSG9tZVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9hPlxuICAgICAgICAgIDxhXG4gICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9yZWZlcmVuY2UvZXJyb3JzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvZGUpfT9hc2thaT0ke2VuY29kZVVSSUNvbXBvbmVudChgV2hhdCBkb2VzIHRoZSBlcnJvciBjb2RlICR7Y29kZX0gbWVhbj9gKX1cIlxuICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICBjbGFzcz1cImJ0blwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEFzayBBSVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2JvZHk+XG48L2h0bWw+YDtcbn07XG5jb25zdCBlcnJvciA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9lcnJvclwiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0bWV0YWRhdGE6IHtcblx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkRpc3BsYXlzIGFuIGVycm9yIHBhZ2VcIixcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcInRleHQvaHRtbFwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIEhUTUwgY29udGVudCBvZiB0aGUgZXJyb3IgcGFnZVwiXG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjKSA9PiB7XG5cdGNvbnN0IHVybCA9IG5ldyBVUkwoYy5yZXF1ZXN0Py51cmwgfHwgXCJcIik7XG5cdGNvbnN0IHVuc2FuaXRpemVkQ29kZSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiZXJyb3JcIikgfHwgXCJVTktOT1dOXCI7XG5cdGNvbnN0IHVuc2FuaXRpemVkRGVzY3JpcHRpb24gPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yX2Rlc2NyaXB0aW9uXCIpIHx8IG51bGw7XG5cdGNvbnN0IHNhZmVDb2RlID0gL15bXFwnQS1aYS16MC05Xy1dKyQvLnRlc3QodW5zYW5pdGl6ZWRDb2RlIHx8IFwiXCIpID8gdW5zYW5pdGl6ZWRDb2RlIDogXCJVTktOT1dOXCI7XG5cdGNvbnN0IHNhZmVEZXNjcmlwdGlvbiA9IHVuc2FuaXRpemVkRGVzY3JpcHRpb24gPyBzYW5pdGl6ZSh1bnNhbml0aXplZERlc2NyaXB0aW9uKSA6IG51bGw7XG5cdGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXHRxdWVyeVBhcmFtcy5zZXQoXCJlcnJvclwiLCBzYWZlQ29kZSk7XG5cdGlmICh1bnNhbml0aXplZERlc2NyaXB0aW9uKSBxdWVyeVBhcmFtcy5zZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiLCB1bnNhbml0aXplZERlc2NyaXB0aW9uKTtcblx0Y29uc3Qgb3B0aW9ucyA9IGMuY29udGV4dC5vcHRpb25zO1xuXHRjb25zdCBlcnJvclVSTCA9IG9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkw7XG5cdGlmIChlcnJvclVSTCkgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7XG5cdFx0c3RhdHVzOiAzMDIsXG5cdFx0aGVhZGVyczogeyBMb2NhdGlvbjogYCR7ZXJyb3JVUkx9JHtlcnJvclVSTC5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wifSR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gIH1cblx0fSk7XG5cdGlmIChpc1Byb2R1Y3Rpb24gJiYgIW9wdGlvbnMub25BUElFcnJvcj8uY3VzdG9taXplRGVmYXVsdEVycm9yUGFnZSkgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7XG5cdFx0c3RhdHVzOiAzMDIsXG5cdFx0aGVhZGVyczogeyBMb2NhdGlvbjogYC8/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAgfVxuXHR9KTtcblx0cmV0dXJuIG5ldyBSZXNwb25zZShodG1sKGMuY29udGV4dC5vcHRpb25zLCBzYWZlQ29kZSwgc2FmZURlc2NyaXB0aW9uKSwgeyBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwidGV4dC9odG1sXCIgfSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGVycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _account_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./account.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _callback_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./callback.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./email-verification.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _error_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./error.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _ok_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ok.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./password.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _sign_in_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./sign-in.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _sign_out_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sign-out.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _sign_up_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sign-up.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _update_user_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./update-user.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXFPO0FBQ3ZHO0FBQy9FO0FBQ3NGO0FBQ2pHO0FBQ047QUFDcUY7QUFDekQ7QUFDakI7QUFDRztBQUM2RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldFNlc3Npb24sIGdldFNlc3Npb25Gcm9tQ3R4LCBsaXN0U2Vzc2lvbnMsIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJldm9rZU90aGVyU2Vzc2lvbnMsIHJldm9rZVNlc3Npb24sIHJldm9rZVNlc3Npb25zLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgYWNjb3VudEluZm8sIGdldEFjY2Vzc1Rva2VuLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFVzZXJBY2NvdW50cywgcmVmcmVzaFRva2VuLCB1bmxpbmtBY2NvdW50IH0gZnJvbSBcIi4vYWNjb3VudC5tanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrT0F1dGggfSBmcm9tIFwiLi9jYWxsYmFjay5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4sIHNlbmRWZXJpZmljYXRpb25FbWFpbCwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4sIHZlcmlmeUVtYWlsIH0gZnJvbSBcIi4vZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgZXJyb3IgfSBmcm9tIFwiLi9lcnJvci5tanNcIjtcbmltcG9ydCB7IG9rIH0gZnJvbSBcIi4vb2subWpzXCI7XG5pbXBvcnQgeyByZXF1ZXN0UGFzc3dvcmRSZXNldCwgcmVxdWVzdFBhc3N3b3JkUmVzZXRDYWxsYmFjaywgcmVzZXRQYXNzd29yZCwgdmVyaWZ5UGFzc3dvcmQgfSBmcm9tIFwiLi9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwgfSBmcm9tIFwiLi9zaWduLWluLm1qc1wiO1xuaW1wb3J0IHsgc2lnbk91dCB9IGZyb20gXCIuL3NpZ24tb3V0Lm1qc1wiO1xuaW1wb3J0IHsgc2lnblVwRW1haWwgfSBmcm9tIFwiLi9zaWduLXVwLm1qc1wiO1xuaW1wb3J0IHsgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIHNldFBhc3N3b3JkLCB1cGRhdGVVc2VyIH0gZnJvbSBcIi4vdXBkYXRlLXVzZXIubWpzXCI7XG5cbmV4cG9ydCB7ICB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ok: () => (/* binding */ ok)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/ok.ts\nconst ok = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/ok\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Check if the API is working\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API is working\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { ok: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the API is working\"\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"ok\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn ctx.json({ ok: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=ok.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9vay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThEO0FBQ0g7O0FBRTNEO0FBQ0EsV0FBVyx5RUFBa0I7QUFDN0I7QUFDQTtBQUNBLEtBQUssbUVBQWE7QUFDbEI7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQkFBbUIsVUFBVTtBQUM3QixDQUFDOztBQUVEO0FBQ2M7QUFDZCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcb2subWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL29rLnRzXG5jb25zdCBvayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9va1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0bWV0YWRhdGE6IHtcblx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkNoZWNrIGlmIHRoZSBBUEkgaXMgd29ya2luZ1wiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQVBJIGlzIHdvcmtpbmdcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgb2s6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBBUEkgaXMgd29ya2luZ1wiXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJva1wiXVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHJldHVybiBjdHguanNvbih7IG9rOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb2sgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9rLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requestPasswordReset: () => (/* binding */ requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* binding */ requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/password.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/password.ts\nfunction redirectError(ctx, callbackURL, query) {\n\tconst url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n\tconst url = new URL(callbackURL, ctx.baseURL);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nconst requestPasswordReset = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email address of the user to send a password reset email to\" }),\n\t\tredirectTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"requestPasswordReset\",\n\t\tdescription: \"Send a password reset email to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tstatus: { type: \"boolean\" },\n\t\t\t\t\tmessage: { type: \"string\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n\t\tctx.context.logger.error(\"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Reset password isn't enabled\" });\n\t}\n\tconst { email, redirectTo } = ctx.body;\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\t/**\n\t\t* We simulate the verification token generation and the database lookup\n\t\t* to mitigate timing attacks.\n\t\t*/\n\t\t(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\t\tawait ctx.context.internalAdapter.findVerificationValue(\"dummy-verification-token\");\n\t\tctx.context.logger.error(\"Reset Password: User not found\", { email });\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t\t});\n\t}\n\tconst expiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || 3600 * 1, \"sec\");\n\tconst verificationToken = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: user.user.id,\n\t\tidentifier: `reset-password:${verificationToken}`,\n\t\texpiresAt\n\t});\n\tconst callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n\tconst url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailAndPassword.sendResetPassword({\n\t\tuser: user.user,\n\t\turl,\n\t\ttoken: verificationToken\n\t}, ctx.request));\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t});\n});\nconst requestPasswordResetCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password/:token\", {\n\tmethod: \"GET\",\n\toperationId: \"forgetPasswordCallback\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ callbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password\" }) }),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPasswordCallback\",\n\t\tdescription: \"Redirects the user to the callback URL with the token\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"path\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The token to reset the password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The URL to redirect the user to reset their password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { token: { type: \"string\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { token } = ctx.params;\n\tconst { callbackURL } = ctx.query;\n\tif (!token || !callbackURL) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`reset-password:${token}`);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tthrow ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n});\nconst resetPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password\", {\n\tmethod: \"POST\",\n\toperationId: \"resetPassword\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ token: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional() }).optional(),\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The new password to set\" }),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to reset the password\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPassword\",\n\t\tdescription: \"Reset the password for a user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token || ctx.query?.token;\n\tif (!token) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst { newPassword } = ctx.body;\n\tconst minLength = ctx.context.password?.config.minPasswordLength;\n\tconst maxLength = ctx.context.password?.config.maxPasswordLength;\n\tif (newPassword.length < minLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tif (newPassword.length > maxLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst id = `reset-password:${token}`;\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(id);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst userId = verification.value;\n\tconst hashedPassword = await ctx.context.password.hash(newPassword);\n\tif (!(await ctx.context.internalAdapter.findAccounts(userId)).find((ac) => ac.providerId === \"credential\")) await ctx.context.internalAdapter.createAccount({\n\t\tuserId,\n\t\tproviderId: \"credential\",\n\t\tpassword: hashedPassword,\n\t\taccountId: userId\n\t});\n\telse await ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\tif (ctx.context.options.emailAndPassword?.onPasswordReset) {\n\t\tconst user = await ctx.context.internalAdapter.findUserById(userId);\n\t\tif (user) await ctx.context.options.emailAndPassword.onPasswordReset({ user }, ctx.request);\n\t}\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(userId);\n\treturn ctx.json({ status: true });\n});\nconst verifyPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-password\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({ password: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The password to verify\" }) }),\n\tmetadata: {\n\t\tscope: \"server\",\n\t\topenapi: {\n\t\t\toperationId: \"verifyPassword\",\n\t\t\tdescription: \"Verify the current user's password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t},\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { password } = ctx.body;\n\tconst session = ctx.context.session;\n\tif (!await (0,_utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__.validatePassword)(ctx, {\n\t\tpassword,\n\t\tuserId: session.user.id\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9wYXNzd29yZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDZTtBQUM1QjtBQUN5QjtBQUNSO0FBQ1M7QUFDRDtBQUNwQjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBO0FBQ0EsMEVBQTBFLFlBQVk7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5RUFBa0I7QUFDL0M7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsU0FBUyxzQ0FBTyxVQUFVLGdGQUFnRjtBQUMxRyxjQUFjLHVDQUFRLFVBQVUsb1FBQW9RO0FBQ3BTLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQyxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLHlDQUF5QztBQUMvRTtBQUNBLFNBQVMsb0JBQW9CO0FBQzdCLHlFQUF5RSx1QkFBdUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsNERBQVU7QUFDWjtBQUNBLCtEQUErRCxPQUFPO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG1CQUFtQix3REFBTztBQUMxQiwyQkFBMkIsNERBQVU7QUFDckM7QUFDQTtBQUNBLGdDQUFnQyxrQkFBa0I7QUFDbEQ7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxnQkFBZ0Isb0JBQW9CLGtCQUFrQixrQkFBa0IsZUFBZSxZQUFZO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QscUNBQXFDLHlFQUFrQjtBQUN2RDtBQUNBO0FBQ0EsUUFBUSx1Q0FBUSxHQUFHLGFBQWEsdUNBQVEsVUFBVSxxRUFBcUUsR0FBRztBQUMxSCxPQUFPLDBFQUFXO0FBQ2xCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNILGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFNBQVM7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsUUFBUTtBQUNqQixTQUFTLGNBQWM7QUFDdkIsMEZBQTBGLHdCQUF3QjtBQUNsSCxnR0FBZ0csTUFBTTtBQUN0Ryx3SUFBd0ksd0JBQXdCO0FBQ2hLLGlFQUFpRSxPQUFPO0FBQ3hFLENBQUM7QUFDRCxzQkFBc0IseUVBQWtCO0FBQ3hDO0FBQ0E7QUFDQSxRQUFRLHVDQUFRLEdBQUcsT0FBTyx1Q0FBUSxlQUFlO0FBQ2pELE9BQU8sdUNBQVE7QUFDZixlQUFlLHVDQUFRLFVBQVUsd0NBQXdDO0FBQ3pFLFNBQVMsdUNBQVEsVUFBVSxnREFBZ0Q7QUFDM0UsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsVUFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSx1QkFBdUIsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUMxRixTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBLCtDQUErQyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3ZILCtDQUErQyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ3RILDhCQUE4QixNQUFNO0FBQ3BDO0FBQ0EscUZBQXFGLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDeEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsTUFBTTtBQUMvRTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELHVCQUF1Qix5RUFBa0I7QUFDekM7QUFDQSxPQUFPLHVDQUFRLEdBQUcsVUFBVSx1Q0FBUSxVQUFVLHVDQUF1QyxHQUFHO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixPQUFPLG9FQUEwQjtBQUNqQyxDQUFDO0FBQ0QsU0FBUyxXQUFXO0FBQ3BCO0FBQ0EsWUFBWSxxRUFBZ0I7QUFDNUI7QUFDQTtBQUNBLEVBQUUsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsbUJBQW1CO0FBQ3JGLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7O0FBRUQ7QUFDNkY7QUFDN0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXHBhc3N3b3JkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBvcmlnaW5DaGVjayB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgXCIuLi9taWRkbGV3YXJlcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlSWQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZVBhc3N3b3JkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvcGFzc3dvcmQudHNcbmZ1bmN0aW9uIHJlZGlyZWN0RXJyb3IoY3R4LCBjYWxsYmFja1VSTCwgcXVlcnkpIHtcblx0Y29uc3QgdXJsID0gY2FsbGJhY2tVUkwgPyBuZXcgVVJMKGNhbGxiYWNrVVJMLCBjdHguYmFzZVVSTCkgOiBuZXcgVVJMKGAke2N0eC5iYXNlVVJMfS9lcnJvcmApO1xuXHRpZiAocXVlcnkpIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChbaywgdl0pID0+IHVybC5zZWFyY2hQYXJhbXMuc2V0KGssIHYpKTtcblx0cmV0dXJuIHVybC5ocmVmO1xufVxuZnVuY3Rpb24gcmVkaXJlY3RDYWxsYmFjayhjdHgsIGNhbGxiYWNrVVJMLCBxdWVyeSkge1xuXHRjb25zdCB1cmwgPSBuZXcgVVJMKGNhbGxiYWNrVVJMLCBjdHguYmFzZVVSTCk7XG5cdGlmIChxdWVyeSkgT2JqZWN0LmVudHJpZXMocXVlcnkpLmZvckVhY2goKFtrLCB2XSkgPT4gdXJsLnNlYXJjaFBhcmFtcy5zZXQoaywgdikpO1xuXHRyZXR1cm4gdXJsLmhyZWY7XG59XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXF1ZXN0LXBhc3N3b3JkLXJlc2V0XCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LmVtYWlsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyIHRvIHNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0b1wiIH0pLFxuXHRcdHJlZGlyZWN0VG86IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmQuIElmIHRoZSB0b2tlbiBpc24ndCB2YWxpZCBvciBleHBpcmVkLCBpdCdsbCBiZSByZWRpcmVjdGVkIHdpdGggYSBxdWVyeSBwYXJhbWV0ZXIgYD9lcnJvcj1JTlZBTElEX1RPS0VOYC4gSWYgdGhlIHRva2VuIGlzIHZhbGlkLCBpdCdsbCBiZSByZWRpcmVjdGVkIHdpdGggYSBxdWVyeSBwYXJhbWV0ZXIgYD90b2tlbj1WQUxJRF9UT0tFTlwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXF1ZXN0UGFzc3dvcmRSZXNldFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0byB0aGUgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0sXG5cdFx0XHRcdFx0bWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5zZW5kUmVzZXRQYXNzd29yZCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlJlc2V0IHBhc3N3b3JkIGlzbid0IGVuYWJsZWQuUGxlYXNlIHBhc3MgYW4gZW1haWxBbmRQYXNzd29yZC5zZW5kUmVzZXRQYXNzd29yZCBmdW5jdGlvbiBpbiB5b3VyIGF1dGggY29uZmlnIVwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiUmVzZXQgcGFzc3dvcmQgaXNuJ3QgZW5hYmxlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IHsgZW1haWwsIHJlZGlyZWN0VG8gfSA9IGN0eC5ib2R5O1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCwgeyBpbmNsdWRlQWNjb3VudHM6IHRydWUgfSk7XG5cdGlmICghdXNlcikge1xuXHRcdC8qKlxuXHRcdCogV2Ugc2ltdWxhdGUgdGhlIHZlcmlmaWNhdGlvbiB0b2tlbiBnZW5lcmF0aW9uIGFuZCB0aGUgZGF0YWJhc2UgbG9va3VwXG5cdFx0KiB0byBtaXRpZ2F0ZSB0aW1pbmcgYXR0YWNrcy5cblx0XHQqL1xuXHRcdGdlbmVyYXRlSWQoMjQpO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoXCJkdW1teS12ZXJpZmljYXRpb24tdG9rZW5cIik7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUmVzZXQgUGFzc3dvcmQ6IFVzZXIgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiSWYgdGhpcyBlbWFpbCBleGlzdHMgaW4gb3VyIHN5c3RlbSwgY2hlY2sgeW91ciBlbWFpbCBmb3IgdGhlIHJlc2V0IGxpbmtcIlxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IGV4cGlyZXNBdCA9IGdldERhdGUoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlc2V0UGFzc3dvcmRUb2tlbkV4cGlyZXNJbiB8fCAzNjAwICogMSwgXCJzZWNcIik7XG5cdGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gZ2VuZXJhdGVJZCgyNCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0dmFsdWU6IHVzZXIudXNlci5pZCxcblx0XHRpZGVudGlmaWVyOiBgcmVzZXQtcGFzc3dvcmQ6JHt2ZXJpZmljYXRpb25Ub2tlbn1gLFxuXHRcdGV4cGlyZXNBdFxuXHR9KTtcblx0Y29uc3QgY2FsbGJhY2tVUkwgPSByZWRpcmVjdFRvID8gZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0VG8pIDogXCJcIjtcblx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vcmVzZXQtcGFzc3dvcmQvJHt2ZXJpZmljYXRpb25Ub2tlbn0/Y2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5zZW5kUmVzZXRQYXNzd29yZCh7XG5cdFx0dXNlcjogdXNlci51c2VyLFxuXHRcdHVybCxcblx0XHR0b2tlbjogdmVyaWZpY2F0aW9uVG9rZW5cblx0fSwgY3R4LnJlcXVlc3QpKTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzdGF0dXM6IHRydWUsXG5cdFx0bWVzc2FnZTogXCJJZiB0aGlzIGVtYWlsIGV4aXN0cyBpbiBvdXIgc3lzdGVtLCBjaGVjayB5b3VyIGVtYWlsIGZvciB0aGUgcmVzZXQgbGlua1wiXG5cdH0pO1xufSk7XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Jlc2V0LXBhc3N3b3JkLzp0b2tlblwiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0b3BlcmF0aW9uSWQ6IFwiZm9yZ2V0UGFzc3dvcmRDYWxsYmFja1wiLFxuXHRxdWVyeTogei5vYmplY3QoeyBjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0aGUgdXNlciB0byByZXNldCB0aGVpciBwYXNzd29yZFwiIH0pIH0pLFxuXHR1c2U6IFtvcmlnaW5DaGVjaygoY3R4KSA9PiBjdHgucXVlcnkuY2FsbGJhY2tVUkwpXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInJlc2V0UGFzc3dvcmRDYWxsYmFja1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlJlZGlyZWN0cyB0aGUgdXNlciB0byB0aGUgY2FsbGJhY2sgVVJMIHdpdGggdGhlIHRva2VuXCIsXG5cdFx0cGFyYW1ldGVyczogW3tcblx0XHRcdG5hbWU6IFwidG9rZW5cIixcblx0XHRcdGluOiBcInBhdGhcIixcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHJlc2V0IHRoZSBwYXNzd29yZFwiLFxuXHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdH0sIHtcblx0XHRcdG5hbWU6IFwiY2FsbGJhY2tVUkxcIixcblx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmRcIixcblx0XHRcdHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHR9XSxcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyB0b2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgdG9rZW4gfSA9IGN0eC5wYXJhbXM7XG5cdGNvbnN0IHsgY2FsbGJhY2tVUkwgfSA9IGN0eC5xdWVyeTtcblx0aWYgKCF0b2tlbiB8fCAhY2FsbGJhY2tVUkwpIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yKGN0eC5jb250ZXh0LCBjYWxsYmFja1VSTCwgeyBlcnJvcjogXCJJTlZBTElEX1RPS0VOXCIgfSkpO1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGByZXNldC1wYXNzd29yZDoke3Rva2VufWApO1xuXHRpZiAoIXZlcmlmaWNhdGlvbiB8fCB2ZXJpZmljYXRpb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yKGN0eC5jb250ZXh0LCBjYWxsYmFja1VSTCwgeyBlcnJvcjogXCJJTlZBTElEX1RPS0VOXCIgfSkpO1xuXHR0aHJvdyBjdHgucmVkaXJlY3QocmVkaXJlY3RDYWxsYmFjayhjdHguY29udGV4dCwgY2FsbGJhY2tVUkwsIHsgdG9rZW4gfSkpO1xufSk7XG5jb25zdCByZXNldFBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Jlc2V0LXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwicmVzZXRQYXNzd29yZFwiLFxuXHRxdWVyeTogei5vYmplY3QoeyB0b2tlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pLm9wdGlvbmFsKCksXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRuZXdQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcIiB9KSxcblx0XHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHJlc2V0IHRoZSBwYXNzd29yZFwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXNldFBhc3N3b3JkXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiUmVzZXQgdGhlIHBhc3N3b3JkIGZvciBhIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgdG9rZW4gPSBjdHguYm9keS50b2tlbiB8fCBjdHgucXVlcnk/LnRva2VuO1xuXHRpZiAoIXRva2VuKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0Y29uc3QgeyBuZXdQYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IG1pbkxlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkPy5jb25maWcubWluUGFzc3dvcmRMZW5ndGg7XG5cdGNvbnN0IG1heExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkPy5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPCBtaW5MZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0Y29uc3QgaWQgPSBgcmVzZXQtcGFzc3dvcmQ6JHt0b2tlbn1gO1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGlkKTtcblx0aWYgKCF2ZXJpZmljYXRpb24gfHwgdmVyaWZpY2F0aW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0Y29uc3QgdXNlcklkID0gdmVyaWZpY2F0aW9uLnZhbHVlO1xuXHRjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuXHRpZiAoIShhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHVzZXJJZCkpLmZpbmQoKGFjKSA9PiBhYy5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIikpIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHR1c2VySWQsXG5cdFx0cHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG5cdFx0cGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuXHRcdGFjY291bnRJZDogdXNlcklkXG5cdH0pO1xuXHRlbHNlIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVQYXNzd29yZCh1c2VySWQsIGhhc2hlZFBhc3N3b3JkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvbi5pZCk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/Lm9uUGFzc3dvcmRSZXNldCkge1xuXHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKHVzZXJJZCk7XG5cdFx0aWYgKHVzZXIpIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5vblBhc3N3b3JkUmVzZXQoeyB1c2VyIH0sIGN0eC5yZXF1ZXN0KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5yZXZva2VTZXNzaW9uc09uUGFzc3dvcmRSZXNldCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHVzZXJJZCk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdmVyaWZ5LXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3QoeyBwYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHBhc3N3b3JkIHRvIHZlcmlmeVwiIH0pIH0pLFxuXHRtZXRhZGF0YToge1xuXHRcdHNjb3BlOiBcInNlcnZlclwiLFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInZlcmlmeVBhc3N3b3JkXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgdGhlIGN1cnJlbnQgdXNlcidzIHBhc3N3b3JkXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKCFhd2FpdCB2YWxpZGF0ZVBhc3N3b3JkKGN0eCwge1xuXHRcdHBhc3N3b3JkLFxuXHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   freshSessionMiddleware: () => (/* binding */ freshSessionMiddleware),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionFromCtx: () => (/* binding */ getSessionFromCtx),\n/* harmony export */   listSessions: () => (/* binding */ listSessions),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* binding */ requestOnlySessionMiddleware),\n/* harmony export */   revokeOtherSessions: () => (/* binding */ revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* binding */ revokeSession),\n/* harmony export */   revokeSessions: () => (/* binding */ revokeSessions),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* binding */ sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* binding */ sessionMiddleware)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../db/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/session.ts\nconst getSession = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/get-session\", {\n\tmethod: \"GET\",\n\toperationId: \"getSession\",\n\tquery: _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionQuerySchema,\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"getSession\",\n\t\tdescription: \"Get the current session\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tnullable: true,\n\t\t\t\tproperties: {\n\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"session\", \"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\t\tif (!sessionCookieToken) return null;\n\t\tconst sessionDataCookie = (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getChunkedCookie)(ctx, ctx.context.authCookies.sessionData.name);\n\t\tlet sessionDataPayload = null;\n\t\tif (sessionDataCookie) {\n\t\t\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\t\t\tif (strategy === \"jwe\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecodeJWT)(sessionDataCookie, ctx.context.secret, \"better-auth-session\");\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else if (strategy === \"jwt\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyJWT)(sessionDataCookie, ctx.context.secret);\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__.base64Url.decode(sessionDataCookie)));\n\t\t\t\tif (parsed) if (await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(ctx.context.secret, JSON.stringify({\n\t\t\t\t\t...parsed.session,\n\t\t\t\t\texpiresAt: parsed.expiresAt\n\t\t\t\t}), parsed.signature)) sessionDataPayload = parsed;\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst dontRememberMe = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\t\t/**\n\t\t* If session data is present in the cookie, check if it should be used or refreshed\n\t\t*/\n\t\tif (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n\t\t\tconst session$1 = sessionDataPayload.session;\n\t\t\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\t\t\tlet expectedVersion = \"1\";\n\t\t\tif (versionConfig) {\n\t\t\t\tif (typeof versionConfig === \"string\") expectedVersion = versionConfig;\n\t\t\t\telse if (typeof versionConfig === \"function\") {\n\t\t\t\t\tconst result = versionConfig(session$1.session, session$1.user);\n\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((session$1.version || \"1\") !== expectedVersion) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\telse {\n\t\t\t\tconst cachedSessionExpiresAt = new Date(session$1.session.expiresAt);\n\t\t\t\tif (sessionDataPayload.expiresAt < Date.now() || cachedSessionExpiresAt < /* @__PURE__ */ new Date()) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\telse {\n\t\t\t\t\tconst cookieRefreshCache = ctx.context.sessionConfig.cookieRefreshCache;\n\t\t\t\t\tif (cookieRefreshCache === false) {\n\t\t\t\t\t\tctx.context.session = session$1;\n\t\t\t\t\t\tconst parsedSession$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedUser$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedSession$2,\n\t\t\t\t\t\t\tuser: parsedUser$2\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (sessionDataPayload.expiresAt - Date.now() < cookieRefreshCache.updateAge * 1e3) {\n\t\t\t\t\t\tconst newExpiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.session?.cookieCache?.maxAge || 300, \"sec\");\n\t\t\t\t\t\tconst refreshedSession = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\t\texpiresAt: newExpiresAt\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: session$1.user,\n\t\t\t\t\t\t\tupdatedAt: Date.now()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, refreshedSession, false);\n\t\t\t\t\t\tconst parsedRefreshedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.session,\n\t\t\t\t\t\t\texpiresAt: new Date(refreshedSession.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedRefreshedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t};\n\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n\t\tctx.context.session = session;\n\t\tif (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\tif (session)\n /**\n\t\t\t* if session expired clean up the session\n\t\t\t*/\n\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\treturn ctx.json(null);\n\t\t}\n\t\t/**\n\t\t* We don't need to update the session if the user doesn't want to be remembered\n\t\t* or if the session refresh is disabled\n\t\t*/\n\t\tif (dontRememberMe || ctx.query?.disableRefresh) {\n\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedSession$1,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tconst expiresIn = ctx.context.sessionConfig.expiresIn;\n\t\tconst updateAge = ctx.context.sessionConfig.updateAge;\n\t\tif (session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3 <= Date.now() && (!ctx.query?.disableRefresh || !ctx.context.options.session?.disableSessionRefresh)) {\n\t\t\tconst updatedSession = await ctx.context.internalAdapter.updateSession(session.session.token, {\n\t\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.sessionConfig.expiresIn, \"sec\"),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t});\n\t\t\tif (!updatedSession) {\n\t\t\t\t/**\n\t\t\t\t* Handle case where session update fails (e.g., concurrent deletion)\n\t\t\t\t*/\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\t\treturn ctx.json(null, { status: 401 });\n\t\t\t}\n\t\t\tconst maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setSessionCookie)(ctx, {\n\t\t\t\tsession: updatedSession,\n\t\t\t\tuser: session.user\n\t\t\t}, false, { maxAge });\n\t\t\tconst parsedUpdatedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, updatedSession);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedUpdatedSession,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, session, !!dontRememberMe);\n\t\tconst parsedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\tconst parsedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\treturn ctx.json({\n\t\t\tsession: parsedSession,\n\t\t\tuser: parsedUser\n\t\t});\n\t} catch (error) {\n\t\tctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t}\n});\nconst getSessionFromCtx = async (ctx, config) => {\n\tif (ctx.context.session) return ctx.context.session;\n\tconst session = await getSession()({\n\t\t...ctx,\n\t\tasResponse: false,\n\t\theaders: ctx.headers,\n\t\treturnHeaders: false,\n\t\treturnStatus: false,\n\t\tquery: {\n\t\t\t...config,\n\t\t\t...ctx.query\n\t\t}\n\t}).catch((e) => {\n\t\treturn null;\n\t});\n\tctx.context.session = session;\n\treturn session;\n};\n/**\n* The middleware forces the endpoint to require a valid session.\n*/\nconst sessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session and ignores cookie cache.\n* This should be used for sensitive operations like password changes, account deletion, etc.\n* to ensure that revoked sessions cannot be used even if they're still cached in cookies.\n*/\nconst sensitiveSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx, { disableCookieCache: true });\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware allows you to call the endpoint on the client if session is valid.\n* However, if called on the server, no session is required.\n*/\nconst requestOnlySessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session,\n* as well as making sure the session is fresh before proceeding.\n*\n* Session freshness check will be skipped if the session config's freshAge\n* is set to 0\n*/\nconst freshSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tif (ctx.context.sessionConfig.freshAge === 0) return { session };\n\tconst freshAge = ctx.context.sessionConfig.freshAge;\n\tconst lastUpdated = new Date(session.session.updatedAt || session.session.createdAt).getTime();\n\tif (!(Date.now() - lastUpdated < freshAge * 1e3)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: \"Session is not fresh\" });\n\treturn { session };\n});\n/**\n* user active sessions list\n*/\nconst listSessions = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/list-sessions\", {\n\tmethod: \"GET\",\n\toperationId: \"listUserSessions\",\n\tuse: [sessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserSessions\",\n\t\tdescription: \"List all active sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: { $ref: \"#/components/schemas/Session\" }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst activeSessions = (await ctx.context.internalAdapter.listSessions(ctx.context.session.user.id)).filter((session) => {\n\t\t\treturn session.expiresAt > /* @__PURE__ */ new Date();\n\t\t});\n\t\treturn ctx.json(activeSessions.map((session) => (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session)));\n\t} catch (e) {\n\t\tctx.context.logger.error(e);\n\t\tthrow ctx.error(\"INTERNAL_SERVER_ERROR\");\n\t}\n});\n/**\n* revoke a single session\n*/\nconst revokeSession = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-session\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_14__.object({ token: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The token to revoke\" }) }),\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke a single session\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: { token: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The token to revoke\"\n\t\t\t} },\n\t\t\trequired: [\"token\"]\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the session was revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token;\n\tif ((await ctx.context.internalAdapter.findSession(token))?.session.userId === ctx.context.session.user.id) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(token);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\n/**\n* revoke all user sessions\n*/\nconst revokeSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-sessions\", {\n\tmethod: \"POST\",\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tawait ctx.context.internalAdapter.deleteSessions(ctx.context.session.user.id);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\nconst revokeOtherSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-other-sessions\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tuse: [sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all other sessions for the user except the current one\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all other sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!session.user) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tconst otherSessions = (await ctx.context.internalAdapter.listSessions(session.user.id)).filter((session$1) => {\n\t\treturn session$1.expiresAt > /* @__PURE__ */ new Date();\n\t}).filter((session$1) => session$1.token !== ctx.context.session.session.token);\n\tawait Promise.all(otherSessions.map((session$1) => ctx.context.internalAdapter.deleteSession(session$1.token)));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=session.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9zZXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQzJCO0FBQzlDO0FBQ3lDO0FBQ3JDO0FBQzBEO0FBQ29CO0FBQ25EO0FBQ0g7QUFDakI7QUFDZDtBQUN3RDtBQUMzQjtBQUNIO0FBQ0U7O0FBRXJEO0FBQ0EseUJBQXlCLDBFQUFrQjtBQUMzQztBQUNBO0FBQ0EsUUFBUSw2RUFBcUI7QUFDN0I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQ0FBc0M7QUFDdEQsYUFBYTtBQUNiLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1FQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSyxnRUFBWTtBQUNqQjtBQUNBO0FBQ0EsS0FBSztBQUNMLDBCQUEwQiwwREFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSyxnRUFBWTtBQUNqQjtBQUNBO0FBQ0EsS0FBSztBQUNMLG1CQUFtQixzRUFBYSxDQUFDLDhEQUFNLFFBQVEsaUVBQVM7QUFDeEQsMEJBQTBCLG9FQUFVO0FBQ3BDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLLGdFQUFZO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGdFQUFZO0FBQ25FO0FBQ0E7QUFDQSwwR0FBMEcsZ0VBQVk7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0VBQWtCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLDJCQUEyQiwrREFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrRUFBYztBQUMxQixxQ0FBcUMsa0VBQWtCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLGtDQUFrQywrREFBZTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSw2QkFBNkIsa0VBQWtCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLDBCQUEwQiwrREFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx1RUFBbUI7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtFQUFrQjtBQUM3Qyx3QkFBd0IsK0RBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdEQUFPO0FBQ3RCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx1RUFBbUI7QUFDdkIsNEJBQTRCLGFBQWE7QUFDekM7QUFDQTtBQUNBLFNBQVMsb0VBQWdCO0FBQ3pCO0FBQ0E7QUFDQSxJQUFJLFdBQVcsUUFBUTtBQUN2QixnQ0FBZ0Msa0VBQWtCO0FBQ2xELHdCQUF3QiwrREFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxRQUFRLGtFQUFjO0FBQ3RCLHdCQUF3QixrRUFBa0I7QUFDMUMscUJBQXFCLCtEQUFlO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQSxZQUFZLGlEQUFRLDRCQUE0QixTQUFTLHFFQUFnQix3QkFBd0I7QUFDakc7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw0RUFBb0I7QUFDOUM7QUFDQSxrQ0FBa0MsaURBQVE7QUFDMUMsVUFBVTtBQUNWLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDRFQUFvQjtBQUN2RCxnREFBZ0QsMEJBQTBCO0FBQzFFLGtDQUFrQyxpREFBUTtBQUMxQyxVQUFVO0FBQ1YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDRFQUFvQjtBQUN6RDtBQUNBLGtFQUFrRSxpREFBUTtBQUMxRSxVQUFVO0FBQ1YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDRFQUFvQjtBQUNuRDtBQUNBLGtDQUFrQyxpREFBUTtBQUMxQyx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBLDZEQUE2RCxpREFBUSxnQkFBZ0IsaUNBQWlDO0FBQ3RILFVBQVU7QUFDVixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDBFQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxrREFBa0Qsa0VBQWtCO0FBQ3BFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBFQUFrQjtBQUN4QztBQUNBLE9BQU8sd0NBQVEsR0FBRyxPQUFPLHdDQUFRLFVBQVUsb0NBQW9DLEdBQUc7QUFDbEY7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGlCQUFpQixXQUFXLHNCQUFzQjtBQUNsRDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsU0FBUztBQUNULGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEVBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFlBQVksaURBQVE7QUFDcEI7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0QsNEJBQTRCLDBFQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsOEJBQThCLGlEQUFRO0FBQ3RDO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDOztBQUVEO0FBQ2dOO0FBQ2hOIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxzZXNzaW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNlc3Npb25PdXRwdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IHN5bW1ldHJpY0RlY29kZUpXVCwgdmVyaWZ5SldUIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRDaHVua2VkQ29va2llLCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEgfSBmcm9tIFwiLi4vLi4vY29va2llcy9zZXNzaW9uLXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgZGVsZXRlU2Vzc2lvbkNvb2tpZSwgZXhwaXJlQ29va2llLCBzZXRDb29raWVDYWNoZSwgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50LCBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcbmltcG9ydCB7IGJhc2U2NFVybCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5pbXBvcnQgeyBiaW5hcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2JpbmFyeVwiO1xuaW1wb3J0IHsgY3JlYXRlSE1BQyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaG1hY1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvc2Vzc2lvbi50c1xuY29uc3QgZ2V0U2Vzc2lvbiA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9nZXQtc2Vzc2lvblwiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0b3BlcmF0aW9uSWQ6IFwiZ2V0U2Vzc2lvblwiLFxuXHRxdWVyeTogZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImdldFNlc3Npb25cIixcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgdGhlIGN1cnJlbnQgc2Vzc2lvblwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfSxcblx0XHRcdFx0XHR1c2VyOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInNlc3Npb25cIiwgXCJ1c2VyXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBzZXNzaW9uQ29va2llVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdGlmICghc2Vzc2lvbkNvb2tpZVRva2VuKSByZXR1cm4gbnVsbDtcblx0XHRjb25zdCBzZXNzaW9uRGF0YUNvb2tpZSA9IGdldENodW5rZWRDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lKTtcblx0XHRsZXQgc2Vzc2lvbkRhdGFQYXlsb2FkID0gbnVsbDtcblx0XHRpZiAoc2Vzc2lvbkRhdGFDb29raWUpIHtcblx0XHRcdGNvbnN0IHN0cmF0ZWd5ID0gY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uc3RyYXRlZ3kgfHwgXCJjb21wYWN0XCI7XG5cdFx0XHRpZiAoc3RyYXRlZ3kgPT09IFwiandlXCIpIHtcblx0XHRcdFx0Y29uc3QgcGF5bG9hZCA9IGF3YWl0IHN5bW1ldHJpY0RlY29kZUpXVChzZXNzaW9uRGF0YUNvb2tpZSwgY3R4LmNvbnRleHQuc2VjcmV0LCBcImJldHRlci1hdXRoLXNlc3Npb25cIik7XG5cdFx0XHRcdGlmIChwYXlsb2FkICYmIHBheWxvYWQuc2Vzc2lvbiAmJiBwYXlsb2FkLnVzZXIpIHNlc3Npb25EYXRhUGF5bG9hZCA9IHtcblx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXlsb2FkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiBwYXlsb2FkLnVzZXIsXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHBheWxvYWQudXBkYXRlZEF0LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogcGF5bG9hZC52ZXJzaW9uXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHBheWxvYWQuZXhwID8gcGF5bG9hZC5leHAgKiAxZTMgOiBEYXRlLm5vdygpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc3RyYXRlZ3kgPT09IFwiand0XCIpIHtcblx0XHRcdFx0Y29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeUpXVChzZXNzaW9uRGF0YUNvb2tpZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0XHRcdFx0aWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zZXNzaW9uICYmIHBheWxvYWQudXNlcikgc2Vzc2lvbkRhdGFQYXlsb2FkID0ge1xuXHRcdFx0XHRcdHNlc3Npb246IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHBheWxvYWQuc2Vzc2lvbixcblx0XHRcdFx0XHRcdHVzZXI6IHBheWxvYWQudXNlcixcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogcGF5bG9hZC51cGRhdGVkQXQsXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiBwYXlsb2FkLnZlcnNpb25cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGV4cGlyZXNBdDogcGF5bG9hZC5leHAgPyBwYXlsb2FkLmV4cCAqIDFlMyA6IERhdGUubm93KClcblx0XHRcdFx0fTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0ZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRcdFx0XHRcdHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgcGFyc2VkID0gc2FmZUpTT05QYXJzZShiaW5hcnkuZGVjb2RlKGJhc2U2NFVybC5kZWNvZGUoc2Vzc2lvbkRhdGFDb29raWUpKSk7XG5cdFx0XHRcdGlmIChwYXJzZWQpIGlmIChhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnZlcmlmeShjdHguY29udGV4dC5zZWNyZXQsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHQuLi5wYXJzZWQuc2Vzc2lvbixcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHBhcnNlZC5leHBpcmVzQXRcblx0XHRcdFx0fSksIHBhcnNlZC5zaWduYXR1cmUpKSBzZXNzaW9uRGF0YVBheWxvYWQgPSBwYXJzZWQ7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgZG9udFJlbWVtYmVyTWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdFx0LyoqXG5cdFx0KiBJZiBzZXNzaW9uIGRhdGEgaXMgcHJlc2VudCBpbiB0aGUgY29va2llLCBjaGVjayBpZiBpdCBzaG91bGQgYmUgdXNlZCBvciByZWZyZXNoZWRcblx0XHQqL1xuXHRcdGlmIChzZXNzaW9uRGF0YVBheWxvYWQ/LnNlc3Npb24gJiYgY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uZW5hYmxlZCAmJiAhY3R4LnF1ZXJ5Py5kaXNhYmxlQ29va2llQ2FjaGUpIHtcblx0XHRcdGNvbnN0IHNlc3Npb24kMSA9IHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uO1xuXHRcdFx0Y29uc3QgdmVyc2lvbkNvbmZpZyA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnZlcnNpb247XG5cdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRpZiAodmVyc2lvbkNvbmZpZykge1xuXHRcdFx0XHRpZiAodHlwZW9mIHZlcnNpb25Db25maWcgPT09IFwic3RyaW5nXCIpIGV4cGVjdGVkVmVyc2lvbiA9IHZlcnNpb25Db25maWc7XG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSB2ZXJzaW9uQ29uZmlnKHNlc3Npb24kMS5zZXNzaW9uLCBzZXNzaW9uJDEudXNlcik7XG5cdFx0XHRcdFx0ZXhwZWN0ZWRWZXJzaW9uID0gcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKChzZXNzaW9uJDEudmVyc2lvbiB8fCBcIjFcIikgIT09IGV4cGVjdGVkVmVyc2lvbikgZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGNhY2hlZFNlc3Npb25FeHBpcmVzQXQgPSBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5leHBpcmVzQXQpO1xuXHRcdFx0XHRpZiAoc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdCA8IERhdGUubm93KCkgfHwgY2FjaGVkU2Vzc2lvbkV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSBleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGNvb2tpZVJlZnJlc2hDYWNoZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuY29va2llUmVmcmVzaENhY2hlO1xuXHRcdFx0XHRcdGlmIChjb29raWVSZWZyZXNoQ2FjaGUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbiQxO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkU2Vzc2lvbiQyID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkVXNlciQyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnVzZXIsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnVzZXIuY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQyXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHNlc3Npb25EYXRhUGF5bG9hZC5leHBpcmVzQXQgLSBEYXRlLm5vdygpIDwgY29va2llUmVmcmVzaENhY2hlLnVwZGF0ZUFnZSAqIDFlMykge1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3RXhwaXJlc0F0ID0gZ2V0RGF0ZShjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5tYXhBZ2UgfHwgMzAwLCBcInNlY1wiKTtcblx0XHRcdFx0XHRcdGNvbnN0IHJlZnJlc2hlZFNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHtcblx0XHRcdFx0XHRcdFx0XHQuLi5zZXNzaW9uJDEuc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ld0V4cGlyZXNBdFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1c2VyOiBzZXNzaW9uJDEudXNlcixcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0YXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCByZWZyZXNoZWRTZXNzaW9uLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRSZWZyZXNoZWRTZXNzaW9uID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucmVmcmVzaGVkU2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQpLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZFJlZnJlc2hlZFVzZXIgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0XHQuLi5yZWZyZXNoZWRTZXNzaW9uLnVzZXIsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocmVmcmVzaGVkU2Vzc2lvbi51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocmVmcmVzaGVkU2Vzc2lvbi51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkUmVmcmVzaGVkU2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkUmVmcmVzaGVkVXNlclxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFJlZnJlc2hlZFNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFJlZnJlc2hlZFVzZXJcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBwYXJzZWRTZXNzaW9uJDEgPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLmV4cGlyZXNBdCksXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLnVwZGF0ZWRBdClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWRVc2VyJDEgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnVzZXIsXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjdHguY29udGV4dC5zZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkU2Vzc2lvbiQxLFxuXHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkU2Vzc2lvbiQxLFxuXHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kU2Vzc2lvbihzZXNzaW9uQ29va2llVG9rZW4pO1xuXHRcdGN0eC5jb250ZXh0LnNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdGlmICghc2Vzc2lvbiB8fCBzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRcdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0XHRcdGlmIChzZXNzaW9uKVxuIC8qKlxuXHRcdFx0KiBpZiBzZXNzaW9uIGV4cGlyZWQgY2xlYW4gdXAgdGhlIHNlc3Npb25cblx0XHRcdCovXG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uLnNlc3Npb24udG9rZW4pO1xuXHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdH1cblx0XHQvKipcblx0XHQqIFdlIGRvbid0IG5lZWQgdG8gdXBkYXRlIHRoZSBzZXNzaW9uIGlmIHRoZSB1c2VyIGRvZXNuJ3Qgd2FudCB0byBiZSByZW1lbWJlcmVkXG5cdFx0KiBvciBpZiB0aGUgc2Vzc2lvbiByZWZyZXNoIGlzIGRpc2FibGVkXG5cdFx0Ki9cblx0XHRpZiAoZG9udFJlbWVtYmVyTWUgfHwgY3R4LnF1ZXJ5Py5kaXNhYmxlUmVmcmVzaCkge1xuXHRcdFx0Y29uc3QgcGFyc2VkU2Vzc2lvbiQxID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24uc2Vzc2lvbik7XG5cdFx0XHRjb25zdCBwYXJzZWRVc2VyJDEgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMSxcblx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Y29uc3QgZXhwaXJlc0luID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW47XG5cdFx0Y29uc3QgdXBkYXRlQWdlID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy51cGRhdGVBZ2U7XG5cdFx0aWYgKHNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQudmFsdWVPZigpIC0gZXhwaXJlc0luICogMWUzICsgdXBkYXRlQWdlICogMWUzIDw9IERhdGUubm93KCkgJiYgKCFjdHgucXVlcnk/LmRpc2FibGVSZWZyZXNoIHx8ICFjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmRpc2FibGVTZXNzaW9uUmVmcmVzaCkpIHtcblx0XHRcdGNvbnN0IHVwZGF0ZWRTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCB7XG5cdFx0XHRcdGV4cGlyZXNBdDogZ2V0RGF0ZShjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmV4cGlyZXNJbiwgXCJzZWNcIiksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCF1cGRhdGVkU2Vzc2lvbikge1xuXHRcdFx0XHQvKipcblx0XHRcdFx0KiBIYW5kbGUgY2FzZSB3aGVyZSBzZXNzaW9uIHVwZGF0ZSBmYWlscyAoZS5nLiwgY29uY3VycmVudCBkZWxldGlvbilcblx0XHRcdFx0Ki9cblx0XHRcdFx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCwgeyBzdGF0dXM6IDQwMSB9KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IG1heEFnZSA9ICh1cGRhdGVkU2Vzc2lvbi5leHBpcmVzQXQudmFsdWVPZigpIC0gRGF0ZS5ub3coKSkgLyAxZTM7XG5cdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRzZXNzaW9uOiB1cGRhdGVkU2Vzc2lvbixcblx0XHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyXG5cdFx0XHR9LCBmYWxzZSwgeyBtYXhBZ2UgfSk7XG5cdFx0XHRjb25zdCBwYXJzZWRVcGRhdGVkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1cGRhdGVkU2Vzc2lvbik7XG5cdFx0XHRjb25zdCBwYXJzZWRVc2VyJDEgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlZFVwZGF0ZWRTZXNzaW9uLFxuXHRcdFx0XHR1c2VyOiBwYXJzZWRVc2VyJDFcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRhd2FpdCBzZXRDb29raWVDYWNoZShjdHgsIHNlc3Npb24sICEhZG9udFJlbWVtYmVyTWUpO1xuXHRcdGNvbnN0IHBhcnNlZFNlc3Npb24gPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi5zZXNzaW9uKTtcblx0XHRjb25zdCBwYXJzZWRVc2VyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcik7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24sXG5cdFx0XHR1c2VyOiBwYXJzZWRVc2VyXG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIGVycm9yKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfU0VTU0lPTiB9KTtcblx0fVxufSk7XG5jb25zdCBnZXRTZXNzaW9uRnJvbUN0eCA9IGFzeW5jIChjdHgsIGNvbmZpZykgPT4ge1xuXHRpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbikgcmV0dXJuIGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCkoe1xuXHRcdC4uLmN0eCxcblx0XHRhc1Jlc3BvbnNlOiBmYWxzZSxcblx0XHRoZWFkZXJzOiBjdHguaGVhZGVycyxcblx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZSxcblx0XHRyZXR1cm5TdGF0dXM6IGZhbHNlLFxuXHRcdHF1ZXJ5OiB7XG5cdFx0XHQuLi5jb25maWcsXG5cdFx0XHQuLi5jdHgucXVlcnlcblx0XHR9XG5cdH0pLmNhdGNoKChlKSA9PiB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0pO1xuXHRjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbjtcblx0cmV0dXJuIHNlc3Npb247XG59O1xuLyoqXG4qIFRoZSBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24uXG4qL1xuY29uc3Qgc2Vzc2lvbk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24/LnNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogVGhpcyBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24gYW5kIGlnbm9yZXMgY29va2llIGNhY2hlLlxuKiBUaGlzIHNob3VsZCBiZSB1c2VkIGZvciBzZW5zaXRpdmUgb3BlcmF0aW9ucyBsaWtlIHBhc3N3b3JkIGNoYW5nZXMsIGFjY291bnQgZGVsZXRpb24sIGV0Yy5cbiogdG8gZW5zdXJlIHRoYXQgcmV2b2tlZCBzZXNzaW9ucyBjYW5ub3QgYmUgdXNlZCBldmVuIGlmIHRoZXkncmUgc3RpbGwgY2FjaGVkIGluIGNvb2tpZXMuXG4qL1xuY29uc3Qgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgsIHsgZGlzYWJsZUNvb2tpZUNhY2hlOiB0cnVlIH0pO1xuXHRpZiAoIXNlc3Npb24/LnNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogVGhpcyBtaWRkbGV3YXJlIGFsbG93cyB5b3UgdG8gY2FsbCB0aGUgZW5kcG9pbnQgb24gdGhlIGNsaWVudCBpZiBzZXNzaW9uIGlzIHZhbGlkLlxuKiBIb3dldmVyLCBpZiBjYWxsZWQgb24gdGhlIHNlcnZlciwgbm8gc2Vzc2lvbiBpcyByZXF1aXJlZC5cbiovXG5jb25zdCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uICYmIChjdHgucmVxdWVzdCB8fCBjdHguaGVhZGVycykpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogVGhpcyBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24sXG4qIGFzIHdlbGwgYXMgbWFraW5nIHN1cmUgdGhlIHNlc3Npb24gaXMgZnJlc2ggYmVmb3JlIHByb2NlZWRpbmcuXG4qXG4qIFNlc3Npb24gZnJlc2huZXNzIGNoZWNrIHdpbGwgYmUgc2tpcHBlZCBpZiB0aGUgc2Vzc2lvbiBjb25maWcncyBmcmVzaEFnZVxuKiBpcyBzZXQgdG8gMFxuKi9cbmNvbnN0IGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24/LnNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0aWYgKGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZnJlc2hBZ2UgPT09IDApIHJldHVybiB7IHNlc3Npb24gfTtcblx0Y29uc3QgZnJlc2hBZ2UgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlO1xuXHRjb25zdCBsYXN0VXBkYXRlZCA9IG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbi51cGRhdGVkQXQgfHwgc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuXHRpZiAoIShEYXRlLm5vdygpIC0gbGFzdFVwZGF0ZWQgPCBmcmVzaEFnZSAqIDFlMykpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IFwiU2Vzc2lvbiBpcyBub3QgZnJlc2hcIiB9KTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogdXNlciBhY3RpdmUgc2Vzc2lvbnMgbGlzdFxuKi9cbmNvbnN0IGxpc3RTZXNzaW9ucyA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9saXN0LXNlc3Npb25zXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRvcGVyYXRpb25JZDogXCJsaXN0VXNlclNlc3Npb25zXCIsXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJsaXN0VXNlclNlc3Npb25zXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgYWN0aXZlIHNlc3Npb25zIGZvciB0aGUgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdGl0ZW1zOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiIH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGFjdGl2ZVNlc3Npb25zID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saXN0U2Vzc2lvbnMoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKSkuZmlsdGVyKChzZXNzaW9uKSA9PiB7XG5cdFx0XHRyZXR1cm4gc2Vzc2lvbi5leHBpcmVzQXQgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oYWN0aXZlU2Vzc2lvbnMubWFwKChzZXNzaW9uKSA9PiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbikpKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlKTtcblx0XHR0aHJvdyBjdHguZXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIik7XG5cdH1cbn0pO1xuLyoqXG4qIHJldm9rZSBhIHNpbmdsZSBzZXNzaW9uXG4qL1xuY29uc3QgcmV2b2tlU2Vzc2lvbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXZva2Utc2Vzc2lvblwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHsgdG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXZva2VcIiB9KSB9KSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJldm9rZSBhIHNpbmdsZSBzZXNzaW9uXCIsXG5cdFx0cmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRwcm9wZXJ0aWVzOiB7IHRva2VuOiB7XG5cdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXZva2VcIlxuXHRcdFx0fSB9LFxuXHRcdFx0cmVxdWlyZWQ6IFtcInRva2VuXCJdXG5cdFx0fSB9IH0gfSxcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHNlc3Npb24gd2FzIHJldm9rZWQgc3VjY2Vzc2Z1bGx5XCJcblx0XHRcdFx0fSB9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wic3RhdHVzXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgdG9rZW4gPSBjdHguYm9keS50b2tlbjtcblx0aWYgKChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24odG9rZW4pKT8uc2Vzc2lvbi51c2VySWQgPT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkgdHJ5IHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbih0b2tlbik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlcnJvciA/IGVycm9yLm5hbWUgOiBcIlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuXHR9XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuLyoqXG4qIHJldm9rZSBhbGwgdXNlciBzZXNzaW9uc1xuKi9cbmNvbnN0IHJldm9rZVNlc3Npb25zID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Jldm9rZS1zZXNzaW9uc1wiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZXZva2UgYWxsIHNlc3Npb25zIGZvciB0aGUgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiBhbGwgc2Vzc2lvbnMgd2VyZSByZXZva2VkIHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHRyeSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlcnJvciA/IGVycm9yLm5hbWUgOiBcIlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuXHR9XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgcmV2b2tlT3RoZXJTZXNzaW9ucyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXZva2Utb3RoZXItc2Vzc2lvbnNcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiUmV2b2tlIGFsbCBvdGhlciBzZXNzaW9ucyBmb3IgdGhlIHVzZXIgZXhjZXB0IHRoZSBjdXJyZW50IG9uZVwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiBhbGwgb3RoZXIgc2Vzc2lvbnMgd2VyZSByZXZva2VkIHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoIXNlc3Npb24udXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRjb25zdCBvdGhlclNlc3Npb25zID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saXN0U2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKSkuZmlsdGVyKChzZXNzaW9uJDEpID0+IHtcblx0XHRyZXR1cm4gc2Vzc2lvbiQxLmV4cGlyZXNBdCA+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuXHR9KS5maWx0ZXIoKHNlc3Npb24kMSkgPT4gc2Vzc2lvbiQxLnRva2VuICE9PSBjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24udG9rZW4pO1xuXHRhd2FpdCBQcm9taXNlLmFsbChvdGhlclNlc3Npb25zLm1hcCgoc2Vzc2lvbiQxKSA9PiBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uJDEudG9rZW4pKSk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldFNlc3Npb24sIGdldFNlc3Npb25Gcm9tQ3R4LCBsaXN0U2Vzc2lvbnMsIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJldm9rZU90aGVyU2Vzc2lvbnMsIHJldm9rZVNlc3Npb24sIHJldm9rZVNlc3Npb25zLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signInEmail: () => (/* binding */ signInEmail),\n/* harmony export */   signInSocial: () => (/* binding */ signInSocial)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./email-verification.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-in.ts\nconst socialSignInBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to after the user has signed in\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to if an error happens\" }).optional(),\n\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__.SocialProviderListEnum,\n\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\tidToken: zod__WEBPACK_IMPORTED_MODULE_11__.optional(zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"ID token from the provider\" }),\n\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Nonce used to generate the token\" }).optional(),\n\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Access token from the provider\" }).optional(),\n\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Refresh token from the provider\" }).optional(),\n\t\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_11__.number().meta({ description: \"Expiry date of the token\" }).optional()\n\t})),\n\tscopes: zod__WEBPACK_IMPORTED_MODULE_11__.array(zod__WEBPACK_IMPORTED_MODULE_11__.string()).meta({ description: \"Array of scopes to request from the provider. This will override the default scopes passed.\" }).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\" }).optional(),\n\tloginHint: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The login hint to use for the authorization code request\" }).optional(),\n\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.any()).optional().meta({ description: \"Additional data to be passed through the OAuth flow\" })\n});\nconst signInSocial = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/social\", {\n\tmethod: \"POST\",\n\toperationId: \"socialSignIn\",\n\tbody: socialSignInBodySchema,\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\tdescription: \"Sign in with a social provider\",\n\t\t\toperationId: \"socialSignIn\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttoken: { type: \"string\" },\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: { type: \"string\" },\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst userInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!userInfo || !userInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tif (!userInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tconst data = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__.handleOAuthUserInfo)(c, {\n\t\t\tuserInfo: {\n\t\t\t\t...userInfo.user,\n\t\t\t\temail: userInfo.user.email,\n\t\t\t\tid: String(userInfo.user.id),\n\t\t\t\tname: userInfo.user.name || \"\",\n\t\t\t\timage: userInfo.user.image,\n\t\t\t\temailVerified: userInfo.user.emailVerified || false\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: String(userInfo.user.id),\n\t\t\t\taccessToken: c.body.idToken.accessToken\n\t\t\t},\n\t\t\tcallbackURL: c.body.callbackURL,\n\t\t\tdisableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n\t\t});\n\t\tif (data.error) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: data.error });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(c, data.data);\n\t\treturn c.json({\n\t\t\tredirect: false,\n\t\t\ttoken: data.data.session.token,\n\t\t\turl: void 0,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(c.context.options, data.data.user)\n\t\t});\n\t}\n\tconst { codeVerifier, state } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateState)(c, void 0, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate,\n\t\tcodeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes,\n\t\tloginHint: c.body.loginHint\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst signInEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signInEmail\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.formCsrfMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Email of the user\" }),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Password of the user\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to use as a redirect for email verification\" }).optional(),\n\t\trememberMe: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"If this is false, the session will not be remembered. Default is `true`.\" }).default(true).optional()\n\t}),\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signInEmail\",\n\t\t\tdescription: \"Sign in with email and password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Session token\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tif (!ctx.context.options?.emailAndPassword?.enabled) {\n\t\tctx.context.logger.error(\"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password is not enabled\" });\n\t}\n\tconst { email, password } = ctx.body;\n\tif (!zod__WEBPACK_IMPORTED_MODULE_11__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"User not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst credentialAccount = user.accounts.find((a) => a.providerId === \"credential\");\n\tif (!credentialAccount) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Credential account not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst currentPassword = credentialAccount?.password;\n\tif (!currentPassword) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Password not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (!await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword\n\t})) {\n\t\tctx.context.logger.error(\"Invalid password\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n\t\tif (!ctx.context.options?.emailVerification?.sendVerificationEmail) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\tif (ctx.context.options?.emailVerification?.sendOnSignIn) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__.createEmailVerificationToken)(ctx.context.secret, user.user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: user.user,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t}\n\tconst session = await ctx.context.internalAdapter.createSession(user.user.id, ctx.body.rememberMe === false);\n\tif (!session) {\n\t\tctx.context.logger.error(\"Failed to create session\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t}\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser: user.user\n\t}, ctx.body.rememberMe === false);\n\tif (ctx.body.callbackURL) ctx.setHeader(\"Location\", ctx.body.callbackURL);\n\treturn ctx.json({\n\t\tredirect: !!ctx.body.callbackURL,\n\t\ttoken: session.token,\n\t\turl: ctx.body.callbackURL,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user.user)\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-in.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9zaWduLWluLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNlO0FBQ1Y7QUFDSjtBQUNhO0FBQ0k7QUFDekM7QUFDNEI7QUFDcEI7QUFDZDtBQUNtRDtBQUNqQjs7QUFFM0Q7QUFDQSwrQkFBK0Isd0NBQVE7QUFDdkMsY0FBYyx3Q0FBUSxVQUFVLHlFQUF5RTtBQUN6RyxxQkFBcUIsd0NBQVE7QUFDN0IsbUJBQW1CLHdDQUFRLFVBQVUsZ0VBQWdFO0FBQ3JHLFdBQVcsc0ZBQXNCO0FBQ2pDLGtCQUFrQix5Q0FBUyxVQUFVLDRHQUE0RztBQUNqSixVQUFVLDBDQUFVLENBQUMsd0NBQVE7QUFDN0IsU0FBUyx3Q0FBUSxVQUFVLDJDQUEyQztBQUN0RSxTQUFTLHdDQUFRLFVBQVUsaURBQWlEO0FBQzVFLGVBQWUsd0NBQVEsVUFBVSwrQ0FBK0M7QUFDaEYsZ0JBQWdCLHdDQUFRLFVBQVUsZ0RBQWdEO0FBQ2xGLGFBQWEsd0NBQVEsVUFBVSx5Q0FBeUM7QUFDeEUsRUFBRTtBQUNGLFNBQVMsdUNBQU8sQ0FBQyx3Q0FBUSxXQUFXLDRHQUE0RztBQUNoSixnQkFBZ0IseUNBQVMsVUFBVSx3R0FBd0c7QUFDM0ksWUFBWSx3Q0FBUSxVQUFVLHlFQUF5RTtBQUN2RyxpQkFBaUIsd0NBQVEsQ0FBQyx3Q0FBUSxJQUFJLHFDQUFLLHNCQUFzQixvRUFBb0U7QUFDckksQ0FBQztBQUNELDJCQUEyQiwwRUFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsYUFBYSxnQkFBZ0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxvR0FBb0csMkJBQTJCO0FBQy9ILFlBQVksaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsMkJBQTJCO0FBQzFHLGFBQWEsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHlCQUF5QjtBQUN2RjtBQUNBLFVBQVUsZUFBZTtBQUN6QjtBQUNBLGdEQUFnRCwyQkFBMkI7QUFDM0UsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx1REFBdUQsMkJBQTJCO0FBQ2xGLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDBCQUEwQjtBQUMzRjtBQUNBO0FBQ0Esb0RBQW9ELDJCQUEyQjtBQUMvRSxhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQix1QkFBdUI7QUFDeEY7QUFDQSxxQkFBcUIsNkVBQW1CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsNEJBQTRCLGlEQUFRLG1CQUFtQixxQkFBcUI7QUFDNUUsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSDtBQUNBLFNBQVMsc0JBQXNCLFFBQVEsZ0VBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQixZQUFZLFlBQVk7QUFDNUQ7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QsMEJBQTBCLDBFQUFrQjtBQUM1QztBQUNBO0FBQ0EsT0FBTyw2RUFBa0I7QUFDekIsT0FBTyx3Q0FBUTtBQUNmLFNBQVMsd0NBQVEsVUFBVSxrQ0FBa0M7QUFDN0QsWUFBWSx3Q0FBUSxVQUFVLHFDQUFxQztBQUNuRSxlQUFlLHdDQUFRLFVBQVUseUVBQXlFO0FBQzFHLGNBQWMseUNBQVMsVUFBVSx5RkFBeUY7QUFDMUgsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDhDQUE4QztBQUNwRjtBQUNBLFNBQVMsa0JBQWtCO0FBQzNCLE1BQU0sdUNBQU8sdUNBQXVDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDdkgseUVBQXlFLHVCQUF1QjtBQUNoRztBQUNBO0FBQ0EsK0NBQStDLE9BQU87QUFDdEQsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsNEJBQTRCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELE9BQU87QUFDcEUsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsNEJBQTRCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELE9BQU87QUFDMUQsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsNEJBQTRCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsNEJBQTRCO0FBQzVGO0FBQ0E7QUFDQSxnRkFBZ0YsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUN0SjtBQUNBLHVCQUF1QixxRkFBNEI7QUFDbkQ7QUFDQSxrQkFBa0Isb0JBQW9CLHNCQUFzQixNQUFNLGVBQWUsWUFBWTtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFlBQVksaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDJCQUEyQjtBQUMzRjtBQUNBLE9BQU8sb0VBQWdCO0FBQ3ZCO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQWU7QUFDdkIsRUFBRTtBQUNGLENBQUM7O0FBRUQ7QUFDcUM7QUFDckMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXHNpZ24taW4ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTdGF0ZSB9IGZyb20gXCIuLi8uLi9vYXV0aDIvc3RhdGUubWpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9saW5rLWFjY291bnQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSBcIi4vZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBTb2NpYWxQcm92aWRlckxpc3RFbnVtIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3NvY2lhbC1wcm92aWRlcnNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3NpZ24taW4udHNcbmNvbnN0IHNvY2lhbFNpZ25JbkJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHVzZXIgaGFzIHNpZ25lZCBpblwiIH0pLm9wdGlvbmFsKCksXG5cdG5ld1VzZXJDYWxsYmFja1VSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRlcnJvckNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gaWYgYW4gZXJyb3IgaGFwcGVuc1wiIH0pLm9wdGlvbmFsKCksXG5cdHByb3ZpZGVyOiBTb2NpYWxQcm92aWRlckxpc3RFbnVtLFxuXHRkaXNhYmxlUmVkaXJlY3Q6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIGF1dG9tYXRpYyByZWRpcmVjdGlvbiB0byB0aGUgcHJvdmlkZXIuIFVzZWZ1bCBmb3IgaGFuZGxpbmcgdGhlIHJlZGlyZWN0aW9uIHlvdXJzZWxmXCIgfSkub3B0aW9uYWwoKSxcblx0aWRUb2tlbjogei5vcHRpb25hbCh6Lm9iamVjdCh7XG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklEIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCIgfSksXG5cdFx0bm9uY2U6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIk5vbmNlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHRva2VuXCIgfSkub3B0aW9uYWwoKSxcblx0XHRhY2Nlc3NUb2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCIgfSkub3B0aW9uYWwoKSxcblx0XHRyZWZyZXNoVG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlJlZnJlc2ggdG9rZW4gZnJvbSB0aGUgcHJvdmlkZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGV4cGlyZXNBdDogei5udW1iZXIoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXhwaXJ5IGRhdGUgb2YgdGhlIHRva2VuXCIgfSkub3B0aW9uYWwoKVxuXHR9KSksXG5cdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQXJyYXkgb2Ygc2NvcGVzIHRvIHJlcXVlc3QgZnJvbSB0aGUgcHJvdmlkZXIuIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBzY29wZXMgcGFzc2VkLlwiIH0pLm9wdGlvbmFsKCksXG5cdHJlcXVlc3RTaWduVXA6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFeHBsaWNpdGx5IHJlcXVlc3Qgc2lnbi11cC4gVXNlZnVsIHdoZW4gZGlzYWJsZUltcGxpY2l0U2lnblVwIGlzIHRydWUgZm9yIHRoaXMgcHJvdmlkZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRsb2dpbkhpbnQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBsb2dpbiBoaW50IHRvIHVzZSBmb3IgdGhlIGF1dGhvcml6YXRpb24gY29kZSByZXF1ZXN0XCIgfSkub3B0aW9uYWwoKSxcblx0YWRkaXRpb25hbERhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFkZGl0aW9uYWwgZGF0YSB0byBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgT0F1dGggZmxvd1wiIH0pXG59KTtcbmNvbnN0IHNpZ25JblNvY2lhbCA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLWluL3NvY2lhbFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInNvY2lhbFNpZ25JblwiLFxuXHRib2R5OiBzb2NpYWxTaWduSW5Cb2R5U2NoZW1hLFxuXHRtZXRhZGF0YToge1xuXHRcdCRJbmZlcjoge1xuXHRcdFx0Ym9keToge30sXG5cdFx0XHRyZXR1cm5lZDoge31cblx0XHR9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlNpZ24gaW4gd2l0aCBhIHNvY2lhbCBwcm92aWRlclwiLFxuXHRcdFx0b3BlcmF0aW9uSWQ6IFwic29jaWFsU2lnbkluXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzIC0gUmV0dXJucyBlaXRoZXIgc2Vzc2lvbiBkZXRhaWxzIG9yIHJlZGlyZWN0IFVSTFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiByZXNwb25zZSB3aGVuIGlkVG9rZW4gaXMgcHJvdmlkZWRcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR0b2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXJsOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHJlZGlyZWN0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRlbnVtOiBbZmFsc2VdXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJyZWRpcmVjdFwiLFxuXHRcdFx0XHRcdFx0XCJ0b2tlblwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VyXCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjKSA9PiB7XG5cdGNvbnN0IHByb3ZpZGVyID0gYy5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBjLmJvZHkucHJvdmlkZXIpO1xuXHRpZiAoIXByb3ZpZGVyKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIG5vdCBmb3VuZC4gTWFrZSBzdXJlIHRvIGFkZCB0aGUgcHJvdmlkZXIgaW4geW91ciBhdXRoIGNvbmZpZ1wiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QUk9WSURFUl9OT1RfRk9VTkQgfSk7XG5cdH1cblx0aWYgKGMuYm9keS5pZFRva2VuKSB7XG5cdFx0aWYgKCFwcm92aWRlci52ZXJpZnlJZFRva2VuKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUHJvdmlkZXIgZG9lcyBub3Qgc3VwcG9ydCBpZCB0b2tlbiB2ZXJpZmljYXRpb25cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JRF9UT0tFTl9OT1RfU1VQUE9SVEVEIH0pO1xuXHRcdH1cblx0XHRjb25zdCB7IHRva2VuLCBub25jZSB9ID0gYy5ib2R5LmlkVG9rZW47XG5cdFx0aWYgKCFhd2FpdCBwcm92aWRlci52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJJbnZhbGlkIGlkIHRva2VuXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0XHRpZFRva2VuOiB0b2tlbixcblx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcblx0XHRcdHJlZnJlc2hUb2tlbjogYy5ib2R5LmlkVG9rZW4ucmVmcmVzaFRva2VuXG5cdFx0fSk7XG5cdFx0aWYgKCF1c2VySW5mbyB8fCAhdXNlckluZm8/LnVzZXIpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IHVzZXIgaW5mb1wiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfVVNFUl9JTkZPIH0pO1xuXHRcdH1cblx0XHRpZiAoIXVzZXJJbmZvLnVzZXIuZW1haWwpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVc2VyIGVtYWlsIG5vdCBmb3VuZFwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfRU1BSUxfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRjb25zdCBkYXRhID0gYXdhaXQgaGFuZGxlT0F1dGhVc2VySW5mbyhjLCB7XG5cdFx0XHR1c2VySW5mbzoge1xuXHRcdFx0XHQuLi51c2VySW5mby51c2VyLFxuXHRcdFx0XHRlbWFpbDogdXNlckluZm8udXNlci5lbWFpbCxcblx0XHRcdFx0aWQ6IFN0cmluZyh1c2VySW5mby51c2VyLmlkKSxcblx0XHRcdFx0bmFtZTogdXNlckluZm8udXNlci5uYW1lIHx8IFwiXCIsXG5cdFx0XHRcdGltYWdlOiB1c2VySW5mby51c2VyLmltYWdlLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VySW5mby51c2VyLmVtYWlsVmVyaWZpZWQgfHwgZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHRhY2NvdW50OiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IFN0cmluZyh1c2VySW5mby51c2VyLmlkKSxcblx0XHRcdFx0YWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuXG5cdFx0XHR9LFxuXHRcdFx0Y2FsbGJhY2tVUkw6IGMuYm9keS5jYWxsYmFja1VSTCxcblx0XHRcdGRpc2FibGVTaWduVXA6IHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCAmJiAhYy5ib2R5LnJlcXVlc3RTaWduVXAgfHwgcHJvdmlkZXIuZGlzYWJsZVNpZ25VcFxuXHRcdH0pO1xuXHRcdGlmIChkYXRhLmVycm9yKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBkYXRhLmVycm9yIH0pO1xuXHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoYywgZGF0YS5kYXRhKTtcblx0XHRyZXR1cm4gYy5qc29uKHtcblx0XHRcdHJlZGlyZWN0OiBmYWxzZSxcblx0XHRcdHRva2VuOiBkYXRhLmRhdGEuc2Vzc2lvbi50b2tlbixcblx0XHRcdHVybDogdm9pZCAwLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGMuY29udGV4dC5vcHRpb25zLCBkYXRhLmRhdGEudXNlcilcblx0XHR9KTtcblx0fVxuXHRjb25zdCB7IGNvZGVWZXJpZmllciwgc3RhdGUgfSA9IGF3YWl0IGdlbmVyYXRlU3RhdGUoYywgdm9pZCAwLCBjLmJvZHkuYWRkaXRpb25hbERhdGEpO1xuXHRjb25zdCB1cmwgPSBhd2FpdCBwcm92aWRlci5jcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRzdGF0ZSxcblx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0cmVkaXJlY3RVUkk6IGAke2MuY29udGV4dC5iYXNlVVJMfS9jYWxsYmFjay8ke3Byb3ZpZGVyLmlkfWAsXG5cdFx0c2NvcGVzOiBjLmJvZHkuc2NvcGVzLFxuXHRcdGxvZ2luSGludDogYy5ib2R5LmxvZ2luSGludFxuXHR9KTtcblx0aWYgKCFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0KSBjLnNldEhlYWRlcihcIkxvY2F0aW9uXCIsIHVybC50b1N0cmluZygpKTtcblx0cmV0dXJuIGMuanNvbih7XG5cdFx0dXJsOiB1cmwudG9TdHJpbmcoKSxcblx0XHRyZWRpcmVjdDogIWMuYm9keS5kaXNhYmxlUmVkaXJlY3Rcblx0fSk7XG59KTtcbmNvbnN0IHNpZ25JbkVtYWlsID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24taW4vZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJzaWduSW5FbWFpbFwiLFxuXHR1c2U6IFtmb3JtQ3NyZk1pZGRsZXdhcmVdLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0ZW1haWw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIG9mIHRoZSB1c2VyXCIgfSksXG5cdFx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlBhc3N3b3JkIG9mIHRoZSB1c2VyXCIgfSksXG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkNhbGxiYWNrIFVSTCB0byB1c2UgYXMgYSByZWRpcmVjdCBmb3IgZW1haWwgdmVyaWZpY2F0aW9uXCIgfSkub3B0aW9uYWwoKSxcblx0XHRyZW1lbWJlck1lOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiSWYgdGhpcyBpcyBmYWxzZSwgdGhlIHNlc3Npb24gd2lsbCBub3QgYmUgcmVtZW1iZXJlZC4gRGVmYXVsdCBpcyBgdHJ1ZWAuXCIgfSkuZGVmYXVsdCh0cnVlKS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YToge1xuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdCRJbmZlcjoge1xuXHRcdFx0Ym9keToge30sXG5cdFx0XHRyZXR1cm5lZDoge31cblx0XHR9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInNpZ25JbkVtYWlsXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzIC0gUmV0dXJucyBlaXRoZXIgc2Vzc2lvbiBkZXRhaWxzIG9yIHJlZGlyZWN0IFVSTFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiByZXNwb25zZSB3aGVuIGlkVG9rZW4gaXMgcHJvdmlkZWRcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRyZWRpcmVjdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW2ZhbHNlXVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gdG9rZW5cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVybDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcInJlZGlyZWN0XCIsXG5cdFx0XHRcdFx0XHRcInRva2VuXCIsXG5cdFx0XHRcdFx0XHRcInVzZXJcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsQW5kUGFzc3dvcmQ/LmVuYWJsZWQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IGVuYWJsZWQuIE1ha2Ugc3VyZSB0byBlbmFibGUgaXQgaW4gdGhlIG9wdGlvbnMgb24geW91IGBhdXRoLnRzYCBmaWxlLiBDaGVjayBgaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9hdXRoZW50aWNhdGlvbi9lbWFpbC1wYXNzd29yZGAgZm9yIG1vcmUhXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdGlmICghei5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCkuc3VjY2VzcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUwgfSk7XG5cdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKGVtYWlsLCB7IGluY2x1ZGVBY2NvdW50czogdHJ1ZSB9KTtcblx0aWYgKCF1c2VyKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlciBub3QgZm91bmRcIiwgeyBlbWFpbCB9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQgfSk7XG5cdH1cblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSB1c2VyLmFjY291bnRzLmZpbmQoKGEpID0+IGEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRpZiAoIWNyZWRlbnRpYWxBY2NvdW50KSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ3JlZGVudGlhbCBhY2NvdW50IG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3VycmVudFBhc3N3b3JkKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGlmICghYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQudmVyaWZ5KHtcblx0XHRoYXNoOiBjdXJyZW50UGFzc3dvcmQsXG5cdFx0cGFzc3dvcmRcblx0fSkpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHBhc3N3b3JkXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucz8uZW1haWxBbmRQYXNzd29yZD8ucmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uICYmICF1c2VyLnVzZXIuZW1haWxWZXJpZmllZCkge1xuXHRcdGlmICghY3R4LmNvbnRleHQub3B0aW9ucz8uZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9OT1RfVkVSSUZJRUQgfSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduSW4pIHtcblx0XHRcdGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHVzZXIudXNlci5lbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0Y29uc3QgY2FsbGJhY2tVUkwgPSBjdHguYm9keS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChjdHguYm9keS5jYWxsYmFja1VSTCkgOiBlbmNvZGVVUklDb21wb25lbnQoXCIvXCIpO1xuXHRcdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHR1c2VyOiB1c2VyLnVzZXIsXG5cdFx0XHRcdHVybCxcblx0XHRcdFx0dG9rZW5cblx0XHRcdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRU1BSUxfTk9UX1ZFUklGSUVEIH0pO1xuXHR9XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQsIGN0eC5ib2R5LnJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHR9XG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0c2Vzc2lvbixcblx0XHR1c2VyOiB1c2VyLnVzZXJcblx0fSwgY3R4LmJvZHkucmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRpZiAoY3R4LmJvZHkuY2FsbGJhY2tVUkwpIGN0eC5zZXRIZWFkZXIoXCJMb2NhdGlvblwiLCBjdHguYm9keS5jYWxsYmFja1VSTCk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0cmVkaXJlY3Q6ICEhY3R4LmJvZHkuY2FsbGJhY2tVUkwsXG5cdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0dXJsOiBjdHguYm9keS5jYWxsYmFja1VSTCxcblx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXNlci51c2VyKVxuXHR9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ24taW4ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/sign-out.ts\nconst signOut = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/sign-out\", {\n\tmethod: \"POST\",\n\toperationId: \"signOut\",\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"signOut\",\n\t\tdescription: \"Sign out the current user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\tif (sessionCookieToken) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n\t} catch (e) {\n\t\tctx.context.logger.error(\"Failed to delete session from database\", e);\n\t}\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.deleteSessionCookie)(ctx);\n\treturn ctx.json({ success: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-out.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9zaWduLW91dC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThEO0FBQ0g7O0FBRTNEO0FBQ0EsZ0JBQWdCLHlFQUFrQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFdBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsQ0FBQyx1RUFBbUI7QUFDcEIsbUJBQW1CLGVBQWU7QUFDbEMsQ0FBQzs7QUFFRDtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcc2lnbi1vdXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3NpZ24tb3V0LnRzXG5jb25zdCBzaWduT3V0ID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24tb3V0XCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2lnbk91dFwiLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInNpZ25PdXRcIixcblx0XHRkZXNjcmlwdGlvbjogXCJTaWduIG91dCB0aGUgY3VycmVudCB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uQ29va2llVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRpZiAoc2Vzc2lvbkNvb2tpZVRva2VuKSB0cnkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKHNlc3Npb25Db29raWVUb2tlbik7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIHNlc3Npb24gZnJvbSBkYXRhYmFzZVwiLCBlKTtcblx0fVxuXHRkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduT3V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduLW91dC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signUpEmail: () => (/* binding */ signUpEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./email-verification.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-up.ts\nconst signUpEmailBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_10__.string(),\n\temail: zod__WEBPACK_IMPORTED_MODULE_10__.email(),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().nonempty(),\n\timage: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\trememberMe: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().optional()\n}).and(zod__WEBPACK_IMPORTED_MODULE_10__.record(zod__WEBPACK_IMPORTED_MODULE_10__.string(), zod__WEBPACK_IMPORTED_MODULE_10__.any()));\nconst signUpEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/sign-up/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signUpWithEmailAndPassword\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware],\n\tbody: signUpEmailBodySchema,\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signUpWithEmailAndPassword\",\n\t\t\tdescription: \"Sign up a user using email and password\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\temail: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The email of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The password of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tcallbackURL: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The URL to use for email verification callback\"\n\t\t\t\t\t},\n\t\t\t\t\trememberMe: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"If this is false, the session will not be remembered. Default is `true`.\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"password\"\n\t\t\t\t]\n\t\t\t} } } },\n\t\t\tresponses: {\n\t\t\t\t\"200\": {\n\t\t\t\t\tdescription: \"Successfully created user\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Authentication token for the session\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"user\"]\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t\"422\": {\n\t\t\t\t\tdescription: \"Unprocessable Entity. User already exists or failed to create user.\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t} } }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__.runWithTransaction)(ctx.context.adapter, async () => {\n\t\tif (!ctx.context.options.emailAndPassword?.enabled || ctx.context.options.emailAndPassword?.disableSignUp) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password sign up is not enabled\" });\n\t\tconst body = ctx.body;\n\t\tconst { name, email, password, image, callbackURL: _callbackURL, rememberMe, ...rest } = body;\n\t\tif (!zod__WEBPACK_IMPORTED_MODULE_10__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tif (!password || typeof password !== \"string\") throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\t\tif (password.length < minPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too short\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t\t}\n\t\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\t\tif (password.length > maxPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too long\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t\t}\n\t\tif ((await ctx.context.internalAdapter.findUserByEmail(email))?.user) {\n\t\t\tctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t\t}\n\t\t/**\n\t\t* Hash the password\n\t\t*\n\t\t* This is done prior to creating the user\n\t\t* to ensure that any plugin that\n\t\t* may break the hashing should break\n\t\t* before the user is created.\n\t\t*/\n\t\tconst hash = await ctx.context.password.hash(password);\n\t\tlet createdUser;\n\t\ttry {\n\t\t\tconst data = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"create\");\n\t\t\tcreatedUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\temail: email.toLowerCase(),\n\t\t\t\tname,\n\t\t\t\timage,\n\t\t\t\t...data,\n\t\t\t\temailVerified: false\n\t\t\t});\n\t\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t} catch (e) {\n\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.isDevelopment)()) ctx.context.logger.error(\"Failed to create user\", e);\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_8__.APIError) throw e;\n\t\t\tctx.context.logger?.error(\"Failed to create user\", e);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t}\n\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: createdUser.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: createdUser.id,\n\t\t\tpassword: hash\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendOnSignUp ?? ctx.context.options.emailAndPassword.requireEmailVerification) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__.createEmailVerificationToken)(ctx.context.secret, createdUser.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = body.callbackURL ? encodeURIComponent(body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: createdUser,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tif (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) return ctx.json({\n\t\t\ttoken: null,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t\tconst session = await ctx.context.internalAdapter.createSession(createdUser.id, rememberMe === false);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\tsession,\n\t\t\tuser: createdUser\n\t\t}, rememberMe === false);\n\t\treturn ctx.json({\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-up.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9zaWduLXVwLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0U7QUFDMUM7QUFDeUM7QUFDVjtBQUNhO0FBQ1Q7QUFDVDtBQUNLO0FBQ3BCO0FBQ2Q7QUFDa0M7O0FBRTNEO0FBQ0EsOEJBQThCLHdDQUFRO0FBQ3RDLE9BQU8sd0NBQVE7QUFDZixRQUFRLHVDQUFPO0FBQ2YsV0FBVyx3Q0FBUTtBQUNuQixRQUFRLHdDQUFRO0FBQ2hCLGNBQWMsd0NBQVE7QUFDdEIsYUFBYSx5Q0FBUztBQUN0QixDQUFDLE1BQU0sd0NBQVEsQ0FBQyx3Q0FBUSxJQUFJLHFDQUFLO0FBQ2pDLDBCQUEwQix5RUFBa0I7QUFDNUM7QUFDQTtBQUNBLE9BQU8sNkVBQWtCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXLHNCQUFzQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsUUFBUSw2RUFBa0I7QUFDMUIsdUhBQXVILGlEQUFRLGtCQUFrQixzREFBc0Q7QUFDdk07QUFDQSxVQUFVLCtFQUErRTtBQUN6RixPQUFPLHVDQUFPLHVDQUF1QyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ3hILDJEQUEyRCxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsbUJBQW1CO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBLGFBQWEsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUNwRjtBQUNBO0FBQ0Esa0VBQWtFLE1BQU07QUFDeEUsYUFBYSxpREFBUSwyQkFBMkIsU0FBUyxxRUFBZ0Isd0NBQXdDO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4REFBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osK0JBQStCLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQix3QkFBd0I7QUFDMUcsSUFBSTtBQUNKLE9BQU8sb0VBQWE7QUFDcEIsb0JBQW9CLGlEQUFRO0FBQzVCO0FBQ0EsYUFBYSxpREFBUSwyQkFBMkIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQ2pHO0FBQ0EsOEJBQThCLGlEQUFRLDJCQUEyQixTQUFTLHFFQUFnQix3QkFBd0I7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHVCQUF1QixxRkFBNEI7QUFDbkQ7QUFDQSxrQkFBa0Isb0JBQW9CLHNCQUFzQixNQUFNLGVBQWUsWUFBWTtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSDtBQUNBLDBCQUEwQixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQ3hHLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFNBQVMsK0RBQWU7QUFDeEIsR0FBRztBQUNILEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ3VCO0FBQ3ZCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxzaWduLXVwLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2RiL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZm9ybUNzcmZNaWRkbGV3YXJlIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBydW5XaXRoVHJhbnNhY3Rpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgaXNEZXZlbG9wbWVudCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3NpZ24tdXAudHNcbmNvbnN0IHNpZ25VcEVtYWlsQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0bmFtZTogei5zdHJpbmcoKSxcblx0ZW1haWw6IHouZW1haWwoKSxcblx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubm9uZW1wdHkoKSxcblx0aW1hZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0cmVtZW1iZXJNZTogei5ib29sZWFuKCkub3B0aW9uYWwoKVxufSkuYW5kKHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpKTtcbmNvbnN0IHNpZ25VcEVtYWlsID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24tdXAvZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJzaWduVXBXaXRoRW1haWxBbmRQYXNzd29yZFwiLFxuXHR1c2U6IFtmb3JtQ3NyZk1pZGRsZXdhcmVdLFxuXHRib2R5OiBzaWduVXBFbWFpbEJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7XG5cdFx0YWxsb3dlZE1lZGlhVHlwZXM6IFtcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIl0sXG5cdFx0JEluZmVyOiB7XG5cdFx0XHRib2R5OiB7fSxcblx0XHRcdHJldHVybmVkOiB7fVxuXHRcdH0sXG5cdFx0b3BlbmFwaToge1xuXHRcdFx0b3BlcmF0aW9uSWQ6IFwic2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmRcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlNpZ24gdXAgYSB1c2VyIHVzaW5nIGVtYWlsIGFuZCBwYXNzd29yZFwiLFxuXHRcdFx0cmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwYXNzd29yZDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRjYWxsYmFja1VSTDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gdXNlIGZvciBlbWFpbCB2ZXJpZmljYXRpb24gY2FsbGJhY2tcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVtZW1iZXJNZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJZiB0aGlzIGlzIGZhbHNlLCB0aGUgc2Vzc2lvbiB3aWxsIG5vdCBiZSByZW1lbWJlcmVkLiBEZWZhdWx0IGlzIGB0cnVlYC5cIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFx0XCJwYXNzd29yZFwiXG5cdFx0XHRcdF1cblx0XHRcdH0gfSB9IH0sXG5cdFx0XHRyZXNwb25zZXM6IHtcblx0XHRcdFx0XCIyMDBcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NmdWxseSBjcmVhdGVkIHVzZXJcIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgc2Vzc2lvblwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwidXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcHJvZmlsZSBpbWFnZSBVUkwgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGVtYWlsIGhhcyBiZWVuIHZlcmlmaWVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIHRoZSB1c2VyIHdhcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIHRoZSB1c2VyIHdhcyBsYXN0IHVwZGF0ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJlbWFpbFZlcmlmaWVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJ1c2VyXCJdXG5cdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCI0MjJcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVucHJvY2Vzc2FibGUgRW50aXR5LiBVc2VyIGFscmVhZHkgZXhpc3RzIG9yIGZhaWxlZCB0byBjcmVhdGUgdXNlci5cIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0cmV0dXJuIHJ1bldpdGhUcmFuc2FjdGlvbihjdHguY29udGV4dC5hZGFwdGVyLCBhc3luYyAoKSA9PiB7XG5cdFx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LmVuYWJsZWQgfHwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5kaXNhYmxlU2lnblVwKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIHNpZ24gdXAgaXMgbm90IGVuYWJsZWRcIiB9KTtcblx0XHRjb25zdCBib2R5ID0gY3R4LmJvZHk7XG5cdFx0Y29uc3QgeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGltYWdlLCBjYWxsYmFja1VSTDogX2NhbGxiYWNrVVJMLCByZW1lbWJlck1lLCAuLi5yZXN0IH0gPSBib2R5O1xuXHRcdGlmICghei5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCkuc3VjY2VzcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUwgfSk7XG5cdFx0aWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHRcdGNvbnN0IG1pblBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuXHRcdGlmIChwYXNzd29yZC5sZW5ndGggPCBtaW5QYXNzd29yZExlbmd0aCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19TSE9SVCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdFx0aWYgKHBhc3N3b3JkLmxlbmd0aCA+IG1heFBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gbG9uZ1wiKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0XHR9XG5cdFx0aWYgKChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKGVtYWlsKSk/LnVzZXIpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKGBTaWduLXVwIGF0dGVtcHQgZm9yIGV4aXN0aW5nIGVtYWlsOiAke2VtYWlsfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUwgfSk7XG5cdFx0fVxuXHRcdC8qKlxuXHRcdCogSGFzaCB0aGUgcGFzc3dvcmRcblx0XHQqXG5cdFx0KiBUaGlzIGlzIGRvbmUgcHJpb3IgdG8gY3JlYXRpbmcgdGhlIHVzZXJcblx0XHQqIHRvIGVuc3VyZSB0aGF0IGFueSBwbHVnaW4gdGhhdFxuXHRcdCogbWF5IGJyZWFrIHRoZSBoYXNoaW5nIHNob3VsZCBicmVha1xuXHRcdCogYmVmb3JlIHRoZSB1c2VyIGlzIGNyZWF0ZWQuXG5cdFx0Ki9cblx0XHRjb25zdCBoYXNoID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0bGV0IGNyZWF0ZWRVc2VyO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkYXRhID0gcGFyc2VVc2VySW5wdXQoY3R4LmNvbnRleHQub3B0aW9ucywgcmVzdCwgXCJjcmVhdGVcIik7XG5cdFx0XHRjcmVhdGVkVXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdG5hbWUsXG5cdFx0XHRcdGltYWdlLFxuXHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIWNyZWF0ZWRVc2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9VU0VSIH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChpc0RldmVsb3BtZW50KCkpIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgdXNlclwiLCBlKTtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHRocm93IGU7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXI/LmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCIsIGUpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHR9XG5cdFx0aWYgKCFjcmVhdGVkVXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlua0FjY291bnQoe1xuXHRcdFx0dXNlcklkOiBjcmVhdGVkVXNlci5pZCxcblx0XHRcdHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuXHRcdFx0YWNjb3VudElkOiBjcmVhdGVkVXNlci5pZCxcblx0XHRcdHBhc3N3b3JkOiBoYXNoXG5cdFx0fSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRPblNpZ25VcCA/PyBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQucmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uKSB7XG5cdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBjcmVhdGVkVXNlci5lbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0Y29uc3QgY2FsbGJhY2tVUkwgPSBib2R5LmNhbGxiYWNrVVJMID8gZW5jb2RlVVJJQ29tcG9uZW50KGJvZHkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0XHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSBhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0dXNlcjogY3JlYXRlZFVzZXIsXG5cdFx0XHRcdHVybCxcblx0XHRcdFx0dG9rZW5cblx0XHRcdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdFx0fVxuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQuYXV0b1NpZ25JbiA9PT0gZmFsc2UgfHwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbikgcmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHRva2VuOiBudWxsLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIGNyZWF0ZWRVc2VyKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihjcmVhdGVkVXNlci5pZCwgcmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRcdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTiB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXI6IGNyZWF0ZWRVc2VyXG5cdFx0fSwgcmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHR0b2tlbjogc2Vzc2lvbi50b2tlbixcblx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBjcmVhdGVkVXNlcilcblx0XHR9KTtcblx0fSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduVXBFbWFpbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2lnbi11cC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeEmail: () => (/* binding */ changeEmail),\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* binding */ deleteUserCallback),\n/* harmony export */   setPassword: () => (/* binding */ setPassword),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./session.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./email-verification.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/update-user.ts\nconst updateUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Field name must be a string\" }), zod__WEBPACK_IMPORTED_MODULE_11__.any());\nconst updateUser = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/update-user\", {\n\tmethod: \"POST\",\n\toperationId: \"updateUser\",\n\tbody: updateUserBodySchema,\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sessionMiddleware],\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateUser\",\n\t\t\tdescription: \"Update the current user\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The image of the user\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } } },\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst body = ctx.body;\n\tif (typeof body !== \"object\" || Array.isArray(body)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Body must be an object\" });\n\tif (body.email) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED });\n\tconst { name, image, ...rest } = body;\n\tconst session = ctx.context.session;\n\tconst additionalFields = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"update\");\n\tif (image === void 0 && name === void 0 && Object.keys(additionalFields).length === 0) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"No fields to update\" });\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(session.user.id, {\n\t\tname,\n\t\timage,\n\t\t...additionalFields\n\t}) ?? {\n\t\t...session.user,\n\t\t...name !== void 0 && { name },\n\t\t...image !== void 0 && { image },\n\t\t...additionalFields\n\t};\n\t/**\n\t* Update the session cookie with the new user data\n\t*/\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\tsession: session.session,\n\t\tuser: updatedUser\n\t});\n\treturn ctx.json({ status: true });\n});\nconst changePassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-password\", {\n\tmethod: \"POST\",\n\toperationId: \"changePassword\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set\" }),\n\t\tcurrentPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The current password is required\" }),\n\t\trevokeOtherSessions: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Must be a boolean value\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changePassword\",\n\t\tdescription: \"Change the password of the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Password successfully changed\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\tdescription: \"New session token if other sessions were revoked\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { newPassword, currentPassword, revokeOtherSessions } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!await ctx.context.password.verify({\n\t\thash: account.password,\n\t\tpassword: currentPassword\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\tawait ctx.context.internalAdapter.updateAccount(account.id, { password: passwordHash });\n\tlet token = null;\n\tif (revokeOtherSessions) {\n\t\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t\tconst newSession = await ctx.context.internalAdapter.createSession(session.user.id);\n\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: newSession,\n\t\t\tuser: session.user\n\t\t});\n\t\ttoken = newSession.token;\n\t}\n\treturn ctx.json({\n\t\ttoken,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, session.user)\n\t});\n});\nconst setPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)({\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({ newPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set is required\" }) }),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { newPassword } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!account) {\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: session.user.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: session.user.id,\n\t\t\tpassword: passwordHash\n\t\t});\n\t\treturn ctx.json({ status: true });\n\t}\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"user already has a password\" });\n});\nconst deleteUser = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user\", {\n\tmethod: \"POST\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The callback URL to redirect to after the user is deleted\" }).optional(),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The password of the user is required to delete the user\" }).optional(),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to delete the user is required\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"deleteUser\",\n\t\tdescription: \"Delete the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The callback URL to redirect to after the user is deleted\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The user's password. Required if session is not fresh\"\n\t\t\t\t},\n\t\t\t\ttoken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The deletion verification token\"\n\t\t\t\t}\n\t\t\t}\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User deletion processed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the operation was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\", \"Verification email sent\"],\n\t\t\t\t\t\tdescription: \"Status message of the deletion process\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = ctx.context.session;\n\tif (ctx.body.password) {\n\t\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\t\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\t\tif (!await ctx.context.password.verify({\n\t\t\thash: account.password,\n\t\t\tpassword: ctx.body.password\n\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t}\n\tif (ctx.body.token) {\n\t\tawait deleteUserCallback({\n\t\t\t...ctx,\n\t\t\tquery: { token: ctx.body.token }\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"User deleted\"\n\t\t});\n\t}\n\tif (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n\t\tconst token = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString)(32, \"0-9\", \"a-z\");\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: session.user.id,\n\t\t\tidentifier: `delete-account-${token}`,\n\t\t\texpiresAt: new Date(Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 3600 * 24) * 1e3)\n\t\t});\n\t\tconst url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.user.deleteUser.sendDeleteAccountVerification({\n\t\t\tuser: session.user,\n\t\t\turl,\n\t\t\ttoken\n\t\t}, ctx.request));\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Verification email sent\"\n\t\t});\n\t}\n\tif (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n\t\tconst currentAge = new Date(session.session.createdAt).getTime();\n\t\tconst freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n\t\tif (Date.now() - currentAge > freshAge * 1e3) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.SESSION_EXPIRED });\n\t}\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst deleteUserCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user/callback\", {\n\tmethod: \"GET\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to verify the deletion request\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after deletion\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Callback to complete user deletion with verification token\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User successfully deleted\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the deletion was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\"],\n\t\t\t\t\t\tdescription: \"Confirmation message\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_6__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\tconst token = await ctx.context.internalAdapter.findVerificationValue(`delete-account-${ctx.query.token}`);\n\tif (!token || token.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tif (token.value !== session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\tawait ctx.context.internalAdapter.deleteAccounts(session.user.id);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(token.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL || \"/\");\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst changeEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-email\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewEmail: zod__WEBPACK_IMPORTED_MODULE_11__.email().meta({ description: \"The new email address to set must be a valid email address\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changeEmail\",\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Email change request processed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Indicates if the request was successful\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tenum: [\"Email updated\", \"Verification email sent\"],\n\t\t\t\t\t\t\tdescription: \"Status message of the email change process\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"status\"]\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"422\": {\n\t\t\t\tdescription: \"Unprocessable Entity. Email already exists\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.changeEmail?.enabled) {\n\t\tctx.context.logger.error(\"Change email is disabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Change email is disabled\" });\n\t}\n\tconst newEmail = ctx.body.newEmail.toLowerCase();\n\tif (newEmail === ctx.context.session.user.email) {\n\t\tctx.context.logger.error(\"Email is the same\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Email is the same\" });\n\t}\n\tif (await ctx.context.internalAdapter.findUserByEmail(newEmail)) {\n\t\tctx.context.logger.error(\"Email already exists\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t}\n\t/**\n\t* If the email is not verified, we can update the email if the option is enabled\n\t*/\n\tif (ctx.context.session.user.emailVerified !== true && ctx.context.options.user.changeEmail.updateEmailWithoutVerification) {\n\t\tawait ctx.context.internalAdapter.updateUserByEmail(ctx.context.session.user.email, { email: newEmail });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: ctx.context.session.session,\n\t\t\tuser: {\n\t\t\t\t...ctx.context.session.user,\n\t\t\t\temail: newEmail\n\t\t\t}\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, newEmail, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: {\n\t\t\t\t\t...ctx.context.session.user,\n\t\t\t\t\temail: newEmail\n\t\t\t\t},\n\t\t\t\turl: url$1,\n\t\t\t\ttoken: token$1\n\t\t\t}, ctx.request));\n\t\t}\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (ctx.context.session.user.emailVerified && (ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification)) {\n\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-confirmation\" });\n\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tconst sendFn = ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification;\n\t\tif (sendFn) await ctx.context.runInBackgroundOrAwait(sendFn({\n\t\t\tuser: ctx.context.session.user,\n\t\t\tnewEmail,\n\t\t\turl: url$1,\n\t\t\ttoken: token$1\n\t\t}, ctx.request));\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser: {\n\t\t\t...ctx.context.session.user,\n\t\t\temail: newEmail\n\t\t},\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=update-user.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy91cGRhdGUtdXNlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNFO0FBQ1I7QUFDNUI7QUFDNkI7QUFDL0I7QUFDZ0Q7QUFDaUI7QUFDekI7QUFDYjtBQUNwQjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBLDZCQUE2Qix3Q0FBUSxDQUFDLHdDQUFRLFVBQVUsNENBQTRDLEdBQUcscUNBQUs7QUFDNUcseUJBQXlCLDBFQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxPQUFPLDJEQUFpQjtBQUN4QjtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsV0FBVyxzQkFBc0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxnRUFBZ0UsaURBQVEsa0JBQWtCLG1DQUFtQztBQUM3SCwyQkFBMkIsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLDJCQUEyQjtBQUN6RyxTQUFTLHVCQUF1QjtBQUNoQztBQUNBLDBCQUEwQiw4REFBYztBQUN4QyxrR0FBa0csaURBQVEsa0JBQWtCLGdDQUFnQztBQUM1SjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLDBCQUEwQixNQUFNO0FBQ2hDLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLG9FQUFnQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCx1QkFBdUIsMEVBQWtCO0FBQ3pDO0FBQ0E7QUFDQSxPQUFPLHdDQUFRO0FBQ2YsZUFBZSx3Q0FBUSxVQUFVLHdDQUF3QztBQUN6RSxtQkFBbUIsd0NBQVEsVUFBVSxpREFBaUQ7QUFDdEYsdUJBQXVCLHlDQUFTLFVBQVUsd0NBQXdDO0FBQ2xGLEVBQUU7QUFDRixPQUFPLG9FQUEwQjtBQUNqQyxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsb0RBQW9EO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ25GO0FBQ0E7QUFDQSw4Q0FBOEMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLCtCQUErQjtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsbUJBQW1CO0FBQ3JGLCtEQUErRCx3QkFBd0I7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQVEsNEJBQTRCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUNsSCxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBZTtBQUN2QixFQUFFO0FBQ0YsQ0FBQztBQUNELG9CQUFvQiwwRUFBa0I7QUFDdEM7QUFDQSxPQUFPLHdDQUFRLEdBQUcsYUFBYSx3Q0FBUSxVQUFVLG9EQUFvRCxHQUFHO0FBQ3hHLE9BQU8sb0VBQTBCO0FBQ2pDLENBQUM7QUFDRCxTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0EsV0FBVyxpREFBUSxrQkFBa0Isd0NBQXdDO0FBQzdFLENBQUM7QUFDRCxtQkFBbUIsMEVBQWtCO0FBQ3JDO0FBQ0EsT0FBTyxvRUFBMEI7QUFDakMsT0FBTyx3Q0FBUTtBQUNmLGVBQWUsd0NBQVEsVUFBVSwwRUFBMEU7QUFDM0csWUFBWSx3Q0FBUSxVQUFVLHdFQUF3RTtBQUN0RyxTQUFTLHdDQUFRLFVBQVUseURBQXlEO0FBQ3BGLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBLGlCQUFpQixXQUFXLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsK0JBQStCO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBLEdBQUcsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsbUJBQW1CO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdCQUFnQix3RUFBb0I7QUFDcEM7QUFDQTtBQUNBLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0EsR0FBRztBQUNILGlCQUFpQixvQkFBb0IsOEJBQThCLE1BQU0sZUFBZSw0QkFBNEI7QUFDcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixrQkFBa0I7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsdUVBQW1CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELDJCQUEyQiwwRUFBa0I7QUFDN0M7QUFDQSxRQUFRLHdDQUFRO0FBQ2hCLFNBQVMsd0NBQVEsVUFBVSx5REFBeUQ7QUFDcEYsZUFBZSx3Q0FBUSxVQUFVLHNEQUFzRDtBQUN2RixFQUFFO0FBQ0YsT0FBTywwRUFBVztBQUNsQixhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVE7QUFDcEI7QUFDQSx1QkFBdUIsK0RBQWlCO0FBQ3hDLHlCQUF5QixpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IsMEJBQTBCO0FBQ3BHLHlGQUF5RixnQkFBZ0I7QUFDekcsdUVBQXVFLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDeEksZ0RBQWdELGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx1RUFBbUI7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCxvQkFBb0IsMEVBQWtCO0FBQ3RDO0FBQ0EsT0FBTyx3Q0FBUTtBQUNmLFlBQVksdUNBQU8sVUFBVSwyRUFBMkU7QUFDeEcsZUFBZSx3Q0FBUSxVQUFVLGdFQUFnRTtBQUNqRyxFQUFFO0FBQ0YsT0FBTyxvRUFBMEI7QUFDakMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CLFdBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLHFDQUFxQztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDhCQUE4QjtBQUNwRTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLDJCQUEyQixTQUFTLHFFQUFnQix3Q0FBd0M7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RixpQkFBaUI7QUFDekcsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlCQUF5QixxRkFBNEI7QUFDckQsb0JBQW9CLG9CQUFvQixzQkFBc0IsUUFBUSxlQUFlLDRCQUE0QjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBLHdCQUF3QixxRkFBNEIsbUhBQW1ILDBDQUEwQztBQUNqTixtQkFBbUIsb0JBQW9CLHNCQUFzQixRQUFRLGVBQWUsNEJBQTRCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQiw2Q0FBNkM7QUFDbkY7QUFDQSxxQkFBcUIscUZBQTRCLG1IQUFtSCwwQ0FBMEM7QUFDOU0sZ0JBQWdCLG9CQUFvQixzQkFBc0IsTUFBTSxlQUFlLDRCQUE0QjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTtBQUNGLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7O0FBRUQ7QUFDZ0c7QUFDaEciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXHVwZGF0ZS11c2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IG9yaWdpbkNoZWNrIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCBcIi4uL21pZGRsZXdhcmVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUsIHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4LCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiB9IGZyb20gXCIuL2VtYWlsLXZlcmlmaWNhdGlvbi5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3VwZGF0ZS11c2VyLnRzXG5jb25zdCB1cGRhdGVVc2VyQm9keVNjaGVtYSA9IHoucmVjb3JkKHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkZpZWxkIG5hbWUgbXVzdCBiZSBhIHN0cmluZ1wiIH0pLCB6LmFueSgpKTtcbmNvbnN0IHVwZGF0ZVVzZXIgPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdXBkYXRlLXVzZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJ1cGRhdGVVc2VyXCIsXG5cdGJvZHk6IHVwZGF0ZVVzZXJCb2R5U2NoZW1hLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7XG5cdFx0JEluZmVyOiB7IGJvZHk6IHt9IH0sXG5cdFx0b3BlbmFwaToge1xuXHRcdFx0b3BlcmF0aW9uSWQ6IFwidXBkYXRlVXNlclwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVXBkYXRlIHRoZSBjdXJyZW50IHVzZXJcIixcblx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgaW1hZ2Ugb2YgdGhlIHVzZXJcIixcblx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IH0gfSB9LFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyB1c2VyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBib2R5ID0gY3R4LmJvZHk7XG5cdGlmICh0eXBlb2YgYm9keSAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGJvZHkpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQm9keSBtdXN0IGJlIGFuIG9iamVjdFwiIH0pO1xuXHRpZiAoYm9keS5lbWFpbCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX0NBTl9OT1RfQkVfVVBEQVRFRCB9KTtcblx0Y29uc3QgeyBuYW1lLCBpbWFnZSwgLi4ucmVzdCB9ID0gYm9keTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHMgPSBwYXJzZVVzZXJJbnB1dChjdHguY29udGV4dC5vcHRpb25zLCByZXN0LCBcInVwZGF0ZVwiKTtcblx0aWYgKGltYWdlID09PSB2b2lkIDAgJiYgbmFtZSA9PT0gdm9pZCAwICYmIE9iamVjdC5rZXlzKGFkZGl0aW9uYWxGaWVsZHMpLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIk5vIGZpZWxkcyB0byB1cGRhdGVcIiB9KTtcblx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihzZXNzaW9uLnVzZXIuaWQsIHtcblx0XHRuYW1lLFxuXHRcdGltYWdlLFxuXHRcdC4uLmFkZGl0aW9uYWxGaWVsZHNcblx0fSkgPz8ge1xuXHRcdC4uLnNlc3Npb24udXNlcixcblx0XHQuLi5uYW1lICE9PSB2b2lkIDAgJiYgeyBuYW1lIH0sXG5cdFx0Li4uaW1hZ2UgIT09IHZvaWQgMCAmJiB7IGltYWdlIH0sXG5cdFx0Li4uYWRkaXRpb25hbEZpZWxkc1xuXHR9O1xuXHQvKipcblx0KiBVcGRhdGUgdGhlIHNlc3Npb24gY29va2llIHdpdGggdGhlIG5ldyB1c2VyIGRhdGFcblx0Ki9cblx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRzZXNzaW9uOiBzZXNzaW9uLnNlc3Npb24sXG5cdFx0dXNlcjogdXBkYXRlZFVzZXJcblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgY2hhbmdlUGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvY2hhbmdlLXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwiY2hhbmdlUGFzc3dvcmRcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHBhc3N3b3JkIHRvIHNldFwiIH0pLFxuXHRcdGN1cnJlbnRQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGN1cnJlbnQgcGFzc3dvcmQgaXMgcmVxdWlyZWRcIiB9KSxcblx0XHRyZXZva2VPdGhlclNlc3Npb25zOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiTXVzdCBiZSBhIGJvb2xlYW4gdmFsdWVcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJjaGFuZ2VQYXNzd29yZFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkNoYW5nZSB0aGUgcGFzc3dvcmQgb2YgdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiUGFzc3dvcmQgc3VjY2Vzc2Z1bGx5IGNoYW5nZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTmV3IHNlc3Npb24gdG9rZW4gaWYgb3RoZXIgc2Vzc2lvbnMgd2VyZSByZXZva2VkXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwidXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHByb2ZpbGUgaW1hZ2UgVVJMIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGVtYWlsIGhhcyBiZWVuIHZlcmlmaWVkXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiB0aGUgdXNlciB3YXMgY3JlYXRlZFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFwiZW1haWxWZXJpZmllZFwiLFxuXHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiXG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1widXNlclwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgbmV3UGFzc3dvcmQsIGN1cnJlbnRQYXNzd29yZCwgcmV2b2tlT3RoZXJTZXNzaW9ucyB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdH1cblx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBsb25nXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0fVxuXHRjb25zdCBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKSkuZmluZCgoYWNjb3VudCQxKSA9PiBhY2NvdW50JDEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIgJiYgYWNjb3VudCQxLnBhc3N3b3JkKTtcblx0aWYgKCFhY2NvdW50IHx8ICFhY2NvdW50LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuQ1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORCB9KTtcblx0Y29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChuZXdQYXNzd29yZCk7XG5cdGlmICghYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQudmVyaWZ5KHtcblx0XHRoYXNoOiBhY2NvdW50LnBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkOiBjdXJyZW50UGFzc3dvcmRcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChhY2NvdW50LmlkLCB7IHBhc3N3b3JkOiBwYXNzd29yZEhhc2ggfSk7XG5cdGxldCB0b2tlbiA9IG51bGw7XG5cdGlmIChyZXZva2VPdGhlclNlc3Npb25zKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHNlc3Npb24udXNlci5pZCk7XG5cdFx0Y29uc3QgbmV3U2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHNlc3Npb24udXNlci5pZCk7XG5cdFx0aWYgKCFuZXdTZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfU0VTU0lPTiB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbjogbmV3U2Vzc2lvbixcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdH0pO1xuXHRcdHRva2VuID0gbmV3U2Vzc2lvbi50b2tlbjtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHRva2VuLFxuXHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnVzZXIpXG5cdH0pO1xufSk7XG5jb25zdCBzZXRQYXNzd29yZCA9IGNyZWF0ZUF1dGhFbmRwb2ludCh7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHsgbmV3UGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgcGFzc3dvcmQgdG8gc2V0IGlzIHJlcXVpcmVkXCIgfSkgfSksXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBjdHguYm9keTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IG1pblBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluUGFzc3dvcmRMZW5ndGgpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gc2hvcnRcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19TSE9SVCB9KTtcblx0fVxuXHRjb25zdCBtYXhQYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5tYXhQYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA+IG1heFBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIGxvbmdcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19MT05HIH0pO1xuXHR9XG5cdGNvbnN0IGFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhzZXNzaW9uLnVzZXIuaWQpKS5maW5kKChhY2NvdW50JDEpID0+IGFjY291bnQkMS5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIiAmJiBhY2NvdW50JDEucGFzc3dvcmQpO1xuXHRjb25zdCBwYXNzd29yZEhhc2ggPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKG5ld1Bhc3N3b3JkKTtcblx0aWYgKCFhY2NvdW50KSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdFx0cHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG5cdFx0XHRhY2NvdW50SWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZEhhc2hcblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdH1cblx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcInVzZXIgYWxyZWFkeSBoYXMgYSBwYXNzd29yZFwiIH0pO1xufSk7XG5jb25zdCBkZWxldGVVc2VyID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2RlbGV0ZS11c2VyXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBjYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHVzZXIgaXMgZGVsZXRlZFwiIH0pLm9wdGlvbmFsKCksXG5cdFx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCBvZiB0aGUgdXNlciBpcyByZXF1aXJlZCB0byBkZWxldGUgdGhlIHVzZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRcdHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gZGVsZXRlIHRoZSB1c2VyIGlzIHJlcXVpcmVkXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImRlbGV0ZVVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJEZWxldGUgdGhlIHVzZXJcIixcblx0XHRyZXF1ZXN0Qm9keTogeyBjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0Y2FsbGJhY2tVUkw6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBjYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHVzZXIgaXMgZGVsZXRlZFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBhc3N3b3JkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdXNlcidzIHBhc3N3b3JkLiBSZXF1aXJlZCBpZiBzZXNzaW9uIGlzIG5vdCBmcmVzaFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZGVsZXRpb24gdmVyaWZpY2F0aW9uIHRva2VuXCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gfSB9IH0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgZGVsZXRpb24gcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHN1Y2Nlc3M6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bWVzc2FnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGVudW06IFtcIlVzZXIgZGVsZXRlZFwiLCBcIlZlcmlmaWNhdGlvbiBlbWFpbCBzZW50XCJdLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3RhdHVzIG1lc3NhZ2Ugb2YgdGhlIGRlbGV0aW9uIHByb2Nlc3NcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN1Y2Nlc3NcIiwgXCJtZXNzYWdlXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLnVzZXI/LmRlbGV0ZVVzZXI/LmVuYWJsZWQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJEZWxldGUgdXNlciBpcyBkaXNhYmxlZC4gRW5hYmxlIGl0IGluIHRoZSBvcHRpb25zXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiKTtcblx0fVxuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKGN0eC5ib2R5LnBhc3N3b3JkKSB7XG5cdFx0Y29uc3QgYWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCkpLmZpbmQoKGFjY291bnQkMSkgPT4gYWNjb3VudCQxLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiICYmIGFjY291bnQkMS5wYXNzd29yZCk7XG5cdFx0aWYgKCFhY2NvdW50IHx8ICFhY2NvdW50LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuQ1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORCB9KTtcblx0XHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0XHRoYXNoOiBhY2NvdW50LnBhc3N3b3JkLFxuXHRcdFx0cGFzc3dvcmQ6IGN0eC5ib2R5LnBhc3N3b3JkXG5cdFx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGlmIChjdHguYm9keS50b2tlbikge1xuXHRcdGF3YWl0IGRlbGV0ZVVzZXJDYWxsYmFjayh7XG5cdFx0XHQuLi5jdHgsXG5cdFx0XHRxdWVyeTogeyB0b2tlbjogY3R4LmJvZHkudG9rZW4gfVxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0bWVzc2FnZTogXCJVc2VyIGRlbGV0ZWRcIlxuXHRcdH0pO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uc2VuZERlbGV0ZUFjY291bnRWZXJpZmljYXRpb24pIHtcblx0XHRjb25zdCB0b2tlbiA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcIjAtOVwiLCBcImEtelwiKTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdFx0dmFsdWU6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdGlkZW50aWZpZXI6IGBkZWxldGUtYWNjb3VudC0ke3Rva2VufWAsXG5cdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyAoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LmRlbGV0ZVRva2VuRXhwaXJlc0luIHx8IDM2MDAgKiAyNCkgKiAxZTMpXG5cdFx0fSk7XG5cdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vZGVsZXRlLXVzZXIvY2FsbGJhY2s/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjdHguYm9keS5jYWxsYmFja1VSTCB8fCBcIi9cIn1gO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXIuc2VuZERlbGV0ZUFjY291bnRWZXJpZmljYXRpb24oe1xuXHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyLFxuXHRcdFx0dXJsLFxuXHRcdFx0dG9rZW5cblx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0bWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgc2VudFwiXG5cdFx0fSk7XG5cdH1cblx0aWYgKCFjdHguYm9keS5wYXNzd29yZCAmJiBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlICE9PSAwKSB7XG5cdFx0Y29uc3QgY3VycmVudEFnZSA9IG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLmdldFRpbWUoKTtcblx0XHRjb25zdCBmcmVzaEFnZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZnJlc2hBZ2UgKiAxZTM7XG5cdFx0aWYgKERhdGUubm93KCkgLSBjdXJyZW50QWdlID4gZnJlc2hBZ2UgKiAxZTMpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5TRVNTSU9OX0VYUElSRUQgfSk7XG5cdH1cblx0Y29uc3QgYmVmb3JlRGVsZXRlID0gY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LmJlZm9yZURlbGV0ZTtcblx0aWYgKGJlZm9yZURlbGV0ZSkgYXdhaXQgYmVmb3JlRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVXNlcihzZXNzaW9uLnVzZXIuaWQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKTtcblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRjb25zdCBhZnRlckRlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5hZnRlckRlbGV0ZTtcblx0aWYgKGFmdGVyRGVsZXRlKSBhd2FpdCBhZnRlckRlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IFwiVXNlciBkZWxldGVkXCJcblx0fSk7XG59KTtcbmNvbnN0IGRlbGV0ZVVzZXJDYWxsYmFjayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9kZWxldGUtdXNlci9jYWxsYmFja1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0cXVlcnk6IHoub2JqZWN0KHtcblx0XHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHZlcmlmeSB0aGUgZGVsZXRpb24gcmVxdWVzdFwiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGRlbGV0aW9uXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0dXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJDYWxsYmFjayB0byBjb21wbGV0ZSB1c2VyIGRlbGV0aW9uIHdpdGggdmVyaWZpY2F0aW9uIHRva2VuXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRzdWNjZXNzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgZGVsZXRpb24gd2FzIHN1Y2Nlc3NmdWxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bWVzc2FnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGVudW06IFtcIlVzZXIgZGVsZXRlZFwiXSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNvbmZpcm1hdGlvbiBtZXNzYWdlXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdWNjZXNzXCIsIFwibWVzc2FnZVwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy51c2VyPy5kZWxldGVVc2VyPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRGVsZXRlIHVzZXIgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiB0aGUgb3B0aW9uc1wiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIik7XG5cdH1cblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GTyB9KTtcblx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGBkZWxldGUtYWNjb3VudC0ke2N0eC5xdWVyeS50b2tlbn1gKTtcblx0aWYgKCF0b2tlbiB8fCB0b2tlbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1RPS0VOIH0pO1xuXHRpZiAodG9rZW4udmFsdWUgIT09IHNlc3Npb24udXNlci5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1RPS0VOIH0pO1xuXHRjb25zdCBiZWZvcmVEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYmVmb3JlRGVsZXRlO1xuXHRpZiAoYmVmb3JlRGVsZXRlKSBhd2FpdCBiZWZvcmVEZWxldGUoc2Vzc2lvbi51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVVc2VyKHNlc3Npb24udXNlci5pZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhzZXNzaW9uLnVzZXIuaWQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHRva2VuLmlkKTtcblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRjb25zdCBhZnRlckRlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5hZnRlckRlbGV0ZTtcblx0aWYgKGFmdGVyRGVsZXRlKSBhd2FpdCBhZnRlckRlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCB8fCBcIi9cIik7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBcIlVzZXIgZGVsZXRlZFwiXG5cdH0pO1xufSk7XG5jb25zdCBjaGFuZ2VFbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9jaGFuZ2UtZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0bmV3RW1haWw6IHouZW1haWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIHNldCBtdXN0IGJlIGEgdmFsaWQgZW1haWwgYWRkcmVzc1wiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImNoYW5nZUVtYWlsXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkVtYWlsIGNoYW5nZSByZXF1ZXN0IHByb2Nlc3NlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgcmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0bWVzc2FnZToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRlbnVtOiBbXCJFbWFpbCB1cGRhdGVkXCIsIFwiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnRcIl0sXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN0YXR1cyBtZXNzYWdlIG9mIHRoZSBlbWFpbCBjaGFuZ2UgcHJvY2Vzc1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSxcblx0XHRcdFwiNDIyXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVW5wcm9jZXNzYWJsZSBFbnRpdHkuIEVtYWlsIGFscmVhZHkgZXhpc3RzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH1cblx0XHR9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uY2hhbmdlRW1haWw/LmVuYWJsZWQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJDaGFuZ2UgZW1haWwgaXMgZGlzYWJsZWQuXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJDaGFuZ2UgZW1haWwgaXMgZGlzYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCBuZXdFbWFpbCA9IGN0eC5ib2R5Lm5ld0VtYWlsLnRvTG93ZXJDYXNlKCk7XG5cdGlmIChuZXdFbWFpbCA9PT0gY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRW1haWwgaXMgdGhlIHNhbWVcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkVtYWlsIGlzIHRoZSBzYW1lXCIgfSk7XG5cdH1cblx0aWYgKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwobmV3RW1haWwpKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRW1haWwgYWxyZWFkeSBleGlzdHNcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUwgfSk7XG5cdH1cblx0LyoqXG5cdCogSWYgdGhlIGVtYWlsIGlzIG5vdCB2ZXJpZmllZCwgd2UgY2FuIHVwZGF0ZSB0aGUgZW1haWwgaWYgdGhlIG9wdGlvbiBpcyBlbmFibGVkXG5cdCovXG5cdGlmIChjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWxWZXJpZmllZCAhPT0gdHJ1ZSAmJiBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwudXBkYXRlRW1haWxXaXRob3V0VmVyaWZpY2F0aW9uKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCwgeyBlbWFpbDogbmV3RW1haWwgfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb246IGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbixcblx0XHRcdHVzZXI6IHtcblx0XHRcdFx0Li4uY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRlbWFpbDogbmV3RW1haWxcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0XHRjb25zdCB0b2tlbiQxID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIG5ld0VtYWlsLCB2b2lkIDAsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbik7XG5cdFx0XHRjb25zdCB1cmwkMSA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VuJDF9JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0Li4uY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdGVtYWlsOiBuZXdFbWFpbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cmw6IHVybCQxLFxuXHRcdFx0XHR0b2tlbjogdG9rZW4kMVxuXHRcdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWxWZXJpZmllZCAmJiAoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbENvbmZpcm1hdGlvbiB8fCBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwuc2VuZENoYW5nZUVtYWlsVmVyaWZpY2F0aW9uKSkge1xuXHRcdGNvbnN0IHRva2VuJDEgPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsLCBuZXdFbWFpbCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLCB7IHJlcXVlc3RUeXBlOiBcImNoYW5nZS1lbWFpbC1jb25maXJtYXRpb25cIiB9KTtcblx0XHRjb25zdCB1cmwkMSA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VuJDF9JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRjb25zdCBzZW5kRm4gPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwuc2VuZENoYW5nZUVtYWlsQ29uZmlybWF0aW9uIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5jaGFuZ2VFbWFpbC5zZW5kQ2hhbmdlRW1haWxWZXJpZmljYXRpb247XG5cdFx0aWYgKHNlbmRGbikgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChzZW5kRm4oe1xuXHRcdFx0dXNlcjogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0bmV3RW1haWwsXG5cdFx0XHR1cmw6IHVybCQxLFxuXHRcdFx0dG9rZW46IHRva2VuJDFcblx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0fVxuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkLlwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWwsIG5ld0VtYWlsLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4sIHsgcmVxdWVzdFR5cGU6IFwiY2hhbmdlLWVtYWlsLXZlcmlmaWNhdGlvblwiIH0pO1xuXHRjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjdHguYm9keS5jYWxsYmFja1VSTCB8fCBcIi9cIn1gO1xuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHR1c2VyOiB7XG5cdFx0XHQuLi5jdHguY29udGV4dC5zZXNzaW9uLnVzZXIsXG5cdFx0XHRlbWFpbDogbmV3RW1haWxcblx0XHR9LFxuXHRcdHVybCxcblx0XHR0b2tlblxuXHR9LCBjdHgucmVxdWVzdCkpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjaGFuZ2VFbWFpbCwgY2hhbmdlUGFzc3dvcmQsIGRlbGV0ZVVzZXIsIGRlbGV0ZVVzZXJDYWxsYmFjaywgc2V0UGFzc3dvcmQsIHVwZGF0ZVVzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZS11c2VyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toAuthEndpoints: () => (/* binding */ toAuthEndpoints)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! defu */ \"(action-browser)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n//#region src/api/to-auth-endpoints.ts\nconst defuReplaceArrays = (0,defu__WEBPACK_IMPORTED_MODULE_3__.createDefu)((obj, key, value) => {\n\tif (Array.isArray(obj[key]) && Array.isArray(value)) {\n\t\tobj[key] = value;\n\t\treturn true;\n\t}\n});\nconst hooksSourceWeakMap = /* @__PURE__ */ new WeakMap();\nfunction toAuthEndpoints(endpoints, ctx) {\n\tconst api = {};\n\tfor (const [key, endpoint] of Object.entries(endpoints)) {\n\t\tapi[key] = async (context) => {\n\t\t\tconst run = async () => {\n\t\t\t\tconst authContext = await ctx;\n\t\t\t\tlet internalContext = {\n\t\t\t\t\t...context,\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t...authContext,\n\t\t\t\t\t\treturned: void 0,\n\t\t\t\t\t\tresponseHeaders: void 0,\n\t\t\t\t\t\tsession: null\n\t\t\t\t\t},\n\t\t\t\t\tpath: endpoint.path,\n\t\t\t\t\theaders: context?.headers ? new Headers(context?.headers) : void 0\n\t\t\t\t};\n\t\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, async () => {\n\t\t\t\t\tconst { beforeHooks, afterHooks } = getHooks(authContext);\n\t\t\t\t\tconst before = await runBeforeHooks(internalContext, beforeHooks);\n\t\t\t\t\t/**\n\t\t\t\t\t* If `before.context` is returned, it should\n\t\t\t\t\t* get merged with the original context\n\t\t\t\t\t*/\n\t\t\t\t\tif (\"context\" in before && before.context && typeof before.context === \"object\") {\n\t\t\t\t\t\tconst { headers, ...rest } = before.context;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* Headers should be merged differently\n\t\t\t\t\t\t* so the hook doesn't override the whole\n\t\t\t\t\t\t* header\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (headers) headers.forEach((value, key$1) => {\n\t\t\t\t\t\t\tinternalContext.headers.set(key$1, value);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinternalContext = defuReplaceArrays(rest, internalContext);\n\t\t\t\t\t} else if (before) return context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(before, { headers: context?.headers }) : context?.returnHeaders ? {\n\t\t\t\t\t\theaders: context?.headers,\n\t\t\t\t\t\tresponse: before\n\t\t\t\t\t} : before;\n\t\t\t\t\tinternalContext.asResponse = false;\n\t\t\t\t\tinternalContext.returnHeaders = true;\n\t\t\t\t\tinternalContext.returnStatus = true;\n\t\t\t\t\tconst result = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, () => endpoint(internalContext)).catch((e) => {\n\t\t\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError)\n /**\n\t\t\t\t\t\t* API Errors from response are caught\n\t\t\t\t\t\t* and returned to hooks\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresponse: e,\n\t\t\t\t\t\t\tstatus: e.statusCode,\n\t\t\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tif (result && result instanceof Response) return result;\n\t\t\t\t\tinternalContext.context.returned = result.response;\n\t\t\t\t\tinternalContext.context.responseHeaders = result.headers;\n\t\t\t\t\tconst after = await runAfterHooks(internalContext, afterHooks);\n\t\t\t\t\tif (after.response) result.response = after.response;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(authContext.logger.level, \"debug\")) result.response.stack = result.response.errorStack;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && !context?.asResponse) throw result.response;\n\t\t\t\t\treturn context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(result.response, {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t}) : context?.returnHeaders ? context?.returnStatus ? {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response\n\t\t\t\t\t} : context?.returnStatus ? {\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : result.response;\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.hasRequestState)()) return run();\n\t\t\telse return (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithRequestState)(/* @__PURE__ */ new WeakMap(), run);\n\t\t};\n\t\tapi[key].path = endpoint.path;\n\t\tapi[key].options = endpoint.options;\n\t}\n\treturn api;\n}\nasync function runBeforeHooks(context, hooks) {\n\tlet modifiedContext = {};\n\tfor (const hook of hooks) {\n\t\tlet matched = false;\n\t\ttry {\n\t\t\tmatched = hook.matcher(context);\n\t\t} catch (error) {\n\t\t\tconst hookSource = hooksSourceWeakMap.get(hook.handler) ?? \"unknown\";\n\t\t\tcontext.context.logger.error(`An error occurred during ${hookSource} hook matcher execution:`, error);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_2__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `An error occurred during hook matcher execution. Check the logs for more details.` });\n\t\t}\n\t\tif (matched) {\n\t\t\tconst result = await hook.handler({\n\t\t\t\t...context,\n\t\t\t\treturnHeaders: false\n\t\t\t}).catch((e) => {\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\tthrow e;\n\t\t\t});\n\t\t\tif (result && typeof result === \"object\") {\n\t\t\t\tif (\"context\" in result && typeof result.context === \"object\") {\n\t\t\t\t\tconst { headers, ...rest } = result.context;\n\t\t\t\t\tif (headers instanceof Headers) if (modifiedContext.headers) headers.forEach((value, key) => {\n\t\t\t\t\t\tmodifiedContext.headers?.set(key, value);\n\t\t\t\t\t});\n\t\t\t\t\telse modifiedContext.headers = headers;\n\t\t\t\t\tmodifiedContext = defuReplaceArrays(rest, modifiedContext);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\treturn { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n\tfor (const hook of hooks) if (hook.matcher(context)) {\n\t\tconst result = await hook.handler(context).catch((e) => {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\treturn {\n\t\t\t\t\tresponse: e,\n\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow e;\n\t\t});\n\t\tif (result.headers) result.headers.forEach((value, key) => {\n\t\t\tif (!context.context.responseHeaders) context.context.responseHeaders = new Headers({ [key]: value });\n\t\t\telse if (key.toLowerCase() === \"set-cookie\") context.context.responseHeaders.append(key, value);\n\t\t\telse context.context.responseHeaders.set(key, value);\n\t\t});\n\t\tif (result.response) context.context.returned = result.response;\n\t}\n\treturn {\n\t\tresponse: context.context.returned,\n\t\theaders: context.context.responseHeaders\n\t};\n}\nfunction getHooks(authContext) {\n\tconst plugins = authContext.options.plugins || [];\n\tconst beforeHooks = [];\n\tconst afterHooks = [];\n\tconst beforeHookHandler = authContext.options.hooks?.before;\n\tif (beforeHookHandler) {\n\t\thooksSourceWeakMap.set(beforeHookHandler, \"user\");\n\t\tbeforeHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: beforeHookHandler\n\t\t});\n\t}\n\tconst afterHookHandler = authContext.options.hooks?.after;\n\tif (afterHookHandler) {\n\t\thooksSourceWeakMap.set(afterHookHandler, \"user\");\n\t\tafterHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: afterHookHandler\n\t\t});\n\t}\n\tconst pluginBeforeHooks = plugins.filter((plugin) => plugin.hooks?.before).map((plugin) => plugin.hooks?.before).flat();\n\tconst pluginAfterHooks = plugins.filter((plugin) => plugin.hooks?.after).map((plugin) => plugin.hooks?.after).flat();\n\t/**\n\t* Add plugin added hooks at last\n\t*/\n\tif (pluginBeforeHooks.length) beforeHooks.push(...pluginBeforeHooks);\n\tif (pluginAfterHooks.length) afterHooks.push(...pluginAfterHooks);\n\treturn {\n\t\tbeforeHooks,\n\t\tafterHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=to-auth-endpoints.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3RvLWF1dGgtZW5kcG9pbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5RztBQUNoRDtBQUNOO0FBQ2pCOztBQUVsQztBQUNBLDBCQUEwQixnREFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUZBQXNCO0FBQ2pDLGFBQWEsMEJBQTBCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUJBQW1CO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTyw4Q0FBOEMsdURBQVUsV0FBVywyQkFBMkI7QUFDckc7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUZBQXNCO0FBQ2hELHVCQUF1QixpREFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGlEQUFRLElBQUksdUVBQWdCO0FBQ2hFLG9DQUFvQyxpREFBUTtBQUM1QyxrQ0FBa0MsdURBQVU7QUFDNUM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGFBQWEsMEVBQWU7QUFDNUIsZUFBZSw4RUFBbUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNERBQTRELFlBQVk7QUFDeEUsYUFBYSxpREFBUSw0QkFBNEIsOEZBQThGO0FBQy9JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUJBQXFCLGlEQUFRLElBQUksdUVBQWdCO0FBQ2pEO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaURBQVE7QUFDNUIsUUFBUSx1RUFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EseUZBQXlGLGNBQWM7QUFDdkc7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxcdG8tYXV0aC1lbmRwb2ludHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhhc1JlcXVlc3RTdGF0ZSwgcnVuV2l0aEVuZHBvaW50Q29udGV4dCwgcnVuV2l0aFJlcXVlc3RTdGF0ZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5pbXBvcnQgeyBzaG91bGRQdWJsaXNoTG9nIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQVBJRXJyb3IsIHRvUmVzcG9uc2UgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZURlZnUgfSBmcm9tIFwiZGVmdVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS90by1hdXRoLWVuZHBvaW50cy50c1xuY29uc3QgZGVmdVJlcGxhY2VBcnJheXMgPSBjcmVhdGVEZWZ1KChvYmosIGtleSwgdmFsdWUpID0+IHtcblx0aWYgKEFycmF5LmlzQXJyYXkob2JqW2tleV0pICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0b2JqW2tleV0gPSB2YWx1ZTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxufSk7XG5jb25zdCBob29rc1NvdXJjZVdlYWtNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRvQXV0aEVuZHBvaW50cyhlbmRwb2ludHMsIGN0eCkge1xuXHRjb25zdCBhcGkgPSB7fTtcblx0Zm9yIChjb25zdCBba2V5LCBlbmRwb2ludF0gb2YgT2JqZWN0LmVudHJpZXMoZW5kcG9pbnRzKSkge1xuXHRcdGFwaVtrZXldID0gYXN5bmMgKGNvbnRleHQpID0+IHtcblx0XHRcdGNvbnN0IHJ1biA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgYXV0aENvbnRleHQgPSBhd2FpdCBjdHg7XG5cdFx0XHRcdGxldCBpbnRlcm5hbENvbnRleHQgPSB7XG5cdFx0XHRcdFx0Li4uY29udGV4dCxcblx0XHRcdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdFx0XHQuLi5hdXRoQ29udGV4dCxcblx0XHRcdFx0XHRcdHJldHVybmVkOiB2b2lkIDAsXG5cdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnM6IHZvaWQgMCxcblx0XHRcdFx0XHRcdHNlc3Npb246IG51bGxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHBhdGg6IGVuZHBvaW50LnBhdGgsXG5cdFx0XHRcdFx0aGVhZGVyczogY29udGV4dD8uaGVhZGVycyA/IG5ldyBIZWFkZXJzKGNvbnRleHQ/LmhlYWRlcnMpIDogdm9pZCAwXG5cdFx0XHRcdH07XG5cdFx0XHRcdHJldHVybiBydW5XaXRoRW5kcG9pbnRDb250ZXh0KGludGVybmFsQ29udGV4dCwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHsgYmVmb3JlSG9va3MsIGFmdGVySG9va3MgfSA9IGdldEhvb2tzKGF1dGhDb250ZXh0KTtcblx0XHRcdFx0XHRjb25zdCBiZWZvcmUgPSBhd2FpdCBydW5CZWZvcmVIb29rcyhpbnRlcm5hbENvbnRleHQsIGJlZm9yZUhvb2tzKTtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQqIElmIGBiZWZvcmUuY29udGV4dGAgaXMgcmV0dXJuZWQsIGl0IHNob3VsZFxuXHRcdFx0XHRcdCogZ2V0IG1lcmdlZCB3aXRoIHRoZSBvcmlnaW5hbCBjb250ZXh0XG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRpZiAoXCJjb250ZXh0XCIgaW4gYmVmb3JlICYmIGJlZm9yZS5jb250ZXh0ICYmIHR5cGVvZiBiZWZvcmUuY29udGV4dCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgeyBoZWFkZXJzLCAuLi5yZXN0IH0gPSBiZWZvcmUuY29udGV4dDtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0KiBIZWFkZXJzIHNob3VsZCBiZSBtZXJnZWQgZGlmZmVyZW50bHlcblx0XHRcdFx0XHRcdCogc28gdGhlIGhvb2sgZG9lc24ndCBvdmVycmlkZSB0aGUgd2hvbGVcblx0XHRcdFx0XHRcdCogaGVhZGVyXG5cdFx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdFx0aWYgKGhlYWRlcnMpIGhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSQxKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGludGVybmFsQ29udGV4dC5oZWFkZXJzLnNldChrZXkkMSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQgPSBkZWZ1UmVwbGFjZUFycmF5cyhyZXN0LCBpbnRlcm5hbENvbnRleHQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYmVmb3JlKSByZXR1cm4gY29udGV4dD8uYXNSZXNwb25zZSA/IHRvUmVzcG9uc2UoYmVmb3JlLCB7IGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMgfSkgOiBjb250ZXh0Py5yZXR1cm5IZWFkZXJzID8ge1xuXHRcdFx0XHRcdFx0aGVhZGVyczogY29udGV4dD8uaGVhZGVycyxcblx0XHRcdFx0XHRcdHJlc3BvbnNlOiBiZWZvcmVcblx0XHRcdFx0XHR9IDogYmVmb3JlO1xuXHRcdFx0XHRcdGludGVybmFsQ29udGV4dC5hc1Jlc3BvbnNlID0gZmFsc2U7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LnJldHVybkhlYWRlcnMgPSB0cnVlO1xuXHRcdFx0XHRcdGludGVybmFsQ29udGV4dC5yZXR1cm5TdGF0dXMgPSB0cnVlO1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bldpdGhFbmRwb2ludENvbnRleHQoaW50ZXJuYWxDb250ZXh0LCAoKSA9PiBlbmRwb2ludChpbnRlcm5hbENvbnRleHQpKS5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcilcbiAvKipcblx0XHRcdFx0XHRcdCogQVBJIEVycm9ycyBmcm9tIHJlc3BvbnNlIGFyZSBjYXVnaHRcblx0XHRcdFx0XHRcdCogYW5kIHJldHVybmVkIHRvIGhvb2tzXG5cdFx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2U6IGUsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogZS5zdGF0dXNDb2RlLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiBlLmhlYWRlcnMgPyBuZXcgSGVhZGVycyhlLmhlYWRlcnMpIDogbnVsbFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBSZXNwb25zZSkgcmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuY29udGV4dC5yZXR1cm5lZCA9IHJlc3VsdC5yZXNwb25zZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuY29udGV4dC5yZXNwb25zZUhlYWRlcnMgPSByZXN1bHQuaGVhZGVycztcblx0XHRcdFx0XHRjb25zdCBhZnRlciA9IGF3YWl0IHJ1bkFmdGVySG9va3MoaW50ZXJuYWxDb250ZXh0LCBhZnRlckhvb2tzKTtcblx0XHRcdFx0XHRpZiAoYWZ0ZXIucmVzcG9uc2UpIHJlc3VsdC5yZXNwb25zZSA9IGFmdGVyLnJlc3BvbnNlO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQucmVzcG9uc2UgaW5zdGFuY2VvZiBBUElFcnJvciAmJiBzaG91bGRQdWJsaXNoTG9nKGF1dGhDb250ZXh0LmxvZ2dlci5sZXZlbCwgXCJkZWJ1Z1wiKSkgcmVzdWx0LnJlc3BvbnNlLnN0YWNrID0gcmVzdWx0LnJlc3BvbnNlLmVycm9yU3RhY2s7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5yZXNwb25zZSBpbnN0YW5jZW9mIEFQSUVycm9yICYmICFjb250ZXh0Py5hc1Jlc3BvbnNlKSB0aHJvdyByZXN1bHQucmVzcG9uc2U7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbnRleHQ/LmFzUmVzcG9uc2UgPyB0b1Jlc3BvbnNlKHJlc3VsdC5yZXNwb25zZSwge1xuXHRcdFx0XHRcdFx0aGVhZGVyczogcmVzdWx0LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHJlc3VsdC5zdGF0dXNcblx0XHRcdFx0XHR9KSA6IGNvbnRleHQ/LnJldHVybkhlYWRlcnMgPyBjb250ZXh0Py5yZXR1cm5TdGF0dXMgPyB7XG5cdFx0XHRcdFx0XHRoZWFkZXJzOiByZXN1bHQuaGVhZGVycyxcblx0XHRcdFx0XHRcdHJlc3BvbnNlOiByZXN1bHQucmVzcG9uc2UsXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHJlc3VsdC5zdGF0dXNcblx0XHRcdFx0XHR9IDoge1xuXHRcdFx0XHRcdFx0aGVhZGVyczogcmVzdWx0LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlXG5cdFx0XHRcdFx0fSA6IGNvbnRleHQ/LnJldHVyblN0YXR1cyA/IHtcblx0XHRcdFx0XHRcdHJlc3BvbnNlOiByZXN1bHQucmVzcG9uc2UsXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHJlc3VsdC5zdGF0dXNcblx0XHRcdFx0XHR9IDogcmVzdWx0LnJlc3BvbnNlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHRpZiAoYXdhaXQgaGFzUmVxdWVzdFN0YXRlKCkpIHJldHVybiBydW4oKTtcblx0XHRcdGVsc2UgcmV0dXJuIHJ1bldpdGhSZXF1ZXN0U3RhdGUoLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIHJ1bik7XG5cdFx0fTtcblx0XHRhcGlba2V5XS5wYXRoID0gZW5kcG9pbnQucGF0aDtcblx0XHRhcGlba2V5XS5vcHRpb25zID0gZW5kcG9pbnQub3B0aW9ucztcblx0fVxuXHRyZXR1cm4gYXBpO1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQmVmb3JlSG9va3MoY29udGV4dCwgaG9va3MpIHtcblx0bGV0IG1vZGlmaWVkQ29udGV4dCA9IHt9O1xuXHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcblx0XHRsZXQgbWF0Y2hlZCA9IGZhbHNlO1xuXHRcdHRyeSB7XG5cdFx0XHRtYXRjaGVkID0gaG9vay5tYXRjaGVyKGNvbnRleHQpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zdCBob29rU291cmNlID0gaG9va3NTb3VyY2VXZWFrTWFwLmdldChob29rLmhhbmRsZXIpID8/IFwidW5rbm93blwiO1xuXHRcdFx0Y29udGV4dC5jb250ZXh0LmxvZ2dlci5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nICR7aG9va1NvdXJjZX0gaG9vayBtYXRjaGVyIGV4ZWN1dGlvbjpgLCBlcnJvcik7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBgQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIGhvb2sgbWF0Y2hlciBleGVjdXRpb24uIENoZWNrIHRoZSBsb2dzIGZvciBtb3JlIGRldGFpbHMuYCB9KTtcblx0XHR9XG5cdFx0aWYgKG1hdGNoZWQpIHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhvb2suaGFuZGxlcih7XG5cdFx0XHRcdC4uLmNvbnRleHQsXG5cdFx0XHRcdHJldHVybkhlYWRlcnM6IGZhbHNlXG5cdFx0XHR9KS5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yICYmIHNob3VsZFB1Ymxpc2hMb2coY29udGV4dC5jb250ZXh0LmxvZ2dlci5sZXZlbCwgXCJkZWJ1Z1wiKSkgZS5zdGFjayA9IGUuZXJyb3JTdGFjaztcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdGlmIChcImNvbnRleHRcIiBpbiByZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC5jb250ZXh0ID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBoZWFkZXJzLCAuLi5yZXN0IH0gPSByZXN1bHQuY29udGV4dDtcblx0XHRcdFx0XHRpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIGlmIChtb2RpZmllZENvbnRleHQuaGVhZGVycykgaGVhZGVycy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG5cdFx0XHRcdFx0XHRtb2RpZmllZENvbnRleHQuaGVhZGVycz8uc2V0KGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGVsc2UgbW9kaWZpZWRDb250ZXh0LmhlYWRlcnMgPSBoZWFkZXJzO1xuXHRcdFx0XHRcdG1vZGlmaWVkQ29udGV4dCA9IGRlZnVSZXBsYWNlQXJyYXlzKHJlc3QsIG1vZGlmaWVkQ29udGV4dCk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHsgY29udGV4dDogbW9kaWZpZWRDb250ZXh0IH07XG59XG5hc3luYyBmdW5jdGlvbiBydW5BZnRlckhvb2tzKGNvbnRleHQsIGhvb2tzKSB7XG5cdGZvciAoY29uc3QgaG9vayBvZiBob29rcykgaWYgKGhvb2subWF0Y2hlcihjb250ZXh0KSkge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhvb2suaGFuZGxlcihjb250ZXh0KS5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcikge1xuXHRcdFx0XHRpZiAoc2hvdWxkUHVibGlzaExvZyhjb250ZXh0LmNvbnRleHQubG9nZ2VyLmxldmVsLCBcImRlYnVnXCIpKSBlLnN0YWNrID0gZS5lcnJvclN0YWNrO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHJlc3BvbnNlOiBlLFxuXHRcdFx0XHRcdGhlYWRlcnM6IGUuaGVhZGVycyA/IG5ldyBIZWFkZXJzKGUuaGVhZGVycykgOiBudWxsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH0pO1xuXHRcdGlmIChyZXN1bHQuaGVhZGVycykgcmVzdWx0LmhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuXHRcdFx0aWYgKCFjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzKSBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzID0gbmV3IEhlYWRlcnMoeyBba2V5XTogdmFsdWUgfSk7XG5cdFx0XHRlbHNlIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gXCJzZXQtY29va2llXCIpIGNvbnRleHQuY29udGV4dC5yZXNwb25zZUhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpO1xuXHRcdFx0ZWxzZSBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzLnNldChrZXksIHZhbHVlKTtcblx0XHR9KTtcblx0XHRpZiAocmVzdWx0LnJlc3BvbnNlKSBjb250ZXh0LmNvbnRleHQucmV0dXJuZWQgPSByZXN1bHQucmVzcG9uc2U7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRyZXNwb25zZTogY29udGV4dC5jb250ZXh0LnJldHVybmVkLFxuXHRcdGhlYWRlcnM6IGNvbnRleHQuY29udGV4dC5yZXNwb25zZUhlYWRlcnNcblx0fTtcbn1cbmZ1bmN0aW9uIGdldEhvb2tzKGF1dGhDb250ZXh0KSB7XG5cdGNvbnN0IHBsdWdpbnMgPSBhdXRoQ29udGV4dC5vcHRpb25zLnBsdWdpbnMgfHwgW107XG5cdGNvbnN0IGJlZm9yZUhvb2tzID0gW107XG5cdGNvbnN0IGFmdGVySG9va3MgPSBbXTtcblx0Y29uc3QgYmVmb3JlSG9va0hhbmRsZXIgPSBhdXRoQ29udGV4dC5vcHRpb25zLmhvb2tzPy5iZWZvcmU7XG5cdGlmIChiZWZvcmVIb29rSGFuZGxlcikge1xuXHRcdGhvb2tzU291cmNlV2Vha01hcC5zZXQoYmVmb3JlSG9va0hhbmRsZXIsIFwidXNlclwiKTtcblx0XHRiZWZvcmVIb29rcy5wdXNoKHtcblx0XHRcdG1hdGNoZXI6ICgpID0+IHRydWUsXG5cdFx0XHRoYW5kbGVyOiBiZWZvcmVIb29rSGFuZGxlclxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IGFmdGVySG9va0hhbmRsZXIgPSBhdXRoQ29udGV4dC5vcHRpb25zLmhvb2tzPy5hZnRlcjtcblx0aWYgKGFmdGVySG9va0hhbmRsZXIpIHtcblx0XHRob29rc1NvdXJjZVdlYWtNYXAuc2V0KGFmdGVySG9va0hhbmRsZXIsIFwidXNlclwiKTtcblx0XHRhZnRlckhvb2tzLnB1c2goe1xuXHRcdFx0bWF0Y2hlcjogKCkgPT4gdHJ1ZSxcblx0XHRcdGhhbmRsZXI6IGFmdGVySG9va0hhbmRsZXJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBwbHVnaW5CZWZvcmVIb29rcyA9IHBsdWdpbnMuZmlsdGVyKChwbHVnaW4pID0+IHBsdWdpbi5ob29rcz8uYmVmb3JlKS5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLmhvb2tzPy5iZWZvcmUpLmZsYXQoKTtcblx0Y29uc3QgcGx1Z2luQWZ0ZXJIb29rcyA9IHBsdWdpbnMuZmlsdGVyKChwbHVnaW4pID0+IHBsdWdpbi5ob29rcz8uYWZ0ZXIpLm1hcCgocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmFmdGVyKS5mbGF0KCk7XG5cdC8qKlxuXHQqIEFkZCBwbHVnaW4gYWRkZWQgaG9va3MgYXQgbGFzdFxuXHQqL1xuXHRpZiAocGx1Z2luQmVmb3JlSG9va3MubGVuZ3RoKSBiZWZvcmVIb29rcy5wdXNoKC4uLnBsdWdpbkJlZm9yZUhvb2tzKTtcblx0aWYgKHBsdWdpbkFmdGVySG9va3MubGVuZ3RoKSBhZnRlckhvb2tzLnB1c2goLi4ucGx1Z2luQWZ0ZXJIb29rcyk7XG5cdHJldHVybiB7XG5cdFx0YmVmb3JlSG9va3MsXG5cdFx0YWZ0ZXJIb29rc1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHRvQXV0aEVuZHBvaW50cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG8tYXV0aC1lbmRwb2ludHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBetterAuth: () => (/* binding */ createBetterAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/helpers.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/auth/base.ts\nconst createBetterAuth = (options, initFn) => {\n\tconst authContext = initFn(options);\n\tconst { api } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getEndpoints)(authContext, options);\n\treturn {\n\t\thandler: async (request) => {\n\t\t\tconst ctx = await authContext;\n\t\t\tconst basePath = ctx.options.basePath || \"/api/auth\";\n\t\t\tif (!ctx.options.baseURL) {\n\t\t\t\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(void 0, basePath, request, void 0, ctx.options.advanced?.trustedProxyHeaders);\n\t\t\t\tif (baseURL) {\n\t\t\t\t\tctx.baseURL = baseURL;\n\t\t\t\t\tctx.options.baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(ctx.baseURL) || void 0;\n\t\t\t\t} else throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Could not get base URL from request. Please provide a valid base URL.\");\n\t\t\t}\n\t\t\tctx.trustedOrigins = await (0,_context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getTrustedOrigins)(ctx.options, request);\n\t\t\tconst { handler } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.router)(ctx, options);\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__.runWithAdapter)(ctx.adapter, () => handler(request));\n\t\t},\n\t\tapi,\n\t\toptions,\n\t\t$context: authContext,\n\t\t$ERROR_CODES: {\n\t\t\t...options.plugins?.reduce((acc, plugin) => {\n\t\t\t\tif (plugin.$ERROR_CODES) return {\n\t\t\t\t\t...acc,\n\t\t\t\t\t...plugin.$ERROR_CODES\n\t\t\t\t};\n\t\t\t\treturn acc;\n\t\t\t}, {}),\n\t\t\t..._better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BASE_ERROR_CODES\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXV0aC9iYXNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUQ7QUFDRDtBQUNHO0FBQ0E7QUFDaUI7O0FBRTVFO0FBQ0E7QUFDQTtBQUNBLFNBQVMsTUFBTSxFQUFFLDREQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMERBQVU7QUFDOUI7QUFDQTtBQUNBLDJCQUEyQix5REFBUztBQUNwQyxNQUFNLGVBQWUsb0VBQWU7QUFDcEM7QUFDQSw4QkFBOEIsdUVBQWlCO0FBQy9DLFdBQVcsVUFBVSxFQUFFLHNEQUFNO0FBQzdCLFVBQVUseUVBQWM7QUFDeEIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1IsTUFBTSxxRUFBZ0I7QUFDdEI7QUFDQTtBQUNBOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGF1dGhcXGJhc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VVUkwsIGdldE9yaWdpbiB9IGZyb20gXCIuLi91dGlscy91cmwubWpzXCI7XG5pbXBvcnQgeyBnZXRFbmRwb2ludHMsIHJvdXRlciB9IGZyb20gXCIuLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRUcnVzdGVkT3JpZ2lucyB9IGZyb20gXCIuLi9jb250ZXh0L2hlbHBlcnMubWpzXCI7XG5pbXBvcnQgeyBydW5XaXRoQWRhcHRlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTLCBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL2Jhc2UudHNcbmNvbnN0IGNyZWF0ZUJldHRlckF1dGggPSAob3B0aW9ucywgaW5pdEZuKSA9PiB7XG5cdGNvbnN0IGF1dGhDb250ZXh0ID0gaW5pdEZuKG9wdGlvbnMpO1xuXHRjb25zdCB7IGFwaSB9ID0gZ2V0RW5kcG9pbnRzKGF1dGhDb250ZXh0LCBvcHRpb25zKTtcblx0cmV0dXJuIHtcblx0XHRoYW5kbGVyOiBhc3luYyAocmVxdWVzdCkgPT4ge1xuXHRcdFx0Y29uc3QgY3R4ID0gYXdhaXQgYXV0aENvbnRleHQ7XG5cdFx0XHRjb25zdCBiYXNlUGF0aCA9IGN0eC5vcHRpb25zLmJhc2VQYXRoIHx8IFwiL2FwaS9hdXRoXCI7XG5cdFx0XHRpZiAoIWN0eC5vcHRpb25zLmJhc2VVUkwpIHtcblx0XHRcdFx0Y29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwodm9pZCAwLCBiYXNlUGF0aCwgcmVxdWVzdCwgdm9pZCAwLCBjdHgub3B0aW9ucy5hZHZhbmNlZD8udHJ1c3RlZFByb3h5SGVhZGVycyk7XG5cdFx0XHRcdGlmIChiYXNlVVJMKSB7XG5cdFx0XHRcdFx0Y3R4LmJhc2VVUkwgPSBiYXNlVVJMO1xuXHRcdFx0XHRcdGN0eC5vcHRpb25zLmJhc2VVUkwgPSBnZXRPcmlnaW4oY3R4LmJhc2VVUkwpIHx8IHZvaWQgMDtcblx0XHRcdFx0fSBlbHNlIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IGJhc2UgVVJMIGZyb20gcmVxdWVzdC4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5cIik7XG5cdFx0XHR9XG5cdFx0XHRjdHgudHJ1c3RlZE9yaWdpbnMgPSBhd2FpdCBnZXRUcnVzdGVkT3JpZ2lucyhjdHgub3B0aW9ucywgcmVxdWVzdCk7XG5cdFx0XHRjb25zdCB7IGhhbmRsZXIgfSA9IHJvdXRlcihjdHgsIG9wdGlvbnMpO1xuXHRcdFx0cmV0dXJuIHJ1bldpdGhBZGFwdGVyKGN0eC5hZGFwdGVyLCAoKSA9PiBoYW5kbGVyKHJlcXVlc3QpKTtcblx0XHR9LFxuXHRcdGFwaSxcblx0XHRvcHRpb25zLFxuXHRcdCRjb250ZXh0OiBhdXRoQ29udGV4dCxcblx0XHQkRVJST1JfQ09ERVM6IHtcblx0XHRcdC4uLm9wdGlvbnMucGx1Z2lucz8ucmVkdWNlKChhY2MsIHBsdWdpbikgPT4ge1xuXHRcdFx0XHRpZiAocGx1Z2luLiRFUlJPUl9DT0RFUykgcmV0dXJuIHtcblx0XHRcdFx0XHQuLi5hY2MsXG5cdFx0XHRcdFx0Li4ucGx1Z2luLiRFUlJPUl9DT0RFU1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0fSwge30pLFxuXHRcdFx0Li4uQkFTRV9FUlJPUl9DT0RFU1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlQmV0dGVyQXV0aCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   betterAuth: () => (/* binding */ betterAuth)\n/* harmony export */ });\n/* harmony import */ var _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../context/init.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs\");\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs\");\n\n\n\n//#region src/auth/full.ts\n/**\n* Better Auth initializer for full mode (with Kysely)\n*\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth\";\n*\n* const auth = betterAuth({\n* \tdatabase: new PostgresDialect({ connection: process.env.DATABASE_URL }),\n* });\n* ```\n*\n* For minimal mode (without Kysely), import from `better-auth/minimal` instead\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth/minimal\";\n*\n* const auth = betterAuth({\n*\t  database: drizzleAdapter(db, { provider: \"pg\" }),\n* });\n*/\nconst betterAuth = (options) => {\n\treturn (0,_base_mjs__WEBPACK_IMPORTED_MODULE_1__.createBetterAuth)(options, _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__.init);\n};\n\n//#endregion\n\n//# sourceMappingURL=full.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXV0aC9mdWxsLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDRzs7QUFFOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQSxtQ0FBbUMsc0NBQXNDO0FBQ3pFLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQSxtQ0FBbUMsZ0JBQWdCO0FBQ25ELEdBQUc7QUFDSDtBQUNBO0FBQ0EsUUFBUSwyREFBZ0IsVUFBVSxtREFBSTtBQUN0Qzs7QUFFQTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhdXRoXFxmdWxsLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0IH0gZnJvbSBcIi4uL2NvbnRleHQvaW5pdC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUJldHRlckF1dGggfSBmcm9tIFwiLi9iYXNlLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2F1dGgvZnVsbC50c1xuLyoqXG4qIEJldHRlciBBdXRoIGluaXRpYWxpemVyIGZvciBmdWxsIG1vZGUgKHdpdGggS3lzZWx5KVxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcImJldHRlci1hdXRoXCI7XG4qXG4qIGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcbiogXHRkYXRhYmFzZTogbmV3IFBvc3RncmVzRGlhbGVjdCh7IGNvbm5lY3Rpb246IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCB9KSxcbiogfSk7XG4qIGBgYFxuKlxuKiBGb3IgbWluaW1hbCBtb2RlICh3aXRob3V0IEt5c2VseSksIGltcG9ydCBmcm9tIGBiZXR0ZXItYXV0aC9taW5pbWFsYCBpbnN0ZWFkXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGJldHRlckF1dGggfSBmcm9tIFwiYmV0dGVyLWF1dGgvbWluaW1hbFwiO1xuKlxuKiBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qXHQgIGRhdGFiYXNlOiBkcml6emxlQWRhcHRlcihkYiwgeyBwcm92aWRlcjogXCJwZ1wiIH0pLFxuKiB9KTtcbiovXG5jb25zdCBiZXR0ZXJBdXRoID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIGNyZWF0ZUJldHRlckF1dGgob3B0aW9ucywgaW5pdCk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGJldHRlckF1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bGwubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matchesOriginPattern: () => (/* binding */ matchesOriginPattern)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/wildcard.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs\");\n\n\n\n//#region src/auth/trusted-origins.ts\n/**\n* Matches the given url against an origin or origin pattern\n* See \"options.trustedOrigins\" for details of supported patterns\n*\n* @param url The url to test\n* @param pattern The origin pattern\n* @param [settings] Specify supported pattern matching settings\n* @returns {boolean} true if the URL matches the origin pattern, false otherwise.\n*/\nconst matchesOriginPattern = (url, pattern, settings) => {\n\tif (url.startsWith(\"/\")) {\n\t\tif (settings?.allowRelativePaths) return url.startsWith(\"/\") && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url);\n\t\treturn false;\n\t}\n\tif (pattern.includes(\"*\") || pattern.includes(\"?\")) {\n\t\tif (pattern.includes(\"://\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)((0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) || url);\n\t\tconst host = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getHost)(url);\n\t\tif (!host) return false;\n\t\treturn (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)(host);\n\t}\n\tconst protocol = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getProtocol)(url);\n\treturn protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) : url.startsWith(pattern);\n};\n\n//#endregion\n\n//# sourceMappingURL=trusted-origins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXV0aC90cnVzdGVkLW9yaWdpbnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtRTtBQUNiOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGtFQUFhLFVBQVUseURBQVM7QUFDdEUsZUFBZSx1REFBTztBQUN0QjtBQUNBLFNBQVMsa0VBQWE7QUFDdEI7QUFDQSxrQkFBa0IsMkRBQVc7QUFDN0IsaUZBQWlGLHlEQUFTO0FBQzFGOztBQUVBO0FBQ2dDO0FBQ2hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGF1dGhcXHRydXN0ZWQtb3JpZ2lucy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SG9zdCwgZ2V0T3JpZ2luLCBnZXRQcm90b2NvbCB9IGZyb20gXCIuLi91dGlscy91cmwubWpzXCI7XG5pbXBvcnQgeyB3aWxkY2FyZE1hdGNoIH0gZnJvbSBcIi4uL3V0aWxzL3dpbGRjYXJkLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2F1dGgvdHJ1c3RlZC1vcmlnaW5zLnRzXG4vKipcbiogTWF0Y2hlcyB0aGUgZ2l2ZW4gdXJsIGFnYWluc3QgYW4gb3JpZ2luIG9yIG9yaWdpbiBwYXR0ZXJuXG4qIFNlZSBcIm9wdGlvbnMudHJ1c3RlZE9yaWdpbnNcIiBmb3IgZGV0YWlscyBvZiBzdXBwb3J0ZWQgcGF0dGVybnNcbipcbiogQHBhcmFtIHVybCBUaGUgdXJsIHRvIHRlc3RcbiogQHBhcmFtIHBhdHRlcm4gVGhlIG9yaWdpbiBwYXR0ZXJuXG4qIEBwYXJhbSBbc2V0dGluZ3NdIFNwZWNpZnkgc3VwcG9ydGVkIHBhdHRlcm4gbWF0Y2hpbmcgc2V0dGluZ3NcbiogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIFVSTCBtYXRjaGVzIHRoZSBvcmlnaW4gcGF0dGVybiwgZmFsc2Ugb3RoZXJ3aXNlLlxuKi9cbmNvbnN0IG1hdGNoZXNPcmlnaW5QYXR0ZXJuID0gKHVybCwgcGF0dGVybiwgc2V0dGluZ3MpID0+IHtcblx0aWYgKHVybC5zdGFydHNXaXRoKFwiL1wiKSkge1xuXHRcdGlmIChzZXR0aW5ncz8uYWxsb3dSZWxhdGl2ZVBhdGhzKSByZXR1cm4gdXJsLnN0YXJ0c1dpdGgoXCIvXCIpICYmIC9eXFwvKD8hXFwvfFxcXFx8JTJmfCU1YylbXFx3XFwtLlxcKy9AXSooPzpcXD9bXFx3XFwtLlxcKy89JiVAXSopPyQvLnRlc3QodXJsKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKHBhdHRlcm4uaW5jbHVkZXMoXCIqXCIpIHx8IHBhdHRlcm4uaW5jbHVkZXMoXCI/XCIpKSB7XG5cdFx0aWYgKHBhdHRlcm4uaW5jbHVkZXMoXCI6Ly9cIikpIHJldHVybiB3aWxkY2FyZE1hdGNoKHBhdHRlcm4pKGdldE9yaWdpbih1cmwpIHx8IHVybCk7XG5cdFx0Y29uc3QgaG9zdCA9IGdldEhvc3QodXJsKTtcblx0XHRpZiAoIWhvc3QpIHJldHVybiBmYWxzZTtcblx0XHRyZXR1cm4gd2lsZGNhcmRNYXRjaChwYXR0ZXJuKShob3N0KTtcblx0fVxuXHRjb25zdCBwcm90b2NvbCA9IGdldFByb3RvY29sKHVybCk7XG5cdHJldHVybiBwcm90b2NvbCA9PT0gXCJodHRwOlwiIHx8IHByb3RvY29sID09PSBcImh0dHBzOlwiIHx8ICFwcm90b2NvbCA/IHBhdHRlcm4gPT09IGdldE9yaWdpbih1cmwpIDogdXJsLnN0YXJ0c1dpdGgocGF0dGVybik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1hdGNoZXNPcmlnaW5QYXR0ZXJuIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cnVzdGVkLW9yaWdpbnMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthContext: () => (/* binding */ createAuthContext)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth/trusted-origins.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../crypto/password.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/password.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../api/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/constants.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/db */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/telemetry */ \"(action-browser)/./node_modules/.pnpm/@better-auth+telemetry@1.4._c11636a3ce6f8b05864a09e345ba4713/node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! defu */ \"(action-browser)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/context/create-context.ts\n/**\n* Estimates the entropy of a string in bits.\n* This is a simple approximation that helps detect low-entropy secrets.\n*/\nfunction estimateEntropy(str) {\n\tconst unique = new Set(str).size;\n\tif (unique === 0) return 0;\n\treturn Math.log2(Math.pow(unique, str.length));\n}\n/**\n* Validates that the secret meets minimum security requirements.\n* Throws BetterAuthError if the secret is invalid.\n* Skips validation for DEFAULT_SECRET in test environments only.\n* Only throws for DEFAULT_SECRET in production environment.\n*/\nfunction validateSecret(secret, logger$1) {\n\tconst isDefaultSecret = secret === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SECRET;\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)()) return;\n\tif (isDefaultSecret && _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.\");\n\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).\");\n\tif (secret.length < 32) logger$1.warn(`[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with \\`npx @better-auth/cli secret\\` or \\`openssl rand -base64 32\\`.`);\n\tif (estimateEntropy(secret) < 120) logger$1.warn(\"[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.\");\n}\nasync function createAuthContext(adapter, options, getDatabaseType) {\n\tif (!options.database) options = (0,defu__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(options, {\n\t\tsession: { cookieCache: {\n\t\t\tenabled: true,\n\t\t\tstrategy: \"jwe\",\n\t\t\trefreshCache: true\n\t\t} },\n\t\taccount: {\n\t\t\tstoreStateStrategy: \"cookie\",\n\t\t\tstoreAccountCookie: true\n\t\t}\n\t});\n\tconst plugins = options.plugins || [];\n\tconst internalPlugins = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getInternalPlugins)(options);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.createLogger)(options.logger);\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath);\n\tif (!baseURL) logger$1.warn(`[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.`);\n\tif (adapter.id === \"memory\" && options.advanced?.database?.generateId === false) logger$1.error(`[better-auth] Misconfiguration detected.\nYou are using the memory DB with generateId: false.\nThis will cause no id to be generated for any model.\nMost of the features of Better Auth will not work correctly.`);\n\tconst secret = options.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.BETTER_AUTH_SECRET || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.AUTH_SECRET || _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SECRET;\n\tvalidateSecret(secret, logger$1);\n\toptions = {\n\t\t...options,\n\t\tsecret,\n\t\tbaseURL: baseURL ? new URL(baseURL).origin : \"\",\n\t\tbasePath: options.basePath || \"/api/auth\",\n\t\tplugins: plugins.concat(internalPlugins)\n\t};\n\t(0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.checkEndpointConflicts)(options, logger$1);\n\tconst cookies = (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.getCookies)(options);\n\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__.getAuthTables)(options);\n\tconst providers = Object.entries(options.socialProviders || {}).map(([key, config]) => {\n\t\tif (config == null) return null;\n\t\tif (config.enabled === false) return null;\n\t\tif (!config.clientId) logger$1.warn(`Social provider ${key} is missing clientId or clientSecret`);\n\t\tconst provider = _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__.socialProviders[key](config);\n\t\tprovider.disableImplicitSignUp = config.disableImplicitSignUp;\n\t\treturn provider;\n\t}).filter((x) => x !== null);\n\tconst generateIdFunc = ({ model, size }) => {\n\t\tif (typeof options.advanced?.generateId === \"function\") return options.advanced.generateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tconst dbGenerateId = options?.advanced?.database?.generateId;\n\t\tif (typeof dbGenerateId === \"function\") return dbGenerateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tif (dbGenerateId === \"uuid\") return crypto.randomUUID();\n\t\tif (dbGenerateId === \"serial\" || dbGenerateId === false) return false;\n\t\treturn (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__.generateId)(size);\n\t};\n\tconst { publish } = await (0,_better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__.createTelemetry)(options, {\n\t\tadapter: adapter.id,\n\t\tdatabase: typeof options.database === \"function\" ? \"adapter\" : getDatabaseType(options.database)\n\t});\n\tconst trustedOrigins = await (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getTrustedOrigins)(options);\n\tconst initOrPromise = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.runPluginInit)({\n\t\tappName: options.appName || \"Better Auth\",\n\t\tbaseURL: baseURL || \"\",\n\t\tversion: (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__.getBetterAuthVersion)(),\n\t\tsocialProviders: providers,\n\t\toptions,\n\t\toauthConfig: {\n\t\t\tstoreStateStrategy: options.account?.storeStateStrategy || (options.database ? \"database\" : \"cookie\"),\n\t\t\tskipStateCookieCheck: !!options.account?.skipStateCookieCheck\n\t\t},\n\t\ttables,\n\t\ttrustedOrigins,\n\t\tisTrustedOrigin(url, settings) {\n\t\t\treturn this.trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__.matchesOriginPattern)(url, origin, settings));\n\t\t},\n\t\tsessionConfig: {\n\t\t\tupdateAge: options.session?.updateAge !== void 0 ? options.session.updateAge : 1440 * 60,\n\t\t\texpiresIn: options.session?.expiresIn || 3600 * 24 * 7,\n\t\t\tfreshAge: options.session?.freshAge === void 0 ? 3600 * 24 : options.session.freshAge,\n\t\t\tcookieRefreshCache: (() => {\n\t\t\t\tconst refreshCache = options.session?.cookieCache?.refreshCache;\n\t\t\t\tconst maxAge = options.session?.cookieCache?.maxAge || 300;\n\t\t\t\tif ((!!options.database || !!options.secondaryStorage) && refreshCache) {\n\t\t\t\t\tlogger$1.warn(\"[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (refreshCache === false || refreshCache === void 0) return false;\n\t\t\t\tif (refreshCache === true) return {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: refreshCache.updateAge !== void 0 ? refreshCache.updateAge : Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t})()\n\t\t},\n\t\tsecret,\n\t\trateLimit: {\n\t\t\t...options.rateLimit,\n\t\t\tenabled: options.rateLimit?.enabled ?? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction,\n\t\t\twindow: options.rateLimit?.window || 10,\n\t\t\tmax: options.rateLimit?.max || 100,\n\t\t\tstorage: options.rateLimit?.storage || (options.secondaryStorage ? \"secondary-storage\" : \"memory\")\n\t\t},\n\t\tauthCookies: cookies,\n\t\tlogger: logger$1,\n\t\tgenerateId: generateIdFunc,\n\t\tsession: null,\n\t\tsecondaryStorage: options.secondaryStorage,\n\t\tpassword: {\n\t\t\thash: options.emailAndPassword?.password?.hash || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.hashPassword,\n\t\t\tverify: options.emailAndPassword?.password?.verify || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyPassword,\n\t\t\tconfig: {\n\t\t\t\tminPasswordLength: options.emailAndPassword?.minPasswordLength || 8,\n\t\t\t\tmaxPasswordLength: options.emailAndPassword?.maxPasswordLength || 128\n\t\t\t},\n\t\t\tcheckPassword: _utils_password_mjs__WEBPACK_IMPORTED_MODULE_7__.checkPassword\n\t\t},\n\t\tsetNewSession(session) {\n\t\t\tthis.newSession = session;\n\t\t},\n\t\tnewSession: null,\n\t\tadapter,\n\t\tinternalAdapter: (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(adapter, {\n\t\t\toptions,\n\t\t\tlogger: logger$1,\n\t\t\thooks: options.databaseHooks ? [options.databaseHooks] : [],\n\t\t\tgenerateId: generateIdFunc\n\t\t}),\n\t\tcreateAuthCookie: (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.createCookieGetter)(options),\n\t\tasync runMigrations() {\n\t\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"runMigrations will be set by the specific init implementation\");\n\t\t},\n\t\tpublishTelemetry: publish,\n\t\tskipCSRFCheck: !!options.advanced?.disableCSRFCheck,\n\t\tskipOriginCheck: options.advanced?.disableOriginCheck !== void 0 ? options.advanced.disableOriginCheck : (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)() ? true : false,\n\t\trunInBackground: options.advanced?.backgroundTasks?.handler ?? ((p) => {\n\t\t\tp.catch(() => {});\n\t\t}),\n\t\tasync runInBackgroundOrAwait(promise) {\n\t\t\ttry {\n\t\t\t\tif (options.advanced?.backgroundTasks?.handler) {\n\t\t\t\t\tif (promise instanceof Promise) options.advanced.backgroundTasks.handler(promise.catch((e) => {\n\t\t\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t\t\t}));\n\t\t\t\t} else await promise;\n\t\t\t} catch (e) {\n\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t}\n\t\t},\n\t\tgetPlugin: (id) => options.plugins.find((p) => p.id === id) ?? null\n\t});\n\tlet context;\n\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(initOrPromise)) ({context} = await initOrPromise);\n\telse ({context} = initOrPromise);\n\tif (typeof context.options.emailVerification?.onEmailVerification === \"function\") context.options.emailVerification.onEmailVerification = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__.deprecate)(context.options.emailVerification.onEmailVerification, \"Use `afterEmailVerification` instead. This will be removed in 1.5\", context.logger);\n\treturn context;\n}\n\n//#endregion\n\n//# sourceMappingURL=create-context.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29udGV4dC9jcmVhdGUtY29udGV4dC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUU7QUFDckI7QUFDcUI7QUFDRztBQUNsQjtBQUNrQjtBQUNOO0FBQ1Y7QUFDSTtBQUNGO0FBQzZCO0FBQ3BCO0FBQ1o7QUFDMkI7QUFDdEI7QUFDTjtBQUNpQjtBQUNaO0FBQ2pDOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdFQUFjO0FBQ2xELEtBQUssOERBQU07QUFDWCx3QkFBd0IsZ0VBQVksWUFBWSxxRUFBZTtBQUMvRCx3QkFBd0IscUVBQWUsNkZBQTZGLFFBQVE7QUFDNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaURBQUk7QUFDdEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLHlCQUF5QixpRUFBa0I7QUFDM0Msa0JBQWtCLG9FQUFZO0FBQzlCLGlCQUFpQiwwREFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHVEQUFHLHVCQUF1Qix1REFBRyxnQkFBZ0IsZ0VBQWM7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0VBQXNCO0FBQ3ZCLGlCQUFpQiw4REFBVTtBQUMzQixnQkFBZ0Isb0VBQWE7QUFDN0IsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQSx5REFBeUQsS0FBSztBQUM5RCxtQkFBbUIsZ0ZBQWU7QUFDbEM7QUFDQTtBQUNBLEVBQUU7QUFDRiwyQkFBMkIsYUFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFNBQVMsNERBQVk7QUFDckI7QUFDQSxTQUFTLFVBQVUsUUFBUSx3RUFBZTtBQUMxQztBQUNBO0FBQ0EsRUFBRTtBQUNGLDhCQUE4QixnRUFBaUI7QUFDL0MsdUJBQXVCLDREQUFhO0FBQ3BDO0FBQ0E7QUFDQSxXQUFXLGdGQUFvQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLCtDQUErQywrRUFBb0I7QUFDbkUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxnRUFBWTtBQUN0RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDhEQUFZO0FBQ2pFLHlEQUF5RCxnRUFBYztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZ0JBQWdCO0FBQ2hCLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQkFBbUIsK0VBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG9CQUFvQixzRUFBa0I7QUFDdEM7QUFDQSxhQUFhLHFFQUFlO0FBQzVCLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMkdBQTJHLDhEQUFNO0FBQ2pIO0FBQ0EsbUJBQW1CO0FBQ25CLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLEtBQUssZ0VBQVMsbUJBQW1CLFNBQVM7QUFDMUMsUUFBUSxTQUFTO0FBQ2pCLDJJQUEySSxtRUFBUztBQUNwSjtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvbnRleHRcXGNyZWF0ZS1jb250ZXh0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIgfSBmcm9tIFwiLi4vZGIvaW50ZXJuYWwtYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IGdldEJhc2VVUkwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgbWF0Y2hlc09yaWdpblBhdHRlcm4gfSBmcm9tIFwiLi4vYXV0aC90cnVzdGVkLW9yaWdpbnMubWpzXCI7XG5pbXBvcnQgeyBoYXNoUGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIi4uL2NyeXB0by9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gXCIuLi91dGlscy9pcy1wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ29va2llR2V0dGVyLCBnZXRDb29raWVzIH0gZnJvbSBcIi4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkIGFzIGdlbmVyYXRlSWQkMSB9IGZyb20gXCIuLi91dGlscy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNoZWNrUGFzc3dvcmQgfSBmcm9tIFwiLi4vdXRpbHMvcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBjaGVja0VuZHBvaW50Q29uZmxpY3RzIH0gZnJvbSBcIi4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IERFRkFVTFRfU0VDUkVUIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5tanNcIjtcbmltcG9ydCB7IGdldEludGVybmFsUGx1Z2lucywgZ2V0VHJ1c3RlZE9yaWdpbnMsIHJ1blBsdWdpbkluaXQgfSBmcm9tIFwiLi9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0QmV0dGVyQXV0aFZlcnNpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgZ2V0QXV0aFRhYmxlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyLCBlbnYsIGlzUHJvZHVjdGlvbiwgaXNUZXN0IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBkZXByZWNhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IHNvY2lhbFByb3ZpZGVycyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9zb2NpYWwtcHJvdmlkZXJzXCI7XG5pbXBvcnQgeyBjcmVhdGVUZWxlbWV0cnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL3RlbGVtZXRyeVwiO1xuaW1wb3J0IGRlZnUgZnJvbSBcImRlZnVcIjtcblxuLy8jcmVnaW9uIHNyYy9jb250ZXh0L2NyZWF0ZS1jb250ZXh0LnRzXG4vKipcbiogRXN0aW1hdGVzIHRoZSBlbnRyb3B5IG9mIGEgc3RyaW5nIGluIGJpdHMuXG4qIFRoaXMgaXMgYSBzaW1wbGUgYXBwcm94aW1hdGlvbiB0aGF0IGhlbHBzIGRldGVjdCBsb3ctZW50cm9weSBzZWNyZXRzLlxuKi9cbmZ1bmN0aW9uIGVzdGltYXRlRW50cm9weShzdHIpIHtcblx0Y29uc3QgdW5pcXVlID0gbmV3IFNldChzdHIpLnNpemU7XG5cdGlmICh1bmlxdWUgPT09IDApIHJldHVybiAwO1xuXHRyZXR1cm4gTWF0aC5sb2cyKE1hdGgucG93KHVuaXF1ZSwgc3RyLmxlbmd0aCkpO1xufVxuLyoqXG4qIFZhbGlkYXRlcyB0aGF0IHRoZSBzZWNyZXQgbWVldHMgbWluaW11bSBzZWN1cml0eSByZXF1aXJlbWVudHMuXG4qIFRocm93cyBCZXR0ZXJBdXRoRXJyb3IgaWYgdGhlIHNlY3JldCBpcyBpbnZhbGlkLlxuKiBTa2lwcyB2YWxpZGF0aW9uIGZvciBERUZBVUxUX1NFQ1JFVCBpbiB0ZXN0IGVudmlyb25tZW50cyBvbmx5LlxuKiBPbmx5IHRocm93cyBmb3IgREVGQVVMVF9TRUNSRVQgaW4gcHJvZHVjdGlvbiBlbnZpcm9ubWVudC5cbiovXG5mdW5jdGlvbiB2YWxpZGF0ZVNlY3JldChzZWNyZXQsIGxvZ2dlciQxKSB7XG5cdGNvbnN0IGlzRGVmYXVsdFNlY3JldCA9IHNlY3JldCA9PT0gREVGQVVMVF9TRUNSRVQ7XG5cdGlmIChpc1Rlc3QoKSkgcmV0dXJuO1xuXHRpZiAoaXNEZWZhdWx0U2VjcmV0ICYmIGlzUHJvZHVjdGlvbikgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIllvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgc2VjcmV0LiBQbGVhc2Ugc2V0IGBCRVRURVJfQVVUSF9TRUNSRVRgIGluIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzIG9yIHBhc3MgYHNlY3JldGAgaW4geW91ciBhdXRoIGNvbmZpZy5cIik7XG5cdGlmICghc2VjcmV0KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQkVUVEVSX0FVVEhfU0VDUkVUIGlzIG1pc3NpbmcuIFNldCBpdCBpbiB5b3VyIGVudmlyb25tZW50IG9yIHBhc3MgYHNlY3JldGAgdG8gYmV0dGVyQXV0aCh7IHNlY3JldCB9KS5cIik7XG5cdGlmIChzZWNyZXQubGVuZ3RoIDwgMzIpIGxvZ2dlciQxLndhcm4oYFtiZXR0ZXItYXV0aF0gV2FybmluZzogeW91ciBCRVRURVJfQVVUSF9TRUNSRVQgc2hvdWxkIGJlIGF0IGxlYXN0IDMyIGNoYXJhY3RlcnMgbG9uZyBmb3IgYWRlcXVhdGUgc2VjdXJpdHkuIEdlbmVyYXRlIG9uZSB3aXRoIFxcYG5weCBAYmV0dGVyLWF1dGgvY2xpIHNlY3JldFxcYCBvciBcXGBvcGVuc3NsIHJhbmQgLWJhc2U2NCAzMlxcYC5gKTtcblx0aWYgKGVzdGltYXRlRW50cm9weShzZWNyZXQpIDwgMTIwKSBsb2dnZXIkMS53YXJuKFwiW2JldHRlci1hdXRoXSBXYXJuaW5nOiB5b3VyIEJFVFRFUl9BVVRIX1NFQ1JFVCBhcHBlYXJzIGxvdy1lbnRyb3B5LiBVc2UgYSByYW5kb21seSBnZW5lcmF0ZWQgc2VjcmV0IGZvciBwcm9kdWN0aW9uLlwiKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF1dGhDb250ZXh0KGFkYXB0ZXIsIG9wdGlvbnMsIGdldERhdGFiYXNlVHlwZSkge1xuXHRpZiAoIW9wdGlvbnMuZGF0YWJhc2UpIG9wdGlvbnMgPSBkZWZ1KG9wdGlvbnMsIHtcblx0XHRzZXNzaW9uOiB7IGNvb2tpZUNhY2hlOiB7XG5cdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0c3RyYXRlZ3k6IFwiandlXCIsXG5cdFx0XHRyZWZyZXNoQ2FjaGU6IHRydWVcblx0XHR9IH0sXG5cdFx0YWNjb3VudDoge1xuXHRcdFx0c3RvcmVTdGF0ZVN0cmF0ZWd5OiBcImNvb2tpZVwiLFxuXHRcdFx0c3RvcmVBY2NvdW50Q29va2llOiB0cnVlXG5cdFx0fVxuXHR9KTtcblx0Y29uc3QgcGx1Z2lucyA9IG9wdGlvbnMucGx1Z2lucyB8fCBbXTtcblx0Y29uc3QgaW50ZXJuYWxQbHVnaW5zID0gZ2V0SW50ZXJuYWxQbHVnaW5zKG9wdGlvbnMpO1xuXHRjb25zdCBsb2dnZXIkMSA9IGNyZWF0ZUxvZ2dlcihvcHRpb25zLmxvZ2dlcik7XG5cdGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVVJMKG9wdGlvbnMuYmFzZVVSTCwgb3B0aW9ucy5iYXNlUGF0aCk7XG5cdGlmICghYmFzZVVSTCkgbG9nZ2VyJDEud2FybihgW2JldHRlci1hdXRoXSBCYXNlIFVSTCBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZC4gUGxlYXNlIHNldCBhIHZhbGlkIGJhc2UgVVJMIHVzaW5nIHRoZSBiYXNlVVJMIGNvbmZpZyBvcHRpb24gb3IgdGhlIEJFVFRFUl9BVVRIX0JBU0VfVVJMIGVudmlyb25tZW50IHZhcmlhYmxlLiBXaXRob3V0IHRoaXMsIGNhbGxiYWNrcyBhbmQgcmVkaXJlY3RzIG1heSBub3Qgd29yayBjb3JyZWN0bHkuYCk7XG5cdGlmIChhZGFwdGVyLmlkID09PSBcIm1lbW9yeVwiICYmIG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkID09PSBmYWxzZSkgbG9nZ2VyJDEuZXJyb3IoYFtiZXR0ZXItYXV0aF0gTWlzY29uZmlndXJhdGlvbiBkZXRlY3RlZC5cbllvdSBhcmUgdXNpbmcgdGhlIG1lbW9yeSBEQiB3aXRoIGdlbmVyYXRlSWQ6IGZhbHNlLlxuVGhpcyB3aWxsIGNhdXNlIG5vIGlkIHRvIGJlIGdlbmVyYXRlZCBmb3IgYW55IG1vZGVsLlxuTW9zdCBvZiB0aGUgZmVhdHVyZXMgb2YgQmV0dGVyIEF1dGggd2lsbCBub3Qgd29yayBjb3JyZWN0bHkuYCk7XG5cdGNvbnN0IHNlY3JldCA9IG9wdGlvbnMuc2VjcmV0IHx8IGVudi5CRVRURVJfQVVUSF9TRUNSRVQgfHwgZW52LkFVVEhfU0VDUkVUIHx8IERFRkFVTFRfU0VDUkVUO1xuXHR2YWxpZGF0ZVNlY3JldChzZWNyZXQsIGxvZ2dlciQxKTtcblx0b3B0aW9ucyA9IHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdHNlY3JldCxcblx0XHRiYXNlVVJMOiBiYXNlVVJMID8gbmV3IFVSTChiYXNlVVJMKS5vcmlnaW4gOiBcIlwiLFxuXHRcdGJhc2VQYXRoOiBvcHRpb25zLmJhc2VQYXRoIHx8IFwiL2FwaS9hdXRoXCIsXG5cdFx0cGx1Z2luczogcGx1Z2lucy5jb25jYXQoaW50ZXJuYWxQbHVnaW5zKVxuXHR9O1xuXHRjaGVja0VuZHBvaW50Q29uZmxpY3RzKG9wdGlvbnMsIGxvZ2dlciQxKTtcblx0Y29uc3QgY29va2llcyA9IGdldENvb2tpZXMob3B0aW9ucyk7XG5cdGNvbnN0IHRhYmxlcyA9IGdldEF1dGhUYWJsZXMob3B0aW9ucyk7XG5cdGNvbnN0IHByb3ZpZGVycyA9IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMuc29jaWFsUHJvdmlkZXJzIHx8IHt9KS5tYXAoKFtrZXksIGNvbmZpZ10pID0+IHtcblx0XHRpZiAoY29uZmlnID09IG51bGwpIHJldHVybiBudWxsO1xuXHRcdGlmIChjb25maWcuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdGlmICghY29uZmlnLmNsaWVudElkKSBsb2dnZXIkMS53YXJuKGBTb2NpYWwgcHJvdmlkZXIgJHtrZXl9IGlzIG1pc3NpbmcgY2xpZW50SWQgb3IgY2xpZW50U2VjcmV0YCk7XG5cdFx0Y29uc3QgcHJvdmlkZXIgPSBzb2NpYWxQcm92aWRlcnNba2V5XShjb25maWcpO1xuXHRcdHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCA9IGNvbmZpZy5kaXNhYmxlSW1wbGljaXRTaWduVXA7XG5cdFx0cmV0dXJuIHByb3ZpZGVyO1xuXHR9KS5maWx0ZXIoKHgpID0+IHggIT09IG51bGwpO1xuXHRjb25zdCBnZW5lcmF0ZUlkRnVuYyA9ICh7IG1vZGVsLCBzaXplIH0pID0+IHtcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuYWR2YW5jZWQ/LmdlbmVyYXRlSWQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG9wdGlvbnMuYWR2YW5jZWQuZ2VuZXJhdGVJZCh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHNpemVcblx0XHR9KTtcblx0XHRjb25zdCBkYkdlbmVyYXRlSWQgPSBvcHRpb25zPy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQ7XG5cdFx0aWYgKHR5cGVvZiBkYkdlbmVyYXRlSWQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGRiR2VuZXJhdGVJZCh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHNpemVcblx0XHR9KTtcblx0XHRpZiAoZGJHZW5lcmF0ZUlkID09PSBcInV1aWRcIikgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7XG5cdFx0aWYgKGRiR2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIiB8fCBkYkdlbmVyYXRlSWQgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIGdlbmVyYXRlSWQkMShzaXplKTtcblx0fTtcblx0Y29uc3QgeyBwdWJsaXNoIH0gPSBhd2FpdCBjcmVhdGVUZWxlbWV0cnkob3B0aW9ucywge1xuXHRcdGFkYXB0ZXI6IGFkYXB0ZXIuaWQsXG5cdFx0ZGF0YWJhc2U6IHR5cGVvZiBvcHRpb25zLmRhdGFiYXNlID09PSBcImZ1bmN0aW9uXCIgPyBcImFkYXB0ZXJcIiA6IGdldERhdGFiYXNlVHlwZShvcHRpb25zLmRhdGFiYXNlKVxuXHR9KTtcblx0Y29uc3QgdHJ1c3RlZE9yaWdpbnMgPSBhd2FpdCBnZXRUcnVzdGVkT3JpZ2lucyhvcHRpb25zKTtcblx0Y29uc3QgaW5pdE9yUHJvbWlzZSA9IHJ1blBsdWdpbkluaXQoe1xuXHRcdGFwcE5hbWU6IG9wdGlvbnMuYXBwTmFtZSB8fCBcIkJldHRlciBBdXRoXCIsXG5cdFx0YmFzZVVSTDogYmFzZVVSTCB8fCBcIlwiLFxuXHRcdHZlcnNpb246IGdldEJldHRlckF1dGhWZXJzaW9uKCksXG5cdFx0c29jaWFsUHJvdmlkZXJzOiBwcm92aWRlcnMsXG5cdFx0b3B0aW9ucyxcblx0XHRvYXV0aENvbmZpZzoge1xuXHRcdFx0c3RvcmVTdGF0ZVN0cmF0ZWd5OiBvcHRpb25zLmFjY291bnQ/LnN0b3JlU3RhdGVTdHJhdGVneSB8fCAob3B0aW9ucy5kYXRhYmFzZSA/IFwiZGF0YWJhc2VcIiA6IFwiY29va2llXCIpLFxuXHRcdFx0c2tpcFN0YXRlQ29va2llQ2hlY2s6ICEhb3B0aW9ucy5hY2NvdW50Py5za2lwU3RhdGVDb29raWVDaGVja1xuXHRcdH0sXG5cdFx0dGFibGVzLFxuXHRcdHRydXN0ZWRPcmlnaW5zLFxuXHRcdGlzVHJ1c3RlZE9yaWdpbih1cmwsIHNldHRpbmdzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50cnVzdGVkT3JpZ2lucy5zb21lKChvcmlnaW4pID0+IG1hdGNoZXNPcmlnaW5QYXR0ZXJuKHVybCwgb3JpZ2luLCBzZXR0aW5ncykpO1xuXHRcdH0sXG5cdFx0c2Vzc2lvbkNvbmZpZzoge1xuXHRcdFx0dXBkYXRlQWdlOiBvcHRpb25zLnNlc3Npb24/LnVwZGF0ZUFnZSAhPT0gdm9pZCAwID8gb3B0aW9ucy5zZXNzaW9uLnVwZGF0ZUFnZSA6IDE0NDAgKiA2MCxcblx0XHRcdGV4cGlyZXNJbjogb3B0aW9ucy5zZXNzaW9uPy5leHBpcmVzSW4gfHwgMzYwMCAqIDI0ICogNyxcblx0XHRcdGZyZXNoQWdlOiBvcHRpb25zLnNlc3Npb24/LmZyZXNoQWdlID09PSB2b2lkIDAgPyAzNjAwICogMjQgOiBvcHRpb25zLnNlc3Npb24uZnJlc2hBZ2UsXG5cdFx0XHRjb29raWVSZWZyZXNoQ2FjaGU6ICgoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJlZnJlc2hDYWNoZSA9IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnJlZnJlc2hDYWNoZTtcblx0XHRcdFx0Y29uc3QgbWF4QWdlID0gb3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMDtcblx0XHRcdFx0aWYgKCghIW9wdGlvbnMuZGF0YWJhc2UgfHwgISFvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UpICYmIHJlZnJlc2hDYWNoZSkge1xuXHRcdFx0XHRcdGxvZ2dlciQxLndhcm4oXCJbYmV0dGVyLWF1dGhdIGBzZXNzaW9uLmNvb2tpZUNhY2hlLnJlZnJlc2hDYWNoZWAgaXMgZW5hYmxlZCB3aGlsZSBgZGF0YWJhc2VgIG9yIGBzZWNvbmRhcnlTdG9yYWdlYCBpcyBjb25maWd1cmVkLiBgcmVmcmVzaENhY2hlYCBpcyBtZWFudCBmb3Igc3RhdGVsZXNzIChEQi1sZXNzKSBzZXR1cHMuIERpc2FibGluZyBgcmVmcmVzaENhY2hlYCDigJQgcmVtb3ZlIGl0IGZyb20geW91ciBjb25maWcgdG8gc2lsZW5jZSB0aGlzIHdhcm5pbmcuXCIpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocmVmcmVzaENhY2hlID09PSBmYWxzZSB8fCByZWZyZXNoQ2FjaGUgPT09IHZvaWQgMCkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZiAocmVmcmVzaENhY2hlID09PSB0cnVlKSByZXR1cm4ge1xuXHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0dXBkYXRlQWdlOiBNYXRoLmZsb29yKG1heEFnZSAqIC4yKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0dXBkYXRlQWdlOiByZWZyZXNoQ2FjaGUudXBkYXRlQWdlICE9PSB2b2lkIDAgPyByZWZyZXNoQ2FjaGUudXBkYXRlQWdlIDogTWF0aC5mbG9vcihtYXhBZ2UgKiAuMilcblx0XHRcdFx0fTtcblx0XHRcdH0pKClcblx0XHR9LFxuXHRcdHNlY3JldCxcblx0XHRyYXRlTGltaXQ6IHtcblx0XHRcdC4uLm9wdGlvbnMucmF0ZUxpbWl0LFxuXHRcdFx0ZW5hYmxlZDogb3B0aW9ucy5yYXRlTGltaXQ/LmVuYWJsZWQgPz8gaXNQcm9kdWN0aW9uLFxuXHRcdFx0d2luZG93OiBvcHRpb25zLnJhdGVMaW1pdD8ud2luZG93IHx8IDEwLFxuXHRcdFx0bWF4OiBvcHRpb25zLnJhdGVMaW1pdD8ubWF4IHx8IDEwMCxcblx0XHRcdHN0b3JhZ2U6IG9wdGlvbnMucmF0ZUxpbWl0Py5zdG9yYWdlIHx8IChvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UgPyBcInNlY29uZGFyeS1zdG9yYWdlXCIgOiBcIm1lbW9yeVwiKVxuXHRcdH0sXG5cdFx0YXV0aENvb2tpZXM6IGNvb2tpZXMsXG5cdFx0bG9nZ2VyOiBsb2dnZXIkMSxcblx0XHRnZW5lcmF0ZUlkOiBnZW5lcmF0ZUlkRnVuYyxcblx0XHRzZXNzaW9uOiBudWxsLFxuXHRcdHNlY29uZGFyeVN0b3JhZ2U6IG9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSxcblx0XHRwYXNzd29yZDoge1xuXHRcdFx0aGFzaDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5wYXNzd29yZD8uaGFzaCB8fCBoYXNoUGFzc3dvcmQsXG5cdFx0XHR2ZXJpZnk6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucGFzc3dvcmQ/LnZlcmlmeSB8fCB2ZXJpZnlQYXNzd29yZCxcblx0XHRcdGNvbmZpZzoge1xuXHRcdFx0XHRtaW5QYXNzd29yZExlbmd0aDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5taW5QYXNzd29yZExlbmd0aCB8fCA4LFxuXHRcdFx0XHRtYXhQYXNzd29yZExlbmd0aDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5tYXhQYXNzd29yZExlbmd0aCB8fCAxMjhcblx0XHRcdH0sXG5cdFx0XHRjaGVja1Bhc3N3b3JkXG5cdFx0fSxcblx0XHRzZXROZXdTZXNzaW9uKHNlc3Npb24pIHtcblx0XHRcdHRoaXMubmV3U2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0fSxcblx0XHRuZXdTZXNzaW9uOiBudWxsLFxuXHRcdGFkYXB0ZXIsXG5cdFx0aW50ZXJuYWxBZGFwdGVyOiBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIoYWRhcHRlciwge1xuXHRcdFx0b3B0aW9ucyxcblx0XHRcdGxvZ2dlcjogbG9nZ2VyJDEsXG5cdFx0XHRob29rczogb3B0aW9ucy5kYXRhYmFzZUhvb2tzID8gW29wdGlvbnMuZGF0YWJhc2VIb29rc10gOiBbXSxcblx0XHRcdGdlbmVyYXRlSWQ6IGdlbmVyYXRlSWRGdW5jXG5cdFx0fSksXG5cdFx0Y3JlYXRlQXV0aENvb2tpZTogY3JlYXRlQ29va2llR2V0dGVyKG9wdGlvbnMpLFxuXHRcdGFzeW5jIHJ1bk1pZ3JhdGlvbnMoKSB7XG5cdFx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwicnVuTWlncmF0aW9ucyB3aWxsIGJlIHNldCBieSB0aGUgc3BlY2lmaWMgaW5pdCBpbXBsZW1lbnRhdGlvblwiKTtcblx0XHR9LFxuXHRcdHB1Ymxpc2hUZWxlbWV0cnk6IHB1Ymxpc2gsXG5cdFx0c2tpcENTUkZDaGVjazogISFvcHRpb25zLmFkdmFuY2VkPy5kaXNhYmxlQ1NSRkNoZWNrLFxuXHRcdHNraXBPcmlnaW5DaGVjazogb3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZU9yaWdpbkNoZWNrICE9PSB2b2lkIDAgPyBvcHRpb25zLmFkdmFuY2VkLmRpc2FibGVPcmlnaW5DaGVjayA6IGlzVGVzdCgpID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdHJ1bkluQmFja2dyb3VuZDogb3B0aW9ucy5hZHZhbmNlZD8uYmFja2dyb3VuZFRhc2tzPy5oYW5kbGVyID8/ICgocCkgPT4ge1xuXHRcdFx0cC5jYXRjaCgoKSA9PiB7fSk7XG5cdFx0fSksXG5cdFx0YXN5bmMgcnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChwcm9taXNlKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAob3B0aW9ucy5hZHZhbmNlZD8uYmFja2dyb3VuZFRhc2tzPy5oYW5kbGVyKSB7XG5cdFx0XHRcdFx0aWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSBvcHRpb25zLmFkdmFuY2VkLmJhY2tncm91bmRUYXNrcy5oYW5kbGVyKHByb21pc2UuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdGxvZ2dlciQxLmVycm9yKFwiRmFpbGVkIHRvIHJ1biBiYWNrZ3JvdW5kIHRhc2s6XCIsIGUpO1xuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fSBlbHNlIGF3YWl0IHByb21pc2U7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGxvZ2dlciQxLmVycm9yKFwiRmFpbGVkIHRvIHJ1biBiYWNrZ3JvdW5kIHRhc2s6XCIsIGUpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Z2V0UGx1Z2luOiAoaWQpID0+IG9wdGlvbnMucGx1Z2lucy5maW5kKChwKSA9PiBwLmlkID09PSBpZCkgPz8gbnVsbFxuXHR9KTtcblx0bGV0IGNvbnRleHQ7XG5cdGlmIChpc1Byb21pc2UoaW5pdE9yUHJvbWlzZSkpICh7Y29udGV4dH0gPSBhd2FpdCBpbml0T3JQcm9taXNlKTtcblx0ZWxzZSAoe2NvbnRleHR9ID0gaW5pdE9yUHJvbWlzZSk7XG5cdGlmICh0eXBlb2YgY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uID09PSBcImZ1bmN0aW9uXCIpIGNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uID0gZGVwcmVjYXRlKGNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uLCBcIlVzZSBgYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbmAgaW5zdGVhZC4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gMS41XCIsIGNvbnRleHQubG9nZ2VyKTtcblx0cmV0dXJuIGNvbnRleHQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlQXV0aENvbnRleHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1jb250ZXh0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getInternalPlugins: () => (/* binding */ getInternalPlugins),\n/* harmony export */   getTrustedOrigins: () => (/* binding */ getTrustedOrigins),\n/* harmony export */   runPluginInit: () => (/* binding */ runPluginInit)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(action-browser)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n//#region src/context/helpers.ts\nasync function runPluginInit(ctx) {\n\tlet options = ctx.options;\n\tconst plugins = options.plugins || [];\n\tlet context = ctx;\n\tconst dbHooks = [];\n\tfor (const plugin of plugins) if (plugin.init) {\n\t\tconst initPromise = plugin.init(context);\n\t\tlet result;\n\t\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__.isPromise)(initPromise)) result = await initPromise;\n\t\telse result = initPromise;\n\t\tif (typeof result === \"object\") {\n\t\t\tif (result.options) {\n\t\t\t\tconst { databaseHooks, ...restOpts } = result.options;\n\t\t\t\tif (databaseHooks) dbHooks.push(databaseHooks);\n\t\t\t\toptions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(options, restOpts);\n\t\t\t}\n\t\t\tif (result.context) context = {\n\t\t\t\t...context,\n\t\t\t\t...result.context\n\t\t\t};\n\t\t}\n\t}\n\tdbHooks.push(options.databaseHooks);\n\tcontext.internalAdapter = (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(context.adapter, {\n\t\toptions,\n\t\tlogger: context.logger,\n\t\thooks: dbHooks.filter((u) => u !== void 0),\n\t\tgenerateId: context.generateId\n\t});\n\tcontext.options = options;\n\treturn { context };\n}\nfunction getInternalPlugins(options) {\n\tconst plugins = [];\n\tif (options.advanced?.crossSubDomainCookies?.enabled) {}\n\treturn plugins;\n}\nasync function getTrustedOrigins(options, request) {\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath, request);\n\tconst trustedOrigins = baseURL ? [new URL(baseURL).origin] : [];\n\tif (options.trustedOrigins) {\n\t\tif (Array.isArray(options.trustedOrigins)) trustedOrigins.push(...options.trustedOrigins);\n\t\tif (typeof options.trustedOrigins === \"function\") {\n\t\t\tconst validOrigins = await options.trustedOrigins(request);\n\t\t\ttrustedOrigins.push(...validOrigins);\n\t\t}\n\t}\n\tconst envTrustedOrigins = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.env.BETTER_AUTH_TRUSTED_ORIGINS;\n\tif (envTrustedOrigins) trustedOrigins.push(...envTrustedOrigins.split(\",\"));\n\treturn trustedOrigins.filter((v) => Boolean(v));\n}\n\n//#endregion\n\n//# sourceMappingURL=helpers.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29udGV4dC9oZWxwZXJzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFtRTtBQUNyQjtBQUNNO0FBQ1I7QUFDTjs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxnRUFBUztBQUNmO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkJBQTZCO0FBQ3pDO0FBQ0EsY0FBYywwQ0FBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtFQUFxQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwREFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFHO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRTtBQUNoRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjb250ZXh0XFxoZWxwZXJzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIgfSBmcm9tIFwiLi4vZGIvaW50ZXJuYWwtYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IGdldEJhc2VVUkwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2lzLXByb21pc2UubWpzXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBkZWZ1IGFzIGRlZnUkMSB9IGZyb20gXCJkZWZ1XCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29udGV4dC9oZWxwZXJzLnRzXG5hc3luYyBmdW5jdGlvbiBydW5QbHVnaW5Jbml0KGN0eCkge1xuXHRsZXQgb3B0aW9ucyA9IGN0eC5vcHRpb25zO1xuXHRjb25zdCBwbHVnaW5zID0gb3B0aW9ucy5wbHVnaW5zIHx8IFtdO1xuXHRsZXQgY29udGV4dCA9IGN0eDtcblx0Y29uc3QgZGJIb29rcyA9IFtdO1xuXHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBwbHVnaW5zKSBpZiAocGx1Z2luLmluaXQpIHtcblx0XHRjb25zdCBpbml0UHJvbWlzZSA9IHBsdWdpbi5pbml0KGNvbnRleHQpO1xuXHRcdGxldCByZXN1bHQ7XG5cdFx0aWYgKGlzUHJvbWlzZShpbml0UHJvbWlzZSkpIHJlc3VsdCA9IGF3YWl0IGluaXRQcm9taXNlO1xuXHRcdGVsc2UgcmVzdWx0ID0gaW5pdFByb21pc2U7XG5cdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdGlmIChyZXN1bHQub3B0aW9ucykge1xuXHRcdFx0XHRjb25zdCB7IGRhdGFiYXNlSG9va3MsIC4uLnJlc3RPcHRzIH0gPSByZXN1bHQub3B0aW9ucztcblx0XHRcdFx0aWYgKGRhdGFiYXNlSG9va3MpIGRiSG9va3MucHVzaChkYXRhYmFzZUhvb2tzKTtcblx0XHRcdFx0b3B0aW9ucyA9IGRlZnUkMShvcHRpb25zLCByZXN0T3B0cyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocmVzdWx0LmNvbnRleHQpIGNvbnRleHQgPSB7XG5cdFx0XHRcdC4uLmNvbnRleHQsXG5cdFx0XHRcdC4uLnJlc3VsdC5jb250ZXh0XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRkYkhvb2tzLnB1c2gob3B0aW9ucy5kYXRhYmFzZUhvb2tzKTtcblx0Y29udGV4dC5pbnRlcm5hbEFkYXB0ZXIgPSBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIoY29udGV4dC5hZGFwdGVyLCB7XG5cdFx0b3B0aW9ucyxcblx0XHRsb2dnZXI6IGNvbnRleHQubG9nZ2VyLFxuXHRcdGhvb2tzOiBkYkhvb2tzLmZpbHRlcigodSkgPT4gdSAhPT0gdm9pZCAwKSxcblx0XHRnZW5lcmF0ZUlkOiBjb250ZXh0LmdlbmVyYXRlSWRcblx0fSk7XG5cdGNvbnRleHQub3B0aW9ucyA9IG9wdGlvbnM7XG5cdHJldHVybiB7IGNvbnRleHQgfTtcbn1cbmZ1bmN0aW9uIGdldEludGVybmFsUGx1Z2lucyhvcHRpb25zKSB7XG5cdGNvbnN0IHBsdWdpbnMgPSBbXTtcblx0aWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmNyb3NzU3ViRG9tYWluQ29va2llcz8uZW5hYmxlZCkge31cblx0cmV0dXJuIHBsdWdpbnM7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRUcnVzdGVkT3JpZ2lucyhvcHRpb25zLCByZXF1ZXN0KSB7XG5cdGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVVJMKG9wdGlvbnMuYmFzZVVSTCwgb3B0aW9ucy5iYXNlUGF0aCwgcmVxdWVzdCk7XG5cdGNvbnN0IHRydXN0ZWRPcmlnaW5zID0gYmFzZVVSTCA/IFtuZXcgVVJMKGJhc2VVUkwpLm9yaWdpbl0gOiBbXTtcblx0aWYgKG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnRydXN0ZWRPcmlnaW5zKSkgdHJ1c3RlZE9yaWdpbnMucHVzaCguLi5vcHRpb25zLnRydXN0ZWRPcmlnaW5zKTtcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0Y29uc3QgdmFsaWRPcmlnaW5zID0gYXdhaXQgb3B0aW9ucy50cnVzdGVkT3JpZ2lucyhyZXF1ZXN0KTtcblx0XHRcdHRydXN0ZWRPcmlnaW5zLnB1c2goLi4udmFsaWRPcmlnaW5zKTtcblx0XHR9XG5cdH1cblx0Y29uc3QgZW52VHJ1c3RlZE9yaWdpbnMgPSBlbnYuQkVUVEVSX0FVVEhfVFJVU1RFRF9PUklHSU5TO1xuXHRpZiAoZW52VHJ1c3RlZE9yaWdpbnMpIHRydXN0ZWRPcmlnaW5zLnB1c2goLi4uZW52VHJ1c3RlZE9yaWdpbnMuc3BsaXQoXCIsXCIpKTtcblx0cmV0dXJuIHRydXN0ZWRPcmlnaW5zLmZpbHRlcigodikgPT4gQm9vbGVhbih2KSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0SW50ZXJuYWxQbHVnaW5zLCBnZXRUcnVzdGVkT3JpZ2lucywgcnVuUGx1Z2luSW5pdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/adapter-kysely.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/get-migration.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _create_context_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./create-context.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/context/init.ts\nconst init = async (options) => {\n\tconst adapter = await (0,_db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__.getAdapter)(options);\n\tconst getDatabaseType = (database) => (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType)(database) || \"unknown\";\n\tconst ctx = await (0,_create_context_mjs__WEBPACK_IMPORTED_MODULE_3__.createAuthContext)(adapter, options, getDatabaseType);\n\tctx.runMigrations = async function() {\n\t\tif (!options.database || \"updateMany\" in options.database) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Database is not provided or it's an adapter. Migrations are only supported with a database instance.\");\n\t\tconst { runMigrations } = await (0,_db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__.getMigrations)(options);\n\t\tawait runMigrations();\n\t};\n\treturn ctx;\n};\n\n//#endregion\n\n//# sourceMappingURL=init.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29udGV4dC9pbml0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0U7QUFDekI7QUFDRTtBQUNDO0FBQ0M7O0FBRTFEO0FBQ0E7QUFDQSx1QkFBdUIsa0VBQVU7QUFDakMsdUNBQXVDLDJGQUFxQjtBQUM1RCxtQkFBbUIsc0VBQWlCO0FBQ3BDO0FBQ0EsdUVBQXVFLG9FQUFlO0FBQ3RGLFVBQVUsZ0JBQWdCLFFBQVEsb0VBQWE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0I7QUFDaEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29udGV4dFxcaW5pdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0S3lzZWx5RGF0YWJhc2VUeXBlIH0gZnJvbSBcIi4uL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2RpYWxlY3QubWpzXCI7XG5pbXBvcnQgeyBnZXRBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2FkYXB0ZXIta3lzZWx5Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0TWlncmF0aW9ucyB9IGZyb20gXCIuLi9kYi9nZXQtbWlncmF0aW9uLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aENvbnRleHQgfSBmcm9tIFwiLi9jcmVhdGUtY29udGV4dC5tanNcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuXG4vLyNyZWdpb24gc3JjL2NvbnRleHQvaW5pdC50c1xuY29uc3QgaW5pdCA9IGFzeW5jIChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBnZXRBZGFwdGVyKG9wdGlvbnMpO1xuXHRjb25zdCBnZXREYXRhYmFzZVR5cGUgPSAoZGF0YWJhc2UpID0+IGdldEt5c2VseURhdGFiYXNlVHlwZShkYXRhYmFzZSkgfHwgXCJ1bmtub3duXCI7XG5cdGNvbnN0IGN0eCA9IGF3YWl0IGNyZWF0ZUF1dGhDb250ZXh0KGFkYXB0ZXIsIG9wdGlvbnMsIGdldERhdGFiYXNlVHlwZSk7XG5cdGN0eC5ydW5NaWdyYXRpb25zID0gYXN5bmMgZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCFvcHRpb25zLmRhdGFiYXNlIHx8IFwidXBkYXRlTWFueVwiIGluIG9wdGlvbnMuZGF0YWJhc2UpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJEYXRhYmFzZSBpcyBub3QgcHJvdmlkZWQgb3IgaXQncyBhbiBhZGFwdGVyLiBNaWdyYXRpb25zIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIGEgZGF0YWJhc2UgaW5zdGFuY2UuXCIpO1xuXHRcdGNvbnN0IHsgcnVuTWlncmF0aW9ucyB9ID0gYXdhaXQgZ2V0TWlncmF0aW9ucyhvcHRpb25zKTtcblx0XHRhd2FpdCBydW5NaWdyYXRpb25zKCk7XG5cdH07XG5cdHJldHVybiBjdHg7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGluaXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluaXQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* binding */ HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* binding */ SECURE_COOKIE_PREFIX),\n/* harmony export */   parseSetCookieHeader: () => (/* binding */ parseSetCookieHeader),\n/* harmony export */   setCookieToHeader: () => (/* binding */ setCookieToHeader),\n/* harmony export */   splitSetCookieHeader: () => (/* binding */ splitSetCookieHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* binding */ stripSecureCookiePrefix)\n/* harmony export */ });\n//#region src/cookies/cookie-utils.ts\nconst SECURE_COOKIE_PREFIX = \"__Secure-\";\nconst HOST_COOKIE_PREFIX = \"__Host-\";\n/**\n* Remove __Secure- or __Host- prefix from cookie name.\n*/\nfunction stripSecureCookiePrefix(cookieName) {\n\tif (cookieName.startsWith(SECURE_COOKIE_PREFIX)) return cookieName.slice(9);\n\tif (cookieName.startsWith(HOST_COOKIE_PREFIX)) return cookieName.slice(7);\n\treturn cookieName;\n}\n/**\n* Split `Set-Cookie` header, handling commas in `Expires` dates.\n*/\nfunction splitSetCookieHeader(setCookie) {\n\tif (!setCookie) return [];\n\tconst result = [];\n\tlet current = \"\";\n\tlet i = 0;\n\twhile (i < setCookie.length) {\n\t\tconst c = setCookie[i];\n\t\tif (c === \",\") {\n\t\t\tconst lower = current.toLowerCase();\n\t\t\tif (lower.includes(\"expires=\") && !lower.includes(\"gmt\")) {\n\t\t\t\tcurrent += c;\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tconst trimmed$1 = current.trim();\n\t\t\t\tif (trimmed$1) result.push(trimmed$1);\n\t\t\t\tcurrent = \"\";\n\t\t\t\ti++;\n\t\t\t\tif (i < setCookie.length && setCookie[i] === \" \") i++;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tcurrent += c;\n\t\ti++;\n\t}\n\tconst trimmed = current.trim();\n\tif (trimmed) result.push(trimmed);\n\treturn result;\n}\nfunction parseSetCookieHeader(setCookie) {\n\tconst cookies = /* @__PURE__ */ new Map();\n\tsplitSetCookieHeader(setCookie).forEach((cookieString) => {\n\t\tconst [nameValue, ...attributes] = cookieString.split(\";\").map((part) => part.trim());\n\t\tconst [name, ...valueParts] = (nameValue || \"\").split(\"=\");\n\t\tconst value = valueParts.join(\"=\");\n\t\tif (!name || value === void 0) return;\n\t\tconst attrObj = { value };\n\t\tattributes.forEach((attribute) => {\n\t\t\tconst [attrName, ...attrValueParts] = attribute.split(\"=\");\n\t\t\tconst attrValue = attrValueParts.join(\"=\");\n\t\t\tconst normalizedAttrName = attrName.trim().toLowerCase();\n\t\t\tswitch (normalizedAttrName) {\n\t\t\t\tcase \"max-age\":\n\t\t\t\t\tattrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"expires\":\n\t\t\t\t\tattrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"domain\":\n\t\t\t\t\tattrObj.domain = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"path\":\n\t\t\t\t\tattrObj.path = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"secure\":\n\t\t\t\t\tattrObj.secure = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"httponly\":\n\t\t\t\t\tattrObj.httponly = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"samesite\":\n\t\t\t\t\tattrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tattrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tcookies.set(name, attrObj);\n\t});\n\treturn cookies;\n}\nfunction setCookieToHeader(headers) {\n\treturn (context) => {\n\t\tconst setCookieHeader = context.response.headers.get(\"set-cookie\");\n\t\tif (!setCookieHeader) return;\n\t\tconst cookieMap = /* @__PURE__ */ new Map();\n\t\t(headers.get(\"cookie\") || \"\").split(\";\").forEach((cookie) => {\n\t\t\tconst [name, ...rest] = cookie.trim().split(\"=\");\n\t\t\tif (name && rest.length > 0) cookieMap.set(name, rest.join(\"=\"));\n\t\t});\n\t\tparseSetCookieHeader(setCookieHeader).forEach((value, name) => {\n\t\t\tcookieMap.set(name, value.value);\n\t\t});\n\t\tconst updatedCookies = Array.from(cookieMap.entries()).map(([name, value]) => `${name}=${value}`).join(\"; \");\n\t\theaders.set(\"cookie\", updatedCookies);\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=cookie-utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29va2llcy9jb29raWUtdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILG1GQUFtRixLQUFLLEdBQUcsTUFBTSxXQUFXO0FBQzVHO0FBQ0E7QUFDQTs7QUFFQTtBQUM0STtBQUM1SSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjb29raWVzXFxjb29raWUtdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvY29va2llcy9jb29raWUtdXRpbHMudHNcbmNvbnN0IFNFQ1VSRV9DT09LSUVfUFJFRklYID0gXCJfX1NlY3VyZS1cIjtcbmNvbnN0IEhPU1RfQ09PS0lFX1BSRUZJWCA9IFwiX19Ib3N0LVwiO1xuLyoqXG4qIFJlbW92ZSBfX1NlY3VyZS0gb3IgX19Ib3N0LSBwcmVmaXggZnJvbSBjb29raWUgbmFtZS5cbiovXG5mdW5jdGlvbiBzdHJpcFNlY3VyZUNvb2tpZVByZWZpeChjb29raWVOYW1lKSB7XG5cdGlmIChjb29raWVOYW1lLnN0YXJ0c1dpdGgoU0VDVVJFX0NPT0tJRV9QUkVGSVgpKSByZXR1cm4gY29va2llTmFtZS5zbGljZSg5KTtcblx0aWYgKGNvb2tpZU5hbWUuc3RhcnRzV2l0aChIT1NUX0NPT0tJRV9QUkVGSVgpKSByZXR1cm4gY29va2llTmFtZS5zbGljZSg3KTtcblx0cmV0dXJuIGNvb2tpZU5hbWU7XG59XG4vKipcbiogU3BsaXQgYFNldC1Db29raWVgIGhlYWRlciwgaGFuZGxpbmcgY29tbWFzIGluIGBFeHBpcmVzYCBkYXRlcy5cbiovXG5mdW5jdGlvbiBzcGxpdFNldENvb2tpZUhlYWRlcihzZXRDb29raWUpIHtcblx0aWYgKCFzZXRDb29raWUpIHJldHVybiBbXTtcblx0Y29uc3QgcmVzdWx0ID0gW107XG5cdGxldCBjdXJyZW50ID0gXCJcIjtcblx0bGV0IGkgPSAwO1xuXHR3aGlsZSAoaSA8IHNldENvb2tpZS5sZW5ndGgpIHtcblx0XHRjb25zdCBjID0gc2V0Q29va2llW2ldO1xuXHRcdGlmIChjID09PSBcIixcIikge1xuXHRcdFx0Y29uc3QgbG93ZXIgPSBjdXJyZW50LnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRpZiAobG93ZXIuaW5jbHVkZXMoXCJleHBpcmVzPVwiKSAmJiAhbG93ZXIuaW5jbHVkZXMoXCJnbXRcIikpIHtcblx0XHRcdFx0Y3VycmVudCArPSBjO1xuXHRcdFx0XHRpKys7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCB0cmltbWVkJDEgPSBjdXJyZW50LnRyaW0oKTtcblx0XHRcdFx0aWYgKHRyaW1tZWQkMSkgcmVzdWx0LnB1c2godHJpbW1lZCQxKTtcblx0XHRcdFx0Y3VycmVudCA9IFwiXCI7XG5cdFx0XHRcdGkrKztcblx0XHRcdFx0aWYgKGkgPCBzZXRDb29raWUubGVuZ3RoICYmIHNldENvb2tpZVtpXSA9PT0gXCIgXCIpIGkrKztcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRjdXJyZW50ICs9IGM7XG5cdFx0aSsrO1xuXHR9XG5cdGNvbnN0IHRyaW1tZWQgPSBjdXJyZW50LnRyaW0oKTtcblx0aWYgKHRyaW1tZWQpIHJlc3VsdC5wdXNoKHRyaW1tZWQpO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcGFyc2VTZXRDb29raWVIZWFkZXIoc2V0Q29va2llKSB7XG5cdGNvbnN0IGNvb2tpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRzcGxpdFNldENvb2tpZUhlYWRlcihzZXRDb29raWUpLmZvckVhY2goKGNvb2tpZVN0cmluZykgPT4ge1xuXHRcdGNvbnN0IFtuYW1lVmFsdWUsIC4uLmF0dHJpYnV0ZXNdID0gY29va2llU3RyaW5nLnNwbGl0KFwiO1wiKS5tYXAoKHBhcnQpID0+IHBhcnQudHJpbSgpKTtcblx0XHRjb25zdCBbbmFtZSwgLi4udmFsdWVQYXJ0c10gPSAobmFtZVZhbHVlIHx8IFwiXCIpLnNwbGl0KFwiPVwiKTtcblx0XHRjb25zdCB2YWx1ZSA9IHZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdFx0aWYgKCFuYW1lIHx8IHZhbHVlID09PSB2b2lkIDApIHJldHVybjtcblx0XHRjb25zdCBhdHRyT2JqID0geyB2YWx1ZSB9O1xuXHRcdGF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XG5cdFx0XHRjb25zdCBbYXR0ck5hbWUsIC4uLmF0dHJWYWx1ZVBhcnRzXSA9IGF0dHJpYnV0ZS5zcGxpdChcIj1cIik7XG5cdFx0XHRjb25zdCBhdHRyVmFsdWUgPSBhdHRyVmFsdWVQYXJ0cy5qb2luKFwiPVwiKTtcblx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRBdHRyTmFtZSA9IGF0dHJOYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0c3dpdGNoIChub3JtYWxpemVkQXR0ck5hbWUpIHtcblx0XHRcdFx0Y2FzZSBcIm1heC1hZ2VcIjpcblx0XHRcdFx0XHRhdHRyT2JqW1wibWF4LWFnZVwiXSA9IGF0dHJWYWx1ZSA/IHBhcnNlSW50KGF0dHJWYWx1ZS50cmltKCksIDEwKSA6IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImV4cGlyZXNcIjpcblx0XHRcdFx0XHRhdHRyT2JqLmV4cGlyZXMgPSBhdHRyVmFsdWUgPyBuZXcgRGF0ZShhdHRyVmFsdWUudHJpbSgpKSA6IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImRvbWFpblwiOlxuXHRcdFx0XHRcdGF0dHJPYmouZG9tYWluID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKSA6IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInBhdGhcIjpcblx0XHRcdFx0XHRhdHRyT2JqLnBhdGggPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpIDogdm9pZCAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2VjdXJlXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5zZWN1cmUgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiaHR0cG9ubHlcIjpcblx0XHRcdFx0XHRhdHRyT2JqLmh0dHBvbmx5ID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInNhbWVzaXRlXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5zYW1lc2l0ZSA9IGF0dHJWYWx1ZSA/IGF0dHJWYWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKSA6IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRhdHRyT2JqW25vcm1hbGl6ZWRBdHRyTmFtZV0gPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpIDogdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb29raWVzLnNldChuYW1lLCBhdHRyT2JqKTtcblx0fSk7XG5cdHJldHVybiBjb29raWVzO1xufVxuZnVuY3Rpb24gc2V0Q29va2llVG9IZWFkZXIoaGVhZGVycykge1xuXHRyZXR1cm4gKGNvbnRleHQpID0+IHtcblx0XHRjb25zdCBzZXRDb29raWVIZWFkZXIgPSBjb250ZXh0LnJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRpZiAoIXNldENvb2tpZUhlYWRlcikgcmV0dXJuO1xuXHRcdGNvbnN0IGNvb2tpZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0KGhlYWRlcnMuZ2V0KFwiY29va2llXCIpIHx8IFwiXCIpLnNwbGl0KFwiO1wiKS5mb3JFYWNoKChjb29raWUpID0+IHtcblx0XHRcdGNvbnN0IFtuYW1lLCAuLi5yZXN0XSA9IGNvb2tpZS50cmltKCkuc3BsaXQoXCI9XCIpO1xuXHRcdFx0aWYgKG5hbWUgJiYgcmVzdC5sZW5ndGggPiAwKSBjb29raWVNYXAuc2V0KG5hbWUsIHJlc3Quam9pbihcIj1cIikpO1xuXHRcdH0pO1xuXHRcdHBhcnNlU2V0Q29va2llSGVhZGVyKHNldENvb2tpZUhlYWRlcikuZm9yRWFjaCgodmFsdWUsIG5hbWUpID0+IHtcblx0XHRcdGNvb2tpZU1hcC5zZXQobmFtZSwgdmFsdWUudmFsdWUpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHVwZGF0ZWRDb29raWVzID0gQXJyYXkuZnJvbShjb29raWVNYXAuZW50cmllcygpKS5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IGAke25hbWV9PSR7dmFsdWV9YCkuam9pbihcIjsgXCIpO1xuXHRcdGhlYWRlcnMuc2V0KFwiY29va2llXCIsIHVwZGF0ZWRDb29raWVzKTtcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBIT1NUX0NPT0tJRV9QUkVGSVgsIFNFQ1VSRV9DT09LSUVfUFJFRklYLCBwYXJzZVNldENvb2tpZUhlYWRlciwgc2V0Q29va2llVG9IZWFkZXIsIHNwbGl0U2V0Q29va2llSGVhZGVyLCBzdHJpcFNlY3VyZUNvb2tpZVByZWZpeCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29va2llLXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX),\n/* harmony export */   createCookieGetter: () => (/* binding */ createCookieGetter),\n/* harmony export */   createSessionStore: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore),\n/* harmony export */   deleteSessionCookie: () => (/* binding */ deleteSessionCookie),\n/* harmony export */   expireCookie: () => (/* binding */ expireCookie),\n/* harmony export */   getChunkedCookie: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getChunkedCookie),\n/* harmony export */   getCookieCache: () => (/* binding */ getCookieCache),\n/* harmony export */   getCookies: () => (/* binding */ getCookies),\n/* harmony export */   getSessionCookie: () => (/* binding */ getSessionCookie),\n/* harmony export */   parseCookies: () => (/* binding */ parseCookies),\n/* harmony export */   parseSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.parseSetCookieHeader),\n/* harmony export */   setCookieCache: () => (/* binding */ setCookieCache),\n/* harmony export */   setCookieToHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieToHeader),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   splitSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.splitSetCookieHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.stripSecureCookiePrefix)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-store.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/time.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cookie-utils.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/cookies/index.ts\nfunction createCookieGetter(options) {\n\tconst secureCookiePrefix = (options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL ? options.baseURL.startsWith(\"https://\") ? true : false : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.isProduction) ? _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX : \"\";\n\tconst crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n\tconst domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n\tif (crossSubdomainEnabled && !domain) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"baseURL is required when crossSubdomainCookies are enabled\");\n\tfunction createCookie(cookieName, overrideAttributes = {}) {\n\t\tconst prefix = options.advanced?.cookiePrefix || \"better-auth\";\n\t\tconst name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n\t\tconst attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n\t\treturn {\n\t\t\tname: `${secureCookiePrefix}${name}`,\n\t\t\tattributes: {\n\t\t\t\tsecure: !!secureCookiePrefix,\n\t\t\t\tsameSite: \"lax\",\n\t\t\t\tpath: \"/\",\n\t\t\t\thttpOnly: true,\n\t\t\t\t...crossSubdomainEnabled ? { domain } : {},\n\t\t\t\t...options.advanced?.defaultCookieAttributes,\n\t\t\t\t...overrideAttributes,\n\t\t\t\t...attributes\n\t\t\t}\n\t\t};\n\t}\n\treturn createCookie;\n}\nfunction getCookies(options) {\n\tconst createCookie = createCookieGetter(options);\n\tconst sessionToken = createCookie(\"session_token\", { maxAge: options.session?.expiresIn || (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_5__.sec)(\"7d\") });\n\tconst sessionData = createCookie(\"session_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst accountData = createCookie(\"account_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst dontRememberToken = createCookie(\"dont_remember\");\n\treturn {\n\t\tsessionToken: {\n\t\t\tname: sessionToken.name,\n\t\t\tattributes: sessionToken.attributes\n\t\t},\n\t\tsessionData: {\n\t\t\tname: sessionData.name,\n\t\t\tattributes: sessionData.attributes\n\t\t},\n\t\tdontRememberToken: {\n\t\t\tname: dontRememberToken.name,\n\t\t\tattributes: dontRememberToken.attributes\n\t\t},\n\t\taccountData: {\n\t\t\tname: accountData.name,\n\t\t\tattributes: accountData.attributes\n\t\t}\n\t};\n}\nasync function setCookieCache(ctx, session, dontRememberMe) {\n\tif (!ctx.context.options.session?.cookieCache?.enabled) return;\n\tconst filteredSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.filterOutputFields)(session.session, ctx.context.options.session?.additionalFields);\n\tconst filteredUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\tlet version = \"1\";\n\tif (versionConfig) {\n\t\tif (typeof versionConfig === \"string\") version = versionConfig;\n\t\telse if (typeof versionConfig === \"function\") {\n\t\t\tconst result = versionConfig(session.session, session.user);\n\t\t\tversion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t}\n\t}\n\tconst sessionData = {\n\t\tsession: filteredSession,\n\t\tuser: filteredUser,\n\t\tupdatedAt: Date.now(),\n\t\tversion\n\t};\n\tconst options = {\n\t\t...ctx.context.authCookies.sessionData.attributes,\n\t\tmaxAge: dontRememberMe ? void 0 : ctx.context.authCookies.sessionData.attributes.maxAge\n\t};\n\tconst expiresAtDate = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(options.maxAge || 60, \"sec\").getTime();\n\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\tlet data;\n\tif (strategy === \"jwe\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncodeJWT)(sessionData, ctx.context.secret, \"better-auth-session\", options.maxAge || 300);\n\telse if (strategy === \"jwt\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.signJWT)(sessionData, ctx.context.secret, options.maxAge || 300);\n\telse data = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__.base64Url.encode(JSON.stringify({\n\t\tsession: sessionData,\n\t\texpiresAt: expiresAtDate,\n\t\tsignature: await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx.context.secret, JSON.stringify({\n\t\t\t...sessionData,\n\t\t\texpiresAt: expiresAtDate\n\t\t}))\n\t}), { padding: false });\n\tif (data.length > 4093) {\n\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\tconst cookies = sessionStore.chunk(data, options);\n\t\tsessionStore.setCookies(cookies);\n\t} else {\n\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\tif (sessionStore.hasChunks()) {\n\t\t\tconst cleanCookies = sessionStore.clean();\n\t\t\tsessionStore.setCookies(cleanCookies);\n\t\t}\n\t\tctx.setCookie(ctx.context.authCookies.sessionData.name, data, options);\n\t}\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\tconst accountData = await (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccountCookie)(ctx);\n\t\tif (accountData) await (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccountCookie)(ctx, accountData);\n\t}\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n\tconst dontRememberMeCookie = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\tdontRememberMe = dontRememberMe !== void 0 ? dontRememberMe : !!dontRememberMeCookie;\n\tconst options = ctx.context.authCookies.sessionToken.attributes;\n\tconst maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n\tawait ctx.setSignedCookie(ctx.context.authCookies.sessionToken.name, session.session.token, ctx.context.secret, {\n\t\t...options,\n\t\tmaxAge,\n\t\t...overrides\n\t});\n\tif (dontRememberMe) await ctx.setSignedCookie(ctx.context.authCookies.dontRememberToken.name, \"true\", ctx.context.secret, ctx.context.authCookies.dontRememberToken.attributes);\n\tawait setCookieCache(ctx, session, dontRememberMe);\n\tctx.context.setNewSession(session);\n}\n/**\n* Expires a cookie by setting `maxAge: 0` while preserving its attributes\n*/\nfunction expireCookie(ctx, cookie) {\n\tctx.setCookie(cookie.name, \"\", {\n\t\t...cookie.attributes,\n\t\tmaxAge: 0\n\t});\n}\nfunction deleteSessionCookie(ctx, skipDontRememberMe) {\n\texpireCookie(ctx, ctx.context.authCookies.sessionToken);\n\texpireCookie(ctx, ctx.context.authCookies.sessionData);\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\texpireCookie(ctx, ctx.context.authCookies.accountData);\n\t\tconst accountStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createAccountStore)(ctx.context.authCookies.accountData.name, ctx.context.authCookies.accountData.attributes, ctx);\n\t\tconst cleanCookies$1 = accountStore.clean();\n\t\taccountStore.setCookies(cleanCookies$1);\n\t}\n\tif (ctx.context.oauthConfig.storeStateStrategy === \"cookie\") expireCookie(ctx, ctx.context.createAuthCookie(\"oauth_state\"));\n\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, ctx.context.authCookies.sessionData.attributes, ctx);\n\tconst cleanCookies = sessionStore.clean();\n\tsessionStore.setCookies(cleanCookies);\n\tif (!skipDontRememberMe) expireCookie(ctx, ctx.context.authCookies.dontRememberToken);\n}\nfunction parseCookies(cookieHeader) {\n\tconst cookies = cookieHeader.split(\"; \");\n\tconst cookieMap = /* @__PURE__ */ new Map();\n\tcookies.forEach((cookie) => {\n\t\tconst [name, value] = cookie.split(/=(.*)/s);\n\t\tcookieMap.set(name, value);\n\t});\n\treturn cookieMap;\n}\nconst getSessionCookie = (request, config) => {\n\tif (config?.cookiePrefix) if (config.cookieName) config.cookiePrefix = `${config.cookiePrefix}-`;\n\telse config.cookiePrefix = `${config.cookiePrefix}.`;\n\tconst cookies = (\"headers\" in request ? request.headers : request).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } = config || {};\n\tconst name = `${cookiePrefix}${cookieName}`;\n\tconst secureCookieName = `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${name}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tconst sessionToken = parsedCookie.get(name) || parsedCookie.get(secureCookieName);\n\tif (sessionToken) return sessionToken;\n\treturn null;\n};\nconst getCookieCache = async (request, config) => {\n\tconst cookies = (request instanceof Headers ? request : request.headers).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } = config || {};\n\tconst name = config?.isSecure !== void 0 ? config.isSecure ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}` : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.isProduction ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tlet sessionData = parsedCookie.get(name);\n\tif (!sessionData) {\n\t\tconst chunks = [];\n\t\tfor (const [cookieName$1, value] of parsedCookie.entries()) if (cookieName$1.startsWith(name + \".\")) {\n\t\t\tconst parts = cookieName$1.split(\".\");\n\t\t\tconst indexStr = parts[parts.length - 1];\n\t\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\t\tif (!isNaN(index)) chunks.push({\n\t\t\t\tindex,\n\t\t\t\tvalue\n\t\t\t});\n\t\t}\n\t\tif (chunks.length > 0) {\n\t\t\tchunks.sort((a, b) => a.index - b.index);\n\t\t\tsessionData = chunks.map((c) => c.value).join(\"\");\n\t\t}\n\t}\n\tif (sessionData) {\n\t\tconst secret = config?.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.env.BETTER_AUTH_SECRET;\n\t\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\");\n\t\tconst strategy = config?.strategy || \"compact\";\n\t\tif (strategy === \"jwe\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecodeJWT)(sessionData, secret, \"better-auth-session\");\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else if (strategy === \"jwt\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyJWT)(sessionData, secret);\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst sessionDataPayload = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__.base64Url.decode(sessionData)));\n\t\t\tif (!sessionDataPayload) return null;\n\t\t\tif (!await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(secret, JSON.stringify({\n\t\t\t\t...sessionDataPayload.session,\n\t\t\t\texpiresAt: sessionDataPayload.expiresAt\n\t\t\t}), sessionDataPayload.signature)) return null;\n\t\t\tif (config?.version && sessionDataPayload.session) {\n\t\t\t\tconst cookieVersion = sessionDataPayload.session.version || \"1\";\n\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\tconst result = config.version(sessionDataPayload.session.session, sessionDataPayload.session.user);\n\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t}\n\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t}\n\t\t\treturn sessionDataPayload.session;\n\t\t}\n\t}\n\treturn null;\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29va2llcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ087QUFDNEM7QUFDb0M7QUFDL0U7QUFDWjtBQUM4SDtBQUM1RztBQUNBO0FBQ2tCO0FBQ3RCO0FBQ0g7QUFDRTs7QUFFckQ7QUFDQTtBQUNBLDRMQUE0TCwrREFBWSxJQUFJLG1FQUFvQjtBQUNoTztBQUNBO0FBQ0EsaURBQWlELG9FQUFlO0FBQ2hFLDBEQUEwRDtBQUMxRDtBQUNBLG1FQUFtRSxPQUFPLEdBQUcsV0FBVztBQUN4RjtBQUNBO0FBQ0EsWUFBWSxtQkFBbUIsRUFBRSxLQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsU0FBUyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHNDQUFzQyxvREFBRyxRQUFRO0FBQ3ZHLG9EQUFvRCxxREFBcUQ7QUFDekcsb0RBQW9ELHFEQUFxRDtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyRUFBa0I7QUFDM0Msc0JBQXNCLCtEQUFlO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0VBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdEQUFPO0FBQzlCO0FBQ0E7QUFDQSxzQ0FBc0MsbUVBQWtCO0FBQ3hELDJDQUEyQyx3REFBTztBQUNsRCxhQUFhLGlFQUFTO0FBQ3RCO0FBQ0E7QUFDQSxtQkFBbUIsb0VBQVU7QUFDN0I7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLEtBQUssZ0JBQWdCO0FBQ3ZCO0FBQ0EsdUJBQXVCLHNFQUFrQjtBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNILHVCQUF1QixzRUFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0VBQWdCO0FBQzVDLHlCQUF5QixvRUFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzRUFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0VBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9CQUFvQjtBQUMvRiwrQkFBK0Isb0JBQW9CO0FBQ25EO0FBQ0E7QUFDQSxTQUFTLDhEQUE4RDtBQUN2RSxpQkFBaUIsYUFBYSxFQUFFLFdBQVc7QUFDM0MsNkJBQTZCLG1FQUFvQixDQUFDLEVBQUUsS0FBSztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw0REFBNEQ7QUFDckUsaUVBQWlFLG1FQUFvQixDQUFDLEVBQUUsYUFBYSxHQUFHLFdBQVcsT0FBTyxhQUFhLEdBQUcsV0FBVyxJQUFJLCtEQUFZLE1BQU0sbUVBQW9CLENBQUMsRUFBRSxhQUFhLEdBQUcsV0FBVyxPQUFPLGFBQWEsR0FBRyxXQUFXO0FBQy9QO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0RBQUc7QUFDdEMseUJBQXlCLG9FQUFlO0FBQ3hDO0FBQ0E7QUFDQSx5QkFBeUIsbUVBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdFQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix5QkFBeUIsMERBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0VBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDhCQUE4QixzRUFBYSxDQUFDLDhEQUFNLFFBQVEsaUVBQVM7QUFDbkU7QUFDQSxjQUFjLG9FQUFVO0FBQ3hCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdVU7QUFDdlUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29va2llc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBzaWduSldULCBzeW1tZXRyaWNEZWNvZGVKV1QsIHN5bW1ldHJpY0VuY29kZUpXVCwgdmVyaWZ5SldUIH0gZnJvbSBcIi4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBY2NvdW50U3RvcmUsIGNyZWF0ZVNlc3Npb25TdG9yZSwgZ2V0QWNjb3VudENvb2tpZSwgZ2V0Q2h1bmtlZENvb2tpZSwgc2V0QWNjb3VudENvb2tpZSB9IGZyb20gXCIuL3Nlc3Npb24tc3RvcmUubWpzXCI7XG5pbXBvcnQgeyBpc1Byb21pc2UgfSBmcm9tIFwiLi4vdXRpbHMvaXMtcHJvbWlzZS5tanNcIjtcbmltcG9ydCB7IHNlYyB9IGZyb20gXCIuLi91dGlscy90aW1lLm1qc1wiO1xuaW1wb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZVRvSGVhZGVyLCBzcGxpdFNldENvb2tpZUhlYWRlciwgc3RyaXBTZWN1cmVDb29raWVQcmVmaXggfSBmcm9tIFwiLi9jb29raWUtdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBlbnYsIGlzUHJvZHVjdGlvbiB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgZmlsdGVyT3V0cHV0RmllbGRzLCBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuaW1wb3J0IHsgYmluYXJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iaW5hcnlcIjtcbmltcG9ydCB7IGNyZWF0ZUhNQUMgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2htYWNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb29raWVzL2luZGV4LnRzXG5mdW5jdGlvbiBjcmVhdGVDb29raWVHZXR0ZXIob3B0aW9ucykge1xuXHRjb25zdCBzZWN1cmVDb29raWVQcmVmaXggPSAob3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyAhPT0gdm9pZCAwID8gb3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyA6IG9wdGlvbnMuYmFzZVVSTCA/IG9wdGlvbnMuYmFzZVVSTC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikgPyB0cnVlIDogZmFsc2UgOiBpc1Byb2R1Y3Rpb24pID8gU0VDVVJFX0NPT0tJRV9QUkVGSVggOiBcIlwiO1xuXHRjb25zdCBjcm9zc1N1YmRvbWFpbkVuYWJsZWQgPSAhIW9wdGlvbnMuYWR2YW5jZWQ/LmNyb3NzU3ViRG9tYWluQ29va2llcz8uZW5hYmxlZDtcblx0Y29uc3QgZG9tYWluID0gY3Jvc3NTdWJkb21haW5FbmFibGVkID8gb3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5kb21haW4gfHwgKG9wdGlvbnMuYmFzZVVSTCA/IG5ldyBVUkwob3B0aW9ucy5iYXNlVVJMKS5ob3N0bmFtZSA6IHZvaWQgMCkgOiB2b2lkIDA7XG5cdGlmIChjcm9zc1N1YmRvbWFpbkVuYWJsZWQgJiYgIWRvbWFpbikgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImJhc2VVUkwgaXMgcmVxdWlyZWQgd2hlbiBjcm9zc1N1YmRvbWFpbkNvb2tpZXMgYXJlIGVuYWJsZWRcIik7XG5cdGZ1bmN0aW9uIGNyZWF0ZUNvb2tpZShjb29raWVOYW1lLCBvdmVycmlkZUF0dHJpYnV0ZXMgPSB7fSkge1xuXHRcdGNvbnN0IHByZWZpeCA9IG9wdGlvbnMuYWR2YW5jZWQ/LmNvb2tpZVByZWZpeCB8fCBcImJldHRlci1hdXRoXCI7XG5cdFx0Y29uc3QgbmFtZSA9IG9wdGlvbnMuYWR2YW5jZWQ/LmNvb2tpZXM/Lltjb29raWVOYW1lXT8ubmFtZSB8fCBgJHtwcmVmaXh9LiR7Y29va2llTmFtZX1gO1xuXHRcdGNvbnN0IGF0dHJpYnV0ZXMgPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVzPy5bY29va2llTmFtZV0/LmF0dHJpYnV0ZXM7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IGAke3NlY3VyZUNvb2tpZVByZWZpeH0ke25hbWV9YCxcblx0XHRcdGF0dHJpYnV0ZXM6IHtcblx0XHRcdFx0c2VjdXJlOiAhIXNlY3VyZUNvb2tpZVByZWZpeCxcblx0XHRcdFx0c2FtZVNpdGU6IFwibGF4XCIsXG5cdFx0XHRcdHBhdGg6IFwiL1wiLFxuXHRcdFx0XHRodHRwT25seTogdHJ1ZSxcblx0XHRcdFx0Li4uY3Jvc3NTdWJkb21haW5FbmFibGVkID8geyBkb21haW4gfSA6IHt9LFxuXHRcdFx0XHQuLi5vcHRpb25zLmFkdmFuY2VkPy5kZWZhdWx0Q29va2llQXR0cmlidXRlcyxcblx0XHRcdFx0Li4ub3ZlcnJpZGVBdHRyaWJ1dGVzLFxuXHRcdFx0XHQuLi5hdHRyaWJ1dGVzXG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gY3JlYXRlQ29va2llO1xufVxuZnVuY3Rpb24gZ2V0Q29va2llcyhvcHRpb25zKSB7XG5cdGNvbnN0IGNyZWF0ZUNvb2tpZSA9IGNyZWF0ZUNvb2tpZUdldHRlcihvcHRpb25zKTtcblx0Y29uc3Qgc2Vzc2lvblRva2VuID0gY3JlYXRlQ29va2llKFwic2Vzc2lvbl90b2tlblwiLCB7IG1heEFnZTogb3B0aW9ucy5zZXNzaW9uPy5leHBpcmVzSW4gfHwgc2VjKFwiN2RcIikgfSk7XG5cdGNvbnN0IHNlc3Npb25EYXRhID0gY3JlYXRlQ29va2llKFwic2Vzc2lvbl9kYXRhXCIsIHsgbWF4QWdlOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5tYXhBZ2UgfHwgMzAwIH0pO1xuXHRjb25zdCBhY2NvdW50RGF0YSA9IGNyZWF0ZUNvb2tpZShcImFjY291bnRfZGF0YVwiLCB7IG1heEFnZTogb3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMCB9KTtcblx0Y29uc3QgZG9udFJlbWVtYmVyVG9rZW4gPSBjcmVhdGVDb29raWUoXCJkb250X3JlbWVtYmVyXCIpO1xuXHRyZXR1cm4ge1xuXHRcdHNlc3Npb25Ub2tlbjoge1xuXHRcdFx0bmFtZTogc2Vzc2lvblRva2VuLm5hbWUsXG5cdFx0XHRhdHRyaWJ1dGVzOiBzZXNzaW9uVG9rZW4uYXR0cmlidXRlc1xuXHRcdH0sXG5cdFx0c2Vzc2lvbkRhdGE6IHtcblx0XHRcdG5hbWU6IHNlc3Npb25EYXRhLm5hbWUsXG5cdFx0XHRhdHRyaWJ1dGVzOiBzZXNzaW9uRGF0YS5hdHRyaWJ1dGVzXG5cdFx0fSxcblx0XHRkb250UmVtZW1iZXJUb2tlbjoge1xuXHRcdFx0bmFtZTogZG9udFJlbWVtYmVyVG9rZW4ubmFtZSxcblx0XHRcdGF0dHJpYnV0ZXM6IGRvbnRSZW1lbWJlclRva2VuLmF0dHJpYnV0ZXNcblx0XHR9LFxuXHRcdGFjY291bnREYXRhOiB7XG5cdFx0XHRuYW1lOiBhY2NvdW50RGF0YS5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogYWNjb3VudERhdGEuYXR0cmlidXRlc1xuXHRcdH1cblx0fTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHNldENvb2tpZUNhY2hlKGN0eCwgc2Vzc2lvbiwgZG9udFJlbWVtYmVyTWUpIHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5lbmFibGVkKSByZXR1cm47XG5cdGNvbnN0IGZpbHRlcmVkU2Vzc2lvbiA9IGZpbHRlck91dHB1dEZpZWxkcyhzZXNzaW9uLnNlc3Npb24sIGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uYWRkaXRpb25hbEZpZWxkcyk7XG5cdGNvbnN0IGZpbHRlcmVkVXNlciA9IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnVzZXIpO1xuXHRjb25zdCB2ZXJzaW9uQ29uZmlnID0gY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8udmVyc2lvbjtcblx0bGV0IHZlcnNpb24gPSBcIjFcIjtcblx0aWYgKHZlcnNpb25Db25maWcpIHtcblx0XHRpZiAodHlwZW9mIHZlcnNpb25Db25maWcgPT09IFwic3RyaW5nXCIpIHZlcnNpb24gPSB2ZXJzaW9uQ29uZmlnO1xuXHRcdGVsc2UgaWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHZlcnNpb25Db25maWcoc2Vzc2lvbi5zZXNzaW9uLCBzZXNzaW9uLnVzZXIpO1xuXHRcdFx0dmVyc2lvbiA9IGlzUHJvbWlzZShyZXN1bHQpID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuXHRcdH1cblx0fVxuXHRjb25zdCBzZXNzaW9uRGF0YSA9IHtcblx0XHRzZXNzaW9uOiBmaWx0ZXJlZFNlc3Npb24sXG5cdFx0dXNlcjogZmlsdGVyZWRVc2VyLFxuXHRcdHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcblx0XHR2ZXJzaW9uXG5cdH07XG5cdGNvbnN0IG9wdGlvbnMgPSB7XG5cdFx0Li4uY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEuYXR0cmlidXRlcyxcblx0XHRtYXhBZ2U6IGRvbnRSZW1lbWJlck1lID8gdm9pZCAwIDogY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEuYXR0cmlidXRlcy5tYXhBZ2Vcblx0fTtcblx0Y29uc3QgZXhwaXJlc0F0RGF0ZSA9IGdldERhdGUob3B0aW9ucy5tYXhBZ2UgfHwgNjAsIFwic2VjXCIpLmdldFRpbWUoKTtcblx0Y29uc3Qgc3RyYXRlZ3kgPSBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5zdHJhdGVneSB8fCBcImNvbXBhY3RcIjtcblx0bGV0IGRhdGE7XG5cdGlmIChzdHJhdGVneSA9PT0gXCJqd2VcIikgZGF0YSA9IGF3YWl0IHN5bW1ldHJpY0VuY29kZUpXVChzZXNzaW9uRGF0YSwgY3R4LmNvbnRleHQuc2VjcmV0LCBcImJldHRlci1hdXRoLXNlc3Npb25cIiwgb3B0aW9ucy5tYXhBZ2UgfHwgMzAwKTtcblx0ZWxzZSBpZiAoc3RyYXRlZ3kgPT09IFwiand0XCIpIGRhdGEgPSBhd2FpdCBzaWduSldUKHNlc3Npb25EYXRhLCBjdHguY29udGV4dC5zZWNyZXQsIG9wdGlvbnMubWF4QWdlIHx8IDMwMCk7XG5cdGVsc2UgZGF0YSA9IGJhc2U2NFVybC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoe1xuXHRcdHNlc3Npb246IHNlc3Npb25EYXRhLFxuXHRcdGV4cGlyZXNBdDogZXhwaXJlc0F0RGF0ZSxcblx0XHRzaWduYXR1cmU6IGF3YWl0IGNyZWF0ZUhNQUMoXCJTSEEtMjU2XCIsIFwiYmFzZTY0dXJsbm9wYWRcIikuc2lnbihjdHguY29udGV4dC5zZWNyZXQsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdC4uLnNlc3Npb25EYXRhLFxuXHRcdFx0ZXhwaXJlc0F0OiBleHBpcmVzQXREYXRlXG5cdFx0fSkpXG5cdH0pLCB7IHBhZGRpbmc6IGZhbHNlIH0pO1xuXHRpZiAoZGF0YS5sZW5ndGggPiA0MDkzKSB7XG5cdFx0Y29uc3Qgc2Vzc2lvblN0b3JlID0gY3JlYXRlU2Vzc2lvblN0b3JlKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIG9wdGlvbnMsIGN0eCk7XG5cdFx0Y29uc3QgY29va2llcyA9IHNlc3Npb25TdG9yZS5jaHVuayhkYXRhLCBvcHRpb25zKTtcblx0XHRzZXNzaW9uU3RvcmUuc2V0Q29va2llcyhjb29raWVzKTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBzZXNzaW9uU3RvcmUgPSBjcmVhdGVTZXNzaW9uU3RvcmUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSwgb3B0aW9ucywgY3R4KTtcblx0XHRpZiAoc2Vzc2lvblN0b3JlLmhhc0NodW5rcygpKSB7XG5cdFx0XHRjb25zdCBjbGVhbkNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2xlYW4oKTtcblx0XHRcdHNlc3Npb25TdG9yZS5zZXRDb29raWVzKGNsZWFuQ29va2llcyk7XG5cdFx0fVxuXHRcdGN0eC5zZXRDb29raWUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSwgZGF0YSwgb3B0aW9ucyk7XG5cdH1cblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSB7XG5cdFx0Y29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCBnZXRBY2NvdW50Q29va2llKGN0eCk7XG5cdFx0aWYgKGFjY291bnREYXRhKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGN0eCwgYWNjb3VudERhdGEpO1xuXHR9XG59XG5hc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uQ29va2llKGN0eCwgc2Vzc2lvbiwgZG9udFJlbWVtYmVyTWUsIG92ZXJyaWRlcykge1xuXHRjb25zdCBkb250UmVtZW1iZXJNZUNvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0ZG9udFJlbWVtYmVyTWUgPSBkb250UmVtZW1iZXJNZSAhPT0gdm9pZCAwID8gZG9udFJlbWVtYmVyTWUgOiAhIWRvbnRSZW1lbWJlck1lQ29va2llO1xuXHRjb25zdCBvcHRpb25zID0gY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLmF0dHJpYnV0ZXM7XG5cdGNvbnN0IG1heEFnZSA9IGRvbnRSZW1lbWJlck1lID8gdm9pZCAwIDogY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW47XG5cdGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWUsIHNlc3Npb24uc2Vzc2lvbi50b2tlbiwgY3R4LmNvbnRleHQuc2VjcmV0LCB7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRtYXhBZ2UsXG5cdFx0Li4ub3ZlcnJpZGVzXG5cdH0pO1xuXHRpZiAoZG9udFJlbWVtYmVyTWUpIGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSwgXCJ0cnVlXCIsIGN0eC5jb250ZXh0LnNlY3JldCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4uYXR0cmlidXRlcyk7XG5cdGF3YWl0IHNldENvb2tpZUNhY2hlKGN0eCwgc2Vzc2lvbiwgZG9udFJlbWVtYmVyTWUpO1xuXHRjdHguY29udGV4dC5zZXROZXdTZXNzaW9uKHNlc3Npb24pO1xufVxuLyoqXG4qIEV4cGlyZXMgYSBjb29raWUgYnkgc2V0dGluZyBgbWF4QWdlOiAwYCB3aGlsZSBwcmVzZXJ2aW5nIGl0cyBhdHRyaWJ1dGVzXG4qL1xuZnVuY3Rpb24gZXhwaXJlQ29va2llKGN0eCwgY29va2llKSB7XG5cdGN0eC5zZXRDb29raWUoY29va2llLm5hbWUsIFwiXCIsIHtcblx0XHQuLi5jb29raWUuYXR0cmlidXRlcyxcblx0XHRtYXhBZ2U6IDBcblx0fSk7XG59XG5mdW5jdGlvbiBkZWxldGVTZXNzaW9uQ29va2llKGN0eCwgc2tpcERvbnRSZW1lbWJlck1lKSB7XG5cdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbik7XG5cdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSB7XG5cdFx0ZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuYWNjb3VudERhdGEpO1xuXHRcdGNvbnN0IGFjY291bnRTdG9yZSA9IGNyZWF0ZUFjY291bnRTdG9yZShjdHguY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YS5uYW1lLCBjdHguY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YS5hdHRyaWJ1dGVzLCBjdHgpO1xuXHRcdGNvbnN0IGNsZWFuQ29va2llcyQxID0gYWNjb3VudFN0b3JlLmNsZWFuKCk7XG5cdFx0YWNjb3VudFN0b3JlLnNldENvb2tpZXMoY2xlYW5Db29raWVzJDEpO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3kgPT09IFwiY29va2llXCIpIGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoXCJvYXV0aF9zdGF0ZVwiKSk7XG5cdGNvbnN0IHNlc3Npb25TdG9yZSA9IGNyZWF0ZVNlc3Npb25TdG9yZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lLCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5hdHRyaWJ1dGVzLCBjdHgpO1xuXHRjb25zdCBjbGVhbkNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2xlYW4oKTtcblx0c2Vzc2lvblN0b3JlLnNldENvb2tpZXMoY2xlYW5Db29raWVzKTtcblx0aWYgKCFza2lwRG9udFJlbWVtYmVyTWUpIGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuKTtcbn1cbmZ1bmN0aW9uIHBhcnNlQ29va2llcyhjb29raWVIZWFkZXIpIHtcblx0Y29uc3QgY29va2llcyA9IGNvb2tpZUhlYWRlci5zcGxpdChcIjsgXCIpO1xuXHRjb25zdCBjb29raWVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRjb29raWVzLmZvckVhY2goKGNvb2tpZSkgPT4ge1xuXHRcdGNvbnN0IFtuYW1lLCB2YWx1ZV0gPSBjb29raWUuc3BsaXQoLz0oLiopL3MpO1xuXHRcdGNvb2tpZU1hcC5zZXQobmFtZSwgdmFsdWUpO1xuXHR9KTtcblx0cmV0dXJuIGNvb2tpZU1hcDtcbn1cbmNvbnN0IGdldFNlc3Npb25Db29raWUgPSAocmVxdWVzdCwgY29uZmlnKSA9PiB7XG5cdGlmIChjb25maWc/LmNvb2tpZVByZWZpeCkgaWYgKGNvbmZpZy5jb29raWVOYW1lKSBjb25maWcuY29va2llUHJlZml4ID0gYCR7Y29uZmlnLmNvb2tpZVByZWZpeH0tYDtcblx0ZWxzZSBjb25maWcuY29va2llUHJlZml4ID0gYCR7Y29uZmlnLmNvb2tpZVByZWZpeH0uYDtcblx0Y29uc3QgY29va2llcyA9IChcImhlYWRlcnNcIiBpbiByZXF1ZXN0ID8gcmVxdWVzdC5oZWFkZXJzIDogcmVxdWVzdCkuZ2V0KFwiY29va2llXCIpO1xuXHRpZiAoIWNvb2tpZXMpIHJldHVybiBudWxsO1xuXHRjb25zdCB7IGNvb2tpZU5hbWUgPSBcInNlc3Npb25fdG9rZW5cIiwgY29va2llUHJlZml4ID0gXCJiZXR0ZXItYXV0aC5cIiB9ID0gY29uZmlnIHx8IHt9O1xuXHRjb25zdCBuYW1lID0gYCR7Y29va2llUHJlZml4fSR7Y29va2llTmFtZX1gO1xuXHRjb25zdCBzZWN1cmVDb29raWVOYW1lID0gYCR7U0VDVVJFX0NPT0tJRV9QUkVGSVh9JHtuYW1lfWA7XG5cdGNvbnN0IHBhcnNlZENvb2tpZSA9IHBhcnNlQ29va2llcyhjb29raWVzKTtcblx0Y29uc3Qgc2Vzc2lvblRva2VuID0gcGFyc2VkQ29va2llLmdldChuYW1lKSB8fCBwYXJzZWRDb29raWUuZ2V0KHNlY3VyZUNvb2tpZU5hbWUpO1xuXHRpZiAoc2Vzc2lvblRva2VuKSByZXR1cm4gc2Vzc2lvblRva2VuO1xuXHRyZXR1cm4gbnVsbDtcbn07XG5jb25zdCBnZXRDb29raWVDYWNoZSA9IGFzeW5jIChyZXF1ZXN0LCBjb25maWcpID0+IHtcblx0Y29uc3QgY29va2llcyA9IChyZXF1ZXN0IGluc3RhbmNlb2YgSGVhZGVycyA/IHJlcXVlc3QgOiByZXF1ZXN0LmhlYWRlcnMpLmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVzKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgeyBjb29raWVOYW1lID0gXCJzZXNzaW9uX2RhdGFcIiwgY29va2llUHJlZml4ID0gXCJiZXR0ZXItYXV0aFwiIH0gPSBjb25maWcgfHwge307XG5cdGNvbnN0IG5hbWUgPSBjb25maWc/LmlzU2VjdXJlICE9PSB2b2lkIDAgPyBjb25maWcuaXNTZWN1cmUgPyBgJHtTRUNVUkVfQ09PS0lFX1BSRUZJWH0ke2Nvb2tpZVByZWZpeH0uJHtjb29raWVOYW1lfWAgOiBgJHtjb29raWVQcmVmaXh9LiR7Y29va2llTmFtZX1gIDogaXNQcm9kdWN0aW9uID8gYCR7U0VDVVJFX0NPT0tJRV9QUkVGSVh9JHtjb29raWVQcmVmaXh9LiR7Y29va2llTmFtZX1gIDogYCR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YDtcblx0Y29uc3QgcGFyc2VkQ29va2llID0gcGFyc2VDb29raWVzKGNvb2tpZXMpO1xuXHRsZXQgc2Vzc2lvbkRhdGEgPSBwYXJzZWRDb29raWUuZ2V0KG5hbWUpO1xuXHRpZiAoIXNlc3Npb25EYXRhKSB7XG5cdFx0Y29uc3QgY2h1bmtzID0gW107XG5cdFx0Zm9yIChjb25zdCBbY29va2llTmFtZSQxLCB2YWx1ZV0gb2YgcGFyc2VkQ29va2llLmVudHJpZXMoKSkgaWYgKGNvb2tpZU5hbWUkMS5zdGFydHNXaXRoKG5hbWUgKyBcIi5cIikpIHtcblx0XHRcdGNvbnN0IHBhcnRzID0gY29va2llTmFtZSQxLnNwbGl0KFwiLlwiKTtcblx0XHRcdGNvbnN0IGluZGV4U3RyID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG5cdFx0XHRjb25zdCBpbmRleCA9IHBhcnNlSW50KGluZGV4U3RyIHx8IFwiMFwiLCAxMCk7XG5cdFx0XHRpZiAoIWlzTmFOKGluZGV4KSkgY2h1bmtzLnB1c2goe1xuXHRcdFx0XHRpbmRleCxcblx0XHRcdFx0dmFsdWVcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoY2h1bmtzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNodW5rcy5zb3J0KChhLCBiKSA9PiBhLmluZGV4IC0gYi5pbmRleCk7XG5cdFx0XHRzZXNzaW9uRGF0YSA9IGNodW5rcy5tYXAoKGMpID0+IGMudmFsdWUpLmpvaW4oXCJcIik7XG5cdFx0fVxuXHR9XG5cdGlmIChzZXNzaW9uRGF0YSkge1xuXHRcdGNvbnN0IHNlY3JldCA9IGNvbmZpZz8uc2VjcmV0IHx8IGVudi5CRVRURVJfQVVUSF9TRUNSRVQ7XG5cdFx0aWYgKCFzZWNyZXQpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJnZXRDb29raWVDYWNoZSByZXF1aXJlcyBhIHNlY3JldCB0byBiZSBwcm92aWRlZC4gRWl0aGVyIHBhc3MgaXQgYXMgYW4gb3B0aW9uIG9yIHNldCB0aGUgQkVUVEVSX0FVVEhfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlXCIpO1xuXHRcdGNvbnN0IHN0cmF0ZWd5ID0gY29uZmlnPy5zdHJhdGVneSB8fCBcImNvbXBhY3RcIjtcblx0XHRpZiAoc3RyYXRlZ3kgPT09IFwiandlXCIpIHtcblx0XHRcdGNvbnN0IHBheWxvYWQgPSBhd2FpdCBzeW1tZXRyaWNEZWNvZGVKV1Qoc2Vzc2lvbkRhdGEsIHNlY3JldCwgXCJiZXR0ZXItYXV0aC1zZXNzaW9uXCIpO1xuXHRcdFx0aWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zZXNzaW9uICYmIHBheWxvYWQudXNlcikge1xuXHRcdFx0XHRpZiAoY29uZmlnPy52ZXJzaW9uKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29va2llVmVyc2lvbiA9IHBheWxvYWQudmVyc2lvbiB8fCBcIjFcIjtcblx0XHRcdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJzdHJpbmdcIikgZXhwZWN0ZWRWZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGNvbmZpZy52ZXJzaW9uID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbmZpZy52ZXJzaW9uKHBheWxvYWQuc2Vzc2lvbiwgcGF5bG9hZC51c2VyKTtcblx0XHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IGlzUHJvbWlzZShyZXN1bHQpID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoY29va2llVmVyc2lvbiAhPT0gZXhwZWN0ZWRWZXJzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcGF5bG9hZDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gZWxzZSBpZiAoc3RyYXRlZ3kgPT09IFwiand0XCIpIHtcblx0XHRcdGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlKV1Qoc2Vzc2lvbkRhdGEsIHNlY3JldCk7XG5cdFx0XHRpZiAocGF5bG9hZCAmJiBwYXlsb2FkLnNlc3Npb24gJiYgcGF5bG9hZC51c2VyKSB7XG5cdFx0XHRcdGlmIChjb25maWc/LnZlcnNpb24pIHtcblx0XHRcdFx0XHRjb25zdCBjb29raWVWZXJzaW9uID0gcGF5bG9hZC52ZXJzaW9uIHx8IFwiMVwiO1xuXHRcdFx0XHRcdGxldCBleHBlY3RlZFZlcnNpb24gPSBcIjFcIjtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGNvbmZpZy52ZXJzaW9uID09PSBcInN0cmluZ1wiKSBleHBlY3RlZFZlcnNpb24gPSBjb25maWcudmVyc2lvbjtcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gY29uZmlnLnZlcnNpb24ocGF5bG9hZC5zZXNzaW9uLCBwYXlsb2FkLnVzZXIpO1xuXHRcdFx0XHRcdFx0ZXhwZWN0ZWRWZXJzaW9uID0gaXNQcm9taXNlKHJlc3VsdCkgPyBhd2FpdCByZXN1bHQgOiByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChjb29raWVWZXJzaW9uICE9PSBleHBlY3RlZFZlcnNpb24pIHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBwYXlsb2FkO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHNlc3Npb25EYXRhUGF5bG9hZCA9IHNhZmVKU09OUGFyc2UoYmluYXJ5LmRlY29kZShiYXNlNjRVcmwuZGVjb2RlKHNlc3Npb25EYXRhKSkpO1xuXHRcdFx0aWYgKCFzZXNzaW9uRGF0YVBheWxvYWQpIHJldHVybiBudWxsO1xuXHRcdFx0aWYgKCFhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnZlcmlmeShzZWNyZXQsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0Li4uc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24sXG5cdFx0XHRcdGV4cGlyZXNBdDogc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdFxuXHRcdFx0fSksIHNlc3Npb25EYXRhUGF5bG9hZC5zaWduYXR1cmUpKSByZXR1cm4gbnVsbDtcblx0XHRcdGlmIChjb25maWc/LnZlcnNpb24gJiYgc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24pIHtcblx0XHRcdFx0Y29uc3QgY29va2llVmVyc2lvbiA9IHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLnZlcnNpb24gfHwgXCIxXCI7XG5cdFx0XHRcdGxldCBleHBlY3RlZFZlcnNpb24gPSBcIjFcIjtcblx0XHRcdFx0aWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJzdHJpbmdcIikgZXhwZWN0ZWRWZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gY29uZmlnLnZlcnNpb24oc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24uc2Vzc2lvbiwgc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24udXNlcik7XG5cdFx0XHRcdFx0ZXhwZWN0ZWRWZXJzaW9uID0gaXNQcm9taXNlKHJlc3VsdCkgPyBhd2FpdCByZXN1bHQgOiByZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNvb2tpZVZlcnNpb24gIT09IGV4cGVjdGVkVmVyc2lvbikgcmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb247XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBIT1NUX0NPT0tJRV9QUkVGSVgsIFNFQ1VSRV9DT09LSUVfUFJFRklYLCBjcmVhdGVDb29raWVHZXR0ZXIsIGNyZWF0ZVNlc3Npb25TdG9yZSwgZGVsZXRlU2Vzc2lvbkNvb2tpZSwgZXhwaXJlQ29va2llLCBnZXRDaHVua2VkQ29va2llLCBnZXRDb29raWVDYWNoZSwgZ2V0Q29va2llcywgZ2V0U2Vzc2lvbkNvb2tpZSwgcGFyc2VDb29raWVzLCBwYXJzZVNldENvb2tpZUhlYWRlciwgc2V0Q29va2llQ2FjaGUsIHNldENvb2tpZVRvSGVhZGVyLCBzZXRTZXNzaW9uQ29va2llLCBzcGxpdFNldENvb2tpZUhlYWRlciwgc3RyaXBTZWN1cmVDb29raWVQcmVmaXggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccountStore: () => (/* binding */ createAccountStore),\n/* harmony export */   createSessionStore: () => (/* binding */ createSessionStore),\n/* harmony export */   getAccountCookie: () => (/* binding */ getAccountCookie),\n/* harmony export */   getChunkedCookie: () => (/* binding */ getChunkedCookie),\n/* harmony export */   getSessionQuerySchema: () => (/* binding */ getSessionQuerySchema),\n/* harmony export */   setAccountCookie: () => (/* binding */ setAccountCookie)\n/* harmony export */ });\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n//#region src/cookies/session-store.ts\nconst ALLOWED_COOKIE_SIZE = 4096;\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 200;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n* Parse cookies from the request headers\n*/\nfunction parseCookiesFromContext(ctx) {\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return {};\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\treturn cookies;\n}\n/**\n* Extract the chunk index from a cookie name\n*/\nfunction getChunkIndex(cookieName) {\n\tconst parts = cookieName.split(\".\");\n\tconst lastPart = parts[parts.length - 1];\n\tconst index = parseInt(lastPart || \"0\", 10);\n\treturn isNaN(index) ? 0 : index;\n}\n/**\n* Read all existing chunks from cookies\n*/\nfunction readExistingChunks(cookieName, ctx) {\n\tconst chunks = {};\n\tconst cookies = parseCookiesFromContext(ctx);\n\tfor (const [name, value] of Object.entries(cookies)) if (name.startsWith(cookieName)) chunks[name] = value;\n\treturn chunks;\n}\n/**\n* Get the full session data by joining all chunks\n*/\nfunction joinChunks(chunks) {\n\treturn Object.keys(chunks).sort((a, b) => {\n\t\treturn getChunkIndex(a) - getChunkIndex(b);\n\t}).map((key) => chunks[key]).join(\"\");\n}\n/**\n* Split a cookie value into chunks if needed\n*/\nfunction chunkCookie(storeName, cookie, chunks, logger) {\n\tconst chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n\tif (chunkCount === 1) {\n\t\tchunks[cookie.name] = cookie.value;\n\t\treturn [cookie];\n\t}\n\tconst cookies = [];\n\tfor (let i = 0; i < chunkCount; i++) {\n\t\tconst name = `${cookie.name}.${i}`;\n\t\tconst start = i * CHUNK_SIZE;\n\t\tconst value = cookie.value.substring(start, start + CHUNK_SIZE);\n\t\tcookies.push({\n\t\t\t...cookie,\n\t\t\tname,\n\t\t\tvalue\n\t\t});\n\t\tchunks[name] = value;\n\t}\n\tlogger.debug(`CHUNKING_${storeName.toUpperCase()}_COOKIE`, {\n\t\tmessage: `${storeName} cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n\t\temptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n\t\tvalueSize: cookie.value.length,\n\t\tchunkCount,\n\t\tchunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE)\n\t});\n\treturn cookies;\n}\n/**\n* Get all cookies that should be cleaned (removed)\n*/\nfunction getCleanCookies(chunks, cookieOptions) {\n\tconst cleanedChunks = {};\n\tfor (const name in chunks) cleanedChunks[name] = {\n\t\tname,\n\t\tvalue: \"\",\n\t\tattributes: {\n\t\t\t...cookieOptions,\n\t\t\tmaxAge: 0\n\t\t}\n\t};\n\treturn cleanedChunks;\n}\n/**\n* Create a session store for handling cookie chunking.\n* When session data exceeds 4KB, it automatically splits it into multiple cookies.\n*\n* Based on next-auth's SessionStore implementation.\n* @see https://github.com/nextauthjs/next-auth/blob/27b2519b84b8eb9cf053775dea29d577d2aa0098/packages/next-auth/src/core/lib/cookie.ts\n*/\nconst storeFactory = (storeName) => (cookieName, cookieOptions, ctx) => {\n\tconst chunks = readExistingChunks(cookieName, ctx);\n\tconst logger = ctx.context.logger;\n\treturn {\n\t\tgetValue() {\n\t\t\treturn joinChunks(chunks);\n\t\t},\n\t\thasChunks() {\n\t\t\treturn Object.keys(chunks).length > 0;\n\t\t},\n\t\tchunk(value, options) {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\tconst cookies = cleanedChunks;\n\t\t\tconst chunked = chunkCookie(storeName, {\n\t\t\t\tname: cookieName,\n\t\t\t\tvalue,\n\t\t\t\tattributes: {\n\t\t\t\t\t...cookieOptions,\n\t\t\t\t\t...options\n\t\t\t\t}\n\t\t\t}, chunks, logger);\n\t\t\tfor (const chunk of chunked) cookies[chunk.name] = chunk;\n\t\t\treturn Object.values(cookies);\n\t\t},\n\t\tclean() {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\treturn Object.values(cleanedChunks);\n\t\t},\n\t\tsetCookies(cookies) {\n\t\t\tfor (const cookie of cookies) ctx.setCookie(cookie.name, cookie.value, cookie.attributes);\n\t\t}\n\t};\n};\nconst createSessionStore = storeFactory(\"Session\");\nconst createAccountStore = storeFactory(\"Account\");\nfunction getChunkedCookie(ctx, cookieName) {\n\tconst value = ctx.getCookie(cookieName);\n\tif (value) return value;\n\tconst chunks = [];\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return null;\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\tfor (const [name, val] of Object.entries(cookies)) if (name.startsWith(cookieName + \".\")) {\n\t\tconst indexStr = name.split(\".\").at(-1);\n\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\tif (!isNaN(index)) chunks.push({\n\t\t\tindex,\n\t\t\tvalue: val\n\t\t});\n\t}\n\tif (chunks.length > 0) {\n\t\tchunks.sort((a, b) => a.index - b.index);\n\t\treturn chunks.map((c) => c.value).join(\"\");\n\t}\n\treturn null;\n}\nasync function setAccountCookie(c, accountData) {\n\tconst accountDataCookie = c.context.authCookies.accountData;\n\tconst options = {\n\t\tmaxAge: 300,\n\t\t...accountDataCookie.attributes\n\t};\n\tconst data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncodeJWT)(accountData, c.context.secret, \"better-auth-account\", options.maxAge);\n\tif (data.length > ALLOWED_COOKIE_SIZE) {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tconst cookies = accountStore.chunk(data, options);\n\t\taccountStore.setCookies(cookies);\n\t} else {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tif (accountStore.hasChunks()) {\n\t\t\tconst cleanCookies = accountStore.clean();\n\t\t\taccountStore.setCookies(cleanCookies);\n\t\t}\n\t\tc.setCookie(accountDataCookie.name, data, options);\n\t}\n}\nasync function getAccountCookie(c) {\n\tconst accountCookie = getChunkedCookie(c, c.context.authCookies.accountData.name);\n\tif (accountCookie) {\n\t\tconst accountData = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecodeJWT)(accountCookie, c.context.secret, \"better-auth-account\"));\n\t\tif (accountData) return accountData;\n\t}\n\treturn null;\n}\nconst getSessionQuerySchema = zod__WEBPACK_IMPORTED_MODULE_3__.optional(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n\tdisableCookieCache: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable cookie cache and fetch session from database\" }).optional(),\n\tdisableRefresh: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable session refresh. Useful for checking session status, without updating the session\" }).optional()\n}));\n\n//#endregion\n\n//# sourceMappingURL=session-store.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29va2llcy9zZXNzaW9uLXN0b3JlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTJFO0FBQzlDO0FBQzJCO0FBQy9COztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQyxrQkFBa0IsWUFBWSxHQUFHLEVBQUU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQkFBMEIsd0JBQXdCO0FBQ2xELGNBQWMsV0FBVyx5QkFBeUIscUJBQXFCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1FQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNFQUFhLE9BQU8sbUVBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlDQUFVLENBQUMsdUNBQVE7QUFDakQscUJBQXFCLCtDQUFnQixVQUFVLHFFQUFxRTtBQUNwSCxpQkFBaUIsK0NBQWdCLFVBQVUsMEdBQTBHO0FBQ3JKLENBQUM7O0FBRUQ7QUFDK0g7QUFDL0giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29va2llc1xcc2Vzc2lvbi1zdG9yZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNFbmNvZGVKV1QgfSBmcm9tIFwiLi4vY3J5cHRvL2p3dC5tanNcIjtcbmltcG9ydCBcIi4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL2Nvb2tpZXMvc2Vzc2lvbi1zdG9yZS50c1xuY29uc3QgQUxMT1dFRF9DT09LSUVfU0laRSA9IDQwOTY7XG5jb25zdCBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkUgPSAyMDA7XG5jb25zdCBDSFVOS19TSVpFID0gQUxMT1dFRF9DT09LSUVfU0laRSAtIEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRTtcbi8qKlxuKiBQYXJzZSBjb29raWVzIGZyb20gdGhlIHJlcXVlc3QgaGVhZGVyc1xuKi9cbmZ1bmN0aW9uIHBhcnNlQ29va2llc0Zyb21Db250ZXh0KGN0eCkge1xuXHRjb25zdCBjb29raWVIZWFkZXIgPSBjdHguaGVhZGVycz8uZ2V0KFwiY29va2llXCIpO1xuXHRpZiAoIWNvb2tpZUhlYWRlcikgcmV0dXJuIHt9O1xuXHRjb25zdCBjb29raWVzID0ge307XG5cdGNvbnN0IHBhaXJzID0gY29va2llSGVhZGVyLnNwbGl0KFwiOyBcIik7XG5cdGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuXHRcdGNvbnN0IFtuYW1lLCAuLi52YWx1ZVBhcnRzXSA9IHBhaXIuc3BsaXQoXCI9XCIpO1xuXHRcdGlmIChuYW1lICYmIHZhbHVlUGFydHMubGVuZ3RoID4gMCkgY29va2llc1tuYW1lXSA9IHZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdH1cblx0cmV0dXJuIGNvb2tpZXM7XG59XG4vKipcbiogRXh0cmFjdCB0aGUgY2h1bmsgaW5kZXggZnJvbSBhIGNvb2tpZSBuYW1lXG4qL1xuZnVuY3Rpb24gZ2V0Q2h1bmtJbmRleChjb29raWVOYW1lKSB7XG5cdGNvbnN0IHBhcnRzID0gY29va2llTmFtZS5zcGxpdChcIi5cIik7XG5cdGNvbnN0IGxhc3RQYXJ0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG5cdGNvbnN0IGluZGV4ID0gcGFyc2VJbnQobGFzdFBhcnQgfHwgXCIwXCIsIDEwKTtcblx0cmV0dXJuIGlzTmFOKGluZGV4KSA/IDAgOiBpbmRleDtcbn1cbi8qKlxuKiBSZWFkIGFsbCBleGlzdGluZyBjaHVua3MgZnJvbSBjb29raWVzXG4qL1xuZnVuY3Rpb24gcmVhZEV4aXN0aW5nQ2h1bmtzKGNvb2tpZU5hbWUsIGN0eCkge1xuXHRjb25zdCBjaHVua3MgPSB7fTtcblx0Y29uc3QgY29va2llcyA9IHBhcnNlQ29va2llc0Zyb21Db250ZXh0KGN0eCk7XG5cdGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb29raWVzKSkgaWYgKG5hbWUuc3RhcnRzV2l0aChjb29raWVOYW1lKSkgY2h1bmtzW25hbWVdID0gdmFsdWU7XG5cdHJldHVybiBjaHVua3M7XG59XG4vKipcbiogR2V0IHRoZSBmdWxsIHNlc3Npb24gZGF0YSBieSBqb2luaW5nIGFsbCBjaHVua3NcbiovXG5mdW5jdGlvbiBqb2luQ2h1bmtzKGNodW5rcykge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMoY2h1bmtzKS5zb3J0KChhLCBiKSA9PiB7XG5cdFx0cmV0dXJuIGdldENodW5rSW5kZXgoYSkgLSBnZXRDaHVua0luZGV4KGIpO1xuXHR9KS5tYXAoKGtleSkgPT4gY2h1bmtzW2tleV0pLmpvaW4oXCJcIik7XG59XG4vKipcbiogU3BsaXQgYSBjb29raWUgdmFsdWUgaW50byBjaHVua3MgaWYgbmVlZGVkXG4qL1xuZnVuY3Rpb24gY2h1bmtDb29raWUoc3RvcmVOYW1lLCBjb29raWUsIGNodW5rcywgbG9nZ2VyKSB7XG5cdGNvbnN0IGNodW5rQ291bnQgPSBNYXRoLmNlaWwoY29va2llLnZhbHVlLmxlbmd0aCAvIENIVU5LX1NJWkUpO1xuXHRpZiAoY2h1bmtDb3VudCA9PT0gMSkge1xuXHRcdGNodW5rc1tjb29raWUubmFtZV0gPSBjb29raWUudmFsdWU7XG5cdFx0cmV0dXJuIFtjb29raWVdO1xuXHR9XG5cdGNvbnN0IGNvb2tpZXMgPSBbXTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua0NvdW50OyBpKyspIHtcblx0XHRjb25zdCBuYW1lID0gYCR7Y29va2llLm5hbWV9LiR7aX1gO1xuXHRcdGNvbnN0IHN0YXJ0ID0gaSAqIENIVU5LX1NJWkU7XG5cdFx0Y29uc3QgdmFsdWUgPSBjb29raWUudmFsdWUuc3Vic3RyaW5nKHN0YXJ0LCBzdGFydCArIENIVU5LX1NJWkUpO1xuXHRcdGNvb2tpZXMucHVzaCh7XG5cdFx0XHQuLi5jb29raWUsXG5cdFx0XHRuYW1lLFxuXHRcdFx0dmFsdWVcblx0XHR9KTtcblx0XHRjaHVua3NbbmFtZV0gPSB2YWx1ZTtcblx0fVxuXHRsb2dnZXIuZGVidWcoYENIVU5LSU5HXyR7c3RvcmVOYW1lLnRvVXBwZXJDYXNlKCl9X0NPT0tJRWAsIHtcblx0XHRtZXNzYWdlOiBgJHtzdG9yZU5hbWV9IGNvb2tpZSBleGNlZWRzIGFsbG93ZWQgJHtBTExPV0VEX0NPT0tJRV9TSVpFfSBieXRlcy5gLFxuXHRcdGVtcHR5Q29va2llU2l6ZTogRVNUSU1BVEVEX0VNUFRZX0NPT0tJRV9TSVpFLFxuXHRcdHZhbHVlU2l6ZTogY29va2llLnZhbHVlLmxlbmd0aCxcblx0XHRjaHVua0NvdW50LFxuXHRcdGNodW5rczogY29va2llcy5tYXAoKGMpID0+IGMudmFsdWUubGVuZ3RoICsgRVNUSU1BVEVEX0VNUFRZX0NPT0tJRV9TSVpFKVxuXHR9KTtcblx0cmV0dXJuIGNvb2tpZXM7XG59XG4vKipcbiogR2V0IGFsbCBjb29raWVzIHRoYXQgc2hvdWxkIGJlIGNsZWFuZWQgKHJlbW92ZWQpXG4qL1xuZnVuY3Rpb24gZ2V0Q2xlYW5Db29raWVzKGNodW5rcywgY29va2llT3B0aW9ucykge1xuXHRjb25zdCBjbGVhbmVkQ2h1bmtzID0ge307XG5cdGZvciAoY29uc3QgbmFtZSBpbiBjaHVua3MpIGNsZWFuZWRDaHVua3NbbmFtZV0gPSB7XG5cdFx0bmFtZSxcblx0XHR2YWx1ZTogXCJcIixcblx0XHRhdHRyaWJ1dGVzOiB7XG5cdFx0XHQuLi5jb29raWVPcHRpb25zLFxuXHRcdFx0bWF4QWdlOiAwXG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gY2xlYW5lZENodW5rcztcbn1cbi8qKlxuKiBDcmVhdGUgYSBzZXNzaW9uIHN0b3JlIGZvciBoYW5kbGluZyBjb29raWUgY2h1bmtpbmcuXG4qIFdoZW4gc2Vzc2lvbiBkYXRhIGV4Y2VlZHMgNEtCLCBpdCBhdXRvbWF0aWNhbGx5IHNwbGl0cyBpdCBpbnRvIG11bHRpcGxlIGNvb2tpZXMuXG4qXG4qIEJhc2VkIG9uIG5leHQtYXV0aCdzIFNlc3Npb25TdG9yZSBpbXBsZW1lbnRhdGlvbi5cbiogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbmV4dGF1dGhqcy9uZXh0LWF1dGgvYmxvYi8yN2IyNTE5Yjg0YjhlYjljZjA1Mzc3NWRlYTI5ZDU3N2QyYWEwMDk4L3BhY2thZ2VzL25leHQtYXV0aC9zcmMvY29yZS9saWIvY29va2llLnRzXG4qL1xuY29uc3Qgc3RvcmVGYWN0b3J5ID0gKHN0b3JlTmFtZSkgPT4gKGNvb2tpZU5hbWUsIGNvb2tpZU9wdGlvbnMsIGN0eCkgPT4ge1xuXHRjb25zdCBjaHVua3MgPSByZWFkRXhpc3RpbmdDaHVua3MoY29va2llTmFtZSwgY3R4KTtcblx0Y29uc3QgbG9nZ2VyID0gY3R4LmNvbnRleHQubG9nZ2VyO1xuXHRyZXR1cm4ge1xuXHRcdGdldFZhbHVlKCkge1xuXHRcdFx0cmV0dXJuIGpvaW5DaHVua3MoY2h1bmtzKTtcblx0XHR9LFxuXHRcdGhhc0NodW5rcygpIHtcblx0XHRcdHJldHVybiBPYmplY3Qua2V5cyhjaHVua3MpLmxlbmd0aCA+IDA7XG5cdFx0fSxcblx0XHRjaHVuayh2YWx1ZSwgb3B0aW9ucykge1xuXHRcdFx0Y29uc3QgY2xlYW5lZENodW5rcyA9IGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpO1xuXHRcdFx0Zm9yIChjb25zdCBuYW1lIGluIGNodW5rcykgZGVsZXRlIGNodW5rc1tuYW1lXTtcblx0XHRcdGNvbnN0IGNvb2tpZXMgPSBjbGVhbmVkQ2h1bmtzO1xuXHRcdFx0Y29uc3QgY2h1bmtlZCA9IGNodW5rQ29va2llKHN0b3JlTmFtZSwge1xuXHRcdFx0XHRuYW1lOiBjb29raWVOYW1lLFxuXHRcdFx0XHR2YWx1ZSxcblx0XHRcdFx0YXR0cmlidXRlczoge1xuXHRcdFx0XHRcdC4uLmNvb2tpZU9wdGlvbnMsXG5cdFx0XHRcdFx0Li4ub3B0aW9uc1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBjaHVua3MsIGxvZ2dlcik7XG5cdFx0XHRmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rZWQpIGNvb2tpZXNbY2h1bmsubmFtZV0gPSBjaHVuaztcblx0XHRcdHJldHVybiBPYmplY3QudmFsdWVzKGNvb2tpZXMpO1xuXHRcdH0sXG5cdFx0Y2xlYW4oKSB7XG5cdFx0XHRjb25zdCBjbGVhbmVkQ2h1bmtzID0gZ2V0Q2xlYW5Db29raWVzKGNodW5rcywgY29va2llT3B0aW9ucyk7XG5cdFx0XHRmb3IgKGNvbnN0IG5hbWUgaW4gY2h1bmtzKSBkZWxldGUgY2h1bmtzW25hbWVdO1xuXHRcdFx0cmV0dXJuIE9iamVjdC52YWx1ZXMoY2xlYW5lZENodW5rcyk7XG5cdFx0fSxcblx0XHRzZXRDb29raWVzKGNvb2tpZXMpIHtcblx0XHRcdGZvciAoY29uc3QgY29va2llIG9mIGNvb2tpZXMpIGN0eC5zZXRDb29raWUoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSwgY29va2llLmF0dHJpYnV0ZXMpO1xuXHRcdH1cblx0fTtcbn07XG5jb25zdCBjcmVhdGVTZXNzaW9uU3RvcmUgPSBzdG9yZUZhY3RvcnkoXCJTZXNzaW9uXCIpO1xuY29uc3QgY3JlYXRlQWNjb3VudFN0b3JlID0gc3RvcmVGYWN0b3J5KFwiQWNjb3VudFwiKTtcbmZ1bmN0aW9uIGdldENodW5rZWRDb29raWUoY3R4LCBjb29raWVOYW1lKSB7XG5cdGNvbnN0IHZhbHVlID0gY3R4LmdldENvb2tpZShjb29raWVOYW1lKTtcblx0aWYgKHZhbHVlKSByZXR1cm4gdmFsdWU7XG5cdGNvbnN0IGNodW5rcyA9IFtdO1xuXHRjb25zdCBjb29raWVIZWFkZXIgPSBjdHguaGVhZGVycz8uZ2V0KFwiY29va2llXCIpO1xuXHRpZiAoIWNvb2tpZUhlYWRlcikgcmV0dXJuIG51bGw7XG5cdGNvbnN0IGNvb2tpZXMgPSB7fTtcblx0Y29uc3QgcGFpcnMgPSBjb29raWVIZWFkZXIuc3BsaXQoXCI7IFwiKTtcblx0Zm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG5cdFx0Y29uc3QgW25hbWUsIC4uLnZhbHVlUGFydHNdID0gcGFpci5zcGxpdChcIj1cIik7XG5cdFx0aWYgKG5hbWUgJiYgdmFsdWVQYXJ0cy5sZW5ndGggPiAwKSBjb29raWVzW25hbWVdID0gdmFsdWVQYXJ0cy5qb2luKFwiPVwiKTtcblx0fVxuXHRmb3IgKGNvbnN0IFtuYW1lLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGNvb2tpZXMpKSBpZiAobmFtZS5zdGFydHNXaXRoKGNvb2tpZU5hbWUgKyBcIi5cIikpIHtcblx0XHRjb25zdCBpbmRleFN0ciA9IG5hbWUuc3BsaXQoXCIuXCIpLmF0KC0xKTtcblx0XHRjb25zdCBpbmRleCA9IHBhcnNlSW50KGluZGV4U3RyIHx8IFwiMFwiLCAxMCk7XG5cdFx0aWYgKCFpc05hTihpbmRleCkpIGNodW5rcy5wdXNoKHtcblx0XHRcdGluZGV4LFxuXHRcdFx0dmFsdWU6IHZhbFxuXHRcdH0pO1xuXHR9XG5cdGlmIChjaHVua3MubGVuZ3RoID4gMCkge1xuXHRcdGNodW5rcy5zb3J0KChhLCBiKSA9PiBhLmluZGV4IC0gYi5pbmRleCk7XG5cdFx0cmV0dXJuIGNodW5rcy5tYXAoKGMpID0+IGMudmFsdWUpLmpvaW4oXCJcIik7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5hc3luYyBmdW5jdGlvbiBzZXRBY2NvdW50Q29va2llKGMsIGFjY291bnREYXRhKSB7XG5cdGNvbnN0IGFjY291bnREYXRhQ29va2llID0gYy5jb250ZXh0LmF1dGhDb29raWVzLmFjY291bnREYXRhO1xuXHRjb25zdCBvcHRpb25zID0ge1xuXHRcdG1heEFnZTogMzAwLFxuXHRcdC4uLmFjY291bnREYXRhQ29va2llLmF0dHJpYnV0ZXNcblx0fTtcblx0Y29uc3QgZGF0YSA9IGF3YWl0IHN5bW1ldHJpY0VuY29kZUpXVChhY2NvdW50RGF0YSwgYy5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1hY2NvdW50XCIsIG9wdGlvbnMubWF4QWdlKTtcblx0aWYgKGRhdGEubGVuZ3RoID4gQUxMT1dFRF9DT09LSUVfU0laRSkge1xuXHRcdGNvbnN0IGFjY291bnRTdG9yZSA9IGNyZWF0ZUFjY291bnRTdG9yZShhY2NvdW50RGF0YUNvb2tpZS5uYW1lLCBvcHRpb25zLCBjKTtcblx0XHRjb25zdCBjb29raWVzID0gYWNjb3VudFN0b3JlLmNodW5rKGRhdGEsIG9wdGlvbnMpO1xuXHRcdGFjY291bnRTdG9yZS5zZXRDb29raWVzKGNvb2tpZXMpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGFjY291bnRTdG9yZSA9IGNyZWF0ZUFjY291bnRTdG9yZShhY2NvdW50RGF0YUNvb2tpZS5uYW1lLCBvcHRpb25zLCBjKTtcblx0XHRpZiAoYWNjb3VudFN0b3JlLmhhc0NodW5rcygpKSB7XG5cdFx0XHRjb25zdCBjbGVhbkNvb2tpZXMgPSBhY2NvdW50U3RvcmUuY2xlYW4oKTtcblx0XHRcdGFjY291bnRTdG9yZS5zZXRDb29raWVzKGNsZWFuQ29va2llcyk7XG5cdFx0fVxuXHRcdGMuc2V0Q29va2llKGFjY291bnREYXRhQ29va2llLm5hbWUsIGRhdGEsIG9wdGlvbnMpO1xuXHR9XG59XG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50Q29va2llKGMpIHtcblx0Y29uc3QgYWNjb3VudENvb2tpZSA9IGdldENodW5rZWRDb29raWUoYywgYy5jb250ZXh0LmF1dGhDb29raWVzLmFjY291bnREYXRhLm5hbWUpO1xuXHRpZiAoYWNjb3VudENvb2tpZSkge1xuXHRcdGNvbnN0IGFjY291bnREYXRhID0gc2FmZUpTT05QYXJzZShhd2FpdCBzeW1tZXRyaWNEZWNvZGVKV1QoYWNjb3VudENvb2tpZSwgYy5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1hY2NvdW50XCIpKTtcblx0XHRpZiAoYWNjb3VudERhdGEpIHJldHVybiBhY2NvdW50RGF0YTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cbmNvbnN0IGdldFNlc3Npb25RdWVyeVNjaGVtYSA9IHoub3B0aW9uYWwoei5vYmplY3Qoe1xuXHRkaXNhYmxlQ29va2llQ2FjaGU6IHouY29lcmNlLmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGlzYWJsZSBjb29raWUgY2FjaGUgYW5kIGZldGNoIHNlc3Npb24gZnJvbSBkYXRhYmFzZVwiIH0pLm9wdGlvbmFsKCksXG5cdGRpc2FibGVSZWZyZXNoOiB6LmNvZXJjZS5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgc2Vzc2lvbiByZWZyZXNoLiBVc2VmdWwgZm9yIGNoZWNraW5nIHNlc3Npb24gc3RhdHVzLCB3aXRob3V0IHVwZGF0aW5nIHRoZSBzZXNzaW9uXCIgfSkub3B0aW9uYWwoKVxufSkpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUFjY291bnRTdG9yZSwgY3JlYXRlU2Vzc2lvblN0b3JlLCBnZXRBY2NvdW50Q29va2llLCBnZXRDaHVua2VkQ29va2llLCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEsIHNldEFjY291bnRDb29raWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24tc3RvcmUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* binding */ constantTimeEqual)\n/* harmony export */ });\n//#region src/crypto/buffer.ts\n/**\n* Compare two buffers in constant time.\n*/\nfunction constantTimeEqual(a, b) {\n\tif (typeof a === \"string\") a = new TextEncoder().encode(a);\n\tif (typeof b === \"string\") b = new TextEncoder().encode(b);\n\tconst aBuffer = new Uint8Array(a);\n\tconst bBuffer = new Uint8Array(b);\n\tlet c = aBuffer.length ^ bBuffer.length;\n\tconst length = Math.max(aBuffer.length, bBuffer.length);\n\tfor (let i = 0; i < length; i++) c |= (i < aBuffer.length ? aBuffer[i] : 0) ^ (i < bBuffer.length ? bBuffer[i] : 0);\n\treturn c === 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=buffer.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY3J5cHRvL2J1ZmZlci5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xcYnVmZmVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NyeXB0by9idWZmZXIudHNcbi8qKlxuKiBDb21wYXJlIHR3byBidWZmZXJzIGluIGNvbnN0YW50IHRpbWUuXG4qL1xuZnVuY3Rpb24gY29uc3RhbnRUaW1lRXF1YWwoYSwgYikge1xuXHRpZiAodHlwZW9mIGEgPT09IFwic3RyaW5nXCIpIGEgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYSk7XG5cdGlmICh0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIikgYiA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShiKTtcblx0Y29uc3QgYUJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGEpO1xuXHRjb25zdCBiQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYik7XG5cdGxldCBjID0gYUJ1ZmZlci5sZW5ndGggXiBiQnVmZmVyLmxlbmd0aDtcblx0Y29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoYUJ1ZmZlci5sZW5ndGgsIGJCdWZmZXIubGVuZ3RoKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYyB8PSAoaSA8IGFCdWZmZXIubGVuZ3RoID8gYUJ1ZmZlcltpXSA6IDApIF4gKGkgPCBiQnVmZmVyLmxlbmd0aCA/IGJCdWZmZXJbaV0gOiAwKTtcblx0cmV0dXJuIGMgPT09IDA7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29uc3RhbnRUaW1lRXF1YWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* reexport safe */ _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual),\n/* harmony export */   generateRandomString: () => (/* reexport safe */ _random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString),\n/* harmony export */   getCryptoKey: () => (/* binding */ getCryptoKey),\n/* harmony export */   hashPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.hashPassword),\n/* harmony export */   makeSignature: () => (/* binding */ makeSignature),\n/* harmony export */   signJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecodeJWT),\n/* harmony export */   symmetricDecrypt: () => (/* binding */ symmetricDecrypt),\n/* harmony export */   symmetricEncodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncodeJWT),\n/* harmony export */   symmetricEncrypt: () => (/* binding */ symmetricEncrypt),\n/* harmony export */   verifyJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.verifyJWT),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./password.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./random.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @noble/ciphers/chacha.js */ \"(action-browser)/./node_modules/.pnpm/@noble+ciphers@2.1.1/node_modules/@noble/ciphers/chacha.js\");\n/* harmony import */ var _noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @noble/ciphers/utils.js */ \"(action-browser)/./node_modules/.pnpm/@noble+ciphers@2.1.1/node_modules/@noble/ciphers/utils.js\");\n\n\n\n\n\n\n\n\n\n//#region src/crypto/index.ts\nconst algorithm = {\n\tname: \"HMAC\",\n\thash: \"SHA-256\"\n};\nconst symmetricEncrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.utf8ToBytes)(data);\n\treturn (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.bytesToHex)((0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes)).encrypt(dataAsBytes));\n};\nconst symmetricDecrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.hexToBytes)(data);\n\tconst chacha = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes));\n\treturn new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\nconst getCryptoKey = async (secret) => {\n\tconst secretBuf = typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n\treturn await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().importKey(\"raw\", secretBuf, algorithm, false, [\"sign\", \"verify\"]);\n};\nconst makeSignature = async (value, secret) => {\n\tconst key = await getCryptoKey(secret);\n\tconst signature = await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().sign(algorithm.name, key, new TextEncoder().encode(value));\n\treturn btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY3J5cHRvL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRDtBQUNzQztBQUN6QjtBQUNWO0FBQ0k7QUFDSDtBQUNRO0FBQytCOztBQUU1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFdBQVc7QUFDN0MsMEJBQTBCLG1FQUFVO0FBQ3BDLHFCQUFxQixvRUFBVztBQUNoQyxRQUFRLG1FQUFVLENBQUMscUVBQVksQ0FBQyx1RUFBaUI7QUFDakQ7QUFDQSxrQ0FBa0MsV0FBVztBQUM3QywwQkFBMEIsbUVBQVU7QUFDcEMscUJBQXFCLG1FQUFVO0FBQy9CLGdCQUFnQixxRUFBWSxDQUFDLHVFQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0VBQWtCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzRUFBa0I7QUFDM0M7QUFDQTs7QUFFQTtBQUM4TTtBQUM5TSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjcnlwdG9cXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25zdGFudFRpbWVFcXVhbCB9IGZyb20gXCIuL2J1ZmZlci5tanNcIjtcbmltcG9ydCB7IHNpZ25KV1QsIHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRW5jb2RlSldULCB2ZXJpZnlKV1QgfSBmcm9tIFwiLi9qd3QubWpzXCI7XG5pbXBvcnQgeyBoYXNoUGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIi4vcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuL3JhbmRvbS5tanNcIjtcbmltcG9ydCB7IGdldFdlYmNyeXB0b1N1YnRsZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHNcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2hhc2hcIjtcbmltcG9ydCB7IHhjaGFjaGEyMHBvbHkxMzA1IH0gZnJvbSBcIkBub2JsZS9jaXBoZXJzL2NoYWNoYS5qc1wiO1xuaW1wb3J0IHsgYnl0ZXNUb0hleCwgaGV4VG9CeXRlcywgbWFuYWdlZE5vbmNlLCB1dGY4VG9CeXRlcyB9IGZyb20gXCJAbm9ibGUvY2lwaGVycy91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9pbmRleC50c1xuY29uc3QgYWxnb3JpdGhtID0ge1xuXHRuYW1lOiBcIkhNQUNcIixcblx0aGFzaDogXCJTSEEtMjU2XCJcbn07XG5jb25zdCBzeW1tZXRyaWNFbmNyeXB0ID0gYXN5bmMgKHsga2V5LCBkYXRhIH0pID0+IHtcblx0Y29uc3Qga2V5QXNCeXRlcyA9IGF3YWl0IGNyZWF0ZUhhc2goXCJTSEEtMjU2XCIpLmRpZ2VzdChrZXkpO1xuXHRjb25zdCBkYXRhQXNCeXRlcyA9IHV0ZjhUb0J5dGVzKGRhdGEpO1xuXHRyZXR1cm4gYnl0ZXNUb0hleChtYW5hZ2VkTm9uY2UoeGNoYWNoYTIwcG9seTEzMDUpKG5ldyBVaW50OEFycmF5KGtleUFzQnl0ZXMpKS5lbmNyeXB0KGRhdGFBc0J5dGVzKSk7XG59O1xuY29uc3Qgc3ltbWV0cmljRGVjcnlwdCA9IGFzeW5jICh7IGtleSwgZGF0YSB9KSA9PiB7XG5cdGNvbnN0IGtleUFzQnl0ZXMgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3Qoa2V5KTtcblx0Y29uc3QgZGF0YUFzQnl0ZXMgPSBoZXhUb0J5dGVzKGRhdGEpO1xuXHRjb25zdCBjaGFjaGEgPSBtYW5hZ2VkTm9uY2UoeGNoYWNoYTIwcG9seTEzMDUpKG5ldyBVaW50OEFycmF5KGtleUFzQnl0ZXMpKTtcblx0cmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShjaGFjaGEuZGVjcnlwdChkYXRhQXNCeXRlcykpO1xufTtcbmNvbnN0IGdldENyeXB0b0tleSA9IGFzeW5jIChzZWNyZXQpID0+IHtcblx0Y29uc3Qgc2VjcmV0QnVmID0gdHlwZW9mIHNlY3JldCA9PT0gXCJzdHJpbmdcIiA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzZWNyZXQpIDogc2VjcmV0O1xuXHRyZXR1cm4gYXdhaXQgZ2V0V2ViY3J5cHRvU3VidGxlKCkuaW1wb3J0S2V5KFwicmF3XCIsIHNlY3JldEJ1ZiwgYWxnb3JpdGhtLCBmYWxzZSwgW1wic2lnblwiLCBcInZlcmlmeVwiXSk7XG59O1xuY29uc3QgbWFrZVNpZ25hdHVyZSA9IGFzeW5jICh2YWx1ZSwgc2VjcmV0KSA9PiB7XG5cdGNvbnN0IGtleSA9IGF3YWl0IGdldENyeXB0b0tleShzZWNyZXQpO1xuXHRjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBnZXRXZWJjcnlwdG9TdWJ0bGUoKS5zaWduKGFsZ29yaXRobS5uYW1lLCBrZXksIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh2YWx1ZSkpO1xuXHRyZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KHNpZ25hdHVyZSkpKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29uc3RhbnRUaW1lRXF1YWwsIGdlbmVyYXRlUmFuZG9tU3RyaW5nLCBnZXRDcnlwdG9LZXksIGhhc2hQYXNzd29yZCwgbWFrZVNpZ25hdHVyZSwgc2lnbkpXVCwgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNEZWNyeXB0LCBzeW1tZXRyaWNFbmNvZGVKV1QsIHN5bW1ldHJpY0VuY3J5cHQsIHZlcmlmeUpXVCwgdmVyaWZ5UGFzc3dvcmQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signJWT: () => (/* binding */ signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* binding */ symmetricDecodeJWT),\n/* harmony export */   symmetricEncodeJWT: () => (/* binding */ symmetricEncodeJWT),\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @noble/hashes/hkdf.js */ \"(action-browser)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/hkdf.js\");\n/* harmony import */ var _noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/sha2.js */ \"(action-browser)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/sha2.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(action-browser)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/decrypt.js\");\n\n\n\n\n//#region src/crypto/jwt.ts\nasync function signJWT(payload, secret, expiresIn = 3600) {\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n}\nasync function verifyJWT(token, secret) {\n\ttry {\n\t\treturn (await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, new TextEncoder().encode(secret))).payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\nconst info = new Uint8Array([\n\t66,\n\t101,\n\t116,\n\t116,\n\t101,\n\t114,\n\t65,\n\t117,\n\t116,\n\t104,\n\t46,\n\t106,\n\t115,\n\t32,\n\t71,\n\t101,\n\t110,\n\t101,\n\t114,\n\t97,\n\t116,\n\t101,\n\t100,\n\t32,\n\t69,\n\t110,\n\t99,\n\t114,\n\t121,\n\t112,\n\t116,\n\t105,\n\t111,\n\t110,\n\t32,\n\t75,\n\t101,\n\t121\n]);\nconst now = () => Date.now() / 1e3 | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\nasync function symmetricEncodeJWT(payload, secret, salt, expiresIn = 3600) {\n\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\tconst thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\tkty: \"oct\",\n\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t}, \"sha256\");\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_6__.EncryptJWT(payload).setProtectedHeader({\n\t\talg,\n\t\tenc,\n\t\tkid: thumbprint\n\t}).setIssuedAt().setExpirationTime(now() + expiresIn).setJti(crypto.randomUUID()).encrypt(encryptionSecret);\n}\nasync function symmetricDecodeJWT(token, secret, salt) {\n\tif (!token) return null;\n\ttry {\n\t\tconst { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_7__.jwtDecrypt)(token, async ({ kid }) => {\n\t\t\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\t\t\tif (kid === void 0) return encryptionSecret;\n\t\t\tif (kid === await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\t\t\tkty: \"oct\",\n\t\t\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t\t\t}, \"sha256\")) return encryptionSecret;\n\t\t\tthrow new Error(\"no matching decryption secret\");\n\t\t}, {\n\t\t\tclockTolerance: 15,\n\t\t\tkeyManagementAlgorithms: [alg],\n\t\t\tcontentEncryptionAlgorithms: [enc, \"A256GCM\"]\n\t\t});\n\t\treturn payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=jwt.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY3J5cHRvL2p3dC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBQ0U7QUFDc0Q7O0FBRXJHO0FBQ0E7QUFDQSxrQkFBa0IseUNBQU8sK0JBQStCLGNBQWM7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtDQUFTO0FBQ3pCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJEQUFJLENBQUMseURBQU07QUFDckMsMEJBQTBCLDREQUFzQjtBQUNoRDtBQUNBLEtBQUssd0NBQWdCO0FBQ3JCLEVBQUU7QUFDRixrQkFBa0IsNENBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxVQUFVLFFBQVEsZ0RBQVUsaUJBQWlCLEtBQUs7QUFDNUQsNEJBQTRCLDJEQUFJLENBQUMseURBQU07QUFDdkM7QUFDQSxxQkFBcUIsNERBQXNCO0FBQzNDO0FBQ0EsT0FBTyx3Q0FBZ0I7QUFDdkIsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDc0U7QUFDdEUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY3J5cHRvXFxqd3QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhrZGYgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9oa2RmLmpzXCI7XG5pbXBvcnQgeyBzaGEyNTYgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9zaGEyLmpzXCI7XG5pbXBvcnQgeyBFbmNyeXB0SldULCBTaWduSldULCBiYXNlNjR1cmwsIGNhbGN1bGF0ZUp3a1RodW1icHJpbnQsIGp3dERlY3J5cHQsIGp3dFZlcmlmeSB9IGZyb20gXCJqb3NlXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY3J5cHRvL2p3dC50c1xuYXN5bmMgZnVuY3Rpb24gc2lnbkpXVChwYXlsb2FkLCBzZWNyZXQsIGV4cGlyZXNJbiA9IDM2MDApIHtcblx0cmV0dXJuIGF3YWl0IG5ldyBTaWduSldUKHBheWxvYWQpLnNldFByb3RlY3RlZEhlYWRlcih7IGFsZzogXCJIUzI1NlwiIH0pLnNldElzc3VlZEF0KCkuc2V0RXhwaXJhdGlvblRpbWUoTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKSArIGV4cGlyZXNJbikuc2lnbihuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VjcmV0KSk7XG59XG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlKV1QodG9rZW4sIHNlY3JldCkge1xuXHR0cnkge1xuXHRcdHJldHVybiAoYXdhaXQgand0VmVyaWZ5KHRva2VuLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VjcmV0KSkpLnBheWxvYWQ7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5jb25zdCBpbmZvID0gbmV3IFVpbnQ4QXJyYXkoW1xuXHQ2Nixcblx0MTAxLFxuXHQxMTYsXG5cdDExNixcblx0MTAxLFxuXHQxMTQsXG5cdDY1LFxuXHQxMTcsXG5cdDExNixcblx0MTA0LFxuXHQ0Nixcblx0MTA2LFxuXHQxMTUsXG5cdDMyLFxuXHQ3MSxcblx0MTAxLFxuXHQxMTAsXG5cdDEwMSxcblx0MTE0LFxuXHQ5Nyxcblx0MTE2LFxuXHQxMDEsXG5cdDEwMCxcblx0MzIsXG5cdDY5LFxuXHQxMTAsXG5cdDk5LFxuXHQxMTQsXG5cdDEyMSxcblx0MTEyLFxuXHQxMTYsXG5cdDEwNSxcblx0MTExLFxuXHQxMTAsXG5cdDMyLFxuXHQ3NSxcblx0MTAxLFxuXHQxMjFcbl0pO1xuY29uc3Qgbm93ID0gKCkgPT4gRGF0ZS5ub3coKSAvIDFlMyB8IDA7XG5jb25zdCBhbGcgPSBcImRpclwiO1xuY29uc3QgZW5jID0gXCJBMjU2Q0JDLUhTNTEyXCI7XG5hc3luYyBmdW5jdGlvbiBzeW1tZXRyaWNFbmNvZGVKV1QocGF5bG9hZCwgc2VjcmV0LCBzYWx0LCBleHBpcmVzSW4gPSAzNjAwKSB7XG5cdGNvbnN0IGVuY3J5cHRpb25TZWNyZXQgPSBoa2RmKHNoYTI1NiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCksIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzYWx0KSwgaW5mbywgNjQpO1xuXHRjb25zdCB0aHVtYnByaW50ID0gYXdhaXQgY2FsY3VsYXRlSndrVGh1bWJwcmludCh7XG5cdFx0a3R5OiBcIm9jdFwiLFxuXHRcdGs6IGJhc2U2NHVybC5lbmNvZGUoZW5jcnlwdGlvblNlY3JldClcblx0fSwgXCJzaGEyNTZcIik7XG5cdHJldHVybiBhd2FpdCBuZXcgRW5jcnlwdEpXVChwYXlsb2FkKS5zZXRQcm90ZWN0ZWRIZWFkZXIoe1xuXHRcdGFsZyxcblx0XHRlbmMsXG5cdFx0a2lkOiB0aHVtYnByaW50XG5cdH0pLnNldElzc3VlZEF0KCkuc2V0RXhwaXJhdGlvblRpbWUobm93KCkgKyBleHBpcmVzSW4pLnNldEp0aShjcnlwdG8ucmFuZG9tVVVJRCgpKS5lbmNyeXB0KGVuY3J5cHRpb25TZWNyZXQpO1xufVxuYXN5bmMgZnVuY3Rpb24gc3ltbWV0cmljRGVjb2RlSldUKHRva2VuLCBzZWNyZXQsIHNhbHQpIHtcblx0aWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XG5cdHRyeSB7XG5cdFx0Y29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3REZWNyeXB0KHRva2VuLCBhc3luYyAoeyBraWQgfSkgPT4ge1xuXHRcdFx0Y29uc3QgZW5jcnlwdGlvblNlY3JldCA9IGhrZGYoc2hhMjU2LCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VjcmV0KSwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNhbHQpLCBpbmZvLCA2NCk7XG5cdFx0XHRpZiAoa2lkID09PSB2b2lkIDApIHJldHVybiBlbmNyeXB0aW9uU2VjcmV0O1xuXHRcdFx0aWYgKGtpZCA9PT0gYXdhaXQgY2FsY3VsYXRlSndrVGh1bWJwcmludCh7XG5cdFx0XHRcdGt0eTogXCJvY3RcIixcblx0XHRcdFx0azogYmFzZTY0dXJsLmVuY29kZShlbmNyeXB0aW9uU2VjcmV0KVxuXHRcdFx0fSwgXCJzaGEyNTZcIikpIHJldHVybiBlbmNyeXB0aW9uU2VjcmV0O1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm8gbWF0Y2hpbmcgZGVjcnlwdGlvbiBzZWNyZXRcIik7XG5cdFx0fSwge1xuXHRcdFx0Y2xvY2tUb2xlcmFuY2U6IDE1LFxuXHRcdFx0a2V5TWFuYWdlbWVudEFsZ29yaXRobXM6IFthbGddLFxuXHRcdFx0Y29udGVudEVuY3J5cHRpb25BbGdvcml0aG1zOiBbZW5jLCBcIkEyNTZHQ01cIl1cblx0XHR9KTtcblx0XHRyZXR1cm4gcGF5bG9hZDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduSldULCBzeW1tZXRyaWNEZWNvZGVKV1QsIHN5bW1ldHJpY0VuY29kZUpXVCwgdmVyaWZ5SldUIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qd3QubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/scrypt.js */ \"(action-browser)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/scrypt.js\");\n/* harmony import */ var _noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @noble/hashes/utils.js */ \"(action-browser)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/utils.js\");\n\n\n\n\n\n\n//#region src/crypto/password.ts\nconst config = {\n\tN: 16384,\n\tr: 16,\n\tp: 1,\n\tdkLen: 64\n};\nasync function generateKey(password, salt) {\n\treturn await (0,_noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__.scryptAsync)(password.normalize(\"NFKC\"), salt, {\n\t\tN: config.N,\n\t\tp: config.p,\n\t\tr: config.r,\n\t\tdkLen: config.dkLen,\n\t\tmaxmem: 128 * config.N * config.r * 2\n\t});\n}\nconst hashPassword = async (password) => {\n\tconst salt = _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(crypto.getRandomValues(new Uint8Array(16)));\n\tconst key = await generateKey(password, salt);\n\treturn `${salt}:${_better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(key)}`;\n};\nconst verifyPassword = async ({ hash, password }) => {\n\tconst [salt, key] = hash.split(\":\");\n\tif (!salt || !key) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Invalid password hash\");\n\treturn (0,_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await generateKey(password, salt), (0,_noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__.hexToBytes)(key));\n};\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY3J5cHRvL3Bhc3N3b3JkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlEO0FBQ1M7QUFDYjtBQUNTO0FBQ0Y7O0FBRXBEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9FQUFXO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGNBQWMsdURBQUc7QUFDakI7QUFDQSxXQUFXLEtBQUssR0FBRyx1REFBRyxhQUFhO0FBQ25DO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBLDhCQUE4QixvRUFBZTtBQUM3QyxRQUFRLDhEQUFpQixvQ0FBb0Msa0VBQVU7QUFDdkU7O0FBRUE7QUFDd0M7QUFDeEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY3J5cHRvXFxwYXNzd29yZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uc3RhbnRUaW1lRXF1YWwgfSBmcm9tIFwiLi9idWZmZXIubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGhleCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaGV4XCI7XG5pbXBvcnQgeyBzY3J5cHRBc3luYyB9IGZyb20gXCJAbm9ibGUvaGFzaGVzL3NjcnlwdC5qc1wiO1xuaW1wb3J0IHsgaGV4VG9CeXRlcyB9IGZyb20gXCJAbm9ibGUvaGFzaGVzL3V0aWxzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY3J5cHRvL3Bhc3N3b3JkLnRzXG5jb25zdCBjb25maWcgPSB7XG5cdE46IDE2Mzg0LFxuXHRyOiAxNixcblx0cDogMSxcblx0ZGtMZW46IDY0XG59O1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVLZXkocGFzc3dvcmQsIHNhbHQpIHtcblx0cmV0dXJuIGF3YWl0IHNjcnlwdEFzeW5jKHBhc3N3b3JkLm5vcm1hbGl6ZShcIk5GS0NcIiksIHNhbHQsIHtcblx0XHROOiBjb25maWcuTixcblx0XHRwOiBjb25maWcucCxcblx0XHRyOiBjb25maWcucixcblx0XHRka0xlbjogY29uZmlnLmRrTGVuLFxuXHRcdG1heG1lbTogMTI4ICogY29uZmlnLk4gKiBjb25maWcuciAqIDJcblx0fSk7XG59XG5jb25zdCBoYXNoUGFzc3dvcmQgPSBhc3luYyAocGFzc3dvcmQpID0+IHtcblx0Y29uc3Qgc2FsdCA9IGhleC5lbmNvZGUoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxNikpKTtcblx0Y29uc3Qga2V5ID0gYXdhaXQgZ2VuZXJhdGVLZXkocGFzc3dvcmQsIHNhbHQpO1xuXHRyZXR1cm4gYCR7c2FsdH06JHtoZXguZW5jb2RlKGtleSl9YDtcbn07XG5jb25zdCB2ZXJpZnlQYXNzd29yZCA9IGFzeW5jICh7IGhhc2gsIHBhc3N3b3JkIH0pID0+IHtcblx0Y29uc3QgW3NhbHQsIGtleV0gPSBoYXNoLnNwbGl0KFwiOlwiKTtcblx0aWYgKCFzYWx0IHx8ICFrZXkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJJbnZhbGlkIHBhc3N3b3JkIGhhc2hcIik7XG5cdHJldHVybiBjb25zdGFudFRpbWVFcXVhbChhd2FpdCBnZW5lcmF0ZUtleShwYXNzd29yZCwgc2FsdCksIGhleFRvQnl0ZXMoa2V5KSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGhhc2hQYXNzd29yZCwgdmVyaWZ5UGFzc3dvcmQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhc3N3b3JkLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(action-browser)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n//#region src/crypto/random.ts\nconst generateRandomString = (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__.createRandomStringGenerator)(\"a-z\", \"0-9\", \"A-Z\", \"-_\");\n\n//#endregion\n\n//# sourceMappingURL=random.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY3J5cHRvL3JhbmRvbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0U7O0FBRXhFO0FBQ0EsNkJBQTZCLHNGQUEyQjs7QUFFeEQ7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY3J5cHRvXFxyYW5kb20ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVJhbmRvbVN0cmluZ0dlbmVyYXRvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvcmFuZG9tXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY3J5cHRvL3JhbmRvbS50c1xuY29uc3QgZ2VuZXJhdGVSYW5kb21TdHJpbmcgPSBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IoXCJhLXpcIiwgXCIwLTlcIiwgXCJBLVpcIiwgXCItX1wiKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZG9tLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseAdapter: () => (/* binding */ getBaseAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n//#region src/db/adapter-base.ts\nasync function getBaseAdapter(options, handleDirectDatabase) {\n\tlet adapter;\n\tif (!options.database) {\n\t\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options);\n\t\tconst memoryDB = Object.keys(tables).reduce((acc, key) => {\n\t\t\tacc[key] = [];\n\t\t\treturn acc;\n\t\t}, {});\n\t\tconst { memoryAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/memory-adapter/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\"));\n\t\tadapter = memoryAdapter(memoryDB)(options);\n\t} else if (typeof options.database === \"function\") adapter = options.database(options);\n\telse adapter = await handleDirectDatabase(options);\n\tif (!adapter.transaction) {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation.\");\n\t\tadapter.transaction = async (cb) => {\n\t\t\treturn cb(adapter);\n\t\t};\n\t}\n\treturn adapter;\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvYWRhcHRlci1iYXNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDTjs7QUFFL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUVBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1AsVUFBVSxnQkFBZ0IsUUFBUSx5WEFBOEM7QUFDaEY7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUUseURBQU07QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGFkYXB0ZXItYmFzZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXV0aFRhYmxlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuXG4vLyNyZWdpb24gc3JjL2RiL2FkYXB0ZXItYmFzZS50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0QmFzZUFkYXB0ZXIob3B0aW9ucywgaGFuZGxlRGlyZWN0RGF0YWJhc2UpIHtcblx0bGV0IGFkYXB0ZXI7XG5cdGlmICghb3B0aW9ucy5kYXRhYmFzZSkge1xuXHRcdGNvbnN0IHRhYmxlcyA9IGdldEF1dGhUYWJsZXMob3B0aW9ucyk7XG5cdFx0Y29uc3QgbWVtb3J5REIgPSBPYmplY3Qua2V5cyh0YWJsZXMpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcblx0XHRcdGFjY1trZXldID0gW107XG5cdFx0XHRyZXR1cm4gYWNjO1xuXHRcdH0sIHt9KTtcblx0XHRjb25zdCB7IG1lbW9yeUFkYXB0ZXIgfSA9IGF3YWl0IGltcG9ydChcIi4uL2FkYXB0ZXJzL21lbW9yeS1hZGFwdGVyL2luZGV4Lm1qc1wiKTtcblx0XHRhZGFwdGVyID0gbWVtb3J5QWRhcHRlcihtZW1vcnlEQikob3B0aW9ucyk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuZGF0YWJhc2UgPT09IFwiZnVuY3Rpb25cIikgYWRhcHRlciA9IG9wdGlvbnMuZGF0YWJhc2Uob3B0aW9ucyk7XG5cdGVsc2UgYWRhcHRlciA9IGF3YWl0IGhhbmRsZURpcmVjdERhdGFiYXNlKG9wdGlvbnMpO1xuXHRpZiAoIWFkYXB0ZXIudHJhbnNhY3Rpb24pIHtcblx0XHRsb2dnZXIud2FybihcIkFkYXB0ZXIgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCB0cmFuc2FjdGlvbiBmdW5jdGlvbiwgcGF0Y2hpbmcgaXQgYXV0b21hdGljYWxseS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGFkYXB0ZXIgaW1wbGVtZW50YXRpb24uXCIpO1xuXHRcdGFkYXB0ZXIudHJhbnNhY3Rpb24gPSBhc3luYyAoY2IpID0+IHtcblx0XHRcdHJldHVybiBjYihhZGFwdGVyKTtcblx0XHR9O1xuXHR9XG5cdHJldHVybiBhZGFwdGVyO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGFwdGVyLWJhc2UubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAdapter: () => (/* binding */ getAdapter)\n/* harmony export */ });\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/db/adapter-kysely.ts\nasync function getAdapter(options) {\n\treturn (0,_adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseAdapter)(options, async (opts) => {\n\t\tconst { createKyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\tconst { kysely, databaseType, transaction } = await createKyselyAdapter(opts);\n\t\tif (!kysely) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Failed to initialize database adapter\");\n\t\tconst { kyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\treturn kyselyAdapter(kysely, {\n\t\t\ttype: databaseType || \"sqlite\",\n\t\t\tdebugLogs: opts.database && \"debugLogs\" in opts.database ? opts.database.debugLogs : false,\n\t\t\ttransaction\n\t\t})(opts);\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-kysely.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvYWRhcHRlci1reXNlbHkubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDtBQUNNOztBQUUxRDtBQUNBO0FBQ0EsUUFBUSxpRUFBYztBQUN0QixVQUFVLHNCQUFzQixRQUFRLHlYQUE4QztBQUN0RixVQUFVLG9DQUFvQztBQUM5Qyx5QkFBeUIsb0VBQWU7QUFDeEMsVUFBVSxnQkFBZ0IsUUFBUSx5WEFBOEM7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGOztBQUVBO0FBQ3NCO0FBQ3RCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxhZGFwdGVyLWt5c2VseS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QmFzZUFkYXB0ZXIgfSBmcm9tIFwiLi9hZGFwdGVyLWJhc2UubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyLWt5c2VseS50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0QWRhcHRlcihvcHRpb25zKSB7XG5cdHJldHVybiBnZXRCYXNlQWRhcHRlcihvcHRpb25zLCBhc3luYyAob3B0cykgPT4ge1xuXHRcdGNvbnN0IHsgY3JlYXRlS3lzZWx5QWRhcHRlciB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvaW5kZXgubWpzXCIpO1xuXHRcdGNvbnN0IHsga3lzZWx5LCBkYXRhYmFzZVR5cGUsIHRyYW5zYWN0aW9uIH0gPSBhd2FpdCBjcmVhdGVLeXNlbHlBZGFwdGVyKG9wdHMpO1xuXHRcdGlmICgha3lzZWx5KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2UgYWRhcHRlclwiKTtcblx0XHRjb25zdCB7IGt5c2VseUFkYXB0ZXIgfSA9IGF3YWl0IGltcG9ydChcIi4uL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2luZGV4Lm1qc1wiKTtcblx0XHRyZXR1cm4ga3lzZWx5QWRhcHRlcihreXNlbHksIHtcblx0XHRcdHR5cGU6IGRhdGFiYXNlVHlwZSB8fCBcInNxbGl0ZVwiLFxuXHRcdFx0ZGVidWdMb2dzOiBvcHRzLmRhdGFiYXNlICYmIFwiZGVidWdMb2dzXCIgaW4gb3B0cy5kYXRhYmFzZSA/IG9wdHMuZGF0YWJhc2UuZGVidWdMb2dzIDogZmFsc2UsXG5cdFx0XHR0cmFuc2FjdGlvblxuXHRcdH0pKG9wdHMpO1xuXHR9KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGFwdGVyLWt5c2VseS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertFromDB: () => (/* binding */ convertFromDB),\n/* harmony export */   convertToDB: () => (/* binding */ convertToDB)\n/* harmony export */ });\n//#region src/db/field-converter.ts\nfunction convertToDB(fields, values) {\n\tconst result = values.id ? { id: values.id } : {};\n\tfor (const key in fields) {\n\t\tconst field = fields[key];\n\t\tconst value = values[key];\n\t\tif (value === void 0) continue;\n\t\tresult[field.fieldName || key] = value;\n\t}\n\treturn result;\n}\nfunction convertFromDB(fields, values) {\n\tif (!values) return null;\n\tconst result = { id: values.id };\n\tfor (const [key, value] of Object.entries(fields)) result[key] = values[value.fieldName || key];\n\treturn result;\n}\n\n//#endregion\n\n//# sourceMappingURL=field-converter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvZmllbGQtY29udmVydGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQSw4QkFBOEIsZ0JBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTtBQUNzQztBQUN0QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcZmllbGQtY29udmVydGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2RiL2ZpZWxkLWNvbnZlcnRlci50c1xuZnVuY3Rpb24gY29udmVydFRvREIoZmllbGRzLCB2YWx1ZXMpIHtcblx0Y29uc3QgcmVzdWx0ID0gdmFsdWVzLmlkID8geyBpZDogdmFsdWVzLmlkIH0gOiB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSB7XG5cdFx0Y29uc3QgZmllbGQgPSBmaWVsZHNba2V5XTtcblx0XHRjb25zdCB2YWx1ZSA9IHZhbHVlc1trZXldO1xuXHRcdGlmICh2YWx1ZSA9PT0gdm9pZCAwKSBjb250aW51ZTtcblx0XHRyZXN1bHRbZmllbGQuZmllbGROYW1lIHx8IGtleV0gPSB2YWx1ZTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29udmVydEZyb21EQihmaWVsZHMsIHZhbHVlcykge1xuXHRpZiAoIXZhbHVlcykgcmV0dXJuIG51bGw7XG5cdGNvbnN0IHJlc3VsdCA9IHsgaWQ6IHZhbHVlcy5pZCB9O1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMpKSByZXN1bHRba2V5XSA9IHZhbHVlc1t2YWx1ZS5maWVsZE5hbWUgfHwga2V5XTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmllbGQtY29udmVydGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFieldAttribute: () => (/* binding */ createFieldAttribute)\n/* harmony export */ });\n//#region src/db/field.ts\nconst createFieldAttribute = (type, config) => {\n\treturn {\n\t\ttype,\n\t\t...config\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=field.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvZmllbGQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcZmllbGQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvZGIvZmllbGQudHNcbmNvbnN0IGNyZWF0ZUZpZWxkQXR0cmlidXRlID0gKHR5cGUsIGNvbmZpZykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdHR5cGUsXG5cdFx0Li4uY29uZmlnXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUZpZWxkQXR0cmlidXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWVsZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMigrations: () => (/* binding */ getMigrations),\n/* harmony export */   matchType: () => (/* binding */ matchType)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/db */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kysely */ \"(action-browser)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/get-migration.ts\nconst map = {\n\tpostgres: {\n\t\tstring: [\n\t\t\t\"character varying\",\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int4\",\n\t\t\t\"integer\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"numeric\",\n\t\t\t\"real\",\n\t\t\t\"double precision\"\n\t\t],\n\t\tboolean: [\"bool\", \"boolean\"],\n\t\tdate: [\n\t\t\t\"timestamptz\",\n\t\t\t\"timestamp\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\", \"jsonb\"]\n\t},\n\tmysql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"integer\",\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"boolean\", \"tinyint\"],\n\t\tdate: [\n\t\t\t\"timestamp\",\n\t\t\t\"datetime\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\"]\n\t},\n\tsqlite: {\n\t\tstring: [\"TEXT\"],\n\t\tnumber: [\"INTEGER\", \"REAL\"],\n\t\tboolean: [\"INTEGER\", \"BOOLEAN\"],\n\t\tdate: [\"DATE\", \"INTEGER\"],\n\t\tjson: [\"TEXT\"]\n\t},\n\tmssql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"nvarchar\",\n\t\t\t\"uniqueidentifier\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"bit\", \"smallint\"],\n\t\tdate: [\n\t\t\t\"datetime2\",\n\t\t\t\"date\",\n\t\t\t\"datetime\"\n\t\t],\n\t\tjson: [\"varchar\", \"nvarchar\"]\n\t}\n};\nfunction matchType(columnDataType, fieldType, dbType) {\n\tfunction normalize(type) {\n\t\treturn type.toLowerCase().split(\"(\")[0].trim();\n\t}\n\tif (fieldType === \"string[]\" || fieldType === \"number[]\") return columnDataType.toLowerCase().includes(\"json\");\n\tconst types = map[dbType];\n\treturn (Array.isArray(fieldType) ? types[\"string\"].map((t) => t.toLowerCase()) : types[fieldType].map((t) => t.toLowerCase())).includes(normalize(columnDataType));\n}\n/**\n* Get the current PostgreSQL schema (search_path) for the database connection\n* Returns the first schema in the search_path, defaulting to 'public' if not found\n*/\nasync function getPostgresSchema(db) {\n\ttry {\n\t\tconst result = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`SHOW search_path`.execute(db);\n\t\tif (result.rows[0]?.search_path) return result.rows[0].search_path.split(\",\").map((s) => s.trim()).map((s) => s.replace(/^[\"']|[\"']$/g, \"\")).filter((s) => !s.startsWith(\"$\"))[0] || \"public\";\n\t} catch {}\n\treturn \"public\";\n}\nasync function getMigrations(config) {\n\tconst betterAuthSchema = (0,_get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.getSchema)(config);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.createLogger)(config.logger);\n\tlet { kysely: db, databaseType: dbType } = await (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter)(config);\n\tif (!dbType) {\n\t\tlogger$1.warn(\"Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this.\");\n\t\tdbType = \"sqlite\";\n\t}\n\tif (!db) {\n\t\tlogger$1.error(\"Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter.\");\n\t\tprocess.exit(1);\n\t}\n\tlet currentSchema = \"public\";\n\tif (dbType === \"postgres\") {\n\t\tcurrentSchema = await getPostgresSchema(db);\n\t\tlogger$1.debug(`PostgreSQL migration: Using schema '${currentSchema}' (from search_path)`);\n\t\ttry {\n\t\t\tif (!(await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT schema_name \n\t\t\t\tFROM information_schema.schemata \n\t\t\t\tWHERE schema_name = ${currentSchema}\n\t\t\t`.execute(db)).rows[0]) logger$1.warn(`Schema '${currentSchema}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`);\n\t\t} catch (error) {\n\t\t\tlogger$1.debug(`Could not verify schema existence: ${error instanceof Error ? error.message : String(error)}`);\n\t\t}\n\t}\n\tconst allTableMetadata = await db.introspection.getTables();\n\tlet tableMetadata = allTableMetadata;\n\tif (dbType === \"postgres\") try {\n\t\tconst tablesInSchema = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT table_name \n\t\t\t\tFROM information_schema.tables \n\t\t\t\tWHERE table_schema = ${currentSchema}\n\t\t\t\tAND table_type = 'BASE TABLE'\n\t\t\t`.execute(db);\n\t\tconst tableNamesInSchema = new Set(tablesInSchema.rows.map((row) => row.table_name));\n\t\ttableMetadata = allTableMetadata.filter((table) => table.schema === currentSchema && tableNamesInSchema.has(table.name));\n\t\tlogger$1.debug(`Found ${tableMetadata.length} table(s) in schema '${currentSchema}': ${tableMetadata.map((t) => t.name).join(\", \") || \"(none)\"}`);\n\t} catch (error) {\n\t\tlogger$1.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${error instanceof Error ? error.message : String(error)}`);\n\t}\n\tconst toBeCreated = [];\n\tconst toBeAdded = [];\n\tfor (const [key, value] of Object.entries(betterAuthSchema)) {\n\t\tconst table = tableMetadata.find((t) => t.name === key);\n\t\tif (!table) {\n\t\t\tconst tIndex = toBeCreated.findIndex((t) => t.table === key);\n\t\t\tconst tableData = {\n\t\t\t\ttable: key,\n\t\t\t\tfields: value.fields,\n\t\t\t\torder: value.order || Infinity\n\t\t\t};\n\t\t\tconst insertIndex = toBeCreated.findIndex((t) => (t.order || Infinity) > tableData.order);\n\t\t\tif (insertIndex === -1) if (tIndex === -1) toBeCreated.push(tableData);\n\t\t\telse toBeCreated[tIndex].fields = {\n\t\t\t\t...toBeCreated[tIndex].fields,\n\t\t\t\t...value.fields\n\t\t\t};\n\t\t\telse toBeCreated.splice(insertIndex, 0, tableData);\n\t\t\tcontinue;\n\t\t}\n\t\tconst toBeAddedFields = {};\n\t\tfor (const [fieldName, field] of Object.entries(value.fields)) {\n\t\t\tconst column = table.columns.find((c) => c.name === fieldName);\n\t\t\tif (!column) {\n\t\t\t\ttoBeAddedFields[fieldName] = field;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (matchType(column.dataType, field.type, dbType)) continue;\n\t\t\telse logger$1.warn(`Field ${fieldName} in table ${key} has a different type in the database. Expected ${field.type} but got ${column.dataType}.`);\n\t\t}\n\t\tif (Object.keys(toBeAddedFields).length > 0) toBeAdded.push({\n\t\t\ttable: key,\n\t\t\tfields: toBeAddedFields,\n\t\t\torder: value.order || Infinity\n\t\t});\n\t}\n\tconst migrations = [];\n\tconst useUUIDs = config.advanced?.database?.generateId === \"uuid\";\n\tconst useNumberId = config.advanced?.database?.useNumberId || config.advanced?.database?.generateId === \"serial\";\n\tfunction getType(field, fieldName) {\n\t\tconst type = field.type;\n\t\tconst provider = dbType || \"sqlite\";\n\t\tconst typeMap = {\n\t\t\tstring: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"text\",\n\t\t\t\tmysql: field.unique ? \"varchar(255)\" : field.references ? \"varchar(36)\" : field.sortable ? \"varchar(255)\" : field.index ? \"varchar(255)\" : \"text\",\n\t\t\t\tmssql: field.unique || field.sortable ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"varchar(8000)\"\n\t\t\t},\n\t\t\tboolean: {\n\t\t\t\tsqlite: \"integer\",\n\t\t\t\tpostgres: \"boolean\",\n\t\t\t\tmysql: \"boolean\",\n\t\t\t\tmssql: \"smallint\"\n\t\t\t},\n\t\t\tnumber: {\n\t\t\t\tsqlite: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tpostgres: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmysql: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmssql: field.bigint ? \"bigint\" : \"integer\"\n\t\t\t},\n\t\t\tdate: {\n\t\t\t\tsqlite: \"date\",\n\t\t\t\tpostgres: \"timestamptz\",\n\t\t\t\tmysql: \"timestamp(3)\",\n\t\t\t\tmssql: (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`datetime2(3)`\n\t\t\t},\n\t\t\tjson: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tpostgres: useNumberId ? (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`integer GENERATED BY DEFAULT AS IDENTITY` : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\tforeignKeyId: {\n\t\t\t\tpostgres: useNumberId ? \"integer\" : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\t\"string[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\t\"number[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t}\n\t\t};\n\t\tif (fieldName === \"id\" || field.references?.field === \"id\") {\n\t\t\tif (fieldName === \"id\") return typeMap.id[provider];\n\t\t\treturn typeMap.foreignKeyId[provider];\n\t\t}\n\t\tif (Array.isArray(type)) return \"text\";\n\t\tif (!(type in typeMap)) throw new Error(`Unsupported field type '${String(type)}' for field '${fieldName}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: \"string\") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);\n\t\treturn typeMap[type][provider];\n\t}\n\tconst getModelName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetModelName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tconst getFieldName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetFieldName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tfunction getReferencePath(model, field) {\n\t\ttry {\n\t\t\treturn `${getModelName(model)}.${getFieldName({\n\t\t\t\tmodel,\n\t\t\t\tfield\n\t\t\t})}`;\n\t\t} catch {\n\t\t\treturn `${model}.${field}`;\n\t\t}\n\t}\n\tif (toBeAdded.length) for (const table of toBeAdded) for (const [fieldName, field] of Object.entries(table.fields)) {\n\t\tconst type = getType(field, fieldName);\n\t\tconst builder = db.schema.alterTable(table.table);\n\t\tif (field.index) {\n\t\t\tconst index = db.schema.alterTable(table.table).addIndex(`${table.table}_${fieldName}_idx`);\n\t\t\tmigrations.push(index);\n\t\t}\n\t\tconst built = builder.addColumn(fieldName, type, (col) => {\n\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\tif (field.unique) col = col.unique();\n\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\treturn col;\n\t\t});\n\t\tmigrations.push(built);\n\t}\n\tconst toBeIndexed = [];\n\tif (config.advanced?.database?.useNumberId) logger$1.warn(\"`useNumberId` is deprecated. Please use `generateId` with `serial` instead.\");\n\tif (toBeCreated.length) for (const table of toBeCreated) {\n\t\tconst idType = getType({ type: useNumberId ? \"number\" : \"string\" }, \"id\");\n\t\tlet dbT = db.schema.createTable(table.table).addColumn(\"id\", idType, (col) => {\n\t\t\tif (useNumberId) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"sqlite\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"mssql\") return col.identity().primaryKey().notNull();\n\t\t\t\treturn col.autoIncrement().primaryKey().notNull();\n\t\t\t}\n\t\t\tif (useUUIDs) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`pg_catalog.gen_random_uuid()`).notNull();\n\t\t\t\treturn col.primaryKey().notNull();\n\t\t\t}\n\t\t\treturn col.primaryKey().notNull();\n\t\t});\n\t\tfor (const [fieldName, field] of Object.entries(table.fields)) {\n\t\t\tconst type = getType(field, fieldName);\n\t\t\tdbT = dbT.addColumn(fieldName, type, (col) => {\n\t\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\t\tif (field.unique) col = col.unique();\n\t\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\t\treturn col;\n\t\t\t});\n\t\t\tif (field.index) {\n\t\t\t\tconst builder = db.schema.createIndex(`${table.table}_${fieldName}_${field.unique ? \"uidx\" : \"idx\"}`).on(table.table).columns([fieldName]);\n\t\t\t\ttoBeIndexed.push(field.unique ? builder.unique() : builder);\n\t\t\t}\n\t\t}\n\t\tmigrations.push(dbT);\n\t}\n\tif (toBeIndexed.length) for (const index of toBeIndexed) migrations.push(index);\n\tasync function runMigrations() {\n\t\tfor (const migration of migrations) await migration.execute();\n\t}\n\tasync function compileMigrations() {\n\t\treturn migrations.map((m) => m.compile().sql).join(\";\\n\\n\") + \";\";\n\t}\n\treturn {\n\t\ttoBeCreated,\n\t\ttoBeAdded,\n\t\trunMigrations,\n\t\tcompileMigrations\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=get-migration.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvZ2V0LW1pZ3JhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNkU7QUFDaEM7QUFDUTtBQUNBO0FBQ3hCO0FBQ3FEOztBQUVsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkNBQUc7QUFDMUI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBEQUFTO0FBQ25DLGtCQUFrQixtRUFBWTtBQUM5QixPQUFPLG1DQUFtQyxRQUFRLHlGQUFtQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGNBQWM7QUFDdEU7QUFDQSxlQUFlLDJDQUFHO0FBQ2xCO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsb0RBQW9ELGNBQWM7QUFDbEUsSUFBSTtBQUNKLHdEQUF3RCx1REFBdUQ7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwyQ0FBRztBQUNsQztBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNCQUFzQixzQkFBc0IsY0FBYyxLQUFLLHdEQUF3RDtBQUNqSixHQUFHO0FBQ0gsMEZBQTBGLHVEQUF1RDtBQUNqSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFdBQVcsV0FBVyxLQUFLLGlEQUFpRCxZQUFZLFVBQVUsZ0JBQWdCO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQ0FBRztBQUNkLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNEJBQTRCLDJDQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLGFBQWEsZUFBZSxVQUFVO0FBQzNHO0FBQ0E7QUFDQSxzQkFBc0IsOEVBQWdCO0FBQ3RDLFVBQVUsbUVBQWE7QUFDdkI7QUFDQSxFQUFFO0FBQ0Ysc0JBQXNCLDhFQUFnQjtBQUN0QyxVQUFVLG1FQUFhO0FBQ3ZCO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxhQUFhLG9CQUFvQixHQUFHO0FBQ3BDO0FBQ0E7QUFDQSxJQUFJLEVBQUU7QUFDTixJQUFJO0FBQ0osYUFBYSxNQUFNLEdBQUcsTUFBTTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsWUFBWSxHQUFHLFVBQVU7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkxBQTZMLDJDQUFHO0FBQ2hNLDRCQUE0QiwyQ0FBRztBQUMvQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlDQUF5QztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLDJDQUFHO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4TEFBOEwsMkNBQUc7QUFDak0sNkJBQTZCLDJDQUFHO0FBQ2hDO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNkNBQTZDLFlBQVksR0FBRyxVQUFVLEdBQUcsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELFdBQVc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNvQztBQUNwQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcZ2V0LW1pZ3JhdGlvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlS3lzZWx5QWRhcHRlciB9IGZyb20gXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hIH0gZnJvbSBcIi4vZ2V0LXNjaGVtYS5tanNcIjtcbmltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IHNxbCB9IGZyb20gXCJreXNlbHlcIjtcbmltcG9ydCB7IGluaXRHZXRGaWVsZE5hbWUsIGluaXRHZXRNb2RlbE5hbWUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGIvYWRhcHRlclwiO1xuXG4vLyNyZWdpb24gc3JjL2RiL2dldC1taWdyYXRpb24udHNcbmNvbnN0IG1hcCA9IHtcblx0cG9zdGdyZXM6IHtcblx0XHRzdHJpbmc6IFtcblx0XHRcdFwiY2hhcmFjdGVyIHZhcnlpbmdcIixcblx0XHRcdFwidmFyY2hhclwiLFxuXHRcdFx0XCJ0ZXh0XCIsXG5cdFx0XHRcInV1aWRcIlxuXHRcdF0sXG5cdFx0bnVtYmVyOiBbXG5cdFx0XHRcImludDRcIixcblx0XHRcdFwiaW50ZWdlclwiLFxuXHRcdFx0XCJiaWdpbnRcIixcblx0XHRcdFwic21hbGxpbnRcIixcblx0XHRcdFwibnVtZXJpY1wiLFxuXHRcdFx0XCJyZWFsXCIsXG5cdFx0XHRcImRvdWJsZSBwcmVjaXNpb25cIlxuXHRcdF0sXG5cdFx0Ym9vbGVhbjogW1wiYm9vbFwiLCBcImJvb2xlYW5cIl0sXG5cdFx0ZGF0ZTogW1xuXHRcdFx0XCJ0aW1lc3RhbXB0elwiLFxuXHRcdFx0XCJ0aW1lc3RhbXBcIixcblx0XHRcdFwiZGF0ZVwiXG5cdFx0XSxcblx0XHRqc29uOiBbXCJqc29uXCIsIFwianNvbmJcIl1cblx0fSxcblx0bXlzcWw6IHtcblx0XHRzdHJpbmc6IFtcblx0XHRcdFwidmFyY2hhclwiLFxuXHRcdFx0XCJ0ZXh0XCIsXG5cdFx0XHRcInV1aWRcIlxuXHRcdF0sXG5cdFx0bnVtYmVyOiBbXG5cdFx0XHRcImludGVnZXJcIixcblx0XHRcdFwiaW50XCIsXG5cdFx0XHRcImJpZ2ludFwiLFxuXHRcdFx0XCJzbWFsbGludFwiLFxuXHRcdFx0XCJkZWNpbWFsXCIsXG5cdFx0XHRcImZsb2F0XCIsXG5cdFx0XHRcImRvdWJsZVwiXG5cdFx0XSxcblx0XHRib29sZWFuOiBbXCJib29sZWFuXCIsIFwidGlueWludFwiXSxcblx0XHRkYXRlOiBbXG5cdFx0XHRcInRpbWVzdGFtcFwiLFxuXHRcdFx0XCJkYXRldGltZVwiLFxuXHRcdFx0XCJkYXRlXCJcblx0XHRdLFxuXHRcdGpzb246IFtcImpzb25cIl1cblx0fSxcblx0c3FsaXRlOiB7XG5cdFx0c3RyaW5nOiBbXCJURVhUXCJdLFxuXHRcdG51bWJlcjogW1wiSU5URUdFUlwiLCBcIlJFQUxcIl0sXG5cdFx0Ym9vbGVhbjogW1wiSU5URUdFUlwiLCBcIkJPT0xFQU5cIl0sXG5cdFx0ZGF0ZTogW1wiREFURVwiLCBcIklOVEVHRVJcIl0sXG5cdFx0anNvbjogW1wiVEVYVFwiXVxuXHR9LFxuXHRtc3NxbDoge1xuXHRcdHN0cmluZzogW1xuXHRcdFx0XCJ2YXJjaGFyXCIsXG5cdFx0XHRcIm52YXJjaGFyXCIsXG5cdFx0XHRcInVuaXF1ZWlkZW50aWZpZXJcIlxuXHRcdF0sXG5cdFx0bnVtYmVyOiBbXG5cdFx0XHRcImludFwiLFxuXHRcdFx0XCJiaWdpbnRcIixcblx0XHRcdFwic21hbGxpbnRcIixcblx0XHRcdFwiZGVjaW1hbFwiLFxuXHRcdFx0XCJmbG9hdFwiLFxuXHRcdFx0XCJkb3VibGVcIlxuXHRcdF0sXG5cdFx0Ym9vbGVhbjogW1wiYml0XCIsIFwic21hbGxpbnRcIl0sXG5cdFx0ZGF0ZTogW1xuXHRcdFx0XCJkYXRldGltZTJcIixcblx0XHRcdFwiZGF0ZVwiLFxuXHRcdFx0XCJkYXRldGltZVwiXG5cdFx0XSxcblx0XHRqc29uOiBbXCJ2YXJjaGFyXCIsIFwibnZhcmNoYXJcIl1cblx0fVxufTtcbmZ1bmN0aW9uIG1hdGNoVHlwZShjb2x1bW5EYXRhVHlwZSwgZmllbGRUeXBlLCBkYlR5cGUpIHtcblx0ZnVuY3Rpb24gbm9ybWFsaXplKHR5cGUpIHtcblx0XHRyZXR1cm4gdHlwZS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiKFwiKVswXS50cmltKCk7XG5cdH1cblx0aWYgKGZpZWxkVHlwZSA9PT0gXCJzdHJpbmdbXVwiIHx8IGZpZWxkVHlwZSA9PT0gXCJudW1iZXJbXVwiKSByZXR1cm4gY29sdW1uRGF0YVR5cGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImpzb25cIik7XG5cdGNvbnN0IHR5cGVzID0gbWFwW2RiVHlwZV07XG5cdHJldHVybiAoQXJyYXkuaXNBcnJheShmaWVsZFR5cGUpID8gdHlwZXNbXCJzdHJpbmdcIl0ubWFwKCh0KSA9PiB0LnRvTG93ZXJDYXNlKCkpIDogdHlwZXNbZmllbGRUeXBlXS5tYXAoKHQpID0+IHQudG9Mb3dlckNhc2UoKSkpLmluY2x1ZGVzKG5vcm1hbGl6ZShjb2x1bW5EYXRhVHlwZSkpO1xufVxuLyoqXG4qIEdldCB0aGUgY3VycmVudCBQb3N0Z3JlU1FMIHNjaGVtYSAoc2VhcmNoX3BhdGgpIGZvciB0aGUgZGF0YWJhc2UgY29ubmVjdGlvblxuKiBSZXR1cm5zIHRoZSBmaXJzdCBzY2hlbWEgaW4gdGhlIHNlYXJjaF9wYXRoLCBkZWZhdWx0aW5nIHRvICdwdWJsaWMnIGlmIG5vdCBmb3VuZFxuKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFBvc3RncmVzU2NoZW1hKGRiKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsYFNIT1cgc2VhcmNoX3BhdGhgLmV4ZWN1dGUoZGIpO1xuXHRcdGlmIChyZXN1bHQucm93c1swXT8uc2VhcmNoX3BhdGgpIHJldHVybiByZXN1bHQucm93c1swXS5zZWFyY2hfcGF0aC5zcGxpdChcIixcIikubWFwKChzKSA9PiBzLnRyaW0oKSkubWFwKChzKSA9PiBzLnJlcGxhY2UoL15bXCInXXxbXCInXSQvZywgXCJcIikpLmZpbHRlcigocykgPT4gIXMuc3RhcnRzV2l0aChcIiRcIikpWzBdIHx8IFwicHVibGljXCI7XG5cdH0gY2F0Y2gge31cblx0cmV0dXJuIFwicHVibGljXCI7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRNaWdyYXRpb25zKGNvbmZpZykge1xuXHRjb25zdCBiZXR0ZXJBdXRoU2NoZW1hID0gZ2V0U2NoZW1hKGNvbmZpZyk7XG5cdGNvbnN0IGxvZ2dlciQxID0gY3JlYXRlTG9nZ2VyKGNvbmZpZy5sb2dnZXIpO1xuXHRsZXQgeyBreXNlbHk6IGRiLCBkYXRhYmFzZVR5cGU6IGRiVHlwZSB9ID0gYXdhaXQgY3JlYXRlS3lzZWx5QWRhcHRlcihjb25maWcpO1xuXHRpZiAoIWRiVHlwZSkge1xuXHRcdGxvZ2dlciQxLndhcm4oXCJDb3VsZCBub3QgZGV0ZXJtaW5lIGRhdGFiYXNlIHR5cGUsIGRlZmF1bHRpbmcgdG8gc3FsaXRlLiBQbGVhc2UgcHJvdmlkZSBhIHR5cGUgaW4gdGhlIGRhdGFiYXNlIG9wdGlvbnMgdG8gYXZvaWQgdGhpcy5cIik7XG5cdFx0ZGJUeXBlID0gXCJzcWxpdGVcIjtcblx0fVxuXHRpZiAoIWRiKSB7XG5cdFx0bG9nZ2VyJDEuZXJyb3IoXCJPbmx5IGt5c2VseSBhZGFwdGVyIGlzIHN1cHBvcnRlZCBmb3IgbWlncmF0aW9ucy4gWW91IGNhbiB1c2UgYGdlbmVyYXRlYCBjb21tYW5kIHRvIGdlbmVyYXRlIHRoZSBzY2hlbWEsIGlmIHlvdSdyZSB1c2luZyBhIGRpZmZlcmVudCBhZGFwdGVyLlwiKTtcblx0XHRwcm9jZXNzLmV4aXQoMSk7XG5cdH1cblx0bGV0IGN1cnJlbnRTY2hlbWEgPSBcInB1YmxpY1wiO1xuXHRpZiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIpIHtcblx0XHRjdXJyZW50U2NoZW1hID0gYXdhaXQgZ2V0UG9zdGdyZXNTY2hlbWEoZGIpO1xuXHRcdGxvZ2dlciQxLmRlYnVnKGBQb3N0Z3JlU1FMIG1pZ3JhdGlvbjogVXNpbmcgc2NoZW1hICcke2N1cnJlbnRTY2hlbWF9JyAoZnJvbSBzZWFyY2hfcGF0aClgKTtcblx0XHR0cnkge1xuXHRcdFx0aWYgKCEoYXdhaXQgc3FsYFxuXHRcdFx0XHRTRUxFQ1Qgc2NoZW1hX25hbWUgXG5cdFx0XHRcdEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnNjaGVtYXRhIFxuXHRcdFx0XHRXSEVSRSBzY2hlbWFfbmFtZSA9ICR7Y3VycmVudFNjaGVtYX1cblx0XHRcdGAuZXhlY3V0ZShkYikpLnJvd3NbMF0pIGxvZ2dlciQxLndhcm4oYFNjaGVtYSAnJHtjdXJyZW50U2NoZW1hfScgZG9lcyBub3QgZXhpc3QuIFRhYmxlcyB3aWxsIGJlIGluc3BlY3RlZCBmcm9tIGF2YWlsYWJsZSBzY2hlbWFzLiBDb25zaWRlciBjcmVhdGluZyB0aGUgc2NoZW1hIGZpcnN0IG9yIGNoZWNraW5nIHlvdXIgZGF0YWJhc2UgY29uZmlndXJhdGlvbi5gKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0bG9nZ2VyJDEuZGVidWcoYENvdWxkIG5vdCB2ZXJpZnkgc2NoZW1hIGV4aXN0ZW5jZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IGFsbFRhYmxlTWV0YWRhdGEgPSBhd2FpdCBkYi5pbnRyb3NwZWN0aW9uLmdldFRhYmxlcygpO1xuXHRsZXQgdGFibGVNZXRhZGF0YSA9IGFsbFRhYmxlTWV0YWRhdGE7XG5cdGlmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIikgdHJ5IHtcblx0XHRjb25zdCB0YWJsZXNJblNjaGVtYSA9IGF3YWl0IHNxbGBcblx0XHRcdFx0U0VMRUNUIHRhYmxlX25hbWUgXG5cdFx0XHRcdEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlcyBcblx0XHRcdFx0V0hFUkUgdGFibGVfc2NoZW1hID0gJHtjdXJyZW50U2NoZW1hfVxuXHRcdFx0XHRBTkQgdGFibGVfdHlwZSA9ICdCQVNFIFRBQkxFJ1xuXHRcdFx0YC5leGVjdXRlKGRiKTtcblx0XHRjb25zdCB0YWJsZU5hbWVzSW5TY2hlbWEgPSBuZXcgU2V0KHRhYmxlc0luU2NoZW1hLnJvd3MubWFwKChyb3cpID0+IHJvdy50YWJsZV9uYW1lKSk7XG5cdFx0dGFibGVNZXRhZGF0YSA9IGFsbFRhYmxlTWV0YWRhdGEuZmlsdGVyKCh0YWJsZSkgPT4gdGFibGUuc2NoZW1hID09PSBjdXJyZW50U2NoZW1hICYmIHRhYmxlTmFtZXNJblNjaGVtYS5oYXModGFibGUubmFtZSkpO1xuXHRcdGxvZ2dlciQxLmRlYnVnKGBGb3VuZCAke3RhYmxlTWV0YWRhdGEubGVuZ3RofSB0YWJsZShzKSBpbiBzY2hlbWEgJyR7Y3VycmVudFNjaGVtYX0nOiAke3RhYmxlTWV0YWRhdGEubWFwKCh0KSA9PiB0Lm5hbWUpLmpvaW4oXCIsIFwiKSB8fCBcIihub25lKVwifWApO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGxvZ2dlciQxLndhcm4oYENvdWxkIG5vdCBmaWx0ZXIgdGFibGVzIGJ5IHNjaGVtYS4gVXNpbmcgYWxsIGRpc2NvdmVyZWQgdGFibGVzLiBFcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG5cdH1cblx0Y29uc3QgdG9CZUNyZWF0ZWQgPSBbXTtcblx0Y29uc3QgdG9CZUFkZGVkID0gW107XG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGJldHRlckF1dGhTY2hlbWEpKSB7XG5cdFx0Y29uc3QgdGFibGUgPSB0YWJsZU1ldGFkYXRhLmZpbmQoKHQpID0+IHQubmFtZSA9PT0ga2V5KTtcblx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRjb25zdCB0SW5kZXggPSB0b0JlQ3JlYXRlZC5maW5kSW5kZXgoKHQpID0+IHQudGFibGUgPT09IGtleSk7XG5cdFx0XHRjb25zdCB0YWJsZURhdGEgPSB7XG5cdFx0XHRcdHRhYmxlOiBrZXksXG5cdFx0XHRcdGZpZWxkczogdmFsdWUuZmllbGRzLFxuXHRcdFx0XHRvcmRlcjogdmFsdWUub3JkZXIgfHwgSW5maW5pdHlcblx0XHRcdH07XG5cdFx0XHRjb25zdCBpbnNlcnRJbmRleCA9IHRvQmVDcmVhdGVkLmZpbmRJbmRleCgodCkgPT4gKHQub3JkZXIgfHwgSW5maW5pdHkpID4gdGFibGVEYXRhLm9yZGVyKTtcblx0XHRcdGlmIChpbnNlcnRJbmRleCA9PT0gLTEpIGlmICh0SW5kZXggPT09IC0xKSB0b0JlQ3JlYXRlZC5wdXNoKHRhYmxlRGF0YSk7XG5cdFx0XHRlbHNlIHRvQmVDcmVhdGVkW3RJbmRleF0uZmllbGRzID0ge1xuXHRcdFx0XHQuLi50b0JlQ3JlYXRlZFt0SW5kZXhdLmZpZWxkcyxcblx0XHRcdFx0Li4udmFsdWUuZmllbGRzXG5cdFx0XHR9O1xuXHRcdFx0ZWxzZSB0b0JlQ3JlYXRlZC5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIHRhYmxlRGF0YSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Y29uc3QgdG9CZUFkZGVkRmllbGRzID0ge307XG5cdFx0Zm9yIChjb25zdCBbZmllbGROYW1lLCBmaWVsZF0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUuZmllbGRzKSkge1xuXHRcdFx0Y29uc3QgY29sdW1uID0gdGFibGUuY29sdW1ucy5maW5kKChjKSA9PiBjLm5hbWUgPT09IGZpZWxkTmFtZSk7XG5cdFx0XHRpZiAoIWNvbHVtbikge1xuXHRcdFx0XHR0b0JlQWRkZWRGaWVsZHNbZmllbGROYW1lXSA9IGZpZWxkO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmIChtYXRjaFR5cGUoY29sdW1uLmRhdGFUeXBlLCBmaWVsZC50eXBlLCBkYlR5cGUpKSBjb250aW51ZTtcblx0XHRcdGVsc2UgbG9nZ2VyJDEud2FybihgRmllbGQgJHtmaWVsZE5hbWV9IGluIHRhYmxlICR7a2V5fSBoYXMgYSBkaWZmZXJlbnQgdHlwZSBpbiB0aGUgZGF0YWJhc2UuIEV4cGVjdGVkICR7ZmllbGQudHlwZX0gYnV0IGdvdCAke2NvbHVtbi5kYXRhVHlwZX0uYCk7XG5cdFx0fVxuXHRcdGlmIChPYmplY3Qua2V5cyh0b0JlQWRkZWRGaWVsZHMpLmxlbmd0aCA+IDApIHRvQmVBZGRlZC5wdXNoKHtcblx0XHRcdHRhYmxlOiBrZXksXG5cdFx0XHRmaWVsZHM6IHRvQmVBZGRlZEZpZWxkcyxcblx0XHRcdG9yZGVyOiB2YWx1ZS5vcmRlciB8fCBJbmZpbml0eVxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IG1pZ3JhdGlvbnMgPSBbXTtcblx0Y29uc3QgdXNlVVVJRHMgPSBjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkID09PSBcInV1aWRcIjtcblx0Y29uc3QgdXNlTnVtYmVySWQgPSBjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCB8fCBjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkID09PSBcInNlcmlhbFwiO1xuXHRmdW5jdGlvbiBnZXRUeXBlKGZpZWxkLCBmaWVsZE5hbWUpIHtcblx0XHRjb25zdCB0eXBlID0gZmllbGQudHlwZTtcblx0XHRjb25zdCBwcm92aWRlciA9IGRiVHlwZSB8fCBcInNxbGl0ZVwiO1xuXHRcdGNvbnN0IHR5cGVNYXAgPSB7XG5cdFx0XHRzdHJpbmc6IHtcblx0XHRcdFx0c3FsaXRlOiBcInRleHRcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwidGV4dFwiLFxuXHRcdFx0XHRteXNxbDogZmllbGQudW5pcXVlID8gXCJ2YXJjaGFyKDI1NSlcIiA6IGZpZWxkLnJlZmVyZW5jZXMgPyBcInZhcmNoYXIoMzYpXCIgOiBmaWVsZC5zb3J0YWJsZSA/IFwidmFyY2hhcigyNTUpXCIgOiBmaWVsZC5pbmRleCA/IFwidmFyY2hhcigyNTUpXCIgOiBcInRleHRcIixcblx0XHRcdFx0bXNzcWw6IGZpZWxkLnVuaXF1ZSB8fCBmaWVsZC5zb3J0YWJsZSA/IFwidmFyY2hhcigyNTUpXCIgOiBmaWVsZC5yZWZlcmVuY2VzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDgwMDApXCJcblx0XHRcdH0sXG5cdFx0XHRib29sZWFuOiB7XG5cdFx0XHRcdHNxbGl0ZTogXCJpbnRlZ2VyXCIsXG5cdFx0XHRcdHBvc3RncmVzOiBcImJvb2xlYW5cIixcblx0XHRcdFx0bXlzcWw6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRtc3NxbDogXCJzbWFsbGludFwiXG5cdFx0XHR9LFxuXHRcdFx0bnVtYmVyOiB7XG5cdFx0XHRcdHNxbGl0ZTogZmllbGQuYmlnaW50ID8gXCJiaWdpbnRcIiA6IFwiaW50ZWdlclwiLFxuXHRcdFx0XHRwb3N0Z3JlczogZmllbGQuYmlnaW50ID8gXCJiaWdpbnRcIiA6IFwiaW50ZWdlclwiLFxuXHRcdFx0XHRteXNxbDogZmllbGQuYmlnaW50ID8gXCJiaWdpbnRcIiA6IFwiaW50ZWdlclwiLFxuXHRcdFx0XHRtc3NxbDogZmllbGQuYmlnaW50ID8gXCJiaWdpbnRcIiA6IFwiaW50ZWdlclwiXG5cdFx0XHR9LFxuXHRcdFx0ZGF0ZToge1xuXHRcdFx0XHRzcWxpdGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJ0aW1lc3RhbXB0elwiLFxuXHRcdFx0XHRteXNxbDogXCJ0aW1lc3RhbXAoMylcIixcblx0XHRcdFx0bXNzcWw6IHNxbGBkYXRldGltZTIoMylgXG5cdFx0XHR9LFxuXHRcdFx0anNvbjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fSxcblx0XHRcdGlkOiB7XG5cdFx0XHRcdHBvc3RncmVzOiB1c2VOdW1iZXJJZCA/IHNxbGBpbnRlZ2VyIEdFTkVSQVRFRCBCWSBERUZBVUxUIEFTIElERU5USVRZYCA6IHVzZVVVSURzID8gXCJ1dWlkXCIgOiBcInRleHRcIixcblx0XHRcdFx0bXlzcWw6IHVzZU51bWJlcklkID8gXCJpbnRlZ2VyXCIgOiB1c2VVVUlEcyA/IFwidmFyY2hhcigzNilcIiA6IFwidmFyY2hhcigzNilcIixcblx0XHRcdFx0bXNzcWw6IHVzZU51bWJlcklkID8gXCJpbnRlZ2VyXCIgOiB1c2VVVUlEcyA/IFwidmFyY2hhcigzNilcIiA6IFwidmFyY2hhcigzNilcIixcblx0XHRcdFx0c3FsaXRlOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogXCJ0ZXh0XCJcblx0XHRcdH0sXG5cdFx0XHRmb3JlaWduS2V5SWQ6IHtcblx0XHRcdFx0cG9zdGdyZXM6IHVzZU51bWJlcklkID8gXCJpbnRlZ2VyXCIgOiB1c2VVVUlEcyA/IFwidXVpZFwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG15c3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdG1zc3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdHNxbGl0ZTogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IFwidGV4dFwiXG5cdFx0XHR9LFxuXHRcdFx0XCJzdHJpbmdbXVwiOiB7XG5cdFx0XHRcdHNxbGl0ZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBvc3RncmVzOiBcImpzb25iXCIsXG5cdFx0XHRcdG15c3FsOiBcImpzb25cIixcblx0XHRcdFx0bXNzcWw6IFwidmFyY2hhcig4MDAwKVwiXG5cdFx0XHR9LFxuXHRcdFx0XCJudW1iZXJbXVwiOiB7XG5cdFx0XHRcdHNxbGl0ZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBvc3RncmVzOiBcImpzb25iXCIsXG5cdFx0XHRcdG15c3FsOiBcImpzb25cIixcblx0XHRcdFx0bXNzcWw6IFwidmFyY2hhcig4MDAwKVwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRpZiAoZmllbGROYW1lID09PSBcImlkXCIgfHwgZmllbGQucmVmZXJlbmNlcz8uZmllbGQgPT09IFwiaWRcIikge1xuXHRcdFx0aWYgKGZpZWxkTmFtZSA9PT0gXCJpZFwiKSByZXR1cm4gdHlwZU1hcC5pZFtwcm92aWRlcl07XG5cdFx0XHRyZXR1cm4gdHlwZU1hcC5mb3JlaWduS2V5SWRbcHJvdmlkZXJdO1xuXHRcdH1cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkgcmV0dXJuIFwidGV4dFwiO1xuXHRcdGlmICghKHR5cGUgaW4gdHlwZU1hcCkpIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZmllbGQgdHlwZSAnJHtTdHJpbmcodHlwZSl9JyBmb3IgZmllbGQgJyR7ZmllbGROYW1lfScuIEFsbG93ZWQgdHlwZXMgYXJlOiBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgZGF0ZSwgc3RyaW5nW10sIG51bWJlcltdLiBJZiB5b3UgbmVlZCB0byBzdG9yZSBzdHJ1Y3R1cmVkIGRhdGEsIHN0b3JlIGl0IGFzIGEgSlNPTiBzdHJpbmcgKHR5cGU6IFwic3RyaW5nXCIpIG9yIHNwbGl0IGl0IGludG8gcHJpbWl0aXZlIGZpZWxkcy4gU2VlIGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvYWR2YW5jZWQvc2NoZW1hI2FkZGl0aW9uYWwtZmllbGRzYCk7XG5cdFx0cmV0dXJuIHR5cGVNYXBbdHlwZV1bcHJvdmlkZXJdO1xuXHR9XG5cdGNvbnN0IGdldE1vZGVsTmFtZSA9IGluaXRHZXRNb2RlbE5hbWUoe1xuXHRcdHNjaGVtYTogZ2V0QXV0aFRhYmxlcyhjb25maWcpLFxuXHRcdHVzZVBsdXJhbDogZmFsc2Vcblx0fSk7XG5cdGNvbnN0IGdldEZpZWxkTmFtZSA9IGluaXRHZXRGaWVsZE5hbWUoe1xuXHRcdHNjaGVtYTogZ2V0QXV0aFRhYmxlcyhjb25maWcpLFxuXHRcdHVzZVBsdXJhbDogZmFsc2Vcblx0fSk7XG5cdGZ1bmN0aW9uIGdldFJlZmVyZW5jZVBhdGgobW9kZWwsIGZpZWxkKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBgJHtnZXRNb2RlbE5hbWUobW9kZWwpfS4ke2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRmaWVsZFxuXHRcdFx0fSl9YDtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiBgJHttb2RlbH0uJHtmaWVsZH1gO1xuXHRcdH1cblx0fVxuXHRpZiAodG9CZUFkZGVkLmxlbmd0aCkgZm9yIChjb25zdCB0YWJsZSBvZiB0b0JlQWRkZWQpIGZvciAoY29uc3QgW2ZpZWxkTmFtZSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlLmZpZWxkcykpIHtcblx0XHRjb25zdCB0eXBlID0gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKTtcblx0XHRjb25zdCBidWlsZGVyID0gZGIuc2NoZW1hLmFsdGVyVGFibGUodGFibGUudGFibGUpO1xuXHRcdGlmIChmaWVsZC5pbmRleCkge1xuXHRcdFx0Y29uc3QgaW5kZXggPSBkYi5zY2hlbWEuYWx0ZXJUYWJsZSh0YWJsZS50YWJsZSkuYWRkSW5kZXgoYCR7dGFibGUudGFibGV9XyR7ZmllbGROYW1lfV9pZHhgKTtcblx0XHRcdG1pZ3JhdGlvbnMucHVzaChpbmRleCk7XG5cdFx0fVxuXHRcdGNvbnN0IGJ1aWx0ID0gYnVpbGRlci5hZGRDb2x1bW4oZmllbGROYW1lLCB0eXBlLCAoY29sKSA9PiB7XG5cdFx0XHRjb2wgPSBmaWVsZC5yZXF1aXJlZCAhPT0gZmFsc2UgPyBjb2wubm90TnVsbCgpIDogY29sO1xuXHRcdFx0aWYgKGZpZWxkLnJlZmVyZW5jZXMpIGNvbCA9IGNvbC5yZWZlcmVuY2VzKGdldFJlZmVyZW5jZVBhdGgoZmllbGQucmVmZXJlbmNlcy5tb2RlbCwgZmllbGQucmVmZXJlbmNlcy5maWVsZCkpLm9uRGVsZXRlKGZpZWxkLnJlZmVyZW5jZXMub25EZWxldGUgfHwgXCJjYXNjYWRlXCIpO1xuXHRcdFx0aWYgKGZpZWxkLnVuaXF1ZSkgY29sID0gY29sLnVuaXF1ZSgpO1xuXHRcdFx0aWYgKGZpZWxkLnR5cGUgPT09IFwiZGF0ZVwiICYmIHR5cGVvZiBmaWVsZC5kZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIiAmJiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIgfHwgZGJUeXBlID09PSBcIm15c3FsXCIgfHwgZGJUeXBlID09PSBcIm1zc3FsXCIpKSBpZiAoZGJUeXBlID09PSBcIm15c3FsXCIpIGNvbCA9IGNvbC5kZWZhdWx0VG8oc3FsYENVUlJFTlRfVElNRVNUQU1QKDMpYCk7XG5cdFx0XHRlbHNlIGNvbCA9IGNvbC5kZWZhdWx0VG8oc3FsYENVUlJFTlRfVElNRVNUQU1QYCk7XG5cdFx0XHRyZXR1cm4gY29sO1xuXHRcdH0pO1xuXHRcdG1pZ3JhdGlvbnMucHVzaChidWlsdCk7XG5cdH1cblx0Y29uc3QgdG9CZUluZGV4ZWQgPSBbXTtcblx0aWYgKGNvbmZpZy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkKSBsb2dnZXIkMS53YXJuKFwiYHVzZU51bWJlcklkYCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIGBnZW5lcmF0ZUlkYCB3aXRoIGBzZXJpYWxgIGluc3RlYWQuXCIpO1xuXHRpZiAodG9CZUNyZWF0ZWQubGVuZ3RoKSBmb3IgKGNvbnN0IHRhYmxlIG9mIHRvQmVDcmVhdGVkKSB7XG5cdFx0Y29uc3QgaWRUeXBlID0gZ2V0VHlwZSh7IHR5cGU6IHVzZU51bWJlcklkID8gXCJudW1iZXJcIiA6IFwic3RyaW5nXCIgfSwgXCJpZFwiKTtcblx0XHRsZXQgZGJUID0gZGIuc2NoZW1hLmNyZWF0ZVRhYmxlKHRhYmxlLnRhYmxlKS5hZGRDb2x1bW4oXCJpZFwiLCBpZFR5cGUsIChjb2wpID0+IHtcblx0XHRcdGlmICh1c2VOdW1iZXJJZCkge1xuXHRcdFx0XHRpZiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIpIHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHRcdFx0ZWxzZSBpZiAoZGJUeXBlID09PSBcInNxbGl0ZVwiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdGVsc2UgaWYgKGRiVHlwZSA9PT0gXCJtc3NxbFwiKSByZXR1cm4gY29sLmlkZW50aXR5KCkucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHRcdFx0cmV0dXJuIGNvbC5hdXRvSW5jcmVtZW50KCkucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHRcdH1cblx0XHRcdGlmICh1c2VVVUlEcykge1xuXHRcdFx0XHRpZiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIpIHJldHVybiBjb2wucHJpbWFyeUtleSgpLmRlZmF1bHRUbyhzcWxgcGdfY2F0YWxvZy5nZW5fcmFuZG9tX3V1aWQoKWApLm5vdE51bGwoKTtcblx0XHRcdFx0cmV0dXJuIGNvbC5wcmltYXJ5S2V5KCkubm90TnVsbCgpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNvbC5wcmltYXJ5S2V5KCkubm90TnVsbCgpO1xuXHRcdH0pO1xuXHRcdGZvciAoY29uc3QgW2ZpZWxkTmFtZSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlLmZpZWxkcykpIHtcblx0XHRcdGNvbnN0IHR5cGUgPSBnZXRUeXBlKGZpZWxkLCBmaWVsZE5hbWUpO1xuXHRcdFx0ZGJUID0gZGJULmFkZENvbHVtbihmaWVsZE5hbWUsIHR5cGUsIChjb2wpID0+IHtcblx0XHRcdFx0Y29sID0gZmllbGQucmVxdWlyZWQgIT09IGZhbHNlID8gY29sLm5vdE51bGwoKSA6IGNvbDtcblx0XHRcdFx0aWYgKGZpZWxkLnJlZmVyZW5jZXMpIGNvbCA9IGNvbC5yZWZlcmVuY2VzKGdldFJlZmVyZW5jZVBhdGgoZmllbGQucmVmZXJlbmNlcy5tb2RlbCwgZmllbGQucmVmZXJlbmNlcy5maWVsZCkpLm9uRGVsZXRlKGZpZWxkLnJlZmVyZW5jZXMub25EZWxldGUgfHwgXCJjYXNjYWRlXCIpO1xuXHRcdFx0XHRpZiAoZmllbGQudW5pcXVlKSBjb2wgPSBjb2wudW5pcXVlKCk7XG5cdFx0XHRcdGlmIChmaWVsZC50eXBlID09PSBcImRhdGVcIiAmJiB0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiIHx8IGRiVHlwZSA9PT0gXCJteXNxbFwiIHx8IGRiVHlwZSA9PT0gXCJtc3NxbFwiKSkgaWYgKGRiVHlwZSA9PT0gXCJteXNxbFwiKSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUCgzKWApO1xuXHRcdFx0XHRlbHNlIGNvbCA9IGNvbC5kZWZhdWx0VG8oc3FsYENVUlJFTlRfVElNRVNUQU1QYCk7XG5cdFx0XHRcdHJldHVybiBjb2w7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChmaWVsZC5pbmRleCkge1xuXHRcdFx0XHRjb25zdCBidWlsZGVyID0gZGIuc2NoZW1hLmNyZWF0ZUluZGV4KGAke3RhYmxlLnRhYmxlfV8ke2ZpZWxkTmFtZX1fJHtmaWVsZC51bmlxdWUgPyBcInVpZHhcIiA6IFwiaWR4XCJ9YCkub24odGFibGUudGFibGUpLmNvbHVtbnMoW2ZpZWxkTmFtZV0pO1xuXHRcdFx0XHR0b0JlSW5kZXhlZC5wdXNoKGZpZWxkLnVuaXF1ZSA/IGJ1aWxkZXIudW5pcXVlKCkgOiBidWlsZGVyKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0bWlncmF0aW9ucy5wdXNoKGRiVCk7XG5cdH1cblx0aWYgKHRvQmVJbmRleGVkLmxlbmd0aCkgZm9yIChjb25zdCBpbmRleCBvZiB0b0JlSW5kZXhlZCkgbWlncmF0aW9ucy5wdXNoKGluZGV4KTtcblx0YXN5bmMgZnVuY3Rpb24gcnVuTWlncmF0aW9ucygpIHtcblx0XHRmb3IgKGNvbnN0IG1pZ3JhdGlvbiBvZiBtaWdyYXRpb25zKSBhd2FpdCBtaWdyYXRpb24uZXhlY3V0ZSgpO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIGNvbXBpbGVNaWdyYXRpb25zKCkge1xuXHRcdHJldHVybiBtaWdyYXRpb25zLm1hcCgobSkgPT4gbS5jb21waWxlKCkuc3FsKS5qb2luKFwiO1xcblxcblwiKSArIFwiO1wiO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0dG9CZUNyZWF0ZWQsXG5cdFx0dG9CZUFkZGVkLFxuXHRcdHJ1bk1pZ3JhdGlvbnMsXG5cdFx0Y29tcGlsZU1pZ3JhdGlvbnNcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRNaWdyYXRpb25zLCBtYXRjaFR5cGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1taWdyYXRpb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSchema: () => (/* binding */ getSchema)\n/* harmony export */ });\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\");\n\n\n//#region src/db/get-schema.ts\nfunction getSchema(config) {\n\tconst tables = (0, _index_mjs__WEBPACK_IMPORTED_MODULE_0__.db_exports.getAuthTables)(config);\n\tconst schema = {};\n\tfor (const key in tables) {\n\t\tconst table = tables[key];\n\t\tconst fields = table.fields;\n\t\tconst actualFields = {};\n\t\tObject.entries(fields).forEach(([key$1, field]) => {\n\t\t\tactualFields[field.fieldName || key$1] = field;\n\t\t\tif (field.references) {\n\t\t\t\tconst refTable = tables[field.references.model];\n\t\t\t\tif (refTable) actualFields[field.fieldName || key$1].references = {\n\t\t\t\t\t...field.references,\n\t\t\t\t\tmodel: refTable.modelName,\n\t\t\t\t\tfield: field.references.field\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tif (schema[table.modelName]) {\n\t\t\tschema[table.modelName].fields = {\n\t\t\t\t...schema[table.modelName].fields,\n\t\t\t\t...actualFields\n\t\t\t};\n\t\t\tcontinue;\n\t\t}\n\t\tschema[table.modelName] = {\n\t\t\tfields: actualFields,\n\t\t\torder: table.order || Infinity\n\t\t};\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvZ2V0LXNjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUM7O0FBRXpDO0FBQ0E7QUFDQSxvQkFBb0Isa0RBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGdldC1zY2hlbWEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRiX2V4cG9ydHMgfSBmcm9tIFwiLi9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9nZXQtc2NoZW1hLnRzXG5mdW5jdGlvbiBnZXRTY2hlbWEoY29uZmlnKSB7XG5cdGNvbnN0IHRhYmxlcyA9ICgwLCBkYl9leHBvcnRzLmdldEF1dGhUYWJsZXMpKGNvbmZpZyk7XG5cdGNvbnN0IHNjaGVtYSA9IHt9O1xuXHRmb3IgKGNvbnN0IGtleSBpbiB0YWJsZXMpIHtcblx0XHRjb25zdCB0YWJsZSA9IHRhYmxlc1trZXldO1xuXHRcdGNvbnN0IGZpZWxkcyA9IHRhYmxlLmZpZWxkcztcblx0XHRjb25zdCBhY3R1YWxGaWVsZHMgPSB7fTtcblx0XHRPYmplY3QuZW50cmllcyhmaWVsZHMpLmZvckVhY2goKFtrZXkkMSwgZmllbGRdKSA9PiB7XG5cdFx0XHRhY3R1YWxGaWVsZHNbZmllbGQuZmllbGROYW1lIHx8IGtleSQxXSA9IGZpZWxkO1xuXHRcdFx0aWYgKGZpZWxkLnJlZmVyZW5jZXMpIHtcblx0XHRcdFx0Y29uc3QgcmVmVGFibGUgPSB0YWJsZXNbZmllbGQucmVmZXJlbmNlcy5tb2RlbF07XG5cdFx0XHRcdGlmIChyZWZUYWJsZSkgYWN0dWFsRmllbGRzW2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXkkMV0ucmVmZXJlbmNlcyA9IHtcblx0XHRcdFx0XHQuLi5maWVsZC5yZWZlcmVuY2VzLFxuXHRcdFx0XHRcdG1vZGVsOiByZWZUYWJsZS5tb2RlbE5hbWUsXG5cdFx0XHRcdFx0ZmllbGQ6IGZpZWxkLnJlZmVyZW5jZXMuZmllbGRcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoc2NoZW1hW3RhYmxlLm1vZGVsTmFtZV0pIHtcblx0XHRcdHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdLmZpZWxkcyA9IHtcblx0XHRcdFx0Li4uc2NoZW1hW3RhYmxlLm1vZGVsTmFtZV0uZmllbGRzLFxuXHRcdFx0XHQuLi5hY3R1YWxGaWVsZHNcblx0XHRcdH07XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0c2NoZW1hW3RhYmxlLm1vZGVsTmFtZV0gPSB7XG5cdFx0XHRmaWVsZHM6IGFjdHVhbEZpZWxkcyxcblx0XHRcdG9yZGVyOiB0YWJsZS5vcmRlciB8fCBJbmZpbml0eVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHNjaGVtYTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRTY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1zY2hlbWEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.accountSchema),\n/* harmony export */   convertFromDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB),\n/* harmony export */   convertToDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.coreSchema),\n/* harmony export */   createFieldAttribute: () => (/* reexport safe */ _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute),\n/* harmony export */   createInternalAdapter: () => (/* reexport safe */ _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter),\n/* harmony export */   db_exports: () => (/* binding */ db_exports),\n/* harmony export */   getAdapter: () => (/* reexport safe */ _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.getAuthTables),\n/* harmony export */   getBaseAdapter: () => (/* reexport safe */ _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter),\n/* harmony export */   getMigrations: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations),\n/* harmony export */   getSchema: () => (/* reexport safe */ _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema),\n/* harmony export */   getWithHooks: () => (/* reexport safe */ _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks),\n/* harmony export */   matchType: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType),\n/* harmony export */   mergeSchema: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData),\n/* harmony export */   parseSessionInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.rateLimitSchema),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.sessionSchema),\n/* harmony export */   toZodSchema: () => (/* reexport safe */ _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.userSchema),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.verificationSchema)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\");\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adapter-kysely.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _field_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./field.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs\");\n/* harmony import */ var _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./field-converter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./internal-adapter.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./to-zod.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./get-schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./get-migration.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/db */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/db/index.ts\nvar db_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__export)({\n\tconvertFromDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB,\n\tconvertToDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB,\n\tcreateFieldAttribute: () => _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute,\n\tcreateInternalAdapter: () => _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter,\n\tgetAdapter: () => _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter,\n\tgetBaseAdapter: () => _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter,\n\tgetMigrations: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations,\n\tgetSchema: () => _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema,\n\tgetWithHooks: () => _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks,\n\tmatchType: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType,\n\tmergeSchema: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema,\n\tparseAccountInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput,\n\tparseAccountOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput,\n\tparseAdditionalUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput,\n\tparseInputData: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData,\n\tparseSessionInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput,\n\tparseSessionOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput,\n\tparseUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput,\n\tparseUserOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput,\n\ttoZodSchema: () => _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema\n});\n\n(0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__reExport)(db_exports, _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__);\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0U7QUFDcEI7QUFDRjtBQUNDO0FBQ2dCO0FBQ2lJO0FBQ3BKO0FBQ2U7QUFDcEI7QUFDRTtBQUNrQjs7QUFFM0I7O0FBRXBDO0FBQ0EsaUNBQWlDLHVFQUFRO0FBQ3pDLHNCQUFzQiwrREFBYTtBQUNuQyxvQkFBb0IsNkRBQVc7QUFDL0IsNkJBQTZCLDREQUFvQjtBQUNqRCw4QkFBOEIsd0VBQXFCO0FBQ25ELG1CQUFtQiwyREFBVTtBQUM3Qix1QkFBdUIsNkRBQWM7QUFDckMsc0JBQXNCLDhEQUFhO0FBQ25DLGtCQUFrQixzREFBUztBQUMzQixxQkFBcUIseURBQVk7QUFDakMsa0JBQWtCLDBEQUFTO0FBQzNCLG9CQUFvQixvREFBVztBQUMvQiwwQkFBMEIsMERBQWlCO0FBQzNDLDJCQUEyQiwyREFBa0I7QUFDN0MsaUNBQWlDLGlFQUF3QjtBQUN6RCx1QkFBdUIsdURBQWM7QUFDckMsMEJBQTBCLDBEQUFpQjtBQUMzQywyQkFBMkIsMkRBQWtCO0FBQzdDLHVCQUF1Qix1REFBYztBQUNyQyx3QkFBd0Isd0RBQWU7QUFDdkMsb0JBQW9CLG9EQUFXO0FBQy9CLENBQUM7QUFDb0U7QUFDckUseUVBQVUsYUFBYSxrREFBNEI7O0FBRW5EO0FBQ2lXO0FBQ2pXIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQsIF9fcmVFeHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5tanNcIjtcbmltcG9ydCB7IGdldEJhc2VBZGFwdGVyIH0gZnJvbSBcIi4vYWRhcHRlci1iYXNlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXIta3lzZWx5Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRmllbGRBdHRyaWJ1dGUgfSBmcm9tIFwiLi9maWVsZC5tanNcIjtcbmltcG9ydCB7IGNvbnZlcnRGcm9tREIsIGNvbnZlcnRUb0RCIH0gZnJvbSBcIi4vZmllbGQtY29udmVydGVyLm1qc1wiO1xuaW1wb3J0IHsgbWVyZ2VTY2hlbWEsIHBhcnNlQWNjb3VudElucHV0LCBwYXJzZUFjY291bnRPdXRwdXQsIHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dCwgcGFyc2VJbnB1dERhdGEsIHBhcnNlU2Vzc2lvbklucHV0LCBwYXJzZVNlc3Npb25PdXRwdXQsIHBhcnNlVXNlcklucHV0LCBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRXaXRoSG9va3MgfSBmcm9tIFwiLi93aXRoLWhvb2tzLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4vaW50ZXJuYWwtYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IHRvWm9kU2NoZW1hIH0gZnJvbSBcIi4vdG8tem9kLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hIH0gZnJvbSBcIi4vZ2V0LXNjaGVtYS5tanNcIjtcbmltcG9ydCB7IGdldE1pZ3JhdGlvbnMsIG1hdGNoVHlwZSB9IGZyb20gXCIuL2dldC1taWdyYXRpb24ubWpzXCI7XG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiXG5cbi8vI3JlZ2lvbiBzcmMvZGIvaW5kZXgudHNcbnZhciBkYl9leHBvcnRzID0gLyogQF9fUFVSRV9fICovIF9fZXhwb3J0KHtcblx0Y29udmVydEZyb21EQjogKCkgPT4gY29udmVydEZyb21EQixcblx0Y29udmVydFRvREI6ICgpID0+IGNvbnZlcnRUb0RCLFxuXHRjcmVhdGVGaWVsZEF0dHJpYnV0ZTogKCkgPT4gY3JlYXRlRmllbGRBdHRyaWJ1dGUsXG5cdGNyZWF0ZUludGVybmFsQWRhcHRlcjogKCkgPT4gY3JlYXRlSW50ZXJuYWxBZGFwdGVyLFxuXHRnZXRBZGFwdGVyOiAoKSA9PiBnZXRBZGFwdGVyLFxuXHRnZXRCYXNlQWRhcHRlcjogKCkgPT4gZ2V0QmFzZUFkYXB0ZXIsXG5cdGdldE1pZ3JhdGlvbnM6ICgpID0+IGdldE1pZ3JhdGlvbnMsXG5cdGdldFNjaGVtYTogKCkgPT4gZ2V0U2NoZW1hLFxuXHRnZXRXaXRoSG9va3M6ICgpID0+IGdldFdpdGhIb29rcyxcblx0bWF0Y2hUeXBlOiAoKSA9PiBtYXRjaFR5cGUsXG5cdG1lcmdlU2NoZW1hOiAoKSA9PiBtZXJnZVNjaGVtYSxcblx0cGFyc2VBY2NvdW50SW5wdXQ6ICgpID0+IHBhcnNlQWNjb3VudElucHV0LFxuXHRwYXJzZUFjY291bnRPdXRwdXQ6ICgpID0+IHBhcnNlQWNjb3VudE91dHB1dCxcblx0cGFyc2VBZGRpdGlvbmFsVXNlcklucHV0OiAoKSA9PiBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsXG5cdHBhcnNlSW5wdXREYXRhOiAoKSA9PiBwYXJzZUlucHV0RGF0YSxcblx0cGFyc2VTZXNzaW9uSW5wdXQ6ICgpID0+IHBhcnNlU2Vzc2lvbklucHV0LFxuXHRwYXJzZVNlc3Npb25PdXRwdXQ6ICgpID0+IHBhcnNlU2Vzc2lvbk91dHB1dCxcblx0cGFyc2VVc2VySW5wdXQ6ICgpID0+IHBhcnNlVXNlcklucHV0LFxuXHRwYXJzZVVzZXJPdXRwdXQ6ICgpID0+IHBhcnNlVXNlck91dHB1dCxcblx0dG9ab2RTY2hlbWE6ICgpID0+IHRvWm9kU2NoZW1hXG59KTtcbmltcG9ydCAqIGFzIGltcG9ydF9fX2JldHRlcl9hdXRoX2NvcmVfZGIgZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCI7XG5fX3JlRXhwb3J0KGRiX2V4cG9ydHMsIGltcG9ydF9fX2JldHRlcl9hdXRoX2NvcmVfZGIpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnZlcnRGcm9tREIsIGNvbnZlcnRUb0RCLCBjcmVhdGVGaWVsZEF0dHJpYnV0ZSwgY3JlYXRlSW50ZXJuYWxBZGFwdGVyLCBkYl9leHBvcnRzLCBnZXRBZGFwdGVyLCBnZXRCYXNlQWRhcHRlciwgZ2V0TWlncmF0aW9ucywgZ2V0U2NoZW1hLCBnZXRXaXRoSG9va3MsIG1hdGNoVHlwZSwgbWVyZ2VTY2hlbWEsIHBhcnNlQWNjb3VudElucHV0LCBwYXJzZUFjY291bnRPdXRwdXQsIHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dCwgcGFyc2VJbnB1dERhdGEsIHBhcnNlU2Vzc2lvbklucHV0LCBwYXJzZVNlc3Npb25PdXRwdXQsIHBhcnNlVXNlcklucHV0LCBwYXJzZVVzZXJPdXRwdXQsIHRvWm9kU2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInternalAdapter: () => (/* binding */ createInternalAdapter)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schema.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/internal-adapter.ts\nconst createInternalAdapter = (adapter, ctx) => {\n\tconst logger = ctx.logger;\n\tconst options = ctx.options;\n\tconst secondaryStorage = options.secondaryStorage;\n\tconst sessionExpiration = options.session?.expiresIn || 3600 * 24 * 7;\n\tconst { createWithHooks, updateWithHooks, updateManyWithHooks, deleteWithHooks, deleteManyWithHooks } = (0,_with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__.getWithHooks)(adapter, ctx);\n\tasync function refreshUserSessions(user) {\n\t\tif (!secondaryStorage) return;\n\t\tconst listRaw = await secondaryStorage.get(`active-sessions-${user.id}`);\n\t\tif (!listRaw) return;\n\t\tconst now = Date.now();\n\t\tconst validSessions = ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || []).filter((s) => s.expiresAt > now);\n\t\tawait Promise.all(validSessions.map(async ({ token }) => {\n\t\t\tconst cached = await secondaryStorage.get(token);\n\t\t\tif (!cached) return;\n\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(cached);\n\t\t\tif (!parsed) return;\n\t\t\tconst sessionTTL = Math.max(Math.floor(new Date(parsed.session.expiresAt).getTime() - now) / 1e3, 0);\n\t\t\tawait secondaryStorage.set(token, JSON.stringify({\n\t\t\t\tsession: parsed.session,\n\t\t\t\tuser\n\t\t\t}), Math.floor(sessionTTL));\n\t\t}));\n\t}\n\treturn {\n\t\tcreateOAuthUser: async (user, account) => {\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.runWithTransaction)(adapter, async () => {\n\t\t\t\tconst createdUser = await createWithHooks({\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t...user\n\t\t\t\t}, \"user\", void 0);\n\t\t\t\treturn {\n\t\t\t\t\tuser: createdUser,\n\t\t\t\t\taccount: await createWithHooks({\n\t\t\t\t\t\t...account,\n\t\t\t\t\t\tuserId: createdUser.id,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}, \"account\", void 0)\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tcreateUser: async (user) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...user,\n\t\t\t\temail: user.email?.toLowerCase()\n\t\t\t}, \"user\", void 0);\n\t\t},\n\t\tcreateAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tlistSessions: async (userId) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\tif (!currentList) return [];\n\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\tconst now = Date.now();\n\t\t\t\tconst seenTokens = /* @__PURE__ */ new Set();\n\t\t\t\tconst sessions = [];\n\t\t\t\tfor (const { token, expiresAt } of list) {\n\t\t\t\t\tif (expiresAt <= now || seenTokens.has(token)) continue;\n\t\t\t\t\tseenTokens.add(token);\n\t\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\t\tif (!data) continue;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = typeof data === \"string\" ? JSON.parse(data) : data;\n\t\t\t\t\t\tif (!parsed?.session) continue;\n\t\t\t\t\t\tsessions.push((0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...parsed.session,\n\t\t\t\t\t\t\texpiresAt: new Date(parsed.session.expiresAt)\n\t\t\t\t\t\t}));\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions;\n\t\t\t}\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistUsers: async (limit, offset, sortBy, where) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\tlimit,\n\t\t\t\toffset,\n\t\t\t\tsortBy,\n\t\t\t\twhere\n\t\t\t});\n\t\t},\n\t\tcountTotalUsers: async (where) => {\n\t\t\tconst total = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).count({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere\n\t\t\t});\n\t\t\tif (typeof total === \"string\") return parseInt(total);\n\t\t\treturn total;\n\t\t},\n\t\tdeleteUser: async (userId) => {\n\t\t\tif (!secondaryStorage || options.session?.storeSessionInDatabase) await deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"session\", void 0);\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t},\n\t\tcreateSession: async (userId, dontRememberMe, override, overrideAll) => {\n\t\t\tconst ctx$1 = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAuthContext)().catch(() => null);\n\t\t\tconst headers = ctx$1?.headers || ctx$1?.request?.headers;\n\t\t\tconst { id: _, ...rest } = override || {};\n\t\t\tconst defaultAdditionalFields = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionInput)(ctx$1?.context.options ?? options, {});\n\t\t\tconst data = {\n\t\t\t\tipAddress: ctx$1?.request || ctx$1?.headers ? (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__.getIp)(ctx$1?.request || ctx$1?.headers, ctx$1?.context.options) || \"\" : \"\",\n\t\t\t\tuserAgent: headers?.get(\"user-agent\") || \"\",\n\t\t\t\t...rest,\n\t\t\t\texpiresAt: dontRememberMe ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(3600 * 24, \"sec\") : (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(sessionExpiration, \"sec\"),\n\t\t\t\tuserId,\n\t\t\t\ttoken: (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.generateId)(32),\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...defaultAdditionalFields,\n\t\t\t\t...overrideAll ? rest : {}\n\t\t\t};\n\t\t\treturn await createWithHooks(data, \"session\", secondaryStorage ? {\n\t\t\t\tfn: async (sessionData) => {\n\t\t\t\t\t/**\n\t\t\t\t\t* store the session token for the user\n\t\t\t\t\t* so we can retrieve it later for listing sessions\n\t\t\t\t\t*/\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tlist = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tlist = list.filter((session) => session.expiresAt > now && session.token !== data.token);\n\t\t\t\t\t}\n\t\t\t\t\tconst sorted = [...list, {\n\t\t\t\t\t\ttoken: data.token,\n\t\t\t\t\t\texpiresAt: data.expiresAt.getTime()\n\t\t\t\t\t}].sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt ?? data.expiresAt.getTime();\n\t\t\t\t\tconst furthestSessionTTL = Math.max(Math.floor((furthestSessionExp - now) / 1e3), 0);\n\t\t\t\t\tif (furthestSessionTTL > 0) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(sorted), furthestSessionTTL);\n\t\t\t\t\tconst user = await adapter.findOne({\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((data.expiresAt.getTime() - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) await secondaryStorage.set(data.token, JSON.stringify({\n\t\t\t\t\t\tsession: sessionData,\n\t\t\t\t\t\tuser\n\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\treturn sessionData;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tfindSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessionStringified = await secondaryStorage.get(token);\n\t\t\t\tif (!sessionStringified && !options.session?.storeSessionInDatabase) return null;\n\t\t\t\tif (sessionStringified) {\n\t\t\t\t\tconst s = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(sessionStringified);\n\t\t\t\t\tif (!s) return null;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(s.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.session.updatedAt)\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: token,\n\t\t\t\t\tfield: \"token\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { user, ...session } = result;\n\t\t\tif (!user) return null;\n\t\t\treturn {\n\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, session),\n\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, user)\n\t\t\t};\n\t\t},\n\t\tfindSessions: async (sessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessions$1 = [];\n\t\t\t\tfor (const sessionToken of sessionTokens) {\n\t\t\t\t\tconst sessionStringified = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (sessionStringified) try {\n\t\t\t\t\t\tconst s = typeof sessionStringified === \"string\" ? JSON.parse(sessionStringified) : sessionStringified;\n\t\t\t\t\t\tif (!s?.session) continue;\n\t\t\t\t\t\tconst session = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsessions$1.push(session);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions$1;\n\t\t\t}\n\t\t\tconst sessions = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"token\",\n\t\t\t\t\tvalue: sessionTokens,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!sessions.length) return [];\n\t\t\tif (sessions.some((session) => !session.user)) return [];\n\t\t\treturn sessions.map((_session) => {\n\t\t\t\tconst { user, ...session } = _session;\n\t\t\t\treturn {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateSession: async (sessionToken, session) => {\n\t\t\treturn await updateWithHooks(session, [{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: sessionToken\n\t\t\t}], \"session\", secondaryStorage ? {\n\t\t\t\tasync fn(data) {\n\t\t\t\t\tconst currentSession = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (!currentSession) return null;\n\t\t\t\t\tconst parsedSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentSession);\n\t\t\t\t\tif (!parsedSession) return null;\n\t\t\t\t\tconst mergedSession = {\n\t\t\t\t\t\t...parsedSession.session,\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\texpiresAt: new Date(data.expiresAt ?? parsedSession.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(parsedSession.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(data.updatedAt ?? parsedSession.session.updatedAt)\n\t\t\t\t\t};\n\t\t\t\t\tconst updatedSession = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, mergedSession);\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tconst expiresMs = new Date(updatedSession.expiresAt).getTime();\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((expiresMs - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) {\n\t\t\t\t\t\tawait secondaryStorage.set(sessionToken, JSON.stringify({\n\t\t\t\t\t\t\tsession: updatedSession,\n\t\t\t\t\t\t\tuser: parsedSession.user\n\t\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\t\tconst listKey = `active-sessions-${updatedSession.userId}`;\n\t\t\t\t\t\tconst listRaw = await secondaryStorage.get(listKey);\n\t\t\t\t\t\tconst sorted = (listRaw ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || [] : []).filter((s) => s.token !== sessionToken && s.expiresAt > now).concat([{\n\t\t\t\t\t\t\ttoken: sessionToken,\n\t\t\t\t\t\t\texpiresAt: expiresMs\n\t\t\t\t\t\t}]).sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt;\n\t\t\t\t\t\tif (furthestSessionExp && furthestSessionExp > now) await secondaryStorage.set(listKey, JSON.stringify(sorted), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(listKey);\n\t\t\t\t\t}\n\t\t\t\t\treturn updatedSession;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tdeleteSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\tif (data) {\n\t\t\t\t\tconst { session } = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(data) ?? {};\n\t\t\t\t\tif (!session) {\n\t\t\t\t\t\tlogger.error(\"Session not found in secondary storage\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst userId = session.userId;\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tconst filtered = list.filter((session$1) => session$1.expiresAt > now && session$1.token !== token);\n\t\t\t\t\t\tconst furthestSessionExp = filtered.sort((a, b) => a.expiresAt - b.expiresAt).at(-1)?.expiresAt;\n\t\t\t\t\t\tif (filtered.length > 0 && furthestSessionExp && furthestSessionExp > Date.now()) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(filtered), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(`active-sessions-${userId}`);\n\t\t\t\t\t} else logger.error(\"Active sessions list not found in secondary storage\");\n\t\t\t\t}\n\t\t\t\tawait secondaryStorage.delete(token);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: token\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tdeleteAccounts: async (userId) => {\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteAccount: async (accountId) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: accountId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteSessions: async (userIdOrSessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tif (typeof userIdOrSessionTokens === \"string\") {\n\t\t\t\t\tconst activeSession = await secondaryStorage.get(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t\tconst sessions = activeSession ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(activeSession) : [];\n\t\t\t\t\tif (!sessions) return;\n\t\t\t\t\tfor (const session of sessions) await secondaryStorage.delete(session.token);\n\t\t\t\t\tawait secondaryStorage.delete(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t} else for (const sessionToken of userIdOrSessionTokens) if (await secondaryStorage.get(sessionToken)) await secondaryStorage.delete(sessionToken);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: Array.isArray(userIdOrSessionTokens) ? \"token\" : \"userId\",\n\t\t\t\tvalue: userIdOrSessionTokens,\n\t\t\t\toperator: Array.isArray(userIdOrSessionTokens) ? \"in\" : void 0\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tfindOAuthUser: async (email, accountId, providerId) => {\n\t\t\tconst account = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: accountId,\n\t\t\t\t\tfield: \"accountId\"\n\t\t\t\t}, {\n\t\t\t\t\tvalue: providerId,\n\t\t\t\t\tfield: \"providerId\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (account) if (account.user) return {\n\t\t\t\tuser: account.user,\n\t\t\t\tlinkedAccount: account,\n\t\t\t\taccounts: [account]\n\t\t\t};\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\tlinkedAccount: account,\n\t\t\t\t\taccounts: [account]\n\t\t\t\t};\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\tlinkedAccount: null,\n\t\t\t\t\taccounts: await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\t\t\tmodel: \"account\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tvalue: user.id,\n\t\t\t\t\t\t\tfield: \"userId\"\n\t\t\t\t\t\t}]\n\t\t\t\t\t}) || []\n\t\t\t\t};\n\t\t\t\telse return null;\n\t\t\t}\n\t\t},\n\t\tfindUserByEmail: async (email, options$1) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\tfield: \"email\"\n\t\t\t\t}],\n\t\t\t\tjoin: { ...options$1?.includeAccounts ? { account: true } : {} }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { account: accounts, ...user } = result;\n\t\t\treturn {\n\t\t\t\tuser,\n\t\t\t\taccounts: accounts ?? []\n\t\t\t};\n\t\t},\n\t\tfindUserById: async (userId) => {\n\t\t\tif (!userId) return null;\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlinkAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tupdateUser: async (userId, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdateUserByEmail: async (email, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"email\",\n\t\t\t\tvalue: email.toLowerCase()\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdatePassword: async (userId, password) => {\n\t\t\tawait updateManyWithHooks({ password }, [{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}, {\n\t\t\t\tfield: \"providerId\",\n\t\t\t\tvalue: \"credential\"\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tfindAccounts: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccount: async (accountId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByProviderId: async (accountId, providerId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"providerId\",\n\t\t\t\t\tvalue: providerId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByUserId: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tupdateAccount: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tcreateVerificationValue: async (data) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...data\n\t\t\t}, \"verification\", void 0);\n\t\t},\n\t\tfindVerificationValue: async (identifier) => {\n\t\t\tconst verification = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"verification\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"identifier\",\n\t\t\t\t\tvalue: identifier\n\t\t\t\t}],\n\t\t\t\tsortBy: {\n\t\t\t\t\tfield: \"createdAt\",\n\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t},\n\t\t\t\tlimit: 1\n\t\t\t});\n\t\t\tif (!options.verification?.disableCleanup) await deleteManyWithHooks([{\n\t\t\t\tfield: \"expiresAt\",\n\t\t\t\tvalue: /* @__PURE__ */ new Date(),\n\t\t\t\toperator: \"lt\"\n\t\t\t}], \"verification\", void 0);\n\t\t\treturn verification[0];\n\t\t},\n\t\tdeleteVerificationValue: async (id) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tdeleteVerificationByIdentifier: async (identifier) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"identifier\",\n\t\t\t\tvalue: identifier\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tupdateVerificationValue: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=internal-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvaW50ZXJuYWwtYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE0QztBQUNRO0FBQ2tDO0FBQ3RDO0FBQ3lEO0FBQ3JDOztBQUVwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhGQUE4RixFQUFFLDZEQUFZO0FBQ3JIO0FBQ0E7QUFDQSxnRUFBZ0UsUUFBUTtBQUN4RTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFhO0FBQ3RDLCtDQUErQyxPQUFPO0FBQ3REO0FBQ0E7QUFDQSxrQkFBa0Isc0VBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsVUFBVSw2RUFBa0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLHNFQUFzRSxPQUFPO0FBQzdFO0FBQ0EsaUJBQWlCLHNFQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0RBQWtCO0FBQ3RDO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsOEJBQThCLDRFQUFpQjtBQUMvQztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsZ0ZBQXFCO0FBQzVDO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsbUNBQW1DLDhEQUFpQixzQ0FBc0M7QUFDMUY7QUFDQSxrREFBa0QsZ0VBQUs7QUFDdkQ7QUFDQTtBQUNBLGdDQUFnQyx3REFBTyxxQkFBcUIsd0RBQU87QUFDbkU7QUFDQSxXQUFXLG1FQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsT0FBTztBQUM5RTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNFQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLCtFQUErRSxPQUFPO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzRUFBYTtBQUM1QjtBQUNBO0FBQ0EsZUFBZSwrREFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsWUFBWSw0REFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDRFQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0EsV0FBVyxtQkFBbUI7QUFDOUI7QUFDQTtBQUNBLGFBQWEsK0RBQWtCO0FBQy9CLFVBQVUsNERBQWU7QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNEVBQWlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNFQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHlDQUF5QyxzQkFBc0I7QUFDL0Q7QUFDQSxnQ0FBZ0Msc0VBQWE7QUFDN0M7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVSxFQUFFLHNFQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsT0FBTztBQUM5RTtBQUNBLG1CQUFtQixzRUFBYTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxzSUFBc0ksT0FBTztBQUM3SSw0REFBNEQsT0FBTztBQUNuRSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLHNCQUFzQjtBQUMvRixzQ0FBc0Msc0VBQWE7QUFDbkQ7QUFDQTtBQUNBLHNEQUFzRCxzQkFBc0I7QUFDNUUsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxnQ0FBZ0MsNEVBQWlCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNEVBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDRFQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRFQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0JBQStCLDRFQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLGtDQUFrQyxnQkFBZ0I7QUFDOUQsSUFBSTtBQUNKO0FBQ0EsV0FBVyw2QkFBNkI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwrQkFBK0IsVUFBVTtBQUN6QztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EscUNBQXFDLDRFQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGludGVybmFsLWFkYXB0ZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IGdldElwIH0gZnJvbSBcIi4uL3V0aWxzL2dldC1yZXF1ZXN0LWlwLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTZXNzaW9uSW5wdXQsIHBhcnNlU2Vzc2lvbk91dHB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2l0aEhvb2tzIH0gZnJvbSBcIi4vd2l0aC1ob29rcy5tanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRBZGFwdGVyLCBnZXRDdXJyZW50QXV0aENvbnRleHQsIHJ1bldpdGhUcmFuc2FjdGlvbiB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkLCBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvaW50ZXJuYWwtYWRhcHRlci50c1xuY29uc3QgY3JlYXRlSW50ZXJuYWxBZGFwdGVyID0gKGFkYXB0ZXIsIGN0eCkgPT4ge1xuXHRjb25zdCBsb2dnZXIgPSBjdHgubG9nZ2VyO1xuXHRjb25zdCBvcHRpb25zID0gY3R4Lm9wdGlvbnM7XG5cdGNvbnN0IHNlY29uZGFyeVN0b3JhZ2UgPSBvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2U7XG5cdGNvbnN0IHNlc3Npb25FeHBpcmF0aW9uID0gb3B0aW9ucy5zZXNzaW9uPy5leHBpcmVzSW4gfHwgMzYwMCAqIDI0ICogNztcblx0Y29uc3QgeyBjcmVhdGVXaXRoSG9va3MsIHVwZGF0ZVdpdGhIb29rcywgdXBkYXRlTWFueVdpdGhIb29rcywgZGVsZXRlV2l0aEhvb2tzLCBkZWxldGVNYW55V2l0aEhvb2tzIH0gPSBnZXRXaXRoSG9va3MoYWRhcHRlciwgY3R4KTtcblx0YXN5bmMgZnVuY3Rpb24gcmVmcmVzaFVzZXJTZXNzaW9ucyh1c2VyKSB7XG5cdFx0aWYgKCFzZWNvbmRhcnlTdG9yYWdlKSByZXR1cm47XG5cdFx0Y29uc3QgbGlzdFJhdyA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VyLmlkfWApO1xuXHRcdGlmICghbGlzdFJhdykgcmV0dXJuO1xuXHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0Y29uc3QgdmFsaWRTZXNzaW9ucyA9IChzYWZlSlNPTlBhcnNlKGxpc3RSYXcpIHx8IFtdKS5maWx0ZXIoKHMpID0+IHMuZXhwaXJlc0F0ID4gbm93KTtcblx0XHRhd2FpdCBQcm9taXNlLmFsbCh2YWxpZFNlc3Npb25zLm1hcChhc3luYyAoeyB0b2tlbiB9KSA9PiB7XG5cdFx0XHRjb25zdCBjYWNoZWQgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG5cdFx0XHRpZiAoIWNhY2hlZCkgcmV0dXJuO1xuXHRcdFx0Y29uc3QgcGFyc2VkID0gc2FmZUpTT05QYXJzZShjYWNoZWQpO1xuXHRcdFx0aWYgKCFwYXJzZWQpIHJldHVybjtcblx0XHRcdGNvbnN0IHNlc3Npb25UVEwgPSBNYXRoLm1heChNYXRoLmZsb29yKG5ldyBEYXRlKHBhcnNlZC5zZXNzaW9uLmV4cGlyZXNBdCkuZ2V0VGltZSgpIC0gbm93KSAvIDFlMywgMCk7XG5cdFx0XHRhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldCh0b2tlbiwgSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRzZXNzaW9uOiBwYXJzZWQuc2Vzc2lvbixcblx0XHRcdFx0dXNlclxuXHRcdFx0fSksIE1hdGguZmxvb3Ioc2Vzc2lvblRUTCkpO1xuXHRcdH0pKTtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdGNyZWF0ZU9BdXRoVXNlcjogYXN5bmMgKHVzZXIsIGFjY291bnQpID0+IHtcblx0XHRcdHJldHVybiBydW5XaXRoVHJhbnNhY3Rpb24oYWRhcHRlciwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyh7XG5cdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdC4uLnVzZXJcblx0XHRcdFx0fSwgXCJ1c2VyXCIsIHZvaWQgMCk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dXNlcjogY3JlYXRlZFVzZXIsXG5cdFx0XHRcdFx0YWNjb3VudDogYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0XHRcdC4uLmFjY291bnQsXG5cdFx0XHRcdFx0XHR1c2VySWQ6IGNyZWF0ZWRVc2VyLmlkLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0XHR9LCBcImFjY291bnRcIiwgdm9pZCAwKVxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRjcmVhdGVVc2VyOiBhc3luYyAodXNlcikgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IGNyZWF0ZVdpdGhIb29rcyh7XG5cdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdC4uLnVzZXIsXG5cdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsPy50b0xvd2VyQ2FzZSgpXG5cdFx0XHR9LCBcInVzZXJcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGNyZWF0ZUFjY291bnQ6IGFzeW5jIChhY2NvdW50KSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0Li4uYWNjb3VudFxuXHRcdFx0fSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRsaXN0U2Vzc2lvbnM6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRMaXN0ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gKTtcblx0XHRcdFx0aWYgKCFjdXJyZW50TGlzdCkgcmV0dXJuIFtdO1xuXHRcdFx0XHRjb25zdCBsaXN0ID0gc2FmZUpTT05QYXJzZShjdXJyZW50TGlzdCkgfHwgW107XG5cdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdGNvbnN0IHNlZW5Ub2tlbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRcdFx0XHRjb25zdCBzZXNzaW9ucyA9IFtdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHsgdG9rZW4sIGV4cGlyZXNBdCB9IG9mIGxpc3QpIHtcblx0XHRcdFx0XHRpZiAoZXhwaXJlc0F0IDw9IG5vdyB8fCBzZWVuVG9rZW5zLmhhcyh0b2tlbikpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdHNlZW5Ub2tlbnMuYWRkKHRva2VuKTtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQodG9rZW4pO1xuXHRcdFx0XHRcdGlmICghZGF0YSkgY29udGludWU7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZCA9IHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gSlNPTi5wYXJzZShkYXRhKSA6IGRhdGE7XG5cdFx0XHRcdFx0XHRpZiAoIXBhcnNlZD8uc2Vzc2lvbikgY29udGludWU7XG5cdFx0XHRcdFx0XHRzZXNzaW9ucy5wdXNoKHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0XHQuLi5wYXJzZWQuc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShwYXJzZWQuc2Vzc2lvbi5leHBpcmVzQXQpXG5cdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHNlc3Npb25zO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJzZXNzaW9uXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bGlzdFVzZXJzOiBhc3luYyAobGltaXQsIG9mZnNldCwgc29ydEJ5LCB3aGVyZSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdGxpbWl0LFxuXHRcdFx0XHRvZmZzZXQsXG5cdFx0XHRcdHNvcnRCeSxcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y291bnRUb3RhbFVzZXJzOiBhc3luYyAod2hlcmUpID0+IHtcblx0XHRcdGNvbnN0IHRvdGFsID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5jb3VudCh7XG5cdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHR5cGVvZiB0b3RhbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHBhcnNlSW50KHRvdGFsKTtcblx0XHRcdHJldHVybiB0b3RhbDtcblx0XHR9LFxuXHRcdGRlbGV0ZVVzZXI6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdGlmICghc2Vjb25kYXJ5U3RvcmFnZSB8fCBvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UpIGF3YWl0IGRlbGV0ZU1hbnlXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH1dLCBcInNlc3Npb25cIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IGRlbGV0ZU1hbnlXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH1dLCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IGRlbGV0ZVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJ1c2VyXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRjcmVhdGVTZXNzaW9uOiBhc3luYyAodXNlcklkLCBkb250UmVtZW1iZXJNZSwgb3ZlcnJpZGUsIG92ZXJyaWRlQWxsKSA9PiB7XG5cdFx0XHRjb25zdCBjdHgkMSA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdFx0Y29uc3QgaGVhZGVycyA9IGN0eCQxPy5oZWFkZXJzIHx8IGN0eCQxPy5yZXF1ZXN0Py5oZWFkZXJzO1xuXHRcdFx0Y29uc3QgeyBpZDogXywgLi4ucmVzdCB9ID0gb3ZlcnJpZGUgfHwge307XG5cdFx0XHRjb25zdCBkZWZhdWx0QWRkaXRpb25hbEZpZWxkcyA9IHBhcnNlU2Vzc2lvbklucHV0KGN0eCQxPy5jb250ZXh0Lm9wdGlvbnMgPz8gb3B0aW9ucywge30pO1xuXHRcdFx0Y29uc3QgZGF0YSA9IHtcblx0XHRcdFx0aXBBZGRyZXNzOiBjdHgkMT8ucmVxdWVzdCB8fCBjdHgkMT8uaGVhZGVycyA/IGdldElwKGN0eCQxPy5yZXF1ZXN0IHx8IGN0eCQxPy5oZWFkZXJzLCBjdHgkMT8uY29udGV4dC5vcHRpb25zKSB8fCBcIlwiIDogXCJcIixcblx0XHRcdFx0dXNlckFnZW50OiBoZWFkZXJzPy5nZXQoXCJ1c2VyLWFnZW50XCIpIHx8IFwiXCIsXG5cdFx0XHRcdC4uLnJlc3QsXG5cdFx0XHRcdGV4cGlyZXNBdDogZG9udFJlbWVtYmVyTWUgPyBnZXREYXRlKDM2MDAgKiAyNCwgXCJzZWNcIikgOiBnZXREYXRlKHNlc3Npb25FeHBpcmF0aW9uLCBcInNlY1wiKSxcblx0XHRcdFx0dXNlcklkLFxuXHRcdFx0XHR0b2tlbjogZ2VuZXJhdGVJZCgzMiksXG5cdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdC4uLmRlZmF1bHRBZGRpdGlvbmFsRmllbGRzLFxuXHRcdFx0XHQuLi5vdmVycmlkZUFsbCA/IHJlc3QgOiB7fVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3MoZGF0YSwgXCJzZXNzaW9uXCIsIHNlY29uZGFyeVN0b3JhZ2UgPyB7XG5cdFx0XHRcdGZuOiBhc3luYyAoc2Vzc2lvbkRhdGEpID0+IHtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQqIHN0b3JlIHRoZSBzZXNzaW9uIHRva2VuIGZvciB0aGUgdXNlclxuXHRcdFx0XHRcdCogc28gd2UgY2FuIHJldHJpZXZlIGl0IGxhdGVyIGZvciBsaXN0aW5nIHNlc3Npb25zXG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TGlzdCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCk7XG5cdFx0XHRcdFx0bGV0IGxpc3QgPSBbXTtcblx0XHRcdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TGlzdCkge1xuXHRcdFx0XHRcdFx0bGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuXHRcdFx0XHRcdFx0bGlzdCA9IGxpc3QuZmlsdGVyKChzZXNzaW9uKSA9PiBzZXNzaW9uLmV4cGlyZXNBdCA+IG5vdyAmJiBzZXNzaW9uLnRva2VuICE9PSBkYXRhLnRva2VuKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3Qgc29ydGVkID0gWy4uLmxpc3QsIHtcblx0XHRcdFx0XHRcdHRva2VuOiBkYXRhLnRva2VuLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBkYXRhLmV4cGlyZXNBdC5nZXRUaW1lKClcblx0XHRcdFx0XHR9XS5zb3J0KChhLCBiKSA9PiBhLmV4cGlyZXNBdCAtIGIuZXhwaXJlc0F0KTtcblx0XHRcdFx0XHRjb25zdCBmdXJ0aGVzdFNlc3Npb25FeHAgPSBzb3J0ZWQuYXQoLTEpPy5leHBpcmVzQXQgPz8gZGF0YS5leHBpcmVzQXQuZ2V0VGltZSgpO1xuXHRcdFx0XHRcdGNvbnN0IGZ1cnRoZXN0U2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IoKGZ1cnRoZXN0U2Vzc2lvbkV4cCAtIG5vdykgLyAxZTMpLCAwKTtcblx0XHRcdFx0XHRpZiAoZnVydGhlc3RTZXNzaW9uVFRMID4gMCkgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gLCBKU09OLnN0cmluZ2lmeShzb3J0ZWQpLCBmdXJ0aGVzdFNlc3Npb25UVEwpO1xuXHRcdFx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IoKGRhdGEuZXhwaXJlc0F0LmdldFRpbWUoKSAtIG5vdykgLyAxZTMpLCAwKTtcblx0XHRcdFx0XHRpZiAoc2Vzc2lvblRUTCA+IDApIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGRhdGEudG9rZW4sIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHNlc3Npb25EYXRhLFxuXHRcdFx0XHRcdFx0dXNlclxuXHRcdFx0XHRcdH0pLCBzZXNzaW9uVFRMKTtcblx0XHRcdFx0XHRyZXR1cm4gc2Vzc2lvbkRhdGE7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGV4ZWN1dGVNYWluRm46IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZVxuXHRcdFx0fSA6IHZvaWQgMCk7XG5cdFx0fSxcblx0XHRmaW5kU2Vzc2lvbjogYXN5bmMgKHRva2VuKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uU3RyaW5naWZpZWQgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG5cdFx0XHRcdGlmICghc2Vzc2lvblN0cmluZ2lmaWVkICYmICFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAoc2Vzc2lvblN0cmluZ2lmaWVkKSB7XG5cdFx0XHRcdFx0Y29uc3QgcyA9IHNhZmVKU09OUGFyc2Uoc2Vzc2lvblN0cmluZ2lmaWVkKTtcblx0XHRcdFx0XHRpZiAoIXMpIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucy5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi5leHBpcmVzQXQpLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHgub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0XHQuLi5zLnVzZXIsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocy51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocy51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwic2Vzc2lvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHR2YWx1ZTogdG9rZW4sXG5cdFx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyB1c2VyOiB0cnVlIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyB1c2VyLCAuLi5zZXNzaW9uIH0gPSByZXN1bHQ7XG5cdFx0XHRpZiAoIXVzZXIpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c2Vzc2lvbjogcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5vcHRpb25zLCBzZXNzaW9uKSxcblx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5vcHRpb25zLCB1c2VyKVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGZpbmRTZXNzaW9uczogYXN5bmMgKHNlc3Npb25Ub2tlbnMpID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb25zJDEgPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBzZXNzaW9uVG9rZW4gb2Ygc2Vzc2lvblRva2Vucykge1xuXHRcdFx0XHRcdGNvbnN0IHNlc3Npb25TdHJpbmdpZmllZCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHNlc3Npb25Ub2tlbik7XG5cdFx0XHRcdFx0aWYgKHNlc3Npb25TdHJpbmdpZmllZCkgdHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IHMgPSB0eXBlb2Ygc2Vzc2lvblN0cmluZ2lmaWVkID09PSBcInN0cmluZ1wiID8gSlNPTi5wYXJzZShzZXNzaW9uU3RyaW5naWZpZWQpIDogc2Vzc2lvblN0cmluZ2lmaWVkO1xuXHRcdFx0XHRcdFx0aWYgKCFzPy5zZXNzaW9uKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdGNvbnN0IHNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHtcblx0XHRcdFx0XHRcdFx0XHQuLi5zLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShzLnNlc3Npb24uZXhwaXJlc0F0KVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdFx0Li4ucy51c2VyLFxuXHRcdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocy51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzLnVzZXIudXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0c2Vzc2lvbnMkMS5wdXNoKHNlc3Npb24pO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXNzaW9ucyQxO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwic2Vzc2lvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ0b2tlblwiLFxuXHRcdFx0XHRcdHZhbHVlOiBzZXNzaW9uVG9rZW5zLFxuXHRcdFx0XHRcdG9wZXJhdG9yOiBcImluXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdXNlcjogdHJ1ZSB9XG5cdFx0XHR9KTtcblx0XHRcdGlmICghc2Vzc2lvbnMubGVuZ3RoKSByZXR1cm4gW107XG5cdFx0XHRpZiAoc2Vzc2lvbnMuc29tZSgoc2Vzc2lvbikgPT4gIXNlc3Npb24udXNlcikpIHJldHVybiBbXTtcblx0XHRcdHJldHVybiBzZXNzaW9ucy5tYXAoKF9zZXNzaW9uKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgdXNlciwgLi4uc2Vzc2lvbiB9ID0gX3Nlc3Npb247XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0c2Vzc2lvbixcblx0XHRcdFx0XHR1c2VyXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHVwZGF0ZVNlc3Npb246IGFzeW5jIChzZXNzaW9uVG9rZW4sIHNlc3Npb24pID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCB1cGRhdGVXaXRoSG9va3Moc2Vzc2lvbiwgW3tcblx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIixcblx0XHRcdFx0dmFsdWU6IHNlc3Npb25Ub2tlblxuXHRcdFx0fV0sIFwic2Vzc2lvblwiLCBzZWNvbmRhcnlTdG9yYWdlID8ge1xuXHRcdFx0XHRhc3luYyBmbihkYXRhKSB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFNlc3Npb24gPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNlc3Npb24pIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnNlZFNlc3Npb24gPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRTZXNzaW9uKTtcblx0XHRcdFx0XHRpZiAoIXBhcnNlZFNlc3Npb24pIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IG1lcmdlZFNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHQuLi5wYXJzZWRTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShkYXRhLmV4cGlyZXNBdCA/PyBwYXJzZWRTZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocGFyc2VkU2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKGRhdGEudXBkYXRlZEF0ID8/IHBhcnNlZFNlc3Npb24uc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywgbWVyZ2VkU2Vzc2lvbik7XG5cdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRjb25zdCBleHBpcmVzTXMgPSBuZXcgRGF0ZSh1cGRhdGVkU2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKTtcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uVFRMID0gTWF0aC5tYXgoTWF0aC5mbG9vcigoZXhwaXJlc01zIC0gbm93KSAvIDFlMyksIDApO1xuXHRcdFx0XHRcdGlmIChzZXNzaW9uVFRMID4gMCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQoc2Vzc2lvblRva2VuLCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHVwZGF0ZWRTZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHR1c2VyOiBwYXJzZWRTZXNzaW9uLnVzZXJcblx0XHRcdFx0XHRcdH0pLCBzZXNzaW9uVFRMKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxpc3RLZXkgPSBgYWN0aXZlLXNlc3Npb25zLSR7dXBkYXRlZFNlc3Npb24udXNlcklkfWA7XG5cdFx0XHRcdFx0XHRjb25zdCBsaXN0UmF3ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQobGlzdEtleSk7XG5cdFx0XHRcdFx0XHRjb25zdCBzb3J0ZWQgPSAobGlzdFJhdyA/IHNhZmVKU09OUGFyc2UobGlzdFJhdykgfHwgW10gOiBbXSkuZmlsdGVyKChzKSA9PiBzLnRva2VuICE9PSBzZXNzaW9uVG9rZW4gJiYgcy5leHBpcmVzQXQgPiBub3cpLmNvbmNhdChbe1xuXHRcdFx0XHRcdFx0XHR0b2tlbjogc2Vzc2lvblRva2VuLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IGV4cGlyZXNNc1xuXHRcdFx0XHRcdFx0fV0pLnNvcnQoKGEsIGIpID0+IGEuZXhwaXJlc0F0IC0gYi5leHBpcmVzQXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgZnVydGhlc3RTZXNzaW9uRXhwID0gc29ydGVkLmF0KC0xKT8uZXhwaXJlc0F0O1xuXHRcdFx0XHRcdFx0aWYgKGZ1cnRoZXN0U2Vzc2lvbkV4cCAmJiBmdXJ0aGVzdFNlc3Npb25FeHAgPiBub3cpIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGxpc3RLZXksIEpTT04uc3RyaW5naWZ5KHNvcnRlZCksIE1hdGguZmxvb3IoKGZ1cnRoZXN0U2Vzc2lvbkV4cCAtIG5vdykgLyAxZTMpKTtcblx0XHRcdFx0XHRcdGVsc2UgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5kZWxldGUobGlzdEtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB1cGRhdGVkU2Vzc2lvbjtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXhlY3V0ZU1haW5Gbjogb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlXG5cdFx0XHR9IDogdm9pZCAwKTtcblx0XHR9LFxuXHRcdGRlbGV0ZVNlc3Npb246IGFzeW5jICh0b2tlbikgPT4ge1xuXHRcdFx0aWYgKHNlY29uZGFyeVN0b3JhZ2UpIHtcblx0XHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHRva2VuKTtcblx0XHRcdFx0aWYgKGRhdGEpIHtcblx0XHRcdFx0XHRjb25zdCB7IHNlc3Npb24gfSA9IHNhZmVKU09OUGFyc2UoZGF0YSkgPz8ge307XG5cdFx0XHRcdFx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoXCJTZXNzaW9uIG5vdCBmb3VuZCBpbiBzZWNvbmRhcnkgc3RvcmFnZVwiKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgdXNlcklkID0gc2Vzc2lvbi51c2VySWQ7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudExpc3QgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TGlzdCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbHRlcmVkID0gbGlzdC5maWx0ZXIoKHNlc3Npb24kMSkgPT4gc2Vzc2lvbiQxLmV4cGlyZXNBdCA+IG5vdyAmJiBzZXNzaW9uJDEudG9rZW4gIT09IHRva2VuKTtcblx0XHRcdFx0XHRcdGNvbnN0IGZ1cnRoZXN0U2Vzc2lvbkV4cCA9IGZpbHRlcmVkLnNvcnQoKGEsIGIpID0+IGEuZXhwaXJlc0F0IC0gYi5leHBpcmVzQXQpLmF0KC0xKT8uZXhwaXJlc0F0O1xuXHRcdFx0XHRcdFx0aWYgKGZpbHRlcmVkLmxlbmd0aCA+IDAgJiYgZnVydGhlc3RTZXNzaW9uRXhwICYmIGZ1cnRoZXN0U2Vzc2lvbkV4cCA+IERhdGUubm93KCkpIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCwgSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWQpLCBNYXRoLmZsb29yKChmdXJ0aGVzdFNlc3Npb25FeHAgLSBub3cpIC8gMWUzKSk7XG5cdFx0XHRcdFx0XHRlbHNlIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCk7XG5cdFx0XHRcdFx0fSBlbHNlIGxvZ2dlci5lcnJvcihcIkFjdGl2ZSBzZXNzaW9ucyBsaXN0IG5vdCBmb3VuZCBpbiBzZWNvbmRhcnkgc3RvcmFnZVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZSh0b2tlbik7XG5cdFx0XHRcdGlmICghb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlIHx8IGN0eC5vcHRpb25zLnNlc3Npb24/LnByZXNlcnZlU2Vzc2lvbkluRGF0YWJhc2UpIHJldHVybjtcblx0XHRcdH1cblx0XHRcdGF3YWl0IGRlbGV0ZVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJ0b2tlblwiLFxuXHRcdFx0XHR2YWx1ZTogdG9rZW5cblx0XHRcdH1dLCBcInNlc3Npb25cIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGRlbGV0ZUFjY291bnRzOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVBY2NvdW50OiBhc3luYyAoYWNjb3VudElkKSA9PiB7XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IGFjY291bnRJZFxuXHRcdFx0fV0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZGVsZXRlU2Vzc2lvbnM6IGFzeW5jICh1c2VySWRPclNlc3Npb25Ub2tlbnMpID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdXNlcklkT3JTZXNzaW9uVG9rZW5zID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0Y29uc3QgYWN0aXZlU2Vzc2lvbiA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWRPclNlc3Npb25Ub2tlbnN9YCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvbnMgPSBhY3RpdmVTZXNzaW9uID8gc2FmZUpTT05QYXJzZShhY3RpdmVTZXNzaW9uKSA6IFtdO1xuXHRcdFx0XHRcdGlmICghc2Vzc2lvbnMpIHJldHVybjtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHNlc3Npb24gb2Ygc2Vzc2lvbnMpIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKHNlc3Npb24udG9rZW4pO1xuXHRcdFx0XHRcdGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWRPclNlc3Npb25Ub2tlbnN9YCk7XG5cdFx0XHRcdH0gZWxzZSBmb3IgKGNvbnN0IHNlc3Npb25Ub2tlbiBvZiB1c2VySWRPclNlc3Npb25Ub2tlbnMpIGlmIChhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChzZXNzaW9uVG9rZW4pKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSB8fCBjdHgub3B0aW9ucy5zZXNzaW9uPy5wcmVzZXJ2ZVNlc3Npb25JbkRhdGFiYXNlKSByZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBBcnJheS5pc0FycmF5KHVzZXJJZE9yU2Vzc2lvblRva2VucykgPyBcInRva2VuXCIgOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkT3JTZXNzaW9uVG9rZW5zLFxuXHRcdFx0XHRvcGVyYXRvcjogQXJyYXkuaXNBcnJheSh1c2VySWRPclNlc3Npb25Ub2tlbnMpID8gXCJpblwiIDogdm9pZCAwXG5cdFx0XHR9XSwgXCJzZXNzaW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRmaW5kT0F1dGhVc2VyOiBhc3luYyAoZW1haWwsIGFjY291bnRJZCwgcHJvdmlkZXJJZCkgPT4ge1xuXHRcdFx0Y29uc3QgYWNjb3VudCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcImFjY291bnRcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0dmFsdWU6IGFjY291bnRJZCxcblx0XHRcdFx0XHRmaWVsZDogXCJhY2NvdW50SWRcIlxuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0dmFsdWU6IHByb3ZpZGVySWQsXG5cdFx0XHRcdFx0ZmllbGQ6IFwicHJvdmlkZXJJZFwiXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRqb2luOiB7IHVzZXI6IHRydWUgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoYWNjb3VudCkgaWYgKGFjY291bnQudXNlcikgcmV0dXJuIHtcblx0XHRcdFx0dXNlcjogYWNjb3VudC51c2VyLFxuXHRcdFx0XHRsaW5rZWRBY2NvdW50OiBhY2NvdW50LFxuXHRcdFx0XHRhY2NvdW50czogW2FjY291bnRdXG5cdFx0XHR9O1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdHZhbHVlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIlxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAodXNlcikgcmV0dXJuIHtcblx0XHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRcdGxpbmtlZEFjY291bnQ6IGFjY291bnQsXG5cdFx0XHRcdFx0YWNjb3VudHM6IFthY2NvdW50XVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHR2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCJcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHVzZXIpIHJldHVybiB7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHRsaW5rZWRBY2NvdW50OiBudWxsLFxuXHRcdFx0XHRcdGFjY291bnRzOiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcImFjY291bnRcIixcblx0XHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdXNlci5pZCxcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCJcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fSkgfHwgW11cblx0XHRcdFx0fTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGZpbmRVc2VyQnlFbWFpbDogYXN5bmMgKGVtYWlsLCBvcHRpb25zJDEpID0+IHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyAuLi5vcHRpb25zJDE/LmluY2x1ZGVBY2NvdW50cyA/IHsgYWNjb3VudDogdHJ1ZSB9IDoge30gfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIXJlc3VsdCkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB7IGFjY291bnQ6IGFjY291bnRzLCAuLi51c2VyIH0gPSByZXN1bHQ7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRhY2NvdW50czogYWNjb3VudHMgPz8gW11cblx0XHRcdH07XG5cdFx0fSxcblx0XHRmaW5kVXNlckJ5SWQ6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdGlmICghdXNlcklkKSByZXR1cm4gbnVsbDtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRsaW5rQWNjb3VudDogYXN5bmMgKGFjY291bnQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5hY2NvdW50XG5cdFx0XHR9LCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdHVwZGF0ZVVzZXI6IGFzeW5jICh1c2VySWQsIGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB1cGRhdGVXaXRoSG9va3MoZGF0YSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0fV0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdFx0YXdhaXQgcmVmcmVzaFVzZXJTZXNzaW9ucyh1c2VyKTtcblx0XHRcdHJldHVybiB1c2VyO1xuXHRcdH0sXG5cdFx0dXBkYXRlVXNlckJ5RW1haWw6IGFzeW5jIChlbWFpbCwgZGF0YSkgPT4ge1xuXHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IHVwZGF0ZVdpdGhIb29rcyhkYXRhLCBbe1xuXHRcdFx0XHRmaWVsZDogXCJlbWFpbFwiLFxuXHRcdFx0XHR2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKVxuXHRcdFx0fV0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdFx0YXdhaXQgcmVmcmVzaFVzZXJTZXNzaW9ucyh1c2VyKTtcblx0XHRcdHJldHVybiB1c2VyO1xuXHRcdH0sXG5cdFx0dXBkYXRlUGFzc3dvcmQ6IGFzeW5jICh1c2VySWQsIHBhc3N3b3JkKSA9PiB7XG5cdFx0XHRhd2FpdCB1cGRhdGVNYW55V2l0aEhvb2tzKHsgcGFzc3dvcmQgfSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH0sIHtcblx0XHRcdFx0ZmllbGQ6IFwicHJvdmlkZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogXCJjcmVkZW50aWFsXCJcblx0XHRcdH1dLCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGZpbmRBY2NvdW50czogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEFjY291bnQ6IGFzeW5jIChhY2NvdW50SWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImFjY291bnRJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEFjY291bnRCeVByb3ZpZGVySWQ6IGFzeW5jIChhY2NvdW50SWQsIHByb3ZpZGVySWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImFjY291bnRJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWRcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdGZpZWxkOiBcInByb3ZpZGVySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogcHJvdmlkZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRmaW5kQWNjb3VudEJ5VXNlcklkOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcImFjY291bnRcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR1cGRhdGVBY2NvdW50OiBhc3luYyAoaWQsIGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCB1cGRhdGVXaXRoSG9va3MoZGF0YSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IGlkXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRjcmVhdGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5kYXRhXG5cdFx0XHR9LCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZmluZFZlcmlmaWNhdGlvblZhbHVlOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuXHRcdFx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInZlcmlmaWNhdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZGVudGlmaWVyXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGlkZW50aWZpZXJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHNvcnRCeToge1xuXHRcdFx0XHRcdGZpZWxkOiBcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdGRpcmVjdGlvbjogXCJkZXNjXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bGltaXQ6IDFcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFvcHRpb25zLnZlcmlmaWNhdGlvbj8uZGlzYWJsZUNsZWFudXApIGF3YWl0IGRlbGV0ZU1hbnlXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiZXhwaXJlc0F0XCIsXG5cdFx0XHRcdHZhbHVlOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0b3BlcmF0b3I6IFwibHRcIlxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0XHRyZXR1cm4gdmVyaWZpY2F0aW9uWzBdO1xuXHRcdH0sXG5cdFx0ZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWU6IGFzeW5jIChpZCkgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlV2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVWZXJpZmljYXRpb25CeUlkZW50aWZpZXI6IGFzeW5jIChpZGVudGlmaWVyKSA9PiB7XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRlbnRpZmllclwiLFxuXHRcdFx0XHR2YWx1ZTogaWRlbnRpZmllclxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHR1cGRhdGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGlkLCBkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKGRhdGEsIFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVybmFsLWFkYXB0ZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeSchema: () => (/* binding */ mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* binding */ parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* binding */ parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* binding */ parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* binding */ parseInputData),\n/* harmony export */   parseSessionInput: () => (/* binding */ parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* binding */ parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* binding */ parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* binding */ parseUserOutput)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n\n\n\n//#region src/db/schema.ts\nconst cache = /* @__PURE__ */ new WeakMap();\nfunction parseOutputData(data, schema) {\n\tconst fields = schema.fields;\n\tconst parsedData = {};\n\tfor (const key in data) {\n\t\tconst field = fields[key];\n\t\tif (!field) {\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (field.returned === false && key !== \"id\") continue;\n\t\tparsedData[key] = data[key];\n\t}\n\treturn parsedData;\n}\nfunction getFields(options, table, mode) {\n\tconst cacheKey = `${table}:${mode}`;\n\tif (!cache.has(options)) cache.set(options, /* @__PURE__ */ new Map());\n\tconst tableCache = cache.get(options);\n\tif (tableCache.has(cacheKey)) return tableCache.get(cacheKey);\n\tconst coreSchema = mode === \"output\" ? (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options)[table]?.fields ?? {} : {};\n\tconst additionalFields = table === \"user\" || table === \"session\" || table === \"account\" ? options[table]?.additionalFields : void 0;\n\tlet schema = {\n\t\t...coreSchema,\n\t\t...additionalFields ?? {}\n\t};\n\tfor (const plugin of options.plugins || []) if (plugin.schema && plugin.schema[table]) schema = {\n\t\t...schema,\n\t\t...plugin.schema[table].fields\n\t};\n\ttableCache.set(cacheKey, schema);\n\treturn schema;\n}\nfunction parseUserOutput(options, user) {\n\treturn parseOutputData(user, { fields: getFields(options, \"user\", \"output\") });\n}\nfunction parseSessionOutput(options, session) {\n\treturn parseOutputData(session, { fields: getFields(options, \"session\", \"output\") });\n}\nfunction parseAccountOutput(options, account) {\n\tconst { accessToken: _accessToken, refreshToken: _refreshToken, idToken: _idToken, accessTokenExpiresAt: _accessTokenExpiresAt, refreshTokenExpiresAt: _refreshTokenExpiresAt, password: _password, ...rest } = parseOutputData(account, { fields: getFields(options, \"account\", \"output\") });\n\treturn rest;\n}\nfunction parseInputData(data, schema) {\n\tconst action = schema.action || \"create\";\n\tconst fields = schema.fields;\n\tconst parsedData = Object.assign(Object.create(null), null);\n\tfor (const key in fields) {\n\t\tif (key in data) {\n\t\t\tif (fields[key].input === false) {\n\t\t\t\tif (fields[key].defaultValue !== void 0) {\n\t\t\t\t\tif (action !== \"update\") {\n\t\t\t\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (data[key]) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is not allowed to be set` });\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].validator?.input && data[key] !== void 0) {\n\t\t\t\tconst result = fields[key].validator.input[\"~standard\"].validate(data[key]);\n\t\t\t\tif (result instanceof Promise) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Async validation is not supported for additional fields\" });\n\t\t\t\tif (\"issues\" in result && result.issues) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: result.issues[0]?.message || \"Validation Error\" });\n\t\t\t\tparsedData[key] = result.value;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].transform?.input && data[key] !== void 0) {\n\t\t\t\tparsedData[key] = fields[key].transform?.input(data[key]);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].defaultValue !== void 0 && action === \"create\") {\n\t\t\tif (typeof fields[key].defaultValue === \"function\") {\n\t\t\t\tparsedData[key] = fields[key].defaultValue();\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].required && action === \"create\") throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is required` });\n\t}\n\treturn parsedData;\n}\nfunction parseUserInput(options, user = {}, action) {\n\treturn parseInputData(user, {\n\t\tfields: getFields(options, \"user\", \"input\"),\n\t\taction\n\t});\n}\nfunction parseAdditionalUserInput(options, user) {\n\tconst schema = getFields(options, \"user\", \"input\");\n\treturn parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n\treturn parseInputData(account, { fields: getFields(options, \"account\", \"input\") });\n}\nfunction parseSessionInput(options, session) {\n\treturn parseInputData(session, { fields: getFields(options, \"session\", \"input\") });\n}\nfunction mergeSchema(schema, newSchema) {\n\tif (!newSchema) return schema;\n\tfor (const table in newSchema) {\n\t\tconst newModelName = newSchema[table]?.modelName;\n\t\tif (newModelName) schema[table].modelName = newModelName;\n\t\tfor (const field in schema[table].fields) {\n\t\t\tconst newField = newSchema[table]?.fields?.[field];\n\t\t\tif (!newField) continue;\n\t\t\tschema[table].fields[field].fieldName = newField;\n\t\t}\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFxRDtBQUNkOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLE1BQU0sR0FBRyxLQUFLO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxtRUFBYSwrQkFBK0I7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsOENBQThDO0FBQzlFO0FBQ0E7QUFDQSxtQ0FBbUMsaURBQWlEO0FBQ3BGO0FBQ0E7QUFDQSxTQUFTLHNNQUFzTSw2QkFBNkIsaURBQWlEO0FBQzdSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBUSxrQkFBa0IsWUFBWSxLQUFLLDJCQUEyQjtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBUSw0QkFBNEIsb0VBQW9FO0FBQ3JKLHVEQUF1RCxpREFBUSxrQkFBa0IsMERBQTBEO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxpREFBUSxrQkFBa0IsWUFBWSxLQUFLLGNBQWM7QUFDdEg7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsSUFBSSxnQkFBZ0I7QUFDckQ7QUFDQTtBQUNBLGtDQUFrQyxnREFBZ0Q7QUFDbEY7QUFDQTtBQUNBLGtDQUFrQyxnREFBZ0Q7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnTDtBQUNoTCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBdXRoVGFibGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuXG4vLyNyZWdpb24gc3JjL2RiL3NjaGVtYS50c1xuY29uc3QgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHBhcnNlT3V0cHV0RGF0YShkYXRhLCBzY2hlbWEpIHtcblx0Y29uc3QgZmllbGRzID0gc2NoZW1hLmZpZWxkcztcblx0Y29uc3QgcGFyc2VkRGF0YSA9IHt9O1xuXHRmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG5cdFx0Y29uc3QgZmllbGQgPSBmaWVsZHNba2V5XTtcblx0XHRpZiAoIWZpZWxkKSB7XG5cdFx0XHRwYXJzZWREYXRhW2tleV0gPSBkYXRhW2tleV07XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0aWYgKGZpZWxkLnJldHVybmVkID09PSBmYWxzZSAmJiBrZXkgIT09IFwiaWRcIikgY29udGludWU7XG5cdFx0cGFyc2VkRGF0YVtrZXldID0gZGF0YVtrZXldO1xuXHR9XG5cdHJldHVybiBwYXJzZWREYXRhO1xufVxuZnVuY3Rpb24gZ2V0RmllbGRzKG9wdGlvbnMsIHRhYmxlLCBtb2RlKSB7XG5cdGNvbnN0IGNhY2hlS2V5ID0gYCR7dGFibGV9OiR7bW9kZX1gO1xuXHRpZiAoIWNhY2hlLmhhcyhvcHRpb25zKSkgY2FjaGUuc2V0KG9wdGlvbnMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuXHRjb25zdCB0YWJsZUNhY2hlID0gY2FjaGUuZ2V0KG9wdGlvbnMpO1xuXHRpZiAodGFibGVDYWNoZS5oYXMoY2FjaGVLZXkpKSByZXR1cm4gdGFibGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xuXHRjb25zdCBjb3JlU2NoZW1hID0gbW9kZSA9PT0gXCJvdXRwdXRcIiA/IGdldEF1dGhUYWJsZXMob3B0aW9ucylbdGFibGVdPy5maWVsZHMgPz8ge30gOiB7fTtcblx0Y29uc3QgYWRkaXRpb25hbEZpZWxkcyA9IHRhYmxlID09PSBcInVzZXJcIiB8fCB0YWJsZSA9PT0gXCJzZXNzaW9uXCIgfHwgdGFibGUgPT09IFwiYWNjb3VudFwiID8gb3B0aW9uc1t0YWJsZV0/LmFkZGl0aW9uYWxGaWVsZHMgOiB2b2lkIDA7XG5cdGxldCBzY2hlbWEgPSB7XG5cdFx0Li4uY29yZVNjaGVtYSxcblx0XHQuLi5hZGRpdGlvbmFsRmllbGRzID8/IHt9XG5cdH07XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIG9wdGlvbnMucGx1Z2lucyB8fCBbXSkgaWYgKHBsdWdpbi5zY2hlbWEgJiYgcGx1Z2luLnNjaGVtYVt0YWJsZV0pIHNjaGVtYSA9IHtcblx0XHQuLi5zY2hlbWEsXG5cdFx0Li4ucGx1Z2luLnNjaGVtYVt0YWJsZV0uZmllbGRzXG5cdH07XG5cdHRhYmxlQ2FjaGUuc2V0KGNhY2hlS2V5LCBzY2hlbWEpO1xuXHRyZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gcGFyc2VVc2VyT3V0cHV0KG9wdGlvbnMsIHVzZXIpIHtcblx0cmV0dXJuIHBhcnNlT3V0cHV0RGF0YSh1c2VyLCB7IGZpZWxkczogZ2V0RmllbGRzKG9wdGlvbnMsIFwidXNlclwiLCBcIm91dHB1dFwiKSB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlU2Vzc2lvbk91dHB1dChvcHRpb25zLCBzZXNzaW9uKSB7XG5cdHJldHVybiBwYXJzZU91dHB1dERhdGEoc2Vzc2lvbiwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInNlc3Npb25cIiwgXCJvdXRwdXRcIikgfSk7XG59XG5mdW5jdGlvbiBwYXJzZUFjY291bnRPdXRwdXQob3B0aW9ucywgYWNjb3VudCkge1xuXHRjb25zdCB7IGFjY2Vzc1Rva2VuOiBfYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbjogX3JlZnJlc2hUb2tlbiwgaWRUb2tlbjogX2lkVG9rZW4sIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBfYWNjZXNzVG9rZW5FeHBpcmVzQXQsIHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogX3JlZnJlc2hUb2tlbkV4cGlyZXNBdCwgcGFzc3dvcmQ6IF9wYXNzd29yZCwgLi4ucmVzdCB9ID0gcGFyc2VPdXRwdXREYXRhKGFjY291bnQsIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJhY2NvdW50XCIsIFwib3V0cHV0XCIpIH0pO1xuXHRyZXR1cm4gcmVzdDtcbn1cbmZ1bmN0aW9uIHBhcnNlSW5wdXREYXRhKGRhdGEsIHNjaGVtYSkge1xuXHRjb25zdCBhY3Rpb24gPSBzY2hlbWEuYWN0aW9uIHx8IFwiY3JlYXRlXCI7XG5cdGNvbnN0IGZpZWxkcyA9IHNjaGVtYS5maWVsZHM7XG5cdGNvbnN0IHBhcnNlZERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIG51bGwpO1xuXHRmb3IgKGNvbnN0IGtleSBpbiBmaWVsZHMpIHtcblx0XHRpZiAoa2V5IGluIGRhdGEpIHtcblx0XHRcdGlmIChmaWVsZHNba2V5XS5pbnB1dCA9PT0gZmFsc2UpIHtcblx0XHRcdFx0aWYgKGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdFx0aWYgKGFjdGlvbiAhPT0gXCJ1cGRhdGVcIikge1xuXHRcdFx0XHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChkYXRhW2tleV0pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYCR7a2V5fSBpcyBub3QgYWxsb3dlZCB0byBiZSBzZXRgIH0pO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmIChmaWVsZHNba2V5XS52YWxpZGF0b3I/LmlucHV0ICYmIGRhdGFba2V5XSAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGZpZWxkc1trZXldLnZhbGlkYXRvci5pbnB1dFtcIn5zdGFuZGFyZFwiXS52YWxpZGF0ZShkYXRhW2tleV0pO1xuXHRcdFx0XHRpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogXCJBc3luYyB2YWxpZGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGFkZGl0aW9uYWwgZmllbGRzXCIgfSk7XG5cdFx0XHRcdGlmIChcImlzc3Vlc1wiIGluIHJlc3VsdCAmJiByZXN1bHQuaXNzdWVzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IHJlc3VsdC5pc3N1ZXNbMF0/Lm1lc3NhZ2UgfHwgXCJWYWxpZGF0aW9uIEVycm9yXCIgfSk7XG5cdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IHJlc3VsdC52YWx1ZTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZmllbGRzW2tleV0udHJhbnNmb3JtPy5pbnB1dCAmJiBkYXRhW2tleV0gIT09IHZvaWQgMCkge1xuXHRcdFx0XHRwYXJzZWREYXRhW2tleV0gPSBmaWVsZHNba2V5XS50cmFuc2Zvcm0/LmlucHV0KGRhdGFba2V5XSk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZGF0YVtrZXldO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmIChmaWVsZHNba2V5XS5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCAmJiBhY3Rpb24gPT09IFwiY3JlYXRlXCIpIHtcblx0XHRcdGlmICh0eXBlb2YgZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlKCk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmIChmaWVsZHNba2V5XS5yZXF1aXJlZCAmJiBhY3Rpb24gPT09IFwiY3JlYXRlXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYCR7a2V5fSBpcyByZXF1aXJlZGAgfSk7XG5cdH1cblx0cmV0dXJuIHBhcnNlZERhdGE7XG59XG5mdW5jdGlvbiBwYXJzZVVzZXJJbnB1dChvcHRpb25zLCB1c2VyID0ge30sIGFjdGlvbikge1xuXHRyZXR1cm4gcGFyc2VJbnB1dERhdGEodXNlciwge1xuXHRcdGZpZWxkczogZ2V0RmllbGRzKG9wdGlvbnMsIFwidXNlclwiLCBcImlucHV0XCIpLFxuXHRcdGFjdGlvblxuXHR9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dChvcHRpb25zLCB1c2VyKSB7XG5cdGNvbnN0IHNjaGVtYSA9IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJpbnB1dFwiKTtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHVzZXIgfHwge30sIHsgZmllbGRzOiBzY2hlbWEgfSk7XG59XG5mdW5jdGlvbiBwYXJzZUFjY291bnRJbnB1dChvcHRpb25zLCBhY2NvdW50KSB7XG5cdHJldHVybiBwYXJzZUlucHV0RGF0YShhY2NvdW50LCB7IGZpZWxkczogZ2V0RmllbGRzKG9wdGlvbnMsIFwiYWNjb3VudFwiLCBcImlucHV0XCIpIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VTZXNzaW9uSW5wdXQob3B0aW9ucywgc2Vzc2lvbikge1xuXHRyZXR1cm4gcGFyc2VJbnB1dERhdGEoc2Vzc2lvbiwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInNlc3Npb25cIiwgXCJpbnB1dFwiKSB9KTtcbn1cbmZ1bmN0aW9uIG1lcmdlU2NoZW1hKHNjaGVtYSwgbmV3U2NoZW1hKSB7XG5cdGlmICghbmV3U2NoZW1hKSByZXR1cm4gc2NoZW1hO1xuXHRmb3IgKGNvbnN0IHRhYmxlIGluIG5ld1NjaGVtYSkge1xuXHRcdGNvbnN0IG5ld01vZGVsTmFtZSA9IG5ld1NjaGVtYVt0YWJsZV0/Lm1vZGVsTmFtZTtcblx0XHRpZiAobmV3TW9kZWxOYW1lKSBzY2hlbWFbdGFibGVdLm1vZGVsTmFtZSA9IG5ld01vZGVsTmFtZTtcblx0XHRmb3IgKGNvbnN0IGZpZWxkIGluIHNjaGVtYVt0YWJsZV0uZmllbGRzKSB7XG5cdFx0XHRjb25zdCBuZXdGaWVsZCA9IG5ld1NjaGVtYVt0YWJsZV0/LmZpZWxkcz8uW2ZpZWxkXTtcblx0XHRcdGlmICghbmV3RmllbGQpIGNvbnRpbnVlO1xuXHRcdFx0c2NoZW1hW3RhYmxlXS5maWVsZHNbZmllbGRdLmZpZWxkTmFtZSA9IG5ld0ZpZWxkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gc2NoZW1hO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toZodSchema: () => (/* binding */ toZodSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/index.js\");\n\n\n//#region src/db/to-zod.ts\nfunction toZodSchema({ fields, isClientSide }) {\n\tconst zodFields = Object.keys(fields).reduce((acc, key) => {\n\t\tconst field = fields[key];\n\t\tif (!field) return acc;\n\t\tif (isClientSide && field.input === false) return acc;\n\t\tlet schema;\n\t\tif (field.type === \"json\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.json ? zod__WEBPACK_IMPORTED_MODULE_0__.json() : zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse if (field.type === \"string[]\" || field.type === \"number[]\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.array(field.type === \"string[]\" ? zod__WEBPACK_IMPORTED_MODULE_0__.string() : zod__WEBPACK_IMPORTED_MODULE_0__.number());\n\t\telse if (Array.isArray(field.type)) schema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse schema = zod__WEBPACK_IMPORTED_MODULE_1__[field.type]();\n\t\tif (field?.required === false) schema = schema.optional();\n\t\tif (!isClientSide && field?.returned === false) return acc;\n\t\treturn {\n\t\t\t...acc,\n\t\t\t[key]: schema\n\t\t};\n\t}, {});\n\treturn zod__WEBPACK_IMPORTED_MODULE_0__.object(zodFields);\n}\n\n//#endregion\n\n//# sourceMappingURL=to-zod.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvdG8tem9kLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUI7O0FBRXpCO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHFDQUFNLEdBQUcscUNBQU0sS0FBSyxvQ0FBSztBQUMvRCw0RUFBNEUsc0NBQU8sNkJBQTZCLHVDQUFRLEtBQUssdUNBQVE7QUFDckksK0NBQStDLG9DQUFLO0FBQ3BELGdCQUFnQixnQ0FBQztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUk7QUFDTixRQUFRLHVDQUFRO0FBQ2hCOztBQUVBO0FBQ3VCO0FBQ3ZCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFx0by16b2QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL2RiL3RvLXpvZC50c1xuZnVuY3Rpb24gdG9ab2RTY2hlbWEoeyBmaWVsZHMsIGlzQ2xpZW50U2lkZSB9KSB7XG5cdGNvbnN0IHpvZEZpZWxkcyA9IE9iamVjdC5rZXlzKGZpZWxkcykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0aWYgKCFmaWVsZCkgcmV0dXJuIGFjYztcblx0XHRpZiAoaXNDbGllbnRTaWRlICYmIGZpZWxkLmlucHV0ID09PSBmYWxzZSkgcmV0dXJuIGFjYztcblx0XHRsZXQgc2NoZW1hO1xuXHRcdGlmIChmaWVsZC50eXBlID09PSBcImpzb25cIikgc2NoZW1hID0gei5qc29uID8gei5qc29uKCkgOiB6LmFueSgpO1xuXHRcdGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09IFwic3RyaW5nW11cIiB8fCBmaWVsZC50eXBlID09PSBcIm51bWJlcltdXCIpIHNjaGVtYSA9IHouYXJyYXkoZmllbGQudHlwZSA9PT0gXCJzdHJpbmdbXVwiID8gei5zdHJpbmcoKSA6IHoubnVtYmVyKCkpO1xuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmllbGQudHlwZSkpIHNjaGVtYSA9IHouYW55KCk7XG5cdFx0ZWxzZSBzY2hlbWEgPSB6W2ZpZWxkLnR5cGVdKCk7XG5cdFx0aWYgKGZpZWxkPy5yZXF1aXJlZCA9PT0gZmFsc2UpIHNjaGVtYSA9IHNjaGVtYS5vcHRpb25hbCgpO1xuXHRcdGlmICghaXNDbGllbnRTaWRlICYmIGZpZWxkPy5yZXR1cm5lZCA9PT0gZmFsc2UpIHJldHVybiBhY2M7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLmFjYyxcblx0XHRcdFtrZXldOiBzY2hlbWFcblx0XHR9O1xuXHR9LCB7fSk7XG5cdHJldHVybiB6Lm9iamVjdCh6b2RGaWVsZHMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHRvWm9kU2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10by16b2QubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWithHooks: () => (/* binding */ getWithHooks)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/db/with-hooks.ts\nfunction getWithHooks(adapter, ctx) {\n\tconst hooks = ctx.hooks;\n\tasync function createWithHooks(data, model, customCreateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(actualData, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customCreated = customCreateFn ? await customCreateFn.fn(actualData) : null;\n\t\tconst created = !customCreateFn || customCreateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).create({\n\t\t\tmodel,\n\t\t\tdata: actualData,\n\t\t\tforceAllowId: true\n\t\t}) : customCreated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.after;\n\t\t\tif (toRun) await toRun(created, context);\n\t\t}\n\t\treturn created;\n\t}\n\tasync function updateWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).update({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function updateManyWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).updateMany({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function deleteWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entityToDelete = null;\n\t\ttry {\n\t\t\tentityToDelete = (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit: 1\n\t\t\t}))[0] || null;\n\t\t} catch {}\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entityToDelete, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).delete({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entityToDelete, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\tasync function deleteManyWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entitiesToDelete = [];\n\t\ttry {\n\t\t\tentitiesToDelete = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t} catch {}\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entity, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).deleteMany({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entity, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\treturn {\n\t\tcreateWithHooks,\n\t\tupdateWithHooks,\n\t\tupdateManyWithHooks,\n\t\tdeleteWithHooks,\n\t\tdeleteManyWithHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=with-hooks.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvd2l0aC1ob29rcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUY7O0FBRXJGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdGQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRiw0RUFBaUI7QUFDbEc7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdGQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRiw0RUFBaUI7QUFDbEc7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdGQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRiw0RUFBaUI7QUFDbEc7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdGQUFxQjtBQUM3QztBQUNBO0FBQ0Esa0NBQWtDLDRFQUFpQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdGQUFxQjtBQUM3QztBQUNBO0FBQ0EsbUNBQW1DLDRFQUFpQjtBQUNwRDtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRiw0RUFBaUI7QUFDbEc7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFx3aXRoLWhvb2tzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDdXJyZW50QWRhcHRlciwgZ2V0Q3VycmVudEF1dGhDb250ZXh0IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi93aXRoLWhvb2tzLnRzXG5mdW5jdGlvbiBnZXRXaXRoSG9va3MoYWRhcHRlciwgY3R4KSB7XG5cdGNvbnN0IGhvb2tzID0gY3R4Lmhvb2tzO1xuXHRhc3luYyBmdW5jdGlvbiBjcmVhdGVXaXRoSG9va3MoZGF0YSwgbW9kZWwsIGN1c3RvbUNyZWF0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBhY3R1YWxEYXRhID0gZGF0YTtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LmNyZWF0ZT8uYmVmb3JlO1xuXHRcdFx0aWYgKHRvUnVuKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGFjdHVhbERhdGEsIGNvbnRleHQpO1xuXHRcdFx0XHRpZiAocmVzdWx0ID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3VsdCkgYWN0dWFsRGF0YSA9IHtcblx0XHRcdFx0XHQuLi5hY3R1YWxEYXRhLFxuXHRcdFx0XHRcdC4uLnJlc3VsdC5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbUNyZWF0ZWQgPSBjdXN0b21DcmVhdGVGbiA/IGF3YWl0IGN1c3RvbUNyZWF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcblx0XHRjb25zdCBjcmVhdGVkID0gIWN1c3RvbUNyZWF0ZUZuIHx8IGN1c3RvbUNyZWF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmNyZWF0ZSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdGRhdGE6IGFjdHVhbERhdGEsXG5cdFx0XHRmb3JjZUFsbG93SWQ6IHRydWVcblx0XHR9KSA6IGN1c3RvbUNyZWF0ZWQ7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5jcmVhdGU/LmFmdGVyO1xuXHRcdFx0aWYgKHRvUnVuKSBhd2FpdCB0b1J1bihjcmVhdGVkLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGNyZWF0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gdXBkYXRlV2l0aEhvb2tzKGRhdGEsIHdoZXJlLCBtb2RlbCwgY3VzdG9tVXBkYXRlRm4pIHtcblx0XHRjb25zdCBjb250ZXh0ID0gYXdhaXQgZ2V0Q3VycmVudEF1dGhDb250ZXh0KCkuY2F0Y2goKCkgPT4gbnVsbCk7XG5cdFx0bGV0IGFjdHVhbERhdGEgPSBkYXRhO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5iZWZvcmU7XG5cdFx0XHRpZiAodG9SdW4pIHtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdG9SdW4oZGF0YSwgY29udGV4dCk7XG5cdFx0XHRcdGlmIChyZXN1bHQgPT09IGZhbHNlKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIgJiYgXCJkYXRhXCIgaW4gcmVzdWx0KSBhY3R1YWxEYXRhID0ge1xuXHRcdFx0XHRcdC4uLmFjdHVhbERhdGEsXG5cdFx0XHRcdFx0Li4ucmVzdWx0LmRhdGFcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgY3VzdG9tVXBkYXRlZCA9IGN1c3RvbVVwZGF0ZUZuID8gYXdhaXQgY3VzdG9tVXBkYXRlRm4uZm4oYWN0dWFsRGF0YSkgOiBudWxsO1xuXHRcdGNvbnN0IHVwZGF0ZWQgPSAhY3VzdG9tVXBkYXRlRm4gfHwgY3VzdG9tVXBkYXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkudXBkYXRlKHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0dXBkYXRlOiBhY3R1YWxEYXRhLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbVVwZGF0ZWQ7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmFmdGVyO1xuXHRcdFx0aWYgKHRvUnVuKSBhd2FpdCB0b1J1bih1cGRhdGVkLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHVwZGF0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gdXBkYXRlTWFueVdpdGhIb29rcyhkYXRhLCB3aGVyZSwgbW9kZWwsIGN1c3RvbVVwZGF0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBhY3R1YWxEYXRhID0gZGF0YTtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LnVwZGF0ZT8uYmVmb3JlO1xuXHRcdFx0aWYgKHRvUnVuKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGRhdGEsIGNvbnRleHQpO1xuXHRcdFx0XHRpZiAocmVzdWx0ID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3VsdCkgYWN0dWFsRGF0YSA9IHtcblx0XHRcdFx0XHQuLi5hY3R1YWxEYXRhLFxuXHRcdFx0XHRcdC4uLnJlc3VsdC5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbVVwZGF0ZWQgPSBjdXN0b21VcGRhdGVGbiA/IGF3YWl0IGN1c3RvbVVwZGF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcblx0XHRjb25zdCB1cGRhdGVkID0gIWN1c3RvbVVwZGF0ZUZuIHx8IGN1c3RvbVVwZGF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLnVwZGF0ZU1hbnkoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHR1cGRhdGU6IGFjdHVhbERhdGEsXG5cdFx0XHR3aGVyZVxuXHRcdH0pIDogY3VzdG9tVXBkYXRlZDtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LnVwZGF0ZT8uYWZ0ZXI7XG5cdFx0XHRpZiAodG9SdW4pIGF3YWl0IHRvUnVuKHVwZGF0ZWQsIGNvbnRleHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gdXBkYXRlZDtcblx0fVxuXHRhc3luYyBmdW5jdGlvbiBkZWxldGVXaXRoSG9va3Mod2hlcmUsIG1vZGVsLCBjdXN0b21EZWxldGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgZW50aXR5VG9EZWxldGUgPSBudWxsO1xuXHRcdHRyeSB7XG5cdFx0XHRlbnRpdHlUb0RlbGV0ZSA9IChhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlLFxuXHRcdFx0XHRsaW1pdDogMVxuXHRcdFx0fSkpWzBdIHx8IG51bGw7XG5cdFx0fSBjYXRjaCB7fVxuXHRcdGlmIChlbnRpdHlUb0RlbGV0ZSkgZm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5kZWxldGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRpZiAoYXdhaXQgdG9SdW4oZW50aXR5VG9EZWxldGUsIGNvbnRleHQpID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbURlbGV0ZWQgPSBjdXN0b21EZWxldGVGbiA/IGF3YWl0IGN1c3RvbURlbGV0ZUZuLmZuKHdoZXJlKSA6IG51bGw7XG5cdFx0Y29uc3QgZGVsZXRlZCA9ICFjdXN0b21EZWxldGVGbiB8fCBjdXN0b21EZWxldGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5kZWxldGUoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHR3aGVyZVxuXHRcdH0pIDogY3VzdG9tRGVsZXRlZDtcblx0XHRpZiAoZW50aXR5VG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oZW50aXR5VG9EZWxldGUsIGNvbnRleHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gZGVsZXRlZDtcblx0fVxuXHRhc3luYyBmdW5jdGlvbiBkZWxldGVNYW55V2l0aEhvb2tzKHdoZXJlLCBtb2RlbCwgY3VzdG9tRGVsZXRlRm4pIHtcblx0XHRjb25zdCBjb250ZXh0ID0gYXdhaXQgZ2V0Q3VycmVudEF1dGhDb250ZXh0KCkuY2F0Y2goKCkgPT4gbnVsbCk7XG5cdFx0bGV0IGVudGl0aWVzVG9EZWxldGUgPSBbXTtcblx0XHR0cnkge1xuXHRcdFx0ZW50aXRpZXNUb0RlbGV0ZSA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2gge31cblx0XHRmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllc1RvRGVsZXRlKSBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LmRlbGV0ZT8uYmVmb3JlO1xuXHRcdFx0aWYgKHRvUnVuKSB7XG5cdFx0XHRcdGlmIChhd2FpdCB0b1J1bihlbnRpdHksIGNvbnRleHQpID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbURlbGV0ZWQgPSBjdXN0b21EZWxldGVGbiA/IGF3YWl0IGN1c3RvbURlbGV0ZUZuLmZuKHdoZXJlKSA6IG51bGw7XG5cdFx0Y29uc3QgZGVsZXRlZCA9ICFjdXN0b21EZWxldGVGbiB8fCBjdXN0b21EZWxldGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5kZWxldGVNYW55KHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbURlbGV0ZWQ7XG5cdFx0Zm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXNUb0RlbGV0ZSkgZm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5kZWxldGU/LmFmdGVyO1xuXHRcdFx0aWYgKHRvUnVuKSBhd2FpdCB0b1J1bihlbnRpdHksIGNvbnRleHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gZGVsZXRlZDtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdGNyZWF0ZVdpdGhIb29rcyxcblx0XHR1cGRhdGVXaXRoSG9va3MsXG5cdFx0dXBkYXRlTWFueVdpdGhIb29rcyxcblx0XHRkZWxldGVXaXRoSG9va3MsXG5cdFx0ZGVsZXRlTWFueVdpdGhIb29rc1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldFdpdGhIb29rcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2l0aC1ob29rcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/index.mjs":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/index.mjs ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError),\n/* harmony export */   BASE_ERROR_CODES: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BASE_ERROR_CODES),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BetterAuthError),\n/* harmony export */   ENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.ENV),\n/* harmony export */   HIDE_METADATA: () => (/* reexport safe */ _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__.HIDE_METADATA),\n/* harmony export */   TTY_COLORS: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.TTY_COLORS),\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.accountSchema),\n/* harmony export */   betterAuth: () => (/* reexport safe */ _auth_full_mjs__WEBPACK_IMPORTED_MODULE_5__.betterAuth),\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.capitalizeFirstLetter),\n/* harmony export */   clientCredentialsToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.clientCredentialsToken),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.coreSchema),\n/* harmony export */   createAuthorizationCodeRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationCodeRequest),\n/* harmony export */   createAuthorizationURL: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationURL),\n/* harmony export */   createClientCredentialsTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createClientCredentialsTokenRequest),\n/* harmony export */   createLogger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.createLogger),\n/* harmony export */   createRateLimitKey: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.createRateLimitKey),\n/* harmony export */   createRefreshAccessTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createRefreshAccessTokenRequest),\n/* harmony export */   createTelemetry: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.createTelemetry),\n/* harmony export */   defineErrorCodes: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.defineErrorCodes),\n/* harmony export */   deprecate: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.deprecate),\n/* harmony export */   env: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.env),\n/* harmony export */   filterOutputFields: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.filterOutputFields),\n/* harmony export */   generateCodeChallenge: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.generateCodeChallenge),\n/* harmony export */   generateGenericState: () => (/* reexport safe */ _state_mjs__WEBPACK_IMPORTED_MODULE_0__.generateGenericState),\n/* harmony export */   generateId: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_3__.generateId),\n/* harmony export */   generateState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.generateState),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.getAuthTables),\n/* harmony export */   getBooleanEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getBooleanEnvVar),\n/* harmony export */   getColorDepth: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getColorDepth),\n/* harmony export */   getCurrentAdapter: () => (/* reexport safe */ _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__.getCurrentAdapter),\n/* harmony export */   getEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getEnvVar),\n/* harmony export */   getJwks: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getJwks),\n/* harmony export */   getOAuth2Tokens: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getOAuth2Tokens),\n/* harmony export */   getTelemetryAuthConfig: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.getTelemetryAuthConfig),\n/* harmony export */   isDevelopment: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isDevelopment),\n/* harmony export */   isProduction: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isProduction),\n/* harmony export */   isTest: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isTest),\n/* harmony export */   isValidIP: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.isValidIP),\n/* harmony export */   levels: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.levels),\n/* harmony export */   logger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.logger),\n/* harmony export */   nodeENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.nodeENV),\n/* harmony export */   normalizeIP: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.normalizeIP),\n/* harmony export */   normalizePathname: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.normalizePathname),\n/* harmony export */   parseGenericState: () => (/* reexport safe */ _state_mjs__WEBPACK_IMPORTED_MODULE_0__.parseGenericState),\n/* harmony export */   parseState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.rateLimitSchema),\n/* harmony export */   refreshAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.refreshAccessToken),\n/* harmony export */   safeJSONParse: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.safeJSONParse),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.sessionSchema),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.shouldPublishLog),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.userSchema),\n/* harmony export */   validateAuthorizationCode: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateAuthorizationCode),\n/* harmony export */   validateToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateToken),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.verificationSchema),\n/* harmony export */   verifyAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyAccessToken),\n/* harmony export */   verifyJwsAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyJwsAccessToken)\n/* harmony export */ });\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./oauth2/state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/hide-metadata.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./api/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _auth_full_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./auth/full.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/context */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/telemetry */ \"(action-browser)/./node_modules/.pnpm/@better-auth+telemetry@1.4._c11636a3ce6f8b05864a09e345ba4713/node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var _better_auth_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/db */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0U7QUFDUDtBQUNMO0FBQ1g7QUFDSjtBQUNFO0FBQ2lCO0FBQ21COztBQUVoRDs7QUFFRzs7QUFFQzs7QUFFRTs7QUFFQzs7QUFFRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVHZW5lcmljU3RhdGUsIHBhcnNlR2VuZXJpY1N0YXRlIH0gZnJvbSBcIi4vc3RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH0gZnJvbSBcIi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkIH0gZnJvbSBcIi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGJldHRlckF1dGggfSBmcm9tIFwiLi9hdXRoL2Z1bGwubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QWRhcHRlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5pbXBvcnQgeyBjcmVhdGVUZWxlbWV0cnksIGdldFRlbGVtZXRyeUF1dGhDb25maWcgfSBmcm9tIFwiQGJldHRlci1hdXRoL3RlbGVtZXRyeVwiO1xuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmVcIlxuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIlxuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL29hdXRoMlwiXG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiXG5cbmV4cG9ydCB7IEFQSUVycm9yLCBISURFX01FVEFEQVRBLCBiZXR0ZXJBdXRoLCBjcmVhdGVUZWxlbWV0cnksIGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBnZW5lcmF0ZUlkLCBnZW5lcmF0ZVN0YXRlLCBnZXRDdXJyZW50QWRhcHRlciwgZ2V0VGVsZW1ldHJ5QXV0aENvbmZpZywgcGFyc2VHZW5lcmljU3RhdGUsIHBhcnNlU3RhdGUgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleOAuthUserInfo: () => (/* binding */ handleOAuthUserInfo)\n/* harmony export */ });\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/session-store.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/routes/email-verification.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/link-account.ts\nasync function handleOAuthUserInfo(c, opts) {\n\tconst { userInfo, account, callbackURL, disableSignUp, overrideUserInfo } = opts;\n\tconst dbUser = await c.context.internalAdapter.findOAuthUser(userInfo.email.toLowerCase(), account.accountId, account.providerId).catch((e) => {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Better auth was unable to query your database.\\nError: \", e);\n\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=internal_server_error`);\n\t});\n\tlet user = dbUser?.user;\n\tconst isRegister = !user;\n\tif (dbUser) {\n\t\tconst linkedAccount = dbUser.linkedAccount ?? dbUser.accounts.find((acc) => acc.providerId === account.providerId && acc.accountId === account.accountId);\n\t\tif (!linkedAccount) {\n\t\t\tconst accountLinking = c.context.options.account?.accountLinking;\n\t\t\tconst trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n\t\t\tif (!(opts.isTrustedProvider || trustedProviders?.includes(account.providerId)) && !userInfo.emailVerified || accountLinking?.enabled === false || accountLinking?.disableImplicitLinking === true) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.isDevelopment)()) _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.warn(`User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"account not linked\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait c.context.internalAdapter.linkAccount({\n\t\t\t\t\tproviderId: account.providerId,\n\t\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t\t\tuserId: dbUser.user.id,\n\t\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Unable to link account\", e);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"unable to link account\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t} else {\n\t\t\tconst freshTokens = c.context.options.account?.updateAccountOnSignIn !== false ? Object.fromEntries(Object.entries({\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope\n\t\t\t}).filter(([_, value]) => value !== void 0)) : {};\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, {\n\t\t\t\t...linkedAccount,\n\t\t\t\t...freshTokens\n\t\t\t});\n\t\t\tif (Object.keys(freshTokens).length > 0) await c.context.internalAdapter.updateAccount(linkedAccount.id, freshTokens);\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t}\n\t\tif (overrideUserInfo) {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tuser = await c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\temailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif (disableSignUp) return {\n\t\t\terror: \"signup disabled\",\n\t\t\tdata: null,\n\t\t\tisRegister: false\n\t\t};\n\t\ttry {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tconst accountData = {\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope,\n\t\t\t\tproviderId: account.providerId,\n\t\t\t\taccountId: userInfo.id.toString()\n\t\t\t};\n\t\t\tconst { user: createdUser, account: createdAccount } = await c.context.internalAdapter.createOAuthUser({\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase()\n\t\t\t}, accountData);\n\t\t\tuser = createdUser;\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, createdAccount);\n\t\t\tif (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp && c.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\t\tconst token = await (0,_api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__.createEmailVerificationToken)(c.context.secret, user.email, void 0, c.context.options.emailVerification?.expiresIn);\n\t\t\t\tconst url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\t\tawait c.context.runInBackgroundOrAwait(c.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser,\n\t\t\t\t\turl,\n\t\t\t\t\ttoken\n\t\t\t\t}, c.request));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(e);\n\t\t\tif (e instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError) return {\n\t\t\t\terror: e.message,\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t\treturn {\n\t\t\t\terror: \"unable to create user\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t}\n\t}\n\tif (!user) return {\n\t\terror: \"unable to create user\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\tconst session = await c.context.internalAdapter.createSession(user.id);\n\tif (!session) return {\n\t\terror: \"unable to create session\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\treturn {\n\t\tdata: {\n\t\t\tsession,\n\t\t\tuser\n\t\t},\n\t\terror: null,\n\t\tisRegister\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=link-account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3Qvb2F1dGgyL2xpbmstYWNjb3VudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdFO0FBQ3JCO0FBQ3lDO0FBQ3hDO0FBQ2tCOztBQUU5RDtBQUNBO0FBQ0EsU0FBUyxrRUFBa0U7QUFDM0U7QUFDQSxFQUFFLHlEQUFNO0FBQ1IsZ0VBQWdFLGtCQUFrQjtBQUNsRixzQkFBc0IsU0FBUztBQUMvQixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0VBQWEsSUFBSSx5REFBTSx3REFBd0QsbUJBQW1CO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdEQUFZO0FBQ3BDLHlCQUF5Qix3REFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0wsSUFBSSx5REFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnTEFBZ0wscUJBQXFCO0FBQ3JNLElBQUk7QUFDSjtBQUNBO0FBQ0EsdUJBQXVCLHdEQUFZO0FBQ25DLHdCQUF3Qix3REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNERBQTRELDRFQUFnQjtBQUM1RTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZ0xBQWdMLHFCQUFxQjtBQUNyTTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkMsd0JBQXdCLHdEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2Q0FBNkM7QUFDeEQ7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDREQUE0RCw0RUFBZ0I7QUFDNUU7QUFDQSx3QkFBd0IsZ0dBQTRCO0FBQ3BELG1CQUFtQixrQkFBa0Isc0JBQXNCLE1BQU0sZUFBZSxZQUFZO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKLEdBQUcseURBQU07QUFDVCxvQkFBb0Isb0RBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMrQjtBQUMvQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxvYXV0aDJcXGxpbmstYWNjb3VudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0QWNjb3VudENvb2tpZSB9IGZyb20gXCIuLi9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzXCI7XG5pbXBvcnQgeyBzZXRUb2tlblV0aWwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi4vYXBpL3JvdXRlcy9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBpc0RldmVsb3BtZW50LCBsb2dnZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL2xpbmstYWNjb3VudC50c1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlT0F1dGhVc2VySW5mbyhjLCBvcHRzKSB7XG5cdGNvbnN0IHsgdXNlckluZm8sIGFjY291bnQsIGNhbGxiYWNrVVJMLCBkaXNhYmxlU2lnblVwLCBvdmVycmlkZVVzZXJJbmZvIH0gPSBvcHRzO1xuXHRjb25zdCBkYlVzZXIgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRPQXV0aFVzZXIodXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSwgYWNjb3VudC5hY2NvdW50SWQsIGFjY291bnQucHJvdmlkZXJJZCkuY2F0Y2goKGUpID0+IHtcblx0XHRsb2dnZXIuZXJyb3IoXCJCZXR0ZXIgYXV0aCB3YXMgdW5hYmxlIHRvIHF1ZXJ5IHlvdXIgZGF0YWJhc2UuXFxuRXJyb3I6IFwiLCBlKTtcblx0XHRjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9aW50ZXJuYWxfc2VydmVyX2Vycm9yYCk7XG5cdH0pO1xuXHRsZXQgdXNlciA9IGRiVXNlcj8udXNlcjtcblx0Y29uc3QgaXNSZWdpc3RlciA9ICF1c2VyO1xuXHRpZiAoZGJVc2VyKSB7XG5cdFx0Y29uc3QgbGlua2VkQWNjb3VudCA9IGRiVXNlci5saW5rZWRBY2NvdW50ID8/IGRiVXNlci5hY2NvdW50cy5maW5kKChhY2MpID0+IGFjYy5wcm92aWRlcklkID09PSBhY2NvdW50LnByb3ZpZGVySWQgJiYgYWNjLmFjY291bnRJZCA9PT0gYWNjb3VudC5hY2NvdW50SWQpO1xuXHRcdGlmICghbGlua2VkQWNjb3VudCkge1xuXHRcdFx0Y29uc3QgYWNjb3VudExpbmtpbmcgPSBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZztcblx0XHRcdGNvbnN0IHRydXN0ZWRQcm92aWRlcnMgPSBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8udHJ1c3RlZFByb3ZpZGVycztcblx0XHRcdGlmICghKG9wdHMuaXNUcnVzdGVkUHJvdmlkZXIgfHwgdHJ1c3RlZFByb3ZpZGVycz8uaW5jbHVkZXMoYWNjb3VudC5wcm92aWRlcklkKSkgJiYgIXVzZXJJbmZvLmVtYWlsVmVyaWZpZWQgfHwgYWNjb3VudExpbmtpbmc/LmVuYWJsZWQgPT09IGZhbHNlIHx8IGFjY291bnRMaW5raW5nPy5kaXNhYmxlSW1wbGljaXRMaW5raW5nID09PSB0cnVlKSB7XG5cdFx0XHRcdGlmIChpc0RldmVsb3BtZW50KCkpIGxvZ2dlci53YXJuKGBVc2VyIGFscmVhZHkgZXhpc3QgYnV0IGFjY291bnQgaXNuJ3QgbGlua2VkIHRvICR7YWNjb3VudC5wcm92aWRlcklkfS4gVG8gcmVhZCBtb3JlIGFib3V0IGhvdyBhY2NvdW50IGxpbmtpbmcgd29ya3MgaW4gQmV0dGVyIEF1dGggc2VlIGh0dHBzOi8vd3d3LmJldHRlci1hdXRoLmNvbS9kb2NzL2NvbmNlcHRzL3VzZXJzLWFjY291bnRzI2FjY291bnQtbGlua2luZy5gKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRlcnJvcjogXCJhY2NvdW50IG5vdCBsaW5rZWRcIixcblx0XHRcdFx0XHRkYXRhOiBudWxsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KHtcblx0XHRcdFx0XHRwcm92aWRlcklkOiBhY2NvdW50LnByb3ZpZGVySWQsXG5cdFx0XHRcdFx0YWNjb3VudElkOiB1c2VySW5mby5pZC50b1N0cmluZygpLFxuXHRcdFx0XHRcdHVzZXJJZDogZGJVc2VyLnVzZXIuaWQsXG5cdFx0XHRcdFx0YWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRcdGlkVG9rZW46IGFjY291bnQuaWRUb2tlbixcblx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdHNjb3BlOiBhY2NvdW50LnNjb3BlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRsb2dnZXIuZXJyb3IoXCJVbmFibGUgdG8gbGluayBhY2NvdW50XCIsIGUpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGVycm9yOiBcInVuYWJsZSB0byBsaW5rIGFjY291bnRcIixcblx0XHRcdFx0XHRkYXRhOiBudWxsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRpZiAodXNlckluZm8uZW1haWxWZXJpZmllZCAmJiAhZGJVc2VyLnVzZXIuZW1haWxWZXJpZmllZCAmJiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCkgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGRiVXNlci51c2VyLmlkLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGZyZXNoVG9rZW5zID0gYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8udXBkYXRlQWNjb3VudE9uU2lnbkluICE9PSBmYWxzZSA/IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh7XG5cdFx0XHRcdGlkVG9rZW46IGFjY291bnQuaWRUb2tlbixcblx0XHRcdFx0YWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogYWNjb3VudC5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHNjb3BlOiBhY2NvdW50LnNjb3BlXG5cdFx0XHR9KS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB2b2lkIDApKSA6IHt9O1xuXHRcdFx0aWYgKGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkgYXdhaXQgc2V0QWNjb3VudENvb2tpZShjLCB7XG5cdFx0XHRcdC4uLmxpbmtlZEFjY291bnQsXG5cdFx0XHRcdC4uLmZyZXNoVG9rZW5zXG5cdFx0XHR9KTtcblx0XHRcdGlmIChPYmplY3Qua2V5cyhmcmVzaFRva2VucykubGVuZ3RoID4gMCkgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGxpbmtlZEFjY291bnQuaWQsIGZyZXNoVG9rZW5zKTtcblx0XHRcdGlmICh1c2VySW5mby5lbWFpbFZlcmlmaWVkICYmICFkYlVzZXIudXNlci5lbWFpbFZlcmlmaWVkICYmIHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkgPT09IGRiVXNlci51c2VyLmVtYWlsKSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoZGJVc2VyLnVzZXIuaWQsIHsgZW1haWxWZXJpZmllZDogdHJ1ZSB9KTtcblx0XHR9XG5cdFx0aWYgKG92ZXJyaWRlVXNlckluZm8pIHtcblx0XHRcdGNvbnN0IHsgaWQ6IF8sIC4uLnJlc3RVc2VySW5mbyB9ID0gdXNlckluZm87XG5cdFx0XHR1c2VyID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGRiVXNlci51c2VyLmlkLCB7XG5cdFx0XHRcdC4uLnJlc3RVc2VySW5mbyxcblx0XHRcdFx0ZW1haWw6IHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkgPT09IGRiVXNlci51c2VyLmVtYWlsID8gZGJVc2VyLnVzZXIuZW1haWxWZXJpZmllZCB8fCB1c2VySW5mby5lbWFpbFZlcmlmaWVkIDogdXNlckluZm8uZW1haWxWZXJpZmllZFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGlmIChkaXNhYmxlU2lnblVwKSByZXR1cm4ge1xuXHRcdFx0ZXJyb3I6IFwic2lnbnVwIGRpc2FibGVkXCIsXG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHR9O1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB7IGlkOiBfLCAuLi5yZXN0VXNlckluZm8gfSA9IHVzZXJJbmZvO1xuXHRcdFx0Y29uc3QgYWNjb3VudERhdGEgPSB7XG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5yZWZyZXNoVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdGlkVG9rZW46IGFjY291bnQuaWRUb2tlbixcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogYWNjb3VudC5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHNjb3BlOiBhY2NvdW50LnNjb3BlLFxuXHRcdFx0XHRwcm92aWRlcklkOiBhY2NvdW50LnByb3ZpZGVySWQsXG5cdFx0XHRcdGFjY291bnRJZDogdXNlckluZm8uaWQudG9TdHJpbmcoKVxuXHRcdFx0fTtcblx0XHRcdGNvbnN0IHsgdXNlcjogY3JlYXRlZFVzZXIsIGFjY291bnQ6IGNyZWF0ZWRBY2NvdW50IH0gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZU9BdXRoVXNlcih7XG5cdFx0XHRcdC4uLnJlc3RVc2VySW5mbyxcblx0XHRcdFx0ZW1haWw6IHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKClcblx0XHRcdH0sIGFjY291bnREYXRhKTtcblx0XHRcdHVzZXIgPSBjcmVhdGVkVXNlcjtcblx0XHRcdGlmIChjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIGF3YWl0IHNldEFjY291bnRDb29raWUoYywgY3JlYXRlZEFjY291bnQpO1xuXHRcdFx0aWYgKCF1c2VySW5mby5lbWFpbFZlcmlmaWVkICYmIHVzZXIgJiYgYy5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRPblNpZ25VcCAmJiBjLmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0XHRcdGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjLmNvbnRleHQuc2VjcmV0LCB1c2VyLmVtYWlsLCB2b2lkIDAsIGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0XHRjb25zdCB1cmwgPSBgJHtjLmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0XHRcdFx0YXdhaXQgYy5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoYy5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRcdHVybCxcblx0XHRcdFx0XHR0b2tlblxuXHRcdFx0XHR9LCBjLnJlcXVlc3QpKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRsb2dnZXIuZXJyb3IoZSk7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yKSByZXR1cm4ge1xuXHRcdFx0XHRlcnJvcjogZS5tZXNzYWdlLFxuXHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRpc1JlZ2lzdGVyOiBmYWxzZVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGVycm9yOiBcInVuYWJsZSB0byBjcmVhdGUgdXNlclwiLFxuXHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRpc1JlZ2lzdGVyOiBmYWxzZVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0aWYgKCF1c2VyKSByZXR1cm4ge1xuXHRcdGVycm9yOiBcInVuYWJsZSB0byBjcmVhdGUgdXNlclwiLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0fTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLmlkKTtcblx0aWYgKCFzZXNzaW9uKSByZXR1cm4ge1xuXHRcdGVycm9yOiBcInVuYWJsZSB0byBjcmVhdGUgc2Vzc2lvblwiLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0fTtcblx0cmV0dXJuIHtcblx0XHRkYXRhOiB7XG5cdFx0XHRzZXNzaW9uLFxuXHRcdFx0dXNlclxuXHRcdH0sXG5cdFx0ZXJyb3I6IG51bGwsXG5cdFx0aXNSZWdpc3RlclxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGhhbmRsZU9BdXRoVXNlckluZm8gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpbmstYWNjb3VudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateState: () => (/* binding */ generateState),\n/* harmony export */   parseState: () => (/* binding */ parseState)\n/* harmony export */ });\n/* harmony import */ var _api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/middlewares/oauth.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/random.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/state.ts\nasync function generateState(c, link, additionalData) {\n\tconst callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n\tif (!callbackURL) throw new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"callbackURL is required\" });\n\tconst codeVerifier = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(128);\n\tconst stateData = {\n\t\t...additionalData ? additionalData : {},\n\t\tcallbackURL,\n\t\tcodeVerifier,\n\t\terrorURL: c.body?.errorCallbackURL,\n\t\tnewUserURL: c.body?.newUserCallbackURL,\n\t\tlink,\n\t\texpiresAt: Date.now() + 600 * 1e3,\n\t\trequestSignUp: c.body?.requestSignUp\n\t};\n\tawait (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(stateData);\n\ttry {\n\t\treturn (0,_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateGenericState)(c, stateData);\n\t} catch (error) {\n\t\tc.context.logger.error(\"Failed to create verification\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\tmessage: \"Unable to create verification\",\n\t\t\tcause: error\n\t\t});\n\t}\n}\nasync function parseState(c) {\n\tconst state = c.query.state || c.body.state;\n\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tlet parsedData;\n\ttry {\n\t\tparsedData = await (0,_state_mjs__WEBPACK_IMPORTED_MODULE_3__.parseGenericState)(c, state);\n\t} catch (error) {\n\t\tc.context.logger.error(\"Failed to parse state\", error);\n\t\tif (error instanceof _state_mjs__WEBPACK_IMPORTED_MODULE_3__.StateError && error.code === \"state_security_mismatch\") throw c.redirect(`${errorURL}?error=state_mismatch`);\n\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t}\n\tif (!parsedData.errorURL) parsedData.errorURL = errorURL;\n\tif (parsedData) await (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(parsedData);\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3Qvb2F1dGgyL3N0YXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZEO0FBQ0Q7QUFDL0I7QUFDc0Q7QUFDNUM7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBUSxrQkFBa0Isb0NBQW9DO0FBQzNGLHNCQUFzQix3RUFBb0I7QUFDMUM7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8seUVBQWE7QUFDcEI7QUFDQSxTQUFTLGdFQUFvQjtBQUM3QixHQUFHO0FBQ0g7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Qsa0JBQWtCO0FBQ2pGO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQWlCO0FBQ3RDLEdBQUc7QUFDSDtBQUNBLHVCQUF1QixrREFBVSxrRUFBa0UsU0FBUztBQUM1RyxzQkFBc0IsU0FBUztBQUMvQjtBQUNBO0FBQ0EsdUJBQXVCLHlFQUFhO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDcUM7QUFDckMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcb2F1dGgyXFxzdGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0T0F1dGhTdGF0ZSB9IGZyb20gXCIuLi9hcGkvbWlkZGxld2FyZXMvb2F1dGgubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IFwiLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgU3RhdGVFcnJvciwgZ2VuZXJhdGVHZW5lcmljU3RhdGUsIHBhcnNlR2VuZXJpY1N0YXRlIH0gZnJvbSBcIi4uL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy9vYXV0aDIvc3RhdGUudHNcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlU3RhdGUoYywgbGluaywgYWRkaXRpb25hbERhdGEpIHtcblx0Y29uc3QgY2FsbGJhY2tVUkwgPSBjLmJvZHk/LmNhbGxiYWNrVVJMIHx8IGMuY29udGV4dC5vcHRpb25zLmJhc2VVUkw7XG5cdGlmICghY2FsbGJhY2tVUkwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJjYWxsYmFja1VSTCBpcyByZXF1aXJlZFwiIH0pO1xuXHRjb25zdCBjb2RlVmVyaWZpZXIgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygxMjgpO1xuXHRjb25zdCBzdGF0ZURhdGEgPSB7XG5cdFx0Li4uYWRkaXRpb25hbERhdGEgPyBhZGRpdGlvbmFsRGF0YSA6IHt9LFxuXHRcdGNhbGxiYWNrVVJMLFxuXHRcdGNvZGVWZXJpZmllcixcblx0XHRlcnJvclVSTDogYy5ib2R5Py5lcnJvckNhbGxiYWNrVVJMLFxuXHRcdG5ld1VzZXJVUkw6IGMuYm9keT8ubmV3VXNlckNhbGxiYWNrVVJMLFxuXHRcdGxpbmssXG5cdFx0ZXhwaXJlc0F0OiBEYXRlLm5vdygpICsgNjAwICogMWUzLFxuXHRcdHJlcXVlc3RTaWduVXA6IGMuYm9keT8ucmVxdWVzdFNpZ25VcFxuXHR9O1xuXHRhd2FpdCBzZXRPQXV0aFN0YXRlKHN0YXRlRGF0YSk7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGdlbmVyYXRlR2VuZXJpY1N0YXRlKGMsIHN0YXRlRGF0YSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgdmVyaWZpY2F0aW9uXCIsIGVycm9yKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwge1xuXHRcdFx0bWVzc2FnZTogXCJVbmFibGUgdG8gY3JlYXRlIHZlcmlmaWNhdGlvblwiLFxuXHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0fSk7XG5cdH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlU3RhdGUoYykge1xuXHRjb25zdCBzdGF0ZSA9IGMucXVlcnkuc3RhdGUgfHwgYy5ib2R5LnN0YXRlO1xuXHRjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdGxldCBwYXJzZWREYXRhO1xuXHR0cnkge1xuXHRcdHBhcnNlZERhdGEgPSBhd2FpdCBwYXJzZUdlbmVyaWNTdGF0ZShjLCBzdGF0ZSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBwYXJzZSBzdGF0ZVwiLCBlcnJvcik7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgU3RhdGVFcnJvciAmJiBlcnJvci5jb2RlID09PSBcInN0YXRlX3NlY3VyaXR5X21pc21hdGNoXCIpIHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPXN0YXRlX21pc21hdGNoYCk7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9cGxlYXNlX3Jlc3RhcnRfdGhlX3Byb2Nlc3NgKTtcblx0fVxuXHRpZiAoIXBhcnNlZERhdGEuZXJyb3JVUkwpIHBhcnNlZERhdGEuZXJyb3JVUkwgPSBlcnJvclVSTDtcblx0aWYgKHBhcnNlZERhdGEpIGF3YWl0IHNldE9BdXRoU3RhdGUocGFyc2VkRGF0YSk7XG5cdHJldHVybiBwYXJzZWREYXRhO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdlbmVyYXRlU3RhdGUsIHBhcnNlU3RhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptOAuthToken: () => (/* binding */ decryptOAuthToken),\n/* harmony export */   setTokenUtil: () => (/* binding */ setTokenUtil)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n\n\n//#region src/oauth2/utils.ts\nfunction decryptOAuthToken(token, ctx) {\n\tif (!token) return token;\n\tif (ctx.options.account?.encryptOAuthTokens) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\nfunction setTokenUtil(token, ctx) {\n\tif (ctx.options.account?.encryptOAuthTokens && token) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3Qvb2F1dGgyL3V0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUU7O0FBRXpFO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxtRUFBZ0I7QUFDckU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsbUVBQWdCO0FBQzlFO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxvYXV0aDJcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzeW1tZXRyaWNEZWNyeXB0LCBzeW1tZXRyaWNFbmNyeXB0IH0gZnJvbSBcIi4uL2NyeXB0by9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9vYXV0aDIvdXRpbHMudHNcbmZ1bmN0aW9uIGRlY3J5cHRPQXV0aFRva2VuKHRva2VuLCBjdHgpIHtcblx0aWYgKCF0b2tlbikgcmV0dXJuIHRva2VuO1xuXHRpZiAoY3R4Lm9wdGlvbnMuYWNjb3VudD8uZW5jcnlwdE9BdXRoVG9rZW5zKSByZXR1cm4gc3ltbWV0cmljRGVjcnlwdCh7XG5cdFx0a2V5OiBjdHguc2VjcmV0LFxuXHRcdGRhdGE6IHRva2VuXG5cdH0pO1xuXHRyZXR1cm4gdG9rZW47XG59XG5mdW5jdGlvbiBzZXRUb2tlblV0aWwodG9rZW4sIGN0eCkge1xuXHRpZiAoY3R4Lm9wdGlvbnMuYWNjb3VudD8uZW5jcnlwdE9BdXRoVG9rZW5zICYmIHRva2VuKSByZXR1cm4gc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0a2V5OiBjdHguc2VjcmV0LFxuXHRcdGRhdGE6IHRva2VuXG5cdH0pO1xuXHRyZXR1cm4gdG9rZW47XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVjcnlwdE9BdXRoVG9rZW4sIHNldFRva2VuVXRpbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateError: () => (/* binding */ StateError),\n/* harmony export */   generateGenericState: () => (/* binding */ generateGenericState),\n/* harmony export */   parseGenericState: () => (/* binding */ parseGenericState)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto/random.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cookies/index.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(action-browser)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n\n//#region src/state.ts\nconst stateDataSchema = zod__WEBPACK_IMPORTED_MODULE_4__.looseObject({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\tcodeVerifier: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\terrorURL: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n\tnewUserURL: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_4__.number(),\n\tlink: zod__WEBPACK_IMPORTED_MODULE_4__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_4__.coerce.string()\n\t}).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().optional()\n});\nvar StateError = class extends _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError {\n\tcode;\n\tdetails;\n\tconstructor(message, options) {\n\t\tsuper(message, options);\n\t\tthis.code = options.code;\n\t\tthis.details = options.details;\n\t}\n};\nasync function generateGenericState(c, stateData, settings) {\n\tconst state = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32);\n\tif (c.context.oauthConfig.storeStateStrategy === \"cookie\") {\n\t\tconst encryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncrypt)({\n\t\t\tkey: c.context.secret,\n\t\t\tdata: JSON.stringify(stateData)\n\t\t});\n\t\tconst stateCookie$1 = c.context.createAuthCookie(settings?.cookieName ?? \"oauth_state\", { maxAge: 600 });\n\t\tc.setCookie(stateCookie$1.name, encryptedData, stateCookie$1.attributes);\n\t\treturn {\n\t\t\tstate,\n\t\t\tcodeVerifier: stateData.codeVerifier\n\t\t};\n\t}\n\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"state\", { maxAge: 300 });\n\tawait c.setSignedCookie(stateCookie.name, state, c.context.secret, stateCookie.attributes);\n\tconst expiresAt = /* @__PURE__ */ new Date();\n\texpiresAt.setMinutes(expiresAt.getMinutes() + 10);\n\tconst verification = await c.context.internalAdapter.createVerificationValue({\n\t\tvalue: JSON.stringify(stateData),\n\t\tidentifier: state,\n\t\texpiresAt\n\t});\n\tif (!verification) throw new StateError(\"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\", { code: \"state_generation_error\" });\n\treturn {\n\t\tstate: verification.identifier,\n\t\tcodeVerifier: stateData.codeVerifier\n\t};\n}\nasync function parseGenericState(c, state, settings) {\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\tlet parsedData;\n\tif (storeStateStrategy === \"cookie\") {\n\t\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"oauth_state\");\n\t\tconst encryptedData = c.getCookie(stateCookie.name);\n\t\tif (!encryptedData) throw new StateError(\"State mismatch: auth state cookie not found\", {\n\t\t\tcode: \"state_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\ttry {\n\t\t\tconst decryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecrypt)({\n\t\t\t\tkey: c.context.secret,\n\t\t\t\tdata: encryptedData\n\t\t\t});\n\t\t\tparsedData = stateDataSchema.parse(JSON.parse(decryptedData));\n\t\t} catch (error) {\n\t\t\tthrow new StateError(\"State invalid: Failed to decrypt or parse auth state\", {\n\t\t\t\tcode: \"state_invalid\",\n\t\t\t\tdetails: { state },\n\t\t\t\tcause: error\n\t\t\t});\n\t\t}\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(c, stateCookie);\n\t} else {\n\t\tconst data = await c.context.internalAdapter.findVerificationValue(state);\n\t\tif (!data) throw new StateError(\"State mismatch: verification not found\", {\n\t\t\tcode: \"state_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\tparsedData = stateDataSchema.parse(JSON.parse(data.value));\n\t\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"state\");\n\t\tconst stateCookieValue = await c.getSignedCookie(stateCookie.name, c.context.secret);\n\t\tif (!c.context.oauthConfig.skipStateCookieCheck && (!stateCookieValue || stateCookieValue !== state)) throw new StateError(\"State mismatch: State not persisted correctly\", {\n\t\t\tcode: \"state_security_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(c, stateCookie);\n\t\tawait c.context.internalAdapter.deleteVerificationValue(data.id);\n\t}\n\tif (parsedData.expiresAt < Date.now()) throw new StateError(\"Invalid state: request expired\", {\n\t\tcode: \"state_mismatch\",\n\t\tdetails: { expiresAt: parsedData.expiresAt }\n\t});\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3Qvc3RhdGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ2E7QUFDckI7QUFDTztBQUNqQzs7QUFFekI7QUFDQSx3QkFBd0IsNENBQWE7QUFDckMsY0FBYyx1Q0FBUTtBQUN0QixlQUFlLHVDQUFRO0FBQ3ZCLFdBQVcsdUNBQVE7QUFDbkIsYUFBYSx1Q0FBUTtBQUNyQixZQUFZLHVDQUFRO0FBQ3BCLE9BQU8sdUNBQVE7QUFDZixTQUFTLHVDQUFRO0FBQ2pCLFVBQVUsOENBQWU7QUFDekIsRUFBRTtBQUNGLGdCQUFnQix3Q0FBUztBQUN6QixDQUFDO0FBQ0QsK0JBQStCLG9FQUFlO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0VBQW9CO0FBQ25DO0FBQ0EsOEJBQThCLG1FQUFnQjtBQUM5QztBQUNBO0FBQ0EsR0FBRztBQUNILDRGQUE0RixhQUFhO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRixhQUFhO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLGtMQUFrTCxnQ0FBZ0M7QUFDbE47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsR0FBRztBQUNIO0FBQ0EsK0JBQStCLG1FQUFnQjtBQUMvQztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFLGdFQUFZO0FBQ2QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxHQUFHO0FBQ0gsRUFBRSxnRUFBWTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQytEO0FBQy9EIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHN0YXRlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgeyBzeW1tZXRyaWNEZWNyeXB0LCBzeW1tZXRyaWNFbmNyeXB0IH0gZnJvbSBcIi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZXhwaXJlQ29va2llIH0gZnJvbSBcIi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5cbi8vI3JlZ2lvbiBzcmMvc3RhdGUudHNcbmNvbnN0IHN0YXRlRGF0YVNjaGVtYSA9IHoubG9vc2VPYmplY3Qoe1xuXHRjYWxsYmFja1VSTDogei5zdHJpbmcoKSxcblx0Y29kZVZlcmlmaWVyOiB6LnN0cmluZygpLFxuXHRlcnJvclVSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRuZXdVc2VyVVJMOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGV4cGlyZXNBdDogei5udW1iZXIoKSxcblx0bGluazogei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LnN0cmluZygpLFxuXHRcdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKClcblx0fSkub3B0aW9uYWwoKSxcblx0cmVxdWVzdFNpZ25VcDogei5ib29sZWFuKCkub3B0aW9uYWwoKVxufSk7XG52YXIgU3RhdGVFcnJvciA9IGNsYXNzIGV4dGVuZHMgQmV0dGVyQXV0aEVycm9yIHtcblx0Y29kZTtcblx0ZGV0YWlscztcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuXHRcdHN1cGVyKG1lc3NhZ2UsIG9wdGlvbnMpO1xuXHRcdHRoaXMuY29kZSA9IG9wdGlvbnMuY29kZTtcblx0XHR0aGlzLmRldGFpbHMgPSBvcHRpb25zLmRldGFpbHM7XG5cdH1cbn07XG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUdlbmVyaWNTdGF0ZShjLCBzdGF0ZURhdGEsIHNldHRpbmdzKSB7XG5cdGNvbnN0IHN0YXRlID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIpO1xuXHRpZiAoYy5jb250ZXh0Lm9hdXRoQ29uZmlnLnN0b3JlU3RhdGVTdHJhdGVneSA9PT0gXCJjb29raWVcIikge1xuXHRcdGNvbnN0IGVuY3J5cHRlZERhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNyeXB0KHtcblx0XHRcdGtleTogYy5jb250ZXh0LnNlY3JldCxcblx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlRGF0YSlcblx0XHR9KTtcblx0XHRjb25zdCBzdGF0ZUNvb2tpZSQxID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoc2V0dGluZ3M/LmNvb2tpZU5hbWUgPz8gXCJvYXV0aF9zdGF0ZVwiLCB7IG1heEFnZTogNjAwIH0pO1xuXHRcdGMuc2V0Q29va2llKHN0YXRlQ29va2llJDEubmFtZSwgZW5jcnlwdGVkRGF0YSwgc3RhdGVDb29raWUkMS5hdHRyaWJ1dGVzKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RhdGUsXG5cdFx0XHRjb2RlVmVyaWZpZXI6IHN0YXRlRGF0YS5jb2RlVmVyaWZpZXJcblx0XHR9O1xuXHR9XG5cdGNvbnN0IHN0YXRlQ29va2llID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoc2V0dGluZ3M/LmNvb2tpZU5hbWUgPz8gXCJzdGF0ZVwiLCB7IG1heEFnZTogMzAwIH0pO1xuXHRhd2FpdCBjLnNldFNpZ25lZENvb2tpZShzdGF0ZUNvb2tpZS5uYW1lLCBzdGF0ZSwgYy5jb250ZXh0LnNlY3JldCwgc3RhdGVDb29raWUuYXR0cmlidXRlcyk7XG5cdGNvbnN0IGV4cGlyZXNBdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuXHRleHBpcmVzQXQuc2V0TWludXRlcyhleHBpcmVzQXQuZ2V0TWludXRlcygpICsgMTApO1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHR2YWx1ZTogSlNPTi5zdHJpbmdpZnkoc3RhdGVEYXRhKSxcblx0XHRpZGVudGlmaWVyOiBzdGF0ZSxcblx0XHRleHBpcmVzQXRcblx0fSk7XG5cdGlmICghdmVyaWZpY2F0aW9uKSB0aHJvdyBuZXcgU3RhdGVFcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgdmVyaWZpY2F0aW9uLiBNYWtlIHN1cmUgdGhlIGRhdGFiYXNlIGFkYXB0ZXIgaXMgcHJvcGVybHkgd29ya2luZyBhbmQgdGhlcmUgaXMgYSB2ZXJpZmljYXRpb24gdGFibGUgaW4gdGhlIGRhdGFiYXNlXCIsIHsgY29kZTogXCJzdGF0ZV9nZW5lcmF0aW9uX2Vycm9yXCIgfSk7XG5cdHJldHVybiB7XG5cdFx0c3RhdGU6IHZlcmlmaWNhdGlvbi5pZGVudGlmaWVyLFxuXHRcdGNvZGVWZXJpZmllcjogc3RhdGVEYXRhLmNvZGVWZXJpZmllclxuXHR9O1xufVxuYXN5bmMgZnVuY3Rpb24gcGFyc2VHZW5lcmljU3RhdGUoYywgc3RhdGUsIHNldHRpbmdzKSB7XG5cdGNvbnN0IHN0b3JlU3RhdGVTdHJhdGVneSA9IGMuY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3k7XG5cdGxldCBwYXJzZWREYXRhO1xuXHRpZiAoc3RvcmVTdGF0ZVN0cmF0ZWd5ID09PSBcImNvb2tpZVwiKSB7XG5cdFx0Y29uc3Qgc3RhdGVDb29raWUgPSBjLmNvbnRleHQuY3JlYXRlQXV0aENvb2tpZShzZXR0aW5ncz8uY29va2llTmFtZSA/PyBcIm9hdXRoX3N0YXRlXCIpO1xuXHRcdGNvbnN0IGVuY3J5cHRlZERhdGEgPSBjLmdldENvb2tpZShzdGF0ZUNvb2tpZS5uYW1lKTtcblx0XHRpZiAoIWVuY3J5cHRlZERhdGEpIHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgbWlzbWF0Y2g6IGF1dGggc3RhdGUgY29va2llIG5vdCBmb3VuZFwiLCB7XG5cdFx0XHRjb2RlOiBcInN0YXRlX21pc21hdGNoXCIsXG5cdFx0XHRkZXRhaWxzOiB7IHN0YXRlIH1cblx0XHR9KTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZGVjcnlwdGVkRGF0YSA9IGF3YWl0IHN5bW1ldHJpY0RlY3J5cHQoe1xuXHRcdFx0XHRrZXk6IGMuY29udGV4dC5zZWNyZXQsXG5cdFx0XHRcdGRhdGE6IGVuY3J5cHRlZERhdGFcblx0XHRcdH0pO1xuXHRcdFx0cGFyc2VkRGF0YSA9IHN0YXRlRGF0YVNjaGVtYS5wYXJzZShKU09OLnBhcnNlKGRlY3J5cHRlZERhdGEpKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IFN0YXRlRXJyb3IoXCJTdGF0ZSBpbnZhbGlkOiBGYWlsZWQgdG8gZGVjcnlwdCBvciBwYXJzZSBhdXRoIHN0YXRlXCIsIHtcblx0XHRcdFx0Y29kZTogXCJzdGF0ZV9pbnZhbGlkXCIsXG5cdFx0XHRcdGRldGFpbHM6IHsgc3RhdGUgfSxcblx0XHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZXhwaXJlQ29va2llKGMsIHN0YXRlQ29va2llKTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoc3RhdGUpO1xuXHRcdGlmICghZGF0YSkgdGhyb3cgbmV3IFN0YXRlRXJyb3IoXCJTdGF0ZSBtaXNtYXRjaDogdmVyaWZpY2F0aW9uIG5vdCBmb3VuZFwiLCB7XG5cdFx0XHRjb2RlOiBcInN0YXRlX21pc21hdGNoXCIsXG5cdFx0XHRkZXRhaWxzOiB7IHN0YXRlIH1cblx0XHR9KTtcblx0XHRwYXJzZWREYXRhID0gc3RhdGVEYXRhU2NoZW1hLnBhcnNlKEpTT04ucGFyc2UoZGF0YS52YWx1ZSkpO1xuXHRcdGNvbnN0IHN0YXRlQ29va2llID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoc2V0dGluZ3M/LmNvb2tpZU5hbWUgPz8gXCJzdGF0ZVwiKTtcblx0XHRjb25zdCBzdGF0ZUNvb2tpZVZhbHVlID0gYXdhaXQgYy5nZXRTaWduZWRDb29raWUoc3RhdGVDb29raWUubmFtZSwgYy5jb250ZXh0LnNlY3JldCk7XG5cdFx0aWYgKCFjLmNvbnRleHQub2F1dGhDb25maWcuc2tpcFN0YXRlQ29va2llQ2hlY2sgJiYgKCFzdGF0ZUNvb2tpZVZhbHVlIHx8IHN0YXRlQ29va2llVmFsdWUgIT09IHN0YXRlKSkgdGhyb3cgbmV3IFN0YXRlRXJyb3IoXCJTdGF0ZSBtaXNtYXRjaDogU3RhdGUgbm90IHBlcnNpc3RlZCBjb3JyZWN0bHlcIiwge1xuXHRcdFx0Y29kZTogXCJzdGF0ZV9zZWN1cml0eV9taXNtYXRjaFwiLFxuXHRcdFx0ZGV0YWlsczogeyBzdGF0ZSB9XG5cdFx0fSk7XG5cdFx0ZXhwaXJlQ29va2llKGMsIHN0YXRlQ29va2llKTtcblx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKGRhdGEuaWQpO1xuXHR9XG5cdGlmIChwYXJzZWREYXRhLmV4cGlyZXNBdCA8IERhdGUubm93KCkpIHRocm93IG5ldyBTdGF0ZUVycm9yKFwiSW52YWxpZCBzdGF0ZTogcmVxdWVzdCBleHBpcmVkXCIsIHtcblx0XHRjb2RlOiBcInN0YXRlX21pc21hdGNoXCIsXG5cdFx0ZGV0YWlsczogeyBleHBpcmVzQXQ6IHBhcnNlZERhdGEuZXhwaXJlc0F0IH1cblx0fSk7XG5cdHJldHVybiBwYXJzZWREYXRhO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFN0YXRlRXJyb3IsIGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBwYXJzZUdlbmVyaWNTdGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SECRET: () => (/* binding */ DEFAULT_SECRET)\n/* harmony export */ });\n//#region src/utils/constants.ts\nconst DEFAULT_SECRET = \"better-auth-secret-12345678901234567890\";\n\n//#endregion\n\n//# sourceMappingURL=constants.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvY29uc3RhbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcY29uc3RhbnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL2NvbnN0YW50cy50c1xuY29uc3QgREVGQVVMVF9TRUNSRVQgPSBcImJldHRlci1hdXRoLXNlY3JldC0xMjM0NTY3ODkwMTIzNDU2Nzg5MFwiO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IERFRkFVTFRfU0VDUkVUIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDate: () => (/* binding */ getDate)\n/* harmony export */ });\n//#region src/utils/date.ts\nconst getDate = (span, unit = \"ms\") => {\n\treturn new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\n//#endregion\n\n//# sourceMappingURL=date.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvZGF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFxkYXRlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL2RhdGUudHNcbmNvbnN0IGdldERhdGUgPSAoc3BhbiwgdW5pdCA9IFwibXNcIikgPT4ge1xuXHRyZXR1cm4gbmV3IERhdGUoRGF0ZS5ub3coKSArICh1bml0ID09PSBcInNlY1wiID8gc3BhbiAqIDFlMyA6IHNwYW4pKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0RGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0ZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIp: () => (/* binding */ getIp)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n//#region src/utils/get-request-ip.ts\nconst LOCALHOST_IP = \"127.0.0.1\";\nfunction getIp(req, options) {\n\tif (options.advanced?.ipAddress?.disableIpTracking) return null;\n\tconst headers = \"headers\" in req ? req.headers : req;\n\tconst ipHeaders = options.advanced?.ipAddress?.ipAddressHeaders || [\"x-forwarded-for\"];\n\tfor (const key of ipHeaders) {\n\t\tconst value = \"get\" in headers ? headers.get(key) : headers[key];\n\t\tif (typeof value === \"string\") {\n\t\t\tconst ip = value.split(\",\")[0].trim();\n\t\t\tif ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__.isValidIP)(ip)) return (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__.normalizeIP)(ip, { ipv6Subnet: options.advanced?.ipAddress?.ipv6Subnet });\n\t\t}\n\t}\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isTest)() || (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) return LOCALHOST_IP;\n\treturn null;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-request-ip.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4RDtBQUNHOztBQUVqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sa0VBQVMsYUFBYSxvRUFBVyxPQUFPLHFEQUFxRDtBQUNwRztBQUNBO0FBQ0EsS0FBSyw2REFBTSxNQUFNLG9FQUFhO0FBQzlCO0FBQ0E7O0FBRUE7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGdldC1yZXF1ZXN0LWlwLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0RldmVsb3BtZW50LCBpc1Rlc3QgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBpc1ZhbGlkSVAsIG5vcm1hbGl6ZUlQIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvZ2V0LXJlcXVlc3QtaXAudHNcbmNvbnN0IExPQ0FMSE9TVF9JUCA9IFwiMTI3LjAuMC4xXCI7XG5mdW5jdGlvbiBnZXRJcChyZXEsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmlwQWRkcmVzcz8uZGlzYWJsZUlwVHJhY2tpbmcpIHJldHVybiBudWxsO1xuXHRjb25zdCBoZWFkZXJzID0gXCJoZWFkZXJzXCIgaW4gcmVxID8gcmVxLmhlYWRlcnMgOiByZXE7XG5cdGNvbnN0IGlwSGVhZGVycyA9IG9wdGlvbnMuYWR2YW5jZWQ/LmlwQWRkcmVzcz8uaXBBZGRyZXNzSGVhZGVycyB8fCBbXCJ4LWZvcndhcmRlZC1mb3JcIl07XG5cdGZvciAoY29uc3Qga2V5IG9mIGlwSGVhZGVycykge1xuXHRcdGNvbnN0IHZhbHVlID0gXCJnZXRcIiBpbiBoZWFkZXJzID8gaGVhZGVycy5nZXQoa2V5KSA6IGhlYWRlcnNba2V5XTtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRjb25zdCBpcCA9IHZhbHVlLnNwbGl0KFwiLFwiKVswXS50cmltKCk7XG5cdFx0XHRpZiAoaXNWYWxpZElQKGlwKSkgcmV0dXJuIG5vcm1hbGl6ZUlQKGlwLCB7IGlwdjZTdWJuZXQ6IG9wdGlvbnMuYWR2YW5jZWQ/LmlwQWRkcmVzcz8uaXB2NlN1Ym5ldCB9KTtcblx0XHR9XG5cdH1cblx0aWYgKGlzVGVzdCgpIHx8IGlzRGV2ZWxvcG1lbnQoKSkgcmV0dXJuIExPQ0FMSE9TVF9JUDtcblx0cmV0dXJuIG51bGw7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0SXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1yZXF1ZXN0LWlwLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HIDE_METADATA: () => (/* binding */ HIDE_METADATA)\n/* harmony export */ });\n//#region src/utils/hide-metadata.ts\nconst HIDE_METADATA = { scope: \"server\" };\n\n//#endregion\n\n//# sourceMappingURL=hide-metadata.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvaGlkZS1tZXRhZGF0YS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0Esd0JBQXdCOztBQUV4QjtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaGlkZS1tZXRhZGF0YS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9oaWRlLW1ldGFkYXRhLnRzXG5jb25zdCBISURFX01FVEFEQVRBID0geyBzY29wZTogXCJzZXJ2ZXJcIiB9O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEhJREVfTUVUQURBVEEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhpZGUtbWV0YWRhdGEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs ***!
  \***************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateId: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__.generateId)\n/* harmony export */ });\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../oauth2/state.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hide-metadata.mjs */ \"(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/utils */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVFO0FBQ1A7QUFDWjtBQUNpQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBwYXJzZUdlbmVyaWNTdGF0ZSB9IGZyb20gXCIuLi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3RhdGUsIHBhcnNlU3RhdGUgfSBmcm9tIFwiLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkIGFzIGdlbmVyYXRlSWQkMSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG5leHBvcnQgeyBnZW5lcmF0ZUlkJDEgYXMgZ2VuZXJhdGVJZCB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPromise: () => (/* binding */ isPromise)\n/* harmony export */ });\n//#region src/utils/is-promise.ts\nfunction isPromise(obj) {\n\treturn !!obj && (typeof obj === \"object\" || typeof obj === \"function\") && typeof obj.then === \"function\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-promise.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvaXMtcHJvbWlzZS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3FCO0FBQ3JCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFxpcy1wcm9taXNlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3V0aWxzL2lzLXByb21pc2UudHNcbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHtcblx0cmV0dXJuICEhb2JqICYmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIikgJiYgdHlwZW9mIG9iai50aGVuID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaXNQcm9taXNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy1wcm9taXNlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkPassword: () => (/* binding */ checkPassword),\n/* harmony export */   validatePassword: () => (/* binding */ validatePassword)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(action-browser)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n\n\n//#region src/utils/password.ts\nasync function validatePassword(ctx, data) {\n\tconst credentialAccount = (await ctx.context.internalAdapter.findAccounts(data.userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword) return false;\n\treturn await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: data.password\n\t});\n}\nasync function checkPassword(userId, c) {\n\tconst credentialAccount = (await c.context.internalAdapter.findAccounts(userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword || !c.body.password) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"No password credential found\" });\n\tif (!await c.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: c.body.password\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"Invalid password\" });\n\treturn true;\n}\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvcGFzc3dvcmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxpREFBUSxrQkFBa0IseUNBQXlDO0FBQzlJO0FBQ0E7QUFDQTtBQUNBLEVBQUUsYUFBYSxpREFBUSxrQkFBa0IsNkJBQTZCO0FBQ3RFO0FBQ0E7O0FBRUE7QUFDMkM7QUFDM0MiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHBhc3N3b3JkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL3Bhc3N3b3JkLnRzXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVBhc3N3b3JkKGN0eCwgZGF0YSkge1xuXHRjb25zdCBjcmVkZW50aWFsQWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKGRhdGEudXNlcklkKSk/LmZpbmQoKGFjY291bnQpID0+IGFjY291bnQucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3JlZGVudGlhbEFjY291bnQgfHwgIWN1cnJlbnRQYXNzd29yZCkgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQudmVyaWZ5KHtcblx0XHRoYXNoOiBjdXJyZW50UGFzc3dvcmQsXG5cdFx0cGFzc3dvcmQ6IGRhdGEucGFzc3dvcmRcblx0fSk7XG59XG5hc3luYyBmdW5jdGlvbiBjaGVja1Bhc3N3b3JkKHVzZXJJZCwgYykge1xuXHRjb25zdCBjcmVkZW50aWFsQWNjb3VudCA9IChhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyh1c2VySWQpKT8uZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIik7XG5cdGNvbnN0IGN1cnJlbnRQYXNzd29yZCA9IGNyZWRlbnRpYWxBY2NvdW50Py5wYXNzd29yZDtcblx0aWYgKCFjcmVkZW50aWFsQWNjb3VudCB8fCAhY3VycmVudFBhc3N3b3JkIHx8ICFjLmJvZHkucGFzc3dvcmQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJObyBwYXNzd29yZCBjcmVkZW50aWFsIGZvdW5kXCIgfSk7XG5cdGlmICghYXdhaXQgYy5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkOiBjLmJvZHkucGFzc3dvcmRcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJJbnZhbGlkIHBhc3N3b3JkXCIgfSk7XG5cdHJldHVybiB0cnVlO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNoZWNrUGFzc3dvcmQsIHZhbGlkYXRlUGFzc3dvcmQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhc3N3b3JkLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ms: () => (/* binding */ ms),\n/* harmony export */   sec: () => (/* binding */ sec)\n/* harmony export */ });\n//#region src/utils/time.ts\nconst SEC = 1e3;\nconst MIN = SEC * 60;\nconst HOUR = MIN * 60;\nconst DAY = HOUR * 24;\nconst WEEK = DAY * 7;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;\nfunction parse(value) {\n\tconst match = REGEX.exec(value);\n\tif (!match || match[4] && match[1]) throw new TypeError(`Invalid time string format: \"${value}\". Use formats like \"7d\", \"30m\", \"1 hour\", etc.`);\n\tconst n = parseFloat(match[2]);\n\tconst unit = match[3].toLowerCase();\n\tlet result;\n\tswitch (unit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\":\n\t\t\tresult = n * YEAR;\n\t\t\tbreak;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\":\n\t\t\tresult = n * MONTH;\n\t\t\tbreak;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\":\n\t\t\tresult = n * WEEK;\n\t\t\tbreak;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\":\n\t\t\tresult = n * DAY;\n\t\t\tbreak;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\":\n\t\t\tresult = n * HOUR;\n\t\t\tbreak;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\":\n\t\t\tresult = n * MIN;\n\t\t\tbreak;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\":\n\t\t\tresult = n * SEC;\n\t\t\tbreak;\n\t\tdefault: throw new TypeError(`Unknown time unit: \"${unit}\"`);\n\t}\n\tif (match[1] === \"-\" || match[4] === \"ago\") return -result;\n\treturn result;\n}\n/**\n* Parse a time string and return the value in milliseconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in milliseconds\n* @throws TypeError if the string format is invalid\n*\n* @example\n* ms(\"1d\")          // 86400000\n* ms(\"2 hours\")     // 7200000\n* ms(\"30s\")         // 30000\n* ms(\"2 hours ago\") // -7200000\n*/\nfunction ms(value) {\n\treturn parse(value);\n}\n/**\n* Parse a time string and return the value in seconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in seconds (rounded)\n* @throws TypeError if the string format is invalid\n*\n* @example\n* sec(\"1d\")          // 86400\n* sec(\"2 hours\")     // 7200\n* sec(\"-30s\")        // -30\n* sec(\"2 hours ago\") // -7200\n*/\nfunction sec(value) {\n\treturn Math.round(parse(value) / 1e3);\n}\n\n//#endregion\n\n//# sourceMappingURL=time.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvdGltZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUZBQXlGLE1BQU07QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxLQUFLO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcdGltZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy90aW1lLnRzXG5jb25zdCBTRUMgPSAxZTM7XG5jb25zdCBNSU4gPSBTRUMgKiA2MDtcbmNvbnN0IEhPVVIgPSBNSU4gKiA2MDtcbmNvbnN0IERBWSA9IEhPVVIgKiAyNDtcbmNvbnN0IFdFRUsgPSBEQVkgKiA3O1xuY29uc3QgTU9OVEggPSBEQVkgKiAzMDtcbmNvbnN0IFlFQVIgPSBEQVkgKiAzNjUuMjU7XG5jb25zdCBSRUdFWCA9IC9eKFxcK3xcXC0pPyA/KFxcZCt8XFxkK1xcLlxcZCspID8oc2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3xtb250aHM/fG1vfHllYXJzP3x5cnM/fHkpKD86IChhZ298ZnJvbSBub3cpKT8kL2k7XG5mdW5jdGlvbiBwYXJzZSh2YWx1ZSkge1xuXHRjb25zdCBtYXRjaCA9IFJFR0VYLmV4ZWModmFsdWUpO1xuXHRpZiAoIW1hdGNoIHx8IG1hdGNoWzRdICYmIG1hdGNoWzFdKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHRpbWUgc3RyaW5nIGZvcm1hdDogXCIke3ZhbHVlfVwiLiBVc2UgZm9ybWF0cyBsaWtlIFwiN2RcIiwgXCIzMG1cIiwgXCIxIGhvdXJcIiwgZXRjLmApO1xuXHRjb25zdCBuID0gcGFyc2VGbG9hdChtYXRjaFsyXSk7XG5cdGNvbnN0IHVuaXQgPSBtYXRjaFszXS50b0xvd2VyQ2FzZSgpO1xuXHRsZXQgcmVzdWx0O1xuXHRzd2l0Y2ggKHVuaXQpIHtcblx0XHRjYXNlIFwieWVhcnNcIjpcblx0XHRjYXNlIFwieWVhclwiOlxuXHRcdGNhc2UgXCJ5cnNcIjpcblx0XHRjYXNlIFwieXJcIjpcblx0XHRjYXNlIFwieVwiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIFlFQVI7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwibW9udGhzXCI6XG5cdFx0Y2FzZSBcIm1vbnRoXCI6XG5cdFx0Y2FzZSBcIm1vXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogTU9OVEg7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwid2Vla3NcIjpcblx0XHRjYXNlIFwid2Vla1wiOlxuXHRcdGNhc2UgXCJ3XCI6XG5cdFx0XHRyZXN1bHQgPSBuICogV0VFSztcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJkYXlzXCI6XG5cdFx0Y2FzZSBcImRheVwiOlxuXHRcdGNhc2UgXCJkXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogREFZO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImhvdXJzXCI6XG5cdFx0Y2FzZSBcImhvdXJcIjpcblx0XHRjYXNlIFwiaHJzXCI6XG5cdFx0Y2FzZSBcImhyXCI6XG5cdFx0Y2FzZSBcImhcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBIT1VSO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1pbnV0ZXNcIjpcblx0XHRjYXNlIFwibWludXRlXCI6XG5cdFx0Y2FzZSBcIm1pbnNcIjpcblx0XHRjYXNlIFwibWluXCI6XG5cdFx0Y2FzZSBcIm1cIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBNSU47XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwic2Vjb25kc1wiOlxuXHRcdGNhc2UgXCJzZWNvbmRcIjpcblx0XHRjYXNlIFwic2Vjc1wiOlxuXHRcdGNhc2UgXCJzZWNcIjpcblx0XHRjYXNlIFwic1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIFNFQztcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBUeXBlRXJyb3IoYFVua25vd24gdGltZSB1bml0OiBcIiR7dW5pdH1cImApO1xuXHR9XG5cdGlmIChtYXRjaFsxXSA9PT0gXCItXCIgfHwgbWF0Y2hbNF0gPT09IFwiYWdvXCIpIHJldHVybiAtcmVzdWx0O1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4qIFBhcnNlIGEgdGltZSBzdHJpbmcgYW5kIHJldHVybiB0aGUgdmFsdWUgaW4gbWlsbGlzZWNvbmRzLlxuKlxuKiBAcGFyYW0gdmFsdWUgLSBBIHRpbWUgc3RyaW5nIGxpa2UgXCI3ZFwiLCBcIjMwbVwiLCBcIjEgaG91clwiLCBcIjIgaG91cnMgYWdvXCJcbiogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSBpbiBtaWxsaXNlY29uZHNcbiogQHRocm93cyBUeXBlRXJyb3IgaWYgdGhlIHN0cmluZyBmb3JtYXQgaXMgaW52YWxpZFxuKlxuKiBAZXhhbXBsZVxuKiBtcyhcIjFkXCIpICAgICAgICAgIC8vIDg2NDAwMDAwXG4qIG1zKFwiMiBob3Vyc1wiKSAgICAgLy8gNzIwMDAwMFxuKiBtcyhcIjMwc1wiKSAgICAgICAgIC8vIDMwMDAwXG4qIG1zKFwiMiBob3VycyBhZ29cIikgLy8gLTcyMDAwMDBcbiovXG5mdW5jdGlvbiBtcyh2YWx1ZSkge1xuXHRyZXR1cm4gcGFyc2UodmFsdWUpO1xufVxuLyoqXG4qIFBhcnNlIGEgdGltZSBzdHJpbmcgYW5kIHJldHVybiB0aGUgdmFsdWUgaW4gc2Vjb25kcy5cbipcbiogQHBhcmFtIHZhbHVlIC0gQSB0aW1lIHN0cmluZyBsaWtlIFwiN2RcIiwgXCIzMG1cIiwgXCIxIGhvdXJcIiwgXCIyIGhvdXJzIGFnb1wiXG4qIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUgaW4gc2Vjb25kcyAocm91bmRlZClcbiogQHRocm93cyBUeXBlRXJyb3IgaWYgdGhlIHN0cmluZyBmb3JtYXQgaXMgaW52YWxpZFxuKlxuKiBAZXhhbXBsZVxuKiBzZWMoXCIxZFwiKSAgICAgICAgICAvLyA4NjQwMFxuKiBzZWMoXCIyIGhvdXJzXCIpICAgICAvLyA3MjAwXG4qIHNlYyhcIi0zMHNcIikgICAgICAgIC8vIC0zMFxuKiBzZWMoXCIyIGhvdXJzIGFnb1wiKSAvLyAtNzIwMFxuKi9cbmZ1bmN0aW9uIHNlYyh2YWx1ZSkge1xuXHRyZXR1cm4gTWF0aC5yb3VuZChwYXJzZSh2YWx1ZSkgLyAxZTMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1zLCBzZWMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(action-browser)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvdXJsLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNEM7QUFDYzs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSxvRUFBZSxzQkFBc0IsSUFBSTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLG9FQUFlLHNCQUFzQixJQUFJO0FBQzVILEdBQUc7QUFDSCx1QkFBdUIsb0VBQWU7QUFDdEMsWUFBWSxvRUFBZSxzQkFBc0IsSUFBSSx1Q0FBdUMsY0FBYztBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxLQUFLO0FBQy9DLFdBQVcsV0FBVyxFQUFFLEtBQUs7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLEtBQUsseUNBQXlDLEtBQUssdUJBQXVCLElBQUksMkJBQTJCLElBQUksSUFBSSxFQUFFLEdBQUcsSUFBSSxRQUFRLElBQUksZ0RBQWdELElBQUksd0NBQXdDLElBQUk7QUFDMVE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFHLG9CQUFvQixzREFBRyxnQ0FBZ0Msc0RBQUcsMkJBQTJCLHNEQUFHLGdDQUFnQyxzREFBRywwQkFBMEIsc0RBQUcsb0JBQW9CLHNEQUFHO0FBQ3BNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQkFBaUIsS0FBSyxZQUFZO0FBQ3hELElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0VBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUN1RDtBQUN2RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcdXJsLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbnYgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy91cmwudHNcbmZ1bmN0aW9uIGNoZWNrSGFzUGF0aCh1cmwpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gKG5ldyBVUkwodXJsKS5wYXRobmFtZS5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpIHx8IFwiL1wiKSAhPT0gXCIvXCI7XG5cdH0gY2F0Y2gge1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gKTtcblx0fVxufVxuZnVuY3Rpb24gYXNzZXJ0SGFzUHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdGlmIChwYXJzZWRVcmwucHJvdG9jb2wgIT09IFwiaHR0cDpcIiAmJiBwYXJzZWRVcmwucHJvdG9jb2wgIT09IFwiaHR0cHM6XCIpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gVVJMIG11c3QgaW5jbHVkZSAnaHR0cDovLycgb3IgJ2h0dHBzOi8vJ2ApO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEJldHRlckF1dGhFcnJvcikgdGhyb3cgZXJyb3I7XG5cdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihgSW52YWxpZCBiYXNlIFVSTDogJHt1cmx9LiBQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGJhc2UgVVJMLmAsIHsgY2F1c2U6IGVycm9yIH0pO1xuXHR9XG59XG5mdW5jdGlvbiB3aXRoUGF0aCh1cmwsIHBhdGggPSBcIi9hcGkvYXV0aFwiKSB7XG5cdGFzc2VydEhhc1Byb3RvY29sKHVybCk7XG5cdGlmIChjaGVja0hhc1BhdGgodXJsKSkgcmV0dXJuIHVybDtcblx0Y29uc3QgdHJpbW1lZFVybCA9IHVybC5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpO1xuXHRpZiAoIXBhdGggfHwgcGF0aCA9PT0gXCIvXCIpIHJldHVybiB0cmltbWVkVXJsO1xuXHRwYXRoID0gcGF0aC5zdGFydHNXaXRoKFwiL1wiKSA/IHBhdGggOiBgLyR7cGF0aH1gO1xuXHRyZXR1cm4gYCR7dHJpbW1lZFVybH0ke3BhdGh9YDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUHJveHlIZWFkZXIoaGVhZGVyLCB0eXBlKSB7XG5cdGlmICghaGVhZGVyIHx8IGhlYWRlci50cmltKCkgPT09IFwiXCIpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGUgPT09IFwicHJvdG9cIikgcmV0dXJuIGhlYWRlciA9PT0gXCJodHRwXCIgfHwgaGVhZGVyID09PSBcImh0dHBzXCI7XG5cdGlmICh0eXBlID09PSBcImhvc3RcIikge1xuXHRcdGlmIChbXG5cdFx0XHQvXFwuXFwuLyxcblx0XHRcdC9cXDAvLFxuXHRcdFx0L1tcXHNdLyxcblx0XHRcdC9eWy5dLyxcblx0XHRcdC9bPD4nXCJdLyxcblx0XHRcdC9qYXZhc2NyaXB0Oi9pLFxuXHRcdFx0L2ZpbGU6L2ksXG5cdFx0XHQvZGF0YTovaVxuXHRcdF0uc29tZSgocGF0dGVybikgPT4gcGF0dGVybi50ZXN0KGhlYWRlcikpKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIC9eW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyhcXC5bYS16QS1aMC05XShbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSooOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXihcXGR7MSwzfVxcLil7M31cXGR7MSwzfSg6WzAtOV17MSw1fSk/JC8udGVzdChoZWFkZXIpIHx8IC9eXFxbWzAtOWEtZkEtRjpdK1xcXSg6WzAtOV17MSw1fSk/JC8udGVzdChoZWFkZXIpIHx8IC9ebG9jYWxob3N0KDpbMC05XXsxLDV9KT8kL2kudGVzdChoZWFkZXIpO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldEJhc2VVUkwodXJsLCBwYXRoLCByZXF1ZXN0LCBsb2FkRW52LCB0cnVzdGVkUHJveHlIZWFkZXJzKSB7XG5cdGlmICh1cmwpIHJldHVybiB3aXRoUGF0aCh1cmwsIHBhdGgpO1xuXHRpZiAobG9hZEVudiAhPT0gZmFsc2UpIHtcblx0XHRjb25zdCBmcm9tRW52ID0gZW52LkJFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTkVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5VWFRfUFVCTElDX0FVVEhfVVJMIHx8IChlbnYuQkFTRV9VUkwgIT09IFwiL1wiID8gZW52LkJBU0VfVVJMIDogdm9pZCAwKTtcblx0XHRpZiAoZnJvbUVudikgcmV0dXJuIHdpdGhQYXRoKGZyb21FbnYsIHBhdGgpO1xuXHR9XG5cdGNvbnN0IGZyb21SZXF1ZXN0ID0gcmVxdWVzdD8uaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1ob3N0XCIpO1xuXHRjb25zdCBmcm9tUmVxdWVzdFByb3RvID0gcmVxdWVzdD8uaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1wcm90b1wiKTtcblx0aWYgKGZyb21SZXF1ZXN0ICYmIGZyb21SZXF1ZXN0UHJvdG8gJiYgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRcdGlmICh2YWxpZGF0ZVByb3h5SGVhZGVyKGZyb21SZXF1ZXN0UHJvdG8sIFwicHJvdG9cIikgJiYgdmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdCwgXCJob3N0XCIpKSB0cnkge1xuXHRcdFx0cmV0dXJuIHdpdGhQYXRoKGAke2Zyb21SZXF1ZXN0UHJvdG99Oi8vJHtmcm9tUmVxdWVzdH1gLCBwYXRoKTtcblx0XHR9IGNhdGNoIChfZXJyb3IpIHt9XG5cdH1cblx0aWYgKHJlcXVlc3QpIHtcblx0XHRjb25zdCB1cmwkMSA9IGdldE9yaWdpbihyZXF1ZXN0LnVybCk7XG5cdFx0aWYgKCF1cmwkMSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNvdWxkIG5vdCBnZXQgb3JpZ2luIGZyb20gcmVxdWVzdC4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5cIik7XG5cdFx0cmV0dXJuIHdpdGhQYXRoKHVybCQxLCBwYXRoKTtcblx0fVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24pIHJldHVybiB3aXRoUGF0aCh3aW5kb3cubG9jYXRpb24ub3JpZ2luLCBwYXRoKTtcbn1cbmZ1bmN0aW9uIGdldE9yaWdpbih1cmwpIHtcblx0dHJ5IHtcblx0XHRjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG5cdFx0cmV0dXJuIHBhcnNlZFVybC5vcmlnaW4gPT09IFwibnVsbFwiID8gbnVsbCA6IHBhcnNlZFVybC5vcmlnaW47XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5mdW5jdGlvbiBnZXRQcm90b2NvbCh1cmwpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFVSTCh1cmwpLnByb3RvY29sO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0SG9zdCh1cmwpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFVSTCh1cmwpLmhvc3Q7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0QmFzZVVSTCwgZ2V0SG9zdCwgZ2V0T3JpZ2luLCBnZXRQcm90b2NvbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXJsLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   wildcardMatch: () => (/* binding */ wildcardMatch)\n/* harmony export */ });\n//#region src/utils/wildcard.ts\n/**\n* Escapes a character if it has a special meaning in regular expressions\n* and returns the character as is if it doesn't\n*/\nfunction escapeRegExpChar(char) {\n\tif (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") return `\\\\${char}`;\n\telse return char;\n}\n/**\n* Escapes all characters in a given string that have a special meaning in regular expressions\n*/\nfunction escapeRegExpString(str) {\n\tlet result = \"\";\n\tfor (let i = 0; i < str.length; i++) result += escapeRegExpChar(str[i]);\n\treturn result;\n}\n/**\n* Transforms one or more glob patterns into a RegExp pattern\n*/\nfunction transform(pattern, separator = true) {\n\tif (Array.isArray(pattern)) return `(?:${pattern.map((p) => `^${transform(p, separator)}$`).join(\"|\")})`;\n\tlet separatorSplitter = \"\";\n\tlet separatorMatcher = \"\";\n\tlet wildcard = \".\";\n\tif (separator === true) {\n\t\tseparatorSplitter = \"/\";\n\t\tseparatorMatcher = \"[/\\\\\\\\]\";\n\t\twildcard = \"[^/\\\\\\\\]\";\n\t} else if (separator) {\n\t\tseparatorSplitter = separator;\n\t\tseparatorMatcher = escapeRegExpString(separatorSplitter);\n\t\tif (separatorMatcher.length > 1) {\n\t\t\tseparatorMatcher = `(?:${separatorMatcher})`;\n\t\t\twildcard = `((?!${separatorMatcher}).)`;\n\t\t} else wildcard = `[^${separatorMatcher}]`;\n\t}\n\tconst requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n\tconst optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n\tconst segments = separator ? pattern.split(separatorSplitter) : [pattern];\n\tlet result = \"\";\n\tfor (let s = 0; s < segments.length; s++) {\n\t\tconst segment = segments[s];\n\t\tconst nextSegment = segments[s + 1];\n\t\tlet currentSeparator = \"\";\n\t\tif (!segment && s > 0) continue;\n\t\tif (separator) if (s === segments.length - 1) currentSeparator = optionalSeparator;\n\t\telse if (nextSegment !== \"**\") currentSeparator = requiredSeparator;\n\t\telse currentSeparator = \"\";\n\t\tif (separator && segment === \"**\") {\n\t\t\tif (currentSeparator) {\n\t\t\t\tresult += s === 0 ? \"\" : currentSeparator;\n\t\t\t\tresult += `(?:${wildcard}*?${currentSeparator})*?`;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let c = 0; c < segment.length; c++) {\n\t\t\tconst char = segment[c];\n\t\t\tif (char === \"\\\\\") {\n\t\t\t\tif (c < segment.length - 1) {\n\t\t\t\t\tresult += escapeRegExpChar(segment[c + 1]);\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t} else if (char === \"?\") result += wildcard;\n\t\t\telse if (char === \"*\") result += `${wildcard}*?`;\n\t\t\telse result += escapeRegExpChar(char);\n\t\t}\n\t\tresult += currentSeparator;\n\t}\n\treturn result;\n}\nfunction isMatch(regexp, sample) {\n\tif (typeof sample !== \"string\") throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n\treturn regexp.test(sample);\n}\n/**\n* Compiles one or more glob patterns into a RegExp and returns an isMatch function.\n* The isMatch function takes a sample string as its only argument and returns `true`\n* if the string matches the pattern(s).\n*\n* ```js\n* wildcardMatch('src/*.js')('src/index.js') //=> true\n* ```\n*\n* ```js\n* const isMatch = wildcardMatch('*.example.com', '.')\n* isMatch('foo.example.com') //=> true\n* isMatch('foo.bar.com') //=> false\n* ```\n*/\nfunction wildcardMatch(pattern, options) {\n\tif (typeof pattern !== \"string\" && !Array.isArray(pattern)) throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`);\n\tif (typeof options === \"string\" || typeof options === \"boolean\") options = { separator: options };\n\tif (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof options} given`);\n\toptions = options || {};\n\tif (options.separator === \"\\\\\") throw new Error(\"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\");\n\tconst regexpPattern = transform(pattern, options.separator);\n\tconst regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n\tconst fn = isMatch.bind(null, regexp);\n\tfn.options = options;\n\tfn.pattern = pattern;\n\tfn.regexp = regexp;\n\treturn fn;\n}\n\n//#endregion\n\n//# sourceMappingURL=wildcard.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9iZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5Nzkvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvd2lsZGNhcmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnTEFBZ0wsZ0JBQWdCLGdFQUFnRSxLQUFLO0FBQ3JRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsdUJBQXVCLHdCQUF3QixjQUFjO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpQkFBaUI7QUFDN0MscUJBQXFCLGlCQUFpQjtBQUN0QyxJQUFJLHFCQUFxQixpQkFBaUI7QUFDMUM7QUFDQSwwQ0FBMEMsaUJBQWlCO0FBQzNELDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBLGlCQUFpQixxQkFBcUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUyxJQUFJLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1Q0FBdUMsU0FBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRixlQUFlO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9LQUFvSyxnQkFBZ0I7QUFDcEwsOEVBQThFO0FBQzlFLHdQQUF3UCxnQkFBZ0I7QUFDeFE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGNBQWM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFx3aWxkY2FyZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy93aWxkY2FyZC50c1xuLyoqXG4qIEVzY2FwZXMgYSBjaGFyYWN0ZXIgaWYgaXQgaGFzIGEgc3BlY2lhbCBtZWFuaW5nIGluIHJlZ3VsYXIgZXhwcmVzc2lvbnNcbiogYW5kIHJldHVybnMgdGhlIGNoYXJhY3RlciBhcyBpcyBpZiBpdCBkb2Vzbid0XG4qL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwQ2hhcihjaGFyKSB7XG5cdGlmIChjaGFyID09PSBcIi1cIiB8fCBjaGFyID09PSBcIl5cIiB8fCBjaGFyID09PSBcIiRcIiB8fCBjaGFyID09PSBcIitcIiB8fCBjaGFyID09PSBcIi5cIiB8fCBjaGFyID09PSBcIihcIiB8fCBjaGFyID09PSBcIilcIiB8fCBjaGFyID09PSBcInxcIiB8fCBjaGFyID09PSBcIltcIiB8fCBjaGFyID09PSBcIl1cIiB8fCBjaGFyID09PSBcIntcIiB8fCBjaGFyID09PSBcIn1cIiB8fCBjaGFyID09PSBcIipcIiB8fCBjaGFyID09PSBcIj9cIiB8fCBjaGFyID09PSBcIlxcXFxcIikgcmV0dXJuIGBcXFxcJHtjaGFyfWA7XG5cdGVsc2UgcmV0dXJuIGNoYXI7XG59XG4vKipcbiogRXNjYXBlcyBhbGwgY2hhcmFjdGVycyBpbiBhIGdpdmVuIHN0cmluZyB0aGF0IGhhdmUgYSBzcGVjaWFsIG1lYW5pbmcgaW4gcmVndWxhciBleHByZXNzaW9uc1xuKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cFN0cmluZyhzdHIpIHtcblx0bGV0IHJlc3VsdCA9IFwiXCI7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSByZXN1bHQgKz0gZXNjYXBlUmVnRXhwQ2hhcihzdHJbaV0pO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4qIFRyYW5zZm9ybXMgb25lIG9yIG1vcmUgZ2xvYiBwYXR0ZXJucyBpbnRvIGEgUmVnRXhwIHBhdHRlcm5cbiovXG5mdW5jdGlvbiB0cmFuc2Zvcm0ocGF0dGVybiwgc2VwYXJhdG9yID0gdHJ1ZSkge1xuXHRpZiAoQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkgcmV0dXJuIGAoPzoke3BhdHRlcm4ubWFwKChwKSA9PiBgXiR7dHJhbnNmb3JtKHAsIHNlcGFyYXRvcil9JGApLmpvaW4oXCJ8XCIpfSlgO1xuXHRsZXQgc2VwYXJhdG9yU3BsaXR0ZXIgPSBcIlwiO1xuXHRsZXQgc2VwYXJhdG9yTWF0Y2hlciA9IFwiXCI7XG5cdGxldCB3aWxkY2FyZCA9IFwiLlwiO1xuXHRpZiAoc2VwYXJhdG9yID09PSB0cnVlKSB7XG5cdFx0c2VwYXJhdG9yU3BsaXR0ZXIgPSBcIi9cIjtcblx0XHRzZXBhcmF0b3JNYXRjaGVyID0gXCJbL1xcXFxcXFxcXVwiO1xuXHRcdHdpbGRjYXJkID0gXCJbXi9cXFxcXFxcXF1cIjtcblx0fSBlbHNlIGlmIChzZXBhcmF0b3IpIHtcblx0XHRzZXBhcmF0b3JTcGxpdHRlciA9IHNlcGFyYXRvcjtcblx0XHRzZXBhcmF0b3JNYXRjaGVyID0gZXNjYXBlUmVnRXhwU3RyaW5nKHNlcGFyYXRvclNwbGl0dGVyKTtcblx0XHRpZiAoc2VwYXJhdG9yTWF0Y2hlci5sZW5ndGggPiAxKSB7XG5cdFx0XHRzZXBhcmF0b3JNYXRjaGVyID0gYCg/OiR7c2VwYXJhdG9yTWF0Y2hlcn0pYDtcblx0XHRcdHdpbGRjYXJkID0gYCgoPyEke3NlcGFyYXRvck1hdGNoZXJ9KS4pYDtcblx0XHR9IGVsc2Ugd2lsZGNhcmQgPSBgW14ke3NlcGFyYXRvck1hdGNoZXJ9XWA7XG5cdH1cblx0Y29uc3QgcmVxdWlyZWRTZXBhcmF0b3IgPSBzZXBhcmF0b3IgPyBgJHtzZXBhcmF0b3JNYXRjaGVyfSs/YCA6IFwiXCI7XG5cdGNvbnN0IG9wdGlvbmFsU2VwYXJhdG9yID0gc2VwYXJhdG9yID8gYCR7c2VwYXJhdG9yTWF0Y2hlcn0qP2AgOiBcIlwiO1xuXHRjb25zdCBzZWdtZW50cyA9IHNlcGFyYXRvciA/IHBhdHRlcm4uc3BsaXQoc2VwYXJhdG9yU3BsaXR0ZXIpIDogW3BhdHRlcm5dO1xuXHRsZXQgcmVzdWx0ID0gXCJcIjtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzZWdtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tzXTtcblx0XHRjb25zdCBuZXh0U2VnbWVudCA9IHNlZ21lbnRzW3MgKyAxXTtcblx0XHRsZXQgY3VycmVudFNlcGFyYXRvciA9IFwiXCI7XG5cdFx0aWYgKCFzZWdtZW50ICYmIHMgPiAwKSBjb250aW51ZTtcblx0XHRpZiAoc2VwYXJhdG9yKSBpZiAocyA9PT0gc2VnbWVudHMubGVuZ3RoIC0gMSkgY3VycmVudFNlcGFyYXRvciA9IG9wdGlvbmFsU2VwYXJhdG9yO1xuXHRcdGVsc2UgaWYgKG5leHRTZWdtZW50ICE9PSBcIioqXCIpIGN1cnJlbnRTZXBhcmF0b3IgPSByZXF1aXJlZFNlcGFyYXRvcjtcblx0XHRlbHNlIGN1cnJlbnRTZXBhcmF0b3IgPSBcIlwiO1xuXHRcdGlmIChzZXBhcmF0b3IgJiYgc2VnbWVudCA9PT0gXCIqKlwiKSB7XG5cdFx0XHRpZiAoY3VycmVudFNlcGFyYXRvcikge1xuXHRcdFx0XHRyZXN1bHQgKz0gcyA9PT0gMCA/IFwiXCIgOiBjdXJyZW50U2VwYXJhdG9yO1xuXHRcdFx0XHRyZXN1bHQgKz0gYCg/OiR7d2lsZGNhcmR9Kj8ke2N1cnJlbnRTZXBhcmF0b3J9KSo/YDtcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRmb3IgKGxldCBjID0gMDsgYyA8IHNlZ21lbnQubGVuZ3RoOyBjKyspIHtcblx0XHRcdGNvbnN0IGNoYXIgPSBzZWdtZW50W2NdO1xuXHRcdFx0aWYgKGNoYXIgPT09IFwiXFxcXFwiKSB7XG5cdFx0XHRcdGlmIChjIDwgc2VnbWVudC5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0cmVzdWx0ICs9IGVzY2FwZVJlZ0V4cENoYXIoc2VnbWVudFtjICsgMV0pO1xuXHRcdFx0XHRcdGMrKztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChjaGFyID09PSBcIj9cIikgcmVzdWx0ICs9IHdpbGRjYXJkO1xuXHRcdFx0ZWxzZSBpZiAoY2hhciA9PT0gXCIqXCIpIHJlc3VsdCArPSBgJHt3aWxkY2FyZH0qP2A7XG5cdFx0XHRlbHNlIHJlc3VsdCArPSBlc2NhcGVSZWdFeHBDaGFyKGNoYXIpO1xuXHRcdH1cblx0XHRyZXN1bHQgKz0gY3VycmVudFNlcGFyYXRvcjtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaXNNYXRjaChyZWdleHAsIHNhbXBsZSkge1xuXHRpZiAodHlwZW9mIHNhbXBsZSAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihgU2FtcGxlIG11c3QgYmUgYSBzdHJpbmcsIGJ1dCAke3R5cGVvZiBzYW1wbGV9IGdpdmVuYCk7XG5cdHJldHVybiByZWdleHAudGVzdChzYW1wbGUpO1xufVxuLyoqXG4qIENvbXBpbGVzIG9uZSBvciBtb3JlIGdsb2IgcGF0dGVybnMgaW50byBhIFJlZ0V4cCBhbmQgcmV0dXJucyBhbiBpc01hdGNoIGZ1bmN0aW9uLlxuKiBUaGUgaXNNYXRjaCBmdW5jdGlvbiB0YWtlcyBhIHNhbXBsZSBzdHJpbmcgYXMgaXRzIG9ubHkgYXJndW1lbnQgYW5kIHJldHVybnMgYHRydWVgXG4qIGlmIHRoZSBzdHJpbmcgbWF0Y2hlcyB0aGUgcGF0dGVybihzKS5cbipcbiogYGBganNcbiogd2lsZGNhcmRNYXRjaCgnc3JjLyouanMnKSgnc3JjL2luZGV4LmpzJykgLy89PiB0cnVlXG4qIGBgYFxuKlxuKiBgYGBqc1xuKiBjb25zdCBpc01hdGNoID0gd2lsZGNhcmRNYXRjaCgnKi5leGFtcGxlLmNvbScsICcuJylcbiogaXNNYXRjaCgnZm9vLmV4YW1wbGUuY29tJykgLy89PiB0cnVlXG4qIGlzTWF0Y2goJ2Zvby5iYXIuY29tJykgLy89PiBmYWxzZVxuKiBgYGBcbiovXG5mdW5jdGlvbiB3aWxkY2FyZE1hdGNoKHBhdHRlcm4sIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBwYXR0ZXJuICE9PSBcInN0cmluZ1wiICYmICFBcnJheS5pc0FycmF5KHBhdHRlcm4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHNpbmdsZSBwYXR0ZXJuIHN0cmluZyBvciBhbiBhcnJheSBvZiBwYXR0ZXJucywgYnV0ICR7dHlwZW9mIHBhdHRlcm59IGdpdmVuYCk7XG5cdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJib29sZWFuXCIpIG9wdGlvbnMgPSB7IHNlcGFyYXRvcjogb3B0aW9ucyB9O1xuXHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiAhKHR5cGVvZiBvcHRpb25zID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob3B0aW9ucykpKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYW4gb3B0aW9ucyBvYmplY3Qgb3IgYSBzdHJpbmcvYm9vbGVhbiBzZXBhcmF0b3IsIGJ1dCAke3R5cGVvZiBvcHRpb25zfSBnaXZlbmApO1xuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0aWYgKG9wdGlvbnMuc2VwYXJhdG9yID09PSBcIlxcXFxcIikgdGhyb3cgbmV3IEVycm9yKFwiXFxcXCBpcyBub3QgYSB2YWxpZCBzZXBhcmF0b3IgYmVjYXVzZSBpdCBpcyB1c2VkIGZvciBlc2NhcGluZy4gVHJ5IHNldHRpbmcgdGhlIHNlcGFyYXRvciB0byBgdHJ1ZWAgaW5zdGVhZFwiKTtcblx0Y29uc3QgcmVnZXhwUGF0dGVybiA9IHRyYW5zZm9ybShwYXR0ZXJuLCBvcHRpb25zLnNlcGFyYXRvcik7XG5cdGNvbnN0IHJlZ2V4cCA9IG5ldyBSZWdFeHAoYF4ke3JlZ2V4cFBhdHRlcm59JGAsIG9wdGlvbnMuZmxhZ3MpO1xuXHRjb25zdCBmbiA9IGlzTWF0Y2guYmluZChudWxsLCByZWdleHApO1xuXHRmbi5vcHRpb25zID0gb3B0aW9ucztcblx0Zm4ucGF0dGVybiA9IHBhdHRlcm47XG5cdGZuLnJlZ2V4cCA9IHJlZ2V4cDtcblx0cmV0dXJuIGZuO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHdpbGRjYXJkTWF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbGRjYXJkLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export),\n/* harmony export */   __reExport: () => (/* binding */ __reExport)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") {\n\t\tfor (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\t\tkey = keys[i];\n\t\t\tif (!__hasOwnProp.call(to, key) && key !== except) {\n\t\t\t\t__defProp(to, key, {\n\t\t\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn to;\n};\nvar __reExport = (target, mod, secondTarget, symbols) => {\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t\tsecondTarget && __defProp(secondTarget, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\t__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\");\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMENBQTBDLGlCQUFpQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLE9BQU87QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0QsZ0VBQWdFLGlCQUFpQjtBQUNqRjtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcX3ZpcnR1YWxcXHJvbGxkb3duX3J1bnRpbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiByb2xsZG93bjpydW50aW1lXG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9IChhbGwsIHN5bWJvbHMpID0+IHtcblx0bGV0IHRhcmdldCA9IHt9O1xuXHRmb3IgKHZhciBuYW1lIGluIGFsbCkge1xuXHRcdF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHtcblx0XHRcdGdldDogYWxsW25hbWVdLFxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHR9XG5cdGlmIChzeW1ib2xzKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pO1xuXHR9XG5cdHJldHVybiB0YXJnZXQ7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcblx0aWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdGZvciAodmFyIGtleXMgPSBfX2dldE93blByb3BOYW1lcyhmcm9tKSwgaSA9IDAsIG4gPSBrZXlzLmxlbmd0aCwga2V5OyBpIDwgbjsgaSsrKSB7XG5cdFx0XHRrZXkgPSBrZXlzW2ldO1xuXHRcdFx0aWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdCkge1xuXHRcdFx0XHRfX2RlZlByb3AodG8sIGtleSwge1xuXHRcdFx0XHRcdGdldDogKChrKSA9PiBmcm9tW2tdKS5iaW5kKG51bGwsIGtleSksXG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0bztcbn07XG52YXIgX19yZUV4cG9ydCA9ICh0YXJnZXQsIG1vZCwgc2Vjb25kVGFyZ2V0LCBzeW1ib2xzKSA9PiB7XG5cdGlmIChzeW1ib2xzKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pO1xuXHRcdHNlY29uZFRhcmdldCAmJiBfX2RlZlByb3Aoc2Vjb25kVGFyZ2V0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSk7XG5cdH1cblx0X19jb3B5UHJvcHModGFyZ2V0LCBtb2QsIFwiZGVmYXVsdFwiKSwgc2Vjb25kVGFyZ2V0ICYmIF9fY29weVByb3BzKHNlY29uZFRhcmdldCwgbW9kLCBcImRlZmF1bHRcIik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9fZXhwb3J0LCBfX3JlRXhwb3J0IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs ***!
  \********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drizzleAdapter: () => (/* binding */ drizzleAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/.pnpm/drizzle-orm@0.45.1_@neondat_1476f0de160806f3c82b58fe7849679d/node_modules/drizzle-orm/sql/functions/aggregate.js\");\n\n\n\n\n\n//#region src/adapters/drizzle-adapter/drizzle-adapter.ts\nconst drizzleAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst createCustomAdapter = (db$1) => ({ getFieldName, options }) => {\n\t\tfunction getSchema(model) {\n\t\t\tconst schema = config.schema || db$1._.fullSchema;\n\t\t\tif (!schema) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.\");\n\t\t\tconst schemaModel = schema[model];\n\t\t\tif (!schemaModel) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`[# Drizzle Adapter]: The model \"${model}\" was not found in the schema object. Please pass the schema directly to the adapter options.`);\n\t\t\treturn schemaModel;\n\t\t}\n\t\tconst withReturning = async (model, builder, data, where) => {\n\t\t\tif (config.provider !== \"mysql\") return (await builder.returning())[0];\n\t\t\tawait builder.execute();\n\t\t\tconst schemaModel = getSchema(model);\n\t\t\tconst builderVal = builder.config?.values;\n\t\t\tif (where?.length) {\n\t\t\t\tconst clause = convertWhereClause(where.map((w) => {\n\t\t\t\t\tif (data[w.field] !== void 0) return {\n\t\t\t\t\t\t...w,\n\t\t\t\t\t\tvalue: data[w.field]\n\t\t\t\t\t};\n\t\t\t\t\treturn w;\n\t\t\t\t}), model);\n\t\t\t\treturn (await db$1.select().from(schemaModel).where(...clause))[0];\n\t\t\t} else if (builderVal && builderVal[0]?.id?.value) {\n\t\t\t\tlet tId = builderVal[0]?.id?.value;\n\t\t\t\tif (!tId) tId = (await db$1.select({ id: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`LAST_INSERT_ID()` }).from(schemaModel).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(schemaModel.id)).limit(1))[0].id;\n\t\t\t\treturn (await db$1.select().from(schemaModel).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel.id, tId)).limit(1).execute())[0];\n\t\t\t} else if (data.id) return (await db$1.select().from(schemaModel).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel.id, data.id)).limit(1).execute())[0];\n\t\t\telse {\n\t\t\t\tif (!(\"id\" in schemaModel)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The model \"${model}\" does not have an \"id\" field. Please use the \"id\" field as your primary key.`);\n\t\t\t\treturn (await db$1.select().from(schemaModel).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(schemaModel.id)).limit(1).execute())[0];\n\t\t\t}\n\t\t};\n\t\tfunction convertWhereClause(where, model) {\n\t\t\tconst schemaModel = getSchema(model);\n\t\t\tif (!where) return [];\n\t\t\tif (where.length === 1) {\n\t\t\t\tconst w = where[0];\n\t\t\t\tif (!w) return [];\n\t\t\t\tconst field = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: w.field\n\t\t\t\t});\n\t\t\t\tif (!schemaModel[field]) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The field \"${w.field}\" does not exist in the schema for the model \"${model}\". Please update your schema.`);\n\t\t\t\tif (w.operator === \"in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`);\n\t\t\t\t\treturn [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.inArray)(schemaModel[field], w.value)];\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"not_in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"not_in\" operator.`);\n\t\t\t\t\treturn [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.notInArray)(schemaModel[field], w.value)];\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"contains\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}%`)];\n\t\t\t\tif (w.operator === \"starts_with\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `${w.value}%`)];\n\t\t\t\tif (w.operator === \"ends_with\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}`)];\n\t\t\t\tif (w.operator === \"lt\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lt)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"lte\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lte)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"ne\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.ne)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"gt\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gt)(schemaModel[field], w.value)];\n\t\t\t\tif (w.operator === \"gte\") return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gte)(schemaModel[field], w.value)];\n\t\t\t\treturn [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel[field], w.value)];\n\t\t\t}\n\t\t\tconst andGroup = where.filter((w) => w.connector === \"AND\" || !w.connector);\n\t\t\tconst orGroup = where.filter((w) => w.connector === \"OR\");\n\t\t\tconst andClause = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.and)(...andGroup.map((w) => {\n\t\t\t\tconst field = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: w.field\n\t\t\t\t});\n\t\t\t\tif (w.operator === \"in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.inArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"not_in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"not_in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.notInArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"contains\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}%`);\n\t\t\t\tif (w.operator === \"starts_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `${w.value}%`);\n\t\t\t\tif (w.operator === \"ends_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}`);\n\t\t\t\tif (w.operator === \"lt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"lte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"ne\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.ne)(schemaModel[field], w.value);\n\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel[field], w.value);\n\t\t\t}));\n\t\t\tconst orClause = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.or)(...orGroup.map((w) => {\n\t\t\t\tconst field = getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: w.field\n\t\t\t\t});\n\t\t\t\tif (w.operator === \"in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.inArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"not_in\") {\n\t\t\t\t\tif (!Array.isArray(w.value)) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The value for the field \"${w.field}\" must be an array when using the \"not_in\" operator.`);\n\t\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.notInArray)(schemaModel[field], w.value);\n\t\t\t\t}\n\t\t\t\tif (w.operator === \"contains\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}%`);\n\t\t\t\tif (w.operator === \"starts_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `${w.value}%`);\n\t\t\t\tif (w.operator === \"ends_with\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.like)(schemaModel[field], `%${w.value}`);\n\t\t\t\tif (w.operator === \"lt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"lte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.lte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gt\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gt)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"gte\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.gte)(schemaModel[field], w.value);\n\t\t\t\tif (w.operator === \"ne\") return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.ne)(schemaModel[field], w.value);\n\t\t\t\treturn (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(schemaModel[field], w.value);\n\t\t\t}));\n\t\t\tconst clause = [];\n\t\t\tif (andGroup.length) clause.push(andClause);\n\t\t\tif (orGroup.length) clause.push(orClause);\n\t\t\treturn clause;\n\t\t}\n\t\tfunction checkMissingFields(schema, model, values) {\n\t\t\tif (!schema) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.\");\n\t\t\tfor (const key in values) if (!schema[key]) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`The field \"${key}\" does not exist in the \"${model}\" Drizzle schema. Please update your drizzle schema or re-generate using \"npx @better-auth/cli@latest generate\".`);\n\t\t}\n\t\treturn {\n\t\t\tasync create({ model, data: values }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tcheckMissingFields(schemaModel, model, values);\n\t\t\t\treturn await withReturning(model, db$1.insert(schemaModel).values(values), values);\n\t\t\t},\n\t\t\tasync findOne({ model, where, join }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\tif (options.experimental?.joins) if (!db$1.query || !db$1.query[model]) {\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[# Drizzle Adapter]: The model \"${model}\" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using \"npx @better-auth/cli@latest generate\".`);\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Falling back to regular query\");\n\t\t\t\t} else {\n\t\t\t\t\tlet includes;\n\t\t\t\t\tconst pluralJoinResults = [];\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tincludes = {};\n\t\t\t\t\t\tconst joinEntries = Object.entries(join);\n\t\t\t\t\t\tfor (const [model$1, joinAttr] of joinEntries) {\n\t\t\t\t\t\t\tconst limit = joinAttr.limit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\t\tconst pluralSuffix = isUnique || config.usePlural ? \"\" : \"s\";\n\t\t\t\t\t\t\tincludes[`${model$1}${pluralSuffix}`] = isUnique ? true : { limit };\n\t\t\t\t\t\t\tif (!isUnique) pluralJoinResults.push(`${model$1}${pluralSuffix}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst res$1 = await db$1.query[model].findFirst({\n\t\t\t\t\t\twhere: clause[0],\n\t\t\t\t\t\twith: includes\n\t\t\t\t\t});\n\t\t\t\t\tif (res$1) for (const pluralJoinResult of pluralJoinResults) {\n\t\t\t\t\t\tconst singularKey = !config.usePlural ? pluralJoinResult.slice(0, -1) : pluralJoinResult;\n\t\t\t\t\t\tres$1[singularKey] = res$1[pluralJoinResult];\n\t\t\t\t\t\tif (pluralJoinResult !== singularKey) delete res$1[pluralJoinResult];\n\t\t\t\t\t}\n\t\t\t\t\treturn res$1;\n\t\t\t\t}\n\t\t\t\tconst res = await db$1.select().from(schemaModel).where(...clause);\n\t\t\t\tif (!res.length) return null;\n\t\t\t\treturn res[0];\n\t\t\t},\n\t\t\tasync findMany({ model, where, sortBy, limit, offset, join }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = where ? convertWhereClause(where, model) : [];\n\t\t\t\tconst sortFn = sortBy?.direction === \"desc\" ? drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc : drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.asc;\n\t\t\t\tif (options.experimental?.joins) if (!db$1.query[model]) {\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[# Drizzle Adapter]: The model \"${model}\" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using \"npx @better-auth/cli@latest generate\".`);\n\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Falling back to regular query\");\n\t\t\t\t} else {\n\t\t\t\t\tlet includes;\n\t\t\t\t\tconst pluralJoinResults = [];\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tincludes = {};\n\t\t\t\t\t\tconst joinEntries = Object.entries(join);\n\t\t\t\t\t\tfor (const [model$1, joinAttr] of joinEntries) {\n\t\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\t\tconst limit$1 = joinAttr.limit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n\t\t\t\t\t\t\tconst pluralSuffix = isUnique || config.usePlural ? \"\" : \"s\";\n\t\t\t\t\t\t\tincludes[`${model$1}${pluralSuffix}`] = isUnique ? true : { limit: limit$1 };\n\t\t\t\t\t\t\tif (!isUnique) pluralJoinResults.push(`${model$1}${pluralSuffix}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet orderBy = void 0;\n\t\t\t\t\tif (sortBy?.field) orderBy = [sortFn(schemaModel[getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy?.field\n\t\t\t\t\t})])];\n\t\t\t\t\tconst res = await db$1.query[model].findMany({\n\t\t\t\t\t\twhere: clause[0],\n\t\t\t\t\t\twith: includes,\n\t\t\t\t\t\tlimit: limit ?? 100,\n\t\t\t\t\t\toffset: offset ?? 0,\n\t\t\t\t\t\torderBy\n\t\t\t\t\t});\n\t\t\t\t\tif (res) for (const item of res) for (const pluralJoinResult of pluralJoinResults) {\n\t\t\t\t\t\tconst singularKey = !config.usePlural ? pluralJoinResult.slice(0, -1) : pluralJoinResult;\n\t\t\t\t\t\tif (singularKey === pluralJoinResult) continue;\n\t\t\t\t\t\titem[singularKey] = item[pluralJoinResult];\n\t\t\t\t\t\tdelete item[pluralJoinResult];\n\t\t\t\t\t}\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tlet builder = db$1.select().from(schemaModel);\n\t\t\t\tconst effectiveLimit = limit;\n\t\t\t\tconst effectiveOffset = offset;\n\t\t\t\tif (typeof effectiveLimit !== \"undefined\") builder = builder.limit(effectiveLimit);\n\t\t\t\tif (typeof effectiveOffset !== \"undefined\") builder = builder.offset(effectiveOffset);\n\t\t\t\tif (sortBy?.field) builder = builder.orderBy(sortFn(schemaModel[getFieldName({\n\t\t\t\t\tmodel,\n\t\t\t\t\tfield: sortBy?.field\n\t\t\t\t})]));\n\t\t\t\treturn await builder.where(...clause);\n\t\t\t},\n\t\t\tasync count({ model, where }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = where ? convertWhereClause(where, model) : [];\n\t\t\t\treturn (await db$1.select({ count: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.count)() }).from(schemaModel).where(...clause))[0].count;\n\t\t\t},\n\t\t\tasync update({ model, where, update: values }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\treturn await withReturning(model, db$1.update(schemaModel).set(values).where(...clause), values, where);\n\t\t\t},\n\t\t\tasync updateMany({ model, where, update: values }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\treturn await db$1.update(schemaModel).set(values).where(...clause);\n\t\t\t},\n\t\t\tasync delete({ model, where }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\treturn await db$1.delete(schemaModel).where(...clause);\n\t\t\t},\n\t\t\tasync deleteMany({ model, where }) {\n\t\t\t\tconst schemaModel = getSchema(model);\n\t\t\t\tconst clause = convertWhereClause(where, model);\n\t\t\t\tconst res = await db$1.delete(schemaModel).where(...clause);\n\t\t\t\tlet count$1 = 0;\n\t\t\t\tif (res && \"rowCount\" in res) count$1 = res.rowCount;\n\t\t\t\telse if (Array.isArray(res)) count$1 = res.length;\n\t\t\t\telse if (res && (\"affectedRows\" in res || \"rowsAffected\" in res || \"changes\" in res)) count$1 = res.affectedRows ?? res.rowsAffected ?? res.changes;\n\t\t\t\tif (typeof count$1 !== \"number\") _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.\", {\n\t\t\t\t\tres,\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere\n\t\t\t\t});\n\t\t\t\treturn count$1;\n\t\t\t},\n\t\t\toptions: config\n\t\t};\n\t};\n\tlet adapterOptions = null;\n\tadapterOptions = {\n\t\tconfig: {\n\t\t\tadapterId: \"drizzle\",\n\t\t\tadapterName: \"Drizzle Adapter\",\n\t\t\tusePlural: config.usePlural ?? false,\n\t\t\tdebugLogs: config.debugLogs ?? false,\n\t\t\tsupportsUUIDs: config.provider === \"pg\" ? true : false,\n\t\t\tsupportsJSON: config.provider === \"pg\" ? true : false,\n\t\t\tsupportsArrays: config.provider === \"pg\" ? true : false,\n\t\t\ttransaction: config.transaction ?? false ? (cb) => db.transaction((tx) => {\n\t\t\t\treturn cb((0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_2__.createAdapterFactory)({\n\t\t\t\t\tconfig: adapterOptions.config,\n\t\t\t\t\tadapter: createCustomAdapter(tx)\n\t\t\t\t})(lazyOptions));\n\t\t\t}) : false\n\t\t},\n\t\tadapter: createCustomAdapter(db)\n\t};\n\tconst adapter = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_2__.createAdapterFactory)(adapterOptions);\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapter(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=drizzle-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2RyaXp6bGUtYWRhcHRlci9kcml6emxlLWFkYXB0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStDO0FBQ1c7QUFDVTtBQUM4Qzs7QUFFbEg7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHVCQUF1QjtBQUNqRTtBQUNBO0FBQ0EsMEJBQTBCLG9FQUFlO0FBQ3pDO0FBQ0EsK0JBQStCLG9FQUFlLG9DQUFvQyxNQUFNO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5Q0FBeUMsSUFBSSxnREFBRyxvQkFBb0IsNEJBQTRCLGlEQUFJO0FBQ3BHLHdEQUF3RCwrQ0FBRTtBQUMxRCxLQUFLLHNFQUFzRSwrQ0FBRTtBQUM3RTtBQUNBLDBDQUEwQyxvRUFBZSxlQUFlLE1BQU07QUFDOUUsMERBQTBELGlEQUFJO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUNBQXVDLG9FQUFlLGVBQWUsUUFBUSxnREFBZ0QsTUFBTTtBQUNuSTtBQUNBLDRDQUE0QyxvRUFBZSw2QkFBNkIsUUFBUTtBQUNoRyxhQUFhLG9EQUFPO0FBQ3BCO0FBQ0E7QUFDQSw0Q0FBNEMsb0VBQWUsNkJBQTZCLFFBQVE7QUFDaEcsYUFBYSx1REFBVTtBQUN2QjtBQUNBLDJDQUEyQyxpREFBSSx5QkFBeUIsUUFBUTtBQUNoRiw4Q0FBOEMsaURBQUksd0JBQXdCLFFBQVE7QUFDbEYsNENBQTRDLGlEQUFJLHlCQUF5QixRQUFRO0FBQ2pGLHFDQUFxQywrQ0FBRTtBQUN2QyxzQ0FBc0MsZ0RBQUc7QUFDekMscUNBQXFDLCtDQUFFO0FBQ3ZDLHFDQUFxQywrQ0FBRTtBQUN2QyxzQ0FBc0MsZ0RBQUc7QUFDekMsWUFBWSwrQ0FBRTtBQUNkO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnREFBRztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0Q0FBNEMsb0VBQWUsNkJBQTZCLFFBQVE7QUFDaEcsWUFBWSxvREFBTztBQUNuQjtBQUNBO0FBQ0EsNENBQTRDLG9FQUFlLDZCQUE2QixRQUFRO0FBQ2hHLFlBQVksdURBQVU7QUFDdEI7QUFDQSwwQ0FBMEMsaURBQUkseUJBQXlCLFFBQVE7QUFDL0UsNkNBQTZDLGlEQUFJLHdCQUF3QixRQUFRO0FBQ2pGLDJDQUEyQyxpREFBSSx5QkFBeUIsUUFBUTtBQUNoRixvQ0FBb0MsK0NBQUU7QUFDdEMscUNBQXFDLGdEQUFHO0FBQ3hDLG9DQUFvQywrQ0FBRTtBQUN0QyxxQ0FBcUMsZ0RBQUc7QUFDeEMsb0NBQW9DLCtDQUFFO0FBQ3RDLFdBQVcsK0NBQUU7QUFDYixJQUFJO0FBQ0osb0JBQW9CLCtDQUFFO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDRDQUE0QyxvRUFBZSw2QkFBNkIsUUFBUTtBQUNoRyxZQUFZLG9EQUFPO0FBQ25CO0FBQ0E7QUFDQSw0Q0FBNEMsb0VBQWUsNkJBQTZCLFFBQVE7QUFDaEcsWUFBWSx1REFBVTtBQUN0QjtBQUNBLDBDQUEwQyxpREFBSSx5QkFBeUIsUUFBUTtBQUMvRSw2Q0FBNkMsaURBQUksd0JBQXdCLFFBQVE7QUFDakYsMkNBQTJDLGlEQUFJLHlCQUF5QixRQUFRO0FBQ2hGLG9DQUFvQywrQ0FBRTtBQUN0QyxxQ0FBcUMsZ0RBQUc7QUFDeEMsb0NBQW9DLCtDQUFFO0FBQ3RDLHFDQUFxQyxnREFBRztBQUN4QyxvQ0FBb0MsK0NBQUU7QUFDdEMsV0FBVywrQ0FBRTtBQUNiLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0VBQWU7QUFDekMseURBQXlELG9FQUFlLGVBQWUsSUFBSSwyQkFBMkIsTUFBTTtBQUM1SDtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osbUJBQW1CLG9CQUFvQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxLQUFLLHlEQUFNLDBDQUEwQyxNQUFNO0FBQzNELEtBQUsseURBQU07QUFDWCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFFBQVEsRUFBRSxhQUFhLHlCQUF5QjtBQUNuRSxnREFBZ0QsUUFBUSxFQUFFLGFBQWE7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixvQkFBb0IsMkNBQTJDO0FBQy9EO0FBQ0E7QUFDQSxrREFBa0QsNkNBQUksR0FBRyw0Q0FBRztBQUM1RDtBQUNBLEtBQUsseURBQU0sMENBQTBDLE1BQU07QUFDM0QsS0FBSyx5REFBTTtBQUNYLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUSxFQUFFLGFBQWEseUJBQXlCO0FBQ25FLGdEQUFnRCxRQUFRLEVBQUUsYUFBYTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTyxrREFBSyxJQUFJO0FBQ2hELElBQUk7QUFDSixrQkFBa0IsOEJBQThCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixzQkFBc0IsOEJBQThCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osc0JBQXNCLGNBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMseURBQU07QUFDM0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtGQUFvQjtBQUNsQztBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLGlCQUFpQixrRkFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xcZHJpenpsZS1hZGFwdGVyXFxkcml6emxlLWFkYXB0ZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlQWRhcHRlckZhY3RvcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGIvYWRhcHRlclwiO1xuaW1wb3J0IHsgYW5kLCBhc2MsIGNvdW50LCBkZXNjLCBlcSwgZ3QsIGd0ZSwgaW5BcnJheSwgbGlrZSwgbHQsIGx0ZSwgbmUsIG5vdEluQXJyYXksIG9yLCBzcWwgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcblxuLy8jcmVnaW9uIHNyYy9hZGFwdGVycy9kcml6emxlLWFkYXB0ZXIvZHJpenpsZS1hZGFwdGVyLnRzXG5jb25zdCBkcml6emxlQWRhcHRlciA9IChkYiwgY29uZmlnKSA9PiB7XG5cdGxldCBsYXp5T3B0aW9ucyA9IG51bGw7XG5cdGNvbnN0IGNyZWF0ZUN1c3RvbUFkYXB0ZXIgPSAoZGIkMSkgPT4gKHsgZ2V0RmllbGROYW1lLCBvcHRpb25zIH0pID0+IHtcblx0XHRmdW5jdGlvbiBnZXRTY2hlbWEobW9kZWwpIHtcblx0XHRcdGNvbnN0IHNjaGVtYSA9IGNvbmZpZy5zY2hlbWEgfHwgZGIkMS5fLmZ1bGxTY2hlbWE7XG5cdFx0XHRpZiAoIXNjaGVtYSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkRyaXp6bGUgYWRhcHRlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZS4gU2NoZW1hIG5vdCBmb3VuZC4gUGxlYXNlIHByb3ZpZGUgYSBzY2hlbWEgb2JqZWN0IGluIHRoZSBhZGFwdGVyIG9wdGlvbnMgb2JqZWN0LlwiKTtcblx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gc2NoZW1hW21vZGVsXTtcblx0XHRcdGlmICghc2NoZW1hTW9kZWwpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFsjIERyaXp6bGUgQWRhcHRlcl06IFRoZSBtb2RlbCBcIiR7bW9kZWx9XCIgd2FzIG5vdCBmb3VuZCBpbiB0aGUgc2NoZW1hIG9iamVjdC4gUGxlYXNlIHBhc3MgdGhlIHNjaGVtYSBkaXJlY3RseSB0byB0aGUgYWRhcHRlciBvcHRpb25zLmApO1xuXHRcdFx0cmV0dXJuIHNjaGVtYU1vZGVsO1xuXHRcdH1cblx0XHRjb25zdCB3aXRoUmV0dXJuaW5nID0gYXN5bmMgKG1vZGVsLCBidWlsZGVyLCBkYXRhLCB3aGVyZSkgPT4ge1xuXHRcdFx0aWYgKGNvbmZpZy5wcm92aWRlciAhPT0gXCJteXNxbFwiKSByZXR1cm4gKGF3YWl0IGJ1aWxkZXIucmV0dXJuaW5nKCkpWzBdO1xuXHRcdFx0YXdhaXQgYnVpbGRlci5leGVjdXRlKCk7XG5cdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRjb25zdCBidWlsZGVyVmFsID0gYnVpbGRlci5jb25maWc/LnZhbHVlcztcblx0XHRcdGlmICh3aGVyZT8ubGVuZ3RoKSB7XG5cdFx0XHRcdGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZS5tYXAoKHcpID0+IHtcblx0XHRcdFx0XHRpZiAoZGF0YVt3LmZpZWxkXSAhPT0gdm9pZCAwKSByZXR1cm4ge1xuXHRcdFx0XHRcdFx0Li4udyxcblx0XHRcdFx0XHRcdHZhbHVlOiBkYXRhW3cuZmllbGRdXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRyZXR1cm4gdztcblx0XHRcdFx0fSksIG1vZGVsKTtcblx0XHRcdFx0cmV0dXJuIChhd2FpdCBkYiQxLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLndoZXJlKC4uLmNsYXVzZSkpWzBdO1xuXHRcdFx0fSBlbHNlIGlmIChidWlsZGVyVmFsICYmIGJ1aWxkZXJWYWxbMF0/LmlkPy52YWx1ZSkge1xuXHRcdFx0XHRsZXQgdElkID0gYnVpbGRlclZhbFswXT8uaWQ/LnZhbHVlO1xuXHRcdFx0XHRpZiAoIXRJZCkgdElkID0gKGF3YWl0IGRiJDEuc2VsZWN0KHsgaWQ6IHNxbGBMQVNUX0lOU0VSVF9JRCgpYCB9KS5mcm9tKHNjaGVtYU1vZGVsKS5vcmRlckJ5KGRlc2Moc2NoZW1hTW9kZWwuaWQpKS5saW1pdCgxKSlbMF0uaWQ7XG5cdFx0XHRcdHJldHVybiAoYXdhaXQgZGIkMS5zZWxlY3QoKS5mcm9tKHNjaGVtYU1vZGVsKS53aGVyZShlcShzY2hlbWFNb2RlbC5pZCwgdElkKSkubGltaXQoMSkuZXhlY3V0ZSgpKVswXTtcblx0XHRcdH0gZWxzZSBpZiAoZGF0YS5pZCkgcmV0dXJuIChhd2FpdCBkYiQxLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLndoZXJlKGVxKHNjaGVtYU1vZGVsLmlkLCBkYXRhLmlkKSkubGltaXQoMSkuZXhlY3V0ZSgpKVswXTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZiAoIShcImlkXCIgaW4gc2NoZW1hTW9kZWwpKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgbW9kZWwgXCIke21vZGVsfVwiIGRvZXMgbm90IGhhdmUgYW4gXCJpZFwiIGZpZWxkLiBQbGVhc2UgdXNlIHRoZSBcImlkXCIgZmllbGQgYXMgeW91ciBwcmltYXJ5IGtleS5gKTtcblx0XHRcdFx0cmV0dXJuIChhd2FpdCBkYiQxLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLm9yZGVyQnkoZGVzYyhzY2hlbWFNb2RlbC5pZCkpLmxpbWl0KDEpLmV4ZWN1dGUoKSlbMF07XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRmdW5jdGlvbiBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKSB7XG5cdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRpZiAoIXdoZXJlKSByZXR1cm4gW107XG5cdFx0XHRpZiAod2hlcmUubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdGNvbnN0IHcgPSB3aGVyZVswXTtcblx0XHRcdFx0aWYgKCF3KSByZXR1cm4gW107XG5cdFx0XHRcdGNvbnN0IGZpZWxkID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRmaWVsZDogdy5maWVsZFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCFzY2hlbWFNb2RlbFtmaWVsZF0pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSBmaWVsZCBcIiR7dy5maWVsZH1cIiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgc2NoZW1hIGZvciB0aGUgbW9kZWwgXCIke21vZGVsfVwiLiBQbGVhc2UgdXBkYXRlIHlvdXIgc2NoZW1hLmApO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJpblwiKSB7XG5cdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHcudmFsdWUpKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgdmFsdWUgZm9yIHRoZSBmaWVsZCBcIiR7dy5maWVsZH1cIiBtdXN0IGJlIGFuIGFycmF5IHdoZW4gdXNpbmcgdGhlIFwiaW5cIiBvcGVyYXRvci5gKTtcblx0XHRcdFx0XHRyZXR1cm4gW2luQXJyYXkoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibm90X2luXCIpIHtcblx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkody52YWx1ZSkpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYFRoZSB2YWx1ZSBmb3IgdGhlIGZpZWxkIFwiJHt3LmZpZWxkfVwiIG11c3QgYmUgYW4gYXJyYXkgd2hlbiB1c2luZyB0aGUgXCJub3RfaW5cIiBvcGVyYXRvci5gKTtcblx0XHRcdFx0XHRyZXR1cm4gW25vdEluQXJyYXkoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiY29udGFpbnNcIikgcmV0dXJuIFtsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCUke3cudmFsdWV9JWApXTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwic3RhcnRzX3dpdGhcIikgcmV0dXJuIFtsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCR7dy52YWx1ZX0lYCldO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJlbmRzX3dpdGhcIikgcmV0dXJuIFtsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCUke3cudmFsdWV9YCldO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJsdFwiKSByZXR1cm4gW2x0KHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSldO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJsdGVcIikgcmV0dXJuIFtsdGUoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcIm5lXCIpIHJldHVybiBbbmUoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImd0XCIpIHJldHVybiBbZ3Qoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImd0ZVwiKSByZXR1cm4gW2d0ZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdFx0cmV0dXJuIFtlcShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGFuZEdyb3VwID0gd2hlcmUuZmlsdGVyKCh3KSA9PiB3LmNvbm5lY3RvciA9PT0gXCJBTkRcIiB8fCAhdy5jb25uZWN0b3IpO1xuXHRcdFx0Y29uc3Qgb3JHcm91cCA9IHdoZXJlLmZpbHRlcigodykgPT4gdy5jb25uZWN0b3IgPT09IFwiT1JcIik7XG5cdFx0XHRjb25zdCBhbmRDbGF1c2UgPSBhbmQoLi4uYW5kR3JvdXAubWFwKCh3KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZpZWxkID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRmaWVsZDogdy5maWVsZFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiaW5cIikge1xuXHRcdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh3LnZhbHVlKSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihgVGhlIHZhbHVlIGZvciB0aGUgZmllbGQgXCIke3cuZmllbGR9XCIgbXVzdCBiZSBhbiBhcnJheSB3aGVuIHVzaW5nIHRoZSBcImluXCIgb3BlcmF0b3IuYCk7XG5cdFx0XHRcdFx0cmV0dXJuIGluQXJyYXkoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJub3RfaW5cIikge1xuXHRcdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh3LnZhbHVlKSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihgVGhlIHZhbHVlIGZvciB0aGUgZmllbGQgXCIke3cuZmllbGR9XCIgbXVzdCBiZSBhbiBhcnJheSB3aGVuIHVzaW5nIHRoZSBcIm5vdF9pblwiIG9wZXJhdG9yLmApO1xuXHRcdFx0XHRcdHJldHVybiBub3RJbkFycmF5KHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiY29udGFpbnNcIikgcmV0dXJuIGxpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJSR7dy52YWx1ZX0lYCk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcInN0YXJ0c193aXRoXCIpIHJldHVybiBsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCR7dy52YWx1ZX0lYCk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImVuZHNfd2l0aFwiKSByZXR1cm4gbGlrZShzY2hlbWFNb2RlbFtmaWVsZF0sIGAlJHt3LnZhbHVlfWApO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJsdFwiKSByZXR1cm4gbHQoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibHRlXCIpIHJldHVybiBsdGUoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZ3RcIikgcmV0dXJuIGd0KHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImd0ZVwiKSByZXR1cm4gZ3RlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcIm5lXCIpIHJldHVybiBuZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRyZXR1cm4gZXEoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdH0pKTtcblx0XHRcdGNvbnN0IG9yQ2xhdXNlID0gb3IoLi4ub3JHcm91cC5tYXAoKHcpID0+IHtcblx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdGZpZWxkOiB3LmZpZWxkXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJpblwiKSB7XG5cdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHcudmFsdWUpKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgdmFsdWUgZm9yIHRoZSBmaWVsZCBcIiR7dy5maWVsZH1cIiBtdXN0IGJlIGFuIGFycmF5IHdoZW4gdXNpbmcgdGhlIFwiaW5cIiBvcGVyYXRvci5gKTtcblx0XHRcdFx0XHRyZXR1cm4gaW5BcnJheShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcIm5vdF9pblwiKSB7XG5cdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHcudmFsdWUpKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgdmFsdWUgZm9yIHRoZSBmaWVsZCBcIiR7dy5maWVsZH1cIiBtdXN0IGJlIGFuIGFycmF5IHdoZW4gdXNpbmcgdGhlIFwibm90X2luXCIgb3BlcmF0b3IuYCk7XG5cdFx0XHRcdFx0cmV0dXJuIG5vdEluQXJyYXkoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJjb250YWluc1wiKSByZXR1cm4gbGlrZShzY2hlbWFNb2RlbFtmaWVsZF0sIGAlJHt3LnZhbHVlfSVgKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwic3RhcnRzX3dpdGhcIikgcmV0dXJuIGxpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJHt3LnZhbHVlfSVgKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZW5kc193aXRoXCIpIHJldHVybiBsaWtlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgYCUke3cudmFsdWV9YCk7XG5cdFx0XHRcdGlmICh3Lm9wZXJhdG9yID09PSBcImx0XCIpIHJldHVybiBsdChzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJsdGVcIikgcmV0dXJuIGx0ZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0XHRpZiAody5vcGVyYXRvciA9PT0gXCJndFwiKSByZXR1cm4gZ3Qoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwiZ3RlXCIpIHJldHVybiBndGUoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcblx0XHRcdFx0aWYgKHcub3BlcmF0b3IgPT09IFwibmVcIikgcmV0dXJuIG5lKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG5cdFx0XHRcdHJldHVybiBlcShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpO1xuXHRcdFx0fSkpO1xuXHRcdFx0Y29uc3QgY2xhdXNlID0gW107XG5cdFx0XHRpZiAoYW5kR3JvdXAubGVuZ3RoKSBjbGF1c2UucHVzaChhbmRDbGF1c2UpO1xuXHRcdFx0aWYgKG9yR3JvdXAubGVuZ3RoKSBjbGF1c2UucHVzaChvckNsYXVzZSk7XG5cdFx0XHRyZXR1cm4gY2xhdXNlO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjaGVja01pc3NpbmdGaWVsZHMoc2NoZW1hLCBtb2RlbCwgdmFsdWVzKSB7XG5cdFx0XHRpZiAoIXNjaGVtYSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkRyaXp6bGUgYWRhcHRlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZS4gRHJpenpsZSBTY2hlbWEgbm90IGZvdW5kLiBQbGVhc2UgcHJvdmlkZSBhIHNjaGVtYSBvYmplY3QgaW4gdGhlIGFkYXB0ZXIgb3B0aW9ucyBvYmplY3QuXCIpO1xuXHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gdmFsdWVzKSBpZiAoIXNjaGVtYVtrZXldKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBUaGUgZmllbGQgXCIke2tleX1cIiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgXCIke21vZGVsfVwiIERyaXp6bGUgc2NoZW1hLiBQbGVhc2UgdXBkYXRlIHlvdXIgZHJpenpsZSBzY2hlbWEgb3IgcmUtZ2VuZXJhdGUgdXNpbmcgXCJucHggQGJldHRlci1hdXRoL2NsaUBsYXRlc3QgZ2VuZXJhdGVcIi5gKTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdGFzeW5jIGNyZWF0ZSh7IG1vZGVsLCBkYXRhOiB2YWx1ZXMgfSkge1xuXHRcdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRcdGNoZWNrTWlzc2luZ0ZpZWxkcyhzY2hlbWFNb2RlbCwgbW9kZWwsIHZhbHVlcyk7XG5cdFx0XHRcdHJldHVybiBhd2FpdCB3aXRoUmV0dXJuaW5nKG1vZGVsLCBkYiQxLmluc2VydChzY2hlbWFNb2RlbCkudmFsdWVzKHZhbHVlcyksIHZhbHVlcyk7XG5cdFx0XHR9LFxuXHRcdFx0YXN5bmMgZmluZE9uZSh7IG1vZGVsLCB3aGVyZSwgam9pbiB9KSB7XG5cdFx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgY2xhdXNlID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdGlmIChvcHRpb25zLmV4cGVyaW1lbnRhbD8uam9pbnMpIGlmICghZGIkMS5xdWVyeSB8fCAhZGIkMS5xdWVyeVttb2RlbF0pIHtcblx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoYFsjIERyaXp6bGUgQWRhcHRlcl06IFRoZSBtb2RlbCBcIiR7bW9kZWx9XCIgd2FzIG5vdCBmb3VuZCBpbiB0aGUgcXVlcnkgb2JqZWN0LiBQbGVhc2UgdXBkYXRlIHlvdXIgRHJpenpsZSBzY2hlbWEgdG8gaW5jbHVkZSByZWxhdGlvbnMgb3IgcmUtZ2VuZXJhdGUgdXNpbmcgXCJucHggQGJldHRlci1hdXRoL2NsaUBsYXRlc3QgZ2VuZXJhdGVcIi5gKTtcblx0XHRcdFx0XHRsb2dnZXIuaW5mbyhcIkZhbGxpbmcgYmFjayB0byByZWd1bGFyIHF1ZXJ5XCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxldCBpbmNsdWRlcztcblx0XHRcdFx0XHRjb25zdCBwbHVyYWxKb2luUmVzdWx0cyA9IFtdO1xuXHRcdFx0XHRcdGlmIChqb2luKSB7XG5cdFx0XHRcdFx0XHRpbmNsdWRlcyA9IHt9O1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pbkVudHJpZXMgPSBPYmplY3QuZW50cmllcyhqb2luKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW21vZGVsJDEsIGpvaW5BdHRyXSBvZiBqb2luRW50cmllcykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW1pdCA9IGpvaW5BdHRyLmxpbWl0ID8/IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5kZWZhdWx0RmluZE1hbnlMaW1pdCA/PyAxMDA7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlzVW5pcXVlID0gam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwbHVyYWxTdWZmaXggPSBpc1VuaXF1ZSB8fCBjb25maWcudXNlUGx1cmFsID8gXCJcIiA6IFwic1wiO1xuXHRcdFx0XHRcdFx0XHRpbmNsdWRlc1tgJHttb2RlbCQxfSR7cGx1cmFsU3VmZml4fWBdID0gaXNVbmlxdWUgPyB0cnVlIDogeyBsaW1pdCB9O1xuXHRcdFx0XHRcdFx0XHRpZiAoIWlzVW5pcXVlKSBwbHVyYWxKb2luUmVzdWx0cy5wdXNoKGAke21vZGVsJDF9JHtwbHVyYWxTdWZmaXh9YCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHJlcyQxID0gYXdhaXQgZGIkMS5xdWVyeVttb2RlbF0uZmluZEZpcnN0KHtcblx0XHRcdFx0XHRcdHdoZXJlOiBjbGF1c2VbMF0sXG5cdFx0XHRcdFx0XHR3aXRoOiBpbmNsdWRlc1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChyZXMkMSkgZm9yIChjb25zdCBwbHVyYWxKb2luUmVzdWx0IG9mIHBsdXJhbEpvaW5SZXN1bHRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzaW5ndWxhcktleSA9ICFjb25maWcudXNlUGx1cmFsID8gcGx1cmFsSm9pblJlc3VsdC5zbGljZSgwLCAtMSkgOiBwbHVyYWxKb2luUmVzdWx0O1xuXHRcdFx0XHRcdFx0cmVzJDFbc2luZ3VsYXJLZXldID0gcmVzJDFbcGx1cmFsSm9pblJlc3VsdF07XG5cdFx0XHRcdFx0XHRpZiAocGx1cmFsSm9pblJlc3VsdCAhPT0gc2luZ3VsYXJLZXkpIGRlbGV0ZSByZXMkMVtwbHVyYWxKb2luUmVzdWx0XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlcyQxO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IGRiJDEuc2VsZWN0KCkuZnJvbShzY2hlbWFNb2RlbCkud2hlcmUoLi4uY2xhdXNlKTtcblx0XHRcdFx0aWYgKCFyZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0cmV0dXJuIHJlc1swXTtcblx0XHRcdH0sXG5cdFx0XHRhc3luYyBmaW5kTWFueSh7IG1vZGVsLCB3aGVyZSwgc29ydEJ5LCBsaW1pdCwgb2Zmc2V0LCBqb2luIH0pIHtcblx0XHRcdFx0Y29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuXHRcdFx0XHRjb25zdCBjbGF1c2UgPSB3aGVyZSA/IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpIDogW107XG5cdFx0XHRcdGNvbnN0IHNvcnRGbiA9IHNvcnRCeT8uZGlyZWN0aW9uID09PSBcImRlc2NcIiA/IGRlc2MgOiBhc2M7XG5cdFx0XHRcdGlmIChvcHRpb25zLmV4cGVyaW1lbnRhbD8uam9pbnMpIGlmICghZGIkMS5xdWVyeVttb2RlbF0pIHtcblx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoYFsjIERyaXp6bGUgQWRhcHRlcl06IFRoZSBtb2RlbCBcIiR7bW9kZWx9XCIgd2FzIG5vdCBmb3VuZCBpbiB0aGUgcXVlcnkgb2JqZWN0LiBQbGVhc2UgdXBkYXRlIHlvdXIgRHJpenpsZSBzY2hlbWEgdG8gaW5jbHVkZSByZWxhdGlvbnMgb3IgcmUtZ2VuZXJhdGUgdXNpbmcgXCJucHggQGJldHRlci1hdXRoL2NsaUBsYXRlc3QgZ2VuZXJhdGVcIi5gKTtcblx0XHRcdFx0XHRsb2dnZXIuaW5mbyhcIkZhbGxpbmcgYmFjayB0byByZWd1bGFyIHF1ZXJ5XCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxldCBpbmNsdWRlcztcblx0XHRcdFx0XHRjb25zdCBwbHVyYWxKb2luUmVzdWx0cyA9IFtdO1xuXHRcdFx0XHRcdGlmIChqb2luKSB7XG5cdFx0XHRcdFx0XHRpbmNsdWRlcyA9IHt9O1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pbkVudHJpZXMgPSBPYmplY3QuZW50cmllcyhqb2luKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW21vZGVsJDEsIGpvaW5BdHRyXSBvZiBqb2luRW50cmllcykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBpc1VuaXF1ZSA9IGpvaW5BdHRyLnJlbGF0aW9uID09PSBcIm9uZS10by1vbmVcIjtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGltaXQkMSA9IGpvaW5BdHRyLmxpbWl0ID8/IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5kZWZhdWx0RmluZE1hbnlMaW1pdCA/PyAxMDA7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHBsdXJhbFN1ZmZpeCA9IGlzVW5pcXVlIHx8IGNvbmZpZy51c2VQbHVyYWwgPyBcIlwiIDogXCJzXCI7XG5cdFx0XHRcdFx0XHRcdGluY2x1ZGVzW2Ake21vZGVsJDF9JHtwbHVyYWxTdWZmaXh9YF0gPSBpc1VuaXF1ZSA/IHRydWUgOiB7IGxpbWl0OiBsaW1pdCQxIH07XG5cdFx0XHRcdFx0XHRcdGlmICghaXNVbmlxdWUpIHBsdXJhbEpvaW5SZXN1bHRzLnB1c2goYCR7bW9kZWwkMX0ke3BsdXJhbFN1ZmZpeH1gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGV0IG9yZGVyQnkgPSB2b2lkIDA7XG5cdFx0XHRcdFx0aWYgKHNvcnRCeT8uZmllbGQpIG9yZGVyQnkgPSBbc29ydEZuKHNjaGVtYU1vZGVsW2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkOiBzb3J0Qnk/LmZpZWxkXG5cdFx0XHRcdFx0fSldKV07XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgZGIkMS5xdWVyeVttb2RlbF0uZmluZE1hbnkoe1xuXHRcdFx0XHRcdFx0d2hlcmU6IGNsYXVzZVswXSxcblx0XHRcdFx0XHRcdHdpdGg6IGluY2x1ZGVzLFxuXHRcdFx0XHRcdFx0bGltaXQ6IGxpbWl0ID8/IDEwMCxcblx0XHRcdFx0XHRcdG9mZnNldDogb2Zmc2V0ID8/IDAsXG5cdFx0XHRcdFx0XHRvcmRlckJ5XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKHJlcykgZm9yIChjb25zdCBpdGVtIG9mIHJlcykgZm9yIChjb25zdCBwbHVyYWxKb2luUmVzdWx0IG9mIHBsdXJhbEpvaW5SZXN1bHRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzaW5ndWxhcktleSA9ICFjb25maWcudXNlUGx1cmFsID8gcGx1cmFsSm9pblJlc3VsdC5zbGljZSgwLCAtMSkgOiBwbHVyYWxKb2luUmVzdWx0O1xuXHRcdFx0XHRcdFx0aWYgKHNpbmd1bGFyS2V5ID09PSBwbHVyYWxKb2luUmVzdWx0KSBjb250aW51ZTtcblx0XHRcdFx0XHRcdGl0ZW1bc2luZ3VsYXJLZXldID0gaXRlbVtwbHVyYWxKb2luUmVzdWx0XTtcblx0XHRcdFx0XHRcdGRlbGV0ZSBpdGVtW3BsdXJhbEpvaW5SZXN1bHRdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gcmVzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxldCBidWlsZGVyID0gZGIkMS5zZWxlY3QoKS5mcm9tKHNjaGVtYU1vZGVsKTtcblx0XHRcdFx0Y29uc3QgZWZmZWN0aXZlTGltaXQgPSBsaW1pdDtcblx0XHRcdFx0Y29uc3QgZWZmZWN0aXZlT2Zmc2V0ID0gb2Zmc2V0O1xuXHRcdFx0XHRpZiAodHlwZW9mIGVmZmVjdGl2ZUxpbWl0ICE9PSBcInVuZGVmaW5lZFwiKSBidWlsZGVyID0gYnVpbGRlci5saW1pdChlZmZlY3RpdmVMaW1pdCk7XG5cdFx0XHRcdGlmICh0eXBlb2YgZWZmZWN0aXZlT2Zmc2V0ICE9PSBcInVuZGVmaW5lZFwiKSBidWlsZGVyID0gYnVpbGRlci5vZmZzZXQoZWZmZWN0aXZlT2Zmc2V0KTtcblx0XHRcdFx0aWYgKHNvcnRCeT8uZmllbGQpIGJ1aWxkZXIgPSBidWlsZGVyLm9yZGVyQnkoc29ydEZuKHNjaGVtYU1vZGVsW2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeT8uZmllbGRcblx0XHRcdFx0fSldKSk7XG5cdFx0XHRcdHJldHVybiBhd2FpdCBidWlsZGVyLndoZXJlKC4uLmNsYXVzZSk7XG5cdFx0XHR9LFxuXHRcdFx0YXN5bmMgY291bnQoeyBtb2RlbCwgd2hlcmUgfSkge1xuXHRcdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGNsYXVzZSA9IHdoZXJlID8gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCkgOiBbXTtcblx0XHRcdFx0cmV0dXJuIChhd2FpdCBkYiQxLnNlbGVjdCh7IGNvdW50OiBjb3VudCgpIH0pLmZyb20oc2NoZW1hTW9kZWwpLndoZXJlKC4uLmNsYXVzZSkpWzBdLmNvdW50O1xuXHRcdFx0fSxcblx0XHRcdGFzeW5jIHVwZGF0ZSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuXHRcdFx0XHRjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyhtb2RlbCwgZGIkMS51cGRhdGUoc2NoZW1hTW9kZWwpLnNldCh2YWx1ZXMpLndoZXJlKC4uLmNsYXVzZSksIHZhbHVlcywgd2hlcmUpO1xuXHRcdFx0fSxcblx0XHRcdGFzeW5jIHVwZGF0ZU1hbnkoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZTogdmFsdWVzIH0pIHtcblx0XHRcdFx0Y29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuXHRcdFx0XHRjb25zdCBjbGF1c2UgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGRiJDEudXBkYXRlKHNjaGVtYU1vZGVsKS5zZXQodmFsdWVzKS53aGVyZSguLi5jbGF1c2UpO1xuXHRcdFx0fSxcblx0XHRcdGFzeW5jIGRlbGV0ZSh7IG1vZGVsLCB3aGVyZSB9KSB7XG5cdFx0XHRcdGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgY2xhdXNlID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdHJldHVybiBhd2FpdCBkYiQxLmRlbGV0ZShzY2hlbWFNb2RlbCkud2hlcmUoLi4uY2xhdXNlKTtcblx0XHRcdH0sXG5cdFx0XHRhc3luYyBkZWxldGVNYW55KHsgbW9kZWwsIHdoZXJlIH0pIHtcblx0XHRcdFx0Y29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuXHRcdFx0XHRjb25zdCBjbGF1c2UgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgZGIkMS5kZWxldGUoc2NoZW1hTW9kZWwpLndoZXJlKC4uLmNsYXVzZSk7XG5cdFx0XHRcdGxldCBjb3VudCQxID0gMDtcblx0XHRcdFx0aWYgKHJlcyAmJiBcInJvd0NvdW50XCIgaW4gcmVzKSBjb3VudCQxID0gcmVzLnJvd0NvdW50O1xuXHRcdFx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlcykpIGNvdW50JDEgPSByZXMubGVuZ3RoO1xuXHRcdFx0XHRlbHNlIGlmIChyZXMgJiYgKFwiYWZmZWN0ZWRSb3dzXCIgaW4gcmVzIHx8IFwicm93c0FmZmVjdGVkXCIgaW4gcmVzIHx8IFwiY2hhbmdlc1wiIGluIHJlcykpIGNvdW50JDEgPSByZXMuYWZmZWN0ZWRSb3dzID8/IHJlcy5yb3dzQWZmZWN0ZWQgPz8gcmVzLmNoYW5nZXM7XG5cdFx0XHRcdGlmICh0eXBlb2YgY291bnQkMSAhPT0gXCJudW1iZXJcIikgbG9nZ2VyLmVycm9yKFwiW0RyaXp6bGUgQWRhcHRlcl0gVGhlIHJlc3VsdCBvZiB0aGUgZGVsZXRlTWFueSBvcGVyYXRpb24gaXMgbm90IGEgbnVtYmVyLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiB0aGUgYWRhcHRlci4gUGxlYXNlIHJlcG9ydCB0aGlzIGlzc3VlIHRvIHRoZSBCZXR0ZXIgQXV0aCB0ZWFtLlwiLCB7XG5cdFx0XHRcdFx0cmVzLFxuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdHdoZXJlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gY291bnQkMTtcblx0XHRcdH0sXG5cdFx0XHRvcHRpb25zOiBjb25maWdcblx0XHR9O1xuXHR9O1xuXHRsZXQgYWRhcHRlck9wdGlvbnMgPSBudWxsO1xuXHRhZGFwdGVyT3B0aW9ucyA9IHtcblx0XHRjb25maWc6IHtcblx0XHRcdGFkYXB0ZXJJZDogXCJkcml6emxlXCIsXG5cdFx0XHRhZGFwdGVyTmFtZTogXCJEcml6emxlIEFkYXB0ZXJcIixcblx0XHRcdHVzZVBsdXJhbDogY29uZmlnLnVzZVBsdXJhbCA/PyBmYWxzZSxcblx0XHRcdGRlYnVnTG9nczogY29uZmlnLmRlYnVnTG9ncyA/PyBmYWxzZSxcblx0XHRcdHN1cHBvcnRzVVVJRHM6IGNvbmZpZy5wcm92aWRlciA9PT0gXCJwZ1wiID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0c3VwcG9ydHNKU09OOiBjb25maWcucHJvdmlkZXIgPT09IFwicGdcIiA/IHRydWUgOiBmYWxzZSxcblx0XHRcdHN1cHBvcnRzQXJyYXlzOiBjb25maWcucHJvdmlkZXIgPT09IFwicGdcIiA/IHRydWUgOiBmYWxzZSxcblx0XHRcdHRyYW5zYWN0aW9uOiBjb25maWcudHJhbnNhY3Rpb24gPz8gZmFsc2UgPyAoY2IpID0+IGRiLnRyYW5zYWN0aW9uKCh0eCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gY2IoY3JlYXRlQWRhcHRlckZhY3Rvcnkoe1xuXHRcdFx0XHRcdGNvbmZpZzogYWRhcHRlck9wdGlvbnMuY29uZmlnLFxuXHRcdFx0XHRcdGFkYXB0ZXI6IGNyZWF0ZUN1c3RvbUFkYXB0ZXIodHgpXG5cdFx0XHRcdH0pKGxhenlPcHRpb25zKSk7XG5cdFx0XHR9KSA6IGZhbHNlXG5cdFx0fSxcblx0XHRhZGFwdGVyOiBjcmVhdGVDdXN0b21BZGFwdGVyKGRiKVxuXHR9O1xuXHRjb25zdCBhZGFwdGVyID0gY3JlYXRlQWRhcHRlckZhY3RvcnkoYWRhcHRlck9wdGlvbnMpO1xuXHRyZXR1cm4gKG9wdGlvbnMpID0+IHtcblx0XHRsYXp5T3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0cmV0dXJuIGFkYXB0ZXIob3B0aW9ucyk7XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRyaXp6bGVBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcml6emxlLWFkYXB0ZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drizzleAdapter: () => (/* reexport safe */ _drizzle_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.drizzleAdapter)\n/* harmony export */ });\n/* harmony import */ var _drizzle_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drizzle-adapter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/drizzle-adapter.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2RyaXp6bGUtYWRhcHRlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXGRyaXp6bGUtYWRhcHRlclxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRyaXp6bGVBZGFwdGVyIH0gZnJvbSBcIi4vZHJpenpsZS1hZGFwdGVyLm1qc1wiO1xuXG5leHBvcnQgeyBkcml6emxlQWRhcHRlciB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs":
/*!**********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs ***!
  \**********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BunSqliteDialect: () => (/* binding */ BunSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/bun-sqlite-dialect.ts\nvar BunSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar BunSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new BunSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar BunSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst stmt = this.#db.prepare(sql$1);\n\t\treturn Promise.resolve({ rows: stmt.all(parameters) });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (await this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar BunSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar BunSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar BunSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new BunSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new BunSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new BunSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new BunSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=bun-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2J1bi1zcWxpdGUtZGlhbGVjdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUg7O0FBRXpIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUJBQXlCO0FBQ25DO0FBQ0EsMkJBQTJCLDRCQUE0QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUNBQWlDO0FBQzlEO0FBQ0EsMkVBQTJFLDJEQUF1QixzQkFBc0IsZ0VBQTRCO0FBQ3BKO0FBQ0EsbUNBQW1DLE1BQU07QUFDekM7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkNBQUcscUJBQXFCLE1BQU07QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsd0RBQW9CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXGt5c2VseS1hZGFwdGVyXFxidW4tc3FsaXRlLWRpYWxlY3QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBpbGVkUXVlcnksIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFLCBEZWZhdWx0UXVlcnlDb21waWxlciwgc3FsIH0gZnJvbSBcImt5c2VseVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2J1bi1zcWxpdGUtZGlhbGVjdC50c1xudmFyIEJ1blNxbGl0ZUFkYXB0ZXIgPSBjbGFzcyB7XG5cdGdldCBzdXBwb3J0c0NyZWF0ZUlmTm90RXhpc3RzKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGdldCBzdXBwb3J0c1RyYW5zYWN0aW9uYWxEZGwoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGdldCBzdXBwb3J0c1JldHVybmluZygpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRhc3luYyBhY3F1aXJlTWlncmF0aW9uTG9jaygpIHt9XG5cdGFzeW5jIHJlbGVhc2VNaWdyYXRpb25Mb2NrKCkge31cblx0Z2V0IHN1cHBvcnRzT3V0cHV0KCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZURyaXZlciA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0I2Nvbm5lY3Rpb25NdXRleCA9IG5ldyBDb25uZWN0aW9uTXV0ZXgoKTtcblx0I2RiO1xuXHQjY29ubmVjdGlvbjtcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRhc3luYyBpbml0KCkge1xuXHRcdHRoaXMuI2RiID0gdGhpcy4jY29uZmlnLmRhdGFiYXNlO1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb24gPSBuZXcgQnVuU3FsaXRlQ29ubmVjdGlvbih0aGlzLiNkYik7XG5cdFx0aWYgKHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24pIGF3YWl0IHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24odGhpcy4jY29ubmVjdGlvbik7XG5cdH1cblx0YXN5bmMgYWNxdWlyZUNvbm5lY3Rpb24oKSB7XG5cdFx0YXdhaXQgdGhpcy4jY29ubmVjdGlvbk11dGV4LmxvY2soKTtcblx0XHRyZXR1cm4gdGhpcy4jY29ubmVjdGlvbjtcblx0fVxuXHRhc3luYyBiZWdpblRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImJlZ2luXCIpKTtcblx0fVxuXHRhc3luYyBjb21taXRUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJjb21taXRcIikpO1xuXHR9XG5cdGFzeW5jIHJvbGxiYWNrVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwicm9sbGJhY2tcIikpO1xuXHR9XG5cdGFzeW5jIHJlbGVhc2VDb25uZWN0aW9uKCkge1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb25NdXRleC51bmxvY2soKTtcblx0fVxuXHRhc3luYyBkZXN0cm95KCkge1xuXHRcdHRoaXMuI2RiPy5jbG9zZSgpO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZUNvbm5lY3Rpb24gPSBjbGFzcyB7XG5cdCNkYjtcblx0Y29uc3RydWN0b3IoZGIpIHtcblx0XHR0aGlzLiNkYiA9IGRiO1xuXHR9XG5cdGV4ZWN1dGVRdWVyeShjb21waWxlZFF1ZXJ5KSB7XG5cdFx0Y29uc3QgeyBzcWw6IHNxbCQxLCBwYXJhbWV0ZXJzIH0gPSBjb21waWxlZFF1ZXJ5O1xuXHRcdGNvbnN0IHN0bXQgPSB0aGlzLiNkYi5wcmVwYXJlKHNxbCQxKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgcm93czogc3RtdC5hbGwocGFyYW1ldGVycykgfSk7XG5cdH1cblx0YXN5bmMgKnN0cmVhbVF1ZXJ5KCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlN0cmVhbWluZyBxdWVyeSBpcyBub3Qgc3VwcG9ydGVkIGJ5IFNRTGl0ZSBkcml2ZXIuXCIpO1xuXHR9XG59O1xudmFyIENvbm5lY3Rpb25NdXRleCA9IGNsYXNzIHtcblx0I3Byb21pc2U7XG5cdCNyZXNvbHZlO1xuXHRhc3luYyBsb2NrKCkge1xuXHRcdHdoaWxlIChhd2FpdCB0aGlzLiNwcm9taXNlKSBhd2FpdCB0aGlzLiNwcm9taXNlO1xuXHRcdHRoaXMuI3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0dGhpcy4jcmVzb2x2ZSA9IHJlc29sdmU7XG5cdFx0fSk7XG5cdH1cblx0dW5sb2NrKCkge1xuXHRcdGNvbnN0IHJlc29sdmUgPSB0aGlzLiNyZXNvbHZlO1xuXHRcdHRoaXMuI3Byb21pc2UgPSB2b2lkIDA7XG5cdFx0dGhpcy4jcmVzb2x2ZSA9IHZvaWQgMDtcblx0XHRyZXNvbHZlPy4oKTtcblx0fVxufTtcbnZhciBCdW5TcWxpdGVJbnRyb3NwZWN0b3IgPSBjbGFzcyB7XG5cdCNkYjtcblx0Y29uc3RydWN0b3IoZGIpIHtcblx0XHR0aGlzLiNkYiA9IGRiO1xuXHR9XG5cdGFzeW5jIGdldFNjaGVtYXMoKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdGFzeW5jIGdldFRhYmxlcyhvcHRpb25zID0geyB3aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXM6IGZhbHNlIH0pIHtcblx0XHRsZXQgcXVlcnkgPSB0aGlzLiNkYi5zZWxlY3RGcm9tKFwic3FsaXRlX3NjaGVtYVwiKS53aGVyZShcInR5cGVcIiwgXCI9XCIsIFwidGFibGVcIikud2hlcmUoXCJuYW1lXCIsIFwibm90IGxpa2VcIiwgXCJzcWxpdGVfJVwiKS5zZWxlY3QoXCJuYW1lXCIpLiRjYXN0VG8oKTtcblx0XHRpZiAoIW9wdGlvbnMud2l0aEludGVybmFsS3lzZWx5VGFibGVzKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFKS53aGVyZShcIm5hbWVcIiwgXCIhPVwiLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFKTtcblx0XHRjb25zdCB0YWJsZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHRhYmxlcy5tYXAoKHsgbmFtZSB9KSA9PiB0aGlzLiNnZXRUYWJsZU1ldGFkYXRhKG5hbWUpKSk7XG5cdH1cblx0YXN5bmMgZ2V0TWV0YWRhdGEob3B0aW9ucykge1xuXHRcdHJldHVybiB7IHRhYmxlczogYXdhaXQgdGhpcy5nZXRUYWJsZXMob3B0aW9ucykgfTtcblx0fVxuXHRhc3luYyAjZ2V0VGFibGVNZXRhZGF0YSh0YWJsZSkge1xuXHRcdGNvbnN0IGRiID0gdGhpcy4jZGI7XG5cdFx0Y29uc3QgYXV0b0luY3JlbWVudENvbCA9IChhd2FpdCBkYi5zZWxlY3RGcm9tKFwic3FsaXRlX21hc3RlclwiKS53aGVyZShcIm5hbWVcIiwgXCI9XCIsIHRhYmxlKS5zZWxlY3QoXCJzcWxcIikuJGNhc3RUbygpLmV4ZWN1dGUoKSlbMF0/LnNxbD8uc3BsaXQoL1tcXChcXCksXS8pPy5maW5kKChpdCkgPT4gaXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dG9pbmNyZW1lbnRcIikpPy5zcGxpdCgvXFxzKy8pPy5bMF0/LnJlcGxhY2UoL1tcImBdL2csIFwiXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0YWJsZSxcblx0XHRcdGNvbHVtbnM6IChhd2FpdCBkYi5zZWxlY3RGcm9tKHNxbGBwcmFnbWFfdGFibGVfaW5mbygke3RhYmxlfSlgLmFzKFwidGFibGVfaW5mb1wiKSkuc2VsZWN0KFtcblx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFwidHlwZVwiLFxuXHRcdFx0XHRcIm5vdG51bGxcIixcblx0XHRcdFx0XCJkZmx0X3ZhbHVlXCJcblx0XHRcdF0pLmV4ZWN1dGUoKSkubWFwKChjb2wpID0+ICh7XG5cdFx0XHRcdG5hbWU6IGNvbC5uYW1lLFxuXHRcdFx0XHRkYXRhVHlwZTogY29sLnR5cGUsXG5cdFx0XHRcdGlzTnVsbGFibGU6ICFjb2wubm90bnVsbCxcblx0XHRcdFx0aXNBdXRvSW5jcmVtZW50aW5nOiBjb2wubmFtZSA9PT0gYXV0b0luY3JlbWVudENvbCxcblx0XHRcdFx0aGFzRGVmYXVsdFZhbHVlOiBjb2wuZGZsdF92YWx1ZSAhPSBudWxsXG5cdFx0XHR9KSksXG5cdFx0XHRpc1ZpZXc6IHRydWVcblx0XHR9O1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZVF1ZXJ5Q29tcGlsZXIgPSBjbGFzcyBleHRlbmRzIERlZmF1bHRRdWVyeUNvbXBpbGVyIHtcblx0Z2V0Q3VycmVudFBhcmFtZXRlclBsYWNlaG9sZGVyKCkge1xuXHRcdHJldHVybiBcIj9cIjtcblx0fVxuXHRnZXRMZWZ0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldFJpZ2h0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldEF1dG9JbmNyZW1lbnQoKSB7XG5cdFx0cmV0dXJuIFwiYXV0b2luY3JlbWVudFwiO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZURpYWxlY3QgPSBjbGFzcyB7XG5cdCNjb25maWc7XG5cdGNvbnN0cnVjdG9yKGNvbmZpZykge1xuXHRcdHRoaXMuI2NvbmZpZyA9IHsgLi4uY29uZmlnIH07XG5cdH1cblx0Y3JlYXRlRHJpdmVyKCkge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlRHJpdmVyKHRoaXMuI2NvbmZpZyk7XG5cdH1cblx0Y3JlYXRlUXVlcnlDb21waWxlcigpIHtcblx0XHRyZXR1cm4gbmV3IEJ1blNxbGl0ZVF1ZXJ5Q29tcGlsZXIoKTtcblx0fVxuXHRjcmVhdGVBZGFwdGVyKCkge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlQWRhcHRlcigpO1xuXHR9XG5cdGNyZWF0ZUludHJvc3BlY3RvcihkYikge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlSW50cm9zcGVjdG9yKGRiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCdW5TcWxpdGVEaWFsZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idW4tc3FsaXRlLWRpYWxlY3QubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs ***!
  \***********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* binding */ createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* binding */ getKyselyDatabaseType)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/sqlite/sqlite-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/mysql/mysql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/postgres/postgres-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/dialect/mssql/mssql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/kysely.js\");\n\n\n//#region src/adapters/kysely-adapter/dialect.ts\nfunction getKyselyDatabaseType(db) {\n\tif (!db) return null;\n\tif (\"dialect\" in db) return getKyselyDatabaseType(db.dialect);\n\tif (\"createDriver\" in db) {\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect) return \"sqlite\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect) return \"mysql\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect) return \"postgres\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_3__.MssqlDialect) return \"mssql\";\n\t}\n\tif (\"aggregate\" in db) return \"sqlite\";\n\tif (\"getConnection\" in db) return \"mysql\";\n\tif (\"connect\" in db) return \"postgres\";\n\tif (\"fileControl\" in db) return \"sqlite\";\n\tif (\"open\" in db && \"close\" in db && \"prepare\" in db) return \"sqlite\";\n\treturn null;\n}\nconst createKyselyAdapter = async (config) => {\n\tconst db = config.database;\n\tif (!db) return {\n\t\tkysely: null,\n\t\tdatabaseType: null,\n\t\ttransaction: void 0\n\t};\n\tif (\"db\" in db) return {\n\t\tkysely: db.db,\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tif (\"dialect\" in db) return {\n\t\tkysely: new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect: db.dialect }),\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tlet dialect = void 0;\n\tconst databaseType = getKyselyDatabaseType(db);\n\tif (\"createDriver\" in db) dialect = db;\n\tif (\"aggregate\" in db && !(\"createSession\" in db)) dialect = new kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect({ database: db });\n\tif (\"getConnection\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect(db);\n\tif (\"connect\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect({ pool: db });\n\tif (\"fileControl\" in db) {\n\t\tconst { BunSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ./bun-sqlite-dialect.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\"));\n\t\tdialect = new BunSqliteDialect({ database: db });\n\t}\n\tif (\"createSession\" in db) {\n\t\tlet DatabaseSync = void 0;\n\t\ttry {\n\t\t\tconst nodeSqlite = \"node:sqlite\";\n\t\t\t({DatabaseSync} = await import(\n\t\t\t\t/* @vite-ignore */\n\t\t\t\t/* webpackIgnore: true */\n\t\t\t\tnodeSqlite\n));\n\t\t} catch (error) {\n\t\t\tif (error !== null && typeof error === \"object\" && \"code\" in error && error.code !== \"ERR_UNKNOWN_BUILTIN_MODULE\") throw error;\n\t\t}\n\t\tif (DatabaseSync && db instanceof DatabaseSync) {\n\t\t\tconst { NodeSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ./node-sqlite-dialect.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\"));\n\t\t\tdialect = new NodeSqliteDialect({ database: db });\n\t\t}\n\t}\n\treturn {\n\t\tkysely: dialect ? new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect }) : null,\n\t\tdatabaseType,\n\t\ttransaction: void 0\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2RpYWxlY3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEY7O0FBRTVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaURBQWE7QUFDakMsb0JBQW9CLGdEQUFZO0FBQ2hDLG9CQUFvQixtREFBZTtBQUNuQyxvQkFBb0IsZ0RBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQ0FBTSxHQUFHLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsaURBQWEsR0FBRyxjQUFjO0FBQ2hHLDBDQUEwQyxnREFBWTtBQUN0RCxvQ0FBb0MsbURBQWUsR0FBRyxVQUFVO0FBQ2hFO0FBQ0EsVUFBVSxtQkFBbUIsUUFBUSwrV0FBa0M7QUFDdkUsbUNBQW1DLGNBQWM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssY0FBYztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxXQUFXLG9CQUFvQixRQUFRLGlYQUFtQztBQUMxRSxxQ0FBcUMsY0FBYztBQUNuRDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMENBQU0sR0FBRyxTQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3NEO0FBQ3REIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxreXNlbHktYWRhcHRlclxcZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS3lzZWx5LCBNc3NxbERpYWxlY3QsIE15c3FsRGlhbGVjdCwgUG9zdGdyZXNEaWFsZWN0LCBTcWxpdGVEaWFsZWN0IH0gZnJvbSBcImt5c2VseVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2RpYWxlY3QudHNcbmZ1bmN0aW9uIGdldEt5c2VseURhdGFiYXNlVHlwZShkYikge1xuXHRpZiAoIWRiKSByZXR1cm4gbnVsbDtcblx0aWYgKFwiZGlhbGVjdFwiIGluIGRiKSByZXR1cm4gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiLmRpYWxlY3QpO1xuXHRpZiAoXCJjcmVhdGVEcml2ZXJcIiBpbiBkYikge1xuXHRcdGlmIChkYiBpbnN0YW5jZW9mIFNxbGl0ZURpYWxlY3QpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRcdGlmIChkYiBpbnN0YW5jZW9mIE15c3FsRGlhbGVjdCkgcmV0dXJuIFwibXlzcWxcIjtcblx0XHRpZiAoZGIgaW5zdGFuY2VvZiBQb3N0Z3Jlc0RpYWxlY3QpIHJldHVybiBcInBvc3RncmVzXCI7XG5cdFx0aWYgKGRiIGluc3RhbmNlb2YgTXNzcWxEaWFsZWN0KSByZXR1cm4gXCJtc3NxbFwiO1xuXHR9XG5cdGlmIChcImFnZ3JlZ2F0ZVwiIGluIGRiKSByZXR1cm4gXCJzcWxpdGVcIjtcblx0aWYgKFwiZ2V0Q29ubmVjdGlvblwiIGluIGRiKSByZXR1cm4gXCJteXNxbFwiO1xuXHRpZiAoXCJjb25uZWN0XCIgaW4gZGIpIHJldHVybiBcInBvc3RncmVzXCI7XG5cdGlmIChcImZpbGVDb250cm9sXCIgaW4gZGIpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRpZiAoXCJvcGVuXCIgaW4gZGIgJiYgXCJjbG9zZVwiIGluIGRiICYmIFwicHJlcGFyZVwiIGluIGRiKSByZXR1cm4gXCJzcWxpdGVcIjtcblx0cmV0dXJuIG51bGw7XG59XG5jb25zdCBjcmVhdGVLeXNlbHlBZGFwdGVyID0gYXN5bmMgKGNvbmZpZykgPT4ge1xuXHRjb25zdCBkYiA9IGNvbmZpZy5kYXRhYmFzZTtcblx0aWYgKCFkYikgcmV0dXJuIHtcblx0XHRreXNlbHk6IG51bGwsXG5cdFx0ZGF0YWJhc2VUeXBlOiBudWxsLFxuXHRcdHRyYW5zYWN0aW9uOiB2b2lkIDBcblx0fTtcblx0aWYgKFwiZGJcIiBpbiBkYikgcmV0dXJuIHtcblx0XHRreXNlbHk6IGRiLmRiLFxuXHRcdGRhdGFiYXNlVHlwZTogZGIudHlwZSxcblx0XHR0cmFuc2FjdGlvbjogZGIudHJhbnNhY3Rpb25cblx0fTtcblx0aWYgKFwiZGlhbGVjdFwiIGluIGRiKSByZXR1cm4ge1xuXHRcdGt5c2VseTogbmV3IEt5c2VseSh7IGRpYWxlY3Q6IGRiLmRpYWxlY3QgfSksXG5cdFx0ZGF0YWJhc2VUeXBlOiBkYi50eXBlLFxuXHRcdHRyYW5zYWN0aW9uOiBkYi50cmFuc2FjdGlvblxuXHR9O1xuXHRsZXQgZGlhbGVjdCA9IHZvaWQgMDtcblx0Y29uc3QgZGF0YWJhc2VUeXBlID0gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiKTtcblx0aWYgKFwiY3JlYXRlRHJpdmVyXCIgaW4gZGIpIGRpYWxlY3QgPSBkYjtcblx0aWYgKFwiYWdncmVnYXRlXCIgaW4gZGIgJiYgIShcImNyZWF0ZVNlc3Npb25cIiBpbiBkYikpIGRpYWxlY3QgPSBuZXcgU3FsaXRlRGlhbGVjdCh7IGRhdGFiYXNlOiBkYiB9KTtcblx0aWYgKFwiZ2V0Q29ubmVjdGlvblwiIGluIGRiKSBkaWFsZWN0ID0gbmV3IE15c3FsRGlhbGVjdChkYik7XG5cdGlmIChcImNvbm5lY3RcIiBpbiBkYikgZGlhbGVjdCA9IG5ldyBQb3N0Z3Jlc0RpYWxlY3QoeyBwb29sOiBkYiB9KTtcblx0aWYgKFwiZmlsZUNvbnRyb2xcIiBpbiBkYikge1xuXHRcdGNvbnN0IHsgQnVuU3FsaXRlRGlhbGVjdCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9idW4tc3FsaXRlLWRpYWxlY3QubWpzXCIpO1xuXHRcdGRpYWxlY3QgPSBuZXcgQnVuU3FsaXRlRGlhbGVjdCh7IGRhdGFiYXNlOiBkYiB9KTtcblx0fVxuXHRpZiAoXCJjcmVhdGVTZXNzaW9uXCIgaW4gZGIpIHtcblx0XHRsZXQgRGF0YWJhc2VTeW5jID0gdm9pZCAwO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBub2RlU3FsaXRlID0gXCJub2RlOnNxbGl0ZVwiO1xuXHRcdFx0KHtEYXRhYmFzZVN5bmN9ID0gYXdhaXQgaW1wb3J0KFxuXHRcdFx0XHQvKiBAdml0ZS1pZ25vcmUgKi9cblx0XHRcdFx0Lyogd2VicGFja0lnbm9yZTogdHJ1ZSAqL1xuXHRcdFx0XHRub2RlU3FsaXRlXG4pKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yICE9PSBudWxsICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcImNvZGVcIiBpbiBlcnJvciAmJiBlcnJvci5jb2RlICE9PSBcIkVSUl9VTktOT1dOX0JVSUxUSU5fTU9EVUxFXCIpIHRocm93IGVycm9yO1xuXHRcdH1cblx0XHRpZiAoRGF0YWJhc2VTeW5jICYmIGRiIGluc3RhbmNlb2YgRGF0YWJhc2VTeW5jKSB7XG5cdFx0XHRjb25zdCB7IE5vZGVTcWxpdGVEaWFsZWN0IH0gPSBhd2FpdCBpbXBvcnQoXCIuL25vZGUtc3FsaXRlLWRpYWxlY3QubWpzXCIpO1xuXHRcdFx0ZGlhbGVjdCA9IG5ldyBOb2RlU3FsaXRlRGlhbGVjdCh7IGRhdGFiYXNlOiBkYiB9KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHRreXNlbHk6IGRpYWxlY3QgPyBuZXcgS3lzZWx5KHsgZGlhbGVjdCB9KSA6IG51bGwsXG5cdFx0ZGF0YWJhc2VUeXBlLFxuXHRcdHRyYW5zYWN0aW9uOiB2b2lkIDBcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlS3lzZWx5QWRhcHRlciwgZ2V0S3lzZWx5RGF0YWJhc2VUeXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaWFsZWN0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType),\n/* harmony export */   kyselyAdapter: () => (/* reexport safe */ _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__.kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialect.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kysely-adapter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyRTtBQUN0QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xca3lzZWx5LWFkYXB0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVLeXNlbHlBZGFwdGVyLCBnZXRLeXNlbHlEYXRhYmFzZVR5cGUgfSBmcm9tIFwiLi9kaWFsZWN0Lm1qc1wiO1xuaW1wb3J0IHsga3lzZWx5QWRhcHRlciB9IGZyb20gXCIuL2t5c2VseS1hZGFwdGVyLm1qc1wiO1xuXG5leHBvcnQgeyBjcmVhdGVLeXNlbHlBZGFwdGVyLCBnZXRLeXNlbHlEYXRhYmFzZVR5cGUsIGt5c2VseUFkYXB0ZXIgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kyselyAdapter: () => (/* binding */ kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/kysely-adapter/kysely-adapter.ts\nconst kyselyAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst createCustomAdapter = (db$1) => {\n\t\treturn ({ getFieldName, schema, getDefaultFieldName, getDefaultModelName, getFieldAttributes, getModelName }) => {\n\t\t\tconst selectAllJoins = (join) => {\n\t\t\t\tconst allSelects = [];\n\t\t\t\tconst allSelectsStr = [];\n\t\t\t\tif (join) for (const [joinModel, _] of Object.entries(join)) {\n\t\t\t\t\tconst fields = schema[getDefaultModelName(joinModel)]?.fields;\n\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\tif (!fields) continue;\n\t\t\t\t\tfields.id = { type: \"string\" };\n\t\t\t\t\tfor (const [field, fieldAttr] of Object.entries(fields)) {\n\t\t\t\t\t\tallSelects.push((0,kysely__WEBPACK_IMPORTED_MODULE_1__.sql)`${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`join_${joinModelName}`)}.${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(fieldAttr.fieldName || field)} as ${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`_joined_${joinModelName}_${fieldAttr.fieldName || field}`)}`);\n\t\t\t\t\t\tallSelectsStr.push({\n\t\t\t\t\t\t\tjoinModel,\n\t\t\t\t\t\t\tjoinModelRef: joinModelName,\n\t\t\t\t\t\t\tfieldName: fieldAttr.fieldName || field\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tallSelectsStr,\n\t\t\t\t\tallSelects\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst withReturning = async (values, builder, model, where) => {\n\t\t\t\tlet res;\n\t\t\t\tif (config?.type === \"mysql\") {\n\t\t\t\t\tawait builder.execute();\n\t\t\t\t\tconst field = values.id ? \"id\" : where.length > 0 && where[0]?.field ? where[0].field : \"id\";\n\t\t\t\t\tif (!values.id && where.length === 0) {\n\t\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t}), \"desc\").limit(1).executeTakeFirst();\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = values[field] || where[0]?.value;\n\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"desc\").where(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"=\", value).limit(1).executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\tres = await builder.outputAll(\"inserted\").executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tres = await builder.returningAll().executeTakeFirst();\n\t\t\t\treturn res;\n\t\t\t};\n\t\t\tfunction convertWhereClause(model, w) {\n\t\t\t\tif (!w) return {\n\t\t\t\t\tand: null,\n\t\t\t\t\tor: null\n\t\t\t\t};\n\t\t\t\tconst conditions = {\n\t\t\t\t\tand: [],\n\t\t\t\t\tor: []\n\t\t\t\t};\n\t\t\t\tw.forEach((condition) => {\n\t\t\t\t\tconst { field: _field, value: _value, operator = \"=\", connector = \"AND\" } = condition;\n\t\t\t\t\tconst value = _value;\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: _field\n\t\t\t\t\t});\n\t\t\t\t\tconst expr = (eb) => {\n\t\t\t\t\t\tconst f = `${model}.${field}`;\n\t\t\t\t\t\tif (operator.toLowerCase() === \"in\") return eb(f, \"in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator.toLowerCase() === \"not_in\") return eb(f, \"not in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator === \"contains\") return eb(f, \"like\", `%${value}%`);\n\t\t\t\t\t\tif (operator === \"starts_with\") return eb(f, \"like\", `${value}%`);\n\t\t\t\t\t\tif (operator === \"ends_with\") return eb(f, \"like\", `%${value}`);\n\t\t\t\t\t\tif (operator === \"eq\") return eb(f, \"=\", value);\n\t\t\t\t\t\tif (operator === \"ne\") return eb(f, \"<>\", value);\n\t\t\t\t\t\tif (operator === \"gt\") return eb(f, \">\", value);\n\t\t\t\t\t\tif (operator === \"gte\") return eb(f, \">=\", value);\n\t\t\t\t\t\tif (operator === \"lt\") return eb(f, \"<\", value);\n\t\t\t\t\t\tif (operator === \"lte\") return eb(f, \"<=\", value);\n\t\t\t\t\t\treturn eb(f, operator, value);\n\t\t\t\t\t};\n\t\t\t\t\tif (connector === \"OR\") conditions.or.push(expr);\n\t\t\t\t\telse conditions.and.push(expr);\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tand: conditions.and.length ? conditions.and : null,\n\t\t\t\t\tor: conditions.or.length ? conditions.or : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction processJoinedResults(rows, joinConfig, allSelectsStr) {\n\t\t\t\tif (!joinConfig || !rows.length) return rows;\n\t\t\t\tconst groupedByMainId = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const currentRow of rows) {\n\t\t\t\t\tconst mainModelFields = {};\n\t\t\t\t\tconst joinedModelFields = {};\n\t\t\t\t\tfor (const [joinModel] of Object.entries(joinConfig)) joinedModelFields[getModelName(joinModel)] = {};\n\t\t\t\t\tfor (const [key, value] of Object.entries(currentRow)) {\n\t\t\t\t\t\tconst keyStr = String(key);\n\t\t\t\t\t\tlet assigned = false;\n\t\t\t\t\t\tfor (const { joinModel, fieldName, joinModelRef } of allSelectsStr) if (keyStr === `_joined_${joinModelRef}_${fieldName}`) {\n\t\t\t\t\t\t\tjoinedModelFields[getModelName(joinModel)][getFieldName({\n\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\tfield: fieldName\n\t\t\t\t\t\t\t})] = value;\n\t\t\t\t\t\t\tassigned = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!assigned) mainModelFields[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tconst mainId = mainModelFields.id;\n\t\t\t\t\tif (!mainId) continue;\n\t\t\t\t\tif (!groupedByMainId.has(mainId)) {\n\t\t\t\t\t\tconst entry$1 = { ...mainModelFields };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) entry$1[getModelName(joinModel)] = joinAttr.relation === \"one-to-one\" ? null : [];\n\t\t\t\t\t\tgroupedByMainId.set(mainId, entry$1);\n\t\t\t\t\t}\n\t\t\t\t\tconst entry = groupedByMainId.get(mainId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) {\n\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tconst joinedObj = joinedModelFields[getModelName(joinModel)];\n\t\t\t\t\t\tconst hasData = joinedObj && Object.keys(joinedObj).length > 0 && Object.values(joinedObj).some((value) => value !== null && value !== void 0);\n\t\t\t\t\t\tif (isUnique) entry[getModelName(joinModel)] = hasData ? joinedObj : null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (Array.isArray(entry[joinModelName]) && hasData) {\n\t\t\t\t\t\t\t\tif (entry[joinModelName].length >= limit) continue;\n\t\t\t\t\t\t\t\tconst idFieldName = getFieldName({\n\t\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconst joinedId = joinedObj[idFieldName];\n\t\t\t\t\t\t\t\tif (joinedId) {\n\t\t\t\t\t\t\t\t\tif (!entry[joinModelName].some((item) => item[idFieldName] === joinedId) && entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t\t} else if (entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst result = Array.from(groupedByMainId.values());\n\t\t\t\tfor (const entry of result) for (const [joinModel, joinAttr] of Object.entries(joinConfig)) if (joinAttr.relation !== \"one-to-one\") {\n\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\tif (Array.isArray(entry[joinModelName])) {\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tif (entry[joinModelName].length > limit) entry[joinModelName] = entry[joinModelName].slice(0, limit);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tasync create({ data, model }) {\n\t\t\t\t\treturn await withReturning(data, db$1.insertInto(model).values(data), model, []);\n\t\t\t\t},\n\t\t\t\tasync findOne({ model, where, select, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res || !Array.isArray(res) || res.length === 0) return null;\n\t\t\t\t\tconst row = res[0];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr)[0];\n\t\t\t\t\treturn row;\n\t\t\t\t},\n\t\t\t\tasync findMany({ model, where, limit, offset, sortBy, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\t\t\tif (offset !== void 0) {\n\t\t\t\t\t\t\t\tif (!sortBy) b = b.orderBy(getFieldName({\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tb = b.offset(offset).fetch(limit || 100);\n\t\t\t\t\t\t\t} else if (limit !== void 0) b = b.top(limit);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (limit !== void 0) b = b.limit(limit);\n\t\t\t\t\t\t\tif (offset !== void 0) b = b.offset(offset);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sortBy?.field) b = b.orderBy(`${getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tif (sortBy?.field) query = query.orderBy(`${getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res) return [];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\t\t\t\tasync update({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\treturn await withReturning(values, query, model, where);\n\t\t\t\t},\n\t\t\t\tasync updateMany({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numUpdatedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\tasync count({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom(model).select(db$1.fn.count(\"id\").as(\"count\"));\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (typeof res[0].count === \"number\") return res[0].count;\n\t\t\t\t\tif (typeof res[0].count === \"bigint\") return Number(res[0].count);\n\t\t\t\t\treturn parseInt(res[0].count);\n\t\t\t\t},\n\t\t\t\tasync delete({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tawait query.execute();\n\t\t\t\t},\n\t\t\t\tasync deleteMany({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numDeletedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\toptions: config\n\t\t\t};\n\t\t};\n\t};\n\tlet adapterOptions = null;\n\tadapterOptions = {\n\t\tconfig: {\n\t\t\tadapterId: \"kysely\",\n\t\t\tadapterName: \"Kysely Adapter\",\n\t\t\tusePlural: config?.usePlural,\n\t\t\tdebugLogs: config?.debugLogs,\n\t\t\tsupportsBooleans: config?.type === \"sqlite\" || config?.type === \"mssql\" || config?.type === \"mysql\" || !config?.type ? false : true,\n\t\t\tsupportsDates: config?.type === \"sqlite\" || config?.type === \"mssql\" || !config?.type ? false : true,\n\t\t\tsupportsJSON: config?.type === \"postgres\" ? true : false,\n\t\t\tsupportsArrays: false,\n\t\t\tsupportsUUIDs: config?.type === \"postgres\" ? true : false,\n\t\t\ttransaction: config?.transaction ? (cb) => db.transaction().execute((trx) => {\n\t\t\t\treturn cb((0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)({\n\t\t\t\t\tconfig: adapterOptions.config,\n\t\t\t\t\tadapter: createCustomAdapter(trx)\n\t\t\t\t})(lazyOptions));\n\t\t\t}) : false\n\t\t},\n\t\tadapter: createCustomAdapter(db)\n\t};\n\tconst adapter = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)(adapterOptions);\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapter(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=kysely-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2t5c2VseS1hZGFwdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkI7QUFDdUM7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrR0FBa0c7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxzQkFBc0IsMkNBQUcsR0FBRyx1Q0FBRyxhQUFhLGNBQWMsR0FBRyxHQUFHLHVDQUFHLG9DQUFvQyxLQUFLLHVDQUFHLGdCQUFnQixjQUFjLEdBQUcsNkJBQTZCLEdBQUc7QUFDaEw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtFQUFrRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLG1CQUFtQixNQUFNLEdBQUcsTUFBTTtBQUNsQztBQUNBO0FBQ0EsNERBQTRELE1BQU07QUFDbEUsOERBQThELE1BQU07QUFDcEUsNkRBQTZELE1BQU07QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHFDQUFxQyw0Q0FBNEMsYUFBYSxHQUFHLFVBQVU7QUFDOUg7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEM7QUFDQSxLQUFLO0FBQ0wsb0JBQW9CLDRCQUE0QjtBQUNoRCxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsZ0NBQWdDLFdBQVcsVUFBVSxjQUFjLG9DQUFvQyxjQUFjLEdBQUcsZUFBZSxtQkFBbUIsaUJBQWlCO0FBQzNLO0FBQ0EsYUFBYSw0QkFBNEI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHFCQUFxQiwyQ0FBMkM7QUFDaEUsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBLE9BQU8sRUFBRTtBQUNUO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsZ0NBQWdDLFdBQVcsVUFBVSxjQUFjLG9DQUFvQyxjQUFjLEdBQUcsZUFBZSxtQkFBbUIsaUJBQWlCO0FBQzNLO0FBQ0EsYUFBYSw0QkFBNEI7QUFDekM7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBLE1BQU0sRUFBRTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG1CQUFtQiw4QkFBOEI7QUFDakQsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1Qiw4QkFBOEI7QUFDckQsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsa0JBQWtCLGNBQWM7QUFDaEMsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG1CQUFtQixjQUFjO0FBQ2pDLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsY0FBYztBQUNyQyxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrRkFBb0I7QUFDbEM7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxpQkFBaUIsa0ZBQW9CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXGt5c2VseS1hZGFwdGVyXFxreXNlbHktYWRhcHRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3FsIH0gZnJvbSBcImt5c2VseVwiO1xuaW1wb3J0IHsgY3JlYXRlQWRhcHRlckZhY3RvcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGIvYWRhcHRlclwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2t5c2VseS1hZGFwdGVyLnRzXG5jb25zdCBreXNlbHlBZGFwdGVyID0gKGRiLCBjb25maWcpID0+IHtcblx0bGV0IGxhenlPcHRpb25zID0gbnVsbDtcblx0Y29uc3QgY3JlYXRlQ3VzdG9tQWRhcHRlciA9IChkYiQxKSA9PiB7XG5cdFx0cmV0dXJuICh7IGdldEZpZWxkTmFtZSwgc2NoZW1hLCBnZXREZWZhdWx0RmllbGROYW1lLCBnZXREZWZhdWx0TW9kZWxOYW1lLCBnZXRGaWVsZEF0dHJpYnV0ZXMsIGdldE1vZGVsTmFtZSB9KSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3RBbGxKb2lucyA9IChqb2luKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFsbFNlbGVjdHMgPSBbXTtcblx0XHRcdFx0Y29uc3QgYWxsU2VsZWN0c1N0ciA9IFtdO1xuXHRcdFx0XHRpZiAoam9pbikgZm9yIChjb25zdCBbam9pbk1vZGVsLCBfXSBvZiBPYmplY3QuZW50cmllcyhqb2luKSkge1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkcyA9IHNjaGVtYVtnZXREZWZhdWx0TW9kZWxOYW1lKGpvaW5Nb2RlbCldPy5maWVsZHM7XG5cdFx0XHRcdFx0Y29uc3QgW19qb2luTW9kZWxTY2hlbWEsIGpvaW5Nb2RlbE5hbWVdID0gam9pbk1vZGVsLmluY2x1ZGVzKFwiLlwiKSA/IGpvaW5Nb2RlbC5zcGxpdChcIi5cIikgOiBbdm9pZCAwLCBqb2luTW9kZWxdO1xuXHRcdFx0XHRcdGlmICghZmllbGRzKSBjb250aW51ZTtcblx0XHRcdFx0XHRmaWVsZHMuaWQgPSB7IHR5cGU6IFwic3RyaW5nXCIgfTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtmaWVsZCwgZmllbGRBdHRyXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMpKSB7XG5cdFx0XHRcdFx0XHRhbGxTZWxlY3RzLnB1c2goc3FsYCR7c3FsLnJlZihgam9pbl8ke2pvaW5Nb2RlbE5hbWV9YCl9LiR7c3FsLnJlZihmaWVsZEF0dHIuZmllbGROYW1lIHx8IGZpZWxkKX0gYXMgJHtzcWwucmVmKGBfam9pbmVkXyR7am9pbk1vZGVsTmFtZX1fJHtmaWVsZEF0dHIuZmllbGROYW1lIHx8IGZpZWxkfWApfWApO1xuXHRcdFx0XHRcdFx0YWxsU2VsZWN0c1N0ci5wdXNoKHtcblx0XHRcdFx0XHRcdFx0am9pbk1vZGVsLFxuXHRcdFx0XHRcdFx0XHRqb2luTW9kZWxSZWY6IGpvaW5Nb2RlbE5hbWUsXG5cdFx0XHRcdFx0XHRcdGZpZWxkTmFtZTogZmllbGRBdHRyLmZpZWxkTmFtZSB8fCBmaWVsZFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YWxsU2VsZWN0c1N0cixcblx0XHRcdFx0XHRhbGxTZWxlY3RzXG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3Qgd2l0aFJldHVybmluZyA9IGFzeW5jICh2YWx1ZXMsIGJ1aWxkZXIsIG1vZGVsLCB3aGVyZSkgPT4ge1xuXHRcdFx0XHRsZXQgcmVzO1xuXHRcdFx0XHRpZiAoY29uZmlnPy50eXBlID09PSBcIm15c3FsXCIpIHtcblx0XHRcdFx0XHRhd2FpdCBidWlsZGVyLmV4ZWN1dGUoKTtcblx0XHRcdFx0XHRjb25zdCBmaWVsZCA9IHZhbHVlcy5pZCA/IFwiaWRcIiA6IHdoZXJlLmxlbmd0aCA+IDAgJiYgd2hlcmVbMF0/LmZpZWxkID8gd2hlcmVbMF0uZmllbGQgOiBcImlkXCI7XG5cdFx0XHRcdFx0aWYgKCF2YWx1ZXMuaWQgJiYgd2hlcmUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXMgPSBhd2FpdCBkYiQxLnNlbGVjdEZyb20obW9kZWwpLnNlbGVjdEFsbCgpLm9yZGVyQnkoZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRcdGZpZWxkXG5cdFx0XHRcdFx0XHR9KSwgXCJkZXNjXCIpLmxpbWl0KDEpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gdmFsdWVzW2ZpZWxkXSB8fCB3aGVyZVswXT8udmFsdWU7XG5cdFx0XHRcdFx0cmVzID0gYXdhaXQgZGIkMS5zZWxlY3RGcm9tKG1vZGVsKS5zZWxlY3RBbGwoKS5vcmRlckJ5KGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkXG5cdFx0XHRcdFx0fSksIFwiZGVzY1wiKS53aGVyZShnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRmaWVsZFxuXHRcdFx0XHRcdH0pLCBcIj1cIiwgdmFsdWUpLmxpbWl0KDEpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIikge1xuXHRcdFx0XHRcdHJlcyA9IGF3YWl0IGJ1aWxkZXIub3V0cHV0QWxsKFwiaW5zZXJ0ZWRcIikuZXhlY3V0ZVRha2VGaXJzdCgpO1xuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmVzID0gYXdhaXQgYnVpbGRlci5yZXR1cm5pbmdBbGwoKS5leGVjdXRlVGFrZUZpcnN0KCk7XG5cdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHR9O1xuXHRcdFx0ZnVuY3Rpb24gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3KSB7XG5cdFx0XHRcdGlmICghdykgcmV0dXJuIHtcblx0XHRcdFx0XHRhbmQ6IG51bGwsXG5cdFx0XHRcdFx0b3I6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgY29uZGl0aW9ucyA9IHtcblx0XHRcdFx0XHRhbmQ6IFtdLFxuXHRcdFx0XHRcdG9yOiBbXVxuXHRcdFx0XHR9O1xuXHRcdFx0XHR3LmZvckVhY2goKGNvbmRpdGlvbikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHsgZmllbGQ6IF9maWVsZCwgdmFsdWU6IF92YWx1ZSwgb3BlcmF0b3IgPSBcIj1cIiwgY29ubmVjdG9yID0gXCJBTkRcIiB9ID0gY29uZGl0aW9uO1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gX3ZhbHVlO1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IF9maWVsZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGV4cHIgPSAoZWIpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGYgPSBgJHttb2RlbH0uJHtmaWVsZH1gO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5cIikgcmV0dXJuIGViKGYsIFwiaW5cIiwgQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0pO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yLnRvTG93ZXJDYXNlKCkgPT09IFwibm90X2luXCIpIHJldHVybiBlYihmLCBcIm5vdCBpblwiLCBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiY29udGFpbnNcIikgcmV0dXJuIGViKGYsIFwibGlrZVwiLCBgJSR7dmFsdWV9JWApO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcInN0YXJ0c193aXRoXCIpIHJldHVybiBlYihmLCBcImxpa2VcIiwgYCR7dmFsdWV9JWApO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImVuZHNfd2l0aFwiKSByZXR1cm4gZWIoZiwgXCJsaWtlXCIsIGAlJHt2YWx1ZX1gKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJlcVwiKSByZXR1cm4gZWIoZiwgXCI9XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJuZVwiKSByZXR1cm4gZWIoZiwgXCI8PlwiLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiZ3RcIikgcmV0dXJuIGViKGYsIFwiPlwiLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiZ3RlXCIpIHJldHVybiBlYihmLCBcIj49XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJsdFwiKSByZXR1cm4gZWIoZiwgXCI8XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJsdGVcIikgcmV0dXJuIGViKGYsIFwiPD1cIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGViKGYsIG9wZXJhdG9yLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZiAoY29ubmVjdG9yID09PSBcIk9SXCIpIGNvbmRpdGlvbnMub3IucHVzaChleHByKTtcblx0XHRcdFx0XHRlbHNlIGNvbmRpdGlvbnMuYW5kLnB1c2goZXhwcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGFuZDogY29uZGl0aW9ucy5hbmQubGVuZ3RoID8gY29uZGl0aW9ucy5hbmQgOiBudWxsLFxuXHRcdFx0XHRcdG9yOiBjb25kaXRpb25zLm9yLmxlbmd0aCA/IGNvbmRpdGlvbnMub3IgOiBudWxsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRmdW5jdGlvbiBwcm9jZXNzSm9pbmVkUmVzdWx0cyhyb3dzLCBqb2luQ29uZmlnLCBhbGxTZWxlY3RzU3RyKSB7XG5cdFx0XHRcdGlmICgham9pbkNvbmZpZyB8fCAhcm93cy5sZW5ndGgpIHJldHVybiByb3dzO1xuXHRcdFx0XHRjb25zdCBncm91cGVkQnlNYWluSWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGN1cnJlbnRSb3cgb2Ygcm93cykge1xuXHRcdFx0XHRcdGNvbnN0IG1haW5Nb2RlbEZpZWxkcyA9IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGpvaW5lZE1vZGVsRmllbGRzID0ge307XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbam9pbk1vZGVsXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkgam9pbmVkTW9kZWxGaWVsZHNbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldID0ge307XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY3VycmVudFJvdykpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGtleVN0ciA9IFN0cmluZyhrZXkpO1xuXHRcdFx0XHRcdFx0bGV0IGFzc2lnbmVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHsgam9pbk1vZGVsLCBmaWVsZE5hbWUsIGpvaW5Nb2RlbFJlZiB9IG9mIGFsbFNlbGVjdHNTdHIpIGlmIChrZXlTdHIgPT09IGBfam9pbmVkXyR7am9pbk1vZGVsUmVmfV8ke2ZpZWxkTmFtZX1gKSB7XG5cdFx0XHRcdFx0XHRcdGpvaW5lZE1vZGVsRmllbGRzW2dldE1vZGVsTmFtZShqb2luTW9kZWwpXVtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRcdG1vZGVsOiBqb2luTW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0ZmllbGQ6IGZpZWxkTmFtZVxuXHRcdFx0XHRcdFx0XHR9KV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXNzaWduZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghYXNzaWduZWQpIG1haW5Nb2RlbEZpZWxkc1trZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IG1haW5JZCA9IG1haW5Nb2RlbEZpZWxkcy5pZDtcblx0XHRcdFx0XHRpZiAoIW1haW5JZCkgY29udGludWU7XG5cdFx0XHRcdFx0aWYgKCFncm91cGVkQnlNYWluSWQuaGFzKG1haW5JZCkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGVudHJ5JDEgPSB7IC4uLm1haW5Nb2RlbEZpZWxkcyB9O1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbkNvbmZpZykpIGVudHJ5JDFbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldID0gam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiID8gbnVsbCA6IFtdO1xuXHRcdFx0XHRcdFx0Z3JvdXBlZEJ5TWFpbklkLnNldChtYWluSWQsIGVudHJ5JDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBlbnRyeSA9IGdyb3VwZWRCeU1haW5JZC5nZXQobWFpbklkKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgaXNVbmlxdWUgPSBqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCI7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW1pdCA9IGpvaW5BdHRyLmxpbWl0ID8/IDEwMDtcblx0XHRcdFx0XHRcdGNvbnN0IGpvaW5lZE9iaiA9IGpvaW5lZE1vZGVsRmllbGRzW2dldE1vZGVsTmFtZShqb2luTW9kZWwpXTtcblx0XHRcdFx0XHRcdGNvbnN0IGhhc0RhdGEgPSBqb2luZWRPYmogJiYgT2JqZWN0LmtleXMoam9pbmVkT2JqKS5sZW5ndGggPiAwICYmIE9iamVjdC52YWx1ZXMoam9pbmVkT2JqKS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCk7XG5cdFx0XHRcdFx0XHRpZiAoaXNVbmlxdWUpIGVudHJ5W2dldE1vZGVsTmFtZShqb2luTW9kZWwpXSA9IGhhc0RhdGEgPyBqb2luZWRPYmogOiBudWxsO1xuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGpvaW5Nb2RlbE5hbWUgPSBnZXRNb2RlbE5hbWUoam9pbk1vZGVsKTtcblx0XHRcdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZW50cnlbam9pbk1vZGVsTmFtZV0pICYmIGhhc0RhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZW50cnlbam9pbk1vZGVsTmFtZV0ubGVuZ3RoID49IGxpbWl0KSBjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpZEZpZWxkTmFtZSA9IGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlbDogam9pbk1vZGVsLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGpvaW5lZElkID0gam9pbmVkT2JqW2lkRmllbGROYW1lXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoam9pbmVkSWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghZW50cnlbam9pbk1vZGVsTmFtZV0uc29tZSgoaXRlbSkgPT4gaXRlbVtpZEZpZWxkTmFtZV0gPT09IGpvaW5lZElkKSAmJiBlbnRyeVtqb2luTW9kZWxOYW1lXS5sZW5ndGggPCBsaW1pdCkgZW50cnlbam9pbk1vZGVsTmFtZV0ucHVzaChqb2luZWRPYmopO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZW50cnlbam9pbk1vZGVsTmFtZV0ubGVuZ3RoIDwgbGltaXQpIGVudHJ5W2pvaW5Nb2RlbE5hbWVdLnB1c2goam9pbmVkT2JqKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKGdyb3VwZWRCeU1haW5JZC52YWx1ZXMoKSk7XG5cdFx0XHRcdGZvciAoY29uc3QgZW50cnkgb2YgcmVzdWx0KSBmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkgaWYgKGpvaW5BdHRyLnJlbGF0aW9uICE9PSBcIm9uZS10by1vbmVcIikge1xuXHRcdFx0XHRcdGNvbnN0IGpvaW5Nb2RlbE5hbWUgPSBnZXRNb2RlbE5hbWUoam9pbk1vZGVsKTtcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShlbnRyeVtqb2luTW9kZWxOYW1lXSkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbWl0ID0gam9pbkF0dHIubGltaXQgPz8gMTAwO1xuXHRcdFx0XHRcdFx0aWYgKGVudHJ5W2pvaW5Nb2RlbE5hbWVdLmxlbmd0aCA+IGxpbWl0KSBlbnRyeVtqb2luTW9kZWxOYW1lXSA9IGVudHJ5W2pvaW5Nb2RlbE5hbWVdLnNsaWNlKDAsIGxpbWl0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGFzeW5jIGNyZWF0ZSh7IGRhdGEsIG1vZGVsIH0pIHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyhkYXRhLCBkYiQxLmluc2VydEludG8obW9kZWwpLnZhbHVlcyhkYXRhKSwgbW9kZWwsIFtdKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZmluZE9uZSh7IG1vZGVsLCB3aGVyZSwgc2VsZWN0LCBqb2luIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEuc2VsZWN0RnJvbSgoZWIpID0+IHtcblx0XHRcdFx0XHRcdGxldCBiID0gZWIuc2VsZWN0RnJvbShtb2RlbCk7XG5cdFx0XHRcdFx0XHRpZiAoYW5kKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYiQxKSkpKTtcblx0XHRcdFx0XHRcdGlmIChvcikgYiA9IGIud2hlcmUoKGViJDEpID0+IGViJDEub3Iob3IubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGIuc2VsZWN0QWxsKCkuYXMoXCJwcmltYXJ5XCIpO1xuXHRcdFx0XHRcdH0pLnNlbGVjdEFsbChcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0aWYgKGpvaW4pIGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBbX2pvaW5Nb2RlbFNjaGVtYSwgam9pbk1vZGVsTmFtZV0gPSBqb2luTW9kZWwuaW5jbHVkZXMoXCIuXCIpID8gam9pbk1vZGVsLnNwbGl0KFwiLlwiKSA6IFt2b2lkIDAsIGpvaW5Nb2RlbF07XG5cdFx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LmxlZnRKb2luKGAke2pvaW5Nb2RlbH0gYXMgam9pbl8ke2pvaW5Nb2RlbE5hbWV9YCwgKGpvaW4kMSkgPT4gam9pbiQxLm9uUmVmKGBqb2luXyR7am9pbk1vZGVsTmFtZX0uJHtqb2luQXR0ci5vbi50b31gLCBcIj1cIiwgYHByaW1hcnkuJHtqb2luQXR0ci5vbi5mcm9tfWApKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgeyBhbGxTZWxlY3RzU3RyLCBhbGxTZWxlY3RzIH0gPSBzZWxlY3RBbGxKb2lucyhqb2luKTtcblx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LnNlbGVjdChhbGxTZWxlY3RzKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdFx0aWYgKCFyZXMgfHwgIUFycmF5LmlzQXJyYXkocmVzKSB8fCByZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCByb3cgPSByZXNbMF07XG5cdFx0XHRcdFx0aWYgKGpvaW4pIHJldHVybiBwcm9jZXNzSm9pbmVkUmVzdWx0cyhyZXMsIGpvaW4sIGFsbFNlbGVjdHNTdHIpWzBdO1xuXHRcdFx0XHRcdHJldHVybiByb3c7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGZpbmRNYW55KHsgbW9kZWwsIHdoZXJlLCBsaW1pdCwgb2Zmc2V0LCBzb3J0QnksIGpvaW4gfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5zZWxlY3RGcm9tKChlYikgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGIgPSBlYi5zZWxlY3RGcm9tKG1vZGVsKTtcblx0XHRcdFx0XHRcdGlmIChjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIikge1xuXHRcdFx0XHRcdFx0XHRpZiAob2Zmc2V0ICE9PSB2b2lkIDApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNvcnRCeSkgYiA9IGIub3JkZXJCeShnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdFx0XHRcdGIgPSBiLm9mZnNldChvZmZzZXQpLmZldGNoKGxpbWl0IHx8IDEwMCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobGltaXQgIT09IHZvaWQgMCkgYiA9IGIudG9wKGxpbWl0KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChsaW1pdCAhPT0gdm9pZCAwKSBiID0gYi5saW1pdChsaW1pdCk7XG5cdFx0XHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkgYiA9IGIub2Zmc2V0KG9mZnNldCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc29ydEJ5Py5maWVsZCkgYiA9IGIub3JkZXJCeShgJHtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeS5maWVsZFxuXHRcdFx0XHRcdFx0fSl9YCwgc29ydEJ5LmRpcmVjdGlvbik7XG5cdFx0XHRcdFx0XHRpZiAoYW5kKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYiQxKSkpKTtcblx0XHRcdFx0XHRcdGlmIChvcikgYiA9IGIud2hlcmUoKGViJDEpID0+IGViJDEub3Iob3IubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGIuc2VsZWN0QWxsKCkuYXMoXCJwcmltYXJ5XCIpO1xuXHRcdFx0XHRcdH0pLnNlbGVjdEFsbChcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0aWYgKGpvaW4pIGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBbX2pvaW5Nb2RlbFNjaGVtYSwgam9pbk1vZGVsTmFtZV0gPSBqb2luTW9kZWwuaW5jbHVkZXMoXCIuXCIpID8gam9pbk1vZGVsLnNwbGl0KFwiLlwiKSA6IFt2b2lkIDAsIGpvaW5Nb2RlbF07XG5cdFx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LmxlZnRKb2luKGAke2pvaW5Nb2RlbH0gYXMgam9pbl8ke2pvaW5Nb2RlbE5hbWV9YCwgKGpvaW4kMSkgPT4gam9pbiQxLm9uUmVmKGBqb2luXyR7am9pbk1vZGVsTmFtZX0uJHtqb2luQXR0ci5vbi50b31gLCBcIj1cIiwgYHByaW1hcnkuJHtqb2luQXR0ci5vbi5mcm9tfWApKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgeyBhbGxTZWxlY3RzU3RyLCBhbGxTZWxlY3RzIH0gPSBzZWxlY3RBbGxKb2lucyhqb2luKTtcblx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LnNlbGVjdChhbGxTZWxlY3RzKTtcblx0XHRcdFx0XHRpZiAoc29ydEJ5Py5maWVsZCkgcXVlcnkgPSBxdWVyeS5vcmRlckJ5KGAke2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkOiBzb3J0QnkuZmllbGRcblx0XHRcdFx0XHR9KX1gLCBzb3J0QnkuZGlyZWN0aW9uKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdFx0aWYgKCFyZXMpIHJldHVybiBbXTtcblx0XHRcdFx0XHRpZiAoam9pbikgcmV0dXJuIHByb2Nlc3NKb2luZWRSZXN1bHRzKHJlcywgam9pbiwgYWxsU2VsZWN0c1N0cik7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgdXBkYXRlKHsgbW9kZWwsIHdoZXJlLCB1cGRhdGU6IHZhbHVlcyB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLnVwZGF0ZVRhYmxlKG1vZGVsKS5zZXQodmFsdWVzKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHdpdGhSZXR1cm5pbmcodmFsdWVzLCBxdWVyeSwgbW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgdXBkYXRlTWFueSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS51cGRhdGVUYWJsZShtb2RlbCkuc2V0KHZhbHVlcyk7XG5cdFx0XHRcdFx0aWYgKGFuZCkgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRpZiAob3IpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IChhd2FpdCBxdWVyeS5leGVjdXRlVGFrZUZpcnN0KCkpLm51bVVwZGF0ZWRSb3dzO1xuXHRcdFx0XHRcdHJldHVybiByZXMgPiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIDogTnVtYmVyKHJlcyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGNvdW50KHsgbW9kZWwsIHdoZXJlIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEuc2VsZWN0RnJvbShtb2RlbCkuc2VsZWN0KGRiJDEuZm4uY291bnQoXCJpZFwiKS5hcyhcImNvdW50XCIpKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgcXVlcnkuZXhlY3V0ZSgpO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzWzBdLmNvdW50ID09PSBcIm51bWJlclwiKSByZXR1cm4gcmVzWzBdLmNvdW50O1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzWzBdLmNvdW50ID09PSBcImJpZ2ludFwiKSByZXR1cm4gTnVtYmVyKHJlc1swXS5jb3VudCk7XG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KHJlc1swXS5jb3VudCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGRlbGV0ZSh7IG1vZGVsLCB3aGVyZSB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLmRlbGV0ZUZyb20obW9kZWwpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGRlbGV0ZU1hbnkoeyBtb2RlbCwgd2hlcmUgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5kZWxldGVGcm9tKG1vZGVsKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gKGF3YWl0IHF1ZXJ5LmV4ZWN1dGVUYWtlRmlyc3QoKSkubnVtRGVsZXRlZFJvd3M7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcyA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSID8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgOiBOdW1iZXIocmVzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0b3B0aW9uczogY29uZmlnXG5cdFx0XHR9O1xuXHRcdH07XG5cdH07XG5cdGxldCBhZGFwdGVyT3B0aW9ucyA9IG51bGw7XG5cdGFkYXB0ZXJPcHRpb25zID0ge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0YWRhcHRlcklkOiBcImt5c2VseVwiLFxuXHRcdFx0YWRhcHRlck5hbWU6IFwiS3lzZWx5IEFkYXB0ZXJcIixcblx0XHRcdHVzZVBsdXJhbDogY29uZmlnPy51c2VQbHVyYWwsXG5cdFx0XHRkZWJ1Z0xvZ3M6IGNvbmZpZz8uZGVidWdMb2dzLFxuXHRcdFx0c3VwcG9ydHNCb29sZWFuczogY29uZmlnPy50eXBlID09PSBcInNxbGl0ZVwiIHx8IGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiIHx8IGNvbmZpZz8udHlwZSA9PT0gXCJteXNxbFwiIHx8ICFjb25maWc/LnR5cGUgPyBmYWxzZSA6IHRydWUsXG5cdFx0XHRzdXBwb3J0c0RhdGVzOiBjb25maWc/LnR5cGUgPT09IFwic3FsaXRlXCIgfHwgY29uZmlnPy50eXBlID09PSBcIm1zc3FsXCIgfHwgIWNvbmZpZz8udHlwZSA/IGZhbHNlIDogdHJ1ZSxcblx0XHRcdHN1cHBvcnRzSlNPTjogY29uZmlnPy50eXBlID09PSBcInBvc3RncmVzXCIgPyB0cnVlIDogZmFsc2UsXG5cdFx0XHRzdXBwb3J0c0FycmF5czogZmFsc2UsXG5cdFx0XHRzdXBwb3J0c1VVSURzOiBjb25maWc/LnR5cGUgPT09IFwicG9zdGdyZXNcIiA/IHRydWUgOiBmYWxzZSxcblx0XHRcdHRyYW5zYWN0aW9uOiBjb25maWc/LnRyYW5zYWN0aW9uID8gKGNiKSA9PiBkYi50cmFuc2FjdGlvbigpLmV4ZWN1dGUoKHRyeCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gY2IoY3JlYXRlQWRhcHRlckZhY3Rvcnkoe1xuXHRcdFx0XHRcdGNvbmZpZzogYWRhcHRlck9wdGlvbnMuY29uZmlnLFxuXHRcdFx0XHRcdGFkYXB0ZXI6IGNyZWF0ZUN1c3RvbUFkYXB0ZXIodHJ4KVxuXHRcdFx0XHR9KShsYXp5T3B0aW9ucykpO1xuXHRcdFx0fSkgOiBmYWxzZVxuXHRcdH0sXG5cdFx0YWRhcHRlcjogY3JlYXRlQ3VzdG9tQWRhcHRlcihkYilcblx0fTtcblx0Y29uc3QgYWRhcHRlciA9IGNyZWF0ZUFkYXB0ZXJGYWN0b3J5KGFkYXB0ZXJPcHRpb25zKTtcblx0cmV0dXJuIChvcHRpb25zKSA9PiB7XG5cdFx0bGF6eU9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHJldHVybiBhZGFwdGVyKG9wdGlvbnMpO1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBreXNlbHlBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1reXNlbHktYWRhcHRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeSqliteDialect: () => (/* binding */ NodeSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/node-sqlite-dialect.ts\nvar NodeSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar NodeSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new NodeSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar NodeSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst rows = this.#db.prepare(sql$1).all(...parameters);\n\t\treturn Promise.resolve({ rows });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (await this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar NodeSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar NodeSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar NodeSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new NodeSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new NodeSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new NodeSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new NodeSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=node-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL25vZGUtc3FsaXRlLWRpYWxlY3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlIOztBQUV6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlCQUF5QjtBQUNuQztBQUNBLDJCQUEyQixNQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpQ0FBaUM7QUFDOUQ7QUFDQSwyRUFBMkUsMkRBQXVCLHNCQUFzQixnRUFBNEI7QUFDcEo7QUFDQSxtQ0FBbUMsTUFBTTtBQUN6QztBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyQ0FBRyxxQkFBcUIsTUFBTTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx3REFBb0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xca3lzZWx5LWFkYXB0ZXJcXG5vZGUtc3FsaXRlLWRpYWxlY3QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBpbGVkUXVlcnksIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFLCBEZWZhdWx0UXVlcnlDb21waWxlciwgc3FsIH0gZnJvbSBcImt5c2VseVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL25vZGUtc3FsaXRlLWRpYWxlY3QudHNcbnZhciBOb2RlU3FsaXRlQWRhcHRlciA9IGNsYXNzIHtcblx0Z2V0IHN1cHBvcnRzQ3JlYXRlSWZOb3RFeGlzdHMoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0Z2V0IHN1cHBvcnRzVHJhbnNhY3Rpb25hbERkbCgpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Z2V0IHN1cHBvcnRzUmV0dXJuaW5nKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGFzeW5jIGFjcXVpcmVNaWdyYXRpb25Mb2NrKCkge31cblx0YXN5bmMgcmVsZWFzZU1pZ3JhdGlvbkxvY2soKSB7fVxuXHRnZXQgc3VwcG9ydHNPdXRwdXQoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn07XG52YXIgTm9kZVNxbGl0ZURyaXZlciA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0I2Nvbm5lY3Rpb25NdXRleCA9IG5ldyBDb25uZWN0aW9uTXV0ZXgoKTtcblx0I2RiO1xuXHQjY29ubmVjdGlvbjtcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRhc3luYyBpbml0KCkge1xuXHRcdHRoaXMuI2RiID0gdGhpcy4jY29uZmlnLmRhdGFiYXNlO1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb24gPSBuZXcgTm9kZVNxbGl0ZUNvbm5lY3Rpb24odGhpcy4jZGIpO1xuXHRcdGlmICh0aGlzLiNjb25maWcub25DcmVhdGVDb25uZWN0aW9uKSBhd2FpdCB0aGlzLiNjb25maWcub25DcmVhdGVDb25uZWN0aW9uKHRoaXMuI2Nvbm5lY3Rpb24pO1xuXHR9XG5cdGFzeW5jIGFjcXVpcmVDb25uZWN0aW9uKCkge1xuXHRcdGF3YWl0IHRoaXMuI2Nvbm5lY3Rpb25NdXRleC5sb2NrKCk7XG5cdFx0cmV0dXJuIHRoaXMuI2Nvbm5lY3Rpb247XG5cdH1cblx0YXN5bmMgYmVnaW5UcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJiZWdpblwiKSk7XG5cdH1cblx0YXN5bmMgY29tbWl0VHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwiY29tbWl0XCIpKTtcblx0fVxuXHRhc3luYyByb2xsYmFja1RyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcInJvbGxiYWNrXCIpKTtcblx0fVxuXHRhc3luYyByZWxlYXNlQ29ubmVjdGlvbigpIHtcblx0XHR0aGlzLiNjb25uZWN0aW9uTXV0ZXgudW5sb2NrKCk7XG5cdH1cblx0YXN5bmMgZGVzdHJveSgpIHtcblx0XHR0aGlzLiNkYj8uY2xvc2UoKTtcblx0fVxufTtcbnZhciBOb2RlU3FsaXRlQ29ubmVjdGlvbiA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0ZXhlY3V0ZVF1ZXJ5KGNvbXBpbGVkUXVlcnkpIHtcblx0XHRjb25zdCB7IHNxbDogc3FsJDEsIHBhcmFtZXRlcnMgfSA9IGNvbXBpbGVkUXVlcnk7XG5cdFx0Y29uc3Qgcm93cyA9IHRoaXMuI2RiLnByZXBhcmUoc3FsJDEpLmFsbCguLi5wYXJhbWV0ZXJzKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgcm93cyB9KTtcblx0fVxuXHRhc3luYyAqc3RyZWFtUXVlcnkoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtaW5nIHF1ZXJ5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgU1FMaXRlIGRyaXZlci5cIik7XG5cdH1cbn07XG52YXIgQ29ubmVjdGlvbk11dGV4ID0gY2xhc3Mge1xuXHQjcHJvbWlzZTtcblx0I3Jlc29sdmU7XG5cdGFzeW5jIGxvY2soKSB7XG5cdFx0d2hpbGUgKGF3YWl0IHRoaXMuI3Byb21pc2UpIGF3YWl0IHRoaXMuI3Byb21pc2U7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLiNyZXNvbHZlID0gcmVzb2x2ZTtcblx0XHR9KTtcblx0fVxuXHR1bmxvY2soKSB7XG5cdFx0Y29uc3QgcmVzb2x2ZSA9IHRoaXMuI3Jlc29sdmU7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IHZvaWQgMDtcblx0XHR0aGlzLiNyZXNvbHZlID0gdm9pZCAwO1xuXHRcdHJlc29sdmU/LigpO1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVJbnRyb3NwZWN0b3IgPSBjbGFzcyB7XG5cdCNkYjtcblx0Y29uc3RydWN0b3IoZGIpIHtcblx0XHR0aGlzLiNkYiA9IGRiO1xuXHR9XG5cdGFzeW5jIGdldFNjaGVtYXMoKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdGFzeW5jIGdldFRhYmxlcyhvcHRpb25zID0geyB3aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXM6IGZhbHNlIH0pIHtcblx0XHRsZXQgcXVlcnkgPSB0aGlzLiNkYi5zZWxlY3RGcm9tKFwic3FsaXRlX3NjaGVtYVwiKS53aGVyZShcInR5cGVcIiwgXCI9XCIsIFwidGFibGVcIikud2hlcmUoXCJuYW1lXCIsIFwibm90IGxpa2VcIiwgXCJzcWxpdGVfJVwiKS5zZWxlY3QoXCJuYW1lXCIpLiRjYXN0VG8oKTtcblx0XHRpZiAoIW9wdGlvbnMud2l0aEludGVybmFsS3lzZWx5VGFibGVzKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFKS53aGVyZShcIm5hbWVcIiwgXCIhPVwiLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFKTtcblx0XHRjb25zdCB0YWJsZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHRhYmxlcy5tYXAoKHsgbmFtZSB9KSA9PiB0aGlzLiNnZXRUYWJsZU1ldGFkYXRhKG5hbWUpKSk7XG5cdH1cblx0YXN5bmMgZ2V0TWV0YWRhdGEob3B0aW9ucykge1xuXHRcdHJldHVybiB7IHRhYmxlczogYXdhaXQgdGhpcy5nZXRUYWJsZXMob3B0aW9ucykgfTtcblx0fVxuXHRhc3luYyAjZ2V0VGFibGVNZXRhZGF0YSh0YWJsZSkge1xuXHRcdGNvbnN0IGRiID0gdGhpcy4jZGI7XG5cdFx0Y29uc3QgYXV0b0luY3JlbWVudENvbCA9IChhd2FpdCBkYi5zZWxlY3RGcm9tKFwic3FsaXRlX21hc3RlclwiKS53aGVyZShcIm5hbWVcIiwgXCI9XCIsIHRhYmxlKS5zZWxlY3QoXCJzcWxcIikuJGNhc3RUbygpLmV4ZWN1dGUoKSlbMF0/LnNxbD8uc3BsaXQoL1tcXChcXCksXS8pPy5maW5kKChpdCkgPT4gaXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dG9pbmNyZW1lbnRcIikpPy5zcGxpdCgvXFxzKy8pPy5bMF0/LnJlcGxhY2UoL1tcImBdL2csIFwiXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0YWJsZSxcblx0XHRcdGNvbHVtbnM6IChhd2FpdCBkYi5zZWxlY3RGcm9tKHNxbGBwcmFnbWFfdGFibGVfaW5mbygke3RhYmxlfSlgLmFzKFwidGFibGVfaW5mb1wiKSkuc2VsZWN0KFtcblx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFwidHlwZVwiLFxuXHRcdFx0XHRcIm5vdG51bGxcIixcblx0XHRcdFx0XCJkZmx0X3ZhbHVlXCJcblx0XHRcdF0pLmV4ZWN1dGUoKSkubWFwKChjb2wpID0+ICh7XG5cdFx0XHRcdG5hbWU6IGNvbC5uYW1lLFxuXHRcdFx0XHRkYXRhVHlwZTogY29sLnR5cGUsXG5cdFx0XHRcdGlzTnVsbGFibGU6ICFjb2wubm90bnVsbCxcblx0XHRcdFx0aXNBdXRvSW5jcmVtZW50aW5nOiBjb2wubmFtZSA9PT0gYXV0b0luY3JlbWVudENvbCxcblx0XHRcdFx0aGFzRGVmYXVsdFZhbHVlOiBjb2wuZGZsdF92YWx1ZSAhPSBudWxsXG5cdFx0XHR9KSksXG5cdFx0XHRpc1ZpZXc6IHRydWVcblx0XHR9O1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVRdWVyeUNvbXBpbGVyID0gY2xhc3MgZXh0ZW5kcyBEZWZhdWx0UXVlcnlDb21waWxlciB7XG5cdGdldEN1cnJlbnRQYXJhbWV0ZXJQbGFjZWhvbGRlcigpIHtcblx0XHRyZXR1cm4gXCI/XCI7XG5cdH1cblx0Z2V0TGVmdElkZW50aWZpZXJXcmFwcGVyKCkge1xuXHRcdHJldHVybiBcIlxcXCJcIjtcblx0fVxuXHRnZXRSaWdodElkZW50aWZpZXJXcmFwcGVyKCkge1xuXHRcdHJldHVybiBcIlxcXCJcIjtcblx0fVxuXHRnZXRBdXRvSW5jcmVtZW50KCkge1xuXHRcdHJldHVybiBcImF1dG9pbmNyZW1lbnRcIjtcblx0fVxufTtcbnZhciBOb2RlU3FsaXRlRGlhbGVjdCA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRjcmVhdGVEcml2ZXIoKSB7XG5cdFx0cmV0dXJuIG5ldyBOb2RlU3FsaXRlRHJpdmVyKHRoaXMuI2NvbmZpZyk7XG5cdH1cblx0Y3JlYXRlUXVlcnlDb21waWxlcigpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVRdWVyeUNvbXBpbGVyKCk7XG5cdH1cblx0Y3JlYXRlQWRhcHRlcigpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVBZGFwdGVyKCk7XG5cdH1cblx0Y3JlYXRlSW50cm9zcGVjdG9yKGRiKSB7XG5cdFx0cmV0dXJuIG5ldyBOb2RlU3FsaXRlSW50cm9zcGVjdG9yKGRiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBOb2RlU3FsaXRlRGlhbGVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9kZS1zcWxpdGUtZGlhbGVjdC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* reexport safe */ _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./memory-adapter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL21lbW9yeS1hZGFwdGVyL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xcbWVtb3J5LWFkYXB0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZW1vcnlBZGFwdGVyIH0gZnJvbSBcIi4vbWVtb3J5LWFkYXB0ZXIubWpzXCI7XG5cbmV4cG9ydCB7IG1lbW9yeUFkYXB0ZXIgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs":
/*!******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs ***!
  \******************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* binding */ memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/memory-adapter/memory-adapter.ts\nconst memoryAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst adapterCreator = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__.createAdapterFactory)({\n\t\tconfig: {\n\t\t\tadapterId: \"memory\",\n\t\t\tadapterName: \"Memory Adapter\",\n\t\t\tusePlural: false,\n\t\t\tdebugLogs: config?.debugLogs || false,\n\t\t\tsupportsArrays: true,\n\t\t\tcustomTransformInput(props) {\n\t\t\t\tif ((props.options.advanced?.database?.useNumberId || props.options.advanced?.database?.generateId === \"serial\") && props.field === \"id\" && props.action === \"create\") return db[props.model].length + 1;\n\t\t\t\treturn props.data;\n\t\t\t},\n\t\t\ttransaction: async (cb) => {\n\t\t\t\tconst clone = structuredClone(db);\n\t\t\t\ttry {\n\t\t\t\t\treturn await cb(adapterCreator(lazyOptions));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tObject.keys(db).forEach((key) => {\n\t\t\t\t\t\tdb[key] = clone[key];\n\t\t\t\t\t});\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadapter: ({ getFieldName, options, getModelName }) => {\n\t\t\tconst applySortToRecords = (records, sortBy, model) => {\n\t\t\t\tif (!sortBy) return records;\n\t\t\t\treturn records.sort((a, b) => {\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t});\n\t\t\t\t\tconst aValue = a[field];\n\t\t\t\t\tconst bValue = b[field];\n\t\t\t\t\tlet comparison = 0;\n\t\t\t\t\tif (aValue == null && bValue == null) comparison = 0;\n\t\t\t\t\telse if (aValue == null) comparison = -1;\n\t\t\t\t\telse if (bValue == null) comparison = 1;\n\t\t\t\t\telse if (typeof aValue === \"string\" && typeof bValue === \"string\") comparison = aValue.localeCompare(bValue);\n\t\t\t\t\telse if (aValue instanceof Date && bValue instanceof Date) comparison = aValue.getTime() - bValue.getTime();\n\t\t\t\t\telse if (typeof aValue === \"number\" && typeof bValue === \"number\") comparison = aValue - bValue;\n\t\t\t\t\telse if (typeof aValue === \"boolean\" && typeof bValue === \"boolean\") comparison = aValue === bValue ? 0 : aValue ? 1 : -1;\n\t\t\t\t\telse comparison = String(aValue).localeCompare(String(bValue));\n\t\t\t\t\treturn sortBy.direction === \"asc\" ? comparison : -comparison;\n\t\t\t\t});\n\t\t\t};\n\t\t\tfunction convertWhereClause(where, model, join) {\n\t\t\t\tconst execute = (where$1, model$1) => {\n\t\t\t\t\tconst table = db[model$1];\n\t\t\t\t\tif (!table) {\n\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] Model ${model$1} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\tthrow new Error(`Model ${model$1} not found`);\n\t\t\t\t\t}\n\t\t\t\t\tconst evalClause = (record, clause) => {\n\t\t\t\t\t\tconst { field, value, operator } = clause;\n\t\t\t\t\t\tswitch (operator) {\n\t\t\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"not_in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn !value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"contains\": return record[field].includes(value);\n\t\t\t\t\t\t\tcase \"starts_with\": return record[field].startsWith(value);\n\t\t\t\t\t\t\tcase \"ends_with\": return record[field].endsWith(value);\n\t\t\t\t\t\t\tcase \"ne\": return record[field] !== value;\n\t\t\t\t\t\t\tcase \"gt\": return value != null && Boolean(record[field] > value);\n\t\t\t\t\t\t\tcase \"gte\": return value != null && Boolean(record[field] >= value);\n\t\t\t\t\t\t\tcase \"lt\": return value != null && Boolean(record[field] < value);\n\t\t\t\t\t\t\tcase \"lte\": return value != null && Boolean(record[field] <= value);\n\t\t\t\t\t\t\tdefault: return record[field] === value;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treturn table.filter((record) => {\n\t\t\t\t\t\tif (!where$1.length || where$1.length === 0) return true;\n\t\t\t\t\t\tlet result = evalClause(record, where$1[0]);\n\t\t\t\t\t\tfor (const clause of where$1) {\n\t\t\t\t\t\t\tconst clauseResult = evalClause(record, clause);\n\t\t\t\t\t\t\tif (clause.connector === \"OR\") result = result || clauseResult;\n\t\t\t\t\t\t\telse result = result && clauseResult;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tif (!join) return execute(where, model);\n\t\t\t\tconst baseRecords = execute(where, model);\n\t\t\t\tconst grouped = /* @__PURE__ */ new Map();\n\t\t\t\tconst seenIds = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const baseRecord of baseRecords) {\n\t\t\t\t\tconst baseId = String(baseRecord.id);\n\t\t\t\t\tif (!grouped.has(baseId)) {\n\t\t\t\t\t\tconst nested = { ...baseRecord };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nested[joinModelName] = null;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnested[joinModelName] = [];\n\t\t\t\t\t\t\t\tseenIds.set(`${baseId}-${joinModel}`, /* @__PURE__ */ new Set());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgrouped.set(baseId, nested);\n\t\t\t\t\t}\n\t\t\t\t\tconst nestedEntry = grouped.get(baseId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\tconst joinTable = db[joinModelName];\n\t\t\t\t\t\tif (!joinTable) {\n\t\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] JoinOption model ${joinModelName} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\t\tthrow new Error(`JoinOption model ${joinModelName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst matchingRecords = joinTable.filter((joinRecord) => joinRecord[joinAttr.on.to] === baseRecord[joinAttr.on.from]);\n\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nestedEntry[joinModelName] = matchingRecords[0] || null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst seenSet = seenIds.get(`${baseId}-${joinModel}`);\n\t\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\t\tlet count = 0;\n\t\t\t\t\t\t\tfor (const matchingRecord of matchingRecords) {\n\t\t\t\t\t\t\t\tif (count >= limit) break;\n\t\t\t\t\t\t\t\tif (!seenSet.has(matchingRecord.id)) {\n\t\t\t\t\t\t\t\t\tnestedEntry[joinModelName].push(matchingRecord);\n\t\t\t\t\t\t\t\t\tseenSet.add(matchingRecord.id);\n\t\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Array.from(grouped.values());\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcreate: async ({ model, data }) => {\n\t\t\t\t\tif (options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\") data.id = db[getModelName(model)].length + 1;\n\t\t\t\t\tif (!db[model]) db[model] = [];\n\t\t\t\t\tdb[model].push(data);\n\t\t\t\t\treturn data;\n\t\t\t\t},\n\t\t\t\tfindOne: async ({ model, where, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return null;\n\t\t\t\t\t\treturn resArray[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tfindMany: async ({ model, where, sortBy, limit, offset, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where || [], model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return [];\n\t\t\t\t\t\tapplySortToRecords(resArray, sortBy, model);\n\t\t\t\t\t\tlet paginatedRecords = resArray;\n\t\t\t\t\t\tif (offset !== void 0) paginatedRecords = paginatedRecords.slice(offset);\n\t\t\t\t\t\tif (limit !== void 0) paginatedRecords = paginatedRecords.slice(0, limit);\n\t\t\t\t\t\treturn paginatedRecords;\n\t\t\t\t\t}\n\t\t\t\t\tlet table = applySortToRecords(res, sortBy, model);\n\t\t\t\t\tif (offset !== void 0) table = table.slice(offset);\n\t\t\t\t\tif (limit !== void 0) table = table.slice(0, limit);\n\t\t\t\t\treturn table || [];\n\t\t\t\t},\n\t\t\t\tcount: async ({ model, where }) => {\n\t\t\t\t\tif (where) return convertWhereClause(where, model).length;\n\t\t\t\t\treturn db[model].length;\n\t\t\t\t},\n\t\t\t\tupdate: async ({ model, where, update }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tdelete: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tdb[model] = table.filter((record) => !res.includes(record));\n\t\t\t\t},\n\t\t\t\tdeleteMany: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\tdb[model] = table.filter((record) => {\n\t\t\t\t\t\tif (res.includes(record)) {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn !res.includes(record);\n\t\t\t\t\t});\n\t\t\t\t\treturn count;\n\t\t\t\t},\n\t\t\t\tupdateMany({ model, where, update }) {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapterCreator(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=memory-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL21lbW9yeS1hZGFwdGVyL21lbW9yeS1hZGFwdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDcUI7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrRkFBb0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGNBQWMscUNBQXFDO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0seURBQU0sZ0NBQWdDLFNBQVM7QUFDckQsK0JBQStCLFNBQVM7QUFDeEM7QUFDQTtBQUNBLGNBQWMseUJBQXlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTyxHQUFHLFVBQVU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx5REFBTSwyQ0FBMkMsZUFBZTtBQUN2RSwyQ0FBMkMsZUFBZTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxPQUFPLEdBQUcsVUFBVTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixhQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNCQUFzQixvQkFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCLDJDQUEyQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLHNCQUFzQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0wscUJBQXFCLGNBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHlCQUF5QixjQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTCxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxtZW1vcnktYWRhcHRlclxcbWVtb3J5LWFkYXB0ZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IGNyZWF0ZUFkYXB0ZXJGYWN0b3J5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiL2FkYXB0ZXJcIjtcblxuLy8jcmVnaW9uIHNyYy9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9tZW1vcnktYWRhcHRlci50c1xuY29uc3QgbWVtb3J5QWRhcHRlciA9IChkYiwgY29uZmlnKSA9PiB7XG5cdGxldCBsYXp5T3B0aW9ucyA9IG51bGw7XG5cdGNvbnN0IGFkYXB0ZXJDcmVhdG9yID0gY3JlYXRlQWRhcHRlckZhY3Rvcnkoe1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0YWRhcHRlcklkOiBcIm1lbW9yeVwiLFxuXHRcdFx0YWRhcHRlck5hbWU6IFwiTWVtb3J5IEFkYXB0ZXJcIixcblx0XHRcdHVzZVBsdXJhbDogZmFsc2UsXG5cdFx0XHRkZWJ1Z0xvZ3M6IGNvbmZpZz8uZGVidWdMb2dzIHx8IGZhbHNlLFxuXHRcdFx0c3VwcG9ydHNBcnJheXM6IHRydWUsXG5cdFx0XHRjdXN0b21UcmFuc2Zvcm1JbnB1dChwcm9wcykge1xuXHRcdFx0XHRpZiAoKHByb3BzLm9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCB8fCBwcm9wcy5vcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIikgJiYgcHJvcHMuZmllbGQgPT09IFwiaWRcIiAmJiBwcm9wcy5hY3Rpb24gPT09IFwiY3JlYXRlXCIpIHJldHVybiBkYltwcm9wcy5tb2RlbF0ubGVuZ3RoICsgMTtcblx0XHRcdFx0cmV0dXJuIHByb3BzLmRhdGE7XG5cdFx0XHR9LFxuXHRcdFx0dHJhbnNhY3Rpb246IGFzeW5jIChjYikgPT4ge1xuXHRcdFx0XHRjb25zdCBjbG9uZSA9IHN0cnVjdHVyZWRDbG9uZShkYik7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IGNiKGFkYXB0ZXJDcmVhdG9yKGxhenlPcHRpb25zKSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0T2JqZWN0LmtleXMoZGIpLmZvckVhY2goKGtleSkgPT4ge1xuXHRcdFx0XHRcdFx0ZGJba2V5XSA9IGNsb25lW2tleV07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGFkYXB0ZXI6ICh7IGdldEZpZWxkTmFtZSwgb3B0aW9ucywgZ2V0TW9kZWxOYW1lIH0pID0+IHtcblx0XHRcdGNvbnN0IGFwcGx5U29ydFRvUmVjb3JkcyA9IChyZWNvcmRzLCBzb3J0QnksIG1vZGVsKSA9PiB7XG5cdFx0XHRcdGlmICghc29ydEJ5KSByZXR1cm4gcmVjb3Jkcztcblx0XHRcdFx0cmV0dXJuIHJlY29yZHMuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeS5maWVsZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGFWYWx1ZSA9IGFbZmllbGRdO1xuXHRcdFx0XHRcdGNvbnN0IGJWYWx1ZSA9IGJbZmllbGRdO1xuXHRcdFx0XHRcdGxldCBjb21wYXJpc29uID0gMDtcblx0XHRcdFx0XHRpZiAoYVZhbHVlID09IG51bGwgJiYgYlZhbHVlID09IG51bGwpIGNvbXBhcmlzb24gPSAwO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGFWYWx1ZSA9PSBudWxsKSBjb21wYXJpc29uID0gLTE7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYlZhbHVlID09IG51bGwpIGNvbXBhcmlzb24gPSAxO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBhVmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gXCJzdHJpbmdcIikgY29tcGFyaXNvbiA9IGFWYWx1ZS5sb2NhbGVDb21wYXJlKGJWYWx1ZSk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYVZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiBiVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSBjb21wYXJpc29uID0gYVZhbHVlLmdldFRpbWUoKSAtIGJWYWx1ZS5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgYlZhbHVlID09PSBcIm51bWJlclwiKSBjb21wYXJpc29uID0gYVZhbHVlIC0gYlZhbHVlO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBhVmFsdWUgPT09IFwiYm9vbGVhblwiICYmIHR5cGVvZiBiVmFsdWUgPT09IFwiYm9vbGVhblwiKSBjb21wYXJpc29uID0gYVZhbHVlID09PSBiVmFsdWUgPyAwIDogYVZhbHVlID8gMSA6IC0xO1xuXHRcdFx0XHRcdGVsc2UgY29tcGFyaXNvbiA9IFN0cmluZyhhVmFsdWUpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGJWYWx1ZSkpO1xuXHRcdFx0XHRcdHJldHVybiBzb3J0QnkuZGlyZWN0aW9uID09PSBcImFzY1wiID8gY29tcGFyaXNvbiA6IC1jb21wYXJpc29uO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHRmdW5jdGlvbiBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsLCBqb2luKSB7XG5cdFx0XHRcdGNvbnN0IGV4ZWN1dGUgPSAod2hlcmUkMSwgbW9kZWwkMSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHRhYmxlID0gZGJbbW9kZWwkMV07XG5cdFx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdFx0bG9nZ2VyLmVycm9yKGBbTWVtb3J5QWRhcHRlcl0gTW9kZWwgJHttb2RlbCQxfSBub3QgZm91bmQgaW4gdGhlIERCYCwgT2JqZWN0LmtleXMoZGIpKTtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgTW9kZWwgJHttb2RlbCQxfSBub3QgZm91bmRgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgZXZhbENsYXVzZSA9IChyZWNvcmQsIGNsYXVzZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgeyBmaWVsZCwgdmFsdWUsIG9wZXJhdG9yIH0gPSBjbGF1c2U7XG5cdFx0XHRcdFx0XHRzd2l0Y2ggKG9wZXJhdG9yKSB7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJpblwiOlxuXHRcdFx0XHRcdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHRocm93IG5ldyBFcnJvcihcIlZhbHVlIG11c3QgYmUgYW4gYXJyYXlcIik7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlLmluY2x1ZGVzKHJlY29yZFtmaWVsZF0pO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwibm90X2luXCI6XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgbXVzdCBiZSBhbiBhcnJheVwiKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gIXZhbHVlLmluY2x1ZGVzKHJlY29yZFtmaWVsZF0pO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiY29udGFpbnNcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0uaW5jbHVkZXModmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwic3RhcnRzX3dpdGhcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0uc3RhcnRzV2l0aCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJlbmRzX3dpdGhcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0uZW5kc1dpdGgodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwibmVcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0gIT09IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiZ3RcIjogcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgQm9vbGVhbihyZWNvcmRbZmllbGRdID4gdmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiZ3RlXCI6IHJldHVybiB2YWx1ZSAhPSBudWxsICYmIEJvb2xlYW4ocmVjb3JkW2ZpZWxkXSA+PSB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJsdFwiOiByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBCb29sZWFuKHJlY29yZFtmaWVsZF0gPCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJsdGVcIjogcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgQm9vbGVhbihyZWNvcmRbZmllbGRdIDw9IHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIHJlY29yZFtmaWVsZF0gPT09IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmV0dXJuIHRhYmxlLmZpbHRlcigocmVjb3JkKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIXdoZXJlJDEubGVuZ3RoIHx8IHdoZXJlJDEubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdGxldCByZXN1bHQgPSBldmFsQ2xhdXNlKHJlY29yZCwgd2hlcmUkMVswXSk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGNsYXVzZSBvZiB3aGVyZSQxKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNsYXVzZVJlc3VsdCA9IGV2YWxDbGF1c2UocmVjb3JkLCBjbGF1c2UpO1xuXHRcdFx0XHRcdFx0XHRpZiAoY2xhdXNlLmNvbm5lY3RvciA9PT0gXCJPUlwiKSByZXN1bHQgPSByZXN1bHQgfHwgY2xhdXNlUmVzdWx0O1xuXHRcdFx0XHRcdFx0XHRlbHNlIHJlc3VsdCA9IHJlc3VsdCAmJiBjbGF1c2VSZXN1bHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAoIWpvaW4pIHJldHVybiBleGVjdXRlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGJhc2VSZWNvcmRzID0gZXhlY3V0ZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRjb25zdCBncm91cGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRcdFx0Y29uc3Qgc2VlbklkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0XHRcdGZvciAoY29uc3QgYmFzZVJlY29yZCBvZiBiYXNlUmVjb3Jkcykge1xuXHRcdFx0XHRcdGNvbnN0IGJhc2VJZCA9IFN0cmluZyhiYXNlUmVjb3JkLmlkKTtcblx0XHRcdFx0XHRpZiAoIWdyb3VwZWQuaGFzKGJhc2VJZCkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5lc3RlZCA9IHsgLi4uYmFzZVJlY29yZCB9O1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbikpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdFx0XHRpZiAoam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiKSBuZXN0ZWRbam9pbk1vZGVsTmFtZV0gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRuZXN0ZWRbam9pbk1vZGVsTmFtZV0gPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRzZWVuSWRzLnNldChgJHtiYXNlSWR9LSR7am9pbk1vZGVsfWAsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRncm91cGVkLnNldChiYXNlSWQsIG5lc3RlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IG5lc3RlZEVudHJ5ID0gZ3JvdXBlZC5nZXQoYmFzZUlkKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luKSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pblRhYmxlID0gZGJbam9pbk1vZGVsTmFtZV07XG5cdFx0XHRcdFx0XHRpZiAoIWpvaW5UYWJsZSkge1xuXHRcdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoYFtNZW1vcnlBZGFwdGVyXSBKb2luT3B0aW9uIG1vZGVsICR7am9pbk1vZGVsTmFtZX0gbm90IGZvdW5kIGluIHRoZSBEQmAsIE9iamVjdC5rZXlzKGRiKSk7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgSm9pbk9wdGlvbiBtb2RlbCAke2pvaW5Nb2RlbE5hbWV9IG5vdCBmb3VuZGApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29uc3QgbWF0Y2hpbmdSZWNvcmRzID0gam9pblRhYmxlLmZpbHRlcigoam9pblJlY29yZCkgPT4gam9pblJlY29yZFtqb2luQXR0ci5vbi50b10gPT09IGJhc2VSZWNvcmRbam9pbkF0dHIub24uZnJvbV0pO1xuXHRcdFx0XHRcdFx0aWYgKGpvaW5BdHRyLnJlbGF0aW9uID09PSBcIm9uZS10by1vbmVcIikgbmVzdGVkRW50cnlbam9pbk1vZGVsTmFtZV0gPSBtYXRjaGluZ1JlY29yZHNbMF0gfHwgbnVsbDtcblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzZWVuU2V0ID0gc2Vlbklkcy5nZXQoYCR7YmFzZUlkfS0ke2pvaW5Nb2RlbH1gKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGltaXQgPSBqb2luQXR0ci5saW1pdCA/PyAxMDA7XG5cdFx0XHRcdFx0XHRcdGxldCBjb3VudCA9IDA7XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgbWF0Y2hpbmdSZWNvcmQgb2YgbWF0Y2hpbmdSZWNvcmRzKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNvdW50ID49IGxpbWl0KSBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNlZW5TZXQuaGFzKG1hdGNoaW5nUmVjb3JkLmlkKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmVzdGVkRW50cnlbam9pbk1vZGVsTmFtZV0ucHVzaChtYXRjaGluZ1JlY29yZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWVuU2V0LmFkZChtYXRjaGluZ1JlY29yZC5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gQXJyYXkuZnJvbShncm91cGVkLnZhbHVlcygpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNyZWF0ZTogYXN5bmMgKHsgbW9kZWwsIGRhdGEgfSkgPT4ge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCIpIGRhdGEuaWQgPSBkYltnZXRNb2RlbE5hbWUobW9kZWwpXS5sZW5ndGggKyAxO1xuXHRcdFx0XHRcdGlmICghZGJbbW9kZWxdKSBkYlttb2RlbF0gPSBbXTtcblx0XHRcdFx0XHRkYlttb2RlbF0ucHVzaChkYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmluZE9uZTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlLCBqb2luIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsLCBqb2luKTtcblx0XHRcdFx0XHRpZiAoam9pbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzQXJyYXkgPSByZXM7XG5cdFx0XHRcdFx0XHRpZiAoIXJlc0FycmF5Lmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzQXJyYXlbMF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNbMF0gfHwgbnVsbDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmluZE1hbnk6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSwgc29ydEJ5LCBsaW1pdCwgb2Zmc2V0LCBqb2luIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUgfHwgW10sIG1vZGVsLCBqb2luKTtcblx0XHRcdFx0XHRpZiAoam9pbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzQXJyYXkgPSByZXM7XG5cdFx0XHRcdFx0XHRpZiAoIXJlc0FycmF5Lmxlbmd0aCkgcmV0dXJuIFtdO1xuXHRcdFx0XHRcdFx0YXBwbHlTb3J0VG9SZWNvcmRzKHJlc0FycmF5LCBzb3J0QnksIG1vZGVsKTtcblx0XHRcdFx0XHRcdGxldCBwYWdpbmF0ZWRSZWNvcmRzID0gcmVzQXJyYXk7XG5cdFx0XHRcdFx0XHRpZiAob2Zmc2V0ICE9PSB2b2lkIDApIHBhZ2luYXRlZFJlY29yZHMgPSBwYWdpbmF0ZWRSZWNvcmRzLnNsaWNlKG9mZnNldCk7XG5cdFx0XHRcdFx0XHRpZiAobGltaXQgIT09IHZvaWQgMCkgcGFnaW5hdGVkUmVjb3JkcyA9IHBhZ2luYXRlZFJlY29yZHMuc2xpY2UoMCwgbGltaXQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhZ2luYXRlZFJlY29yZHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxldCB0YWJsZSA9IGFwcGx5U29ydFRvUmVjb3JkcyhyZXMsIHNvcnRCeSwgbW9kZWwpO1xuXHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkgdGFibGUgPSB0YWJsZS5zbGljZShvZmZzZXQpO1xuXHRcdFx0XHRcdGlmIChsaW1pdCAhPT0gdm9pZCAwKSB0YWJsZSA9IHRhYmxlLnNsaWNlKDAsIGxpbWl0KTtcblx0XHRcdFx0XHRyZXR1cm4gdGFibGUgfHwgW107XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNvdW50OiBhc3luYyAoeyBtb2RlbCwgd2hlcmUgfSkgPT4ge1xuXHRcdFx0XHRcdGlmICh3aGVyZSkgcmV0dXJuIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpLmxlbmd0aDtcblx0XHRcdFx0XHRyZXR1cm4gZGJbbW9kZWxdLmxlbmd0aDtcblx0XHRcdFx0fSxcblx0XHRcdFx0dXBkYXRlOiBhc3luYyAoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0cmVzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuXHRcdFx0XHRcdFx0T2JqZWN0LmFzc2lnbihyZWNvcmQsIHVwZGF0ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc1swXSB8fCBudWxsO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkZWxldGU6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFibGUgPSBkYlttb2RlbF07XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0ZGJbbW9kZWxdID0gdGFibGUuZmlsdGVyKChyZWNvcmQpID0+ICFyZXMuaW5jbHVkZXMocmVjb3JkKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGV0ZU1hbnk6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFibGUgPSBkYlttb2RlbF07XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0bGV0IGNvdW50ID0gMDtcblx0XHRcdFx0XHRkYlttb2RlbF0gPSB0YWJsZS5maWx0ZXIoKHJlY29yZCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHJlcy5pbmNsdWRlcyhyZWNvcmQpKSB7XG5cdFx0XHRcdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiAhcmVzLmluY2x1ZGVzKHJlY29yZCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIGNvdW50O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cGRhdGVNYW55KHsgbW9kZWwsIHdoZXJlLCB1cGRhdGUgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRcdHJlcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcblx0XHRcdFx0XHRcdE9iamVjdC5hc3NpZ24ocmVjb3JkLCB1cGRhdGUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybiByZXNbMF0gfHwgbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gKG9wdGlvbnMpID0+IHtcblx0XHRsYXp5T3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0cmV0dXJuIGFkYXB0ZXJDcmVhdG9yKG9wdGlvbnMpO1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtZW1vcnlBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZW1vcnktYWRhcHRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ better_call__WEBPACK_IMPORTED_MODULE_20__.APIError),\n/* harmony export */   accountInfo: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo),\n/* harmony export */   callbackOAuth: () => (/* reexport safe */ _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth),\n/* harmony export */   changeEmail: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail),\n/* harmony export */   changePassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword),\n/* harmony export */   checkEndpointConflicts: () => (/* binding */ checkEndpointConflicts),\n/* harmony export */   createAuthEndpoint: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.createAuthMiddleware),\n/* harmony export */   createEmailVerificationToken: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.createEmailVerificationToken),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback),\n/* harmony export */   error: () => (/* reexport safe */ _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error),\n/* harmony export */   formCsrfMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware),\n/* harmony export */   freshSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.freshSessionMiddleware),\n/* harmony export */   getAccessToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken),\n/* harmony export */   getEndpoints: () => (/* binding */ getEndpoints),\n/* harmony export */   getIp: () => (/* reexport safe */ _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp),\n/* harmony export */   getOAuthState: () => (/* reexport safe */ _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__.getOAuthState),\n/* harmony export */   getSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession),\n/* harmony export */   getSessionFromCtx: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx),\n/* harmony export */   linkSocialAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount),\n/* harmony export */   listSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions),\n/* harmony export */   listUserAccounts: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts),\n/* harmony export */   ok: () => (/* reexport safe */ _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok),\n/* harmony export */   optionsMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.optionsMiddleware),\n/* harmony export */   originCheck: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware),\n/* harmony export */   refreshToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.requestOnlySessionMiddleware),\n/* harmony export */   requestPasswordReset: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword),\n/* harmony export */   revokeOtherSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession),\n/* harmony export */   revokeSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions),\n/* harmony export */   router: () => (/* binding */ router),\n/* harmony export */   sendVerificationEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmailFn),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sessionMiddleware),\n/* harmony export */   setPassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword),\n/* harmony export */   signInEmail: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail),\n/* harmony export */   signInSocial: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial),\n/* harmony export */   signOut: () => (/* reexport safe */ _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut),\n/* harmony export */   signUpEmail: () => (/* reexport safe */ _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail),\n/* harmony export */   unlinkAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount),\n/* harmony export */   updateUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser),\n/* harmony export */   verifyEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./middlewares/oauth.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./middlewares/origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./middlewares/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rate-limiter/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs\");\n/* harmony import */ var _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routes/session.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/account.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./routes/callback.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./routes/email-verification.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routes/error.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./routes/ok.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./routes/password.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./routes/sign-in.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./routes/sign-out.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./routes/sign-up.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./routes/update-user.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs\");\n/* harmony import */ var _routes_index_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./routes/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs\");\n/* harmony import */ var _to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./to-auth-endpoints.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/index.ts\nfunction checkEndpointConflicts(options, logger$1) {\n\tconst endpointRegistry = /* @__PURE__ */ new Map();\n\toptions.plugins?.forEach((plugin) => {\n\t\tif (plugin.endpoints) {\n\t\t\tfor (const [key, endpoint] of Object.entries(plugin.endpoints)) if (endpoint && \"path\" in endpoint && typeof endpoint.path === \"string\") {\n\t\t\t\tconst path = endpoint.path;\n\t\t\t\tlet methods = [];\n\t\t\t\tif (endpoint.options && \"method\" in endpoint.options) {\n\t\t\t\t\tif (Array.isArray(endpoint.options.method)) methods = endpoint.options.method;\n\t\t\t\t\telse if (typeof endpoint.options.method === \"string\") methods = [endpoint.options.method];\n\t\t\t\t}\n\t\t\t\tif (methods.length === 0) methods = [\"*\"];\n\t\t\t\tif (!endpointRegistry.has(path)) endpointRegistry.set(path, []);\n\t\t\t\tendpointRegistry.get(path).push({\n\t\t\t\t\tpluginId: plugin.id,\n\t\t\t\t\tendpointKey: key,\n\t\t\t\t\tmethods\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\tconst conflicts = [];\n\tfor (const [path, entries] of endpointRegistry.entries()) if (entries.length > 1) {\n\t\tconst methodMap = /* @__PURE__ */ new Map();\n\t\tlet hasConflict = false;\n\t\tfor (const entry of entries) for (const method of entry.methods) {\n\t\t\tif (!methodMap.has(method)) methodMap.set(method, []);\n\t\t\tmethodMap.get(method).push(entry.pluginId);\n\t\t\tif (methodMap.get(method).length > 1) hasConflict = true;\n\t\t\tif (method === \"*\" && entries.length > 1) hasConflict = true;\n\t\t\telse if (method !== \"*\" && methodMap.has(\"*\")) hasConflict = true;\n\t\t}\n\t\tif (hasConflict) {\n\t\t\tconst uniquePlugins = [...new Set(entries.map((e) => e.pluginId))];\n\t\t\tconst conflictingMethods = [];\n\t\t\tfor (const [method, plugins] of methodMap.entries()) if (plugins.length > 1 || method === \"*\" && entries.length > 1 || method !== \"*\" && methodMap.has(\"*\")) conflictingMethods.push(method);\n\t\t\tconflicts.push({\n\t\t\t\tpath,\n\t\t\t\tplugins: uniquePlugins,\n\t\t\t\tconflictingMethods\n\t\t\t});\n\t\t}\n\t}\n\tif (conflicts.length > 0) {\n\t\tconst conflictMessages = conflicts.map((conflict) => `  - \"${conflict.path}\" [${conflict.conflictingMethods.join(\", \")}] used by plugins: ${conflict.plugins.join(\", \")}`).join(\"\\n\");\n\t\tlogger$1.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:\n${conflictMessages}\n\nTo resolve this, you can:\n\t1. Use only one of the conflicting plugins\n\t2. Configure the plugins to use different paths (if supported)\n\t3. Ensure plugins use different HTTP methods for the same path\n`);\n\t}\n}\nfunction getEndpoints(ctx, options) {\n\tconst pluginEndpoints = options.plugins?.reduce((acc, plugin) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t...plugin.endpoints\n\t\t};\n\t}, {}) ?? {};\n\tconst middlewares = options.plugins?.map((plugin) => plugin.middlewares?.map((m) => {\n\t\tconst middleware = (async (context) => {\n\t\t\tconst authContext = await ctx;\n\t\t\treturn m.middleware({\n\t\t\t\t...context,\n\t\t\t\tcontext: {\n\t\t\t\t\t...authContext,\n\t\t\t\t\t...context.context\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tmiddleware.options = m.middleware.options;\n\t\treturn {\n\t\t\tpath: m.path,\n\t\t\tmiddleware\n\t\t};\n\t})).filter((plugin) => plugin !== void 0).flat() || [];\n\treturn {\n\t\tapi: (0,_to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__.toAuthEndpoints)({\n\t\t\tsignInSocial: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial)(),\n\t\t\tcallbackOAuth: _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth,\n\t\t\tgetSession: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession)(),\n\t\t\tsignOut: _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut,\n\t\t\tsignUpEmail: (0,_routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail)(),\n\t\t\tsignInEmail: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail)(),\n\t\t\tresetPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword,\n\t\t\tverifyPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword,\n\t\t\tverifyEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail,\n\t\t\tsendVerificationEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail,\n\t\t\tchangeEmail: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail,\n\t\t\tchangePassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword,\n\t\t\tsetPassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword,\n\t\t\tupdateUser: (0,_routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser)(),\n\t\t\tdeleteUser: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser,\n\t\t\trequestPasswordReset: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset,\n\t\t\trequestPasswordResetCallback: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback,\n\t\t\tlistSessions: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions)(),\n\t\t\trevokeSession: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession,\n\t\t\trevokeSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions,\n\t\t\trevokeOtherSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions,\n\t\t\tlinkSocialAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount,\n\t\t\tlistUserAccounts: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts,\n\t\t\tdeleteUserCallback: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback,\n\t\t\tunlinkAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount,\n\t\t\trefreshToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken,\n\t\t\tgetAccessToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken,\n\t\t\taccountInfo: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo,\n\t\t\t...pluginEndpoints,\n\t\t\tok: _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok,\n\t\t\terror: _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error\n\t\t}, ctx),\n\t\tmiddlewares\n\t};\n}\nconst router = (ctx, options) => {\n\tconst { api, middlewares } = getEndpoints(ctx, options);\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\treturn (0,better_call__WEBPACK_IMPORTED_MODULE_20__.createRouter)(api, {\n\t\trouterContext: ctx,\n\t\topenapi: { disabled: true },\n\t\tbasePath,\n\t\trouterMiddleware: [{\n\t\t\tpath: \"/**\",\n\t\t\tmiddleware: _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware\n\t\t}, ...middlewares],\n\t\tallowedMediaTypes: [\"application/json\"],\n\t\tskipTrailingSlashes: options.advanced?.skipTrailingSlashes ?? false,\n\t\tasync onRequest(req) {\n\t\t\tconst disabledPaths = ctx.options.disabledPaths || [];\n\t\t\tconst normalizedPath = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_19__.normalizePathname)(req.url, basePath);\n\t\t\tif (disabledPaths.includes(normalizedPath)) return new Response(\"Not Found\", { status: 404 });\n\t\t\tlet currentRequest = req;\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onRequest) {\n\t\t\t\tconst response = await plugin.onRequest(currentRequest, ctx);\n\t\t\t\tif (response && \"response\" in response) return response.response;\n\t\t\t\tif (response && \"request\" in response) currentRequest = response.request;\n\t\t\t}\n\t\t\tconst rateLimitResponse = await (0,_rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__.onRequestRateLimit)(currentRequest, ctx);\n\t\t\tif (rateLimitResponse) return rateLimitResponse;\n\t\t\treturn currentRequest;\n\t\t},\n\t\tasync onResponse(res) {\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onResponse) {\n\t\t\t\tconst response = await plugin.onResponse(res, ctx);\n\t\t\t\tif (response) return response.response;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\tonError(e) {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_20__.APIError && e.status === \"FOUND\") return;\n\t\t\tif (options.onAPIError?.throw) throw e;\n\t\t\tif (options.onAPIError?.onError) {\n\t\t\t\toptions.onAPIError.onError(e, ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst optLogLevel = options.logger?.level;\n\t\t\tconst log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__.logger : void 0;\n\t\t\tif (options.logger?.disabled !== true) {\n\t\t\t\tif (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n\t\t\t\t\tif (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n\t\t\t\t\t\tctx.logger?.error(e.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_20__.APIError) {\n\t\t\t\t\tif (e.status === \"INTERNAL_SERVER_ERROR\") ctx.logger.error(e.status, e);\n\t\t\t\t\tlog?.error(e.message);\n\t\t\t\t} else ctx.logger?.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\t\t}\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFDSTtBQUNnRDtBQUN2RTtBQUM2QjtBQUM4SztBQUN2RztBQUMvRTtBQUNzRjtBQUNqRztBQUNOO0FBQ3FGO0FBQ3pEO0FBQ2pCO0FBQ0c7QUFDNkU7QUFDcEc7QUFDOEI7QUFDWDtBQUNhO0FBQ2lCO0FBQ3VCOztBQUVwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsY0FBYyxLQUFLLHVDQUF1QyxxQkFBcUIsNEJBQTRCO0FBQzFLO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLE9BQU8sd0VBQWU7QUFDdEIsaUJBQWlCLGtFQUFZO0FBQzdCLGdCQUFnQjtBQUNoQixlQUFlLCtEQUFVO0FBQ3pCLFVBQVU7QUFDVixnQkFBZ0IsaUVBQVc7QUFDM0IsZ0JBQWdCLGlFQUFXO0FBQzNCLGdCQUFnQjtBQUNoQixpQkFBaUI7QUFDakIsY0FBYztBQUNkLHdCQUF3QjtBQUN4QixjQUFjO0FBQ2QsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCxlQUFlLG9FQUFVO0FBQ3pCLGFBQWE7QUFDYix1QkFBdUI7QUFDdkIsK0JBQStCO0FBQy9CLGlCQUFpQixpRUFBWTtBQUM3QixnQkFBZ0I7QUFDaEIsaUJBQWlCO0FBQ2pCLHNCQUFzQjtBQUN0QixvQkFBb0I7QUFDcEIsbUJBQW1CO0FBQ25CLHFCQUFxQjtBQUNyQixnQkFBZ0I7QUFDaEIsZUFBZTtBQUNmLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2Q7QUFDQSxLQUFLO0FBQ0wsUUFBUTtBQUNSLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUJBQW1CO0FBQzVCO0FBQ0EsUUFBUSwwREFBWTtBQUNwQjtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0ZBQXFCO0FBQ3BDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyRUFBaUI7QUFDM0Msa0ZBQWtGLGFBQWE7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDJFQUFrQjtBQUNyRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9CQUFvQixrREFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsMERBQU07QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0RBQVU7QUFDL0I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ2kwQjtBQUNqMEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SXAgfSBmcm9tIFwiLi4vdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzXCI7XG5pbXBvcnQgeyBnZXRPQXV0aFN0YXRlIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvb2F1dGgubWpzXCI7XG5pbXBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgXCIuL21pZGRsZXdhcmVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgb25SZXF1ZXN0UmF0ZUxpbWl0IH0gZnJvbSBcIi4vcmF0ZS1saW1pdGVyL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZnJlc2hTZXNzaW9uTWlkZGxld2FyZSwgZ2V0U2Vzc2lvbiwgZ2V0U2Vzc2lvbkZyb21DdHgsIGxpc3RTZXNzaW9ucywgcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSwgcmV2b2tlT3RoZXJTZXNzaW9ucywgcmV2b2tlU2Vzc2lvbiwgcmV2b2tlU2Vzc2lvbnMsIHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlLCBzZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgYWNjb3VudEluZm8sIGdldEFjY2Vzc1Rva2VuLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFVzZXJBY2NvdW50cywgcmVmcmVzaFRva2VuLCB1bmxpbmtBY2NvdW50IH0gZnJvbSBcIi4vcm91dGVzL2FjY291bnQubWpzXCI7XG5pbXBvcnQgeyBjYWxsYmFja09BdXRoIH0gZnJvbSBcIi4vcm91dGVzL2NhbGxiYWNrLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsLCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbiwgdmVyaWZ5RW1haWwgfSBmcm9tIFwiLi9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgZXJyb3IgfSBmcm9tIFwiLi9yb3V0ZXMvZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBvayB9IGZyb20gXCIuL3JvdXRlcy9vay5tanNcIjtcbmltcG9ydCB7IHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuL3JvdXRlcy9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwgfSBmcm9tIFwiLi9yb3V0ZXMvc2lnbi1pbi5tanNcIjtcbmltcG9ydCB7IHNpZ25PdXQgfSBmcm9tIFwiLi9yb3V0ZXMvc2lnbi1vdXQubWpzXCI7XG5pbXBvcnQgeyBzaWduVXBFbWFpbCB9IGZyb20gXCIuL3JvdXRlcy9zaWduLXVwLm1qc1wiO1xuaW1wb3J0IHsgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIHNldFBhc3N3b3JkLCB1cGRhdGVVc2VyIH0gZnJvbSBcIi4vcm91dGVzL3VwZGF0ZS11c2VyLm1qc1wiO1xuaW1wb3J0IFwiLi9yb3V0ZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b0F1dGhFbmRwb2ludHMgfSBmcm9tIFwiLi90by1hdXRoLWVuZHBvaW50cy5tanNcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVBhdGhuYW1lIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBBUElFcnJvciwgQVBJRXJyb3IgYXMgQVBJRXJyb3IkMSwgY3JlYXRlUm91dGVyIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBvcHRpb25zTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvaW5kZXgudHNcbmZ1bmN0aW9uIGNoZWNrRW5kcG9pbnRDb25mbGljdHMob3B0aW9ucywgbG9nZ2VyJDEpIHtcblx0Y29uc3QgZW5kcG9pbnRSZWdpc3RyeSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdG9wdGlvbnMucGx1Z2lucz8uZm9yRWFjaCgocGx1Z2luKSA9PiB7XG5cdFx0aWYgKHBsdWdpbi5lbmRwb2ludHMpIHtcblx0XHRcdGZvciAoY29uc3QgW2tleSwgZW5kcG9pbnRdIG9mIE9iamVjdC5lbnRyaWVzKHBsdWdpbi5lbmRwb2ludHMpKSBpZiAoZW5kcG9pbnQgJiYgXCJwYXRoXCIgaW4gZW5kcG9pbnQgJiYgdHlwZW9mIGVuZHBvaW50LnBhdGggPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGVuZHBvaW50LnBhdGg7XG5cdFx0XHRcdGxldCBtZXRob2RzID0gW107XG5cdFx0XHRcdGlmIChlbmRwb2ludC5vcHRpb25zICYmIFwibWV0aG9kXCIgaW4gZW5kcG9pbnQub3B0aW9ucykge1xuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGVuZHBvaW50Lm9wdGlvbnMubWV0aG9kKSkgbWV0aG9kcyA9IGVuZHBvaW50Lm9wdGlvbnMubWV0aG9kO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBlbmRwb2ludC5vcHRpb25zLm1ldGhvZCA9PT0gXCJzdHJpbmdcIikgbWV0aG9kcyA9IFtlbmRwb2ludC5vcHRpb25zLm1ldGhvZF07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG1ldGhvZHMubGVuZ3RoID09PSAwKSBtZXRob2RzID0gW1wiKlwiXTtcblx0XHRcdFx0aWYgKCFlbmRwb2ludFJlZ2lzdHJ5LmhhcyhwYXRoKSkgZW5kcG9pbnRSZWdpc3RyeS5zZXQocGF0aCwgW10pO1xuXHRcdFx0XHRlbmRwb2ludFJlZ2lzdHJ5LmdldChwYXRoKS5wdXNoKHtcblx0XHRcdFx0XHRwbHVnaW5JZDogcGx1Z2luLmlkLFxuXHRcdFx0XHRcdGVuZHBvaW50S2V5OiBrZXksXG5cdFx0XHRcdFx0bWV0aG9kc1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXHRjb25zdCBjb25mbGljdHMgPSBbXTtcblx0Zm9yIChjb25zdCBbcGF0aCwgZW50cmllc10gb2YgZW5kcG9pbnRSZWdpc3RyeS5lbnRyaWVzKCkpIGlmIChlbnRyaWVzLmxlbmd0aCA+IDEpIHtcblx0XHRjb25zdCBtZXRob2RNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdGxldCBoYXNDb25mbGljdCA9IGZhbHNlO1xuXHRcdGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykgZm9yIChjb25zdCBtZXRob2Qgb2YgZW50cnkubWV0aG9kcykge1xuXHRcdFx0aWYgKCFtZXRob2RNYXAuaGFzKG1ldGhvZCkpIG1ldGhvZE1hcC5zZXQobWV0aG9kLCBbXSk7XG5cdFx0XHRtZXRob2RNYXAuZ2V0KG1ldGhvZCkucHVzaChlbnRyeS5wbHVnaW5JZCk7XG5cdFx0XHRpZiAobWV0aG9kTWFwLmdldChtZXRob2QpLmxlbmd0aCA+IDEpIGhhc0NvbmZsaWN0ID0gdHJ1ZTtcblx0XHRcdGlmIChtZXRob2QgPT09IFwiKlwiICYmIGVudHJpZXMubGVuZ3RoID4gMSkgaGFzQ29uZmxpY3QgPSB0cnVlO1xuXHRcdFx0ZWxzZSBpZiAobWV0aG9kICE9PSBcIipcIiAmJiBtZXRob2RNYXAuaGFzKFwiKlwiKSkgaGFzQ29uZmxpY3QgPSB0cnVlO1xuXHRcdH1cblx0XHRpZiAoaGFzQ29uZmxpY3QpIHtcblx0XHRcdGNvbnN0IHVuaXF1ZVBsdWdpbnMgPSBbLi4ubmV3IFNldChlbnRyaWVzLm1hcCgoZSkgPT4gZS5wbHVnaW5JZCkpXTtcblx0XHRcdGNvbnN0IGNvbmZsaWN0aW5nTWV0aG9kcyA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBbbWV0aG9kLCBwbHVnaW5zXSBvZiBtZXRob2RNYXAuZW50cmllcygpKSBpZiAocGx1Z2lucy5sZW5ndGggPiAxIHx8IG1ldGhvZCA9PT0gXCIqXCIgJiYgZW50cmllcy5sZW5ndGggPiAxIHx8IG1ldGhvZCAhPT0gXCIqXCIgJiYgbWV0aG9kTWFwLmhhcyhcIipcIikpIGNvbmZsaWN0aW5nTWV0aG9kcy5wdXNoKG1ldGhvZCk7XG5cdFx0XHRjb25mbGljdHMucHVzaCh7XG5cdFx0XHRcdHBhdGgsXG5cdFx0XHRcdHBsdWdpbnM6IHVuaXF1ZVBsdWdpbnMsXG5cdFx0XHRcdGNvbmZsaWN0aW5nTWV0aG9kc1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdGlmIChjb25mbGljdHMubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IGNvbmZsaWN0TWVzc2FnZXMgPSBjb25mbGljdHMubWFwKChjb25mbGljdCkgPT4gYCAgLSBcIiR7Y29uZmxpY3QucGF0aH1cIiBbJHtjb25mbGljdC5jb25mbGljdGluZ01ldGhvZHMuam9pbihcIiwgXCIpfV0gdXNlZCBieSBwbHVnaW5zOiAke2NvbmZsaWN0LnBsdWdpbnMuam9pbihcIiwgXCIpfWApLmpvaW4oXCJcXG5cIik7XG5cdFx0bG9nZ2VyJDEuZXJyb3IoYEVuZHBvaW50IHBhdGggY29uZmxpY3RzIGRldGVjdGVkISBNdWx0aXBsZSBwbHVnaW5zIGFyZSB0cnlpbmcgdG8gdXNlIHRoZSBzYW1lIGVuZHBvaW50IHBhdGhzIHdpdGggY29uZmxpY3RpbmcgSFRUUCBtZXRob2RzOlxuJHtjb25mbGljdE1lc3NhZ2VzfVxuXG5UbyByZXNvbHZlIHRoaXMsIHlvdSBjYW46XG5cdDEuIFVzZSBvbmx5IG9uZSBvZiB0aGUgY29uZmxpY3RpbmcgcGx1Z2luc1xuXHQyLiBDb25maWd1cmUgdGhlIHBsdWdpbnMgdG8gdXNlIGRpZmZlcmVudCBwYXRocyAoaWYgc3VwcG9ydGVkKVxuXHQzLiBFbnN1cmUgcGx1Z2lucyB1c2UgZGlmZmVyZW50IEhUVFAgbWV0aG9kcyBmb3IgdGhlIHNhbWUgcGF0aFxuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEVuZHBvaW50cyhjdHgsIG9wdGlvbnMpIHtcblx0Y29uc3QgcGx1Z2luRW5kcG9pbnRzID0gb3B0aW9ucy5wbHVnaW5zPy5yZWR1Y2UoKGFjYywgcGx1Z2luKSA9PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLmFjYyxcblx0XHRcdC4uLnBsdWdpbi5lbmRwb2ludHNcblx0XHR9O1xuXHR9LCB7fSkgPz8ge307XG5cdGNvbnN0IG1pZGRsZXdhcmVzID0gb3B0aW9ucy5wbHVnaW5zPy5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLm1pZGRsZXdhcmVzPy5tYXAoKG0pID0+IHtcblx0XHRjb25zdCBtaWRkbGV3YXJlID0gKGFzeW5jIChjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBhdXRoQ29udGV4dCA9IGF3YWl0IGN0eDtcblx0XHRcdHJldHVybiBtLm1pZGRsZXdhcmUoe1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdFx0Li4uYXV0aENvbnRleHQsXG5cdFx0XHRcdFx0Li4uY29udGV4dC5jb250ZXh0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdG1pZGRsZXdhcmUub3B0aW9ucyA9IG0ubWlkZGxld2FyZS5vcHRpb25zO1xuXHRcdHJldHVybiB7XG5cdFx0XHRwYXRoOiBtLnBhdGgsXG5cdFx0XHRtaWRkbGV3YXJlXG5cdFx0fTtcblx0fSkpLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4gIT09IHZvaWQgMCkuZmxhdCgpIHx8IFtdO1xuXHRyZXR1cm4ge1xuXHRcdGFwaTogdG9BdXRoRW5kcG9pbnRzKHtcblx0XHRcdHNpZ25JblNvY2lhbDogc2lnbkluU29jaWFsKCksXG5cdFx0XHRjYWxsYmFja09BdXRoLFxuXHRcdFx0Z2V0U2Vzc2lvbjogZ2V0U2Vzc2lvbigpLFxuXHRcdFx0c2lnbk91dCxcblx0XHRcdHNpZ25VcEVtYWlsOiBzaWduVXBFbWFpbCgpLFxuXHRcdFx0c2lnbkluRW1haWw6IHNpZ25JbkVtYWlsKCksXG5cdFx0XHRyZXNldFBhc3N3b3JkLFxuXHRcdFx0dmVyaWZ5UGFzc3dvcmQsXG5cdFx0XHR2ZXJpZnlFbWFpbCxcblx0XHRcdHNlbmRWZXJpZmljYXRpb25FbWFpbCxcblx0XHRcdGNoYW5nZUVtYWlsLFxuXHRcdFx0Y2hhbmdlUGFzc3dvcmQsXG5cdFx0XHRzZXRQYXNzd29yZCxcblx0XHRcdHVwZGF0ZVVzZXI6IHVwZGF0ZVVzZXIoKSxcblx0XHRcdGRlbGV0ZVVzZXIsXG5cdFx0XHRyZXF1ZXN0UGFzc3dvcmRSZXNldCxcblx0XHRcdHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssXG5cdFx0XHRsaXN0U2Vzc2lvbnM6IGxpc3RTZXNzaW9ucygpLFxuXHRcdFx0cmV2b2tlU2Vzc2lvbixcblx0XHRcdHJldm9rZVNlc3Npb25zLFxuXHRcdFx0cmV2b2tlT3RoZXJTZXNzaW9ucyxcblx0XHRcdGxpbmtTb2NpYWxBY2NvdW50LFxuXHRcdFx0bGlzdFVzZXJBY2NvdW50cyxcblx0XHRcdGRlbGV0ZVVzZXJDYWxsYmFjayxcblx0XHRcdHVubGlua0FjY291bnQsXG5cdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRnZXRBY2Nlc3NUb2tlbixcblx0XHRcdGFjY291bnRJbmZvLFxuXHRcdFx0Li4ucGx1Z2luRW5kcG9pbnRzLFxuXHRcdFx0b2ssXG5cdFx0XHRlcnJvclxuXHRcdH0sIGN0eCksXG5cdFx0bWlkZGxld2FyZXNcblx0fTtcbn1cbmNvbnN0IHJvdXRlciA9IChjdHgsIG9wdGlvbnMpID0+IHtcblx0Y29uc3QgeyBhcGksIG1pZGRsZXdhcmVzIH0gPSBnZXRFbmRwb2ludHMoY3R4LCBvcHRpb25zKTtcblx0Y29uc3QgYmFzZVBhdGggPSBuZXcgVVJMKGN0eC5iYXNlVVJMKS5wYXRobmFtZTtcblx0cmV0dXJuIGNyZWF0ZVJvdXRlcihhcGksIHtcblx0XHRyb3V0ZXJDb250ZXh0OiBjdHgsXG5cdFx0b3BlbmFwaTogeyBkaXNhYmxlZDogdHJ1ZSB9LFxuXHRcdGJhc2VQYXRoLFxuXHRcdHJvdXRlck1pZGRsZXdhcmU6IFt7XG5cdFx0XHRwYXRoOiBcIi8qKlwiLFxuXHRcdFx0bWlkZGxld2FyZTogb3JpZ2luQ2hlY2tNaWRkbGV3YXJlXG5cdFx0fSwgLi4ubWlkZGxld2FyZXNdLFxuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdHNraXBUcmFpbGluZ1NsYXNoZXM6IG9wdGlvbnMuYWR2YW5jZWQ/LnNraXBUcmFpbGluZ1NsYXNoZXMgPz8gZmFsc2UsXG5cdFx0YXN5bmMgb25SZXF1ZXN0KHJlcSkge1xuXHRcdFx0Y29uc3QgZGlzYWJsZWRQYXRocyA9IGN0eC5vcHRpb25zLmRpc2FibGVkUGF0aHMgfHwgW107XG5cdFx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGhuYW1lKHJlcS51cmwsIGJhc2VQYXRoKTtcblx0XHRcdGlmIChkaXNhYmxlZFBhdGhzLmluY2x1ZGVzKG5vcm1hbGl6ZWRQYXRoKSkgcmV0dXJuIG5ldyBSZXNwb25zZShcIk5vdCBGb3VuZFwiLCB7IHN0YXR1czogNDA0IH0pO1xuXHRcdFx0bGV0IGN1cnJlbnRSZXF1ZXN0ID0gcmVxO1xuXHRcdFx0Zm9yIChjb25zdCBwbHVnaW4gb2YgY3R4Lm9wdGlvbnMucGx1Z2lucyB8fCBbXSkgaWYgKHBsdWdpbi5vblJlcXVlc3QpIHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXF1ZXN0KGN1cnJlbnRSZXF1ZXN0LCBjdHgpO1xuXHRcdFx0XHRpZiAocmVzcG9uc2UgJiYgXCJyZXNwb25zZVwiIGluIHJlc3BvbnNlKSByZXR1cm4gcmVzcG9uc2UucmVzcG9uc2U7XG5cdFx0XHRcdGlmIChyZXNwb25zZSAmJiBcInJlcXVlc3RcIiBpbiByZXNwb25zZSkgY3VycmVudFJlcXVlc3QgPSByZXNwb25zZS5yZXF1ZXN0O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcmF0ZUxpbWl0UmVzcG9uc2UgPSBhd2FpdCBvblJlcXVlc3RSYXRlTGltaXQoY3VycmVudFJlcXVlc3QsIGN0eCk7XG5cdFx0XHRpZiAocmF0ZUxpbWl0UmVzcG9uc2UpIHJldHVybiByYXRlTGltaXRSZXNwb25zZTtcblx0XHRcdHJldHVybiBjdXJyZW50UmVxdWVzdDtcblx0XHR9LFxuXHRcdGFzeW5jIG9uUmVzcG9uc2UocmVzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBjdHgub3B0aW9ucy5wbHVnaW5zIHx8IFtdKSBpZiAocGx1Z2luLm9uUmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXNwb25zZShyZXMsIGN0eCk7XG5cdFx0XHRcdGlmIChyZXNwb25zZSkgcmV0dXJuIHJlc3BvbnNlLnJlc3BvbnNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlcztcblx0XHR9LFxuXHRcdG9uRXJyb3IoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvciQxICYmIGUuc3RhdHVzID09PSBcIkZPVU5EXCIpIHJldHVybjtcblx0XHRcdGlmIChvcHRpb25zLm9uQVBJRXJyb3I/LnRocm93KSB0aHJvdyBlO1xuXHRcdFx0aWYgKG9wdGlvbnMub25BUElFcnJvcj8ub25FcnJvcikge1xuXHRcdFx0XHRvcHRpb25zLm9uQVBJRXJyb3Iub25FcnJvcihlLCBjdHgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBvcHRMb2dMZXZlbCA9IG9wdGlvbnMubG9nZ2VyPy5sZXZlbDtcblx0XHRcdGNvbnN0IGxvZyA9IG9wdExvZ0xldmVsID09PSBcImVycm9yXCIgfHwgb3B0TG9nTGV2ZWwgPT09IFwid2FyblwiIHx8IG9wdExvZ0xldmVsID09PSBcImRlYnVnXCIgPyBsb2dnZXIgOiB2b2lkIDA7XG5cdFx0XHRpZiAob3B0aW9ucy5sb2dnZXI/LmRpc2FibGVkICE9PSB0cnVlKSB7XG5cdFx0XHRcdGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGUgJiYgdHlwZW9mIGUubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGlmIChlLm1lc3NhZ2UuaW5jbHVkZXMoXCJubyBjb2x1bW5cIikgfHwgZS5tZXNzYWdlLmluY2x1ZGVzKFwiY29sdW1uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcInJlbGF0aW9uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcInRhYmxlXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG5cdFx0XHRcdFx0XHRjdHgubG9nZ2VyPy5lcnJvcihlLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yJDEpIHtcblx0XHRcdFx0XHRpZiAoZS5zdGF0dXMgPT09IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpIGN0eC5sb2dnZXIuZXJyb3IoZS5zdGF0dXMsIGUpO1xuXHRcdFx0XHRcdGxvZz8uZXJyb3IoZS5tZXNzYWdlKTtcblx0XHRcdFx0fSBlbHNlIGN0eC5sb2dnZXI/LmVycm9yKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZSA/IGUubmFtZSA6IFwiXCIsIGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFQSUVycm9yLCBhY2NvdW50SW5mbywgY2FsbGJhY2tPQXV0aCwgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBjaGVja0VuZHBvaW50Q29uZmxpY3RzLCBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIGVycm9yLCBmb3JtQ3NyZk1pZGRsZXdhcmUsIGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldEFjY2Vzc1Rva2VuLCBnZXRFbmRwb2ludHMsIGdldElwLCBnZXRPQXV0aFN0YXRlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlua1NvY2lhbEFjY291bnQsIGxpc3RTZXNzaW9ucywgbGlzdFVzZXJBY2NvdW50cywgb2ssIG9wdGlvbnNNaWRkbGV3YXJlLCBvcmlnaW5DaGVjaywgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlLCByZWZyZXNoVG9rZW4sIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgcm91dGVyLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUsIHNldFBhc3N3b3JkLCBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsLCBzaWduT3V0LCBzaWduVXBFbWFpbCwgdW5saW5rQWNjb3VudCwgdXBkYXRlVXNlciwgdmVyaWZ5RW1haWwsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./oauth.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9taWRkbGV3YXJlcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7O0FBQTRDO0FBQ2dEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxcbWlkZGxld2FyZXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRPQXV0aFN0YXRlIH0gZnJvbSBcIi4vb2F1dGgubWpzXCI7XG5pbXBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUgfSBmcm9tIFwiLi9vcmlnaW4tY2hlY2subWpzXCI7XG5cbmV4cG9ydCB7ICB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOAuthState: () => (/* binding */ getOAuthState),\n/* harmony export */   setOAuthState: () => (/* binding */ setOAuthState)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/api/middlewares/oauth.ts\nconst { get: getOAuthState, set: setOAuthState } = (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.defineRequestState)(() => null);\n\n//#endregion\n\n//# sourceMappingURL=oauth.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9taWRkbGV3YXJlcy9vYXV0aC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStEOztBQUUvRDtBQUNBLFFBQVEseUNBQXlDLEVBQUUsNkVBQWtCOztBQUVyRTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXG1pZGRsZXdhcmVzXFxvYXV0aC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lUmVxdWVzdFN0YXRlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvbWlkZGxld2FyZXMvb2F1dGgudHNcbmNvbnN0IHsgZ2V0OiBnZXRPQXV0aFN0YXRlLCBzZXQ6IHNldE9BdXRoU3RhdGUgfSA9IGRlZmluZVJlcXVlc3RTdGF0ZSgoKSA9PiBudWxsKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRPQXV0aFN0YXRlLCBzZXRPQXV0aFN0YXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYXV0aC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs":
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formCsrfMiddleware: () => (/* binding */ formCsrfMiddleware),\n/* harmony export */   originCheck: () => (/* binding */ originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* binding */ originCheckMiddleware)\n/* harmony export */ });\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../auth/trusted-origins.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n//#region src/api/middlewares/origin-check.ts\n/**\n* Checks if CSRF should be skipped for backward compatibility.\n* Previously, disableOriginCheck also disabled CSRF checks.\n* This maintains that behavior when disableCSRFCheck isn't explicitly set.\n* Only triggers for skipOriginCheck === true, not for path arrays.\n*/\nfunction shouldSkipCSRFForBackwardCompat(ctx) {\n\treturn ctx.context.skipOriginCheck === true && ctx.context.options.advanced?.disableCSRFCheck === void 0;\n}\n/**\n* Logs deprecation warning for users relying on coupled behavior.\n* Only logs if user explicitly set disableOriginCheck (not test environment default).\n*/\nconst logBackwardCompatWarning = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.deprecate)(function logBackwardCompatWarning$1() {}, \"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config.\");\n/**\n* A middleware to validate callbackURL and origin against trustedOrigins.\n* Also handles CSRF protection using Fetch Metadata for first-login scenarios.\n*/\nconst originCheckMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (ctx.request?.method === \"GET\" || ctx.request?.method === \"OPTIONS\" || ctx.request?.method === \"HEAD\" || !ctx.request) return;\n\tawait validateOrigin(ctx);\n\tif (ctx.context.skipOriginCheck) return;\n\tconst { body, query } = ctx;\n\tconst callbackURL = body?.callbackURL || query?.callbackURL;\n\tconst redirectURL = body?.redirectTo;\n\tconst errorCallbackURL = body?.errorCallbackURL;\n\tconst newUserCallbackURL = body?.newUserCallbackURL;\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tcallbackURL && validateURL(callbackURL, \"callbackURL\");\n\tredirectURL && validateURL(redirectURL, \"redirectURL\");\n\terrorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n\tnewUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tif (ctx.context.skipOriginCheck) return;\n\tconst callbackURL = getValue(ctx);\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tconst callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n\tfor (const url of callbacks) validateURL(url, \"callbackURL\");\n});\n/**\n* Validates origin header against trusted origins.\n* @param ctx - The endpoint context\n* @param forceValidate - If true, always validate origin regardless of cookies/skip flags\n*/\nasync function validateOrigin(ctx, forceValidate = false) {\n\tconst headers = ctx.request?.headers;\n\tif (!headers || !ctx.request) return;\n\tconst originHeader = headers.get(\"origin\") || headers.get(\"referer\") || \"\";\n\tconst useCookies = headers.has(\"cookie\");\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) {\n\t\tctx.context.options.advanced?.disableOriginCheck === true && logBackwardCompatWarning();\n\t\treturn;\n\t}\n\tconst skipOriginCheck = ctx.context.skipOriginCheck;\n\tif (Array.isArray(skipOriginCheck)) try {\n\t\tconst basePath = new URL(ctx.context.baseURL).pathname;\n\t\tconst currentPath = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.normalizePathname)(ctx.request.url, basePath);\n\t\tif (skipOriginCheck.some((skipPath) => currentPath.startsWith(skipPath))) return;\n\t} catch {}\n\tif (!(forceValidate || useCookies)) return;\n\tif (!originHeader || originHeader === \"null\") throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.MISSING_OR_NULL_ORIGIN });\n\tconst trustedOrigins = Array.isArray(ctx.context.options.trustedOrigins) ? ctx.context.trustedOrigins : [...ctx.context.trustedOrigins, ...(await ctx.context.options.trustedOrigins?.(ctx.request))?.filter((v) => Boolean(v)) || []];\n\tif (!trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__.matchesOriginPattern)(originHeader, origin))) {\n\t\tctx.context.logger.error(`Invalid origin: ${originHeader}`);\n\t\tctx.context.logger.info(`If it's a valid URL, please add ${originHeader} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${trustedOrigins}`);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: \"Invalid origin\" });\n\t}\n}\n/**\n* Middleware for CSRF protection using Fetch Metadata headers.\n* This prevents cross-site navigation login attacks while supporting progressive enhancement.\n*/\nconst formCsrfMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tawait validateFormCsrf(ctx);\n});\n/**\n* Validates CSRF protection for first-login scenarios using Fetch Metadata headers.\n* This prevents cross-site form submission attacks while supporting progressive enhancement.\n*/\nasync function validateFormCsrf(ctx) {\n\tconst req = ctx.request;\n\tif (!req) return;\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) return;\n\tconst headers = req.headers;\n\tif (headers.has(\"cookie\")) return await validateOrigin(ctx);\n\tconst site = headers.get(\"Sec-Fetch-Site\");\n\tconst mode = headers.get(\"Sec-Fetch-Mode\");\n\tconst dest = headers.get(\"Sec-Fetch-Dest\");\n\tif (Boolean(site && site.trim() || mode && mode.trim() || dest && dest.trim())) {\n\t\tif (site === \"cross-site\" && mode === \"navigate\") {\n\t\t\tctx.context.logger.error(\"Blocked cross-site navigation login attempt (CSRF protection)\", {\n\t\t\t\tsecFetchSite: site,\n\t\t\t\tsecFetchMode: mode,\n\t\t\t\tsecFetchDest: dest\n\t\t\t});\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED });\n\t\t}\n\t\treturn await validateOrigin(ctx, true);\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=origin-check.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNFO0FBQ1g7QUFDWTtBQUNoQztBQUNzQjs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxrRUFBUyx5Q0FBeUM7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMkVBQW9CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsY0FBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsd0NBQXdDO0FBQ2xGLHVDQUF1QyxNQUFNLElBQUksSUFBSTtBQUNyRCw4REFBOEQsS0FBSyw2RUFBNkUsMkJBQTJCO0FBQzNLLGFBQWEsaURBQVEsZ0JBQWdCLG9CQUFvQixNQUFNLEdBQUc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtDQUFrQywyRUFBb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx3Q0FBd0M7QUFDbEYsdUNBQXVDLE1BQU0sSUFBSSxJQUFJO0FBQ3JELDhEQUE4RCxLQUFLLDZFQUE2RSwyQkFBMkI7QUFDM0ssYUFBYSxpREFBUSxnQkFBZ0Isb0JBQW9CLE1BQU0sR0FBRztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMEVBQWlCO0FBQ3ZDO0FBQ0EsR0FBRztBQUNIO0FBQ0EseURBQXlELGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQix5QkFBeUI7QUFDbkk7QUFDQSxzQ0FBc0MsK0VBQW9CO0FBQzFELDhDQUE4QyxhQUFhO0FBQzNELDZEQUE2RCxjQUFjLDZFQUE2RSxlQUFlO0FBQ3ZLLFlBQVksaURBQVEsZ0JBQWdCLDJCQUEyQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkVBQW9CO0FBQy9DO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixzQ0FBc0M7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0U7QUFDbEUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxtaWRkbGV3YXJlc1xcb3JpZ2luLWNoZWNrLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXRjaGVzT3JpZ2luUGF0dGVybiB9IGZyb20gXCIuLi8uLi9hdXRoL3RydXN0ZWQtb3JpZ2lucy5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGRlcHJlY2F0ZSwgbm9ybWFsaXplUGF0aG5hbWUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLnRzXG4vKipcbiogQ2hlY2tzIGlmIENTUkYgc2hvdWxkIGJlIHNraXBwZWQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXG4qIFByZXZpb3VzbHksIGRpc2FibGVPcmlnaW5DaGVjayBhbHNvIGRpc2FibGVkIENTUkYgY2hlY2tzLlxuKiBUaGlzIG1haW50YWlucyB0aGF0IGJlaGF2aW9yIHdoZW4gZGlzYWJsZUNTUkZDaGVjayBpc24ndCBleHBsaWNpdGx5IHNldC5cbiogT25seSB0cmlnZ2VycyBmb3Igc2tpcE9yaWdpbkNoZWNrID09PSB0cnVlLCBub3QgZm9yIHBhdGggYXJyYXlzLlxuKi9cbmZ1bmN0aW9uIHNob3VsZFNraXBDU1JGRm9yQmFja3dhcmRDb21wYXQoY3R4KSB7XG5cdHJldHVybiBjdHguY29udGV4dC5za2lwT3JpZ2luQ2hlY2sgPT09IHRydWUgJiYgY3R4LmNvbnRleHQub3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZUNTUkZDaGVjayA9PT0gdm9pZCAwO1xufVxuLyoqXG4qIExvZ3MgZGVwcmVjYXRpb24gd2FybmluZyBmb3IgdXNlcnMgcmVseWluZyBvbiBjb3VwbGVkIGJlaGF2aW9yLlxuKiBPbmx5IGxvZ3MgaWYgdXNlciBleHBsaWNpdGx5IHNldCBkaXNhYmxlT3JpZ2luQ2hlY2sgKG5vdCB0ZXN0IGVudmlyb25tZW50IGRlZmF1bHQpLlxuKi9cbmNvbnN0IGxvZ0JhY2t3YXJkQ29tcGF0V2FybmluZyA9IGRlcHJlY2F0ZShmdW5jdGlvbiBsb2dCYWNrd2FyZENvbXBhdFdhcm5pbmckMSgpIHt9LCBcImRpc2FibGVPcmlnaW5DaGVjazogdHJ1ZSBjdXJyZW50bHkgYWxzbyBkaXNhYmxlcyBDU1JGIGNoZWNrcy4gSW4gYSBmdXR1cmUgdmVyc2lvbiwgZGlzYWJsZU9yaWdpbkNoZWNrIHdpbGwgT05MWSBkaXNhYmxlIFVSTCB2YWxpZGF0aW9uLiBUbyBrZWVwIENTUkYgZGlzYWJsZWQsIGFkZCBkaXNhYmxlQ1NSRkNoZWNrOiB0cnVlIHRvIHlvdXIgY29uZmlnLlwiKTtcbi8qKlxuKiBBIG1pZGRsZXdhcmUgdG8gdmFsaWRhdGUgY2FsbGJhY2tVUkwgYW5kIG9yaWdpbiBhZ2FpbnN0IHRydXN0ZWRPcmlnaW5zLlxuKiBBbHNvIGhhbmRsZXMgQ1NSRiBwcm90ZWN0aW9uIHVzaW5nIEZldGNoIE1ldGFkYXRhIGZvciBmaXJzdC1sb2dpbiBzY2VuYXJpb3MuXG4qL1xuY29uc3Qgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoY3R4LnJlcXVlc3Q/Lm1ldGhvZCA9PT0gXCJHRVRcIiB8fCBjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIk9QVElPTlNcIiB8fCBjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIkhFQURcIiB8fCAhY3R4LnJlcXVlc3QpIHJldHVybjtcblx0YXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4KTtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjaykgcmV0dXJuO1xuXHRjb25zdCB7IGJvZHksIHF1ZXJ5IH0gPSBjdHg7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gYm9keT8uY2FsbGJhY2tVUkwgfHwgcXVlcnk/LmNhbGxiYWNrVVJMO1xuXHRjb25zdCByZWRpcmVjdFVSTCA9IGJvZHk/LnJlZGlyZWN0VG87XG5cdGNvbnN0IGVycm9yQ2FsbGJhY2tVUkwgPSBib2R5Py5lcnJvckNhbGxiYWNrVVJMO1xuXHRjb25zdCBuZXdVc2VyQ2FsbGJhY2tVUkwgPSBib2R5Py5uZXdVc2VyQ2FsbGJhY2tVUkw7XG5cdGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXHRcdGlmICghY3R4LmNvbnRleHQuaXNUcnVzdGVkT3JpZ2luKHVybCwgeyBhbGxvd1JlbGF0aXZlUGF0aHM6IGxhYmVsICE9PSBcIm9yaWdpblwiIH0pKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgJHtsYWJlbH06ICR7dXJsfWApO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmluZm8oYElmIGl0J3MgYSB2YWxpZCBVUkwsIHBsZWFzZSBhZGQgJHt1cmx9IHRvIHRydXN0ZWRPcmlnaW5zIGluIHlvdXIgYXV0aCBjb25maWdcXG5gLCBgQ3VycmVudCBsaXN0IG9mIHRydXN0ZWRPcmlnaW5zOiAke2N0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuXHRcdH1cblx0fTtcblx0Y2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwoY2FsbGJhY2tVUkwsIFwiY2FsbGJhY2tVUkxcIik7XG5cdHJlZGlyZWN0VVJMICYmIHZhbGlkYXRlVVJMKHJlZGlyZWN0VVJMLCBcInJlZGlyZWN0VVJMXCIpO1xuXHRlcnJvckNhbGxiYWNrVVJMICYmIHZhbGlkYXRlVVJMKGVycm9yQ2FsbGJhY2tVUkwsIFwiZXJyb3JDYWxsYmFja1VSTFwiKTtcblx0bmV3VXNlckNhbGxiYWNrVVJMICYmIHZhbGlkYXRlVVJMKG5ld1VzZXJDYWxsYmFja1VSTCwgXCJuZXdVc2VyQ2FsbGJhY2tVUkxcIik7XG59KTtcbmNvbnN0IG9yaWdpbkNoZWNrID0gKGdldFZhbHVlKSA9PiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LnJlcXVlc3QpIHJldHVybjtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjaykgcmV0dXJuO1xuXHRjb25zdCBjYWxsYmFja1VSTCA9IGdldFZhbHVlKGN0eCk7XG5cdGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXHRcdGlmICghY3R4LmNvbnRleHQuaXNUcnVzdGVkT3JpZ2luKHVybCwgeyBhbGxvd1JlbGF0aXZlUGF0aHM6IGxhYmVsICE9PSBcIm9yaWdpblwiIH0pKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgJHtsYWJlbH06ICR7dXJsfWApO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmluZm8oYElmIGl0J3MgYSB2YWxpZCBVUkwsIHBsZWFzZSBhZGQgJHt1cmx9IHRvIHRydXN0ZWRPcmlnaW5zIGluIHlvdXIgYXV0aCBjb25maWdcXG5gLCBgQ3VycmVudCBsaXN0IG9mIHRydXN0ZWRPcmlnaW5zOiAke2N0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgY2FsbGJhY2tzID0gQXJyYXkuaXNBcnJheShjYWxsYmFja1VSTCkgPyBjYWxsYmFja1VSTCA6IFtjYWxsYmFja1VSTF07XG5cdGZvciAoY29uc3QgdXJsIG9mIGNhbGxiYWNrcykgdmFsaWRhdGVVUkwodXJsLCBcImNhbGxiYWNrVVJMXCIpO1xufSk7XG4vKipcbiogVmFsaWRhdGVzIG9yaWdpbiBoZWFkZXIgYWdhaW5zdCB0cnVzdGVkIG9yaWdpbnMuXG4qIEBwYXJhbSBjdHggLSBUaGUgZW5kcG9pbnQgY29udGV4dFxuKiBAcGFyYW0gZm9yY2VWYWxpZGF0ZSAtIElmIHRydWUsIGFsd2F5cyB2YWxpZGF0ZSBvcmlnaW4gcmVnYXJkbGVzcyBvZiBjb29raWVzL3NraXAgZmxhZ3NcbiovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZU9yaWdpbihjdHgsIGZvcmNlVmFsaWRhdGUgPSBmYWxzZSkge1xuXHRjb25zdCBoZWFkZXJzID0gY3R4LnJlcXVlc3Q/LmhlYWRlcnM7XG5cdGlmICghaGVhZGVycyB8fCAhY3R4LnJlcXVlc3QpIHJldHVybjtcblx0Y29uc3Qgb3JpZ2luSGVhZGVyID0gaGVhZGVycy5nZXQoXCJvcmlnaW5cIikgfHwgaGVhZGVycy5nZXQoXCJyZWZlcmVyXCIpIHx8IFwiXCI7XG5cdGNvbnN0IHVzZUNvb2tpZXMgPSBoZWFkZXJzLmhhcyhcImNvb2tpZVwiKTtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBDU1JGQ2hlY2spIHJldHVybjtcblx0aWYgKHNob3VsZFNraXBDU1JGRm9yQmFja3dhcmRDb21wYXQoY3R4KSkge1xuXHRcdGN0eC5jb250ZXh0Lm9wdGlvbnMuYWR2YW5jZWQ/LmRpc2FibGVPcmlnaW5DaGVjayA9PT0gdHJ1ZSAmJiBsb2dCYWNrd2FyZENvbXBhdFdhcm5pbmcoKTtcblx0XHRyZXR1cm47XG5cdH1cblx0Y29uc3Qgc2tpcE9yaWdpbkNoZWNrID0gY3R4LmNvbnRleHQuc2tpcE9yaWdpbkNoZWNrO1xuXHRpZiAoQXJyYXkuaXNBcnJheShza2lwT3JpZ2luQ2hlY2spKSB0cnkge1xuXHRcdGNvbnN0IGJhc2VQYXRoID0gbmV3IFVSTChjdHguY29udGV4dC5iYXNlVVJMKS5wYXRobmFtZTtcblx0XHRjb25zdCBjdXJyZW50UGF0aCA9IG5vcm1hbGl6ZVBhdGhuYW1lKGN0eC5yZXF1ZXN0LnVybCwgYmFzZVBhdGgpO1xuXHRcdGlmIChza2lwT3JpZ2luQ2hlY2suc29tZSgoc2tpcFBhdGgpID0+IGN1cnJlbnRQYXRoLnN0YXJ0c1dpdGgoc2tpcFBhdGgpKSkgcmV0dXJuO1xuXHR9IGNhdGNoIHt9XG5cdGlmICghKGZvcmNlVmFsaWRhdGUgfHwgdXNlQ29va2llcykpIHJldHVybjtcblx0aWYgKCFvcmlnaW5IZWFkZXIgfHwgb3JpZ2luSGVhZGVyID09PSBcIm51bGxcIikgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5NSVNTSU5HX09SX05VTExfT1JJR0lOIH0pO1xuXHRjb25zdCB0cnVzdGVkT3JpZ2lucyA9IEFycmF5LmlzQXJyYXkoY3R4LmNvbnRleHQub3B0aW9ucy50cnVzdGVkT3JpZ2lucykgPyBjdHguY29udGV4dC50cnVzdGVkT3JpZ2lucyA6IFsuLi5jdHguY29udGV4dC50cnVzdGVkT3JpZ2lucywgLi4uKGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMudHJ1c3RlZE9yaWdpbnM/LihjdHgucmVxdWVzdCkpPy5maWx0ZXIoKHYpID0+IEJvb2xlYW4odikpIHx8IFtdXTtcblx0aWYgKCF0cnVzdGVkT3JpZ2lucy5zb21lKChvcmlnaW4pID0+IG1hdGNoZXNPcmlnaW5QYXR0ZXJuKG9yaWdpbkhlYWRlciwgb3JpZ2luKSkpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgb3JpZ2luOiAke29yaWdpbkhlYWRlcn1gKTtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuaW5mbyhgSWYgaXQncyBhIHZhbGlkIFVSTCwgcGxlYXNlIGFkZCAke29yaWdpbkhlYWRlcn0gdG8gdHJ1c3RlZE9yaWdpbnMgaW4geW91ciBhdXRoIGNvbmZpZ1xcbmAsIGBDdXJyZW50IGxpc3Qgb2YgdHJ1c3RlZE9yaWdpbnM6ICR7dHJ1c3RlZE9yaWdpbnN9YCk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogXCJJbnZhbGlkIG9yaWdpblwiIH0pO1xuXHR9XG59XG4vKipcbiogTWlkZGxld2FyZSBmb3IgQ1NSRiBwcm90ZWN0aW9uIHVzaW5nIEZldGNoIE1ldGFkYXRhIGhlYWRlcnMuXG4qIFRoaXMgcHJldmVudHMgY3Jvc3Mtc2l0ZSBuYXZpZ2F0aW9uIGxvZ2luIGF0dGFja3Mgd2hpbGUgc3VwcG9ydGluZyBwcm9ncmVzc2l2ZSBlbmhhbmNlbWVudC5cbiovXG5jb25zdCBmb3JtQ3NyZk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LnJlcXVlc3QpIHJldHVybjtcblx0YXdhaXQgdmFsaWRhdGVGb3JtQ3NyZihjdHgpO1xufSk7XG4vKipcbiogVmFsaWRhdGVzIENTUkYgcHJvdGVjdGlvbiBmb3IgZmlyc3QtbG9naW4gc2NlbmFyaW9zIHVzaW5nIEZldGNoIE1ldGFkYXRhIGhlYWRlcnMuXG4qIFRoaXMgcHJldmVudHMgY3Jvc3Mtc2l0ZSBmb3JtIHN1Ym1pc3Npb24gYXR0YWNrcyB3aGlsZSBzdXBwb3J0aW5nIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50LlxuKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybUNzcmYoY3R4KSB7XG5cdGNvbnN0IHJlcSA9IGN0eC5yZXF1ZXN0O1xuXHRpZiAoIXJlcSkgcmV0dXJuO1xuXHRpZiAoY3R4LmNvbnRleHQuc2tpcENTUkZDaGVjaykgcmV0dXJuO1xuXHRpZiAoc2hvdWxkU2tpcENTUkZGb3JCYWNrd2FyZENvbXBhdChjdHgpKSByZXR1cm47XG5cdGNvbnN0IGhlYWRlcnMgPSByZXEuaGVhZGVycztcblx0aWYgKGhlYWRlcnMuaGFzKFwiY29va2llXCIpKSByZXR1cm4gYXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4KTtcblx0Y29uc3Qgc2l0ZSA9IGhlYWRlcnMuZ2V0KFwiU2VjLUZldGNoLVNpdGVcIik7XG5cdGNvbnN0IG1vZGUgPSBoZWFkZXJzLmdldChcIlNlYy1GZXRjaC1Nb2RlXCIpO1xuXHRjb25zdCBkZXN0ID0gaGVhZGVycy5nZXQoXCJTZWMtRmV0Y2gtRGVzdFwiKTtcblx0aWYgKEJvb2xlYW4oc2l0ZSAmJiBzaXRlLnRyaW0oKSB8fCBtb2RlICYmIG1vZGUudHJpbSgpIHx8IGRlc3QgJiYgZGVzdC50cmltKCkpKSB7XG5cdFx0aWYgKHNpdGUgPT09IFwiY3Jvc3Mtc2l0ZVwiICYmIG1vZGUgPT09IFwibmF2aWdhdGVcIikge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQmxvY2tlZCBjcm9zcy1zaXRlIG5hdmlnYXRpb24gbG9naW4gYXR0ZW1wdCAoQ1NSRiBwcm90ZWN0aW9uKVwiLCB7XG5cdFx0XHRcdHNlY0ZldGNoU2l0ZTogc2l0ZSxcblx0XHRcdFx0c2VjRmV0Y2hNb2RlOiBtb2RlLFxuXHRcdFx0XHRzZWNGZXRjaERlc3Q6IGRlc3Rcblx0XHRcdH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5DUk9TU19TSVRFX05BVklHQVRJT05fTE9HSU5fQkxPQ0tFRCB9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGF3YWl0IHZhbGlkYXRlT3JpZ2luKGN0eCwgdHJ1ZSk7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yaWdpbi1jaGVjay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onRequestRateLimit: () => (/* binding */ onRequestRateLimit)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/wildcard.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//#region src/api/rate-limiter/index.ts\nconst memory = /* @__PURE__ */ new Map();\nfunction shouldRateLimit(max, window, rateLimitData) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn now - rateLimitData.lastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n\treturn new Response(JSON.stringify({ message: \"Too many requests. Please try again later.\" }), {\n\t\tstatus: 429,\n\t\tstatusText: \"Too Many Requests\",\n\t\theaders: { \"X-Retry-After\": retryAfter.toString() }\n\t});\n}\nfunction getRetryAfter(lastRequest, window) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDatabaseStorageWrapper(ctx) {\n\tconst model = \"rateLimit\";\n\tconst db = ctx.adapter;\n\treturn {\n\t\tget: async (key) => {\n\t\t\tconst data = (await db.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"key\",\n\t\t\t\t\tvalue: key\n\t\t\t\t}]\n\t\t\t}))[0];\n\t\t\tif (typeof data?.lastRequest === \"bigint\") data.lastRequest = Number(data.lastRequest);\n\t\t\treturn data;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\ttry {\n\t\t\t\tif (_update) await db.updateMany({\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"key\",\n\t\t\t\t\t\tvalue: key\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\telse await db.create({\n\t\t\t\t\tmodel,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tctx.logger.error(\"Error setting rate limit\", e);\n\t\t\t}\n\t\t}\n\t};\n}\nfunction getRateLimitStorage(ctx, rateLimitSettings) {\n\tif (ctx.options.rateLimit?.customStorage) return ctx.options.rateLimit.customStorage;\n\tconst storage = ctx.rateLimit.storage;\n\tif (storage === \"secondary-storage\") return {\n\t\tget: async (key) => {\n\t\t\tconst data = await ctx.options.secondaryStorage?.get(key);\n\t\t\treturn data ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(data) : null;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tawait ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value), ttl);\n\t\t}\n\t};\n\telse if (storage === \"memory\") return {\n\t\tasync get(key) {\n\t\t\tconst entry = memory.get(key);\n\t\t\tif (!entry) return null;\n\t\t\tif (Date.now() >= entry.expiresAt) {\n\t\t\t\tmemory.delete(key);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn entry.data;\n\t\t},\n\t\tasync set(key, value, _update) {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tconst expiresAt = Date.now() + ttl * 1e3;\n\t\t\tmemory.set(key, {\n\t\t\t\tdata: value,\n\t\t\t\texpiresAt\n\t\t\t});\n\t\t}\n\t};\n\treturn createDatabaseStorageWrapper(ctx);\n}\nasync function onRequestRateLimit(req, ctx) {\n\tif (!ctx.rateLimit.enabled) return;\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\tconst path = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.normalizePathname)(req.url, basePath);\n\tlet currentWindow = ctx.rateLimit.window;\n\tlet currentMax = ctx.rateLimit.max;\n\tconst ip = (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp)(req, ctx.options);\n\tif (!ip) return;\n\tconst key = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.createRateLimitKey)(ip, path);\n\tconst specialRule = getDefaultSpecialRules().find((rule) => rule.pathMatcher(path));\n\tif (specialRule) {\n\t\tcurrentWindow = specialRule.window;\n\t\tcurrentMax = specialRule.max;\n\t}\n\tfor (const plugin of ctx.options.plugins || []) if (plugin.rateLimit) {\n\t\tconst matchedRule = plugin.rateLimit.find((rule) => rule.pathMatcher(path));\n\t\tif (matchedRule) {\n\t\t\tcurrentWindow = matchedRule.window;\n\t\t\tcurrentMax = matchedRule.max;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (ctx.rateLimit.customRules) {\n\t\tconst _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n\t\t\tif (p.includes(\"*\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(p)(path);\n\t\t\treturn p === path;\n\t\t});\n\t\tif (_path) {\n\t\t\tconst customRule = ctx.rateLimit.customRules[_path];\n\t\t\tconst resolved = typeof customRule === \"function\" ? await customRule(req, {\n\t\t\t\twindow: currentWindow,\n\t\t\t\tmax: currentMax\n\t\t\t}) : customRule;\n\t\t\tif (resolved) {\n\t\t\t\tcurrentWindow = resolved.window;\n\t\t\t\tcurrentMax = resolved.max;\n\t\t\t}\n\t\t\tif (resolved === false) return;\n\t\t}\n\t}\n\tconst storage = getRateLimitStorage(ctx, { window: currentWindow });\n\tconst data = await storage.get(key);\n\tconst now = Date.now();\n\tif (!data) await storage.set(key, {\n\t\tkey,\n\t\tcount: 1,\n\t\tlastRequest: now\n\t});\n\telse {\n\t\tconst timeSinceLastRequest = now - data.lastRequest;\n\t\tif (shouldRateLimit(currentMax, currentWindow, data)) return rateLimitResponse(getRetryAfter(data.lastRequest, currentWindow));\n\t\telse if (timeSinceLastRequest > currentWindow * 1e3) await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t\telse await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: data.count + 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t}\n}\nfunction getDefaultSpecialRules() {\n\treturn [{\n\t\tpathMatcher(path) {\n\t\t\treturn path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n\t\t},\n\t\twindow: 10,\n\t\tmax: 3\n\t}];\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yYXRlLWxpbWl0ZXIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7QUFDRTtBQUNzQzs7QUFFL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx1REFBdUQ7QUFDN0Y7QUFDQTtBQUNBLGFBQWE7QUFDYixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0VBQWE7QUFDOUIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwRUFBaUI7QUFDL0I7QUFDQTtBQUNBLFlBQVksZ0VBQUs7QUFDakI7QUFDQSxhQUFhLDJFQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0VBQWE7QUFDNUM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx1QkFBdUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQzhCO0FBQzlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccmF0ZS1saW1pdGVyXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SXAgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzXCI7XG5pbXBvcnQgeyB3aWxkY2FyZE1hdGNoIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3dpbGRjYXJkLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUmF0ZUxpbWl0S2V5LCBub3JtYWxpemVQYXRobmFtZSwgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yYXRlLWxpbWl0ZXIvaW5kZXgudHNcbmNvbnN0IG1lbW9yeSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5mdW5jdGlvbiBzaG91bGRSYXRlTGltaXQobWF4LCB3aW5kb3csIHJhdGVMaW1pdERhdGEpIHtcblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0Y29uc3Qgd2luZG93SW5NcyA9IHdpbmRvdyAqIDFlMztcblx0cmV0dXJuIG5vdyAtIHJhdGVMaW1pdERhdGEubGFzdFJlcXVlc3QgPCB3aW5kb3dJbk1zICYmIHJhdGVMaW1pdERhdGEuY291bnQgPj0gbWF4O1xufVxuZnVuY3Rpb24gcmF0ZUxpbWl0UmVzcG9uc2UocmV0cnlBZnRlcikge1xuXHRyZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogXCJUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiB9KSwge1xuXHRcdHN0YXR1czogNDI5LFxuXHRcdHN0YXR1c1RleHQ6IFwiVG9vIE1hbnkgUmVxdWVzdHNcIixcblx0XHRoZWFkZXJzOiB7IFwiWC1SZXRyeS1BZnRlclwiOiByZXRyeUFmdGVyLnRvU3RyaW5nKCkgfVxuXHR9KTtcbn1cbmZ1bmN0aW9uIGdldFJldHJ5QWZ0ZXIobGFzdFJlcXVlc3QsIHdpbmRvdykge1xuXHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRjb25zdCB3aW5kb3dJbk1zID0gd2luZG93ICogMWUzO1xuXHRyZXR1cm4gTWF0aC5jZWlsKChsYXN0UmVxdWVzdCArIHdpbmRvd0luTXMgLSBub3cpIC8gMWUzKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURhdGFiYXNlU3RvcmFnZVdyYXBwZXIoY3R4KSB7XG5cdGNvbnN0IG1vZGVsID0gXCJyYXRlTGltaXRcIjtcblx0Y29uc3QgZGIgPSBjdHguYWRhcHRlcjtcblx0cmV0dXJuIHtcblx0XHRnZXQ6IGFzeW5jIChrZXkpID0+IHtcblx0XHRcdGNvbnN0IGRhdGEgPSAoYXdhaXQgZGIuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwia2V5XCIsXG5cdFx0XHRcdFx0dmFsdWU6IGtleVxuXHRcdFx0XHR9XVxuXHRcdFx0fSkpWzBdO1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhPy5sYXN0UmVxdWVzdCA9PT0gXCJiaWdpbnRcIikgZGF0YS5sYXN0UmVxdWVzdCA9IE51bWJlcihkYXRhLmxhc3RSZXF1ZXN0KTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH0sXG5cdFx0c2V0OiBhc3luYyAoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKF91cGRhdGUpIGF3YWl0IGRiLnVwZGF0ZU1hbnkoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwia2V5XCIsXG5cdFx0XHRcdFx0XHR2YWx1ZToga2V5XG5cdFx0XHRcdFx0fV0sXG5cdFx0XHRcdFx0dXBkYXRlOiB7XG5cdFx0XHRcdFx0XHRjb3VudDogdmFsdWUuY291bnQsXG5cdFx0XHRcdFx0XHRsYXN0UmVxdWVzdDogdmFsdWUubGFzdFJlcXVlc3Rcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRlbHNlIGF3YWl0IGRiLmNyZWF0ZSh7XG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0Y291bnQ6IHZhbHVlLmNvdW50LFxuXHRcdFx0XHRcdFx0bGFzdFJlcXVlc3Q6IHZhbHVlLmxhc3RSZXF1ZXN0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y3R4LmxvZ2dlci5lcnJvcihcIkVycm9yIHNldHRpbmcgcmF0ZSBsaW1pdFwiLCBlKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5mdW5jdGlvbiBnZXRSYXRlTGltaXRTdG9yYWdlKGN0eCwgcmF0ZUxpbWl0U2V0dGluZ3MpIHtcblx0aWYgKGN0eC5vcHRpb25zLnJhdGVMaW1pdD8uY3VzdG9tU3RvcmFnZSkgcmV0dXJuIGN0eC5vcHRpb25zLnJhdGVMaW1pdC5jdXN0b21TdG9yYWdlO1xuXHRjb25zdCBzdG9yYWdlID0gY3R4LnJhdGVMaW1pdC5zdG9yYWdlO1xuXHRpZiAoc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiKSByZXR1cm4ge1xuXHRcdGdldDogYXN5bmMgKGtleSkgPT4ge1xuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGN0eC5vcHRpb25zLnNlY29uZGFyeVN0b3JhZ2U/LmdldChrZXkpO1xuXHRcdFx0cmV0dXJuIGRhdGEgPyBzYWZlSlNPTlBhcnNlKGRhdGEpIDogbnVsbDtcblx0XHR9LFxuXHRcdHNldDogYXN5bmMgKGtleSwgdmFsdWUsIF91cGRhdGUpID0+IHtcblx0XHRcdGNvbnN0IHR0bCA9IHJhdGVMaW1pdFNldHRpbmdzPy53aW5kb3cgPz8gY3R4Lm9wdGlvbnMucmF0ZUxpbWl0Py53aW5kb3cgPz8gMTA7XG5cdFx0XHRhd2FpdCBjdHgub3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlPy5zZXQ/LihrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgdHRsKTtcblx0XHR9XG5cdH07XG5cdGVsc2UgaWYgKHN0b3JhZ2UgPT09IFwibWVtb3J5XCIpIHJldHVybiB7XG5cdFx0YXN5bmMgZ2V0KGtleSkge1xuXHRcdFx0Y29uc3QgZW50cnkgPSBtZW1vcnkuZ2V0KGtleSk7XG5cdFx0XHRpZiAoIWVudHJ5KSByZXR1cm4gbnVsbDtcblx0XHRcdGlmIChEYXRlLm5vdygpID49IGVudHJ5LmV4cGlyZXNBdCkge1xuXHRcdFx0XHRtZW1vcnkuZGVsZXRlKGtleSk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGVudHJ5LmRhdGE7XG5cdFx0fSxcblx0XHRhc3luYyBzZXQoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkge1xuXHRcdFx0Y29uc3QgdHRsID0gcmF0ZUxpbWl0U2V0dGluZ3M/LndpbmRvdyA/PyBjdHgub3B0aW9ucy5yYXRlTGltaXQ/LndpbmRvdyA/PyAxMDtcblx0XHRcdGNvbnN0IGV4cGlyZXNBdCA9IERhdGUubm93KCkgKyB0dGwgKiAxZTM7XG5cdFx0XHRtZW1vcnkuc2V0KGtleSwge1xuXHRcdFx0XHRkYXRhOiB2YWx1ZSxcblx0XHRcdFx0ZXhwaXJlc0F0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cdHJldHVybiBjcmVhdGVEYXRhYmFzZVN0b3JhZ2VXcmFwcGVyKGN0eCk7XG59XG5hc3luYyBmdW5jdGlvbiBvblJlcXVlc3RSYXRlTGltaXQocmVxLCBjdHgpIHtcblx0aWYgKCFjdHgucmF0ZUxpbWl0LmVuYWJsZWQpIHJldHVybjtcblx0Y29uc3QgYmFzZVBhdGggPSBuZXcgVVJMKGN0eC5iYXNlVVJMKS5wYXRobmFtZTtcblx0Y29uc3QgcGF0aCA9IG5vcm1hbGl6ZVBhdGhuYW1lKHJlcS51cmwsIGJhc2VQYXRoKTtcblx0bGV0IGN1cnJlbnRXaW5kb3cgPSBjdHgucmF0ZUxpbWl0LndpbmRvdztcblx0bGV0IGN1cnJlbnRNYXggPSBjdHgucmF0ZUxpbWl0Lm1heDtcblx0Y29uc3QgaXAgPSBnZXRJcChyZXEsIGN0eC5vcHRpb25zKTtcblx0aWYgKCFpcCkgcmV0dXJuO1xuXHRjb25zdCBrZXkgPSBjcmVhdGVSYXRlTGltaXRLZXkoaXAsIHBhdGgpO1xuXHRjb25zdCBzcGVjaWFsUnVsZSA9IGdldERlZmF1bHRTcGVjaWFsUnVsZXMoKS5maW5kKChydWxlKSA9PiBydWxlLnBhdGhNYXRjaGVyKHBhdGgpKTtcblx0aWYgKHNwZWNpYWxSdWxlKSB7XG5cdFx0Y3VycmVudFdpbmRvdyA9IHNwZWNpYWxSdWxlLndpbmRvdztcblx0XHRjdXJyZW50TWF4ID0gc3BlY2lhbFJ1bGUubWF4O1xuXHR9XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIGN0eC5vcHRpb25zLnBsdWdpbnMgfHwgW10pIGlmIChwbHVnaW4ucmF0ZUxpbWl0KSB7XG5cdFx0Y29uc3QgbWF0Y2hlZFJ1bGUgPSBwbHVnaW4ucmF0ZUxpbWl0LmZpbmQoKHJ1bGUpID0+IHJ1bGUucGF0aE1hdGNoZXIocGF0aCkpO1xuXHRcdGlmIChtYXRjaGVkUnVsZSkge1xuXHRcdFx0Y3VycmVudFdpbmRvdyA9IG1hdGNoZWRSdWxlLndpbmRvdztcblx0XHRcdGN1cnJlbnRNYXggPSBtYXRjaGVkUnVsZS5tYXg7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblx0aWYgKGN0eC5yYXRlTGltaXQuY3VzdG9tUnVsZXMpIHtcblx0XHRjb25zdCBfcGF0aCA9IE9iamVjdC5rZXlzKGN0eC5yYXRlTGltaXQuY3VzdG9tUnVsZXMpLmZpbmQoKHApID0+IHtcblx0XHRcdGlmIChwLmluY2x1ZGVzKFwiKlwiKSkgcmV0dXJuIHdpbGRjYXJkTWF0Y2gocCkocGF0aCk7XG5cdFx0XHRyZXR1cm4gcCA9PT0gcGF0aDtcblx0XHR9KTtcblx0XHRpZiAoX3BhdGgpIHtcblx0XHRcdGNvbnN0IGN1c3RvbVJ1bGUgPSBjdHgucmF0ZUxpbWl0LmN1c3RvbVJ1bGVzW19wYXRoXTtcblx0XHRcdGNvbnN0IHJlc29sdmVkID0gdHlwZW9mIGN1c3RvbVJ1bGUgPT09IFwiZnVuY3Rpb25cIiA/IGF3YWl0IGN1c3RvbVJ1bGUocmVxLCB7XG5cdFx0XHRcdHdpbmRvdzogY3VycmVudFdpbmRvdyxcblx0XHRcdFx0bWF4OiBjdXJyZW50TWF4XG5cdFx0XHR9KSA6IGN1c3RvbVJ1bGU7XG5cdFx0XHRpZiAocmVzb2x2ZWQpIHtcblx0XHRcdFx0Y3VycmVudFdpbmRvdyA9IHJlc29sdmVkLndpbmRvdztcblx0XHRcdFx0Y3VycmVudE1heCA9IHJlc29sdmVkLm1heDtcblx0XHRcdH1cblx0XHRcdGlmIChyZXNvbHZlZCA9PT0gZmFsc2UpIHJldHVybjtcblx0XHR9XG5cdH1cblx0Y29uc3Qgc3RvcmFnZSA9IGdldFJhdGVMaW1pdFN0b3JhZ2UoY3R4LCB7IHdpbmRvdzogY3VycmVudFdpbmRvdyB9KTtcblx0Y29uc3QgZGF0YSA9IGF3YWl0IHN0b3JhZ2UuZ2V0KGtleSk7XG5cdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdGlmICghZGF0YSkgYXdhaXQgc3RvcmFnZS5zZXQoa2V5LCB7XG5cdFx0a2V5LFxuXHRcdGNvdW50OiAxLFxuXHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0fSk7XG5cdGVsc2Uge1xuXHRcdGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gZGF0YS5sYXN0UmVxdWVzdDtcblx0XHRpZiAoc2hvdWxkUmF0ZUxpbWl0KGN1cnJlbnRNYXgsIGN1cnJlbnRXaW5kb3csIGRhdGEpKSByZXR1cm4gcmF0ZUxpbWl0UmVzcG9uc2UoZ2V0UmV0cnlBZnRlcihkYXRhLmxhc3RSZXF1ZXN0LCBjdXJyZW50V2luZG93KSk7XG5cdFx0ZWxzZSBpZiAodGltZVNpbmNlTGFzdFJlcXVlc3QgPiBjdXJyZW50V2luZG93ICogMWUzKSBhd2FpdCBzdG9yYWdlLnNldChrZXksIHtcblx0XHRcdC4uLmRhdGEsXG5cdFx0XHRjb3VudDogMSxcblx0XHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0XHR9LCB0cnVlKTtcblx0XHRlbHNlIGF3YWl0IHN0b3JhZ2Uuc2V0KGtleSwge1xuXHRcdFx0Li4uZGF0YSxcblx0XHRcdGNvdW50OiBkYXRhLmNvdW50ICsgMSxcblx0XHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0XHR9LCB0cnVlKTtcblx0fVxufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFNwZWNpYWxSdWxlcygpIHtcblx0cmV0dXJuIFt7XG5cdFx0cGF0aE1hdGNoZXIocGF0aCkge1xuXHRcdFx0cmV0dXJuIHBhdGguc3RhcnRzV2l0aChcIi9zaWduLWluXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcIi9zaWduLXVwXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcIi9jaGFuZ2UtcGFzc3dvcmRcIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL2NoYW5nZS1lbWFpbFwiKTtcblx0XHR9LFxuXHRcdHdpbmRvdzogMTAsXG5cdFx0bWF4OiAzXG5cdH1dO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG9uUmVxdWVzdFJhdGVMaW1pdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/rate-limiter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountInfo: () => (/* binding */ accountInfo),\n/* harmony export */   getAccessToken: () => (/* binding */ getAccessToken),\n/* harmony export */   linkSocialAccount: () => (/* binding */ linkSocialAccount),\n/* harmony export */   listUserAccounts: () => (/* binding */ listUserAccounts),\n/* harmony export */   refreshToken: () => (/* binding */ refreshToken),\n/* harmony export */   unlinkAccount: () => (/* binding */ unlinkAccount)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/account.ts\nconst listUserAccounts = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/list-accounts\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserAccounts\",\n\t\tdescription: \"List all accounts linked to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tproviderId: { type: \"string\" },\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\taccountId: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\tscopes: {\n\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\titems: { type: \"string\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"providerId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\",\n\t\t\t\t\t\t\"accountId\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"scopes\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst accounts = await c.context.internalAdapter.findAccounts(session.user.id);\n\treturn c.json(accounts.map((a) => {\n\t\tconst { scope, ...parsed } = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseAccountOutput)(c.context.options, a);\n\t\treturn {\n\t\t\t...parsed,\n\t\t\tscopes: scope?.split(\",\") || []\n\t\t};\n\t}));\n});\nconst linkSocialAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/link-social\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after the user has signed in\" }).optional(),\n\t\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__.SocialProviderListEnum,\n\t\tidToken: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).optional()\n\t\t}).optional(),\n\t\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional(),\n\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).meta({ description: \"Additional scopes to request from the provider\" }).optional(),\n\t\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to if there is an error during the link process\" }).optional(),\n\t\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\t\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.any()).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Link a social account to the user\",\n\t\toperationId: \"linkSocialAccount\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The authorization URL to redirect the user to\"\n\t\t\t\t\t},\n\t\t\t\t\tredirect: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the user should be redirected to the authorization URL\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: { type: \"boolean\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"redirect\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst linkingUserInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!linkingUserInfo || !linkingUserInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tconst linkingUserId = String(linkingUserInfo.user.id);\n\t\tif (!linkingUserInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tif ((await c.context.internalAdapter.findAccounts(session.user.id)).find((a) => a.providerId === provider.id && a.accountId === linkingUserId)) return c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - linking not allowed\" });\n\t\tif (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - different emails not allowed\" });\n\t\ttry {\n\t\t\tawait c.context.internalAdapter.createAccount({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: linkingUserId,\n\t\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\t\tidToken: token,\n\t\t\t\trefreshToken: c.body.idToken.refreshToken,\n\t\t\t\tscope: c.body.idToken.scopes?.join(\",\")\n\t\t\t});\n\t\t} catch {\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"EXPECTATION_FAILED\", { message: \"Account not linked - unable to create account\" });\n\t\t}\n\t\tif (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) try {\n\t\t\tawait c.context.internalAdapter.updateUser(session.user.id, {\n\t\t\t\tname: linkingUserInfo.user?.name,\n\t\t\t\timage: linkingUserInfo.user?.image\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Could not update user - \" + e.toString());\n\t\t}\n\t\treturn c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t}\n\tconst state = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__.generateState)(c, {\n\t\tuserId: session.user.id,\n\t\temail: session.user.email\n\t}, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate: state.state,\n\t\tcodeVerifier: state.codeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst unlinkAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/unlink-account\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.freshSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Unlink an account\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId } = ctx.body;\n\tconst accounts = await ctx.context.internalAdapter.findAccounts(ctx.context.session.user.id);\n\tif (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT });\n\tconst accountExist = accounts.find((account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId);\n\tif (!accountExist) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ACCOUNT_NOT_FOUND });\n\tawait ctx.context.internalAdapter.deleteAccount(accountExist.id);\n\treturn ctx.json({ status: true });\n});\nconst getAccessToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/get-access-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Get a valid access token, doing a refresh if needed\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"A Valid access token\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body || {};\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw ctx.error(\"UNAUTHORIZED\");\n\tif (!ctx.context.socialProviders.find((p) => p.id === providerId)) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} is not supported.` });\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tlet account = void 0;\n\tif (accountData && providerId === accountData.providerId && (!accountId || accountData.id === accountId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\ttry {\n\t\tlet newTokens = null;\n\t\tconst accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n\t\tif (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n\t\t\tconst refreshToken$1 = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.refreshToken, ctx.context);\n\t\t\tnewTokens = await provider.refreshAccessToken(refreshToken$1);\n\t\t\tconst updatedData = {\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.accessToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.refreshToken, ctx.context),\n\t\t\t\trefreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n\t\t\t};\n\t\t\tlet updatedAccount = null;\n\t\t\tif (account.id) updatedAccount = await ctx.context.internalAdapter.updateAccount(account.id, updatedData);\n\t\t\tif (ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t\t...account,\n\t\t\t\t...updatedAccount ?? updatedData\n\t\t\t});\n\t\t}\n\t\tconst accessTokenExpiresAt = (() => {\n\t\t\tif (newTokens?.accessTokenExpiresAt) {\n\t\t\t\tif (typeof newTokens.accessTokenExpiresAt === \"string\") return new Date(newTokens.accessTokenExpiresAt);\n\t\t\t\treturn newTokens.accessTokenExpiresAt;\n\t\t\t}\n\t\t\tif (account.accessTokenExpiresAt) {\n\t\t\t\tif (typeof account.accessTokenExpiresAt === \"string\") return new Date(account.accessTokenExpiresAt);\n\t\t\t\treturn account.accessTokenExpiresAt;\n\t\t\t}\n\t\t})();\n\t\tconst tokens = {\n\t\t\taccessToken: newTokens?.accessToken ?? await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.accessToken ?? \"\", ctx.context),\n\t\t\taccessTokenExpiresAt,\n\t\t\tscopes: account.scope?.split(\",\") ?? [],\n\t\t\tidToken: newTokens?.idToken ?? account.idToken ?? void 0\n\t\t};\n\t\treturn ctx.json(tokens);\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to get a valid access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst refreshToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/refresh-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Refresh the access token using a refresh token\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Access token refreshed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\trefreshToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body;\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Either userId or session is required` });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\tif (!provider.refreshAccessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} does not support token refreshing.` });\n\tlet account = void 0;\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tif (accountData && (!providerId || providerId === accountData?.providerId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tlet refreshToken$1 = void 0;\n\tif (accountData && providerId === accountData.providerId) refreshToken$1 = accountData.refreshToken ?? void 0;\n\telse refreshToken$1 = account.refreshToken ?? void 0;\n\tif (!refreshToken$1) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Refresh token not found\" });\n\ttry {\n\t\tconst decryptedRefreshToken = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(refreshToken$1, ctx.context);\n\t\tconst tokens = await provider.refreshAccessToken(decryptedRefreshToken);\n\t\tif (account.id) {\n\t\t\tconst updateData = {\n\t\t\t\t...account || {},\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\t\tidToken: tokens.idToken || account.idToken\n\t\t\t};\n\t\t\tawait ctx.context.internalAdapter.updateAccount(account.id, updateData);\n\t\t}\n\t\tif (accountData && providerId === accountData.providerId && ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t...accountData,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || accountData.scope,\n\t\t\tidToken: tokens.idToken || accountData.idToken\n\t\t});\n\t\treturn ctx.json({\n\t\t\taccessToken: tokens.accessToken,\n\t\t\trefreshToken: tokens.refreshToken,\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\tidToken: tokens.idToken || account.idToken,\n\t\t\tproviderId: account.providerId,\n\t\t\taccountId: account.accountId\n\t\t});\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to refresh access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst accountInfoQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.optional(zod__WEBPACK_IMPORTED_MODULE_9__.object({ accountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider given account id for which to get the account info\" }).optional() }));\nconst accountInfo = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/account-info\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the account info provided by the provider\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tname: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\timage: { type: \"string\" },\n\t\t\t\t\t\t\temailVerified: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"id\", \"emailVerified\"]\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\tadditionalProperties: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"data\"],\n\t\t\t\tadditionalProperties: false\n\t\t\t} } }\n\t\t} }\n\t} },\n\tquery: accountInfoQuerySchema\n}, async (ctx) => {\n\tconst providedAccountId = ctx.query?.accountId;\n\tlet account = void 0;\n\tif (!providedAccountId) {\n\t\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\t\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\t\t\tif (accountData) account = accountData;\n\t\t}\n\t} else {\n\t\tconst accountData = await ctx.context.internalAdapter.findAccount(providedAccountId);\n\t\tif (accountData) account = accountData;\n\t}\n\tif (!account || account.userId !== ctx.context.session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === account.providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `Provider account provider is ${account.providerId} but it is not configured` });\n\tconst tokens = await getAccessToken({\n\t\t...ctx,\n\t\tmethod: \"POST\",\n\t\tbody: {\n\t\t\taccountId: account.id,\n\t\t\tproviderId: account.providerId\n\t\t},\n\t\treturnHeaders: false,\n\t\treturnStatus: false\n\t});\n\tif (!tokens.accessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Access token not found\" });\n\tconst info = await provider.getUserInfo({\n\t\t...tokens,\n\t\taccessToken: tokens.accessToken\n\t});\n\treturn ctx.json(info);\n});\n\n//#endregion\n\n//# sourceMappingURL=account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvYWNjb3VudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5RDtBQUM0QjtBQUM5QjtBQUNrQjtBQUNvQjtBQUNsQztBQUNwQjtBQUNkO0FBQ21EO0FBQ2pCOztBQUUzRDtBQUNBLHlCQUF5Qix5RUFBa0I7QUFDM0M7QUFDQSxPQUFPLDJEQUFpQjtBQUN4QixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUIsb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLG1CQUFtQixnQkFBZ0I7QUFDbkMsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUJBQW1CLEVBQUUsa0VBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCwwQkFBMEIseUVBQWtCO0FBQzVDO0FBQ0E7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsZUFBZSx1Q0FBUSxVQUFVLG9FQUFvRTtBQUNyRyxZQUFZLHNGQUFzQjtBQUNsQyxXQUFXLHVDQUFRO0FBQ25CLFVBQVUsdUNBQVE7QUFDbEIsVUFBVSx1Q0FBUTtBQUNsQixnQkFBZ0IsdUNBQVE7QUFDeEIsaUJBQWlCLHVDQUFRO0FBQ3pCLFdBQVcsc0NBQU8sQ0FBQyx1Q0FBUTtBQUMzQixHQUFHO0FBQ0gsaUJBQWlCLHdDQUFTO0FBQzFCLFVBQVUsc0NBQU8sQ0FBQyx1Q0FBUSxXQUFXLCtEQUErRDtBQUNwRyxvQkFBb0IsdUNBQVEsVUFBVSxvRkFBb0Y7QUFDMUgsbUJBQW1CLHdDQUFTLFVBQVUsNEdBQTRHO0FBQ2xKLGtCQUFrQix1Q0FBUSxDQUFDLHVDQUFRLElBQUksb0NBQUs7QUFDNUMsRUFBRTtBQUNGLE9BQU8sMkRBQWlCO0FBQ3hCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZUFBZTtBQUNmLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxvR0FBb0csMkJBQTJCO0FBQy9ILFlBQVksaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsMkJBQTJCO0FBQzFHLGFBQWEsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHlCQUF5QjtBQUN2RjtBQUNBLFVBQVUsZUFBZTtBQUN6QjtBQUNBLGdEQUFnRCwyQkFBMkI7QUFDM0UsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx1REFBdUQsMkJBQTJCO0FBQ2xGLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDBCQUEwQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsMkJBQTJCO0FBQy9FLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLHVCQUF1QjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDhNQUE4TSxpREFBUSxtQkFBbUIscURBQXFEO0FBQzlSLCtJQUErSSxpREFBUSxtQkFBbUIsOERBQThEO0FBQ3hPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0osYUFBYSxpREFBUSx5QkFBeUIsMERBQTBEO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFCQUFxQixnRUFBYTtBQUNsQztBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0IsWUFBWSxZQUFZO0FBQzVEO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCxzQkFBc0IseUVBQWtCO0FBQ3hDO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGNBQWMsdUNBQVE7QUFDdEIsYUFBYSx1Q0FBUTtBQUNyQixFQUFFO0FBQ0YsT0FBTyxnRUFBc0I7QUFDN0IsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsVUFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyx3QkFBd0I7QUFDakM7QUFDQSx5R0FBeUcsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdDQUFnQztBQUM1TDtBQUNBLDhCQUE4QixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ3JHO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELHVCQUF1Qix5RUFBa0I7QUFDekM7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsY0FBYyx1Q0FBUSxVQUFVLHVEQUF1RDtBQUN2RixhQUFhLHVDQUFRLFVBQVUsaUVBQWlFO0FBQ2hHLFVBQVUsdUNBQVEsVUFBVSx3REFBd0Q7QUFDcEYsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCO0FBQ25DLGlCQUFpQixnQkFBZ0I7QUFDakMscUJBQXFCLGdCQUFnQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osVUFBVTtBQUNWO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxnQ0FBZ0M7QUFDekM7QUFDQSx1QkFBdUIsK0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxpREFBUSxrQkFBa0IscUJBQXFCLFlBQVksb0JBQW9CO0FBQzdKLDJCQUEyQiw0RUFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFRLGtCQUFrQiw4QkFBOEI7QUFDakY7QUFDQSwwQkFBMEIsaURBQVEsa0JBQWtCLHFCQUFxQixZQUFZLGFBQWE7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0VBQWlCO0FBQ2pEO0FBQ0E7QUFDQSx1QkFBdUIsK0RBQVk7QUFDbkM7QUFDQSx3QkFBd0IsK0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsNEVBQWdCO0FBQzlFO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxnREFBZ0Qsb0VBQWlCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSxpREFBUTtBQUNwQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNELHFCQUFxQix5RUFBa0I7QUFDdkM7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsY0FBYyx1Q0FBUSxVQUFVLHVEQUF1RDtBQUN2RixhQUFhLHVDQUFRLFVBQVUsaUVBQWlFO0FBQ2hHLFVBQVUsdUNBQVEsVUFBVSx3REFBd0Q7QUFDcEYsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCO0FBQ25DLGlCQUFpQixnQkFBZ0I7QUFDakMscUJBQXFCLGdCQUFnQjtBQUNyQyxzQkFBc0IsZ0JBQWdCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osVUFBVTtBQUNWO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxnQ0FBZ0M7QUFDekM7QUFDQSx1QkFBdUIsK0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsa0JBQWtCLGlEQUFpRDtBQUMzRztBQUNBLDBCQUEwQixpREFBUSxrQkFBa0IscUJBQXFCLFlBQVksYUFBYTtBQUNsRyw2Q0FBNkMsaURBQVEsa0JBQWtCLHFCQUFxQixZQUFZLHFDQUFxQztBQUM3STtBQUNBLDJCQUEyQiw0RUFBZ0I7QUFDM0M7QUFDQTtBQUNBLHlCQUF5QixpREFBUSxrQkFBa0IsOEJBQThCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpREFBUSxrQkFBa0Isb0NBQW9DO0FBQzlGO0FBQ0Esc0NBQXNDLG9FQUFpQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsdUJBQXVCLCtEQUFZO0FBQ25DLHdCQUF3QiwrREFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFIQUFxSCw0RUFBZ0I7QUFDckk7QUFDQSxzQkFBc0IsK0RBQVk7QUFDbEMsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0gsWUFBWSxpREFBUTtBQUNwQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNELCtCQUErQix5Q0FBVSxDQUFDLHVDQUFRLEdBQUcsV0FBVyx1Q0FBUSxVQUFVLGdGQUFnRixjQUFjO0FBQ2hMLG9CQUFvQix5RUFBa0I7QUFDdEM7QUFDQSxPQUFPLDJEQUFpQjtBQUN4QixhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnQkFBZ0I7QUFDN0IsZUFBZSxnQkFBZ0I7QUFDL0IsZ0JBQWdCLGdCQUFnQjtBQUNoQyxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLHdCQUF3QjtBQUN4QixPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRFQUFnQjtBQUM3QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxpREFBUSxrQkFBa0IsOEJBQThCO0FBQ25JO0FBQ0EsMEJBQTBCLGlEQUFRLDRCQUE0Qix5Q0FBeUMsb0JBQW9CLDJCQUEyQjtBQUN0SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRixvQ0FBb0MsaURBQVEsa0JBQWtCLG1DQUFtQztBQUNqRztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxDQUFDOztBQUVEO0FBQ3lHO0FBQ3pHIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxhY2NvdW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZUFjY291bnRPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWNjb3VudENvb2tpZSwgc2V0QWNjb3VudENvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVN0YXRlIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IGRlY3J5cHRPQXV0aFRva2VuLCBzZXRUb2tlblV0aWwgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZnJlc2hTZXNzaW9uTWlkZGxld2FyZSwgZ2V0U2Vzc2lvbkZyb21DdHgsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IFNvY2lhbFByb3ZpZGVyTGlzdEVudW0gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvc29jaWFsLXByb3ZpZGVyc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvYWNjb3VudC50c1xuY29uc3QgbGlzdFVzZXJBY2NvdW50cyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9saXN0LWFjY291bnRzXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJsaXN0VXNlckFjY291bnRzXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgYWNjb3VudHMgbGlua2VkIHRvIHRoZSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRhY2NvdW50SWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0dXNlcklkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHNjb3Blczoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdFx0XHRcdGl0ZW1zOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFwicHJvdmlkZXJJZFwiLFxuXHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcImFjY291bnRJZFwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VySWRcIixcblx0XHRcdFx0XHRcdFwic2NvcGVzXCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGMpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGMuY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBhY2NvdW50cyA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCk7XG5cdHJldHVybiBjLmpzb24oYWNjb3VudHMubWFwKChhKSA9PiB7XG5cdFx0Y29uc3QgeyBzY29wZSwgLi4ucGFyc2VkIH0gPSBwYXJzZUFjY291bnRPdXRwdXQoYy5jb250ZXh0Lm9wdGlvbnMsIGEpO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5wYXJzZWQsXG5cdFx0XHRzY29wZXM6IHNjb3BlPy5zcGxpdChcIixcIikgfHwgW11cblx0XHR9O1xuXHR9KSk7XG59KTtcbmNvbnN0IGxpbmtTb2NpYWxBY2NvdW50ID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2xpbmstc29jaWFsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciB0aGUgdXNlciBoYXMgc2lnbmVkIGluXCIgfSkub3B0aW9uYWwoKSxcblx0XHRwcm92aWRlcjogU29jaWFsUHJvdmlkZXJMaXN0RW51bSxcblx0XHRpZFRva2VuOiB6Lm9iamVjdCh7XG5cdFx0XHR0b2tlbjogei5zdHJpbmcoKSxcblx0XHRcdG5vbmNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRhY2Nlc3NUb2tlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKVxuXHRcdH0pLm9wdGlvbmFsKCksXG5cdFx0cmVxdWVzdFNpZ25VcDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcblx0XHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFkZGl0aW9uYWwgc2NvcGVzIHRvIHJlcXVlc3QgZnJvbSB0aGUgcHJvdmlkZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGVycm9yQ2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gaWYgdGhlcmUgaXMgYW4gZXJyb3IgZHVyaW5nIHRoZSBsaW5rIHByb2Nlc3NcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGRpc2FibGVSZWRpcmVjdDogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgYXV0b21hdGljIHJlZGlyZWN0aW9uIHRvIHRoZSBwcm92aWRlci4gVXNlZnVsIGZvciBoYW5kbGluZyB0aGUgcmVkaXJlY3Rpb24geW91cnNlbGZcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGFkZGl0aW9uYWxEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJMaW5rIGEgc29jaWFsIGFjY291bnQgdG8gdGhlIHVzZXJcIixcblx0XHRvcGVyYXRpb25JZDogXCJsaW5rU29jaWFsQWNjb3VudFwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXJsOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGF1dGhvcml6YXRpb24gVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlZGlyZWN0OiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgdXNlciBzaG91bGQgYmUgcmVkaXJlY3RlZCB0byB0aGUgYXV0aG9yaXphdGlvbiBVUkxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInJlZGlyZWN0XCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjKSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjLmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3QgcHJvdmlkZXIgPSBjLmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IGMuYm9keS5wcm92aWRlcik7XG5cdGlmICghcHJvdmlkZXIpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUHJvdmlkZXIgbm90IGZvdW5kLiBNYWtlIHN1cmUgdG8gYWRkIHRoZSBwcm92aWRlciBpbiB5b3VyIGF1dGggY29uZmlnXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBST1ZJREVSX05PVF9GT1VORCB9KTtcblx0fVxuXHRpZiAoYy5ib2R5LmlkVG9rZW4pIHtcblx0XHRpZiAoIXByb3ZpZGVyLnZlcmlmeUlkVG9rZW4pIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQcm92aWRlciBkb2VzIG5vdCBzdXBwb3J0IGlkIHRva2VuIHZlcmlmaWNhdGlvblwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklEX1RPS0VOX05PVF9TVVBQT1JURUQgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IHsgdG9rZW4sIG5vbmNlIH0gPSBjLmJvZHkuaWRUb2tlbjtcblx0XHRpZiAoIWF3YWl0IHByb3ZpZGVyLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKSkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkludmFsaWQgaWQgdG9rZW5cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1RPS0VOIH0pO1xuXHRcdH1cblx0XHRjb25zdCBsaW5raW5nVXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0XHRpZFRva2VuOiB0b2tlbixcblx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcblx0XHRcdHJlZnJlc2hUb2tlbjogYy5ib2R5LmlkVG9rZW4ucmVmcmVzaFRva2VuXG5cdFx0fSk7XG5cdFx0aWYgKCFsaW5raW5nVXNlckluZm8gfHwgIWxpbmtpbmdVc2VySW5mbz8udXNlcikge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgdXNlciBpbmZvXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9VU0VSX0lORk8gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IGxpbmtpbmdVc2VySWQgPSBTdHJpbmcobGlua2luZ1VzZXJJbmZvLnVzZXIuaWQpO1xuXHRcdGlmICghbGlua2luZ1VzZXJJbmZvLnVzZXIuZW1haWwpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVc2VyIGVtYWlsIG5vdCBmb3VuZFwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfRU1BSUxfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRpZiAoKGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCkpLmZpbmQoKGEpID0+IGEucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXIuaWQgJiYgYS5hY2NvdW50SWQgPT09IGxpbmtpbmdVc2VySWQpKSByZXR1cm4gYy5qc29uKHtcblx0XHRcdHVybDogXCJcIixcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHJlZGlyZWN0OiBmYWxzZVxuXHRcdH0pO1xuXHRcdGlmICghKGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzKT8uaW5jbHVkZXMocHJvdmlkZXIuaWQpICYmICFsaW5raW5nVXNlckluZm8udXNlci5lbWFpbFZlcmlmaWVkIHx8IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBsaW5rZWQgLSBsaW5raW5nIG5vdCBhbGxvd2VkXCIgfSk7XG5cdFx0aWYgKGxpbmtpbmdVc2VySW5mby51c2VyLmVtYWlsICE9PSBzZXNzaW9uLnVzZXIuZW1haWwgJiYgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93RGlmZmVyZW50RW1haWxzICE9PSB0cnVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGxpbmtlZCAtIGRpZmZlcmVudCBlbWFpbHMgbm90IGFsbG93ZWRcIiB9KTtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHRcdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRcdHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IGxpbmtpbmdVc2VySWQsXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcblx0XHRcdFx0aWRUb2tlbjogdG9rZW4sXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYy5ib2R5LmlkVG9rZW4ucmVmcmVzaFRva2VuLFxuXHRcdFx0XHRzY29wZTogYy5ib2R5LmlkVG9rZW4uc2NvcGVzPy5qb2luKFwiLFwiKVxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJFWFBFQ1RBVElPTl9GQUlMRURcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGxpbmtlZCAtIHVuYWJsZSB0byBjcmVhdGUgYWNjb3VudFwiIH0pO1xuXHRcdH1cblx0XHRpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnVwZGF0ZVVzZXJJbmZvT25MaW5rID09PSB0cnVlKSB0cnkge1xuXHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKHNlc3Npb24udXNlci5pZCwge1xuXHRcdFx0XHRuYW1lOiBsaW5raW5nVXNlckluZm8udXNlcj8ubmFtZSxcblx0XHRcdFx0aW1hZ2U6IGxpbmtpbmdVc2VySW5mby51c2VyPy5pbWFnZVxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiQ291bGQgbm90IHVwZGF0ZSB1c2VyIC0gXCIgKyBlLnRvU3RyaW5nKCkpO1xuXHRcdH1cblx0XHRyZXR1cm4gYy5qc29uKHtcblx0XHRcdHVybDogXCJcIixcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHJlZGlyZWN0OiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IHN0YXRlID0gYXdhaXQgZ2VuZXJhdGVTdGF0ZShjLCB7XG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0ZW1haWw6IHNlc3Npb24udXNlci5lbWFpbFxuXHR9LCBjLmJvZHkuYWRkaXRpb25hbERhdGEpO1xuXHRjb25zdCB1cmwgPSBhd2FpdCBwcm92aWRlci5jcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRzdGF0ZTogc3RhdGUuc3RhdGUsXG5cdFx0Y29kZVZlcmlmaWVyOiBzdGF0ZS5jb2RlVmVyaWZpZXIsXG5cdFx0cmVkaXJlY3RVUkk6IGAke2MuY29udGV4dC5iYXNlVVJMfS9jYWxsYmFjay8ke3Byb3ZpZGVyLmlkfWAsXG5cdFx0c2NvcGVzOiBjLmJvZHkuc2NvcGVzXG5cdH0pO1xuXHRpZiAoIWMuYm9keS5kaXNhYmxlUmVkaXJlY3QpIGMuc2V0SGVhZGVyKFwiTG9jYXRpb25cIiwgdXJsLnRvU3RyaW5nKCkpO1xuXHRyZXR1cm4gYy5qc29uKHtcblx0XHR1cmw6IHVybC50b1N0cmluZygpLFxuXHRcdHJlZGlyZWN0OiAhYy5ib2R5LmRpc2FibGVSZWRpcmVjdFxuXHR9KTtcbn0pO1xuY29uc3QgdW5saW5rQWNjb3VudCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi91bmxpbmstYWNjb3VudFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRwcm92aWRlcklkOiB6LnN0cmluZygpLFxuXHRcdGFjY291bnRJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtmcmVzaFNlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlVubGluayBhbiBhY2NvdW50XCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkIH0gPSBjdHguYm9keTtcblx0Y29uc3QgYWNjb3VudHMgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCk7XG5cdGlmIChhY2NvdW50cy5sZW5ndGggPT09IDEgJiYgIWN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93VW5saW5raW5nQWxsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX1VOTElOS19MQVNUX0FDQ09VTlQgfSk7XG5cdGNvbnN0IGFjY291bnRFeGlzdCA9IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnRJZCA/IGFjY291bnQuYWNjb3VudElkID09PSBhY2NvdW50SWQgJiYgYWNjb3VudC5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjb3VudC5wcm92aWRlcklkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFhY2NvdW50RXhpc3QpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5BQ0NPVU5UX05PVF9GT1VORCB9KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZUFjY291bnQoYWNjb3VudEV4aXN0LmlkKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5jb25zdCBnZXRBY2Nlc3NUb2tlbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9nZXQtYWNjZXNzLXRva2VuXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdHByb3ZpZGVySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBJRCBmb3IgdGhlIE9BdXRoIHByb3ZpZGVyXCIgfSksXG5cdFx0YWNjb3VudElkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgYWNjb3VudCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlZnJlc2ggdG9rZW5cIiB9KS5vcHRpb25hbCgpLFxuXHRcdHVzZXJJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBhY2NvdW50XCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkdldCBhIHZhbGlkIGFjY2VzcyB0b2tlbiwgZG9pbmcgYSByZWZyZXNoIGlmIG5lZWRlZFwiLFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0MjAwOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkEgVmFsaWQgYWNjZXNzIHRva2VuXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR0b2tlblR5cGU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0aWRUb2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0NDAwOiB7IGRlc2NyaXB0aW9uOiBcIkludmFsaWQgcmVmcmVzaCB0b2tlbiBvciBwcm92aWRlciBjb25maWd1cmF0aW9uXCIgfVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkLCB1c2VySWQgfSA9IGN0eC5ib2R5IHx8IHt9O1xuXHRjb25zdCByZXEgPSBjdHgucmVxdWVzdDtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmIChyZXEgJiYgIXNlc3Npb24pIHRocm93IGN0eC5lcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3QgcmVzb2x2ZWRVc2VySWQgPSBzZXNzaW9uPy51c2VyPy5pZCB8fCB1c2VySWQ7XG5cdGlmICghcmVzb2x2ZWRVc2VySWQpIHRocm93IGN0eC5lcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0aWYgKCFjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcHJvdmlkZXJJZCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gaXMgbm90IHN1cHBvcnRlZC5gIH0pO1xuXHRjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IGdldEFjY291bnRDb29raWUoY3R4KTtcblx0bGV0IGFjY291bnQgPSB2b2lkIDA7XG5cdGlmIChhY2NvdW50RGF0YSAmJiBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YS5wcm92aWRlcklkICYmICghYWNjb3VudElkIHx8IGFjY291bnREYXRhLmlkID09PSBhY2NvdW50SWQpKSBhY2NvdW50ID0gYWNjb3VudERhdGE7XG5cdGVsc2UgYWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHJlc29sdmVkVXNlcklkKSkuZmluZCgoYWNjKSA9PiBhY2NvdW50SWQgPyBhY2MuaWQgPT09IGFjY291bnRJZCAmJiBhY2MucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXJJZCA6IGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFhY2NvdW50KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgcHJvdmlkZXIgPSBjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcHJvdmlkZXJJZCk7XG5cdGlmICghcHJvdmlkZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gbm90IGZvdW5kLmAgfSk7XG5cdHRyeSB7XG5cdFx0bGV0IG5ld1Rva2VucyA9IG51bGw7XG5cdFx0Y29uc3QgYWNjZXNzVG9rZW5FeHBpcmVkID0gYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCAmJiBuZXcgRGF0ZShhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KS5nZXRUaW1lKCkgLSBEYXRlLm5vdygpIDwgNWUzO1xuXHRcdGlmIChhY2NvdW50LnJlZnJlc2hUb2tlbiAmJiBhY2Nlc3NUb2tlbkV4cGlyZWQgJiYgcHJvdmlkZXIucmVmcmVzaEFjY2Vzc1Rva2VuKSB7XG5cdFx0XHRjb25zdCByZWZyZXNoVG9rZW4kMSA9IGF3YWl0IGRlY3J5cHRPQXV0aFRva2VuKGFjY291bnQucmVmcmVzaFRva2VuLCBjdHguY29udGV4dCk7XG5cdFx0XHRuZXdUb2tlbnMgPSBhd2FpdCBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuJDEpO1xuXHRcdFx0Y29uc3QgdXBkYXRlZERhdGEgPSB7XG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwobmV3VG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBuZXdUb2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKG5ld1Rva2Vucy5yZWZyZXNoVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiBuZXdUb2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0XG5cdFx0XHR9O1xuXHRcdFx0bGV0IHVwZGF0ZWRBY2NvdW50ID0gbnVsbDtcblx0XHRcdGlmIChhY2NvdW50LmlkKSB1cGRhdGVkQWNjb3VudCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGFjY291bnQuaWQsIHVwZGF0ZWREYXRhKTtcblx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkgYXdhaXQgc2V0QWNjb3VudENvb2tpZShjdHgsIHtcblx0XHRcdFx0Li4uYWNjb3VudCxcblx0XHRcdFx0Li4udXBkYXRlZEFjY291bnQgPz8gdXBkYXRlZERhdGFcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZXNBdCA9ICgoKSA9PiB7XG5cdFx0XHRpZiAobmV3VG9rZW5zPy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBEYXRlKG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCk7XG5cdFx0XHRcdHJldHVybiBuZXdUb2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQ7XG5cdFx0XHR9XG5cdFx0XHRpZiAoYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQgPT09IFwic3RyaW5nXCIpIHJldHVybiBuZXcgRGF0ZShhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KTtcblx0XHRcdFx0cmV0dXJuIGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQ7XG5cdFx0XHR9XG5cdFx0fSkoKTtcblx0XHRjb25zdCB0b2tlbnMgPSB7XG5cdFx0XHRhY2Nlc3NUb2tlbjogbmV3VG9rZW5zPy5hY2Nlc3NUb2tlbiA/PyBhd2FpdCBkZWNyeXB0T0F1dGhUb2tlbihhY2NvdW50LmFjY2Vzc1Rva2VuID8/IFwiXCIsIGN0eC5jb250ZXh0KSxcblx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0c2NvcGVzOiBhY2NvdW50LnNjb3BlPy5zcGxpdChcIixcIikgPz8gW10sXG5cdFx0XHRpZFRva2VuOiBuZXdUb2tlbnM/LmlkVG9rZW4gPz8gYWNjb3VudC5pZFRva2VuID8/IHZvaWQgMFxuXHRcdH07XG5cdFx0cmV0dXJuIGN0eC5qc29uKHRva2Vucyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IGEgdmFsaWQgYWNjZXNzIHRva2VuXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KTtcblx0fVxufSk7XG5jb25zdCByZWZyZXNoVG9rZW4gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmVmcmVzaC10b2tlblwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRwcm92aWRlcklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcHJvdmlkZXIgSUQgZm9yIHRoZSBPQXV0aCBwcm92aWRlclwiIH0pLFxuXHRcdGFjY291bnRJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGFjY291bnQgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWZyZXNoIHRva2VuXCIgfSkub3B0aW9uYWwoKSxcblx0XHR1c2VySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWNjb3VudFwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgYSByZWZyZXNoIHRva2VuXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHQyMDA6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHRva2VuVHlwZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRpZFRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSxcblx0XHRcdDQwMDogeyBkZXNjcmlwdGlvbjogXCJJbnZhbGlkIHJlZnJlc2ggdG9rZW4gb3IgcHJvdmlkZXIgY29uZmlndXJhdGlvblwiIH1cblx0XHR9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IHByb3ZpZGVySWQsIGFjY291bnRJZCwgdXNlcklkIH0gPSBjdHguYm9keTtcblx0Y29uc3QgcmVxID0gY3R4LnJlcXVlc3Q7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAocmVxICYmICFzZXNzaW9uKSB0aHJvdyBjdHguZXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdGNvbnN0IHJlc29sdmVkVXNlcklkID0gc2Vzc2lvbj8udXNlcj8uaWQgfHwgdXNlcklkO1xuXHRpZiAoIXJlc29sdmVkVXNlcklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGBFaXRoZXIgdXNlcklkIG9yIHNlc3Npb24gaXMgcmVxdWlyZWRgIH0pO1xuXHRjb25zdCBwcm92aWRlciA9IGN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFwcm92aWRlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBub3QgZm91bmQuYCB9KTtcblx0aWYgKCFwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gZG9lcyBub3Qgc3VwcG9ydCB0b2tlbiByZWZyZXNoaW5nLmAgfSk7XG5cdGxldCBhY2NvdW50ID0gdm9pZCAwO1xuXHRjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IGdldEFjY291bnRDb29raWUoY3R4KTtcblx0aWYgKGFjY291bnREYXRhICYmICghcHJvdmlkZXJJZCB8fCBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YT8ucHJvdmlkZXJJZCkpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0ZWxzZSBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMocmVzb2x2ZWRVc2VySWQpKS5maW5kKChhY2MpID0+IGFjY291bnRJZCA/IGFjYy5pZCA9PT0gYWNjb3VudElkICYmIGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIWFjY291bnQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xuXHRsZXQgcmVmcmVzaFRva2VuJDEgPSB2b2lkIDA7XG5cdGlmIChhY2NvdW50RGF0YSAmJiBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YS5wcm92aWRlcklkKSByZWZyZXNoVG9rZW4kMSA9IGFjY291bnREYXRhLnJlZnJlc2hUb2tlbiA/PyB2b2lkIDA7XG5cdGVsc2UgcmVmcmVzaFRva2VuJDEgPSBhY2NvdW50LnJlZnJlc2hUb2tlbiA/PyB2b2lkIDA7XG5cdGlmICghcmVmcmVzaFRva2VuJDEpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJSZWZyZXNoIHRva2VuIG5vdCBmb3VuZFwiIH0pO1xuXHR0cnkge1xuXHRcdGNvbnN0IGRlY3J5cHRlZFJlZnJlc2hUb2tlbiA9IGF3YWl0IGRlY3J5cHRPQXV0aFRva2VuKHJlZnJlc2hUb2tlbiQxLCBjdHguY29udGV4dCk7XG5cdFx0Y29uc3QgdG9rZW5zID0gYXdhaXQgcHJvdmlkZXIucmVmcmVzaEFjY2Vzc1Rva2VuKGRlY3J5cHRlZFJlZnJlc2hUb2tlbik7XG5cdFx0aWYgKGFjY291bnQuaWQpIHtcblx0XHRcdGNvbnN0IHVwZGF0ZURhdGEgPSB7XG5cdFx0XHRcdC4uLmFjY291bnQgfHwge30sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5yZWZyZXNoVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIikgfHwgYWNjb3VudC5zY29wZSxcblx0XHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4gfHwgYWNjb3VudC5pZFRva2VuXG5cdFx0XHR9O1xuXHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwgdXBkYXRlRGF0YSk7XG5cdFx0fVxuXHRcdGlmIChhY2NvdW50RGF0YSAmJiBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YS5wcm92aWRlcklkICYmIGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGN0eCwge1xuXHRcdFx0Li4uYWNjb3VudERhdGEsXG5cdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogdG9rZW5zLnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKSB8fCBhY2NvdW50RGF0YS5zY29wZSxcblx0XHRcdGlkVG9rZW46IHRva2Vucy5pZFRva2VuIHx8IGFjY291bnREYXRhLmlkVG9rZW5cblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0YWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3NUb2tlbixcblx0XHRcdHJlZnJlc2hUb2tlbjogdG9rZW5zLnJlZnJlc2hUb2tlbixcblx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB0b2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIikgfHwgYWNjb3VudC5zY29wZSxcblx0XHRcdGlkVG9rZW46IHRva2Vucy5pZFRva2VuIHx8IGFjY291bnQuaWRUb2tlbixcblx0XHRcdHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJJZCxcblx0XHRcdGFjY291bnRJZDogYWNjb3VudC5hY2NvdW50SWRcblx0XHR9KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byByZWZyZXNoIGFjY2VzcyB0b2tlblwiLFxuXHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0fSk7XG5cdH1cbn0pO1xuY29uc3QgYWNjb3VudEluZm9RdWVyeVNjaGVtYSA9IHoub3B0aW9uYWwoei5vYmplY3QoeyBhY2NvdW50SWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBnaXZlbiBhY2NvdW50IGlkIGZvciB3aGljaCB0byBnZXQgdGhlIGFjY291bnQgaW5mb1wiIH0pLm9wdGlvbmFsKCkgfSkpO1xuY29uc3QgYWNjb3VudEluZm8gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYWNjb3VudC1pbmZvXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgdGhlIGFjY291bnQgaW5mbyBwcm92aWRlZCBieSB0aGUgcHJvdmlkZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0bmFtZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGVtYWlsOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0aW1hZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB7IHR5cGU6IFwiYm9vbGVhblwiIH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1wiaWRcIiwgXCJlbWFpbFZlcmlmaWVkXCJdXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge30sXG5cdFx0XHRcdFx0XHRhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIiwgXCJkYXRhXCJdLFxuXHRcdFx0XHRhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2Vcblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfSxcblx0cXVlcnk6IGFjY291bnRJbmZvUXVlcnlTY2hlbWFcbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgcHJvdmlkZWRBY2NvdW50SWQgPSBjdHgucXVlcnk/LmFjY291bnRJZDtcblx0bGV0IGFjY291bnQgPSB2b2lkIDA7XG5cdGlmICghcHJvdmlkZWRBY2NvdW50SWQpIHtcblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIHtcblx0XHRcdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRcdFx0aWYgKGFjY291bnREYXRhKSBhY2NvdW50ID0gYWNjb3VudERhdGE7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50KHByb3ZpZGVkQWNjb3VudElkKTtcblx0XHRpZiAoYWNjb3VudERhdGEpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0fVxuXHRpZiAoIWFjY291bnQgfHwgYWNjb3VudC51c2VySWQgIT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XG5cdGNvbnN0IHByb3ZpZGVyID0gY3R4LmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IGFjY291bnQucHJvdmlkZXJJZCk7XG5cdGlmICghcHJvdmlkZXIpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IGBQcm92aWRlciBhY2NvdW50IHByb3ZpZGVyIGlzICR7YWNjb3VudC5wcm92aWRlcklkfSBidXQgaXQgaXMgbm90IGNvbmZpZ3VyZWRgIH0pO1xuXHRjb25zdCB0b2tlbnMgPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbih7XG5cdFx0Li4uY3R4LFxuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keToge1xuXHRcdFx0YWNjb3VudElkOiBhY2NvdW50LmlkLFxuXHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkXG5cdFx0fSxcblx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZSxcblx0XHRyZXR1cm5TdGF0dXM6IGZhbHNlXG5cdH0pO1xuXHRpZiAoIXRva2Vucy5hY2Nlc3NUb2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkFjY2VzcyB0b2tlbiBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgaW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcblx0XHQuLi50b2tlbnMsXG5cdFx0YWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3NUb2tlblxuXHR9KTtcblx0cmV0dXJuIGN0eC5qc29uKGluZm8pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYWNjb3VudEluZm8sIGdldEFjY2Vzc1Rva2VuLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFVzZXJBY2NvdW50cywgcmVmcmVzaFRva2VuLCB1bmxpbmtBY2NvdW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2NvdW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callbackOAuth: () => (/* binding */ callbackOAuth)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/callback.ts\nconst schema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tdevice_id: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tstate: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tuser: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()\n});\nconst callbackOAuth = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/callback/:id\", {\n\tmethod: [\"GET\", \"POST\"],\n\toperationId: \"handleOAuthCallback\",\n\tbody: schema.optional(),\n\tquery: schema.optional(),\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__.HIDE_METADATA,\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t}\n}, async (c) => {\n\tlet queryOrBody;\n\tconst defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tif (c.method === \"POST\") {\n\t\tconst postData = c.body ? schema.parse(c.body) : {};\n\t\tconst queryData = c.query ? schema.parse(c.query) : {};\n\t\tconst mergedData = schema.parse({\n\t\t\t...postData,\n\t\t\t...queryData\n\t\t});\n\t\tconst params = new URLSearchParams();\n\t\tfor (const [key, value] of Object.entries(mergedData)) if (value !== void 0 && value !== null) params.set(key, String(value));\n\t\tconst redirectURL = `${c.context.baseURL}/callback/${c.params.id}?${params.toString()}`;\n\t\tthrow c.redirect(redirectURL);\n\t}\n\ttry {\n\t\tif (c.method === \"GET\") queryOrBody = schema.parse(c.query);\n\t\telse if (c.method === \"POST\") queryOrBody = schema.parse(c.body);\n\t\telse throw new Error(\"Unsupported method\");\n\t} catch (e) {\n\t\tc.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n\t\tthrow c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n\t}\n\tconst { code, error, state, error_description, device_id, user: userData } = queryOrBody;\n\tif (!state) {\n\t\tc.context.logger.error(\"State not found\", error);\n\t\tconst url = `${defaultErrorURL}${defaultErrorURL.includes(\"?\") ? \"&\" : \"?\"}state=state_not_found`;\n\t\tthrow c.redirect(url);\n\t}\n\tconst { codeVerifier, callbackURL, link, errorURL, newUserURL, requestSignUp } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState)(c);\n\tfunction redirectOnError(error$1, description) {\n\t\tconst baseURL = errorURL ?? defaultErrorURL;\n\t\tconst params = new URLSearchParams({ error: error$1 });\n\t\tif (description) params.set(\"error_description\", description);\n\t\tconst url = `${baseURL}${baseURL.includes(\"?\") ? \"&\" : \"?\"}${params.toString()}`;\n\t\tthrow c.redirect(url);\n\t}\n\tif (error) redirectOnError(error, error_description);\n\tif (!code) {\n\t\tc.context.logger.error(\"Code not found\");\n\t\tthrow redirectOnError(\"no_code\");\n\t}\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.params.id);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Oauth provider with id\", c.params.id, \"not found\");\n\t\tthrow redirectOnError(\"oauth_provider_not_found\");\n\t}\n\tlet tokens;\n\ttry {\n\t\ttokens = await provider.validateAuthorizationCode({\n\t\t\tcode,\n\t\t\tcodeVerifier,\n\t\t\tdeviceId: device_id,\n\t\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`\n\t\t});\n\t} catch (e) {\n\t\tc.context.logger.error(\"\", e);\n\t\tthrow redirectOnError(\"invalid_code\");\n\t}\n\tif (!tokens) throw redirectOnError(\"invalid_code\");\n\tconst parsedUserData = userData ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(userData) : null;\n\tconst userInfo = await provider.getUserInfo({\n\t\t...tokens,\n\t\tuser: parsedUserData ?? void 0\n\t}).then((res) => res?.user);\n\tif (!userInfo) {\n\t\tc.context.logger.error(\"Unable to get user info\");\n\t\treturn redirectOnError(\"unable_to_get_user_info\");\n\t}\n\tif (!callbackURL) {\n\t\tc.context.logger.error(\"No callback URL found\");\n\t\tthrow redirectOnError(\"no_callback_url\");\n\t}\n\tif (link) {\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\tc.context.logger.error(\"Unable to link account - untrusted provider\");\n\t\t\treturn redirectOnError(\"unable_to_link_account\");\n\t\t}\n\t\tif (userInfo.email !== link.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) return redirectOnError(\"email_doesn't_match\");\n\t\tconst existingAccount = await c.context.internalAdapter.findAccount(String(userInfo.id));\n\t\tif (existingAccount) {\n\t\t\tif (existingAccount.userId.toString() !== link.userId.toString()) return redirectOnError(\"account_already_linked_to_different_user\");\n\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\tawait c.context.internalAdapter.updateAccount(existingAccount.id, updateData);\n\t\t} else if (!await c.context.internalAdapter.createAccount({\n\t\t\tuserId: link.userId,\n\t\t\tproviderId: provider.id,\n\t\t\taccountId: String(userInfo.id),\n\t\t\t...tokens,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t})) return redirectOnError(\"unable_to_link_account\");\n\t\tlet toRedirectTo$1;\n\t\ttry {\n\t\t\ttoRedirectTo$1 = callbackURL.toString();\n\t\t} catch {\n\t\t\ttoRedirectTo$1 = callbackURL;\n\t\t}\n\t\tthrow c.redirect(toRedirectTo$1);\n\t}\n\tif (!userInfo.email) {\n\t\tc.context.logger.error(\"Provider did not return email. This could be due to misconfiguration in the provider settings.\");\n\t\treturn redirectOnError(\"email_not_found\");\n\t}\n\tconst accountData = {\n\t\tproviderId: provider.id,\n\t\taccountId: String(userInfo.id),\n\t\t...tokens,\n\t\tscope: tokens.scopes?.join(\",\")\n\t};\n\tconst result = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__.handleOAuthUserInfo)(c, {\n\t\tuserInfo: {\n\t\t\t...userInfo,\n\t\t\tid: String(userInfo.id),\n\t\t\temail: userInfo.email,\n\t\t\tname: userInfo.name || userInfo.email\n\t\t},\n\t\taccount: accountData,\n\t\tcallbackURL,\n\t\tdisableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n\t\toverrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n\t});\n\tif (result.error) {\n\t\tc.context.logger.error(result.error.split(\" \").join(\"_\"));\n\t\treturn redirectOnError(result.error.split(\" \").join(\"_\"));\n\t}\n\tconst { session, user } = result.data;\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.setSessionCookie)(c, {\n\t\tsession,\n\t\tuser\n\t});\n\tlet toRedirectTo;\n\ttry {\n\t\ttoRedirectTo = (result.isRegister ? newUserURL || callbackURL : callbackURL).toString();\n\t} catch {\n\t\ttoRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n\t}\n\tthrow c.redirect(toRedirectTo);\n});\n\n//#endregion\n\n//# sourceMappingURL=callback.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvY2FsbGJhY2subWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNQO0FBQ0U7QUFDYztBQUNOO0FBQ047QUFDL0I7QUFDa0M7O0FBRTNEO0FBQ0EsZUFBZSx1Q0FBUTtBQUN2QixPQUFPLHVDQUFRO0FBQ2YsUUFBUSx1Q0FBUTtBQUNoQixZQUFZLHVDQUFRO0FBQ3BCLG9CQUFvQix1Q0FBUTtBQUM1QixRQUFRLHVDQUFRO0FBQ2hCLE9BQU8sdUNBQVE7QUFDZixDQUFDO0FBQ0Qsc0JBQXNCLHlFQUFrQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxtRUFBYTtBQUNsQjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esc0VBQXNFLGtCQUFrQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0IsWUFBWSxZQUFZLEdBQUcsa0JBQWtCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHNCQUFzQixnQkFBZ0I7QUFDdEM7QUFDQSxTQUFTLG1FQUFtRTtBQUM1RTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQixFQUFFLDBDQUEwQztBQUM3RTtBQUNBO0FBQ0EsU0FBUyx1RUFBdUUsUUFBUSw2REFBVTtBQUNsRztBQUNBO0FBQ0EsdUNBQXVDLGdCQUFnQjtBQUN2RDtBQUNBLGlCQUFpQixRQUFRLEVBQUUsa0NBQWtDLEVBQUUsa0JBQWtCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0IsWUFBWSxZQUFZO0FBQzdELEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0VBQWE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrREFBWTtBQUNuQyx3QkFBd0IsK0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQVk7QUFDbEMsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZFQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0I7QUFDekIsT0FBTyxvRUFBZ0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcY2FsbGJhY2subWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU3RhdGUgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgc2V0VG9rZW5VdGlsIH0gZnJvbSBcIi4uLy4uL29hdXRoMi91dGlscy5tanNcIjtcbmltcG9ydCB7IGhhbmRsZU9BdXRoVXNlckluZm8gfSBmcm9tIFwiLi4vLi4vb2F1dGgyL2xpbmstYWNjb3VudC5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvY2FsbGJhY2sudHNcbmNvbnN0IHNjaGVtYSA9IHoub2JqZWN0KHtcblx0Y29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRlcnJvcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRkZXZpY2VfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZXJyb3JfZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0c3RhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0dXNlcjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IGNhbGxiYWNrT0F1dGggPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvY2FsbGJhY2svOmlkXCIsIHtcblx0bWV0aG9kOiBbXCJHRVRcIiwgXCJQT1NUXCJdLFxuXHRvcGVyYXRpb25JZDogXCJoYW5kbGVPQXV0aENhbGxiYWNrXCIsXG5cdGJvZHk6IHNjaGVtYS5vcHRpb25hbCgpLFxuXHRxdWVyeTogc2NoZW1hLm9wdGlvbmFsKCksXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRhbGxvd2VkTWVkaWFUeXBlczogW1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsIFwiYXBwbGljYXRpb24vanNvblwiXVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRsZXQgcXVlcnlPckJvZHk7XG5cdGNvbnN0IGRlZmF1bHRFcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdGlmIChjLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcblx0XHRjb25zdCBwb3N0RGF0YSA9IGMuYm9keSA/IHNjaGVtYS5wYXJzZShjLmJvZHkpIDoge307XG5cdFx0Y29uc3QgcXVlcnlEYXRhID0gYy5xdWVyeSA/IHNjaGVtYS5wYXJzZShjLnF1ZXJ5KSA6IHt9O1xuXHRcdGNvbnN0IG1lcmdlZERhdGEgPSBzY2hlbWEucGFyc2Uoe1xuXHRcdFx0Li4ucG9zdERhdGEsXG5cdFx0XHQuLi5xdWVyeURhdGFcblx0XHR9KTtcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobWVyZ2VkRGF0YSkpIGlmICh2YWx1ZSAhPT0gdm9pZCAwICYmIHZhbHVlICE9PSBudWxsKSBwYXJhbXMuc2V0KGtleSwgU3RyaW5nKHZhbHVlKSk7XG5cdFx0Y29uc3QgcmVkaXJlY3RVUkwgPSBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtjLnBhcmFtcy5pZH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuXHRcdHRocm93IGMucmVkaXJlY3QocmVkaXJlY3RVUkwpO1xuXHR9XG5cdHRyeSB7XG5cdFx0aWYgKGMubWV0aG9kID09PSBcIkdFVFwiKSBxdWVyeU9yQm9keSA9IHNjaGVtYS5wYXJzZShjLnF1ZXJ5KTtcblx0XHRlbHNlIGlmIChjLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHF1ZXJ5T3JCb2R5ID0gc2NoZW1hLnBhcnNlKGMuYm9keSk7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBtZXRob2RcIik7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSU5WQUxJRF9DQUxMQkFDS19SRVFVRVNUXCIsIGUpO1xuXHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZGVmYXVsdEVycm9yVVJMfT9lcnJvcj1pbnZhbGlkX2NhbGxiYWNrX3JlcXVlc3RgKTtcblx0fVxuXHRjb25zdCB7IGNvZGUsIGVycm9yLCBzdGF0ZSwgZXJyb3JfZGVzY3JpcHRpb24sIGRldmljZV9pZCwgdXNlcjogdXNlckRhdGEgfSA9IHF1ZXJ5T3JCb2R5O1xuXHRpZiAoIXN0YXRlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlN0YXRlIG5vdCBmb3VuZFwiLCBlcnJvcik7XG5cdFx0Y29uc3QgdXJsID0gYCR7ZGVmYXVsdEVycm9yVVJMfSR7ZGVmYXVsdEVycm9yVVJMLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9c3RhdGU9c3RhdGVfbm90X2ZvdW5kYDtcblx0XHR0aHJvdyBjLnJlZGlyZWN0KHVybCk7XG5cdH1cblx0Y29uc3QgeyBjb2RlVmVyaWZpZXIsIGNhbGxiYWNrVVJMLCBsaW5rLCBlcnJvclVSTCwgbmV3VXNlclVSTCwgcmVxdWVzdFNpZ25VcCB9ID0gYXdhaXQgcGFyc2VTdGF0ZShjKTtcblx0ZnVuY3Rpb24gcmVkaXJlY3RPbkVycm9yKGVycm9yJDEsIGRlc2NyaXB0aW9uKSB7XG5cdFx0Y29uc3QgYmFzZVVSTCA9IGVycm9yVVJMID8/IGRlZmF1bHRFcnJvclVSTDtcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZXJyb3I6IGVycm9yJDEgfSk7XG5cdFx0aWYgKGRlc2NyaXB0aW9uKSBwYXJhbXMuc2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIiwgZGVzY3JpcHRpb24pO1xuXHRcdGNvbnN0IHVybCA9IGAke2Jhc2VVUkx9JHtiYXNlVVJMLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuXHRcdHRocm93IGMucmVkaXJlY3QodXJsKTtcblx0fVxuXHRpZiAoZXJyb3IpIHJlZGlyZWN0T25FcnJvcihlcnJvciwgZXJyb3JfZGVzY3JpcHRpb24pO1xuXHRpZiAoIWNvZGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ29kZSBub3QgZm91bmRcIik7XG5cdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwibm9fY29kZVwiKTtcblx0fVxuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5wYXJhbXMuaWQpO1xuXHRpZiAoIXByb3ZpZGVyKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIk9hdXRoIHByb3ZpZGVyIHdpdGggaWRcIiwgYy5wYXJhbXMuaWQsIFwibm90IGZvdW5kXCIpO1xuXHRcdHRocm93IHJlZGlyZWN0T25FcnJvcihcIm9hdXRoX3Byb3ZpZGVyX25vdF9mb3VuZFwiKTtcblx0fVxuXHRsZXQgdG9rZW5zO1xuXHR0cnkge1xuXHRcdHRva2VucyA9IGF3YWl0IHByb3ZpZGVyLnZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0Y29kZSxcblx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdGRldmljZUlkOiBkZXZpY2VfaWQsXG5cdFx0XHRyZWRpcmVjdFVSSTogYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9YFxuXHRcdH0pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlwiLCBlKTtcblx0XHR0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJpbnZhbGlkX2NvZGVcIik7XG5cdH1cblx0aWYgKCF0b2tlbnMpIHRocm93IHJlZGlyZWN0T25FcnJvcihcImludmFsaWRfY29kZVwiKTtcblx0Y29uc3QgcGFyc2VkVXNlckRhdGEgPSB1c2VyRGF0YSA/IHNhZmVKU09OUGFyc2UodXNlckRhdGEpIDogbnVsbDtcblx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0Li4udG9rZW5zLFxuXHRcdHVzZXI6IHBhcnNlZFVzZXJEYXRhID8/IHZvaWQgMFxuXHR9KS50aGVuKChyZXMpID0+IHJlcz8udXNlcik7XG5cdGlmICghdXNlckluZm8pIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGdldCB1c2VyIGluZm9cIik7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYWJsZV90b19nZXRfdXNlcl9pbmZvXCIpO1xuXHR9XG5cdGlmICghY2FsbGJhY2tVUkwpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiTm8gY2FsbGJhY2sgVVJMIGZvdW5kXCIpO1xuXHRcdHRocm93IHJlZGlyZWN0T25FcnJvcihcIm5vX2NhbGxiYWNrX3VybFwiKTtcblx0fVxuXHRpZiAobGluaykge1xuXHRcdGlmICghKGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzKT8uaW5jbHVkZXMocHJvdmlkZXIuaWQpICYmICF1c2VySW5mby5lbWFpbFZlcmlmaWVkIHx8IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBsaW5rIGFjY291bnQgLSB1bnRydXN0ZWQgcHJvdmlkZXJcIik7XG5cdFx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hYmxlX3RvX2xpbmtfYWNjb3VudFwiKTtcblx0XHR9XG5cdFx0aWYgKHVzZXJJbmZvLmVtYWlsICE9PSBsaW5rLmVtYWlsICYmIGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5hbGxvd0RpZmZlcmVudEVtYWlscyAhPT0gdHJ1ZSkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcImVtYWlsX2RvZXNuJ3RfbWF0Y2hcIik7XG5cdFx0Y29uc3QgZXhpc3RpbmdBY2NvdW50ID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudChTdHJpbmcodXNlckluZm8uaWQpKTtcblx0XHRpZiAoZXhpc3RpbmdBY2NvdW50KSB7XG5cdFx0XHRpZiAoZXhpc3RpbmdBY2NvdW50LnVzZXJJZC50b1N0cmluZygpICE9PSBsaW5rLnVzZXJJZC50b1N0cmluZygpKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiYWNjb3VudF9hbHJlYWR5X2xpbmtlZF90b19kaWZmZXJlbnRfdXNlclwiKTtcblx0XHRcdGNvbnN0IHVwZGF0ZURhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoe1xuXHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB0b2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogdG9rZW5zLnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpXG5cdFx0XHR9KS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB2b2lkIDApKTtcblx0XHRcdGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChleGlzdGluZ0FjY291bnQuaWQsIHVwZGF0ZURhdGEpO1xuXHRcdH0gZWxzZSBpZiAoIWF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlQWNjb3VudCh7XG5cdFx0XHR1c2VySWQ6IGxpbmsudXNlcklkLFxuXHRcdFx0cHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG5cdFx0XHRhY2NvdW50SWQ6IFN0cmluZyh1c2VySW5mby5pZCksXG5cdFx0XHQuLi50b2tlbnMsXG5cdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5yZWZyZXNoVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIilcblx0XHR9KSkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYWJsZV90b19saW5rX2FjY291bnRcIik7XG5cdFx0bGV0IHRvUmVkaXJlY3RUbyQxO1xuXHRcdHRyeSB7XG5cdFx0XHR0b1JlZGlyZWN0VG8kMSA9IGNhbGxiYWNrVVJMLnRvU3RyaW5nKCk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHR0b1JlZGlyZWN0VG8kMSA9IGNhbGxiYWNrVVJMO1xuXHRcdH1cblx0XHR0aHJvdyBjLnJlZGlyZWN0KHRvUmVkaXJlY3RUbyQxKTtcblx0fVxuXHRpZiAoIXVzZXJJbmZvLmVtYWlsKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIGRpZCBub3QgcmV0dXJuIGVtYWlsLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBtaXNjb25maWd1cmF0aW9uIGluIHRoZSBwcm92aWRlciBzZXR0aW5ncy5cIik7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihcImVtYWlsX25vdF9mb3VuZFwiKTtcblx0fVxuXHRjb25zdCBhY2NvdW50RGF0YSA9IHtcblx0XHRwcm92aWRlcklkOiBwcm92aWRlci5pZCxcblx0XHRhY2NvdW50SWQ6IFN0cmluZyh1c2VySW5mby5pZCksXG5cdFx0Li4udG9rZW5zLFxuXHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKVxuXHR9O1xuXHRjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVPQXV0aFVzZXJJbmZvKGMsIHtcblx0XHR1c2VySW5mbzoge1xuXHRcdFx0Li4udXNlckluZm8sXG5cdFx0XHRpZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcblx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbCxcblx0XHRcdG5hbWU6IHVzZXJJbmZvLm5hbWUgfHwgdXNlckluZm8uZW1haWxcblx0XHR9LFxuXHRcdGFjY291bnQ6IGFjY291bnREYXRhLFxuXHRcdGNhbGxiYWNrVVJMLFxuXHRcdGRpc2FibGVTaWduVXA6IHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCAmJiAhcmVxdWVzdFNpZ25VcCB8fCBwcm92aWRlci5vcHRpb25zPy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IHByb3ZpZGVyLm9wdGlvbnM/Lm92ZXJyaWRlVXNlckluZm9PblNpZ25JblxuXHR9KTtcblx0aWYgKHJlc3VsdC5lcnJvcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IocmVzdWx0LmVycm9yLnNwbGl0KFwiIFwiKS5qb2luKFwiX1wiKSk7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihyZXN1bHQuZXJyb3Iuc3BsaXQoXCIgXCIpLmpvaW4oXCJfXCIpKTtcblx0fVxuXHRjb25zdCB7IHNlc3Npb24sIHVzZXIgfSA9IHJlc3VsdC5kYXRhO1xuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGMsIHtcblx0XHRzZXNzaW9uLFxuXHRcdHVzZXJcblx0fSk7XG5cdGxldCB0b1JlZGlyZWN0VG87XG5cdHRyeSB7XG5cdFx0dG9SZWRpcmVjdFRvID0gKHJlc3VsdC5pc1JlZ2lzdGVyID8gbmV3VXNlclVSTCB8fCBjYWxsYmFja1VSTCA6IGNhbGxiYWNrVVJMKS50b1N0cmluZygpO1xuXHR9IGNhdGNoIHtcblx0XHR0b1JlZGlyZWN0VG8gPSByZXN1bHQuaXNSZWdpc3RlciA/IG5ld1VzZXJVUkwgfHwgY2FsbGJhY2tVUkwgOiBjYWxsYmFja1VSTDtcblx0fVxuXHR0aHJvdyBjLnJlZGlyZWN0KHRvUmVkaXJlY3RUbyk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjYWxsYmFja09BdXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsYmFjay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmailVerificationToken: () => (/* binding */ createEmailVerificationToken),\n/* harmony export */   sendVerificationEmail: () => (/* binding */ sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* binding */ sendVerificationEmailFn),\n/* harmony export */   verifyEmail: () => (/* binding */ verifyEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose_errors__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jose/errors */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/errors.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/email-verification.ts\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600, extraPayload) {\n\treturn await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.signJWT)({\n\t\temail: email.toLowerCase(),\n\t\tupdateTo,\n\t\t...extraPayload\n\t}, secret, expiresIn);\n}\n/**\n* A function to send a verification email to the user\n*/\nasync function sendVerificationEmailFn(ctx, user) {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await createEmailVerificationToken(ctx.context.secret, user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser,\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n}\nconst sendVerificationEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/send-verification-email\", {\n\tmethod: \"POST\",\n\toperationId: \"sendVerificationEmail\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email to send the verification email to\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to use for email verification callback\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"sendVerificationEmail\",\n\t\tdescription: \"Send a verification email to the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The email to send the verification email to\",\n\t\t\t\t\texample: \"user@example.com\"\n\t\t\t\t},\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The URL to use for email verification callback\",\n\t\t\t\t\texample: \"https://example.com/callback\",\n\t\t\t\t\tnullable: true\n\t\t\t\t}\n\t\t\t},\n\t\t\trequired: [\"email\"]\n\t\t} } } },\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was sent successfully\",\n\t\t\t\t\t\texample: true\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"400\": {\n\t\t\t\tdescription: \"Bad Request\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Error message\",\n\t\t\t\t\t\texample: \"Verification email isn't enabled\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst { email } = ctx.body;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\t\tif (!user) {\n\t\t\tawait createEmailVerificationToken(ctx.context.secret, email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\treturn ctx.json({ status: true });\n\t\t}\n\t\tawait sendVerificationEmailFn(ctx, user.user);\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (session?.user.email !== email) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_MISMATCH });\n\tif (session?.user.emailVerified) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_ALREADY_VERIFIED });\n\tawait sendVerificationEmailFn(ctx, session.user);\n\treturn ctx.json({ status: true });\n});\nconst verifyEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-email\", {\n\tmethod: \"GET\",\n\toperationId: \"verifyEmail\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to verify the email\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify the email of the user\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The token to verify the email\",\n\t\t\trequired: true,\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The URL to redirect to after email verification\",\n\t\t\trequired: false,\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was verified successfully\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tfunction redirectOnError(error) {\n\t\tif (ctx.query.callbackURL) {\n\t\t\tif (ctx.query.callbackURL.includes(\"?\")) throw ctx.redirect(`${ctx.query.callbackURL}&error=${error}`);\n\t\t\tthrow ctx.redirect(`${ctx.query.callbackURL}?error=${error}`);\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: error });\n\t}\n\tconst { token } = ctx.query;\n\tlet jwt;\n\ttry {\n\t\tjwt = await (0,jose__WEBPACK_IMPORTED_MODULE_10__.jwtVerify)(token, new TextEncoder().encode(ctx.context.secret), { algorithms: [\"HS256\"] });\n\t} catch (e) {\n\t\tif (e instanceof jose_errors__WEBPACK_IMPORTED_MODULE_11__.JWTExpired) return redirectOnError(\"token_expired\");\n\t\treturn redirectOnError(\"invalid_token\");\n\t}\n\tconst parsed = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email(),\n\t\tupdateTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\trequestType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}).parse(jwt.payload);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(parsed.email);\n\tif (!user) return redirectOnError(\"user_not_found\");\n\tif (parsed.updateTo) {\n\t\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (session && session.user.email !== parsed.email) return redirectOnError(\"unauthorized\");\n\t\tswitch (parsed.requestType) {\n\t\t\tcase \"change-email-confirmation\": {\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.email, parsed.updateTo, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`;\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...user.user,\n\t\t\t\t\t\temail: parsed.updateTo\n\t\t\t\t\t},\n\t\t\t\t\turl,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t}\n\t\t\tcase \"change-email-verification\": {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: true\n\t\t\t\t});\n\t\t\t\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser$1, ctx.request);\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: false\n\t\t\t\t});\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.updateTo);\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: updatedUser$1,\n\t\t\t\t\turl: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tif (user.user.emailVerified) {\n\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tuser: null\n\t\t});\n\t}\n\tif (ctx.context.options.emailVerification?.beforeEmailVerification) await ctx.context.options.emailVerification.beforeEmailVerification(user.user, ctx.request);\n\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\tconst updatedUser = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, { emailVerified: true });\n\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser, ctx.request);\n\tif (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n\t\tconst currentSession = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (!currentSession || currentSession.user.email !== parsed.email) {\n\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to create session\" });\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\tsession,\n\t\t\t\tuser: {\n\t\t\t\t\t...user.user,\n\t\t\t\t\temailVerified: true\n\t\t\t\t}\n\t\t\t});\n\t\t} else await (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\tsession: currentSession.session,\n\t\t\tuser: {\n\t\t\t\t...currentSession.user,\n\t\t\t\temailVerified: true\n\t\t\t}\n\t\t});\n\t}\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tuser: null\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=email-verification.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNEO0FBQ1E7QUFDNUI7QUFDYTtBQUNZO0FBQ1Q7QUFDUztBQUNwQjtBQUNkO0FBQ2tDO0FBQzFCO0FBQ1E7O0FBRXpDO0FBQ0E7QUFDQSxjQUFjLHdEQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDZDQUE2QztBQUNuRjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CLHNCQUFzQixNQUFNLGVBQWUsWUFBWTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLDhCQUE4Qix5RUFBa0I7QUFDaEQ7QUFDQTtBQUNBLE9BQU8sdUNBQVE7QUFDZixTQUFTLHNDQUFPLFVBQVUsNERBQTREO0FBQ3RGLGVBQWUsdUNBQVEsVUFBVSwrREFBK0Q7QUFDaEcsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCLFdBQVcsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsNkNBQTZDO0FBQ25GO0FBQ0EsU0FBUyxRQUFRO0FBQ2pCLHVCQUF1QiwrREFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQSw4Q0FBOEMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGlCQUFpQjtBQUNsSCw0Q0FBNEMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHlCQUF5QjtBQUN4SDtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCxvQkFBb0IseUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQSxRQUFRLHVDQUFRO0FBQ2hCLFNBQVMsdUNBQVEsVUFBVSw4Q0FBOEM7QUFDekUsZUFBZSx1Q0FBUSxVQUFVLGdFQUFnRTtBQUNqRyxFQUFFO0FBQ0YsT0FBTywwRUFBVztBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0gsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0Esa0VBQWtFLHNCQUFzQixTQUFTLE1BQU07QUFDdkcseUJBQXlCLHNCQUFzQixTQUFTLE1BQU07QUFDOUQ7QUFDQSxZQUFZLGlEQUFRLG1CQUFtQixnQkFBZ0I7QUFDdkQ7QUFDQSxTQUFTLFFBQVE7QUFDakI7QUFDQTtBQUNBLGNBQWMsZ0RBQVMsd0RBQXdELHVCQUF1QjtBQUN0RyxHQUFHO0FBQ0gsbUJBQW1CLG9EQUFVO0FBQzdCO0FBQ0E7QUFDQSxnQkFBZ0IsdUNBQVE7QUFDeEIsU0FBUyxzQ0FBTztBQUNoQixZQUFZLHVDQUFRO0FBQ3BCLGVBQWUsdUNBQVE7QUFDdkIsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrREFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsK0pBQStKLDBDQUEwQztBQUN6TTtBQUNBLG1CQUFtQixvQkFBb0Isc0JBQXNCLFNBQVMsZUFBZSxrQkFBa0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHNCQUFzQixjQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsNEJBQTRCLFNBQVMscUVBQWdCLDJCQUEyQjtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsV0FBVywrREFBZTtBQUMxQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9CQUFvQixzQkFBc0IsU0FBUyxlQUFlLGtCQUFrQjtBQUNqRztBQUNBLEtBQUs7QUFDTCxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsV0FBVywrREFBZTtBQUMxQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5RkFBeUYscUJBQXFCO0FBQzlHO0FBQ0E7QUFDQSwrQkFBK0IsK0RBQWlCO0FBQ2hEO0FBQ0E7QUFDQSwyQkFBMkIsaURBQVEsNEJBQTRCLHFDQUFxQztBQUNwRyxTQUFTLG9FQUFnQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUksV0FBVyxvRUFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7O0FBRUQ7QUFDcUc7QUFDckciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXGVtYWlsLXZlcmlmaWNhdGlvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IG9yaWdpbkNoZWNrIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCBcIi4uL21pZGRsZXdhcmVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2lnbkpXVCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vand0Lm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHggfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuaW1wb3J0IHsgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIjtcbmltcG9ydCB7IEpXVEV4cGlyZWQgfSBmcm9tIFwiam9zZS9lcnJvcnNcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL2VtYWlsLXZlcmlmaWNhdGlvbi50c1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihzZWNyZXQsIGVtYWlsLCB1cGRhdGVUbywgZXhwaXJlc0luID0gMzYwMCwgZXh0cmFQYXlsb2FkKSB7XG5cdHJldHVybiBhd2FpdCBzaWduSldUKHtcblx0XHRlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcblx0XHR1cGRhdGVUbyxcblx0XHQuLi5leHRyYVBheWxvYWRcblx0fSwgc2VjcmV0LCBleHBpcmVzSW4pO1xufVxuLyoqXG4qIEEgZnVuY3Rpb24gdG8gc2VuZCBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byB0aGUgdXNlclxuKi9cbmFzeW5jIGZ1bmN0aW9uIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuKGN0eCwgdXNlcikge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkLlwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCB1c2VyLmVtYWlsLCB2b2lkIDAsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbik7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gY3R4LmJvZHkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LmJvZHkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0dXNlcixcblx0XHR1cmwsXG5cdFx0dG9rZW5cblx0fSwgY3R4LnJlcXVlc3QpKTtcbn1cbmNvbnN0IHNlbmRWZXJpZmljYXRpb25FbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zZW5kLXZlcmlmaWNhdGlvbi1lbWFpbFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInNlbmRWZXJpZmljYXRpb25FbWFpbFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0ZW1haWw6IHouZW1haWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIHRvIHNlbmQgdGhlIHZlcmlmaWNhdGlvbiBlbWFpbCB0b1wiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInNlbmRWZXJpZmljYXRpb25FbWFpbFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNlbmQgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gdGhlIHVzZXJcIixcblx0XHRyZXF1ZXN0Qm9keTogeyBjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCB0byBzZW5kIHRoZSB2ZXJpZmljYXRpb24gZW1haWwgdG9cIixcblx0XHRcdFx0XHRleGFtcGxlOiBcInVzZXJAZXhhbXBsZS5jb21cIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjYWxsYmFja1VSTDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byB1c2UgZm9yIGVtYWlsIHZlcmlmaWNhdGlvbiBjYWxsYmFja1wiLFxuXHRcdFx0XHRcdGV4YW1wbGU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9jYWxsYmFja1wiLFxuXHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRyZXF1aXJlZDogW1wiZW1haWxcIl1cblx0XHR9IH0gfSB9LFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0XCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGVtYWlsIHdhcyBzZW50IHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0ZXhhbXBsZTogdHJ1ZVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSxcblx0XHRcdFwiNDAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQmFkIFJlcXVlc3RcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkVycm9yIG1lc3NhZ2VcIixcblx0XHRcdFx0XHRcdGV4YW1wbGU6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIlxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWQuXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IHsgZW1haWwgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0YXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIGVtYWlsLCB2b2lkIDAsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbik7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdFx0fVxuXHRcdGF3YWl0IHNlbmRWZXJpZmljYXRpb25FbWFpbEZuKGN0eCwgdXNlci51c2VyKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdH1cblx0aWYgKHNlc3Npb24/LnVzZXIuZW1haWwgIT09IGVtYWlsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRU1BSUxfTUlTTUFUQ0ggfSk7XG5cdGlmIChzZXNzaW9uPy51c2VyLmVtYWlsVmVyaWZpZWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9BTFJFQURZX1ZFUklGSUVEIH0pO1xuXHRhd2FpdCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbihjdHgsIHNlc3Npb24udXNlcik7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgdmVyaWZ5RW1haWwgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdmVyaWZ5LWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRvcGVyYXRpb25JZDogXCJ2ZXJpZnlFbWFpbFwiLFxuXHRxdWVyeTogei5vYmplY3Qoe1xuXHRcdHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gdmVyaWZ5IHRoZSBlbWFpbFwiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW29yaWdpbkNoZWNrKChjdHgpID0+IGN0eC5xdWVyeS5jYWxsYmFja1VSTCldLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiVmVyaWZ5IHRoZSBlbWFpbCBvZiB0aGUgdXNlclwiLFxuXHRcdHBhcmFtZXRlcnM6IFt7XG5cdFx0XHRuYW1lOiBcInRva2VuXCIsXG5cdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHZlcmlmeSB0aGUgZW1haWxcIixcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdH0sIHtcblx0XHRcdG5hbWU6IFwiY2FsbGJhY2tVUkxcIixcblx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdH1dLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBlbWFpbCB3YXMgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5XCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJ1c2VyXCIsIFwic3RhdHVzXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0ZnVuY3Rpb24gcmVkaXJlY3RPbkVycm9yKGVycm9yKSB7XG5cdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkge1xuXHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTC5pbmNsdWRlcyhcIj9cIikpIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9JmVycm9yPSR7ZXJyb3J9YCk7XG5cdFx0XHR0aHJvdyBjdHgucmVkaXJlY3QoYCR7Y3R4LnF1ZXJ5LmNhbGxiYWNrVVJMfT9lcnJvcj0ke2Vycm9yfWApO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBlcnJvciB9KTtcblx0fVxuXHRjb25zdCB7IHRva2VuIH0gPSBjdHgucXVlcnk7XG5cdGxldCBqd3Q7XG5cdHRyeSB7XG5cdFx0and0ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoY3R4LmNvbnRleHQuc2VjcmV0KSwgeyBhbGdvcml0aG1zOiBbXCJIUzI1NlwiXSB9KTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmIChlIGluc3RhbmNlb2YgSldURXhwaXJlZCkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInRva2VuX2V4cGlyZWRcIik7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihcImludmFsaWRfdG9rZW5cIik7XG5cdH1cblx0Y29uc3QgcGFyc2VkID0gei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LmVtYWlsKCksXG5cdFx0dXBkYXRlVG86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRyZXF1ZXN0VHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pLnBhcnNlKGp3dC5wYXlsb2FkKTtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsKTtcblx0aWYgKCF1c2VyKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidXNlcl9ub3RfZm91bmRcIik7XG5cdGlmIChwYXJzZWQudXBkYXRlVG8pIHtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0XHRpZiAoc2Vzc2lvbiAmJiBzZXNzaW9uLnVzZXIuZW1haWwgIT09IHBhcnNlZC5lbWFpbCkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYXV0aG9yaXplZFwiKTtcblx0XHRzd2l0Y2ggKHBhcnNlZC5yZXF1ZXN0VHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYW5nZS1lbWFpbC1jb25maXJtYXRpb25cIjoge1xuXHRcdFx0XHRjb25zdCBuZXdUb2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBwYXJzZWQuZW1haWwsIHBhcnNlZC51cGRhdGVUbywgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLCB7IHJlcXVlc3RUeXBlOiBcImNoYW5nZS1lbWFpbC12ZXJpZmljYXRpb25cIiB9KTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlQ2FsbGJhY2tVUkwgPSBjdHgucXVlcnkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSA6IGVuY29kZVVSSUNvbXBvbmVudChcIi9cIik7XG5cdFx0XHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke25ld1Rva2VufSZjYWxsYmFja1VSTD0ke3VwZGF0ZUNhbGxiYWNrVVJMfWA7XG5cdFx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdC4uLnVzZXIudXNlcixcblx0XHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG9cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVybCxcblx0XHRcdFx0XHR0b2tlbjogbmV3VG9rZW5cblx0XHRcdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJjaGFuZ2UtZW1haWwtdmVyaWZpY2F0aW9uXCI6IHtcblx0XHRcdFx0bGV0IGFjdGl2ZVNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdFx0XHRpZiAoIWFjdGl2ZVNlc3Npb24pIHtcblx0XHRcdFx0XHRjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci51c2VyLmlkKTtcblx0XHRcdFx0XHRpZiAoIW5ld1Nlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHRcdFx0XHRcdGFjdGl2ZVNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogdXNlci51c2VyXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8ub25FbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uKHVzZXIudXNlciwgY3R4LnJlcXVlc3QpO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkVXNlciQxID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKHBhcnNlZC5lbWFpbCwge1xuXHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmFmdGVyRW1haWxWZXJpZmljYXRpb24pIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbih1cGRhdGVkVXNlciQxLCBjdHgucmVxdWVzdCk7XG5cdFx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRcdFx0c2Vzc2lvbjogYWN0aXZlU2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdC4uLmFjdGl2ZVNlc3Npb24udXNlcixcblx0XHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG5cdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1cGRhdGVkVXNlciQxKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6IHtcblx0XHRcdFx0bGV0IGFjdGl2ZVNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdFx0XHRpZiAoIWFjdGl2ZVNlc3Npb24pIHtcblx0XHRcdFx0XHRjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci51c2VyLmlkKTtcblx0XHRcdFx0XHRpZiAoIW5ld1Nlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHRcdFx0XHRcdGFjdGl2ZVNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogdXNlci51c2VyXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB1cGRhdGVkVXNlciQxID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKHBhcnNlZC5lbWFpbCwge1xuXHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHBhcnNlZC51cGRhdGVUbyk7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZUNhbGxiYWNrVVJMID0gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMID8gZW5jb2RlVVJJQ29tcG9uZW50KGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgOiBlbmNvZGVVUklDb21wb25lbnQoXCIvXCIpO1xuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSBhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0XHR1c2VyOiB1cGRhdGVkVXNlciQxLFxuXHRcdFx0XHRcdHVybDogYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7bmV3VG9rZW59JmNhbGxiYWNrVVJMPSR7dXBkYXRlQ2FsbGJhY2tVUkx9YCxcblx0XHRcdFx0XHR0b2tlbjogbmV3VG9rZW5cblx0XHRcdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uOiBhY3RpdmVTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0Li4uYWN0aXZlU2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1cGRhdGVkVXNlciQxKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKHVzZXIudXNlci5lbWFpbFZlcmlmaWVkKSB7XG5cdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHVzZXI6IG51bGxcblx0XHR9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYmVmb3JlRW1haWxWZXJpZmljYXRpb24pIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uYmVmb3JlRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLm9uRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKHBhcnNlZC5lbWFpbCwgeyBlbWFpbFZlcmlmaWVkOiB0cnVlIH0pO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKHVwZGF0ZWRVc2VyLCBjdHgucmVxdWVzdCk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5hdXRvU2lnbkluQWZ0ZXJWZXJpZmljYXRpb24pIHtcblx0XHRjb25zdCBjdXJyZW50U2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0aWYgKCFjdXJyZW50U2Vzc2lvbiB8fCBjdXJyZW50U2Vzc2lvbi51c2VyLmVtYWlsICE9PSBwYXJzZWQuZW1haWwpIHtcblx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRcdFx0aWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiIH0pO1xuXHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0c2Vzc2lvbixcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdC4uLnVzZXIudXNlcixcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbjogY3VycmVudFNlc3Npb24uc2Vzc2lvbixcblx0XHRcdHVzZXI6IHtcblx0XHRcdFx0Li4uY3VycmVudFNlc3Npb24udXNlcixcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogdHJ1ZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdGlmIChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIHRocm93IGN0eC5yZWRpcmVjdChjdHgucXVlcnkuY2FsbGJhY2tVUkwpO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHN0YXR1czogdHJ1ZSxcblx0XHR1c2VyOiBudWxsXG5cdH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsLCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbiwgdmVyaWZ5RW1haWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtYWlsLXZlcmlmaWNhdGlvbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   error: () => (/* binding */ error)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/api/routes/error.ts\nfunction sanitize(input) {\n\treturn input.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g, \"&amp;\");\n}\nconst html = (options, code = \"Unknown\", description = null) => {\n\tconst custom = options.onAPIError?.customizeDefaultErrorPage;\n\treturn `<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Error</title>\n    <style>\n      * {\n        box-sizing: border-box;\n      }\n      body {\n        font-family: ${custom?.font?.defaultFamily || \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\"};\n        background: ${custom?.colors?.background || \"var(--background)\"};\n        color: var(--foreground);\n        margin: 0;\n      }\n      :root,\n      :host {\n        --spacing: 0.25rem;\n        --container-md: 28rem;\n        --text-sm: ${custom?.size?.textSm || \"0.875rem\"};\n        --text-sm--line-height: calc(1.25 / 0.875);\n        --text-2xl: ${custom?.size?.text2xl || \"1.5rem\"};\n        --text-2xl--line-height: calc(2 / 1.5);\n        --text-4xl: ${custom?.size?.text4xl || \"2.25rem\"};\n        --text-4xl--line-height: calc(2.5 / 2.25);\n        --text-6xl: ${custom?.size?.text6xl || \"3rem\"};\n        --text-6xl--line-height: 1;\n        --font-weight-medium: 500;\n        --font-weight-semibold: 600;\n        --font-weight-bold: 700;\n        --default-transition-duration: 150ms;\n        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n        --radius: ${custom?.size?.radiusSm || \"0.625rem\"};\n        --default-mono-font-family: ${custom?.font?.monoFamily || \"var(--font-geist-mono)\"};\n        --primary: ${custom?.colors?.primary || \"black\"};\n        --primary-foreground: ${custom?.colors?.primaryForeground || \"white\"};\n        --background: ${custom?.colors?.background || \"white\"};\n        --foreground: ${custom?.colors?.foreground || \"oklch(0.271 0 0)\"};\n        --border: ${custom?.colors?.border || \"oklch(0.89 0 0)\"};\n        --destructive: ${custom?.colors?.destructive || \"oklch(0.55 0.15 25.723)\"};\n        --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.545 0 0)\"};\n        --corner-border: ${custom?.colors?.cornerBorder || \"#404040\"};\n      }\n\n      button, .btn {\n        cursor: pointer;\n        background: none;\n        border: none;\n        color: inherit;\n        font: inherit;\n        transition: all var(--default-transition-duration)\n          var(--default-transition-timing-function);\n      }\n      button:hover, .btn:hover {\n        opacity: 0.8;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        :root,\n        :host {\n          --primary: ${custom?.colors?.primary || \"white\"};\n          --primary-foreground: ${custom?.colors?.primaryForeground || \"black\"};\n          --background: ${custom?.colors?.background || \"oklch(0.15 0 0)\"};\n          --foreground: ${custom?.colors?.foreground || \"oklch(0.98 0 0)\"};\n          --border: ${custom?.colors?.border || \"oklch(0.27 0 0)\"};\n          --destructive: ${custom?.colors?.destructive || \"oklch(0.65 0.15 25.723)\"};\n          --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.65 0 0)\"};\n          --corner-border: ${custom?.colors?.cornerBorder || \"#a0a0a0\"};\n        }\n      }\n      @media (max-width: 640px) {\n        :root, :host {\n          --text-6xl: 2.5rem;\n          --text-2xl: 1.25rem;\n          --text-sm: 0.8125rem;\n        }\n      }\n      @media (max-width: 480px) {\n        :root, :host {\n          --text-6xl: 2rem;\n          --text-2xl: 1.125rem;\n        }\n      }\n    </style>\n  </head>\n  <body style=\"width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;\">\n    <div\n        style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            gap: 1.5rem;\n            position: relative;\n            width: 100%;\n            min-height: 100vh;\n            padding: 1rem;\n        \"\n        >\n${custom?.disableBackgroundGrid ? \"\" : `\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          background-image: linear-gradient(to right, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px),\n            linear-gradient(to bottom, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px);\n          background-size: 40px 40px;\n          opacity: 0.6;\n          pointer-events: none;\n          width: 100vw;\n          height: 100vh;\n        \"\n      ></div>\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: ${custom?.colors?.background || \"var(--background)\"};\n          mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          pointer-events: none;\n        \"\n      ></div>\n`}\n\n<div\n  style=\"\n    position: relative;\n    z-index: 10;\n    border: 2px solid var(--border);\n    background: ${custom?.colors?.cardBackground || \"var(--background)\"};\n    padding: 1.5rem;\n    max-width: 42rem;\n    width: 100%;\n  \"\n>\n    ${custom?.disableCornerDecorations ? \"\" : `\n        <!-- Corner decorations -->\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>\n  \n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>`}\n\n        <div style=\"text-align: center; margin-bottom: 1.5rem;\">\n          <div style=\"margin-bottom: 1.5rem;\">\n            <div\n              style=\"\n                display: inline-block;\n                border: 2px solid ${custom?.disableTitleBorder ? \"transparent\" : custom?.colors?.titleBorder || \"var(--destructive)\"};\n                padding: 0.375rem 1rem;\n              \"\n            >\n              <h1\n                style=\"\n                  font-size: var(--text-6xl);\n                  font-weight: var(--font-weight-semibold);\n                  color: ${custom?.colors?.titleColor || \"var(--foreground)\"};\n                  letter-spacing: -0.02em;\n                  margin: 0;\n                \"\n              >\n                ERROR\n              </h1>\n            </div>\n            <div\n              style=\"\n                height: 2px;\n                background-color: var(--border);\n                width: calc(100% + 3rem);\n                margin-left: -1.5rem;\n                margin-top: 1.5rem;\n              \"\n            ></div>\n          </div>\n\n          <h2\n            style=\"\n              font-size: var(--text-2xl);\n              font-weight: var(--font-weight-semibold);\n              color: var(--foreground);\n              margin: 0 0 1rem;\n            \"\n          >\n            Something went wrong\n          </h2>\n\n          <div\n            style=\"\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n                border: 2px solid var(--border);\n                background-color: var(--muted);\n                padding: 0.375rem 0.75rem;\n                margin: 0 0 1rem;\n                flex-wrap: wrap;\n                justify-content: center;\n            \"\n            >\n            <span\n                style=\"\n                font-size: 0.75rem;\n                color: var(--muted-foreground);\n                font-weight: var(--font-weight-semibold);\n                \"\n            >\n                CODE:\n            </span>\n            <span\n                style=\"\n                font-size: var(--text-sm);\n                font-family: var(--default-mono-font-family, monospace);\n                color: var(--foreground);\n                word-break: break-all;\n                \"\n            >\n                ${sanitize(code)}\n            </span>\n            </div>\n\n          <p\n            style=\"\n              color: var(--muted-foreground);\n              max-width: 28rem;\n              margin: 0 auto;\n              font-size: var(--text-sm);\n              line-height: 1.5;\n              text-wrap: pretty;\n            \"\n          >\n            ${!description ? `We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/reference/errors/${encodeURIComponent(code)}' target='_blank' rel=\"noopener noreferrer\" style='color: var(--foreground); text-decoration: underline;'>here</a>.` : description}\n          </p>\n        </div>\n\n        <div\n          style=\"\n            display: flex;\n            gap: 0.75rem;\n            margin-top: 1.5rem;\n            justify-content: center;\n            flex-wrap: wrap;\n          \"\n        >\n          <a\n            href=\"/\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: var(--primary);\n                color: var(--primary-foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Go Home\n            </div>\n          </a>\n          <a\n            href=\"https://better-auth.com/docs/reference/errors/${encodeURIComponent(code)}?askai=${encodeURIComponent(`What does the error code ${code} mean?`)}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: transparent;\n                color: var(--foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Ask AI\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>`;\n};\nconst error = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthEndpoint)(\"/error\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Displays an error page\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"text/html\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The HTML content of the error page\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst url = new URL(c.request?.url || \"\");\n\tconst unsanitizedCode = url.searchParams.get(\"error\") || \"UNKNOWN\";\n\tconst unsanitizedDescription = url.searchParams.get(\"error_description\") || null;\n\tconst safeCode = /^[\\'A-Za-z0-9_-]+$/.test(unsanitizedCode || \"\") ? unsanitizedCode : \"UNKNOWN\";\n\tconst safeDescription = unsanitizedDescription ? sanitize(unsanitizedDescription) : null;\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.set(\"error\", safeCode);\n\tif (unsanitizedDescription) queryParams.set(\"error_description\", unsanitizedDescription);\n\tconst options = c.context.options;\n\tconst errorURL = options.onAPIError?.errorURL;\n\tif (errorURL) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `${errorURL}${errorURL.includes(\"?\") ? \"&\" : \"?\"}${queryParams.toString()}` }\n\t});\n\tif (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.isProduction && !options.onAPIError?.customizeDefaultErrorPage) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `/?${queryParams.toString()}` }\n\t});\n\treturn new Response(html(c.context.options, safeCode, safeDescription), { headers: { \"Content-Type\": \"text/html\" } });\n});\n\n//#endregion\n\n//# sourceMappingURL=error.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvZXJyb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEQ7QUFDVDtBQUNNOztBQUUzRDtBQUNBO0FBQ0EsaUNBQWlDLHNCQUFzQix3QkFBd0IsdUJBQXVCLG9CQUFvQixJQUFJLElBQUksTUFBTSxLQUFLLGdCQUFnQixTQUFTLFdBQVc7QUFDakw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QixzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLHNDQUFzQztBQUN0QyxxQkFBcUI7QUFDckIsZ0NBQWdDO0FBQ2hDLHdCQUF3QjtBQUN4Qix3QkFBd0I7QUFDeEIsb0JBQW9CO0FBQ3BCLHlCQUF5QjtBQUN6Qiw4QkFBOEI7QUFDOUIsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsa0NBQWtDO0FBQ2xDLDBCQUEwQjtBQUMxQiwwQkFBMEI7QUFDMUIsc0JBQXNCO0FBQ3RCLDJCQUEyQjtBQUMzQixnQ0FBZ0M7QUFDaEMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUJBQW1CLG9CQUFvQixpQkFBaUI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsOENBQThDO0FBQ3RHLHlDQUF5Qyw4Q0FBOEM7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxzQkFBc0I7QUFDOUQsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywrTkFBK04seUJBQXlCLDZFQUE2RSwyQkFBMkI7QUFDOVc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UseUJBQXlCLFNBQVMsK0NBQStDLE1BQU0sUUFBUTtBQUNqSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5RUFBa0I7QUFDaEM7QUFDQTtBQUNBLEtBQUssbUVBQWE7QUFDbEI7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxhQUFhLFNBQVMsRUFBRSxtQ0FBbUMsRUFBRSx1QkFBdUI7QUFDakcsRUFBRTtBQUNGLEtBQUssK0RBQVk7QUFDakI7QUFDQSxhQUFhLGVBQWUsdUJBQXVCO0FBQ25ELEVBQUU7QUFDRiwyRUFBMkUsV0FBVywrQkFBK0I7QUFDckgsQ0FBQzs7QUFFRDtBQUNpQjtBQUNqQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcZXJyb3IubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IGlzUHJvZHVjdGlvbiB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL2Vycm9yLnRzXG5mdW5jdGlvbiBzYW5pdGl6ZShpbnB1dCkge1xuXHRyZXR1cm4gaW5wdXQucmVwbGFjZSgvPC9nLCBcIiZsdDtcIikucmVwbGFjZSgvPi9nLCBcIiZndDtcIikucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpLnJlcGxhY2UoLyYoPyFhbXA7fGx0O3xndDt8cXVvdDt8IzM5O3wjeFswLTlhLWZBLUZdKzt8I1swLTldKzspL2csIFwiJmFtcDtcIik7XG59XG5jb25zdCBodG1sID0gKG9wdGlvbnMsIGNvZGUgPSBcIlVua25vd25cIiwgZGVzY3JpcHRpb24gPSBudWxsKSA9PiB7XG5cdGNvbnN0IGN1c3RvbSA9IG9wdGlvbnMub25BUElFcnJvcj8uY3VzdG9taXplRGVmYXVsdEVycm9yUGFnZTtcblx0cmV0dXJuIGA8IURPQ1RZUEUgaHRtbD5cbjxodG1sIGxhbmc9XCJlblwiPlxuICA8aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCIgLz5cbiAgICA8dGl0bGU+RXJyb3I8L3RpdGxlPlxuICAgIDxzdHlsZT5cbiAgICAgICoge1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgfVxuICAgICAgYm9keSB7XG4gICAgICAgIGZvbnQtZmFtaWx5OiAke2N1c3RvbT8uZm9udD8uZGVmYXVsdEZhbWlseSB8fCBcIi1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCAnSGVsdmV0aWNhIE5ldWUnLCBBcmlhbCwgc2Fucy1zZXJpZlwifTtcbiAgICAgICAgYmFja2dyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uYmFja2dyb3VuZCB8fCBcInZhcigtLWJhY2tncm91bmQpXCJ9O1xuICAgICAgICBjb2xvcjogdmFyKC0tZm9yZWdyb3VuZCk7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICAgIDpyb290LFxuICAgICAgOmhvc3Qge1xuICAgICAgICAtLXNwYWNpbmc6IDAuMjVyZW07XG4gICAgICAgIC0tY29udGFpbmVyLW1kOiAyOHJlbTtcbiAgICAgICAgLS10ZXh0LXNtOiAke2N1c3RvbT8uc2l6ZT8udGV4dFNtIHx8IFwiMC44NzVyZW1cIn07XG4gICAgICAgIC0tdGV4dC1zbS0tbGluZS1oZWlnaHQ6IGNhbGMoMS4yNSAvIDAuODc1KTtcbiAgICAgICAgLS10ZXh0LTJ4bDogJHtjdXN0b20/LnNpemU/LnRleHQyeGwgfHwgXCIxLjVyZW1cIn07XG4gICAgICAgIC0tdGV4dC0yeGwtLWxpbmUtaGVpZ2h0OiBjYWxjKDIgLyAxLjUpO1xuICAgICAgICAtLXRleHQtNHhsOiAke2N1c3RvbT8uc2l6ZT8udGV4dDR4bCB8fCBcIjIuMjVyZW1cIn07XG4gICAgICAgIC0tdGV4dC00eGwtLWxpbmUtaGVpZ2h0OiBjYWxjKDIuNSAvIDIuMjUpO1xuICAgICAgICAtLXRleHQtNnhsOiAke2N1c3RvbT8uc2l6ZT8udGV4dDZ4bCB8fCBcIjNyZW1cIn07XG4gICAgICAgIC0tdGV4dC02eGwtLWxpbmUtaGVpZ2h0OiAxO1xuICAgICAgICAtLWZvbnQtd2VpZ2h0LW1lZGl1bTogNTAwO1xuICAgICAgICAtLWZvbnQtd2VpZ2h0LXNlbWlib2xkOiA2MDA7XG4gICAgICAgIC0tZm9udC13ZWlnaHQtYm9sZDogNzAwO1xuICAgICAgICAtLWRlZmF1bHQtdHJhbnNpdGlvbi1kdXJhdGlvbjogMTUwbXM7XG4gICAgICAgIC0tZGVmYXVsdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTtcbiAgICAgICAgLS1yYWRpdXM6ICR7Y3VzdG9tPy5zaXplPy5yYWRpdXNTbSB8fCBcIjAuNjI1cmVtXCJ9O1xuICAgICAgICAtLWRlZmF1bHQtbW9uby1mb250LWZhbWlseTogJHtjdXN0b20/LmZvbnQ/Lm1vbm9GYW1pbHkgfHwgXCJ2YXIoLS1mb250LWdlaXN0LW1vbm8pXCJ9O1xuICAgICAgICAtLXByaW1hcnk6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnkgfHwgXCJibGFja1wifTtcbiAgICAgICAgLS1wcmltYXJ5LWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnlGb3JlZ3JvdW5kIHx8IFwid2hpdGVcIn07XG4gICAgICAgIC0tYmFja2dyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uYmFja2dyb3VuZCB8fCBcIndoaXRlXCJ9O1xuICAgICAgICAtLWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmZvcmVncm91bmQgfHwgXCJva2xjaCgwLjI3MSAwIDApXCJ9O1xuICAgICAgICAtLWJvcmRlcjogJHtjdXN0b20/LmNvbG9ycz8uYm9yZGVyIHx8IFwib2tsY2goMC44OSAwIDApXCJ9O1xuICAgICAgICAtLWRlc3RydWN0aXZlOiAke2N1c3RvbT8uY29sb3JzPy5kZXN0cnVjdGl2ZSB8fCBcIm9rbGNoKDAuNTUgMC4xNSAyNS43MjMpXCJ9O1xuICAgICAgICAtLW11dGVkLWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/Lm11dGVkRm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuNTQ1IDAgMClcIn07XG4gICAgICAgIC0tY29ybmVyLWJvcmRlcjogJHtjdXN0b20/LmNvbG9ycz8uY29ybmVyQm9yZGVyIHx8IFwiIzQwNDA0MFwifTtcbiAgICAgIH1cblxuICAgICAgYnV0dG9uLCAuYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICBmb250OiBpbmhlcml0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgdmFyKC0tZGVmYXVsdC10cmFuc2l0aW9uLWR1cmF0aW9uKVxuICAgICAgICAgIHZhcigtLWRlZmF1bHQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24pO1xuICAgICAgfVxuICAgICAgYnV0dG9uOmhvdmVyLCAuYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgfVxuXG4gICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgIDpyb290LFxuICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgLS1wcmltYXJ5OiAke2N1c3RvbT8uY29sb3JzPy5wcmltYXJ5IHx8IFwid2hpdGVcIn07XG4gICAgICAgICAgLS1wcmltYXJ5LWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnlGb3JlZ3JvdW5kIHx8IFwiYmxhY2tcIn07XG4gICAgICAgICAgLS1iYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5iYWNrZ3JvdW5kIHx8IFwib2tsY2goMC4xNSAwIDApXCJ9O1xuICAgICAgICAgIC0tZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uZm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuOTggMCAwKVwifTtcbiAgICAgICAgICAtLWJvcmRlcjogJHtjdXN0b20/LmNvbG9ycz8uYm9yZGVyIHx8IFwib2tsY2goMC4yNyAwIDApXCJ9O1xuICAgICAgICAgIC0tZGVzdHJ1Y3RpdmU6ICR7Y3VzdG9tPy5jb2xvcnM/LmRlc3RydWN0aXZlIHx8IFwib2tsY2goMC42NSAwLjE1IDI1LjcyMylcIn07XG4gICAgICAgICAgLS1tdXRlZC1mb3JlZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5tdXRlZEZvcmVncm91bmQgfHwgXCJva2xjaCgwLjY1IDAgMClcIn07XG4gICAgICAgICAgLS1jb3JuZXItYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5jb3JuZXJCb3JkZXIgfHwgXCIjYTBhMGEwXCJ9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNjQwcHgpIHtcbiAgICAgICAgOnJvb3QsIDpob3N0IHtcbiAgICAgICAgICAtLXRleHQtNnhsOiAyLjVyZW07XG4gICAgICAgICAgLS10ZXh0LTJ4bDogMS4yNXJlbTtcbiAgICAgICAgICAtLXRleHQtc206IDAuODEyNXJlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAgIDpyb290LCA6aG9zdCB7XG4gICAgICAgICAgLS10ZXh0LTZ4bDogMnJlbTtcbiAgICAgICAgICAtLXRleHQtMnhsOiAxLjEyNXJlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIDwvc3R5bGU+XG4gIDwvaGVhZD5cbiAgPGJvZHkgc3R5bGU9XCJ3aWR0aDogMTAwdnc7IG1pbi1oZWlnaHQ6IDEwMHZoOyBvdmVyZmxvdy14OiBoaWRkZW47IG92ZXJmbG93LXk6IGF1dG87XCI+XG4gICAgPGRpdlxuICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBnYXA6IDEuNXJlbTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICBcIlxuICAgICAgICA+XG4ke2N1c3RvbT8uZGlzYWJsZUJhY2tncm91bmRHcmlkID8gXCJcIiA6IGBcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgaW5zZXQ6IDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAke2N1c3RvbT8uY29sb3JzPy5ncmlkQ29sb3IgfHwgXCJ2YXIoLS1ib3JkZXIpXCJ9IDFweCwgdHJhbnNwYXJlbnQgMXB4KSxcbiAgICAgICAgICAgIGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICR7Y3VzdG9tPy5jb2xvcnM/LmdyaWRDb2xvciB8fCBcInZhcigtLWJvcmRlcilcIn0gMXB4LCB0cmFuc3BhcmVudCAxcHgpO1xuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNDBweCA0MHB4O1xuICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICB3aWR0aDogMTAwdnc7XG4gICAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgXCJcbiAgICAgID48L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgaW5zZXQ6IDA7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmJhY2tncm91bmQgfHwgXCJ2YXIoLS1iYWNrZ3JvdW5kKVwifTtcbiAgICAgICAgICBtYXNrLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBjZW50ZXIsIHRyYW5zcGFyZW50IDIwJSwgYmxhY2spO1xuICAgICAgICAgIC13ZWJraXQtbWFzay1pbWFnZTogcmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgYXQgY2VudGVyLCB0cmFuc3BhcmVudCAyMCUsIGJsYWNrKTtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgXCJcbiAgICAgID48L2Rpdj5cbmB9XG5cbjxkaXZcbiAgc3R5bGU9XCJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTA7XG4gICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICBiYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5jYXJkQmFja2dyb3VuZCB8fCBcInZhcigtLWJhY2tncm91bmQpXCJ9O1xuICAgIHBhZGRpbmc6IDEuNXJlbTtcbiAgICBtYXgtd2lkdGg6IDQycmVtO1xuICAgIHdpZHRoOiAxMDAlO1xuICBcIlxuPlxuICAgICR7Y3VzdG9tPy5kaXNhYmxlQ29ybmVyRGVjb3JhdGlvbnMgPyBcIlwiIDogYFxuICAgICAgICA8IS0tIENvcm5lciBkZWNvcmF0aW9ucyAtLT5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IC0ycHg7XG4gICAgICAgICAgICBsZWZ0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgIFwiXG4gICAgICAgID48L2Rpdj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IC0ycHg7XG4gICAgICAgICAgICByaWdodDogLTJweDtcbiAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PlxuICBcbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBib3R0b206IC0ycHg7XG4gICAgICAgICAgICBsZWZ0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgIFwiXG4gICAgICAgID48L2Rpdj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBib3R0b206IC0ycHg7XG4gICAgICAgICAgICByaWdodDogLTJweDtcbiAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PmB9XG5cbiAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMS41cmVtO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxLjVyZW07XCI+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICR7Y3VzdG9tPy5kaXNhYmxlVGl0bGVCb3JkZXIgPyBcInRyYW5zcGFyZW50XCIgOiBjdXN0b20/LmNvbG9ycz8udGl0bGVCb3JkZXIgfHwgXCJ2YXIoLS1kZXN0cnVjdGl2ZSlcIn07XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4zNzVyZW0gMXJlbTtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGgxXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGV4dC02eGwpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke2N1c3RvbT8uY29sb3JzPy50aXRsZUNvbG9yIHx8IFwidmFyKC0tZm9yZWdyb3VuZClcIn07XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogLTAuMDJlbTtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRVJST1JcbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSArIDNyZW0pO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtMS41cmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDEuNXJlbTtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxoMlxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LTJ4bCk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1zZW1pYm9sZCk7XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMXJlbTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgU29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgICAgICA8L2gyPlxuXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbXV0ZWQpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMXJlbTtcbiAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENPREU6XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LXNtKTtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZGVmYXVsdC1tb25vLWZvbnQtZmFtaWx5LCBtb25vc3BhY2UpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAke3Nhbml0aXplKGNvZGUpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8cFxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgY29sb3I6IHZhcigtLW11dGVkLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICBtYXgtd2lkdGg6IDI4cmVtO1xuICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LXNtKTtcbiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgICAgICAgdGV4dC13cmFwOiBwcmV0dHk7XG4gICAgICAgICAgICBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgICR7IWRlc2NyaXB0aW9uID8gYFdlIGVuY291bnRlcmVkIGFuIHVuZXhwZWN0ZWQgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gb3IgcmV0dXJuIHRvIHRoZSBob21lIHBhZ2UuIElmIHlvdSdyZSBhIGRldmVsb3BlciwgeW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yIDxhIGhyZWY9J2h0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcmVmZXJlbmNlL2Vycm9ycy8ke2VuY29kZVVSSUNvbXBvbmVudChjb2RlKX0nIHRhcmdldD0nX2JsYW5rJyByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgc3R5bGU9J2NvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Jz5oZXJlPC9hPi5gIDogZGVzY3JpcHRpb259XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBnYXA6IDAuNzVyZW07XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAxLjVyZW07XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGhyZWY9XCIvXCJcbiAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICBjbGFzcz1cImJ0blwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEdvIEhvbWVcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcmVmZXJlbmNlL2Vycm9ycy8ke2VuY29kZVVSSUNvbXBvbmVudChjb2RlKX0/YXNrYWk9JHtlbmNvZGVVUklDb21wb25lbnQoYFdoYXQgZG9lcyB0aGUgZXJyb3IgY29kZSAke2NvZGV9IG1lYW4/YCl9XCJcbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJidG5cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBBc2sgQUlcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9ib2R5PlxuPC9odG1sPmA7XG59O1xuY29uc3QgZXJyb3IgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZXJyb3JcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJEaXNwbGF5cyBhbiBlcnJvciBwYWdlXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJ0ZXh0L2h0bWxcIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBIVE1MIGNvbnRlbnQgb2YgdGhlIGVycm9yIHBhZ2VcIlxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCB1cmwgPSBuZXcgVVJMKGMucmVxdWVzdD8udXJsIHx8IFwiXCIpO1xuXHRjb25zdCB1bnNhbml0aXplZENvZGUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yXCIpIHx8IFwiVU5LTk9XTlwiO1xuXHRjb25zdCB1bnNhbml0aXplZERlc2NyaXB0aW9uID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiKSB8fCBudWxsO1xuXHRjb25zdCBzYWZlQ29kZSA9IC9eW1xcJ0EtWmEtejAtOV8tXSskLy50ZXN0KHVuc2FuaXRpemVkQ29kZSB8fCBcIlwiKSA/IHVuc2FuaXRpemVkQ29kZSA6IFwiVU5LTk9XTlwiO1xuXHRjb25zdCBzYWZlRGVzY3JpcHRpb24gPSB1bnNhbml0aXplZERlc2NyaXB0aW9uID8gc2FuaXRpemUodW5zYW5pdGl6ZWREZXNjcmlwdGlvbikgOiBudWxsO1xuXHRjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0cXVlcnlQYXJhbXMuc2V0KFwiZXJyb3JcIiwgc2FmZUNvZGUpO1xuXHRpZiAodW5zYW5pdGl6ZWREZXNjcmlwdGlvbikgcXVlcnlQYXJhbXMuc2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIiwgdW5zYW5pdGl6ZWREZXNjcmlwdGlvbik7XG5cdGNvbnN0IG9wdGlvbnMgPSBjLmNvbnRleHQub3B0aW9ucztcblx0Y29uc3QgZXJyb3JVUkwgPSBvcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMO1xuXHRpZiAoZXJyb3JVUkwpIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuXHRcdHN0YXR1czogMzAyLFxuXHRcdGhlYWRlcnM6IHsgTG9jYXRpb246IGAke2Vycm9yVVJMfSR7ZXJyb3JVUkwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn0ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YCB9XG5cdH0pO1xuXHRpZiAoaXNQcm9kdWN0aW9uICYmICFvcHRpb25zLm9uQVBJRXJyb3I/LmN1c3RvbWl6ZURlZmF1bHRFcnJvclBhZ2UpIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuXHRcdHN0YXR1czogMzAyLFxuXHRcdGhlYWRlcnM6IHsgTG9jYXRpb246IGAvPyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gIH1cblx0fSk7XG5cdHJldHVybiBuZXcgUmVzcG9uc2UoaHRtbChjLmNvbnRleHQub3B0aW9ucywgc2FmZUNvZGUsIHNhZmVEZXNjcmlwdGlvbiksIHsgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcInRleHQvaHRtbFwiIH0gfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _account_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./account.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _callback_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./callback.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _error_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./error.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _ok_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ok.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./password.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _sign_in_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./sign-in.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _sign_out_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sign-out.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _sign_up_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sign-up.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _update_user_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./update-user.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxTztBQUN2RztBQUMvRTtBQUNzRjtBQUNqRztBQUNOO0FBQ3FGO0FBQ3pEO0FBQ2pCO0FBQ0c7QUFDNkUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlzdFNlc3Npb25zLCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IGFjY291bnRJbmZvLCBnZXRBY2Nlc3NUb2tlbiwgbGlua1NvY2lhbEFjY291bnQsIGxpc3RVc2VyQWNjb3VudHMsIHJlZnJlc2hUb2tlbiwgdW5saW5rQWNjb3VudCB9IGZyb20gXCIuL2FjY291bnQubWpzXCI7XG5pbXBvcnQgeyBjYWxsYmFja09BdXRoIH0gZnJvbSBcIi4vY2FsbGJhY2subWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCB2ZXJpZnlFbWFpbCB9IGZyb20gXCIuL2VtYWlsLXZlcmlmaWNhdGlvbi5tanNcIjtcbmltcG9ydCB7IGVycm9yIH0gZnJvbSBcIi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBvayB9IGZyb20gXCIuL29rLm1qc1wiO1xuaW1wb3J0IHsgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIi4vcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsIH0gZnJvbSBcIi4vc2lnbi1pbi5tanNcIjtcbmltcG9ydCB7IHNpZ25PdXQgfSBmcm9tIFwiLi9zaWduLW91dC5tanNcIjtcbmltcG9ydCB7IHNpZ25VcEVtYWlsIH0gZnJvbSBcIi4vc2lnbi11cC5tanNcIjtcbmltcG9ydCB7IGNoYW5nZUVtYWlsLCBjaGFuZ2VQYXNzd29yZCwgZGVsZXRlVXNlciwgZGVsZXRlVXNlckNhbGxiYWNrLCBzZXRQYXNzd29yZCwgdXBkYXRlVXNlciB9IGZyb20gXCIuL3VwZGF0ZS11c2VyLm1qc1wiO1xuXG5leHBvcnQgeyAgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ok: () => (/* binding */ ok)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/ok.ts\nconst ok = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/ok\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Check if the API is working\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API is working\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { ok: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the API is working\"\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"ok\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn ctx.json({ ok: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=ok.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvb2subWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4RDtBQUNIOztBQUUzRDtBQUNBLFdBQVcseUVBQWtCO0FBQzdCO0FBQ0E7QUFDQSxLQUFLLG1FQUFhO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsbUJBQW1CLFVBQVU7QUFDN0IsQ0FBQzs7QUFFRDtBQUNjO0FBQ2QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXG9rLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBISURFX01FVEFEQVRBIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9vay50c1xuY29uc3Qgb2sgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb2tcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJDaGVjayBpZiB0aGUgQVBJIGlzIHdvcmtpbmdcIixcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFQSSBpcyB3b3JraW5nXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG9rOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgQVBJIGlzIHdvcmtpbmdcIlxuXHRcdFx0XHRcdH0gfSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1wib2tcIl1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBvazogdHJ1ZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG9rIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/ok.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requestPasswordReset: () => (/* binding */ requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* binding */ requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/password.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/password.ts\nfunction redirectError(ctx, callbackURL, query) {\n\tconst url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n\tconst url = new URL(callbackURL, ctx.baseURL);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nconst requestPasswordReset = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email address of the user to send a password reset email to\" }),\n\t\tredirectTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"requestPasswordReset\",\n\t\tdescription: \"Send a password reset email to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tstatus: { type: \"boolean\" },\n\t\t\t\t\tmessage: { type: \"string\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n\t\tctx.context.logger.error(\"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Reset password isn't enabled\" });\n\t}\n\tconst { email, redirectTo } = ctx.body;\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\t/**\n\t\t* We simulate the verification token generation and the database lookup\n\t\t* to mitigate timing attacks.\n\t\t*/\n\t\t(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\t\tawait ctx.context.internalAdapter.findVerificationValue(\"dummy-verification-token\");\n\t\tctx.context.logger.error(\"Reset Password: User not found\", { email });\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t\t});\n\t}\n\tconst expiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || 3600 * 1, \"sec\");\n\tconst verificationToken = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: user.user.id,\n\t\tidentifier: `reset-password:${verificationToken}`,\n\t\texpiresAt\n\t});\n\tconst callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n\tconst url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailAndPassword.sendResetPassword({\n\t\tuser: user.user,\n\t\turl,\n\t\ttoken: verificationToken\n\t}, ctx.request));\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t});\n});\nconst requestPasswordResetCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password/:token\", {\n\tmethod: \"GET\",\n\toperationId: \"forgetPasswordCallback\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ callbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password\" }) }),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPasswordCallback\",\n\t\tdescription: \"Redirects the user to the callback URL with the token\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"path\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The token to reset the password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The URL to redirect the user to reset their password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { token: { type: \"string\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { token } = ctx.params;\n\tconst { callbackURL } = ctx.query;\n\tif (!token || !callbackURL) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`reset-password:${token}`);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tthrow ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n});\nconst resetPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password\", {\n\tmethod: \"POST\",\n\toperationId: \"resetPassword\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ token: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional() }).optional(),\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The new password to set\" }),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to reset the password\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPassword\",\n\t\tdescription: \"Reset the password for a user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token || ctx.query?.token;\n\tif (!token) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst { newPassword } = ctx.body;\n\tconst minLength = ctx.context.password?.config.minPasswordLength;\n\tconst maxLength = ctx.context.password?.config.maxPasswordLength;\n\tif (newPassword.length < minLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tif (newPassword.length > maxLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst id = `reset-password:${token}`;\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(id);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst userId = verification.value;\n\tconst hashedPassword = await ctx.context.password.hash(newPassword);\n\tif (!(await ctx.context.internalAdapter.findAccounts(userId)).find((ac) => ac.providerId === \"credential\")) await ctx.context.internalAdapter.createAccount({\n\t\tuserId,\n\t\tproviderId: \"credential\",\n\t\tpassword: hashedPassword,\n\t\taccountId: userId\n\t});\n\telse await ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\tif (ctx.context.options.emailAndPassword?.onPasswordReset) {\n\t\tconst user = await ctx.context.internalAdapter.findUserById(userId);\n\t\tif (user) await ctx.context.options.emailAndPassword.onPasswordReset({ user }, ctx.request);\n\t}\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(userId);\n\treturn ctx.json({ status: true });\n});\nconst verifyPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-password\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({ password: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The password to verify\" }) }),\n\tmetadata: {\n\t\tscope: \"server\",\n\t\topenapi: {\n\t\t\toperationId: \"verifyPassword\",\n\t\t\tdescription: \"Verify the current user's password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t},\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { password } = ctx.body;\n\tconst session = ctx.context.session;\n\tif (!await (0,_utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__.validatePassword)(ctx, {\n\t\tpassword,\n\t\tuserId: session.user.id\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvcGFzc3dvcmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ2U7QUFDNUI7QUFDeUI7QUFDUjtBQUNTO0FBQ0Q7QUFDcEI7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQTtBQUNBLDBFQUEwRSxZQUFZO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUVBQWtCO0FBQy9DO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLFNBQVMsc0NBQU8sVUFBVSxnRkFBZ0Y7QUFDMUcsY0FBYyx1Q0FBUSxVQUFVLG9RQUFvUTtBQUNwUyxFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEMsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQix5Q0FBeUM7QUFDL0U7QUFDQSxTQUFTLG9CQUFvQjtBQUM3Qix5RUFBeUUsdUJBQXVCO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDREQUFVO0FBQ1o7QUFDQSwrREFBK0QsT0FBTztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxtQkFBbUIsd0RBQU87QUFDMUIsMkJBQTJCLDREQUFVO0FBQ3JDO0FBQ0E7QUFDQSxnQ0FBZ0Msa0JBQWtCO0FBQ2xEO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsZ0JBQWdCLG9CQUFvQixrQkFBa0Isa0JBQWtCLGVBQWUsWUFBWTtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELHFDQUFxQyx5RUFBa0I7QUFDdkQ7QUFDQTtBQUNBLFFBQVEsdUNBQVEsR0FBRyxhQUFhLHVDQUFRLFVBQVUscUVBQXFFLEdBQUc7QUFDMUgsT0FBTywwRUFBVztBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSCxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLFFBQVE7QUFDakIsU0FBUyxjQUFjO0FBQ3ZCLDBGQUEwRix3QkFBd0I7QUFDbEgsZ0dBQWdHLE1BQU07QUFDdEcsd0lBQXdJLHdCQUF3QjtBQUNoSyxpRUFBaUUsT0FBTztBQUN4RSxDQUFDO0FBQ0Qsc0JBQXNCLHlFQUFrQjtBQUN4QztBQUNBO0FBQ0EsUUFBUSx1Q0FBUSxHQUFHLE9BQU8sdUNBQVEsZUFBZTtBQUNqRCxPQUFPLHVDQUFRO0FBQ2YsZUFBZSx1Q0FBUSxVQUFVLHdDQUF3QztBQUN6RSxTQUFTLHVDQUFRLFVBQVUsZ0RBQWdEO0FBQzNFLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsdUJBQXVCLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDMUYsU0FBUyxjQUFjO0FBQ3ZCO0FBQ0E7QUFDQSwrQ0FBK0MsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUN2SCwrQ0FBK0MsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUN0SCw4QkFBOEIsTUFBTTtBQUNwQztBQUNBLHFGQUFxRixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLE1BQU07QUFDL0U7QUFDQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCx1QkFBdUIseUVBQWtCO0FBQ3pDO0FBQ0EsT0FBTyx1Q0FBUSxHQUFHLFVBQVUsdUNBQVEsVUFBVSx1Q0FBdUMsR0FBRztBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUIsVUFBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsT0FBTyxvRUFBMEI7QUFDakMsQ0FBQztBQUNELFNBQVMsV0FBVztBQUNwQjtBQUNBLFlBQVkscUVBQWdCO0FBQzVCO0FBQ0E7QUFDQSxFQUFFLGFBQWEsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG1CQUFtQjtBQUNyRixtQkFBbUIsY0FBYztBQUNqQyxDQUFDOztBQUVEO0FBQzZGO0FBQzdGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxwYXNzd29yZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgb3JpZ2luQ2hlY2sgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IFwiLi4vbWlkZGxld2FyZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVQYXNzd29yZCB9IGZyb20gXCIuLi8uLi91dGlscy9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3Bhc3N3b3JkLnRzXG5mdW5jdGlvbiByZWRpcmVjdEVycm9yKGN0eCwgY2FsbGJhY2tVUkwsIHF1ZXJ5KSB7XG5cdGNvbnN0IHVybCA9IGNhbGxiYWNrVVJMID8gbmV3IFVSTChjYWxsYmFja1VSTCwgY3R4LmJhc2VVUkwpIDogbmV3IFVSTChgJHtjdHguYmFzZVVSTH0vZXJyb3JgKTtcblx0aWYgKHF1ZXJ5KSBPYmplY3QuZW50cmllcyhxdWVyeSkuZm9yRWFjaCgoW2ssIHZdKSA9PiB1cmwuc2VhcmNoUGFyYW1zLnNldChrLCB2KSk7XG5cdHJldHVybiB1cmwuaHJlZjtcbn1cbmZ1bmN0aW9uIHJlZGlyZWN0Q2FsbGJhY2soY3R4LCBjYWxsYmFja1VSTCwgcXVlcnkpIHtcblx0Y29uc3QgdXJsID0gbmV3IFVSTChjYWxsYmFja1VSTCwgY3R4LmJhc2VVUkwpO1xuXHRpZiAocXVlcnkpIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChbaywgdl0pID0+IHVybC5zZWFyY2hQYXJhbXMuc2V0KGssIHYpKTtcblx0cmV0dXJuIHVybC5ocmVmO1xufVxuY29uc3QgcmVxdWVzdFBhc3N3b3JkUmVzZXQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmVxdWVzdC1wYXNzd29yZC1yZXNldFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRlbWFpbDogei5lbWFpbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlciB0byBzZW5kIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG9cIiB9KSxcblx0XHRyZWRpcmVjdFRvOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHJlc2V0IHRoZWlyIHBhc3N3b3JkLiBJZiB0aGUgdG9rZW4gaXNuJ3QgdmFsaWQgb3IgZXhwaXJlZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/ZXJyb3I9SU5WQUxJRF9UT0tFTmAuIElmIHRoZSB0b2tlbiBpcyB2YWxpZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/dG9rZW49VkFMSURfVE9LRU5cIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwicmVxdWVzdFBhc3N3b3JkUmVzZXRcIixcblx0XHRkZXNjcmlwdGlvbjogXCJTZW5kIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG8gdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHN0YXR1czogeyB0eXBlOiBcImJvb2xlYW5cIiB9LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uc2VuZFJlc2V0UGFzc3dvcmQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJSZXNldCBwYXNzd29yZCBpc24ndCBlbmFibGVkLlBsZWFzZSBwYXNzIGFuIGVtYWlsQW5kUGFzc3dvcmQuc2VuZFJlc2V0UGFzc3dvcmQgZnVuY3Rpb24gaW4geW91ciBhdXRoIGNvbmZpZyFcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlJlc2V0IHBhc3N3b3JkIGlzbid0IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB7IGVtYWlsLCByZWRpcmVjdFRvIH0gPSBjdHguYm9keTtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwsIHsgaW5jbHVkZUFjY291bnRzOiB0cnVlIH0pO1xuXHRpZiAoIXVzZXIpIHtcblx0XHQvKipcblx0XHQqIFdlIHNpbXVsYXRlIHRoZSB2ZXJpZmljYXRpb24gdG9rZW4gZ2VuZXJhdGlvbiBhbmQgdGhlIGRhdGFiYXNlIGxvb2t1cFxuXHRcdCogdG8gbWl0aWdhdGUgdGltaW5nIGF0dGFja3MuXG5cdFx0Ki9cblx0XHRnZW5lcmF0ZUlkKDI0KTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKFwiZHVtbXktdmVyaWZpY2F0aW9uLXRva2VuXCIpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlJlc2V0IFBhc3N3b3JkOiBVc2VyIG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHRtZXNzYWdlOiBcIklmIHRoaXMgZW1haWwgZXhpc3RzIGluIG91ciBzeXN0ZW0sIGNoZWNrIHlvdXIgZW1haWwgZm9yIHRoZSByZXNldCBsaW5rXCJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBleHBpcmVzQXQgPSBnZXREYXRlKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5yZXNldFBhc3N3b3JkVG9rZW5FeHBpcmVzSW4gfHwgMzYwMCAqIDEsIFwic2VjXCIpO1xuXHRjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGdlbmVyYXRlSWQoMjQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdHZhbHVlOiB1c2VyLnVzZXIuaWQsXG5cdFx0aWRlbnRpZmllcjogYHJlc2V0LXBhc3N3b3JkOiR7dmVyaWZpY2F0aW9uVG9rZW59YCxcblx0XHRleHBpcmVzQXRcblx0fSk7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gcmVkaXJlY3RUbyA/IGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFRvKSA6IFwiXCI7XG5cdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3Jlc2V0LXBhc3N3b3JkLyR7dmVyaWZpY2F0aW9uVG9rZW59P2NhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQuc2VuZFJlc2V0UGFzc3dvcmQoe1xuXHRcdHVzZXI6IHVzZXIudXNlcixcblx0XHR1cmwsXG5cdFx0dG9rZW46IHZlcmlmaWNhdGlvblRva2VuXG5cdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3RhdHVzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IFwiSWYgdGhpcyBlbWFpbCBleGlzdHMgaW4gb3VyIHN5c3RlbSwgY2hlY2sgeW91ciBlbWFpbCBmb3IgdGhlIHJlc2V0IGxpbmtcIlxuXHR9KTtcbn0pO1xuY29uc3QgcmVxdWVzdFBhc3N3b3JkUmVzZXRDYWxsYmFjayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXNldC1wYXNzd29yZC86dG9rZW5cIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG9wZXJhdGlvbklkOiBcImZvcmdldFBhc3N3b3JkQ2FsbGJhY2tcIixcblx0cXVlcnk6IHoub2JqZWN0KHsgY2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmRcIiB9KSB9KSxcblx0dXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXNldFBhc3N3b3JkQ2FsbGJhY2tcIixcblx0XHRkZXNjcmlwdGlvbjogXCJSZWRpcmVjdHMgdGhlIHVzZXIgdG8gdGhlIGNhbGxiYWNrIFVSTCB3aXRoIHRoZSB0b2tlblwiLFxuXHRcdHBhcmFtZXRlcnM6IFt7XG5cdFx0XHRuYW1lOiBcInRva2VuXCIsXG5cdFx0XHRpbjogXCJwYXRoXCIsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXNldCB0aGUgcGFzc3dvcmRcIixcblx0XHRcdHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHR9LCB7XG5cdFx0XHRuYW1lOiBcImNhbGxiYWNrVVJMXCIsXG5cdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHJlc2V0IHRoZWlyIHBhc3N3b3JkXCIsXG5cdFx0XHRzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0fV0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgdG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IHRva2VuIH0gPSBjdHgucGFyYW1zO1xuXHRjb25zdCB7IGNhbGxiYWNrVVJMIH0gPSBjdHgucXVlcnk7XG5cdGlmICghdG9rZW4gfHwgIWNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QocmVkaXJlY3RFcnJvcihjdHguY29udGV4dCwgY2FsbGJhY2tVUkwsIHsgZXJyb3I6IFwiSU5WQUxJRF9UT0tFTlwiIH0pKTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShgcmVzZXQtcGFzc3dvcmQ6JHt0b2tlbn1gKTtcblx0aWYgKCF2ZXJpZmljYXRpb24gfHwgdmVyaWZpY2F0aW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBjdHgucmVkaXJlY3QocmVkaXJlY3RFcnJvcihjdHguY29udGV4dCwgY2FsbGJhY2tVUkwsIHsgZXJyb3I6IFwiSU5WQUxJRF9UT0tFTlwiIH0pKTtcblx0dGhyb3cgY3R4LnJlZGlyZWN0KHJlZGlyZWN0Q2FsbGJhY2soY3R4LmNvbnRleHQsIGNhbGxiYWNrVVJMLCB7IHRva2VuIH0pKTtcbn0pO1xuY29uc3QgcmVzZXRQYXNzd29yZCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXNldC1wYXNzd29yZFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInJlc2V0UGFzc3dvcmRcIixcblx0cXVlcnk6IHoub2JqZWN0KHsgdG9rZW46IHouc3RyaW5nKCkub3B0aW9uYWwoKSB9KS5vcHRpb25hbCgpLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0bmV3UGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgcGFzc3dvcmQgdG8gc2V0XCIgfSksXG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXNldCB0aGUgcGFzc3dvcmRcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwicmVzZXRQYXNzd29yZFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlJlc2V0IHRoZSBwYXNzd29yZCBmb3IgYSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHRva2VuID0gY3R4LmJvZHkudG9rZW4gfHwgY3R4LnF1ZXJ5Py50b2tlbjtcblx0aWYgKCF0b2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdGNvbnN0IHsgbmV3UGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBtaW5MZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZD8uY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuXHRjb25zdCBtYXhMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZD8uY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUIH0pO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoID4gbWF4TGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdGNvbnN0IGlkID0gYHJlc2V0LXBhc3N3b3JkOiR7dG9rZW59YDtcblx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShpZCk7XG5cdGlmICghdmVyaWZpY2F0aW9uIHx8IHZlcmlmaWNhdGlvbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdGNvbnN0IHVzZXJJZCA9IHZlcmlmaWNhdGlvbi52YWx1ZTtcblx0Y29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKG5ld1Bhc3N3b3JkKTtcblx0aWYgKCEoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyh1c2VySWQpKS5maW5kKChhYykgPT4gYWMucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpKSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlQWNjb3VudCh7XG5cdFx0dXNlcklkLFxuXHRcdHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuXHRcdHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcblx0XHRhY2NvdW50SWQ6IHVzZXJJZFxuXHR9KTtcblx0ZWxzZSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlUGFzc3dvcmQodXNlcklkLCBoYXNoZWRQYXNzd29yZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb24uaWQpO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5vblBhc3N3b3JkUmVzZXQpIHtcblx0XHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZCh1c2VySWQpO1xuXHRcdGlmICh1c2VyKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQub25QYXNzd29yZFJlc2V0KHsgdXNlciB9LCBjdHgucmVxdWVzdCk7XG5cdH1cblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucmV2b2tlU2Vzc2lvbnNPblBhc3N3b3JkUmVzZXQpIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyh1c2VySWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IHZlcmlmeVBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3ZlcmlmeS1wYXNzd29yZFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHsgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCB0byB2ZXJpZnlcIiB9KSB9KSxcblx0bWV0YWRhdGE6IHtcblx0XHRzY29wZTogXCJzZXJ2ZXJcIixcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRvcGVyYXRpb25JZDogXCJ2ZXJpZnlQYXNzd29yZFwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVmVyaWZ5IHRoZSBjdXJyZW50IHVzZXIncyBwYXNzd29yZFwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH0sXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IHBhc3N3b3JkIH0gPSBjdHguYm9keTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGlmICghYXdhaXQgdmFsaWRhdGVQYXNzd29yZChjdHgsIHtcblx0XHRwYXNzd29yZCxcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZFxuXHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfUEFTU1dPUkQgfSk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFzc3dvcmQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   freshSessionMiddleware: () => (/* binding */ freshSessionMiddleware),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionFromCtx: () => (/* binding */ getSessionFromCtx),\n/* harmony export */   listSessions: () => (/* binding */ listSessions),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* binding */ requestOnlySessionMiddleware),\n/* harmony export */   revokeOtherSessions: () => (/* binding */ revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* binding */ revokeSession),\n/* harmony export */   revokeSessions: () => (/* binding */ revokeSessions),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* binding */ sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* binding */ sessionMiddleware)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/session.ts\nconst getSession = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/get-session\", {\n\tmethod: \"GET\",\n\toperationId: \"getSession\",\n\tquery: _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionQuerySchema,\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"getSession\",\n\t\tdescription: \"Get the current session\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tnullable: true,\n\t\t\t\tproperties: {\n\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"session\", \"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\t\tif (!sessionCookieToken) return null;\n\t\tconst sessionDataCookie = (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getChunkedCookie)(ctx, ctx.context.authCookies.sessionData.name);\n\t\tlet sessionDataPayload = null;\n\t\tif (sessionDataCookie) {\n\t\t\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\t\t\tif (strategy === \"jwe\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecodeJWT)(sessionDataCookie, ctx.context.secret, \"better-auth-session\");\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else if (strategy === \"jwt\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyJWT)(sessionDataCookie, ctx.context.secret);\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__.base64Url.decode(sessionDataCookie)));\n\t\t\t\tif (parsed) if (await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(ctx.context.secret, JSON.stringify({\n\t\t\t\t\t...parsed.session,\n\t\t\t\t\texpiresAt: parsed.expiresAt\n\t\t\t\t}), parsed.signature)) sessionDataPayload = parsed;\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst dontRememberMe = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\t\t/**\n\t\t* If session data is present in the cookie, check if it should be used or refreshed\n\t\t*/\n\t\tif (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n\t\t\tconst session$1 = sessionDataPayload.session;\n\t\t\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\t\t\tlet expectedVersion = \"1\";\n\t\t\tif (versionConfig) {\n\t\t\t\tif (typeof versionConfig === \"string\") expectedVersion = versionConfig;\n\t\t\t\telse if (typeof versionConfig === \"function\") {\n\t\t\t\t\tconst result = versionConfig(session$1.session, session$1.user);\n\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((session$1.version || \"1\") !== expectedVersion) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\telse {\n\t\t\t\tconst cachedSessionExpiresAt = new Date(session$1.session.expiresAt);\n\t\t\t\tif (sessionDataPayload.expiresAt < Date.now() || cachedSessionExpiresAt < /* @__PURE__ */ new Date()) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\telse {\n\t\t\t\t\tconst cookieRefreshCache = ctx.context.sessionConfig.cookieRefreshCache;\n\t\t\t\t\tif (cookieRefreshCache === false) {\n\t\t\t\t\t\tctx.context.session = session$1;\n\t\t\t\t\t\tconst parsedSession$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedUser$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedSession$2,\n\t\t\t\t\t\t\tuser: parsedUser$2\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (sessionDataPayload.expiresAt - Date.now() < cookieRefreshCache.updateAge * 1e3) {\n\t\t\t\t\t\tconst newExpiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.session?.cookieCache?.maxAge || 300, \"sec\");\n\t\t\t\t\t\tconst refreshedSession = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\t\texpiresAt: newExpiresAt\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: session$1.user,\n\t\t\t\t\t\t\tupdatedAt: Date.now()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, refreshedSession, false);\n\t\t\t\t\t\tconst parsedRefreshedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.session,\n\t\t\t\t\t\t\texpiresAt: new Date(refreshedSession.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedRefreshedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t};\n\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n\t\tctx.context.session = session;\n\t\tif (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\tif (session)\n /**\n\t\t\t* if session expired clean up the session\n\t\t\t*/\n\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\treturn ctx.json(null);\n\t\t}\n\t\t/**\n\t\t* We don't need to update the session if the user doesn't want to be remembered\n\t\t* or if the session refresh is disabled\n\t\t*/\n\t\tif (dontRememberMe || ctx.query?.disableRefresh) {\n\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedSession$1,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tconst expiresIn = ctx.context.sessionConfig.expiresIn;\n\t\tconst updateAge = ctx.context.sessionConfig.updateAge;\n\t\tif (session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3 <= Date.now() && (!ctx.query?.disableRefresh || !ctx.context.options.session?.disableSessionRefresh)) {\n\t\t\tconst updatedSession = await ctx.context.internalAdapter.updateSession(session.session.token, {\n\t\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.sessionConfig.expiresIn, \"sec\"),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t});\n\t\t\tif (!updatedSession) {\n\t\t\t\t/**\n\t\t\t\t* Handle case where session update fails (e.g., concurrent deletion)\n\t\t\t\t*/\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\t\treturn ctx.json(null, { status: 401 });\n\t\t\t}\n\t\t\tconst maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setSessionCookie)(ctx, {\n\t\t\t\tsession: updatedSession,\n\t\t\t\tuser: session.user\n\t\t\t}, false, { maxAge });\n\t\t\tconst parsedUpdatedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, updatedSession);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedUpdatedSession,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, session, !!dontRememberMe);\n\t\tconst parsedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\tconst parsedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\treturn ctx.json({\n\t\t\tsession: parsedSession,\n\t\t\tuser: parsedUser\n\t\t});\n\t} catch (error) {\n\t\tctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t}\n});\nconst getSessionFromCtx = async (ctx, config) => {\n\tif (ctx.context.session) return ctx.context.session;\n\tconst session = await getSession()({\n\t\t...ctx,\n\t\tasResponse: false,\n\t\theaders: ctx.headers,\n\t\treturnHeaders: false,\n\t\treturnStatus: false,\n\t\tquery: {\n\t\t\t...config,\n\t\t\t...ctx.query\n\t\t}\n\t}).catch((e) => {\n\t\treturn null;\n\t});\n\tctx.context.session = session;\n\treturn session;\n};\n/**\n* The middleware forces the endpoint to require a valid session.\n*/\nconst sessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session and ignores cookie cache.\n* This should be used for sensitive operations like password changes, account deletion, etc.\n* to ensure that revoked sessions cannot be used even if they're still cached in cookies.\n*/\nconst sensitiveSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx, { disableCookieCache: true });\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware allows you to call the endpoint on the client if session is valid.\n* However, if called on the server, no session is required.\n*/\nconst requestOnlySessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session,\n* as well as making sure the session is fresh before proceeding.\n*\n* Session freshness check will be skipped if the session config's freshAge\n* is set to 0\n*/\nconst freshSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tif (ctx.context.sessionConfig.freshAge === 0) return { session };\n\tconst freshAge = ctx.context.sessionConfig.freshAge;\n\tconst lastUpdated = new Date(session.session.updatedAt || session.session.createdAt).getTime();\n\tif (!(Date.now() - lastUpdated < freshAge * 1e3)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: \"Session is not fresh\" });\n\treturn { session };\n});\n/**\n* user active sessions list\n*/\nconst listSessions = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/list-sessions\", {\n\tmethod: \"GET\",\n\toperationId: \"listUserSessions\",\n\tuse: [sessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserSessions\",\n\t\tdescription: \"List all active sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: { $ref: \"#/components/schemas/Session\" }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst activeSessions = (await ctx.context.internalAdapter.listSessions(ctx.context.session.user.id)).filter((session) => {\n\t\t\treturn session.expiresAt > /* @__PURE__ */ new Date();\n\t\t});\n\t\treturn ctx.json(activeSessions.map((session) => (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session)));\n\t} catch (e) {\n\t\tctx.context.logger.error(e);\n\t\tthrow ctx.error(\"INTERNAL_SERVER_ERROR\");\n\t}\n});\n/**\n* revoke a single session\n*/\nconst revokeSession = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-session\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_14__.object({ token: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The token to revoke\" }) }),\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke a single session\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: { token: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The token to revoke\"\n\t\t\t} },\n\t\t\trequired: [\"token\"]\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the session was revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token;\n\tif ((await ctx.context.internalAdapter.findSession(token))?.session.userId === ctx.context.session.user.id) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(token);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\n/**\n* revoke all user sessions\n*/\nconst revokeSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-sessions\", {\n\tmethod: \"POST\",\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tawait ctx.context.internalAdapter.deleteSessions(ctx.context.session.user.id);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\nconst revokeOtherSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-other-sessions\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tuse: [sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all other sessions for the user except the current one\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all other sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!session.user) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tconst otherSessions = (await ctx.context.internalAdapter.listSessions(session.user.id)).filter((session$1) => {\n\t\treturn session$1.expiresAt > /* @__PURE__ */ new Date();\n\t}).filter((session$1) => session$1.token !== ctx.context.session.session.token);\n\tawait Promise.all(otherSessions.map((session$1) => ctx.context.internalAdapter.deleteSession(session$1.token)));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=session.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQztBQUMyQjtBQUM5QztBQUN5QztBQUNyQztBQUMwRDtBQUNvQjtBQUNuRDtBQUNIO0FBQ2pCO0FBQ2Q7QUFDd0Q7QUFDM0I7QUFDSDtBQUNFOztBQUVyRDtBQUNBLHlCQUF5QiwwRUFBa0I7QUFDM0M7QUFDQTtBQUNBLFFBQVEsNkVBQXFCO0FBQzdCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0NBQXNDO0FBQ3RELGFBQWE7QUFDYixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRFQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtRUFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBLEtBQUs7QUFDTCwwQkFBMEIsMERBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIsc0VBQWEsQ0FBQyw4REFBTSxRQUFRLGlFQUFTO0FBQ3hELDBCQUEwQixvRUFBVTtBQUNwQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSyxnRUFBWTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxnRUFBWTtBQUNuRTtBQUNBO0FBQ0EsMEdBQTBHLGdFQUFZO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtFQUFrQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCwyQkFBMkIsK0RBQWU7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsMkJBQTJCLHdEQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0VBQWM7QUFDMUIscUNBQXFDLGtFQUFrQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxrQ0FBa0MsK0RBQWU7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsNkJBQTZCLGtFQUFrQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiwwQkFBMEIsK0RBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsdUVBQW1CO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRUFBa0I7QUFDN0Msd0JBQXdCLCtEQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBTztBQUN0QjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksdUVBQW1CO0FBQ3ZCLDRCQUE0QixhQUFhO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTLG9FQUFnQjtBQUN6QjtBQUNBO0FBQ0EsSUFBSSxXQUFXLFFBQVE7QUFDdkIsZ0NBQWdDLGtFQUFrQjtBQUNsRCx3QkFBd0IsK0RBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsUUFBUSxrRUFBYztBQUN0Qix3QkFBd0Isa0VBQWtCO0FBQzFDLHFCQUFxQiwrREFBZTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNIO0FBQ0EsWUFBWSxpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQ2pHO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNEVBQW9CO0FBQzlDO0FBQ0Esa0NBQWtDLGlEQUFRO0FBQzFDLFVBQVU7QUFDVixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0RUFBb0I7QUFDdkQsZ0RBQWdELDBCQUEwQjtBQUMxRSxrQ0FBa0MsaURBQVE7QUFDMUMsVUFBVTtBQUNWLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw0RUFBb0I7QUFDekQ7QUFDQSxrRUFBa0UsaURBQVE7QUFDMUUsVUFBVTtBQUNWLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0RUFBb0I7QUFDbkQ7QUFDQSxrQ0FBa0MsaURBQVE7QUFDMUMsd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQSw2REFBNkQsaURBQVEsZ0JBQWdCLGlDQUFpQztBQUN0SCxVQUFVO0FBQ1YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwRUFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0RBQWtELGtFQUFrQjtBQUNwRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwRUFBa0I7QUFDeEM7QUFDQSxPQUFPLHdDQUFRLEdBQUcsT0FBTyx3Q0FBUSxVQUFVLG9DQUFvQyxHQUFHO0FBQ2xGO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpQkFBaUIsV0FBVyxzQkFBc0I7QUFDbEQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLFNBQVM7QUFDVCxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFlBQVksaURBQVE7QUFDcEI7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBFQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELDRCQUE0QiwwRUFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDhCQUE4QixpREFBUTtBQUN0QztBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQzs7QUFFRDtBQUNnTjtBQUNoTiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcc2Vzc2lvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vZGIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzeW1tZXRyaWNEZWNvZGVKV1QsIHZlcmlmeUpXVCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vand0Lm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvc2Vzc2lvbi1zdG9yZS5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUsIGV4cGlyZUNvb2tpZSwgc2V0Q29va2llQ2FjaGUsIHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuaW1wb3J0IHsgYmluYXJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iaW5hcnlcIjtcbmltcG9ydCB7IGNyZWF0ZUhNQUMgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2htYWNcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3Nlc3Npb24udHNcbmNvbnN0IGdldFNlc3Npb24gPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZ2V0LXNlc3Npb25cIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG9wZXJhdGlvbklkOiBcImdldFNlc3Npb25cIixcblx0cXVlcnk6IGdldFNlc3Npb25RdWVyeVNjaGVtYSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJnZXRTZXNzaW9uXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiR2V0IHRoZSBjdXJyZW50IHNlc3Npb25cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRzZXNzaW9uOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiIH0sXG5cdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzZXNzaW9uXCIsIFwidXNlclwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2Vzc2lvbkNvb2tpZVRva2VuID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0XHRpZiAoIXNlc3Npb25Db29raWVUb2tlbikgcmV0dXJuIG51bGw7XG5cdFx0Y29uc3Qgc2Vzc2lvbkRhdGFDb29raWUgPSBnZXRDaHVua2VkQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSk7XG5cdFx0bGV0IHNlc3Npb25EYXRhUGF5bG9hZCA9IG51bGw7XG5cdFx0aWYgKHNlc3Npb25EYXRhQ29va2llKSB7XG5cdFx0XHRjb25zdCBzdHJhdGVneSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnN0cmF0ZWd5IHx8IFwiY29tcGFjdFwiO1xuXHRcdFx0aWYgKHN0cmF0ZWd5ID09PSBcImp3ZVwiKSB7XG5cdFx0XHRcdGNvbnN0IHBheWxvYWQgPSBhd2FpdCBzeW1tZXRyaWNEZWNvZGVKV1Qoc2Vzc2lvbkRhdGFDb29raWUsIGN0eC5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1zZXNzaW9uXCIpO1xuXHRcdFx0XHRpZiAocGF5bG9hZCAmJiBwYXlsb2FkLnNlc3Npb24gJiYgcGF5bG9hZC51c2VyKSBzZXNzaW9uRGF0YVBheWxvYWQgPSB7XG5cdFx0XHRcdFx0c2Vzc2lvbjoge1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGF5bG9hZC5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogcGF5bG9hZC51c2VyLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBwYXlsb2FkLnVwZGF0ZWRBdCxcblx0XHRcdFx0XHRcdHZlcnNpb246IHBheWxvYWQudmVyc2lvblxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZXhwaXJlc0F0OiBwYXlsb2FkLmV4cCA/IHBheWxvYWQuZXhwICogMWUzIDogRGF0ZS5ub3coKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSB7XG5cdFx0XHRcdGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlKV1Qoc2Vzc2lvbkRhdGFDb29raWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdFx0XHRcdGlmIChwYXlsb2FkICYmIHBheWxvYWQuc2Vzc2lvbiAmJiBwYXlsb2FkLnVzZXIpIHNlc3Npb25EYXRhUGF5bG9hZCA9IHtcblx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXlsb2FkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiBwYXlsb2FkLnVzZXIsXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHBheWxvYWQudXBkYXRlZEF0LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogcGF5bG9hZC52ZXJzaW9uXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHBheWxvYWQuZXhwID8gcGF5bG9hZC5leHAgKiAxZTMgOiBEYXRlLm5vdygpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHBhcnNlZCA9IHNhZmVKU09OUGFyc2UoYmluYXJ5LmRlY29kZShiYXNlNjRVcmwuZGVjb2RlKHNlc3Npb25EYXRhQ29va2llKSkpO1xuXHRcdFx0XHRpZiAocGFyc2VkKSBpZiAoYXdhaXQgY3JlYXRlSE1BQyhcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS52ZXJpZnkoY3R4LmNvbnRleHQuc2VjcmV0LCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0Li4ucGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdFx0ZXhwaXJlc0F0OiBwYXJzZWQuZXhwaXJlc0F0XG5cdFx0XHRcdH0pLCBwYXJzZWQuc2lnbmF0dXJlKSkgc2Vzc2lvbkRhdGFQYXlsb2FkID0gcGFyc2VkO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGRvbnRSZW1lbWJlck1lID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdC8qKlxuXHRcdCogSWYgc2Vzc2lvbiBkYXRhIGlzIHByZXNlbnQgaW4gdGhlIGNvb2tpZSwgY2hlY2sgaWYgaXQgc2hvdWxkIGJlIHVzZWQgb3IgcmVmcmVzaGVkXG5cdFx0Ki9cblx0XHRpZiAoc2Vzc2lvbkRhdGFQYXlsb2FkPy5zZXNzaW9uICYmIGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LmVuYWJsZWQgJiYgIWN0eC5xdWVyeT8uZGlzYWJsZUNvb2tpZUNhY2hlKSB7XG5cdFx0XHRjb25zdCBzZXNzaW9uJDEgPSBzZXNzaW9uRGF0YVBheWxvYWQuc2Vzc2lvbjtcblx0XHRcdGNvbnN0IHZlcnNpb25Db25maWcgPSBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy52ZXJzaW9uO1xuXHRcdFx0bGV0IGV4cGVjdGVkVmVyc2lvbiA9IFwiMVwiO1xuXHRcdFx0aWYgKHZlcnNpb25Db25maWcpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcInN0cmluZ1wiKSBleHBlY3RlZFZlcnNpb24gPSB2ZXJzaW9uQ29uZmlnO1xuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgdmVyc2lvbkNvbmZpZyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gdmVyc2lvbkNvbmZpZyhzZXNzaW9uJDEuc2Vzc2lvbiwgc2Vzc2lvbiQxLnVzZXIpO1xuXHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgPyBhd2FpdCByZXN1bHQgOiByZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICgoc2Vzc2lvbiQxLnZlcnNpb24gfHwgXCIxXCIpICE9PSBleHBlY3RlZFZlcnNpb24pIGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zdCBjYWNoZWRTZXNzaW9uRXhwaXJlc0F0ID0gbmV3IERhdGUoc2Vzc2lvbiQxLnNlc3Npb24uZXhwaXJlc0F0KTtcblx0XHRcdFx0aWYgKHNlc3Npb25EYXRhUGF5bG9hZC5leHBpcmVzQXQgPCBEYXRlLm5vdygpIHx8IGNhY2hlZFNlc3Npb25FeHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBjb29raWVSZWZyZXNoQ2FjaGUgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmNvb2tpZVJlZnJlc2hDYWNoZTtcblx0XHRcdFx0XHRpZiAoY29va2llUmVmcmVzaENhY2hlID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb24kMTtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZFNlc3Npb24kMiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLmV4cGlyZXNBdCksXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnNlc3Npb24uY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZFVzZXIkMiA9IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS51c2VyLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnVzZXIudXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRTZXNzaW9uJDIsXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMlxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChzZXNzaW9uRGF0YVBheWxvYWQuZXhwaXJlc0F0IC0gRGF0ZS5ub3coKSA8IGNvb2tpZVJlZnJlc2hDYWNoZS51cGRhdGVBZ2UgKiAxZTMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5ld0V4cGlyZXNBdCA9IGdldERhdGUoY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMCwgXCJzZWNcIik7XG5cdFx0XHRcdFx0XHRjb25zdCByZWZyZXNoZWRTZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXdFeHBpcmVzQXRcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dXNlcjogc2Vzc2lvbiQxLnVzZXIsXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGF3YWl0IHNldENvb2tpZUNhY2hlKGN0eCwgcmVmcmVzaGVkU2Vzc2lvbiwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkUmVmcmVzaGVkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShyZWZyZXNoZWRTZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShyZWZyZXNoZWRTZXNzaW9uLnNlc3Npb24uY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShyZWZyZXNoZWRTZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRSZWZyZXNoZWRVc2VyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucmVmcmVzaGVkU2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24udXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24udXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGN0eC5jb250ZXh0LnNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFJlZnJlc2hlZFNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFJlZnJlc2hlZFVzZXJcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRSZWZyZXNoZWRTZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHR1c2VyOiBwYXJzZWRSZWZyZXNoZWRVc2VyXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgcGFyc2VkU2Vzc2lvbiQxID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5leHBpcmVzQXQpLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgcGFyc2VkVXNlciQxID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS51c2VyLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEudXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMSxcblx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMSxcblx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24oc2Vzc2lvbkNvb2tpZVRva2VuKTtcblx0XHRjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbjtcblx0XHRpZiAoIXNlc3Npb24gfHwgc2Vzc2lvbi5zZXNzaW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB7XG5cdFx0XHRkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdFx0XHRpZiAoc2Vzc2lvbilcbiAvKipcblx0XHRcdCogaWYgc2Vzc2lvbiBleHBpcmVkIGNsZWFuIHVwIHRoZSBzZXNzaW9uXG5cdFx0XHQqL1xuXHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuKTtcblx0XHRcdHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHR9XG5cdFx0LyoqXG5cdFx0KiBXZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgc2Vzc2lvbiBpZiB0aGUgdXNlciBkb2Vzbid0IHdhbnQgdG8gYmUgcmVtZW1iZXJlZFxuXHRcdCogb3IgaWYgdGhlIHNlc3Npb24gcmVmcmVzaCBpcyBkaXNhYmxlZFxuXHRcdCovXG5cdFx0aWYgKGRvbnRSZW1lbWJlck1lIHx8IGN0eC5xdWVyeT8uZGlzYWJsZVJlZnJlc2gpIHtcblx0XHRcdGNvbnN0IHBhcnNlZFNlc3Npb24kMSA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnNlc3Npb24pO1xuXHRcdFx0Y29uc3QgcGFyc2VkVXNlciQxID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcik7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRTZXNzaW9uJDEsXG5cdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGV4cGlyZXNJbiA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZXhwaXJlc0luO1xuXHRcdGNvbnN0IHVwZGF0ZUFnZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcudXBkYXRlQWdlO1xuXHRcdGlmIChzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0LnZhbHVlT2YoKSAtIGV4cGlyZXNJbiAqIDFlMyArIHVwZGF0ZUFnZSAqIDFlMyA8PSBEYXRlLm5vdygpICYmICghY3R4LnF1ZXJ5Py5kaXNhYmxlUmVmcmVzaCB8fCAhY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5kaXNhYmxlU2Vzc2lvblJlZnJlc2gpKSB7XG5cdFx0XHRjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbi50b2tlbiwge1xuXHRcdFx0XHRleHBpcmVzQXQ6IGdldERhdGUoY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW4sIFwic2VjXCIpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHR9KTtcblx0XHRcdGlmICghdXBkYXRlZFNlc3Npb24pIHtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogSGFuZGxlIGNhc2Ugd2hlcmUgc2Vzc2lvbiB1cGRhdGUgZmFpbHMgKGUuZy4sIGNvbmN1cnJlbnQgZGVsZXRpb24pXG5cdFx0XHRcdCovXG5cdFx0XHRcdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwsIHsgc3RhdHVzOiA0MDEgfSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBtYXhBZ2UgPSAodXBkYXRlZFNlc3Npb24uZXhwaXJlc0F0LnZhbHVlT2YoKSAtIERhdGUubm93KCkpIC8gMWUzO1xuXHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0c2Vzc2lvbjogdXBkYXRlZFNlc3Npb24sXG5cdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdFx0fSwgZmFsc2UsIHsgbWF4QWdlIH0pO1xuXHRcdFx0Y29uc3QgcGFyc2VkVXBkYXRlZFNlc3Npb24gPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXBkYXRlZFNlc3Npb24pO1xuXHRcdFx0Y29uc3QgcGFyc2VkVXNlciQxID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcik7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRVcGRhdGVkU2Vzc2lvbixcblx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0YXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uLCAhIWRvbnRSZW1lbWJlck1lKTtcblx0XHRjb25zdCBwYXJzZWRTZXNzaW9uID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24uc2Vzc2lvbik7XG5cdFx0Y29uc3QgcGFyc2VkVXNlciA9IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnVzZXIpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzZXNzaW9uOiBwYXJzZWRTZXNzaW9uLFxuXHRcdFx0dXNlcjogcGFyc2VkVXNlclxuXHRcdH0pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1NFU1NJT04gfSk7XG5cdH1cbn0pO1xuY29uc3QgZ2V0U2Vzc2lvbkZyb21DdHggPSBhc3luYyAoY3R4LCBjb25maWcpID0+IHtcblx0aWYgKGN0eC5jb250ZXh0LnNlc3Npb24pIHJldHVybiBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbigpKHtcblx0XHQuLi5jdHgsXG5cdFx0YXNSZXNwb25zZTogZmFsc2UsXG5cdFx0aGVhZGVyczogY3R4LmhlYWRlcnMsXG5cdFx0cmV0dXJuSGVhZGVyczogZmFsc2UsXG5cdFx0cmV0dXJuU3RhdHVzOiBmYWxzZSxcblx0XHRxdWVyeToge1xuXHRcdFx0Li4uY29uZmlnLFxuXHRcdFx0Li4uY3R4LnF1ZXJ5XG5cdFx0fVxuXHR9KS5jYXRjaCgoZSkgPT4ge1xuXHRcdHJldHVybiBudWxsO1xuXHR9KTtcblx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb247XG5cdHJldHVybiBzZXNzaW9uO1xufTtcbi8qKlxuKiBUaGUgbWlkZGxld2FyZSBmb3JjZXMgdGhlIGVuZHBvaW50IHRvIHJlcXVpcmUgYSB2YWxpZCBzZXNzaW9uLlxuKi9cbmNvbnN0IHNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIFRoaXMgbWlkZGxld2FyZSBmb3JjZXMgdGhlIGVuZHBvaW50IHRvIHJlcXVpcmUgYSB2YWxpZCBzZXNzaW9uIGFuZCBpZ25vcmVzIGNvb2tpZSBjYWNoZS5cbiogVGhpcyBzaG91bGQgYmUgdXNlZCBmb3Igc2Vuc2l0aXZlIG9wZXJhdGlvbnMgbGlrZSBwYXNzd29yZCBjaGFuZ2VzLCBhY2NvdW50IGRlbGV0aW9uLCBldGMuXG4qIHRvIGVuc3VyZSB0aGF0IHJldm9rZWQgc2Vzc2lvbnMgY2Fubm90IGJlIHVzZWQgZXZlbiBpZiB0aGV5J3JlIHN0aWxsIGNhY2hlZCBpbiBjb29raWVzLlxuKi9cbmNvbnN0IHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4LCB7IGRpc2FibGVDb29raWVDYWNoZTogdHJ1ZSB9KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIFRoaXMgbWlkZGxld2FyZSBhbGxvd3MgeW91IHRvIGNhbGwgdGhlIGVuZHBvaW50IG9uIHRoZSBjbGllbnQgaWYgc2Vzc2lvbiBpcyB2YWxpZC5cbiogSG93ZXZlciwgaWYgY2FsbGVkIG9uIHRoZSBzZXJ2ZXIsIG5vIHNlc3Npb24gaXMgcmVxdWlyZWQuXG4qL1xuY29uc3QgcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSA9IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmICghc2Vzc2lvbj8uc2Vzc2lvbiAmJiAoY3R4LnJlcXVlc3QgfHwgY3R4LmhlYWRlcnMpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIFRoaXMgbWlkZGxld2FyZSBmb3JjZXMgdGhlIGVuZHBvaW50IHRvIHJlcXVpcmUgYSB2YWxpZCBzZXNzaW9uLFxuKiBhcyB3ZWxsIGFzIG1ha2luZyBzdXJlIHRoZSBzZXNzaW9uIGlzIGZyZXNoIGJlZm9yZSBwcm9jZWVkaW5nLlxuKlxuKiBTZXNzaW9uIGZyZXNobmVzcyBjaGVjayB3aWxsIGJlIHNraXBwZWQgaWYgdGhlIHNlc3Npb24gY29uZmlnJ3MgZnJlc2hBZ2VcbiogaXMgc2V0IHRvIDBcbiovXG5jb25zdCBmcmVzaFNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdGlmIChjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlID09PSAwKSByZXR1cm4geyBzZXNzaW9uIH07XG5cdGNvbnN0IGZyZXNoQWdlID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5mcmVzaEFnZTtcblx0Y29uc3QgbGFzdFVwZGF0ZWQgPSBuZXcgRGF0ZShzZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0IHx8IHNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLmdldFRpbWUoKTtcblx0aWYgKCEoRGF0ZS5ub3coKSAtIGxhc3RVcGRhdGVkIDwgZnJlc2hBZ2UgKiAxZTMpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBcIlNlc3Npb24gaXMgbm90IGZyZXNoXCIgfSk7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIHVzZXIgYWN0aXZlIHNlc3Npb25zIGxpc3RcbiovXG5jb25zdCBsaXN0U2Vzc2lvbnMgPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbGlzdC1zZXNzaW9uc1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0b3BlcmF0aW9uSWQ6IFwibGlzdFVzZXJTZXNzaW9uc1wiLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwibGlzdFVzZXJTZXNzaW9uc1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkxpc3QgYWxsIGFjdGl2ZSBzZXNzaW9ucyBmb3IgdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRpdGVtczogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1Nlc3Npb25cIiB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBhY3RpdmVTZXNzaW9ucyA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlzdFNlc3Npb25zKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkpLmZpbHRlcigoc2Vzc2lvbikgPT4ge1xuXHRcdFx0cmV0dXJuIHNlc3Npb24uZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKGFjdGl2ZVNlc3Npb25zLm1hcCgoc2Vzc2lvbikgPT4gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24pKSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoZSk7XG5cdFx0dGhyb3cgY3R4LmVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuXHR9XG59KTtcbi8qKlxuKiByZXZva2UgYSBzaW5nbGUgc2Vzc2lvblxuKi9cbmNvbnN0IHJldm9rZVNlc3Npb24gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmV2b2tlLXNlc3Npb25cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7IHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gcmV2b2tlXCIgfSkgfSksXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZXZva2UgYSBzaW5nbGUgc2Vzc2lvblwiLFxuXHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0cHJvcGVydGllczogeyB0b2tlbjoge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gcmV2b2tlXCJcblx0XHRcdH0gfSxcblx0XHRcdHJlcXVpcmVkOiBbXCJ0b2tlblwiXVxuXHRcdH0gfSB9IH0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBzZXNzaW9uIHdhcyByZXZva2VkIHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHRva2VuID0gY3R4LmJvZHkudG9rZW47XG5cdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRTZXNzaW9uKHRva2VuKSk/LnNlc3Npb24udXNlcklkID09PSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQpIHRyeSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24odG9rZW4pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZXJyb3IgPyBlcnJvci5uYW1lIDogXCJcIiwgZXJyb3IpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiKTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbi8qKlxuKiByZXZva2UgYWxsIHVzZXIgc2Vzc2lvbnNcbiovXG5jb25zdCByZXZva2VTZXNzaW9ucyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXZva2Utc2Vzc2lvbnNcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiUmV2b2tlIGFsbCBzZXNzaW9ucyBmb3IgdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgYWxsIHNlc3Npb25zIHdlcmUgcmV2b2tlZCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHR0cnkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZXJyb3IgPyBlcnJvci5uYW1lIDogXCJcIiwgZXJyb3IpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiKTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IHJldm9rZU90aGVyU2Vzc2lvbnMgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmV2b2tlLW90aGVyLXNlc3Npb25zXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJldm9rZSBhbGwgb3RoZXIgc2Vzc2lvbnMgZm9yIHRoZSB1c2VyIGV4Y2VwdCB0aGUgY3VycmVudCBvbmVcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgYWxsIG90aGVyIHNlc3Npb25zIHdlcmUgcmV2b2tlZCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKCFzZXNzaW9uLnVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3Qgb3RoZXJTZXNzaW9ucyA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlzdFNlc3Npb25zKHNlc3Npb24udXNlci5pZCkpLmZpbHRlcigoc2Vzc2lvbiQxKSA9PiB7XG5cdFx0cmV0dXJuIHNlc3Npb24kMS5leHBpcmVzQXQgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0fSkuZmlsdGVyKChzZXNzaW9uJDEpID0+IHNlc3Npb24kMS50b2tlbiAhPT0gY3R4LmNvbnRleHQuc2Vzc2lvbi5zZXNzaW9uLnRva2VuKTtcblx0YXdhaXQgUHJvbWlzZS5hbGwob3RoZXJTZXNzaW9ucy5tYXAoKHNlc3Npb24kMSkgPT4gY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oc2Vzc2lvbiQxLnRva2VuKSkpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlzdFNlc3Npb25zLCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signInEmail: () => (/* binding */ signInEmail),\n/* harmony export */   signInSocial: () => (/* binding */ signInSocial)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-in.ts\nconst socialSignInBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to after the user has signed in\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to if an error happens\" }).optional(),\n\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__.SocialProviderListEnum,\n\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\tidToken: zod__WEBPACK_IMPORTED_MODULE_11__.optional(zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"ID token from the provider\" }),\n\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Nonce used to generate the token\" }).optional(),\n\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Access token from the provider\" }).optional(),\n\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Refresh token from the provider\" }).optional(),\n\t\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_11__.number().meta({ description: \"Expiry date of the token\" }).optional()\n\t})),\n\tscopes: zod__WEBPACK_IMPORTED_MODULE_11__.array(zod__WEBPACK_IMPORTED_MODULE_11__.string()).meta({ description: \"Array of scopes to request from the provider. This will override the default scopes passed.\" }).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\" }).optional(),\n\tloginHint: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The login hint to use for the authorization code request\" }).optional(),\n\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.any()).optional().meta({ description: \"Additional data to be passed through the OAuth flow\" })\n});\nconst signInSocial = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/social\", {\n\tmethod: \"POST\",\n\toperationId: \"socialSignIn\",\n\tbody: socialSignInBodySchema,\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\tdescription: \"Sign in with a social provider\",\n\t\t\toperationId: \"socialSignIn\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttoken: { type: \"string\" },\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: { type: \"string\" },\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst userInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!userInfo || !userInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tif (!userInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tconst data = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__.handleOAuthUserInfo)(c, {\n\t\t\tuserInfo: {\n\t\t\t\t...userInfo.user,\n\t\t\t\temail: userInfo.user.email,\n\t\t\t\tid: String(userInfo.user.id),\n\t\t\t\tname: userInfo.user.name || \"\",\n\t\t\t\timage: userInfo.user.image,\n\t\t\t\temailVerified: userInfo.user.emailVerified || false\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: String(userInfo.user.id),\n\t\t\t\taccessToken: c.body.idToken.accessToken\n\t\t\t},\n\t\t\tcallbackURL: c.body.callbackURL,\n\t\t\tdisableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n\t\t});\n\t\tif (data.error) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: data.error });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(c, data.data);\n\t\treturn c.json({\n\t\t\tredirect: false,\n\t\t\ttoken: data.data.session.token,\n\t\t\turl: void 0,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(c.context.options, data.data.user)\n\t\t});\n\t}\n\tconst { codeVerifier, state } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateState)(c, void 0, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate,\n\t\tcodeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes,\n\t\tloginHint: c.body.loginHint\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst signInEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signInEmail\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.formCsrfMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Email of the user\" }),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Password of the user\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to use as a redirect for email verification\" }).optional(),\n\t\trememberMe: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"If this is false, the session will not be remembered. Default is `true`.\" }).default(true).optional()\n\t}),\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signInEmail\",\n\t\t\tdescription: \"Sign in with email and password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Session token\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tif (!ctx.context.options?.emailAndPassword?.enabled) {\n\t\tctx.context.logger.error(\"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password is not enabled\" });\n\t}\n\tconst { email, password } = ctx.body;\n\tif (!zod__WEBPACK_IMPORTED_MODULE_11__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"User not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst credentialAccount = user.accounts.find((a) => a.providerId === \"credential\");\n\tif (!credentialAccount) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Credential account not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst currentPassword = credentialAccount?.password;\n\tif (!currentPassword) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Password not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (!await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword\n\t})) {\n\t\tctx.context.logger.error(\"Invalid password\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n\t\tif (!ctx.context.options?.emailVerification?.sendVerificationEmail) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\tif (ctx.context.options?.emailVerification?.sendOnSignIn) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__.createEmailVerificationToken)(ctx.context.secret, user.user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: user.user,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t}\n\tconst session = await ctx.context.internalAdapter.createSession(user.user.id, ctx.body.rememberMe === false);\n\tif (!session) {\n\t\tctx.context.logger.error(\"Failed to create session\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t}\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser: user.user\n\t}, ctx.body.rememberMe === false);\n\tif (ctx.body.callbackURL) ctx.setHeader(\"Location\", ctx.body.callbackURL);\n\treturn ctx.json({\n\t\tredirect: !!ctx.body.callbackURL,\n\t\ttoken: session.token,\n\t\turl: ctx.body.callbackURL,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user.user)\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-in.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvc2lnbi1pbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDZTtBQUNWO0FBQ0o7QUFDYTtBQUNJO0FBQ3pDO0FBQzRCO0FBQ3BCO0FBQ2Q7QUFDbUQ7QUFDakI7O0FBRTNEO0FBQ0EsK0JBQStCLHdDQUFRO0FBQ3ZDLGNBQWMsd0NBQVEsVUFBVSx5RUFBeUU7QUFDekcscUJBQXFCLHdDQUFRO0FBQzdCLG1CQUFtQix3Q0FBUSxVQUFVLGdFQUFnRTtBQUNyRyxXQUFXLHNGQUFzQjtBQUNqQyxrQkFBa0IseUNBQVMsVUFBVSw0R0FBNEc7QUFDakosVUFBVSwwQ0FBVSxDQUFDLHdDQUFRO0FBQzdCLFNBQVMsd0NBQVEsVUFBVSwyQ0FBMkM7QUFDdEUsU0FBUyx3Q0FBUSxVQUFVLGlEQUFpRDtBQUM1RSxlQUFlLHdDQUFRLFVBQVUsK0NBQStDO0FBQ2hGLGdCQUFnQix3Q0FBUSxVQUFVLGdEQUFnRDtBQUNsRixhQUFhLHdDQUFRLFVBQVUseUNBQXlDO0FBQ3hFLEVBQUU7QUFDRixTQUFTLHVDQUFPLENBQUMsd0NBQVEsV0FBVyw0R0FBNEc7QUFDaEosZ0JBQWdCLHlDQUFTLFVBQVUsd0dBQXdHO0FBQzNJLFlBQVksd0NBQVEsVUFBVSx5RUFBeUU7QUFDdkcsaUJBQWlCLHdDQUFRLENBQUMsd0NBQVEsSUFBSSxxQ0FBSyxzQkFBc0Isb0VBQW9FO0FBQ3JJLENBQUM7QUFDRCwyQkFBMkIsMEVBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLGFBQWEsZ0JBQWdCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0Esb0dBQW9HLDJCQUEyQjtBQUMvSCxZQUFZLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLDJCQUEyQjtBQUMxRyxhQUFhLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQix5QkFBeUI7QUFDdkY7QUFDQSxVQUFVLGVBQWU7QUFDekI7QUFDQSxnREFBZ0QsMkJBQTJCO0FBQzNFLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdURBQXVELDJCQUEyQjtBQUNsRixhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiwwQkFBMEI7QUFDM0Y7QUFDQTtBQUNBLG9EQUFvRCwyQkFBMkI7QUFDL0UsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsdUJBQXVCO0FBQ3hGO0FBQ0EscUJBQXFCLDZFQUFtQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNILDRCQUE0QixpREFBUSxtQkFBbUIscUJBQXFCO0FBQzVFLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrREFBZTtBQUN4QixHQUFHO0FBQ0g7QUFDQSxTQUFTLHNCQUFzQixRQUFRLGdFQUFhO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0IsWUFBWSxZQUFZO0FBQzVEO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELDBCQUEwQiwwRUFBa0I7QUFDNUM7QUFDQTtBQUNBLE9BQU8sNkVBQWtCO0FBQ3pCLE9BQU8sd0NBQVE7QUFDZixTQUFTLHdDQUFRLFVBQVUsa0NBQWtDO0FBQzdELFlBQVksd0NBQVEsVUFBVSxxQ0FBcUM7QUFDbkUsZUFBZSx3Q0FBUSxVQUFVLHlFQUF5RTtBQUMxRyxjQUFjLHlDQUFTLFVBQVUseUZBQXlGO0FBQzFILEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQiw4Q0FBOEM7QUFDcEY7QUFDQSxTQUFTLGtCQUFrQjtBQUMzQixNQUFNLHVDQUFPLHVDQUF1QyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ3ZILHlFQUF5RSx1QkFBdUI7QUFDaEc7QUFDQTtBQUNBLCtDQUErQyxPQUFPO0FBQ3RELFlBQVksaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDRCQUE0QjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxPQUFPO0FBQ3BFLFlBQVksaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDRCQUE0QjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxPQUFPO0FBQzFELFlBQVksaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDRCQUE0QjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLFlBQVksaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLDRCQUE0QjtBQUM1RjtBQUNBO0FBQ0EsZ0ZBQWdGLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDdEo7QUFDQSx1QkFBdUIscUZBQTRCO0FBQ25EO0FBQ0Esa0JBQWtCLG9CQUFvQixzQkFBc0IsTUFBTSxlQUFlLFlBQVk7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxZQUFZLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDM0Y7QUFDQSxPQUFPLG9FQUFnQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFlO0FBQ3ZCLEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ3FDO0FBQ3JDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxzaWduLWluLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZm9ybUNzcmZNaWRkbGV3YXJlIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3RhdGUgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgaGFuZGxlT0F1dGhVc2VySW5mbyB9IGZyb20gXCIuLi8uLi9vYXV0aDIvbGluay1hY2NvdW50Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiB9IGZyb20gXCIuL2VtYWlsLXZlcmlmaWNhdGlvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgU29jaWFsUHJvdmlkZXJMaXN0RW51bSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9zb2NpYWwtcHJvdmlkZXJzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9zaWduLWluLnRzXG5jb25zdCBzb2NpYWxTaWduSW5Cb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGhhcyBzaWduZWQgaW5cIiB9KS5vcHRpb25hbCgpLFxuXHRuZXdVc2VyQ2FsbGJhY2tVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZXJyb3JDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGlmIGFuIGVycm9yIGhhcHBlbnNcIiB9KS5vcHRpb25hbCgpLFxuXHRwcm92aWRlcjogU29jaWFsUHJvdmlkZXJMaXN0RW51bSxcblx0ZGlzYWJsZVJlZGlyZWN0OiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGlzYWJsZSBhdXRvbWF0aWMgcmVkaXJlY3Rpb24gdG8gdGhlIHByb3ZpZGVyLiBVc2VmdWwgZm9yIGhhbmRsaW5nIHRoZSByZWRpcmVjdGlvbiB5b3Vyc2VsZlwiIH0pLm9wdGlvbmFsKCksXG5cdGlkVG9rZW46IHoub3B0aW9uYWwoei5vYmplY3Qoe1xuXHRcdHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJJRCB0b2tlbiBmcm9tIHRoZSBwcm92aWRlclwiIH0pLFxuXHRcdG5vbmNlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJOb25jZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSB0b2tlblwiIH0pLm9wdGlvbmFsKCksXG5cdFx0YWNjZXNzVG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFjY2VzcyB0b2tlbiBmcm9tIHRoZSBwcm92aWRlclwiIH0pLm9wdGlvbmFsKCksXG5cdFx0cmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJSZWZyZXNoIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCIgfSkub3B0aW9uYWwoKSxcblx0XHRleHBpcmVzQXQ6IHoubnVtYmVyKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkV4cGlyeSBkYXRlIG9mIHRoZSB0b2tlblwiIH0pLm9wdGlvbmFsKClcblx0fSkpLFxuXHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFycmF5IG9mIHNjb3BlcyB0byByZXF1ZXN0IGZyb20gdGhlIHByb3ZpZGVyLiBUaGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2NvcGVzIHBhc3NlZC5cIiB9KS5vcHRpb25hbCgpLFxuXHRyZXF1ZXN0U2lnblVwOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXhwbGljaXRseSByZXF1ZXN0IHNpZ24tdXAuIFVzZWZ1bCB3aGVuIGRpc2FibGVJbXBsaWNpdFNpZ25VcCBpcyB0cnVlIGZvciB0aGlzIHByb3ZpZGVyXCIgfSkub3B0aW9uYWwoKSxcblx0bG9naW5IaW50OiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbG9naW4gaGludCB0byB1c2UgZm9yIHRoZSBhdXRob3JpemF0aW9uIGNvZGUgcmVxdWVzdFwiIH0pLm9wdGlvbmFsKCksXG5cdGFkZGl0aW9uYWxEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJBZGRpdGlvbmFsIGRhdGEgdG8gYmUgcGFzc2VkIHRocm91Z2ggdGhlIE9BdXRoIGZsb3dcIiB9KVxufSk7XG5jb25zdCBzaWduSW5Tb2NpYWwgPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvc2lnbi1pbi9zb2NpYWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJzb2NpYWxTaWduSW5cIixcblx0Ym9keTogc29jaWFsU2lnbkluQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHtcblx0XHQkSW5mZXI6IHtcblx0XHRcdGJvZHk6IHt9LFxuXHRcdFx0cmV0dXJuZWQ6IHt9XG5cdFx0fSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIGluIHdpdGggYSBzb2NpYWwgcHJvdmlkZXJcIixcblx0XHRcdG9wZXJhdGlvbklkOiBcInNvY2lhbFNpZ25JblwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2VzcyAtIFJldHVybnMgZWl0aGVyIHNlc3Npb24gZGV0YWlscyBvciByZWRpcmVjdCBVUkxcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gcmVzcG9uc2Ugd2hlbiBpZFRva2VuIGlzIHByb3ZpZGVkXCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0dG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHQkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVybDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRyZWRpcmVjdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW2ZhbHNlXVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwicmVkaXJlY3RcIixcblx0XHRcdFx0XHRcdFwidG9rZW5cIixcblx0XHRcdFx0XHRcdFwidXNlclwiXG5cdFx0XHRcdFx0XVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5ib2R5LnByb3ZpZGVyKTtcblx0aWYgKCFwcm92aWRlcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQcm92aWRlciBub3QgZm91bmQuIE1ha2Ugc3VyZSB0byBhZGQgdGhlIHByb3ZpZGVyIGluIHlvdXIgYXV0aCBjb25maWdcIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUFJPVklERVJfTk9UX0ZPVU5EIH0pO1xuXHR9XG5cdGlmIChjLmJvZHkuaWRUb2tlbikge1xuXHRcdGlmICghcHJvdmlkZXIudmVyaWZ5SWRUb2tlbikge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIGRvZXMgbm90IHN1cHBvcnQgaWQgdG9rZW4gdmVyaWZpY2F0aW9uXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSURfVE9LRU5fTk9UX1NVUFBPUlRFRCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyB0b2tlbiwgbm9uY2UgfSA9IGMuYm9keS5pZFRva2VuO1xuXHRcdGlmICghYXdhaXQgcHJvdmlkZXIudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBpZCB0b2tlblwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IHVzZXJJbmZvID0gYXdhaXQgcHJvdmlkZXIuZ2V0VXNlckluZm8oe1xuXHRcdFx0aWRUb2tlbjogdG9rZW4sXG5cdFx0XHRhY2Nlc3NUb2tlbjogYy5ib2R5LmlkVG9rZW4uYWNjZXNzVG9rZW4sXG5cdFx0XHRyZWZyZXNoVG9rZW46IGMuYm9keS5pZFRva2VuLnJlZnJlc2hUb2tlblxuXHRcdH0pO1xuXHRcdGlmICghdXNlckluZm8gfHwgIXVzZXJJbmZvPy51c2VyKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm9cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GTyB9KTtcblx0XHR9XG5cdFx0aWYgKCF1c2VySW5mby51c2VyLmVtYWlsKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlciBlbWFpbCBub3QgZm91bmRcIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0VNQUlMX05PVF9GT1VORCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGhhbmRsZU9BdXRoVXNlckluZm8oYywge1xuXHRcdFx0dXNlckluZm86IHtcblx0XHRcdFx0Li4udXNlckluZm8udXNlcixcblx0XHRcdFx0ZW1haWw6IHVzZXJJbmZvLnVzZXIuZW1haWwsXG5cdFx0XHRcdGlkOiBTdHJpbmcodXNlckluZm8udXNlci5pZCksXG5cdFx0XHRcdG5hbWU6IHVzZXJJbmZvLnVzZXIubmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRpbWFnZTogdXNlckluZm8udXNlci5pbWFnZSxcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogdXNlckluZm8udXNlci5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0YWNjb3VudDoge1xuXHRcdFx0XHRwcm92aWRlcklkOiBwcm92aWRlci5pZCxcblx0XHRcdFx0YWNjb3VudElkOiBTdHJpbmcodXNlckluZm8udXNlci5pZCksXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlblxuXHRcdFx0fSxcblx0XHRcdGNhbGxiYWNrVVJMOiBjLmJvZHkuY2FsbGJhY2tVUkwsXG5cdFx0XHRkaXNhYmxlU2lnblVwOiBwcm92aWRlci5kaXNhYmxlSW1wbGljaXRTaWduVXAgJiYgIWMuYm9keS5yZXF1ZXN0U2lnblVwIHx8IHByb3ZpZGVyLmRpc2FibGVTaWduVXBcblx0XHR9KTtcblx0XHRpZiAoZGF0YS5lcnJvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogZGF0YS5lcnJvciB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGMsIGRhdGEuZGF0YSk7XG5cdFx0cmV0dXJuIGMuanNvbih7XG5cdFx0XHRyZWRpcmVjdDogZmFsc2UsXG5cdFx0XHR0b2tlbjogZGF0YS5kYXRhLnNlc3Npb24udG9rZW4sXG5cdFx0XHR1cmw6IHZvaWQgMCxcblx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjLmNvbnRleHQub3B0aW9ucywgZGF0YS5kYXRhLnVzZXIpXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgeyBjb2RlVmVyaWZpZXIsIHN0YXRlIH0gPSBhd2FpdCBnZW5lcmF0ZVN0YXRlKGMsIHZvaWQgMCwgYy5ib2R5LmFkZGl0aW9uYWxEYXRhKTtcblx0Y29uc3QgdXJsID0gYXdhaXQgcHJvdmlkZXIuY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0c3RhdGUsXG5cdFx0Y29kZVZlcmlmaWVyLFxuXHRcdHJlZGlyZWN0VVJJOiBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtwcm92aWRlci5pZH1gLFxuXHRcdHNjb3BlczogYy5ib2R5LnNjb3Blcyxcblx0XHRsb2dpbkhpbnQ6IGMuYm9keS5sb2dpbkhpbnRcblx0fSk7XG5cdGlmICghYy5ib2R5LmRpc2FibGVSZWRpcmVjdCkgYy5zZXRIZWFkZXIoXCJMb2NhdGlvblwiLCB1cmwudG9TdHJpbmcoKSk7XG5cdHJldHVybiBjLmpzb24oe1xuXHRcdHVybDogdXJsLnRvU3RyaW5nKCksXG5cdFx0cmVkaXJlY3Q6ICFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0XG5cdH0pO1xufSk7XG5jb25zdCBzaWduSW5FbWFpbCA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLWluL2VtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2lnbkluRW1haWxcIixcblx0dXNlOiBbZm9ybUNzcmZNaWRkbGV3YXJlXSxcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFbWFpbCBvZiB0aGUgdXNlclwiIH0pLFxuXHRcdHBhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJQYXNzd29yZCBvZiB0aGUgdXNlclwiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gdXNlIGFzIGEgcmVkaXJlY3QgZm9yIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKCksXG5cdFx0cmVtZW1iZXJNZTogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklmIHRoaXMgaXMgZmFsc2UsIHRoZSBzZXNzaW9uIHdpbGwgbm90IGJlIHJlbWVtYmVyZWQuIERlZmF1bHQgaXMgYHRydWVgLlwiIH0pLmRlZmF1bHQodHJ1ZSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHtcblx0XHRhbGxvd2VkTWVkaWFUeXBlczogW1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsIFwiYXBwbGljYXRpb24vanNvblwiXSxcblx0XHQkSW5mZXI6IHtcblx0XHRcdGJvZHk6IHt9LFxuXHRcdFx0cmV0dXJuZWQ6IHt9XG5cdFx0fSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRvcGVyYXRpb25JZDogXCJzaWduSW5FbWFpbFwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBpbiB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZFwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2VzcyAtIFJldHVybnMgZWl0aGVyIHNlc3Npb24gZGV0YWlscyBvciByZWRpcmVjdCBVUkxcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gcmVzcG9uc2Ugd2hlbiBpZFRva2VuIGlzIHByb3ZpZGVkXCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0cmVkaXJlY3Q6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdGVudW06IFtmYWxzZV1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTZXNzaW9uIHRva2VuXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1cmw6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJyZWRpcmVjdFwiLFxuXHRcdFx0XHRcdFx0XCJ0b2tlblwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VyXCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zPy5lbWFpbEFuZFBhc3N3b3JkPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRW1haWwgYW5kIHBhc3N3b3JkIGlzIG5vdCBlbmFibGVkLiBNYWtlIHN1cmUgdG8gZW5hYmxlIGl0IGluIHRoZSBvcHRpb25zIG9uIHlvdSBgYXV0aC50c2AgZmlsZS4gQ2hlY2sgYGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvYXV0aGVudGljYXRpb24vZW1haWwtcGFzc3dvcmRgIGZvciBtb3JlIVwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIGlzIG5vdCBlbmFibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuXHRpZiAoIXouZW1haWwoKS5zYWZlUGFyc2UoZW1haWwpLnN1Y2Nlc3MpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMIH0pO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCwgeyBpbmNsdWRlQWNjb3VudHM6IHRydWUgfSk7XG5cdGlmICghdXNlcikge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGNvbnN0IGNyZWRlbnRpYWxBY2NvdW50ID0gdXNlci5hY2NvdW50cy5maW5kKChhKSA9PiBhLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiKTtcblx0aWYgKCFjcmVkZW50aWFsQWNjb3VudCkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkNyZWRlbnRpYWwgYWNjb3VudCBub3QgZm91bmRcIiwgeyBlbWFpbCB9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQgfSk7XG5cdH1cblx0Y29uc3QgY3VycmVudFBhc3N3b3JkID0gY3JlZGVudGlhbEFjY291bnQ/LnBhc3N3b3JkO1xuXHRpZiAoIWN1cnJlbnRQYXNzd29yZCkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkXG5cdH0pKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBwYXNzd29yZFwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQgfSk7XG5cdH1cblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsQW5kUGFzc3dvcmQ/LnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbiAmJiAhdXNlci51c2VyLmVtYWlsVmVyaWZpZWQpIHtcblx0XHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRU1BSUxfTk9UX1ZFUklGSUVEIH0pO1xuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zPy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZE9uU2lnbkluKSB7XG5cdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCB1c2VyLnVzZXIuZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdGNvbnN0IGNhbGxiYWNrVVJMID0gY3R4LmJvZHkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LmJvZHkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0XHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0dXNlcjogdXNlci51c2VyLFxuXHRcdFx0XHR1cmwsXG5cdFx0XHRcdHRva2VuXG5cdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX05PVF9WRVJJRklFRCB9KTtcblx0fVxuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci51c2VyLmlkLCBjdHguYm9keS5yZW1lbWJlck1lID09PSBmYWxzZSk7XG5cdGlmICghc2Vzc2lvbikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTiB9KTtcblx0fVxuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlcjogdXNlci51c2VyXG5cdH0sIGN0eC5ib2R5LnJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0aWYgKGN0eC5ib2R5LmNhbGxiYWNrVVJMKSBjdHguc2V0SGVhZGVyKFwiTG9jYXRpb25cIiwgY3R4LmJvZHkuY2FsbGJhY2tVUkwpO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHJlZGlyZWN0OiAhIWN0eC5ib2R5LmNhbGxiYWNrVVJMLFxuXHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdHVybDogY3R4LmJvZHkuY2FsbGJhY2tVUkwsXG5cdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIudXNlcilcblx0fSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduLWluLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-in.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/sign-out.ts\nconst signOut = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/sign-out\", {\n\tmethod: \"POST\",\n\toperationId: \"signOut\",\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"signOut\",\n\t\tdescription: \"Sign out the current user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\tif (sessionCookieToken) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n\t} catch (e) {\n\t\tctx.context.logger.error(\"Failed to delete session from database\", e);\n\t}\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.deleteSessionCookie)(ctx);\n\treturn ctx.json({ success: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-out.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvc2lnbi1vdXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4RDtBQUNIOztBQUUzRDtBQUNBLGdCQUFnQix5RUFBa0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLENBQUMsdUVBQW1CO0FBQ3BCLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7O0FBRUQ7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXHNpZ24tb3V0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWxldGVTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9zaWduLW91dC50c1xuY29uc3Qgc2lnbk91dCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLW91dFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInNpZ25PdXRcIixcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJzaWduT3V0XCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBvdXQgdGhlIGN1cnJlbnQgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN1Y2Nlc3M6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbkNvb2tpZVRva2VuID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0aWYgKHNlc3Npb25Db29raWVUb2tlbikgdHJ5IHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uQ29va2llVG9rZW4pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBzZXNzaW9uIGZyb20gZGF0YWJhc2VcIiwgZSk7XG5cdH1cblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnbk91dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2lnbi1vdXQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-out.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signUpEmail: () => (/* binding */ signUpEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-up.ts\nconst signUpEmailBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_10__.string(),\n\temail: zod__WEBPACK_IMPORTED_MODULE_10__.email(),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().nonempty(),\n\timage: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\trememberMe: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().optional()\n}).and(zod__WEBPACK_IMPORTED_MODULE_10__.record(zod__WEBPACK_IMPORTED_MODULE_10__.string(), zod__WEBPACK_IMPORTED_MODULE_10__.any()));\nconst signUpEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/sign-up/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signUpWithEmailAndPassword\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware],\n\tbody: signUpEmailBodySchema,\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signUpWithEmailAndPassword\",\n\t\t\tdescription: \"Sign up a user using email and password\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\temail: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The email of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The password of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tcallbackURL: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The URL to use for email verification callback\"\n\t\t\t\t\t},\n\t\t\t\t\trememberMe: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"If this is false, the session will not be remembered. Default is `true`.\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"password\"\n\t\t\t\t]\n\t\t\t} } } },\n\t\t\tresponses: {\n\t\t\t\t\"200\": {\n\t\t\t\t\tdescription: \"Successfully created user\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Authentication token for the session\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"user\"]\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t\"422\": {\n\t\t\t\t\tdescription: \"Unprocessable Entity. User already exists or failed to create user.\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t} } }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__.runWithTransaction)(ctx.context.adapter, async () => {\n\t\tif (!ctx.context.options.emailAndPassword?.enabled || ctx.context.options.emailAndPassword?.disableSignUp) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password sign up is not enabled\" });\n\t\tconst body = ctx.body;\n\t\tconst { name, email, password, image, callbackURL: _callbackURL, rememberMe, ...rest } = body;\n\t\tif (!zod__WEBPACK_IMPORTED_MODULE_10__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tif (!password || typeof password !== \"string\") throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\t\tif (password.length < minPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too short\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t\t}\n\t\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\t\tif (password.length > maxPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too long\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t\t}\n\t\tif ((await ctx.context.internalAdapter.findUserByEmail(email))?.user) {\n\t\t\tctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t\t}\n\t\t/**\n\t\t* Hash the password\n\t\t*\n\t\t* This is done prior to creating the user\n\t\t* to ensure that any plugin that\n\t\t* may break the hashing should break\n\t\t* before the user is created.\n\t\t*/\n\t\tconst hash = await ctx.context.password.hash(password);\n\t\tlet createdUser;\n\t\ttry {\n\t\t\tconst data = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"create\");\n\t\t\tcreatedUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\temail: email.toLowerCase(),\n\t\t\t\tname,\n\t\t\t\timage,\n\t\t\t\t...data,\n\t\t\t\temailVerified: false\n\t\t\t});\n\t\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t} catch (e) {\n\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.isDevelopment)()) ctx.context.logger.error(\"Failed to create user\", e);\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_8__.APIError) throw e;\n\t\t\tctx.context.logger?.error(\"Failed to create user\", e);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t}\n\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: createdUser.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: createdUser.id,\n\t\t\tpassword: hash\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendOnSignUp ?? ctx.context.options.emailAndPassword.requireEmailVerification) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__.createEmailVerificationToken)(ctx.context.secret, createdUser.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = body.callbackURL ? encodeURIComponent(body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: createdUser,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tif (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) return ctx.json({\n\t\t\ttoken: null,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t\tconst session = await ctx.context.internalAdapter.createSession(createdUser.id, rememberMe === false);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\tsession,\n\t\t\tuser: createdUser\n\t\t}, rememberMe === false);\n\t\treturn ctx.json({\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-up.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvc2lnbi11cC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNFO0FBQzFDO0FBQ3lDO0FBQ1Y7QUFDYTtBQUNUO0FBQ1Q7QUFDSztBQUNwQjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBLDhCQUE4Qix3Q0FBUTtBQUN0QyxPQUFPLHdDQUFRO0FBQ2YsUUFBUSx1Q0FBTztBQUNmLFdBQVcsd0NBQVE7QUFDbkIsUUFBUSx3Q0FBUTtBQUNoQixjQUFjLHdDQUFRO0FBQ3RCLGFBQWEseUNBQVM7QUFDdEIsQ0FBQyxNQUFNLHdDQUFRLENBQUMsd0NBQVEsSUFBSSxxQ0FBSztBQUNqQywwQkFBMEIseUVBQWtCO0FBQzVDO0FBQ0E7QUFDQSxPQUFPLDZFQUFrQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsV0FBVyxzQkFBc0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFFBQVEsNkVBQWtCO0FBQzFCLHVIQUF1SCxpREFBUSxrQkFBa0Isc0RBQXNEO0FBQ3ZNO0FBQ0EsVUFBVSwrRUFBK0U7QUFDekYsT0FBTyx1Q0FBTyx1Q0FBdUMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN4SCwyREFBMkQsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG1CQUFtQjtBQUNqSTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDcEY7QUFDQTtBQUNBLGtFQUFrRSxNQUFNO0FBQ3hFLGFBQWEsaURBQVEsMkJBQTJCLFNBQVMscUVBQWdCLHdDQUF3QztBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLCtCQUErQixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQzFHLElBQUk7QUFDSixPQUFPLG9FQUFhO0FBQ3BCLG9CQUFvQixpREFBUTtBQUM1QjtBQUNBLGFBQWEsaURBQVEsMkJBQTJCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUNqRztBQUNBLDhCQUE4QixpREFBUSwyQkFBMkIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx1QkFBdUIscUZBQTRCO0FBQ25EO0FBQ0Esa0JBQWtCLG9CQUFvQixzQkFBc0IsTUFBTSxlQUFlLFlBQVk7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsU0FBUywrREFBZTtBQUN4QixHQUFHO0FBQ0g7QUFDQSwwQkFBMEIsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLDJCQUEyQjtBQUN4RyxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSCxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUN1QjtBQUN2QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcc2lnbi11cC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSBcIi4vZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgcnVuV2l0aFRyYW5zYWN0aW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcbmltcG9ydCB7IGlzRGV2ZWxvcG1lbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9zaWduLXVwLnRzXG5jb25zdCBzaWduVXBFbWFpbEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCksXG5cdGVtYWlsOiB6LmVtYWlsKCksXG5cdHBhc3N3b3JkOiB6LnN0cmluZygpLm5vbmVtcHR5KCksXG5cdGltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdHJlbWVtYmVyTWU6IHouYm9vbGVhbigpLm9wdGlvbmFsKClcbn0pLmFuZCh6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSk7XG5jb25zdCBzaWduVXBFbWFpbCA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLXVwL2VtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmRcIixcblx0dXNlOiBbZm9ybUNzcmZNaWRkbGV3YXJlXSxcblx0Ym9keTogc2lnblVwRW1haWxCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YToge1xuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdCRJbmZlcjoge1xuXHRcdFx0Ym9keToge30sXG5cdFx0XHRyZXR1cm5lZDoge31cblx0XHR9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInNpZ25VcFdpdGhFbWFpbEFuZFBhc3N3b3JkXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIHVwIGEgdXNlciB1c2luZyBlbWFpbCBhbmQgcGFzc3dvcmRcIixcblx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cGFzc3dvcmQ6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcGFzc3dvcmQgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcHJvZmlsZSBpbWFnZSBVUkwgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y2FsbGJhY2tVUkw6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlbWVtYmVyTWU6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSWYgdGhpcyBpcyBmYWxzZSwgdGhlIHNlc3Npb24gd2lsbCBub3QgYmUgcmVtZW1iZXJlZC4gRGVmYXVsdCBpcyBgdHJ1ZWAuXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XHRcdFwicGFzc3dvcmRcIlxuXHRcdFx0XHRdXG5cdFx0XHR9IH0gfSB9LFxuXHRcdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcdFwiMjAwXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsbHkgY3JlYXRlZCB1c2VyXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIHNlc3Npb25cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGVtYWlsOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHByb2ZpbGUgaW1hZ2UgVVJMIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBlbWFpbCBoYXMgYmVlbiB2ZXJpZmllZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiB0aGUgdXNlciB3YXMgY3JlYXRlZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiB0aGUgdXNlciB3YXMgbGFzdCB1cGRhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwiZW1haWxWZXJpZmllZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1widXNlclwiXVxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiNDIyXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbnByb2Nlc3NhYmxlIEVudGl0eS4gVXNlciBhbHJlYWR5IGV4aXN0cyBvciBmYWlsZWQgdG8gY3JlYXRlIHVzZXIuXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHJldHVybiBydW5XaXRoVHJhbnNhY3Rpb24oY3R4LmNvbnRleHQuYWRhcHRlciwgYXN5bmMgKCkgPT4ge1xuXHRcdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5lbmFibGVkIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uZGlzYWJsZVNpZ25VcCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkVtYWlsIGFuZCBwYXNzd29yZCBzaWduIHVwIGlzIG5vdCBlbmFibGVkXCIgfSk7XG5cdFx0Y29uc3QgYm9keSA9IGN0eC5ib2R5O1xuXHRcdGNvbnN0IHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBpbWFnZSwgY2FsbGJhY2tVUkw6IF9jYWxsYmFja1VSTCwgcmVtZW1iZXJNZSwgLi4ucmVzdCB9ID0gYm9keTtcblx0XHRpZiAoIXouZW1haWwoKS5zYWZlUGFyc2UoZW1haWwpLnN1Y2Nlc3MpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMIH0pO1xuXHRcdGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0XHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0XHRpZiAocGFzc3dvcmQubGVuZ3RoIDwgbWluUGFzc3dvcmRMZW5ndGgpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBzaG9ydFwiKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IG1heFBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRcdGlmIChwYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIGxvbmdcIik7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdFx0fVxuXHRcdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCkpPy51c2VyKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuaW5mbyhgU2lnbi11cCBhdHRlbXB0IGZvciBleGlzdGluZyBlbWFpbDogJHtlbWFpbH1gKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0FMUkVBRFlfRVhJU1RTX1VTRV9BTk9USEVSX0VNQUlMIH0pO1xuXHRcdH1cblx0XHQvKipcblx0XHQqIEhhc2ggdGhlIHBhc3N3b3JkXG5cdFx0KlxuXHRcdCogVGhpcyBpcyBkb25lIHByaW9yIHRvIGNyZWF0aW5nIHRoZSB1c2VyXG5cdFx0KiB0byBlbnN1cmUgdGhhdCBhbnkgcGx1Z2luIHRoYXRcblx0XHQqIG1heSBicmVhayB0aGUgaGFzaGluZyBzaG91bGQgYnJlYWtcblx0XHQqIGJlZm9yZSB0aGUgdXNlciBpcyBjcmVhdGVkLlxuXHRcdCovXG5cdFx0Y29uc3QgaGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGxldCBjcmVhdGVkVXNlcjtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZGF0YSA9IHBhcnNlVXNlcklucHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHJlc3QsIFwiY3JlYXRlXCIpO1xuXHRcdFx0Y3JlYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRpbWFnZSxcblx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFjcmVhdGVkVXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoaXNEZXZlbG9wbWVudCgpKSBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHVzZXJcIiwgZSk7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yKSB0aHJvdyBlO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyPy5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgdXNlclwiLCBlKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1VTRVIgfSk7XG5cdFx0fVxuXHRcdGlmICghY3JlYXRlZFVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1VTRVIgfSk7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogY3JlYXRlZFVzZXIuaWQsXG5cdFx0XHRwcm92aWRlcklkOiBcImNyZWRlbnRpYWxcIixcblx0XHRcdGFjY291bnRJZDogY3JlYXRlZFVzZXIuaWQsXG5cdFx0XHRwYXNzd29yZDogaGFzaFxuXHRcdH0pO1xuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAgPz8gY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbikge1xuXHRcdFx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgY3JlYXRlZFVzZXIuZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdGNvbnN0IGNhbGxiYWNrVVJMID0gYm9keS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChib2R5LmNhbGxiYWNrVVJMKSA6IGVuY29kZVVSSUNvbXBvbmVudChcIi9cIik7XG5cdFx0XHRjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuXHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdHVzZXI6IGNyZWF0ZWRVc2VyLFxuXHRcdFx0XHR1cmwsXG5cdFx0XHRcdHRva2VuXG5cdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdH1cblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLmF1dG9TaWduSW4gPT09IGZhbHNlIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5yZXF1aXJlRW1haWxWZXJpZmljYXRpb24pIHJldHVybiBjdHguanNvbih7XG5cdFx0XHR0b2tlbjogbnVsbCxcblx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBjcmVhdGVkVXNlcilcblx0XHR9KTtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24oY3JlYXRlZFVzZXIuaWQsIHJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0XHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb24sXG5cdFx0XHR1c2VyOiBjcmVhdGVkVXNlclxuXHRcdH0sIHJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgY3JlYXRlZFVzZXIpXG5cdFx0fSk7XG5cdH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnblVwRW1haWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ24tdXAubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/sign-up.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeEmail: () => (/* binding */ changeEmail),\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* binding */ deleteUserCallback),\n/* harmony export */   setPassword: () => (/* binding */ setPassword),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/update-user.ts\nconst updateUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Field name must be a string\" }), zod__WEBPACK_IMPORTED_MODULE_11__.any());\nconst updateUser = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/update-user\", {\n\tmethod: \"POST\",\n\toperationId: \"updateUser\",\n\tbody: updateUserBodySchema,\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sessionMiddleware],\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateUser\",\n\t\t\tdescription: \"Update the current user\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The image of the user\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } } },\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst body = ctx.body;\n\tif (typeof body !== \"object\" || Array.isArray(body)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Body must be an object\" });\n\tif (body.email) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED });\n\tconst { name, image, ...rest } = body;\n\tconst session = ctx.context.session;\n\tconst additionalFields = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"update\");\n\tif (image === void 0 && name === void 0 && Object.keys(additionalFields).length === 0) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"No fields to update\" });\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(session.user.id, {\n\t\tname,\n\t\timage,\n\t\t...additionalFields\n\t}) ?? {\n\t\t...session.user,\n\t\t...name !== void 0 && { name },\n\t\t...image !== void 0 && { image },\n\t\t...additionalFields\n\t};\n\t/**\n\t* Update the session cookie with the new user data\n\t*/\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\tsession: session.session,\n\t\tuser: updatedUser\n\t});\n\treturn ctx.json({ status: true });\n});\nconst changePassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-password\", {\n\tmethod: \"POST\",\n\toperationId: \"changePassword\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set\" }),\n\t\tcurrentPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The current password is required\" }),\n\t\trevokeOtherSessions: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Must be a boolean value\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changePassword\",\n\t\tdescription: \"Change the password of the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Password successfully changed\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\tdescription: \"New session token if other sessions were revoked\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { newPassword, currentPassword, revokeOtherSessions } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!await ctx.context.password.verify({\n\t\thash: account.password,\n\t\tpassword: currentPassword\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\tawait ctx.context.internalAdapter.updateAccount(account.id, { password: passwordHash });\n\tlet token = null;\n\tif (revokeOtherSessions) {\n\t\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t\tconst newSession = await ctx.context.internalAdapter.createSession(session.user.id);\n\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: newSession,\n\t\t\tuser: session.user\n\t\t});\n\t\ttoken = newSession.token;\n\t}\n\treturn ctx.json({\n\t\ttoken,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, session.user)\n\t});\n});\nconst setPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)({\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({ newPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set is required\" }) }),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { newPassword } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!account) {\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: session.user.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: session.user.id,\n\t\t\tpassword: passwordHash\n\t\t});\n\t\treturn ctx.json({ status: true });\n\t}\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"user already has a password\" });\n});\nconst deleteUser = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user\", {\n\tmethod: \"POST\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The callback URL to redirect to after the user is deleted\" }).optional(),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The password of the user is required to delete the user\" }).optional(),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to delete the user is required\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"deleteUser\",\n\t\tdescription: \"Delete the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The callback URL to redirect to after the user is deleted\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The user's password. Required if session is not fresh\"\n\t\t\t\t},\n\t\t\t\ttoken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The deletion verification token\"\n\t\t\t\t}\n\t\t\t}\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User deletion processed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the operation was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\", \"Verification email sent\"],\n\t\t\t\t\t\tdescription: \"Status message of the deletion process\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = ctx.context.session;\n\tif (ctx.body.password) {\n\t\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\t\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\t\tif (!await ctx.context.password.verify({\n\t\t\thash: account.password,\n\t\t\tpassword: ctx.body.password\n\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t}\n\tif (ctx.body.token) {\n\t\tawait deleteUserCallback({\n\t\t\t...ctx,\n\t\t\tquery: { token: ctx.body.token }\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"User deleted\"\n\t\t});\n\t}\n\tif (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n\t\tconst token = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString)(32, \"0-9\", \"a-z\");\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: session.user.id,\n\t\t\tidentifier: `delete-account-${token}`,\n\t\t\texpiresAt: new Date(Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 3600 * 24) * 1e3)\n\t\t});\n\t\tconst url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.user.deleteUser.sendDeleteAccountVerification({\n\t\t\tuser: session.user,\n\t\t\turl,\n\t\t\ttoken\n\t\t}, ctx.request));\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Verification email sent\"\n\t\t});\n\t}\n\tif (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n\t\tconst currentAge = new Date(session.session.createdAt).getTime();\n\t\tconst freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n\t\tif (Date.now() - currentAge > freshAge * 1e3) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.SESSION_EXPIRED });\n\t}\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst deleteUserCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user/callback\", {\n\tmethod: \"GET\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to verify the deletion request\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after deletion\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Callback to complete user deletion with verification token\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User successfully deleted\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the deletion was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\"],\n\t\t\t\t\t\tdescription: \"Confirmation message\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_6__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\tconst token = await ctx.context.internalAdapter.findVerificationValue(`delete-account-${ctx.query.token}`);\n\tif (!token || token.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tif (token.value !== session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\tawait ctx.context.internalAdapter.deleteAccounts(session.user.id);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(token.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL || \"/\");\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst changeEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-email\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewEmail: zod__WEBPACK_IMPORTED_MODULE_11__.email().meta({ description: \"The new email address to set must be a valid email address\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changeEmail\",\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Email change request processed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Indicates if the request was successful\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tenum: [\"Email updated\", \"Verification email sent\"],\n\t\t\t\t\t\t\tdescription: \"Status message of the email change process\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"status\"]\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"422\": {\n\t\t\t\tdescription: \"Unprocessable Entity. Email already exists\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.changeEmail?.enabled) {\n\t\tctx.context.logger.error(\"Change email is disabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Change email is disabled\" });\n\t}\n\tconst newEmail = ctx.body.newEmail.toLowerCase();\n\tif (newEmail === ctx.context.session.user.email) {\n\t\tctx.context.logger.error(\"Email is the same\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Email is the same\" });\n\t}\n\tif (await ctx.context.internalAdapter.findUserByEmail(newEmail)) {\n\t\tctx.context.logger.error(\"Email already exists\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t}\n\t/**\n\t* If the email is not verified, we can update the email if the option is enabled\n\t*/\n\tif (ctx.context.session.user.emailVerified !== true && ctx.context.options.user.changeEmail.updateEmailWithoutVerification) {\n\t\tawait ctx.context.internalAdapter.updateUserByEmail(ctx.context.session.user.email, { email: newEmail });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: ctx.context.session.session,\n\t\t\tuser: {\n\t\t\t\t...ctx.context.session.user,\n\t\t\t\temail: newEmail\n\t\t\t}\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, newEmail, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: {\n\t\t\t\t\t...ctx.context.session.user,\n\t\t\t\t\temail: newEmail\n\t\t\t\t},\n\t\t\t\turl: url$1,\n\t\t\t\ttoken: token$1\n\t\t\t}, ctx.request));\n\t\t}\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (ctx.context.session.user.emailVerified && (ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification)) {\n\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-confirmation\" });\n\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tconst sendFn = ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification;\n\t\tif (sendFn) await ctx.context.runInBackgroundOrAwait(sendFn({\n\t\t\tuser: ctx.context.session.user,\n\t\t\tnewEmail,\n\t\t\turl: url$1,\n\t\t\ttoken: token$1\n\t\t}, ctx.request));\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser: {\n\t\t\t...ctx.context.session.user,\n\t\t\temail: newEmail\n\t\t},\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=update-user.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvdXBkYXRlLXVzZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRTtBQUNSO0FBQzVCO0FBQzZCO0FBQy9CO0FBQ2dEO0FBQ2lCO0FBQ3pCO0FBQ2I7QUFDcEI7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQSw2QkFBNkIsd0NBQVEsQ0FBQyx3Q0FBUSxVQUFVLDRDQUE0QyxHQUFHLHFDQUFLO0FBQzVHLHlCQUF5QiwwRUFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsT0FBTywyREFBaUI7QUFDeEI7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVcsc0JBQXNCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsZ0VBQWdFLGlEQUFRLGtCQUFrQixtQ0FBbUM7QUFDN0gsMkJBQTJCLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDekcsU0FBUyx1QkFBdUI7QUFDaEM7QUFDQSwwQkFBMEIsOERBQWM7QUFDeEMsa0dBQWtHLGlEQUFRLGtCQUFrQixnQ0FBZ0M7QUFDNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSwwQkFBMEIsTUFBTTtBQUNoQywyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxvRUFBZ0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRixtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0QsdUJBQXVCLDBFQUFrQjtBQUN6QztBQUNBO0FBQ0EsT0FBTyx3Q0FBUTtBQUNmLGVBQWUsd0NBQVEsVUFBVSx3Q0FBd0M7QUFDekUsbUJBQW1CLHdDQUFRLFVBQVUsaURBQWlEO0FBQ3RGLHVCQUF1Qix5Q0FBUyxVQUFVLHdDQUF3QztBQUNsRixFQUFFO0FBQ0YsT0FBTyxvRUFBMEI7QUFDakMsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLG9EQUFvRDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0EsOENBQThDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQiwrQkFBK0I7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGFBQWEsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG1CQUFtQjtBQUNyRiwrREFBK0Qsd0JBQXdCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlEQUFRLDRCQUE0QixTQUFTLHFFQUFnQix3QkFBd0I7QUFDbEgsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQWU7QUFDdkIsRUFBRTtBQUNGLENBQUM7QUFDRCxvQkFBb0IsMEVBQWtCO0FBQ3RDO0FBQ0EsT0FBTyx3Q0FBUSxHQUFHLGFBQWEsd0NBQVEsVUFBVSxvREFBb0QsR0FBRztBQUN4RyxPQUFPLG9FQUEwQjtBQUNqQyxDQUFDO0FBQ0QsU0FBUyxjQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxvQkFBb0IsY0FBYztBQUNsQztBQUNBLFdBQVcsaURBQVEsa0JBQWtCLHdDQUF3QztBQUM3RSxDQUFDO0FBQ0QsbUJBQW1CLDBFQUFrQjtBQUNyQztBQUNBLE9BQU8sb0VBQTBCO0FBQ2pDLE9BQU8sd0NBQVE7QUFDZixlQUFlLHdDQUFRLFVBQVUsMEVBQTBFO0FBQzNHLFlBQVksd0NBQVEsVUFBVSx3RUFBd0U7QUFDdEcsU0FBUyx3Q0FBUSxVQUFVLHlEQUF5RDtBQUNwRixFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsV0FBVyxzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLCtCQUErQjtBQUNqSTtBQUNBO0FBQ0E7QUFDQSxHQUFHLGFBQWEsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG1CQUFtQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQW9CO0FBQ3BDO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTTtBQUN2QztBQUNBLEdBQUc7QUFDSCxpQkFBaUIsb0JBQW9CLDhCQUE4QixNQUFNLGVBQWUsNEJBQTRCO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isa0JBQWtCO0FBQy9IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHVFQUFtQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCwyQkFBMkIsMEVBQWtCO0FBQzdDO0FBQ0EsUUFBUSx3Q0FBUTtBQUNoQixTQUFTLHdDQUFRLFVBQVUseURBQXlEO0FBQ3BGLGVBQWUsd0NBQVEsVUFBVSxzREFBc0Q7QUFDdkYsRUFBRTtBQUNGLE9BQU8sMEVBQVc7QUFDbEIsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0EsdUJBQXVCLCtEQUFpQjtBQUN4Qyx5QkFBeUIsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLDBCQUEwQjtBQUNwRyx5RkFBeUYsZ0JBQWdCO0FBQ3pHLHVFQUF1RSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ3hJLGdEQUFnRCxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsdUVBQW1CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0Qsb0JBQW9CLDBFQUFrQjtBQUN0QztBQUNBLE9BQU8sd0NBQVE7QUFDZixZQUFZLHVDQUFPLFVBQVUsMkVBQTJFO0FBQ3hHLGVBQWUsd0NBQVEsVUFBVSxnRUFBZ0U7QUFDakcsRUFBRTtBQUNGLE9BQU8sb0VBQTBCO0FBQ2pDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQixXQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixxQ0FBcUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQiw4QkFBOEI7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSwyQkFBMkIsU0FBUyxxRUFBZ0Isd0NBQXdDO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0YsaUJBQWlCO0FBQ3pHLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5QkFBeUIscUZBQTRCO0FBQ3JELG9CQUFvQixvQkFBb0Isc0JBQXNCLFFBQVEsZUFBZSw0QkFBNEI7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQSx3QkFBd0IscUZBQTRCLG1IQUFtSCwwQ0FBMEM7QUFDak4sbUJBQW1CLG9CQUFvQixzQkFBc0IsUUFBUSxlQUFlLDRCQUE0QjtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsNkNBQTZDO0FBQ25GO0FBQ0EscUJBQXFCLHFGQUE0QixtSEFBbUgsMENBQTBDO0FBQzlNLGdCQUFnQixvQkFBb0Isc0JBQXNCLE1BQU0sZUFBZSw0QkFBNEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRixtQkFBbUIsY0FBYztBQUNqQyxDQUFDOztBQUVEO0FBQ2dHO0FBQ2hHIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFx1cGRhdGUtdXNlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBvcmlnaW5DaGVjayB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgXCIuLi9taWRkbGV3YXJlcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWxldGVTZXNzaW9uQ29va2llLCBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCwgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy91cGRhdGUtdXNlci50c1xuY29uc3QgdXBkYXRlVXNlckJvZHlTY2hlbWEgPSB6LnJlY29yZCh6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJGaWVsZCBuYW1lIG11c3QgYmUgYSBzdHJpbmdcIiB9KSwgei5hbnkoKSk7XG5jb25zdCB1cGRhdGVVc2VyID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3VwZGF0ZS11c2VyXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwidXBkYXRlVXNlclwiLFxuXHRib2R5OiB1cGRhdGVVc2VyQm9keVNjaGVtYSxcblx0dXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YToge1xuXHRcdCRJbmZlcjogeyBib2R5OiB7fSB9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInVwZGF0ZVVzZXJcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVwZGF0ZSB0aGUgY3VycmVudCB1c2VyXCIsXG5cdFx0XHRyZXF1ZXN0Qm9keTogeyBjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGltYWdlIG9mIHRoZSB1c2VyXCIsXG5cdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH0gfSxcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgdXNlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgYm9keSA9IGN0eC5ib2R5O1xuXHRpZiAodHlwZW9mIGJvZHkgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShib2R5KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkJvZHkgbXVzdCBiZSBhbiBvYmplY3RcIiB9KTtcblx0aWYgKGJvZHkuZW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9DQU5fTk9UX0JFX1VQREFURUQgfSk7XG5cdGNvbnN0IHsgbmFtZSwgaW1hZ2UsIC4uLnJlc3QgfSA9IGJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBhZGRpdGlvbmFsRmllbGRzID0gcGFyc2VVc2VySW5wdXQoY3R4LmNvbnRleHQub3B0aW9ucywgcmVzdCwgXCJ1cGRhdGVcIik7XG5cdGlmIChpbWFnZSA9PT0gdm9pZCAwICYmIG5hbWUgPT09IHZvaWQgMCAmJiBPYmplY3Qua2V5cyhhZGRpdGlvbmFsRmllbGRzKS5sZW5ndGggPT09IDApIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJObyBmaWVsZHMgdG8gdXBkYXRlXCIgfSk7XG5cdGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkLCB7XG5cdFx0bmFtZSxcblx0XHRpbWFnZSxcblx0XHQuLi5hZGRpdGlvbmFsRmllbGRzXG5cdH0pID8/IHtcblx0XHQuLi5zZXNzaW9uLnVzZXIsXG5cdFx0Li4ubmFtZSAhPT0gdm9pZCAwICYmIHsgbmFtZSB9LFxuXHRcdC4uLmltYWdlICE9PSB2b2lkIDAgJiYgeyBpbWFnZSB9LFxuXHRcdC4uLmFkZGl0aW9uYWxGaWVsZHNcblx0fTtcblx0LyoqXG5cdCogVXBkYXRlIHRoZSBzZXNzaW9uIGNvb2tpZSB3aXRoIHRoZSBuZXcgdXNlciBkYXRhXG5cdCovXG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0c2Vzc2lvbjogc2Vzc2lvbi5zZXNzaW9uLFxuXHRcdHVzZXI6IHVwZGF0ZWRVc2VyXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IGNoYW5nZVBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2NoYW5nZS1wYXNzd29yZFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcImNoYW5nZVBhc3N3b3JkXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRuZXdQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcIiB9KSxcblx0XHRjdXJyZW50UGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBjdXJyZW50IHBhc3N3b3JkIGlzIHJlcXVpcmVkXCIgfSksXG5cdFx0cmV2b2tlT3RoZXJTZXNzaW9uczogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIk11c3QgYmUgYSBib29sZWFuIHZhbHVlXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwiY2hhbmdlUGFzc3dvcmRcIixcblx0XHRkZXNjcmlwdGlvbjogXCJDaGFuZ2UgdGhlIHBhc3N3b3JkIG9mIHRoZSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlBhc3N3b3JkIHN1Y2Nlc3NmdWxseSBjaGFuZ2VkXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk5ldyBzZXNzaW9uIHRva2VuIGlmIG90aGVyIHNlc3Npb25zIHdlcmUgcmV2b2tlZFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBlbWFpbCBoYXMgYmVlbiB2ZXJpZmllZFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGNyZWF0ZWRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIHRoZSB1c2VyIHdhcyBsYXN0IHVwZGF0ZWRcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcImVtYWlsVmVyaWZpZWRcIixcblx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IG5ld1Bhc3N3b3JkLCBjdXJyZW50UGFzc3dvcmQsIHJldm9rZU90aGVyU2Vzc2lvbnMgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3QgbWluUGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWluUGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPCBtaW5QYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBzaG9ydFwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUIH0pO1xuXHR9XG5cdGNvbnN0IG1heFBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoID4gbWF4UGFzc3dvcmRMZW5ndGgpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gbG9uZ1wiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdH1cblx0Y29uc3QgYWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCkpLmZpbmQoKGFjY291bnQkMSkgPT4gYWNjb3VudCQxLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiICYmIGFjY291bnQkMS5wYXNzd29yZCk7XG5cdGlmICghYWNjb3VudCB8fCAhYWNjb3VudC5wYXNzd29yZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuXHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogYWNjb3VudC5wYXNzd29yZCxcblx0XHRwYXNzd29yZDogY3VycmVudFBhc3N3b3JkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwgeyBwYXNzd29yZDogcGFzc3dvcmRIYXNoIH0pO1xuXHRsZXQgdG9rZW4gPSBudWxsO1xuXHRpZiAocmV2b2tlT3RoZXJTZXNzaW9ucykge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhzZXNzaW9uLnVzZXIuaWQpO1xuXHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihzZXNzaW9uLnVzZXIuaWQpO1xuXHRcdGlmICghbmV3U2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1NFU1NJT04gfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb246IG5ld1Nlc3Npb24sXG5cdFx0XHR1c2VyOiBzZXNzaW9uLnVzZXJcblx0XHR9KTtcblx0XHR0b2tlbiA9IG5ld1Nlc3Npb24udG9rZW47XG5cdH1cblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHR0b2tlbixcblx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKVxuXHR9KTtcbn0pO1xuY29uc3Qgc2V0UGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoe1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7IG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHBhc3N3b3JkIHRvIHNldCBpcyByZXF1aXJlZFwiIH0pIH0pLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBuZXdQYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdH1cblx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBsb25nXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0fVxuXHRjb25zdCBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKSkuZmluZCgoYWNjb3VudCQxKSA9PiBhY2NvdW50JDEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIgJiYgYWNjb3VudCQxLnBhc3N3b3JkKTtcblx0Y29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChuZXdQYXNzd29yZCk7XG5cdGlmICghYWNjb3VudCkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saW5rQWNjb3VudCh7XG5cdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuXHRcdFx0YWNjb3VudElkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRwYXNzd29yZDogcGFzc3dvcmRIYXNoXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHR9XG5cdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJ1c2VyIGFscmVhZHkgaGFzIGEgcGFzc3dvcmRcIiB9KTtcbn0pO1xuY29uc3QgZGVsZXRlVXNlciA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9kZWxldGUtdXNlclwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgY2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGlzIGRlbGV0ZWRcIiB9KS5vcHRpb25hbCgpLFxuXHRcdHBhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcGFzc3dvcmQgb2YgdGhlIHVzZXIgaXMgcmVxdWlyZWQgdG8gZGVsZXRlIHRoZSB1c2VyXCIgfSkub3B0aW9uYWwoKSxcblx0XHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIGRlbGV0ZSB0aGUgdXNlciBpcyByZXF1aXJlZFwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJkZWxldGVVc2VyXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiRGVsZXRlIHRoZSB1c2VyXCIsXG5cdFx0cmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdGNhbGxiYWNrVVJMOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgY2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGlzIGRlbGV0ZWRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRwYXNzd29yZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHVzZXIncyBwYXNzd29yZC4gUmVxdWlyZWQgaWYgc2Vzc2lvbiBpcyBub3QgZnJlc2hcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGRlbGV0aW9uIHZlcmlmaWNhdGlvbiB0b2tlblwiXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IH0gfSB9LFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyIGRlbGV0aW9uIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRzdWNjZXNzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRlbnVtOiBbXCJVc2VyIGRlbGV0ZWRcIiwgXCJWZXJpZmljYXRpb24gZW1haWwgc2VudFwiXSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN0YXR1cyBtZXNzYWdlIG9mIHRoZSBkZWxldGlvbiBwcm9jZXNzXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdWNjZXNzXCIsIFwibWVzc2FnZVwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy51c2VyPy5kZWxldGVVc2VyPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRGVsZXRlIHVzZXIgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiB0aGUgb3B0aW9uc1wiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIik7XG5cdH1cblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGlmIChjdHguYm9keS5wYXNzd29yZCkge1xuXHRcdGNvbnN0IGFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhzZXNzaW9uLnVzZXIuaWQpKS5maW5kKChhY2NvdW50JDEpID0+IGFjY291bnQkMS5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIiAmJiBhY2NvdW50JDEucGFzc3dvcmQpO1xuXHRcdGlmICghYWNjb3VudCB8fCAhYWNjb3VudC5wYXNzd29yZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkQgfSk7XG5cdFx0aWYgKCFhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuXHRcdFx0aGFzaDogYWNjb3VudC5wYXNzd29yZCxcblx0XHRcdHBhc3N3b3JkOiBjdHguYm9keS5wYXNzd29yZFxuXHRcdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0fVxuXHRpZiAoY3R4LmJvZHkudG9rZW4pIHtcblx0XHRhd2FpdCBkZWxldGVVc2VyQ2FsbGJhY2soe1xuXHRcdFx0Li4uY3R4LFxuXHRcdFx0cXVlcnk6IHsgdG9rZW46IGN0eC5ib2R5LnRva2VuIH1cblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiVXNlciBkZWxldGVkXCJcblx0XHR9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LnNlbmREZWxldGVBY2NvdW50VmVyaWZpY2F0aW9uKSB7XG5cdFx0Y29uc3QgdG9rZW4gPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCIwLTlcIiwgXCJhLXpcIik7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHRcdHZhbHVlOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRpZGVudGlmaWVyOiBgZGVsZXRlLWFjY291bnQtJHt0b2tlbn1gLFxuXHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgKGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5kZWxldGVUb2tlbkV4cGlyZXNJbiB8fCAzNjAwICogMjQpICogMWUzKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L2RlbGV0ZS11c2VyL2NhbGxiYWNrP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyLnNlbmREZWxldGVBY2NvdW50VmVyaWZpY2F0aW9uKHtcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdHVybCxcblx0XHRcdHRva2VuXG5cdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnRcIlxuXHRcdH0pO1xuXHR9XG5cdGlmICghY3R4LmJvZHkucGFzc3dvcmQgJiYgY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5mcmVzaEFnZSAhPT0gMCkge1xuXHRcdGNvbnN0IGN1cnJlbnRBZ2UgPSBuZXcgRGF0ZShzZXNzaW9uLnNlc3Npb24uY3JlYXRlZEF0KS5nZXRUaW1lKCk7XG5cdFx0Y29uc3QgZnJlc2hBZ2UgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlICogMWUzO1xuXHRcdGlmIChEYXRlLm5vdygpIC0gY3VycmVudEFnZSA+IGZyZXNoQWdlICogMWUzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuU0VTU0lPTl9FWFBJUkVEIH0pO1xuXHR9XG5cdGNvbnN0IGJlZm9yZURlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5iZWZvcmVEZWxldGU7XG5cdGlmIChiZWZvcmVEZWxldGUpIGF3YWl0IGJlZm9yZURlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHNlc3Npb24udXNlci5pZCk7XG5cdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0Y29uc3QgYWZ0ZXJEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYWZ0ZXJEZWxldGU7XG5cdGlmIChhZnRlckRlbGV0ZSkgYXdhaXQgYWZ0ZXJEZWxldGUoc2Vzc2lvbi51c2VyLCBjdHgucmVxdWVzdCk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBcIlVzZXIgZGVsZXRlZFwiXG5cdH0pO1xufSk7XG5jb25zdCBkZWxldGVVc2VyQ2FsbGJhY2sgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZGVsZXRlLXVzZXIvY2FsbGJhY2tcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHF1ZXJ5OiB6Lm9iamVjdCh7XG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byB2ZXJpZnkgdGhlIGRlbGV0aW9uIHJlcXVlc3RcIiB9KSxcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBkZWxldGlvblwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW29yaWdpbkNoZWNrKChjdHgpID0+IGN0eC5xdWVyeS5jYWxsYmFja1VSTCldLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgdG8gY29tcGxldGUgdXNlciBkZWxldGlvbiB3aXRoIHZlcmlmaWNhdGlvbiB0b2tlblwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0c3VjY2Vzczoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGRlbGV0aW9uIHdhcyBzdWNjZXNzZnVsXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRlbnVtOiBbXCJVc2VyIGRlbGV0ZWRcIl0sXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDb25maXJtYXRpb24gbWVzc2FnZVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wic3VjY2Vzc1wiLCBcIm1lc3NhZ2VcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uZGVsZXRlVXNlcj8uZW5hYmxlZCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkRlbGV0ZSB1c2VyIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gdGhlIG9wdGlvbnNcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIpO1xuXHR9XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9VU0VSX0lORk8gfSk7XG5cdGNvbnN0IHRva2VuID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShgZGVsZXRlLWFjY291bnQtJHtjdHgucXVlcnkudG9rZW59YCk7XG5cdGlmICghdG9rZW4gfHwgdG9rZW4uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0aWYgKHRva2VuLnZhbHVlICE9PSBzZXNzaW9uLnVzZXIuaWQpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0Y29uc3QgYmVmb3JlRGVsZXRlID0gY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LmJlZm9yZURlbGV0ZTtcblx0aWYgKGJlZm9yZURlbGV0ZSkgYXdhaXQgYmVmb3JlRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVXNlcihzZXNzaW9uLnVzZXIuaWQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZUFjY291bnRzKHNlc3Npb24udXNlci5pZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh0b2tlbi5pZCk7XG5cdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0Y29uc3QgYWZ0ZXJEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYWZ0ZXJEZWxldGU7XG5cdGlmIChhZnRlckRlbGV0ZSkgYXdhaXQgYWZ0ZXJEZWxldGUoc2Vzc2lvbi51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGlmIChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIHRocm93IGN0eC5yZWRpcmVjdChjdHgucXVlcnkuY2FsbGJhY2tVUkwgfHwgXCIvXCIpO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0bWVzc2FnZTogXCJVc2VyIGRlbGV0ZWRcIlxuXHR9KTtcbn0pO1xuY29uc3QgY2hhbmdlRW1haWwgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvY2hhbmdlLWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdG5ld0VtYWlsOiB6LmVtYWlsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBzZXQgbXVzdCBiZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIiB9KSxcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBlbWFpbCB2ZXJpZmljYXRpb25cIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJjaGFuZ2VFbWFpbFwiLFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0XCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJFbWFpbCBjaGFuZ2UgcmVxdWVzdCBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c3RhdHVzOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW1wiRW1haWwgdXBkYXRlZFwiLCBcIlZlcmlmaWNhdGlvbiBlbWFpbCBzZW50XCJdLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdGF0dXMgbWVzc2FnZSBvZiB0aGUgZW1haWwgY2hhbmdlIHByb2Nlc3NcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0sXG5cdFx0XHRcIjQyMlwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVucHJvY2Vzc2FibGUgRW50aXR5LiBFbWFpbCBhbHJlYWR5IGV4aXN0c1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLnVzZXI/LmNoYW5nZUVtYWlsPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ2hhbmdlIGVtYWlsIGlzIGRpc2FibGVkLlwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQ2hhbmdlIGVtYWlsIGlzIGRpc2FibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgbmV3RW1haWwgPSBjdHguYm9keS5uZXdFbWFpbC50b0xvd2VyQ2FzZSgpO1xuXHRpZiAobmV3RW1haWwgPT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkVtYWlsIGlzIHRoZSBzYW1lXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJFbWFpbCBpcyB0aGUgc2FtZVwiIH0pO1xuXHR9XG5cdGlmIChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKG5ld0VtYWlsKSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkVtYWlsIGFscmVhZHkgZXhpc3RzXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0FMUkVBRFlfRVhJU1RTX1VTRV9BTk9USEVSX0VNQUlMIH0pO1xuXHR9XG5cdC8qKlxuXHQqIElmIHRoZSBlbWFpbCBpcyBub3QgdmVyaWZpZWQsIHdlIGNhbiB1cGRhdGUgdGhlIGVtYWlsIGlmIHRoZSBvcHRpb24gaXMgZW5hYmxlZFxuXHQqL1xuXHRpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsVmVyaWZpZWQgIT09IHRydWUgJiYgY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnVwZGF0ZUVtYWlsV2l0aG91dFZlcmlmaWNhdGlvbikge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyQnlFbWFpbChjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWwsIHsgZW1haWw6IG5ld0VtYWlsIH0pO1xuXHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRzZXNzaW9uOiBjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24sXG5cdFx0XHR1c2VyOiB7XG5cdFx0XHRcdC4uLmN0eC5jb250ZXh0LnNlc3Npb24udXNlcixcblx0XHRcdFx0ZW1haWw6IG5ld0VtYWlsXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdFx0Y29uc3QgdG9rZW4kMSA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBuZXdFbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0Y29uc3QgdXJsJDEgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbiQxfSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdC4uLmN0eC5jb250ZXh0LnNlc3Npb24udXNlcixcblx0XHRcdFx0XHRlbWFpbDogbmV3RW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0dXJsOiB1cmwkMSxcblx0XHRcdFx0dG9rZW46IHRva2VuJDFcblx0XHRcdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdFx0fVxuXHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsVmVyaWZpZWQgJiYgKGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5jaGFuZ2VFbWFpbC5zZW5kQ2hhbmdlRW1haWxDb25maXJtYXRpb24gfHwgY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbFZlcmlmaWNhdGlvbikpIHtcblx0XHRjb25zdCB0b2tlbiQxID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCwgbmV3RW1haWwsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbiwgeyByZXF1ZXN0VHlwZTogXCJjaGFuZ2UtZW1haWwtY29uZmlybWF0aW9uXCIgfSk7XG5cdFx0Y29uc3QgdXJsJDEgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbiQxfSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG5cdFx0Y29uc3Qgc2VuZEZuID0gY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbENvbmZpcm1hdGlvbiB8fCBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwuc2VuZENoYW5nZUVtYWlsVmVyaWZpY2F0aW9uO1xuXHRcdGlmIChzZW5kRm4pIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoc2VuZEZuKHtcblx0XHRcdHVzZXI6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlcixcblx0XHRcdG5ld0VtYWlsLFxuXHRcdFx0dXJsOiB1cmwkMSxcblx0XHRcdHRva2VuOiB0b2tlbiQxXG5cdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdH1cblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZC5cIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsLCBuZXdFbWFpbCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLCB7IHJlcXVlc3RUeXBlOiBcImNoYW5nZS1lbWFpbC12ZXJpZmljYXRpb25cIiB9KTtcblx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0dXNlcjoge1xuXHRcdFx0Li4uY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0ZW1haWw6IG5ld0VtYWlsXG5cdFx0fSxcblx0XHR1cmwsXG5cdFx0dG9rZW5cblx0fSwgY3R4LnJlcXVlc3QpKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIHNldFBhc3N3b3JkLCB1cGRhdGVVc2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGUtdXNlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/update-user.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toAuthEndpoints: () => (/* binding */ toAuthEndpoints)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n//#region src/api/to-auth-endpoints.ts\nconst defuReplaceArrays = (0,defu__WEBPACK_IMPORTED_MODULE_3__.createDefu)((obj, key, value) => {\n\tif (Array.isArray(obj[key]) && Array.isArray(value)) {\n\t\tobj[key] = value;\n\t\treturn true;\n\t}\n});\nconst hooksSourceWeakMap = /* @__PURE__ */ new WeakMap();\nfunction toAuthEndpoints(endpoints, ctx) {\n\tconst api = {};\n\tfor (const [key, endpoint] of Object.entries(endpoints)) {\n\t\tapi[key] = async (context) => {\n\t\t\tconst run = async () => {\n\t\t\t\tconst authContext = await ctx;\n\t\t\t\tlet internalContext = {\n\t\t\t\t\t...context,\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t...authContext,\n\t\t\t\t\t\treturned: void 0,\n\t\t\t\t\t\tresponseHeaders: void 0,\n\t\t\t\t\t\tsession: null\n\t\t\t\t\t},\n\t\t\t\t\tpath: endpoint.path,\n\t\t\t\t\theaders: context?.headers ? new Headers(context?.headers) : void 0\n\t\t\t\t};\n\t\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, async () => {\n\t\t\t\t\tconst { beforeHooks, afterHooks } = getHooks(authContext);\n\t\t\t\t\tconst before = await runBeforeHooks(internalContext, beforeHooks);\n\t\t\t\t\t/**\n\t\t\t\t\t* If `before.context` is returned, it should\n\t\t\t\t\t* get merged with the original context\n\t\t\t\t\t*/\n\t\t\t\t\tif (\"context\" in before && before.context && typeof before.context === \"object\") {\n\t\t\t\t\t\tconst { headers, ...rest } = before.context;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* Headers should be merged differently\n\t\t\t\t\t\t* so the hook doesn't override the whole\n\t\t\t\t\t\t* header\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (headers) headers.forEach((value, key$1) => {\n\t\t\t\t\t\t\tinternalContext.headers.set(key$1, value);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinternalContext = defuReplaceArrays(rest, internalContext);\n\t\t\t\t\t} else if (before) return context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(before, { headers: context?.headers }) : context?.returnHeaders ? {\n\t\t\t\t\t\theaders: context?.headers,\n\t\t\t\t\t\tresponse: before\n\t\t\t\t\t} : before;\n\t\t\t\t\tinternalContext.asResponse = false;\n\t\t\t\t\tinternalContext.returnHeaders = true;\n\t\t\t\t\tinternalContext.returnStatus = true;\n\t\t\t\t\tconst result = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, () => endpoint(internalContext)).catch((e) => {\n\t\t\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError)\n /**\n\t\t\t\t\t\t* API Errors from response are caught\n\t\t\t\t\t\t* and returned to hooks\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresponse: e,\n\t\t\t\t\t\t\tstatus: e.statusCode,\n\t\t\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tif (result && result instanceof Response) return result;\n\t\t\t\t\tinternalContext.context.returned = result.response;\n\t\t\t\t\tinternalContext.context.responseHeaders = result.headers;\n\t\t\t\t\tconst after = await runAfterHooks(internalContext, afterHooks);\n\t\t\t\t\tif (after.response) result.response = after.response;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(authContext.logger.level, \"debug\")) result.response.stack = result.response.errorStack;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && !context?.asResponse) throw result.response;\n\t\t\t\t\treturn context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(result.response, {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t}) : context?.returnHeaders ? context?.returnStatus ? {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response\n\t\t\t\t\t} : context?.returnStatus ? {\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : result.response;\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.hasRequestState)()) return run();\n\t\t\telse return (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithRequestState)(/* @__PURE__ */ new WeakMap(), run);\n\t\t};\n\t\tapi[key].path = endpoint.path;\n\t\tapi[key].options = endpoint.options;\n\t}\n\treturn api;\n}\nasync function runBeforeHooks(context, hooks) {\n\tlet modifiedContext = {};\n\tfor (const hook of hooks) {\n\t\tlet matched = false;\n\t\ttry {\n\t\t\tmatched = hook.matcher(context);\n\t\t} catch (error) {\n\t\t\tconst hookSource = hooksSourceWeakMap.get(hook.handler) ?? \"unknown\";\n\t\t\tcontext.context.logger.error(`An error occurred during ${hookSource} hook matcher execution:`, error);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_2__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `An error occurred during hook matcher execution. Check the logs for more details.` });\n\t\t}\n\t\tif (matched) {\n\t\t\tconst result = await hook.handler({\n\t\t\t\t...context,\n\t\t\t\treturnHeaders: false\n\t\t\t}).catch((e) => {\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\tthrow e;\n\t\t\t});\n\t\t\tif (result && typeof result === \"object\") {\n\t\t\t\tif (\"context\" in result && typeof result.context === \"object\") {\n\t\t\t\t\tconst { headers, ...rest } = result.context;\n\t\t\t\t\tif (headers instanceof Headers) if (modifiedContext.headers) headers.forEach((value, key) => {\n\t\t\t\t\t\tmodifiedContext.headers?.set(key, value);\n\t\t\t\t\t});\n\t\t\t\t\telse modifiedContext.headers = headers;\n\t\t\t\t\tmodifiedContext = defuReplaceArrays(rest, modifiedContext);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\treturn { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n\tfor (const hook of hooks) if (hook.matcher(context)) {\n\t\tconst result = await hook.handler(context).catch((e) => {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\treturn {\n\t\t\t\t\tresponse: e,\n\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow e;\n\t\t});\n\t\tif (result.headers) result.headers.forEach((value, key) => {\n\t\t\tif (!context.context.responseHeaders) context.context.responseHeaders = new Headers({ [key]: value });\n\t\t\telse if (key.toLowerCase() === \"set-cookie\") context.context.responseHeaders.append(key, value);\n\t\t\telse context.context.responseHeaders.set(key, value);\n\t\t});\n\t\tif (result.response) context.context.returned = result.response;\n\t}\n\treturn {\n\t\tresponse: context.context.returned,\n\t\theaders: context.context.responseHeaders\n\t};\n}\nfunction getHooks(authContext) {\n\tconst plugins = authContext.options.plugins || [];\n\tconst beforeHooks = [];\n\tconst afterHooks = [];\n\tconst beforeHookHandler = authContext.options.hooks?.before;\n\tif (beforeHookHandler) {\n\t\thooksSourceWeakMap.set(beforeHookHandler, \"user\");\n\t\tbeforeHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: beforeHookHandler\n\t\t});\n\t}\n\tconst afterHookHandler = authContext.options.hooks?.after;\n\tif (afterHookHandler) {\n\t\thooksSourceWeakMap.set(afterHookHandler, \"user\");\n\t\tafterHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: afterHookHandler\n\t\t});\n\t}\n\tconst pluginBeforeHooks = plugins.filter((plugin) => plugin.hooks?.before).map((plugin) => plugin.hooks?.before).flat();\n\tconst pluginAfterHooks = plugins.filter((plugin) => plugin.hooks?.after).map((plugin) => plugin.hooks?.after).flat();\n\t/**\n\t* Add plugin added hooks at last\n\t*/\n\tif (pluginBeforeHooks.length) beforeHooks.push(...pluginBeforeHooks);\n\tif (pluginAfterHooks.length) afterHooks.push(...pluginAfterHooks);\n\treturn {\n\t\tbeforeHooks,\n\t\tafterHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=to-auth-endpoints.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS90by1hdXRoLWVuZHBvaW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUc7QUFDaEQ7QUFDTjtBQUNqQjs7QUFFbEM7QUFDQSwwQkFBMEIsZ0RBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlGQUFzQjtBQUNqQyxhQUFhLDBCQUEwQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLG1CQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU8sOENBQThDLHVEQUFVLFdBQVcsMkJBQTJCO0FBQ3JHO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlGQUFzQjtBQUNoRCx1QkFBdUIsaURBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpREFBUSxJQUFJLHVFQUFnQjtBQUNoRSxvQ0FBb0MsaURBQVE7QUFDNUMsa0NBQWtDLHVEQUFVO0FBQzVDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxhQUFhLDBFQUFlO0FBQzVCLGVBQWUsOEVBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDREQUE0RCxZQUFZO0FBQ3hFLGFBQWEsaURBQVEsNEJBQTRCLDhGQUE4RjtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHFCQUFxQixpREFBUSxJQUFJLHVFQUFnQjtBQUNqRDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsYUFBYSxtQkFBbUI7QUFDaEM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlEQUFRO0FBQzVCLFFBQVEsdUVBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlGQUF5RixjQUFjO0FBQ3ZHO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHRvLWF1dGgtZW5kcG9pbnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYXNSZXF1ZXN0U3RhdGUsIHJ1bldpdGhFbmRwb2ludENvbnRleHQsIHJ1bldpdGhSZXF1ZXN0U3RhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgc2hvdWxkUHVibGlzaExvZyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEFQSUVycm9yLCB0b1Jlc3BvbnNlIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVEZWZ1IH0gZnJvbSBcImRlZnVcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvdG8tYXV0aC1lbmRwb2ludHMudHNcbmNvbnN0IGRlZnVSZXBsYWNlQXJyYXlzID0gY3JlYXRlRGVmdSgob2JqLCBrZXksIHZhbHVlKSA9PiB7XG5cdGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdG9ialtrZXldID0gdmFsdWU7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn0pO1xuY29uc3QgaG9va3NTb3VyY2VXZWFrTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0b0F1dGhFbmRwb2ludHMoZW5kcG9pbnRzLCBjdHgpIHtcblx0Y29uc3QgYXBpID0ge307XG5cdGZvciAoY29uc3QgW2tleSwgZW5kcG9pbnRdIG9mIE9iamVjdC5lbnRyaWVzKGVuZHBvaW50cykpIHtcblx0XHRhcGlba2V5XSA9IGFzeW5jIChjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBydW4gPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGF1dGhDb250ZXh0ID0gYXdhaXQgY3R4O1xuXHRcdFx0XHRsZXQgaW50ZXJuYWxDb250ZXh0ID0ge1xuXHRcdFx0XHRcdC4uLmNvbnRleHQsXG5cdFx0XHRcdFx0Y29udGV4dDoge1xuXHRcdFx0XHRcdFx0Li4uYXV0aENvbnRleHQsXG5cdFx0XHRcdFx0XHRyZXR1cm5lZDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzOiB2b2lkIDAsXG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBudWxsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwYXRoOiBlbmRwb2ludC5wYXRoLFxuXHRcdFx0XHRcdGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMgPyBuZXcgSGVhZGVycyhjb250ZXh0Py5oZWFkZXJzKSA6IHZvaWQgMFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gcnVuV2l0aEVuZHBvaW50Q29udGV4dChpbnRlcm5hbENvbnRleHQsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCB7IGJlZm9yZUhvb2tzLCBhZnRlckhvb2tzIH0gPSBnZXRIb29rcyhhdXRoQ29udGV4dCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVmb3JlID0gYXdhaXQgcnVuQmVmb3JlSG9va3MoaW50ZXJuYWxDb250ZXh0LCBiZWZvcmVIb29rcyk7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBJZiBgYmVmb3JlLmNvbnRleHRgIGlzIHJldHVybmVkLCBpdCBzaG91bGRcblx0XHRcdFx0XHQqIGdldCBtZXJnZWQgd2l0aCB0aGUgb3JpZ2luYWwgY29udGV4dFxuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0aWYgKFwiY29udGV4dFwiIGluIGJlZm9yZSAmJiBiZWZvcmUuY29udGV4dCAmJiB0eXBlb2YgYmVmb3JlLmNvbnRleHQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gYmVmb3JlLmNvbnRleHQ7XG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCogSGVhZGVycyBzaG91bGQgYmUgbWVyZ2VkIGRpZmZlcmVudGx5XG5cdFx0XHRcdFx0XHQqIHNvIHRoZSBob29rIGRvZXNuJ3Qgb3ZlcnJpZGUgdGhlIHdob2xlXG5cdFx0XHRcdFx0XHQqIGhlYWRlclxuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGlmIChoZWFkZXJzKSBoZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkkMSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuaGVhZGVycy5zZXQoa2V5JDEsIHZhbHVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0ID0gZGVmdVJlcGxhY2VBcnJheXMocmVzdCwgaW50ZXJuYWxDb250ZXh0KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGJlZm9yZSkgcmV0dXJuIGNvbnRleHQ/LmFzUmVzcG9uc2UgPyB0b1Jlc3BvbnNlKGJlZm9yZSwgeyBoZWFkZXJzOiBjb250ZXh0Py5oZWFkZXJzIH0pIDogY29udGV4dD8ucmV0dXJuSGVhZGVycyA/IHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogYmVmb3JlXG5cdFx0XHRcdFx0fSA6IGJlZm9yZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuYXNSZXNwb25zZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGludGVybmFsQ29udGV4dC5yZXR1cm5IZWFkZXJzID0gdHJ1ZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQucmV0dXJuU3RhdHVzID0gdHJ1ZTtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBydW5XaXRoRW5kcG9pbnRDb250ZXh0KGludGVybmFsQ29udGV4dCwgKCkgPT4gZW5kcG9pbnQoaW50ZXJuYWxDb250ZXh0KSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpXG4gLyoqXG5cdFx0XHRcdFx0XHQqIEFQSSBFcnJvcnMgZnJvbSByZXNwb25zZSBhcmUgY2F1Z2h0XG5cdFx0XHRcdFx0XHQqIGFuZCByZXR1cm5lZCB0byBob29rc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlOiBlLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IGUuc3RhdHVzQ29kZSxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogZS5oZWFkZXJzID8gbmV3IEhlYWRlcnMoZS5oZWFkZXJzKSA6IG51bGxcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQgJiYgcmVzdWx0IGluc3RhbmNlb2YgUmVzcG9uc2UpIHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmV0dXJuZWQgPSByZXN1bHQucmVzcG9uc2U7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzID0gcmVzdWx0LmhlYWRlcnM7XG5cdFx0XHRcdFx0Y29uc3QgYWZ0ZXIgPSBhd2FpdCBydW5BZnRlckhvb2tzKGludGVybmFsQ29udGV4dCwgYWZ0ZXJIb29rcyk7XG5cdFx0XHRcdFx0aWYgKGFmdGVyLnJlc3BvbnNlKSByZXN1bHQucmVzcG9uc2UgPSBhZnRlci5yZXNwb25zZTtcblx0XHRcdFx0XHRpZiAocmVzdWx0LnJlc3BvbnNlIGluc3RhbmNlb2YgQVBJRXJyb3IgJiYgc2hvdWxkUHVibGlzaExvZyhhdXRoQ29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIHJlc3VsdC5yZXNwb25zZS5zdGFjayA9IHJlc3VsdC5yZXNwb25zZS5lcnJvclN0YWNrO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQucmVzcG9uc2UgaW5zdGFuY2VvZiBBUElFcnJvciAmJiAhY29udGV4dD8uYXNSZXNwb25zZSkgdGhyb3cgcmVzdWx0LnJlc3BvbnNlO1xuXHRcdFx0XHRcdHJldHVybiBjb250ZXh0Py5hc1Jlc3BvbnNlID8gdG9SZXNwb25zZShyZXN1bHQucmVzcG9uc2UsIHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSkgOiBjb250ZXh0Py5yZXR1cm5IZWFkZXJzID8gY29udGV4dD8ucmV0dXJuU3RhdHVzID8ge1xuXHRcdFx0XHRcdFx0aGVhZGVyczogcmVzdWx0LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSA6IHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2U6IHJlc3VsdC5yZXNwb25zZVxuXHRcdFx0XHRcdH0gOiBjb250ZXh0Py5yZXR1cm5TdGF0dXMgPyB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSA6IHJlc3VsdC5yZXNwb25zZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdFx0aWYgKGF3YWl0IGhhc1JlcXVlc3RTdGF0ZSgpKSByZXR1cm4gcnVuKCk7XG5cdFx0XHRlbHNlIHJldHVybiBydW5XaXRoUmVxdWVzdFN0YXRlKC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBydW4pO1xuXHRcdH07XG5cdFx0YXBpW2tleV0ucGF0aCA9IGVuZHBvaW50LnBhdGg7XG5cdFx0YXBpW2tleV0ub3B0aW9ucyA9IGVuZHBvaW50Lm9wdGlvbnM7XG5cdH1cblx0cmV0dXJuIGFwaTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bkJlZm9yZUhvb2tzKGNvbnRleHQsIGhvb2tzKSB7XG5cdGxldCBtb2RpZmllZENvbnRleHQgPSB7fTtcblx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG5cdFx0bGV0IG1hdGNoZWQgPSBmYWxzZTtcblx0XHR0cnkge1xuXHRcdFx0bWF0Y2hlZCA9IGhvb2subWF0Y2hlcihjb250ZXh0KTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgaG9va1NvdXJjZSA9IGhvb2tzU291cmNlV2Vha01hcC5nZXQoaG9vay5oYW5kbGVyKSA/PyBcInVua25vd25cIjtcblx0XHRcdGNvbnRleHQuY29udGV4dC5sb2dnZXIuZXJyb3IoYEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyAke2hvb2tTb3VyY2V9IGhvb2sgbWF0Y2hlciBleGVjdXRpb246YCwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogYEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBob29rIG1hdGNoZXIgZXhlY3V0aW9uLiBDaGVjayB0aGUgbG9ncyBmb3IgbW9yZSBkZXRhaWxzLmAgfSk7XG5cdFx0fVxuXHRcdGlmIChtYXRjaGVkKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoe1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZVxuXHRcdFx0fSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvciAmJiBzaG91bGRQdWJsaXNoTG9nKGNvbnRleHQuY29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIGUuc3RhY2sgPSBlLmVycm9yU3RhY2s7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRpZiAoXCJjb250ZXh0XCIgaW4gcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQuY29udGV4dCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gcmVzdWx0LmNvbnRleHQ7XG5cdFx0XHRcdFx0aWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSBpZiAobW9kaWZpZWRDb250ZXh0LmhlYWRlcnMpIGhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuXHRcdFx0XHRcdFx0bW9kaWZpZWRDb250ZXh0LmhlYWRlcnM/LnNldChrZXksIHZhbHVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRlbHNlIG1vZGlmaWVkQ29udGV4dC5oZWFkZXJzID0gaGVhZGVycztcblx0XHRcdFx0XHRtb2RpZmllZENvbnRleHQgPSBkZWZ1UmVwbGFjZUFycmF5cyhyZXN0LCBtb2RpZmllZENvbnRleHQpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7IGNvbnRleHQ6IG1vZGlmaWVkQ29udGV4dCB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQWZ0ZXJIb29rcyhjb250ZXh0LCBob29rcykge1xuXHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIGlmIChob29rLm1hdGNoZXIoY29udGV4dCkpIHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoY29udGV4dCkuY2F0Y2goKGUpID0+IHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHtcblx0XHRcdFx0aWYgKHNob3VsZFB1Ymxpc2hMb2coY29udGV4dC5jb250ZXh0LmxvZ2dlci5sZXZlbCwgXCJkZWJ1Z1wiKSkgZS5zdGFjayA9IGUuZXJyb3JTdGFjaztcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXNwb25zZTogZSxcblx0XHRcdFx0XHRoZWFkZXJzOiBlLmhlYWRlcnMgPyBuZXcgSGVhZGVycyhlLmhlYWRlcnMpIDogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgZTtcblx0XHR9KTtcblx0XHRpZiAocmVzdWx0LmhlYWRlcnMpIHJlc3VsdC5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdGlmICghY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycykgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgW2tleV06IHZhbHVlIH0pO1xuXHRcdFx0ZWxzZSBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IFwic2V0LWNvb2tpZVwiKSBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKTtcblx0XHRcdGVsc2UgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0fSk7XG5cdFx0aWYgKHJlc3VsdC5yZXNwb25zZSkgY29udGV4dC5jb250ZXh0LnJldHVybmVkID0gcmVzdWx0LnJlc3BvbnNlO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0cmVzcG9uc2U6IGNvbnRleHQuY29udGV4dC5yZXR1cm5lZCxcblx0XHRoZWFkZXJzOiBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzXG5cdH07XG59XG5mdW5jdGlvbiBnZXRIb29rcyhhdXRoQ29udGV4dCkge1xuXHRjb25zdCBwbHVnaW5zID0gYXV0aENvbnRleHQub3B0aW9ucy5wbHVnaW5zIHx8IFtdO1xuXHRjb25zdCBiZWZvcmVIb29rcyA9IFtdO1xuXHRjb25zdCBhZnRlckhvb2tzID0gW107XG5cdGNvbnN0IGJlZm9yZUhvb2tIYW5kbGVyID0gYXV0aENvbnRleHQub3B0aW9ucy5ob29rcz8uYmVmb3JlO1xuXHRpZiAoYmVmb3JlSG9va0hhbmRsZXIpIHtcblx0XHRob29rc1NvdXJjZVdlYWtNYXAuc2V0KGJlZm9yZUhvb2tIYW5kbGVyLCBcInVzZXJcIik7XG5cdFx0YmVmb3JlSG9va3MucHVzaCh7XG5cdFx0XHRtYXRjaGVyOiAoKSA9PiB0cnVlLFxuXHRcdFx0aGFuZGxlcjogYmVmb3JlSG9va0hhbmRsZXJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBhZnRlckhvb2tIYW5kbGVyID0gYXV0aENvbnRleHQub3B0aW9ucy5ob29rcz8uYWZ0ZXI7XG5cdGlmIChhZnRlckhvb2tIYW5kbGVyKSB7XG5cdFx0aG9va3NTb3VyY2VXZWFrTWFwLnNldChhZnRlckhvb2tIYW5kbGVyLCBcInVzZXJcIik7XG5cdFx0YWZ0ZXJIb29rcy5wdXNoKHtcblx0XHRcdG1hdGNoZXI6ICgpID0+IHRydWUsXG5cdFx0XHRoYW5kbGVyOiBhZnRlckhvb2tIYW5kbGVyXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgcGx1Z2luQmVmb3JlSG9va3MgPSBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmJlZm9yZSkubWFwKChwbHVnaW4pID0+IHBsdWdpbi5ob29rcz8uYmVmb3JlKS5mbGF0KCk7XG5cdGNvbnN0IHBsdWdpbkFmdGVySG9va3MgPSBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmFmdGVyKS5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLmhvb2tzPy5hZnRlcikuZmxhdCgpO1xuXHQvKipcblx0KiBBZGQgcGx1Z2luIGFkZGVkIGhvb2tzIGF0IGxhc3Rcblx0Ki9cblx0aWYgKHBsdWdpbkJlZm9yZUhvb2tzLmxlbmd0aCkgYmVmb3JlSG9va3MucHVzaCguLi5wbHVnaW5CZWZvcmVIb29rcyk7XG5cdGlmIChwbHVnaW5BZnRlckhvb2tzLmxlbmd0aCkgYWZ0ZXJIb29rcy5wdXNoKC4uLnBsdWdpbkFmdGVySG9va3MpO1xuXHRyZXR1cm4ge1xuXHRcdGJlZm9yZUhvb2tzLFxuXHRcdGFmdGVySG9va3Ncblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b0F1dGhFbmRwb2ludHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLWF1dGgtZW5kcG9pbnRzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/to-auth-endpoints.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBetterAuth: () => (/* binding */ createBetterAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/helpers.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/auth/base.ts\nconst createBetterAuth = (options, initFn) => {\n\tconst authContext = initFn(options);\n\tconst { api } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getEndpoints)(authContext, options);\n\treturn {\n\t\thandler: async (request) => {\n\t\t\tconst ctx = await authContext;\n\t\t\tconst basePath = ctx.options.basePath || \"/api/auth\";\n\t\t\tif (!ctx.options.baseURL) {\n\t\t\t\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(void 0, basePath, request, void 0, ctx.options.advanced?.trustedProxyHeaders);\n\t\t\t\tif (baseURL) {\n\t\t\t\t\tctx.baseURL = baseURL;\n\t\t\t\t\tctx.options.baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(ctx.baseURL) || void 0;\n\t\t\t\t} else throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Could not get base URL from request. Please provide a valid base URL.\");\n\t\t\t}\n\t\t\tctx.trustedOrigins = await (0,_context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getTrustedOrigins)(ctx.options, request);\n\t\t\tconst { handler } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.router)(ctx, options);\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__.runWithAdapter)(ctx.adapter, () => handler(request));\n\t\t},\n\t\tapi,\n\t\toptions,\n\t\t$context: authContext,\n\t\t$ERROR_CODES: {\n\t\t\t...options.plugins?.reduce((acc, plugin) => {\n\t\t\t\tif (plugin.$ERROR_CODES) return {\n\t\t\t\t\t...acc,\n\t\t\t\t\t...plugin.$ERROR_CODES\n\t\t\t\t};\n\t\t\t\treturn acc;\n\t\t\t}, {}),\n\t\t\t..._better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BASE_ERROR_CODES\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2F1dGgvYmFzZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ0Q7QUFDRztBQUNBO0FBQ2lCOztBQUU1RTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE1BQU0sRUFBRSw0REFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBEQUFVO0FBQzlCO0FBQ0E7QUFDQSwyQkFBMkIseURBQVM7QUFDcEMsTUFBTSxlQUFlLG9FQUFlO0FBQ3BDO0FBQ0EsOEJBQThCLHVFQUFpQjtBQUMvQyxXQUFXLFVBQVUsRUFBRSxzREFBTTtBQUM3QixVQUFVLHlFQUFjO0FBQ3hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSLE1BQU0scUVBQWdCO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhdXRoXFxiYXNlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRCYXNlVVJMLCBnZXRPcmlnaW4gfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnRzLCByb3V0ZXIgfSBmcm9tIFwiLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJ1c3RlZE9yaWdpbnMgfSBmcm9tIFwiLi4vY29udGV4dC9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgcnVuV2l0aEFkYXB0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUywgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXV0aC9iYXNlLnRzXG5jb25zdCBjcmVhdGVCZXR0ZXJBdXRoID0gKG9wdGlvbnMsIGluaXRGbikgPT4ge1xuXHRjb25zdCBhdXRoQ29udGV4dCA9IGluaXRGbihvcHRpb25zKTtcblx0Y29uc3QgeyBhcGkgfSA9IGdldEVuZHBvaW50cyhhdXRoQ29udGV4dCwgb3B0aW9ucyk7XG5cdHJldHVybiB7XG5cdFx0aGFuZGxlcjogYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRcdGNvbnN0IGN0eCA9IGF3YWl0IGF1dGhDb250ZXh0O1xuXHRcdFx0Y29uc3QgYmFzZVBhdGggPSBjdHgub3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwiO1xuXHRcdFx0aWYgKCFjdHgub3B0aW9ucy5iYXNlVVJMKSB7XG5cdFx0XHRcdGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVVJMKHZvaWQgMCwgYmFzZVBhdGgsIHJlcXVlc3QsIHZvaWQgMCwgY3R4Lm9wdGlvbnMuYWR2YW5jZWQ/LnRydXN0ZWRQcm94eUhlYWRlcnMpO1xuXHRcdFx0XHRpZiAoYmFzZVVSTCkge1xuXHRcdFx0XHRcdGN0eC5iYXNlVVJMID0gYmFzZVVSTDtcblx0XHRcdFx0XHRjdHgub3B0aW9ucy5iYXNlVVJMID0gZ2V0T3JpZ2luKGN0eC5iYXNlVVJMKSB8fCB2b2lkIDA7XG5cdFx0XHRcdH0gZWxzZSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ291bGQgbm90IGdldCBiYXNlIFVSTCBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdFx0fVxuXHRcdFx0Y3R4LnRydXN0ZWRPcmlnaW5zID0gYXdhaXQgZ2V0VHJ1c3RlZE9yaWdpbnMoY3R4Lm9wdGlvbnMsIHJlcXVlc3QpO1xuXHRcdFx0Y29uc3QgeyBoYW5kbGVyIH0gPSByb3V0ZXIoY3R4LCBvcHRpb25zKTtcblx0XHRcdHJldHVybiBydW5XaXRoQWRhcHRlcihjdHguYWRhcHRlciwgKCkgPT4gaGFuZGxlcihyZXF1ZXN0KSk7XG5cdFx0fSxcblx0XHRhcGksXG5cdFx0b3B0aW9ucyxcblx0XHQkY29udGV4dDogYXV0aENvbnRleHQsXG5cdFx0JEVSUk9SX0NPREVTOiB7XG5cdFx0XHQuLi5vcHRpb25zLnBsdWdpbnM/LnJlZHVjZSgoYWNjLCBwbHVnaW4pID0+IHtcblx0XHRcdFx0aWYgKHBsdWdpbi4kRVJST1JfQ09ERVMpIHJldHVybiB7XG5cdFx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHRcdC4uLnBsdWdpbi4kRVJST1JfQ09ERVNcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdH0sIHt9KSxcblx0XHRcdC4uLkJBU0VfRVJST1JfQ09ERVNcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUJldHRlckF1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   betterAuth: () => (/* binding */ betterAuth)\n/* harmony export */ });\n/* harmony import */ var _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../context/init.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs\");\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/base.mjs\");\n\n\n\n//#region src/auth/full.ts\n/**\n* Better Auth initializer for full mode (with Kysely)\n*\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth\";\n*\n* const auth = betterAuth({\n* \tdatabase: new PostgresDialect({ connection: process.env.DATABASE_URL }),\n* });\n* ```\n*\n* For minimal mode (without Kysely), import from `better-auth/minimal` instead\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth/minimal\";\n*\n* const auth = betterAuth({\n*\t  database: drizzleAdapter(db, { provider: \"pg\" }),\n* });\n*/\nconst betterAuth = (options) => {\n\treturn (0,_base_mjs__WEBPACK_IMPORTED_MODULE_1__.createBetterAuth)(options, _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__.init);\n};\n\n//#endregion\n\n//# sourceMappingURL=full.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2F1dGgvZnVsbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ0c7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QjtBQUNBO0FBQ0EsbUNBQW1DLHNDQUFzQztBQUN6RSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QjtBQUNBO0FBQ0EsbUNBQW1DLGdCQUFnQjtBQUNuRCxHQUFHO0FBQ0g7QUFDQTtBQUNBLFFBQVEsMkRBQWdCLFVBQVUsbURBQUk7QUFDdEM7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXV0aFxcZnVsbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdCB9IGZyb20gXCIuLi9jb250ZXh0L2luaXQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVCZXR0ZXJBdXRoIH0gZnJvbSBcIi4vYmFzZS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL2Z1bGwudHNcbi8qKlxuKiBCZXR0ZXIgQXV0aCBpbml0aWFsaXplciBmb3IgZnVsbCBtb2RlICh3aXRoIEt5c2VseSlcbipcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogaW1wb3J0IHsgYmV0dGVyQXV0aCB9IGZyb20gXCJiZXR0ZXItYXV0aFwiO1xuKlxuKiBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qIFx0ZGF0YWJhc2U6IG5ldyBQb3N0Z3Jlc0RpYWxlY3QoeyBjb25uZWN0aW9uOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfSksXG4qIH0pO1xuKiBgYGBcbipcbiogRm9yIG1pbmltYWwgbW9kZSAod2l0aG91dCBLeXNlbHkpLCBpbXBvcnQgZnJvbSBgYmV0dGVyLWF1dGgvbWluaW1hbGAgaW5zdGVhZFxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcImJldHRlci1hdXRoL21pbmltYWxcIjtcbipcbiogY29uc3QgYXV0aCA9IGJldHRlckF1dGgoe1xuKlx0ICBkYXRhYmFzZTogZHJpenpsZUFkYXB0ZXIoZGIsIHsgcHJvdmlkZXI6IFwicGdcIiB9KSxcbiogfSk7XG4qL1xuY29uc3QgYmV0dGVyQXV0aCA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBjcmVhdGVCZXR0ZXJBdXRoKG9wdGlvbnMsIGluaXQpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBiZXR0ZXJBdXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdWxsLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matchesOriginPattern: () => (/* binding */ matchesOriginPattern)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/wildcard.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs\");\n\n\n\n//#region src/auth/trusted-origins.ts\n/**\n* Matches the given url against an origin or origin pattern\n* See \"options.trustedOrigins\" for details of supported patterns\n*\n* @param url The url to test\n* @param pattern The origin pattern\n* @param [settings] Specify supported pattern matching settings\n* @returns {boolean} true if the URL matches the origin pattern, false otherwise.\n*/\nconst matchesOriginPattern = (url, pattern, settings) => {\n\tif (url.startsWith(\"/\")) {\n\t\tif (settings?.allowRelativePaths) return url.startsWith(\"/\") && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url);\n\t\treturn false;\n\t}\n\tif (pattern.includes(\"*\") || pattern.includes(\"?\")) {\n\t\tif (pattern.includes(\"://\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)((0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) || url);\n\t\tconst host = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getHost)(url);\n\t\tif (!host) return false;\n\t\treturn (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)(host);\n\t}\n\tconst protocol = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getProtocol)(url);\n\treturn protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) : url.startsWith(pattern);\n};\n\n//#endregion\n\n//# sourceMappingURL=trusted-origins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2F1dGgvdHJ1c3RlZC1vcmlnaW5zLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUU7QUFDYjs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxrRUFBYSxVQUFVLHlEQUFTO0FBQ3RFLGVBQWUsdURBQU87QUFDdEI7QUFDQSxTQUFTLGtFQUFhO0FBQ3RCO0FBQ0Esa0JBQWtCLDJEQUFXO0FBQzdCLGlGQUFpRix5REFBUztBQUMxRjs7QUFFQTtBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhdXRoXFx0cnVzdGVkLW9yaWdpbnMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgd2lsZGNhcmRNYXRjaCB9IGZyb20gXCIuLi91dGlscy93aWxkY2FyZC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL3RydXN0ZWQtb3JpZ2lucy50c1xuLyoqXG4qIE1hdGNoZXMgdGhlIGdpdmVuIHVybCBhZ2FpbnN0IGFuIG9yaWdpbiBvciBvcmlnaW4gcGF0dGVyblxuKiBTZWUgXCJvcHRpb25zLnRydXN0ZWRPcmlnaW5zXCIgZm9yIGRldGFpbHMgb2Ygc3VwcG9ydGVkIHBhdHRlcm5zXG4qXG4qIEBwYXJhbSB1cmwgVGhlIHVybCB0byB0ZXN0XG4qIEBwYXJhbSBwYXR0ZXJuIFRoZSBvcmlnaW4gcGF0dGVyblxuKiBAcGFyYW0gW3NldHRpbmdzXSBTcGVjaWZ5IHN1cHBvcnRlZCBwYXR0ZXJuIG1hdGNoaW5nIHNldHRpbmdzXG4qIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBVUkwgbWF0Y2hlcyB0aGUgb3JpZ2luIHBhdHRlcm4sIGZhbHNlIG90aGVyd2lzZS5cbiovXG5jb25zdCBtYXRjaGVzT3JpZ2luUGF0dGVybiA9ICh1cmwsIHBhdHRlcm4sIHNldHRpbmdzKSA9PiB7XG5cdGlmICh1cmwuc3RhcnRzV2l0aChcIi9cIikpIHtcblx0XHRpZiAoc2V0dGluZ3M/LmFsbG93UmVsYXRpdmVQYXRocykgcmV0dXJuIHVybC5zdGFydHNXaXRoKFwiL1wiKSAmJiAvXlxcLyg/IVxcL3xcXFxcfCUyZnwlNWMpW1xcd1xcLS5cXCsvQF0qKD86XFw/W1xcd1xcLS5cXCsvPSYlQF0qKT8kLy50ZXN0KHVybCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmIChwYXR0ZXJuLmluY2x1ZGVzKFwiKlwiKSB8fCBwYXR0ZXJuLmluY2x1ZGVzKFwiP1wiKSkge1xuXHRcdGlmIChwYXR0ZXJuLmluY2x1ZGVzKFwiOi8vXCIpKSByZXR1cm4gd2lsZGNhcmRNYXRjaChwYXR0ZXJuKShnZXRPcmlnaW4odXJsKSB8fCB1cmwpO1xuXHRcdGNvbnN0IGhvc3QgPSBnZXRIb3N0KHVybCk7XG5cdFx0aWYgKCFob3N0KSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIHdpbGRjYXJkTWF0Y2gocGF0dGVybikoaG9zdCk7XG5cdH1cblx0Y29uc3QgcHJvdG9jb2wgPSBnZXRQcm90b2NvbCh1cmwpO1xuXHRyZXR1cm4gcHJvdG9jb2wgPT09IFwiaHR0cDpcIiB8fCBwcm90b2NvbCA9PT0gXCJodHRwczpcIiB8fCAhcHJvdG9jb2wgPyBwYXR0ZXJuID09PSBnZXRPcmlnaW4odXJsKSA6IHVybC5zdGFydHNXaXRoKHBhdHRlcm4pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtYXRjaGVzT3JpZ2luUGF0dGVybiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJ1c3RlZC1vcmlnaW5zLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthContext: () => (/* binding */ createAuthContext)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth/trusted-origins.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../crypto/password.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/password.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/constants.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/telemetry */ \"(rsc)/./node_modules/.pnpm/@better-auth+telemetry@1.4._c11636a3ce6f8b05864a09e345ba4713/node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/context/create-context.ts\n/**\n* Estimates the entropy of a string in bits.\n* This is a simple approximation that helps detect low-entropy secrets.\n*/\nfunction estimateEntropy(str) {\n\tconst unique = new Set(str).size;\n\tif (unique === 0) return 0;\n\treturn Math.log2(Math.pow(unique, str.length));\n}\n/**\n* Validates that the secret meets minimum security requirements.\n* Throws BetterAuthError if the secret is invalid.\n* Skips validation for DEFAULT_SECRET in test environments only.\n* Only throws for DEFAULT_SECRET in production environment.\n*/\nfunction validateSecret(secret, logger$1) {\n\tconst isDefaultSecret = secret === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SECRET;\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)()) return;\n\tif (isDefaultSecret && _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.\");\n\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).\");\n\tif (secret.length < 32) logger$1.warn(`[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with \\`npx @better-auth/cli secret\\` or \\`openssl rand -base64 32\\`.`);\n\tif (estimateEntropy(secret) < 120) logger$1.warn(\"[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.\");\n}\nasync function createAuthContext(adapter, options, getDatabaseType) {\n\tif (!options.database) options = (0,defu__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(options, {\n\t\tsession: { cookieCache: {\n\t\t\tenabled: true,\n\t\t\tstrategy: \"jwe\",\n\t\t\trefreshCache: true\n\t\t} },\n\t\taccount: {\n\t\t\tstoreStateStrategy: \"cookie\",\n\t\t\tstoreAccountCookie: true\n\t\t}\n\t});\n\tconst plugins = options.plugins || [];\n\tconst internalPlugins = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getInternalPlugins)(options);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.createLogger)(options.logger);\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath);\n\tif (!baseURL) logger$1.warn(`[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.`);\n\tif (adapter.id === \"memory\" && options.advanced?.database?.generateId === false) logger$1.error(`[better-auth] Misconfiguration detected.\nYou are using the memory DB with generateId: false.\nThis will cause no id to be generated for any model.\nMost of the features of Better Auth will not work correctly.`);\n\tconst secret = options.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.BETTER_AUTH_SECRET || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.AUTH_SECRET || _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SECRET;\n\tvalidateSecret(secret, logger$1);\n\toptions = {\n\t\t...options,\n\t\tsecret,\n\t\tbaseURL: baseURL ? new URL(baseURL).origin : \"\",\n\t\tbasePath: options.basePath || \"/api/auth\",\n\t\tplugins: plugins.concat(internalPlugins)\n\t};\n\t(0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.checkEndpointConflicts)(options, logger$1);\n\tconst cookies = (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.getCookies)(options);\n\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__.getAuthTables)(options);\n\tconst providers = Object.entries(options.socialProviders || {}).map(([key, config]) => {\n\t\tif (config == null) return null;\n\t\tif (config.enabled === false) return null;\n\t\tif (!config.clientId) logger$1.warn(`Social provider ${key} is missing clientId or clientSecret`);\n\t\tconst provider = _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__.socialProviders[key](config);\n\t\tprovider.disableImplicitSignUp = config.disableImplicitSignUp;\n\t\treturn provider;\n\t}).filter((x) => x !== null);\n\tconst generateIdFunc = ({ model, size }) => {\n\t\tif (typeof options.advanced?.generateId === \"function\") return options.advanced.generateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tconst dbGenerateId = options?.advanced?.database?.generateId;\n\t\tif (typeof dbGenerateId === \"function\") return dbGenerateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tif (dbGenerateId === \"uuid\") return crypto.randomUUID();\n\t\tif (dbGenerateId === \"serial\" || dbGenerateId === false) return false;\n\t\treturn (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__.generateId)(size);\n\t};\n\tconst { publish } = await (0,_better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__.createTelemetry)(options, {\n\t\tadapter: adapter.id,\n\t\tdatabase: typeof options.database === \"function\" ? \"adapter\" : getDatabaseType(options.database)\n\t});\n\tconst trustedOrigins = await (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getTrustedOrigins)(options);\n\tconst initOrPromise = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.runPluginInit)({\n\t\tappName: options.appName || \"Better Auth\",\n\t\tbaseURL: baseURL || \"\",\n\t\tversion: (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__.getBetterAuthVersion)(),\n\t\tsocialProviders: providers,\n\t\toptions,\n\t\toauthConfig: {\n\t\t\tstoreStateStrategy: options.account?.storeStateStrategy || (options.database ? \"database\" : \"cookie\"),\n\t\t\tskipStateCookieCheck: !!options.account?.skipStateCookieCheck\n\t\t},\n\t\ttables,\n\t\ttrustedOrigins,\n\t\tisTrustedOrigin(url, settings) {\n\t\t\treturn this.trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__.matchesOriginPattern)(url, origin, settings));\n\t\t},\n\t\tsessionConfig: {\n\t\t\tupdateAge: options.session?.updateAge !== void 0 ? options.session.updateAge : 1440 * 60,\n\t\t\texpiresIn: options.session?.expiresIn || 3600 * 24 * 7,\n\t\t\tfreshAge: options.session?.freshAge === void 0 ? 3600 * 24 : options.session.freshAge,\n\t\t\tcookieRefreshCache: (() => {\n\t\t\t\tconst refreshCache = options.session?.cookieCache?.refreshCache;\n\t\t\t\tconst maxAge = options.session?.cookieCache?.maxAge || 300;\n\t\t\t\tif ((!!options.database || !!options.secondaryStorage) && refreshCache) {\n\t\t\t\t\tlogger$1.warn(\"[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (refreshCache === false || refreshCache === void 0) return false;\n\t\t\t\tif (refreshCache === true) return {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: refreshCache.updateAge !== void 0 ? refreshCache.updateAge : Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t})()\n\t\t},\n\t\tsecret,\n\t\trateLimit: {\n\t\t\t...options.rateLimit,\n\t\t\tenabled: options.rateLimit?.enabled ?? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction,\n\t\t\twindow: options.rateLimit?.window || 10,\n\t\t\tmax: options.rateLimit?.max || 100,\n\t\t\tstorage: options.rateLimit?.storage || (options.secondaryStorage ? \"secondary-storage\" : \"memory\")\n\t\t},\n\t\tauthCookies: cookies,\n\t\tlogger: logger$1,\n\t\tgenerateId: generateIdFunc,\n\t\tsession: null,\n\t\tsecondaryStorage: options.secondaryStorage,\n\t\tpassword: {\n\t\t\thash: options.emailAndPassword?.password?.hash || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.hashPassword,\n\t\t\tverify: options.emailAndPassword?.password?.verify || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyPassword,\n\t\t\tconfig: {\n\t\t\t\tminPasswordLength: options.emailAndPassword?.minPasswordLength || 8,\n\t\t\t\tmaxPasswordLength: options.emailAndPassword?.maxPasswordLength || 128\n\t\t\t},\n\t\t\tcheckPassword: _utils_password_mjs__WEBPACK_IMPORTED_MODULE_7__.checkPassword\n\t\t},\n\t\tsetNewSession(session) {\n\t\t\tthis.newSession = session;\n\t\t},\n\t\tnewSession: null,\n\t\tadapter,\n\t\tinternalAdapter: (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(adapter, {\n\t\t\toptions,\n\t\t\tlogger: logger$1,\n\t\t\thooks: options.databaseHooks ? [options.databaseHooks] : [],\n\t\t\tgenerateId: generateIdFunc\n\t\t}),\n\t\tcreateAuthCookie: (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.createCookieGetter)(options),\n\t\tasync runMigrations() {\n\t\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"runMigrations will be set by the specific init implementation\");\n\t\t},\n\t\tpublishTelemetry: publish,\n\t\tskipCSRFCheck: !!options.advanced?.disableCSRFCheck,\n\t\tskipOriginCheck: options.advanced?.disableOriginCheck !== void 0 ? options.advanced.disableOriginCheck : (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)() ? true : false,\n\t\trunInBackground: options.advanced?.backgroundTasks?.handler ?? ((p) => {\n\t\t\tp.catch(() => {});\n\t\t}),\n\t\tasync runInBackgroundOrAwait(promise) {\n\t\t\ttry {\n\t\t\t\tif (options.advanced?.backgroundTasks?.handler) {\n\t\t\t\t\tif (promise instanceof Promise) options.advanced.backgroundTasks.handler(promise.catch((e) => {\n\t\t\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t\t\t}));\n\t\t\t\t} else await promise;\n\t\t\t} catch (e) {\n\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t}\n\t\t},\n\t\tgetPlugin: (id) => options.plugins.find((p) => p.id === id) ?? null\n\t});\n\tlet context;\n\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(initOrPromise)) ({context} = await initOrPromise);\n\telse ({context} = initOrPromise);\n\tif (typeof context.options.emailVerification?.onEmailVerification === \"function\") context.options.emailVerification.onEmailVerification = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__.deprecate)(context.options.emailVerification.onEmailVerification, \"Use `afterEmailVerification` instead. This will be removed in 1.5\", context.logger);\n\treturn context;\n}\n\n//#endregion\n\n//# sourceMappingURL=create-context.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NvbnRleHQvY3JlYXRlLWNvbnRleHQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1FO0FBQ3JCO0FBQ3FCO0FBQ0c7QUFDbEI7QUFDa0I7QUFDTjtBQUNWO0FBQ0k7QUFDRjtBQUM2QjtBQUNwQjtBQUNaO0FBQzJCO0FBQ3RCO0FBQ047QUFDaUI7QUFDWjtBQUNqQzs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxnRUFBYztBQUNsRCxLQUFLLDhEQUFNO0FBQ1gsd0JBQXdCLGdFQUFZLFlBQVkscUVBQWU7QUFDL0Qsd0JBQXdCLHFFQUFlLDZGQUE2RixRQUFRO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlEQUFJO0FBQ3RDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSx5QkFBeUIsaUVBQWtCO0FBQzNDLGtCQUFrQixvRUFBWTtBQUM5QixpQkFBaUIsMERBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1REFBRyx1QkFBdUIsdURBQUcsZ0JBQWdCLGdFQUFjO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNFQUFzQjtBQUN2QixpQkFBaUIsOERBQVU7QUFDM0IsZ0JBQWdCLG9FQUFhO0FBQzdCLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0EseURBQXlELEtBQUs7QUFDOUQsbUJBQW1CLGdGQUFlO0FBQ2xDO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsMkJBQTJCLGFBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLDREQUFZO0FBQ3JCO0FBQ0EsU0FBUyxVQUFVLFFBQVEsd0VBQWU7QUFDMUM7QUFDQTtBQUNBLEVBQUU7QUFDRiw4QkFBOEIsZ0VBQWlCO0FBQy9DLHVCQUF1Qiw0REFBYTtBQUNwQztBQUNBO0FBQ0EsV0FBVyxnRkFBb0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0VBQW9CO0FBQ25FLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0VBQVk7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCw4REFBWTtBQUNqRSx5REFBeUQsZ0VBQWM7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGdCQUFnQjtBQUNoQixHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsbUJBQW1CLCtFQUFxQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxvQkFBb0Isc0VBQWtCO0FBQ3RDO0FBQ0EsYUFBYSxxRUFBZTtBQUM1QixHQUFHO0FBQ0g7QUFDQTtBQUNBLDJHQUEyRyw4REFBTTtBQUNqSDtBQUNBLG1CQUFtQjtBQUNuQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxLQUFLLGdFQUFTLG1CQUFtQixTQUFTO0FBQzFDLFFBQVEsU0FBUztBQUNqQiwySUFBMkksbUVBQVM7QUFDcEo7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjb250ZXh0XFxjcmVhdGUtY29udGV4dC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlVVJMIH0gZnJvbSBcIi4uL3V0aWxzL3VybC5tanNcIjtcbmltcG9ydCB7IG1hdGNoZXNPcmlnaW5QYXR0ZXJuIH0gZnJvbSBcIi4uL2F1dGgvdHJ1c3RlZC1vcmlnaW5zLm1qc1wiO1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuLi9jcnlwdG8vcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBpc1Byb21pc2UgfSBmcm9tIFwiLi4vdXRpbHMvaXMtcHJvbWlzZS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUNvb2tpZUdldHRlciwgZ2V0Q29va2llcyB9IGZyb20gXCIuLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkJDEgfSBmcm9tIFwiLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjaGVja1Bhc3N3b3JkIH0gZnJvbSBcIi4uL3V0aWxzL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tFbmRwb2ludENvbmZsaWN0cyB9IGZyb20gXCIuLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1NFQ1JFVCB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBnZXRJbnRlcm5hbFBsdWdpbnMsIGdldFRydXN0ZWRPcmlnaW5zLCBydW5QbHVnaW5Jbml0IH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmltcG9ydCB7IGdldEJldHRlckF1dGhWZXJzaW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcbmltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciwgZW52LCBpc1Byb2R1Y3Rpb24sIGlzVGVzdCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgZGVwcmVjYXRlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBzb2NpYWxQcm92aWRlcnMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvc29jaWFsLXByb3ZpZGVyc1wiO1xuaW1wb3J0IHsgY3JlYXRlVGVsZW1ldHJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC90ZWxlbWV0cnlcIjtcbmltcG9ydCBkZWZ1IGZyb20gXCJkZWZ1XCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29udGV4dC9jcmVhdGUtY29udGV4dC50c1xuLyoqXG4qIEVzdGltYXRlcyB0aGUgZW50cm9weSBvZiBhIHN0cmluZyBpbiBiaXRzLlxuKiBUaGlzIGlzIGEgc2ltcGxlIGFwcHJveGltYXRpb24gdGhhdCBoZWxwcyBkZXRlY3QgbG93LWVudHJvcHkgc2VjcmV0cy5cbiovXG5mdW5jdGlvbiBlc3RpbWF0ZUVudHJvcHkoc3RyKSB7XG5cdGNvbnN0IHVuaXF1ZSA9IG5ldyBTZXQoc3RyKS5zaXplO1xuXHRpZiAodW5pcXVlID09PSAwKSByZXR1cm4gMDtcblx0cmV0dXJuIE1hdGgubG9nMihNYXRoLnBvdyh1bmlxdWUsIHN0ci5sZW5ndGgpKTtcbn1cbi8qKlxuKiBWYWxpZGF0ZXMgdGhhdCB0aGUgc2VjcmV0IG1lZXRzIG1pbmltdW0gc2VjdXJpdHkgcmVxdWlyZW1lbnRzLlxuKiBUaHJvd3MgQmV0dGVyQXV0aEVycm9yIGlmIHRoZSBzZWNyZXQgaXMgaW52YWxpZC5cbiogU2tpcHMgdmFsaWRhdGlvbiBmb3IgREVGQVVMVF9TRUNSRVQgaW4gdGVzdCBlbnZpcm9ubWVudHMgb25seS5cbiogT25seSB0aHJvd3MgZm9yIERFRkFVTFRfU0VDUkVUIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQuXG4qL1xuZnVuY3Rpb24gdmFsaWRhdGVTZWNyZXQoc2VjcmV0LCBsb2dnZXIkMSkge1xuXHRjb25zdCBpc0RlZmF1bHRTZWNyZXQgPSBzZWNyZXQgPT09IERFRkFVTFRfU0VDUkVUO1xuXHRpZiAoaXNUZXN0KCkpIHJldHVybjtcblx0aWYgKGlzRGVmYXVsdFNlY3JldCAmJiBpc1Byb2R1Y3Rpb24pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJZb3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IHNlY3JldC4gUGxlYXNlIHNldCBgQkVUVEVSX0FVVEhfU0VDUkVUYCBpbiB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciBwYXNzIGBzZWNyZXRgIGluIHlvdXIgYXV0aCBjb25maWcuXCIpO1xuXHRpZiAoIXNlY3JldCkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkJFVFRFUl9BVVRIX1NFQ1JFVCBpcyBtaXNzaW5nLiBTZXQgaXQgaW4geW91ciBlbnZpcm9ubWVudCBvciBwYXNzIGBzZWNyZXRgIHRvIGJldHRlckF1dGgoeyBzZWNyZXQgfSkuXCIpO1xuXHRpZiAoc2VjcmV0Lmxlbmd0aCA8IDMyKSBsb2dnZXIkMS53YXJuKGBbYmV0dGVyLWF1dGhdIFdhcm5pbmc6IHlvdXIgQkVUVEVSX0FVVEhfU0VDUkVUIHNob3VsZCBiZSBhdCBsZWFzdCAzMiBjaGFyYWN0ZXJzIGxvbmcgZm9yIGFkZXF1YXRlIHNlY3VyaXR5LiBHZW5lcmF0ZSBvbmUgd2l0aCBcXGBucHggQGJldHRlci1hdXRoL2NsaSBzZWNyZXRcXGAgb3IgXFxgb3BlbnNzbCByYW5kIC1iYXNlNjQgMzJcXGAuYCk7XG5cdGlmIChlc3RpbWF0ZUVudHJvcHkoc2VjcmV0KSA8IDEyMCkgbG9nZ2VyJDEud2FybihcIltiZXR0ZXItYXV0aF0gV2FybmluZzogeW91ciBCRVRURVJfQVVUSF9TRUNSRVQgYXBwZWFycyBsb3ctZW50cm9weS4gVXNlIGEgcmFuZG9tbHkgZ2VuZXJhdGVkIHNlY3JldCBmb3IgcHJvZHVjdGlvbi5cIik7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoQ29udGV4dChhZGFwdGVyLCBvcHRpb25zLCBnZXREYXRhYmFzZVR5cGUpIHtcblx0aWYgKCFvcHRpb25zLmRhdGFiYXNlKSBvcHRpb25zID0gZGVmdShvcHRpb25zLCB7XG5cdFx0c2Vzc2lvbjogeyBjb29raWVDYWNoZToge1xuXHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdHN0cmF0ZWd5OiBcImp3ZVwiLFxuXHRcdFx0cmVmcmVzaENhY2hlOiB0cnVlXG5cdFx0fSB9LFxuXHRcdGFjY291bnQ6IHtcblx0XHRcdHN0b3JlU3RhdGVTdHJhdGVneTogXCJjb29raWVcIixcblx0XHRcdHN0b3JlQWNjb3VudENvb2tpZTogdHJ1ZVxuXHRcdH1cblx0fSk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG5cdGNvbnN0IGludGVybmFsUGx1Z2lucyA9IGdldEludGVybmFsUGx1Z2lucyhvcHRpb25zKTtcblx0Y29uc3QgbG9nZ2VyJDEgPSBjcmVhdGVMb2dnZXIob3B0aW9ucy5sb2dnZXIpO1xuXHRjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgpO1xuXHRpZiAoIWJhc2VVUkwpIGxvZ2dlciQxLndhcm4oYFtiZXR0ZXItYXV0aF0gQmFzZSBVUkwgY291bGQgbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBzZXQgYSB2YWxpZCBiYXNlIFVSTCB1c2luZyB0aGUgYmFzZVVSTCBjb25maWcgb3B0aW9uIG9yIHRoZSBCRVRURVJfQVVUSF9CQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZS4gV2l0aG91dCB0aGlzLCBjYWxsYmFja3MgYW5kIHJlZGlyZWN0cyBtYXkgbm90IHdvcmsgY29ycmVjdGx5LmApO1xuXHRpZiAoYWRhcHRlci5pZCA9PT0gXCJtZW1vcnlcIiAmJiBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gZmFsc2UpIGxvZ2dlciQxLmVycm9yKGBbYmV0dGVyLWF1dGhdIE1pc2NvbmZpZ3VyYXRpb24gZGV0ZWN0ZWQuXG5Zb3UgYXJlIHVzaW5nIHRoZSBtZW1vcnkgREIgd2l0aCBnZW5lcmF0ZUlkOiBmYWxzZS5cblRoaXMgd2lsbCBjYXVzZSBubyBpZCB0byBiZSBnZW5lcmF0ZWQgZm9yIGFueSBtb2RlbC5cbk1vc3Qgb2YgdGhlIGZlYXR1cmVzIG9mIEJldHRlciBBdXRoIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5LmApO1xuXHRjb25zdCBzZWNyZXQgPSBvcHRpb25zLnNlY3JldCB8fCBlbnYuQkVUVEVSX0FVVEhfU0VDUkVUIHx8IGVudi5BVVRIX1NFQ1JFVCB8fCBERUZBVUxUX1NFQ1JFVDtcblx0dmFsaWRhdGVTZWNyZXQoc2VjcmV0LCBsb2dnZXIkMSk7XG5cdG9wdGlvbnMgPSB7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRzZWNyZXQsXG5cdFx0YmFzZVVSTDogYmFzZVVSTCA/IG5ldyBVUkwoYmFzZVVSTCkub3JpZ2luIDogXCJcIixcblx0XHRiYXNlUGF0aDogb3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwiLFxuXHRcdHBsdWdpbnM6IHBsdWdpbnMuY29uY2F0KGludGVybmFsUGx1Z2lucylcblx0fTtcblx0Y2hlY2tFbmRwb2ludENvbmZsaWN0cyhvcHRpb25zLCBsb2dnZXIkMSk7XG5cdGNvbnN0IGNvb2tpZXMgPSBnZXRDb29raWVzKG9wdGlvbnMpO1xuXHRjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRjb25zdCBwcm92aWRlcnMgPSBPYmplY3QuZW50cmllcyhvcHRpb25zLnNvY2lhbFByb3ZpZGVycyB8fCB7fSkubWFwKChba2V5LCBjb25maWddKSA9PiB7XG5cdFx0aWYgKGNvbmZpZyA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0XHRpZiAoY29uZmlnLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm4gbnVsbDtcblx0XHRpZiAoIWNvbmZpZy5jbGllbnRJZCkgbG9nZ2VyJDEud2FybihgU29jaWFsIHByb3ZpZGVyICR7a2V5fSBpcyBtaXNzaW5nIGNsaWVudElkIG9yIGNsaWVudFNlY3JldGApO1xuXHRcdGNvbnN0IHByb3ZpZGVyID0gc29jaWFsUHJvdmlkZXJzW2tleV0oY29uZmlnKTtcblx0XHRwcm92aWRlci5kaXNhYmxlSW1wbGljaXRTaWduVXAgPSBjb25maWcuZGlzYWJsZUltcGxpY2l0U2lnblVwO1xuXHRcdHJldHVybiBwcm92aWRlcjtcblx0fSkuZmlsdGVyKCh4KSA9PiB4ICE9PSBudWxsKTtcblx0Y29uc3QgZ2VuZXJhdGVJZEZ1bmMgPSAoeyBtb2RlbCwgc2l6ZSB9KSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLmFkdmFuY2VkPy5nZW5lcmF0ZUlkID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBvcHRpb25zLmFkdmFuY2VkLmdlbmVyYXRlSWQoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRzaXplXG5cdFx0fSk7XG5cdFx0Y29uc3QgZGJHZW5lcmF0ZUlkID0gb3B0aW9ucz8uYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkO1xuXHRcdGlmICh0eXBlb2YgZGJHZW5lcmF0ZUlkID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBkYkdlbmVyYXRlSWQoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRzaXplXG5cdFx0fSk7XG5cdFx0aWYgKGRiR2VuZXJhdGVJZCA9PT0gXCJ1dWlkXCIpIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXHRcdGlmIChkYkdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCIgfHwgZGJHZW5lcmF0ZUlkID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiBnZW5lcmF0ZUlkJDEoc2l6ZSk7XG5cdH07XG5cdGNvbnN0IHsgcHVibGlzaCB9ID0gYXdhaXQgY3JlYXRlVGVsZW1ldHJ5KG9wdGlvbnMsIHtcblx0XHRhZGFwdGVyOiBhZGFwdGVyLmlkLFxuXHRcdGRhdGFiYXNlOiB0eXBlb2Ygb3B0aW9ucy5kYXRhYmFzZSA9PT0gXCJmdW5jdGlvblwiID8gXCJhZGFwdGVyXCIgOiBnZXREYXRhYmFzZVR5cGUob3B0aW9ucy5kYXRhYmFzZSlcblx0fSk7XG5cdGNvbnN0IHRydXN0ZWRPcmlnaW5zID0gYXdhaXQgZ2V0VHJ1c3RlZE9yaWdpbnMob3B0aW9ucyk7XG5cdGNvbnN0IGluaXRPclByb21pc2UgPSBydW5QbHVnaW5Jbml0KHtcblx0XHRhcHBOYW1lOiBvcHRpb25zLmFwcE5hbWUgfHwgXCJCZXR0ZXIgQXV0aFwiLFxuXHRcdGJhc2VVUkw6IGJhc2VVUkwgfHwgXCJcIixcblx0XHR2ZXJzaW9uOiBnZXRCZXR0ZXJBdXRoVmVyc2lvbigpLFxuXHRcdHNvY2lhbFByb3ZpZGVyczogcHJvdmlkZXJzLFxuXHRcdG9wdGlvbnMsXG5cdFx0b2F1dGhDb25maWc6IHtcblx0XHRcdHN0b3JlU3RhdGVTdHJhdGVneTogb3B0aW9ucy5hY2NvdW50Py5zdG9yZVN0YXRlU3RyYXRlZ3kgfHwgKG9wdGlvbnMuZGF0YWJhc2UgPyBcImRhdGFiYXNlXCIgOiBcImNvb2tpZVwiKSxcblx0XHRcdHNraXBTdGF0ZUNvb2tpZUNoZWNrOiAhIW9wdGlvbnMuYWNjb3VudD8uc2tpcFN0YXRlQ29va2llQ2hlY2tcblx0XHR9LFxuXHRcdHRhYmxlcyxcblx0XHR0cnVzdGVkT3JpZ2lucyxcblx0XHRpc1RydXN0ZWRPcmlnaW4odXJsLCBzZXR0aW5ncykge1xuXHRcdFx0cmV0dXJuIHRoaXMudHJ1c3RlZE9yaWdpbnMuc29tZSgob3JpZ2luKSA9PiBtYXRjaGVzT3JpZ2luUGF0dGVybih1cmwsIG9yaWdpbiwgc2V0dGluZ3MpKTtcblx0XHR9LFxuXHRcdHNlc3Npb25Db25maWc6IHtcblx0XHRcdHVwZGF0ZUFnZTogb3B0aW9ucy5zZXNzaW9uPy51cGRhdGVBZ2UgIT09IHZvaWQgMCA/IG9wdGlvbnMuc2Vzc2lvbi51cGRhdGVBZ2UgOiAxNDQwICogNjAsXG5cdFx0XHRleHBpcmVzSW46IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IDM2MDAgKiAyNCAqIDcsXG5cdFx0XHRmcmVzaEFnZTogb3B0aW9ucy5zZXNzaW9uPy5mcmVzaEFnZSA9PT0gdm9pZCAwID8gMzYwMCAqIDI0IDogb3B0aW9ucy5zZXNzaW9uLmZyZXNoQWdlLFxuXHRcdFx0Y29va2llUmVmcmVzaENhY2hlOiAoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCByZWZyZXNoQ2FjaGUgPSBvcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5yZWZyZXNoQ2FjaGU7XG5cdFx0XHRcdGNvbnN0IG1heEFnZSA9IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZSB8fCAzMDA7XG5cdFx0XHRcdGlmICgoISFvcHRpb25zLmRhdGFiYXNlIHx8ICEhb3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlKSAmJiByZWZyZXNoQ2FjaGUpIHtcblx0XHRcdFx0XHRsb2dnZXIkMS53YXJuKFwiW2JldHRlci1hdXRoXSBgc2Vzc2lvbi5jb29raWVDYWNoZS5yZWZyZXNoQ2FjaGVgIGlzIGVuYWJsZWQgd2hpbGUgYGRhdGFiYXNlYCBvciBgc2Vjb25kYXJ5U3RvcmFnZWAgaXMgY29uZmlndXJlZC4gYHJlZnJlc2hDYWNoZWAgaXMgbWVhbnQgZm9yIHN0YXRlbGVzcyAoREItbGVzcykgc2V0dXBzLiBEaXNhYmxpbmcgYHJlZnJlc2hDYWNoZWAg4oCUIHJlbW92ZSBpdCBmcm9tIHlvdXIgY29uZmlnIHRvIHNpbGVuY2UgdGhpcyB3YXJuaW5nLlwiKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHJlZnJlc2hDYWNoZSA9PT0gZmFsc2UgfHwgcmVmcmVzaENhY2hlID09PSB2b2lkIDApIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWYgKHJlZnJlc2hDYWNoZSA9PT0gdHJ1ZSkgcmV0dXJuIHtcblx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdHVwZGF0ZUFnZTogTWF0aC5mbG9vcihtYXhBZ2UgKiAuMilcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdHVwZGF0ZUFnZTogcmVmcmVzaENhY2hlLnVwZGF0ZUFnZSAhPT0gdm9pZCAwID8gcmVmcmVzaENhY2hlLnVwZGF0ZUFnZSA6IE1hdGguZmxvb3IobWF4QWdlICogLjIpXG5cdFx0XHRcdH07XG5cdFx0XHR9KSgpXG5cdFx0fSxcblx0XHRzZWNyZXQsXG5cdFx0cmF0ZUxpbWl0OiB7XG5cdFx0XHQuLi5vcHRpb25zLnJhdGVMaW1pdCxcblx0XHRcdGVuYWJsZWQ6IG9wdGlvbnMucmF0ZUxpbWl0Py5lbmFibGVkID8/IGlzUHJvZHVjdGlvbixcblx0XHRcdHdpbmRvdzogb3B0aW9ucy5yYXRlTGltaXQ/LndpbmRvdyB8fCAxMCxcblx0XHRcdG1heDogb3B0aW9ucy5yYXRlTGltaXQ/Lm1heCB8fCAxMDAsXG5cdFx0XHRzdG9yYWdlOiBvcHRpb25zLnJhdGVMaW1pdD8uc3RvcmFnZSB8fCAob3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlID8gXCJzZWNvbmRhcnktc3RvcmFnZVwiIDogXCJtZW1vcnlcIilcblx0XHR9LFxuXHRcdGF1dGhDb29raWVzOiBjb29raWVzLFxuXHRcdGxvZ2dlcjogbG9nZ2VyJDEsXG5cdFx0Z2VuZXJhdGVJZDogZ2VuZXJhdGVJZEZ1bmMsXG5cdFx0c2Vzc2lvbjogbnVsbCxcblx0XHRzZWNvbmRhcnlTdG9yYWdlOiBvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UsXG5cdFx0cGFzc3dvcmQ6IHtcblx0XHRcdGhhc2g6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucGFzc3dvcmQ/Lmhhc2ggfHwgaGFzaFBhc3N3b3JkLFxuXHRcdFx0dmVyaWZ5OiBvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnBhc3N3b3JkPy52ZXJpZnkgfHwgdmVyaWZ5UGFzc3dvcmQsXG5cdFx0XHRjb25maWc6IHtcblx0XHRcdFx0bWluUGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWluUGFzc3dvcmRMZW5ndGggfHwgOCxcblx0XHRcdFx0bWF4UGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWF4UGFzc3dvcmRMZW5ndGggfHwgMTI4XG5cdFx0XHR9LFxuXHRcdFx0Y2hlY2tQYXNzd29yZFxuXHRcdH0sXG5cdFx0c2V0TmV3U2Vzc2lvbihzZXNzaW9uKSB7XG5cdFx0XHR0aGlzLm5ld1Nlc3Npb24gPSBzZXNzaW9uO1xuXHRcdH0sXG5cdFx0bmV3U2Vzc2lvbjogbnVsbCxcblx0XHRhZGFwdGVyLFxuXHRcdGludGVybmFsQWRhcHRlcjogY3JlYXRlSW50ZXJuYWxBZGFwdGVyKGFkYXB0ZXIsIHtcblx0XHRcdG9wdGlvbnMsXG5cdFx0XHRsb2dnZXI6IGxvZ2dlciQxLFxuXHRcdFx0aG9va3M6IG9wdGlvbnMuZGF0YWJhc2VIb29rcyA/IFtvcHRpb25zLmRhdGFiYXNlSG9va3NdIDogW10sXG5cdFx0XHRnZW5lcmF0ZUlkOiBnZW5lcmF0ZUlkRnVuY1xuXHRcdH0pLFxuXHRcdGNyZWF0ZUF1dGhDb29raWU6IGNyZWF0ZUNvb2tpZUdldHRlcihvcHRpb25zKSxcblx0XHRhc3luYyBydW5NaWdyYXRpb25zKCkge1xuXHRcdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcInJ1bk1pZ3JhdGlvbnMgd2lsbCBiZSBzZXQgYnkgdGhlIHNwZWNpZmljIGluaXQgaW1wbGVtZW50YXRpb25cIik7XG5cdFx0fSxcblx0XHRwdWJsaXNoVGVsZW1ldHJ5OiBwdWJsaXNoLFxuXHRcdHNraXBDU1JGQ2hlY2s6ICEhb3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZUNTUkZDaGVjayxcblx0XHRza2lwT3JpZ2luQ2hlY2s6IG9wdGlvbnMuYWR2YW5jZWQ/LmRpc2FibGVPcmlnaW5DaGVjayAhPT0gdm9pZCAwID8gb3B0aW9ucy5hZHZhbmNlZC5kaXNhYmxlT3JpZ2luQ2hlY2sgOiBpc1Rlc3QoKSA/IHRydWUgOiBmYWxzZSxcblx0XHRydW5JbkJhY2tncm91bmQ6IG9wdGlvbnMuYWR2YW5jZWQ/LmJhY2tncm91bmRUYXNrcz8uaGFuZGxlciA/PyAoKHApID0+IHtcblx0XHRcdHAuY2F0Y2goKCkgPT4ge30pO1xuXHRcdH0pLFxuXHRcdGFzeW5jIHJ1bkluQmFja2dyb3VuZE9yQXdhaXQocHJvbWlzZSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmJhY2tncm91bmRUYXNrcz8uaGFuZGxlcikge1xuXHRcdFx0XHRcdGlmIChwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkgb3B0aW9ucy5hZHZhbmNlZC5iYWNrZ3JvdW5kVGFza3MuaGFuZGxlcihwcm9taXNlLmNhdGNoKChlKSA9PiB7XG5cdFx0XHRcdFx0XHRsb2dnZXIkMS5lcnJvcihcIkZhaWxlZCB0byBydW4gYmFja2dyb3VuZCB0YXNrOlwiLCBlKTtcblx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdH0gZWxzZSBhd2FpdCBwcm9taXNlO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRsb2dnZXIkMS5lcnJvcihcIkZhaWxlZCB0byBydW4gYmFja2dyb3VuZCB0YXNrOlwiLCBlKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGdldFBsdWdpbjogKGlkKSA9PiBvcHRpb25zLnBsdWdpbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gaWQpID8/IG51bGxcblx0fSk7XG5cdGxldCBjb250ZXh0O1xuXHRpZiAoaXNQcm9taXNlKGluaXRPclByb21pc2UpKSAoe2NvbnRleHR9ID0gYXdhaXQgaW5pdE9yUHJvbWlzZSk7XG5cdGVsc2UgKHtjb250ZXh0fSA9IGluaXRPclByb21pc2UpO1xuXHRpZiAodHlwZW9mIGNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8ub25FbWFpbFZlcmlmaWNhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSBjb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbiA9IGRlcHJlY2F0ZShjb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbiwgXCJVc2UgYGFmdGVyRW1haWxWZXJpZmljYXRpb25gIGluc3RlYWQuIFRoaXMgd2lsbCBiZSByZW1vdmVkIGluIDEuNVwiLCBjb250ZXh0LmxvZ2dlcik7XG5cdHJldHVybiBjb250ZXh0O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUF1dGhDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtY29udGV4dC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getInternalPlugins: () => (/* binding */ getInternalPlugins),\n/* harmony export */   getTrustedOrigins: () => (/* binding */ getTrustedOrigins),\n/* harmony export */   runPluginInit: () => (/* binding */ runPluginInit)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n//#region src/context/helpers.ts\nasync function runPluginInit(ctx) {\n\tlet options = ctx.options;\n\tconst plugins = options.plugins || [];\n\tlet context = ctx;\n\tconst dbHooks = [];\n\tfor (const plugin of plugins) if (plugin.init) {\n\t\tconst initPromise = plugin.init(context);\n\t\tlet result;\n\t\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__.isPromise)(initPromise)) result = await initPromise;\n\t\telse result = initPromise;\n\t\tif (typeof result === \"object\") {\n\t\t\tif (result.options) {\n\t\t\t\tconst { databaseHooks, ...restOpts } = result.options;\n\t\t\t\tif (databaseHooks) dbHooks.push(databaseHooks);\n\t\t\t\toptions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(options, restOpts);\n\t\t\t}\n\t\t\tif (result.context) context = {\n\t\t\t\t...context,\n\t\t\t\t...result.context\n\t\t\t};\n\t\t}\n\t}\n\tdbHooks.push(options.databaseHooks);\n\tcontext.internalAdapter = (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(context.adapter, {\n\t\toptions,\n\t\tlogger: context.logger,\n\t\thooks: dbHooks.filter((u) => u !== void 0),\n\t\tgenerateId: context.generateId\n\t});\n\tcontext.options = options;\n\treturn { context };\n}\nfunction getInternalPlugins(options) {\n\tconst plugins = [];\n\tif (options.advanced?.crossSubDomainCookies?.enabled) {}\n\treturn plugins;\n}\nasync function getTrustedOrigins(options, request) {\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath, request);\n\tconst trustedOrigins = baseURL ? [new URL(baseURL).origin] : [];\n\tif (options.trustedOrigins) {\n\t\tif (Array.isArray(options.trustedOrigins)) trustedOrigins.push(...options.trustedOrigins);\n\t\tif (typeof options.trustedOrigins === \"function\") {\n\t\t\tconst validOrigins = await options.trustedOrigins(request);\n\t\t\ttrustedOrigins.push(...validOrigins);\n\t\t}\n\t}\n\tconst envTrustedOrigins = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.env.BETTER_AUTH_TRUSTED_ORIGINS;\n\tif (envTrustedOrigins) trustedOrigins.push(...envTrustedOrigins.split(\",\"));\n\treturn trustedOrigins.filter((v) => Boolean(v));\n}\n\n//#endregion\n\n//# sourceMappingURL=helpers.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NvbnRleHQvaGVscGVycy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBbUU7QUFDckI7QUFDTTtBQUNSO0FBQ047O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sZ0VBQVM7QUFDZjtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZCQUE2QjtBQUN6QztBQUNBLGNBQWMsMENBQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrRUFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMERBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzREFBRztBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0U7QUFDaEUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29udGV4dFxcaGVscGVycy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlVVJMIH0gZnJvbSBcIi4uL3V0aWxzL3VybC5tanNcIjtcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gXCIuLi91dGlscy9pcy1wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgZGVmdSBhcyBkZWZ1JDEgfSBmcm9tIFwiZGVmdVwiO1xuXG4vLyNyZWdpb24gc3JjL2NvbnRleHQvaGVscGVycy50c1xuYXN5bmMgZnVuY3Rpb24gcnVuUGx1Z2luSW5pdChjdHgpIHtcblx0bGV0IG9wdGlvbnMgPSBjdHgub3B0aW9ucztcblx0Y29uc3QgcGx1Z2lucyA9IG9wdGlvbnMucGx1Z2lucyB8fCBbXTtcblx0bGV0IGNvbnRleHQgPSBjdHg7XG5cdGNvbnN0IGRiSG9va3MgPSBbXTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykgaWYgKHBsdWdpbi5pbml0KSB7XG5cdFx0Y29uc3QgaW5pdFByb21pc2UgPSBwbHVnaW4uaW5pdChjb250ZXh0KTtcblx0XHRsZXQgcmVzdWx0O1xuXHRcdGlmIChpc1Byb21pc2UoaW5pdFByb21pc2UpKSByZXN1bHQgPSBhd2FpdCBpbml0UHJvbWlzZTtcblx0XHRlbHNlIHJlc3VsdCA9IGluaXRQcm9taXNlO1xuXHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRpZiAocmVzdWx0Lm9wdGlvbnMpIHtcblx0XHRcdFx0Y29uc3QgeyBkYXRhYmFzZUhvb2tzLCAuLi5yZXN0T3B0cyB9ID0gcmVzdWx0Lm9wdGlvbnM7XG5cdFx0XHRcdGlmIChkYXRhYmFzZUhvb2tzKSBkYkhvb2tzLnB1c2goZGF0YWJhc2VIb29rcyk7XG5cdFx0XHRcdG9wdGlvbnMgPSBkZWZ1JDEob3B0aW9ucywgcmVzdE9wdHMpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlc3VsdC5jb250ZXh0KSBjb250ZXh0ID0ge1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHQuLi5yZXN1bHQuY29udGV4dFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0ZGJIb29rcy5wdXNoKG9wdGlvbnMuZGF0YWJhc2VIb29rcyk7XG5cdGNvbnRleHQuaW50ZXJuYWxBZGFwdGVyID0gY3JlYXRlSW50ZXJuYWxBZGFwdGVyKGNvbnRleHQuYWRhcHRlciwge1xuXHRcdG9wdGlvbnMsXG5cdFx0bG9nZ2VyOiBjb250ZXh0LmxvZ2dlcixcblx0XHRob29rczogZGJIb29rcy5maWx0ZXIoKHUpID0+IHUgIT09IHZvaWQgMCksXG5cdFx0Z2VuZXJhdGVJZDogY29udGV4dC5nZW5lcmF0ZUlkXG5cdH0pO1xuXHRjb250ZXh0Lm9wdGlvbnMgPSBvcHRpb25zO1xuXHRyZXR1cm4geyBjb250ZXh0IH07XG59XG5mdW5jdGlvbiBnZXRJbnRlcm5hbFBsdWdpbnMob3B0aW9ucykge1xuXHRjb25zdCBwbHVnaW5zID0gW107XG5cdGlmIChvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmVuYWJsZWQpIHt9XG5cdHJldHVybiBwbHVnaW5zO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJ1c3RlZE9yaWdpbnMob3B0aW9ucywgcmVxdWVzdCkge1xuXHRjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgsIHJlcXVlc3QpO1xuXHRjb25zdCB0cnVzdGVkT3JpZ2lucyA9IGJhc2VVUkwgPyBbbmV3IFVSTChiYXNlVVJMKS5vcmlnaW5dIDogW107XG5cdGlmIChvcHRpb25zLnRydXN0ZWRPcmlnaW5zKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy50cnVzdGVkT3JpZ2lucykpIHRydXN0ZWRPcmlnaW5zLnB1c2goLi4ub3B0aW9ucy50cnVzdGVkT3JpZ2lucyk7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLnRydXN0ZWRPcmlnaW5zID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdGNvbnN0IHZhbGlkT3JpZ2lucyA9IGF3YWl0IG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMocmVxdWVzdCk7XG5cdFx0XHR0cnVzdGVkT3JpZ2lucy5wdXNoKC4uLnZhbGlkT3JpZ2lucyk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IGVudlRydXN0ZWRPcmlnaW5zID0gZW52LkJFVFRFUl9BVVRIX1RSVVNURURfT1JJR0lOUztcblx0aWYgKGVudlRydXN0ZWRPcmlnaW5zKSB0cnVzdGVkT3JpZ2lucy5wdXNoKC4uLmVudlRydXN0ZWRPcmlnaW5zLnNwbGl0KFwiLFwiKSk7XG5cdHJldHVybiB0cnVzdGVkT3JpZ2lucy5maWx0ZXIoKHYpID0+IEJvb2xlYW4odikpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEludGVybmFsUGx1Z2lucywgZ2V0VHJ1c3RlZE9yaWdpbnMsIHJ1blBsdWdpbkluaXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/helpers.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/adapter-kysely.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/get-migration.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _create_context_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./create-context.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/create-context.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/context/init.ts\nconst init = async (options) => {\n\tconst adapter = await (0,_db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__.getAdapter)(options);\n\tconst getDatabaseType = (database) => (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType)(database) || \"unknown\";\n\tconst ctx = await (0,_create_context_mjs__WEBPACK_IMPORTED_MODULE_3__.createAuthContext)(adapter, options, getDatabaseType);\n\tctx.runMigrations = async function() {\n\t\tif (!options.database || \"updateMany\" in options.database) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Database is not provided or it's an adapter. Migrations are only supported with a database instance.\");\n\t\tconst { runMigrations } = await (0,_db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__.getMigrations)(options);\n\t\tawait runMigrations();\n\t};\n\treturn ctx;\n};\n\n//#endregion\n\n//# sourceMappingURL=init.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NvbnRleHQvaW5pdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStFO0FBQ3pCO0FBQ0U7QUFDQztBQUNDOztBQUUxRDtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFVO0FBQ2pDLHVDQUF1QywyRkFBcUI7QUFDNUQsbUJBQW1CLHNFQUFpQjtBQUNwQztBQUNBLHVFQUF1RSxvRUFBZTtBQUN0RixVQUFVLGdCQUFnQixRQUFRLG9FQUFhO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dCO0FBQ2hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvbnRleHRcXGluaXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEt5c2VseURhdGFiYXNlVHlwZSB9IGZyb20gXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWRhcHRlciB9IGZyb20gXCIuLi9kYi9hZGFwdGVyLWt5c2VseS5tanNcIjtcbmltcG9ydCB7IGdldE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi4vZGIvZ2V0LW1pZ3JhdGlvbi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhDb250ZXh0IH0gZnJvbSBcIi4vY3JlYXRlLWNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcblxuLy8jcmVnaW9uIHNyYy9jb250ZXh0L2luaXQudHNcbmNvbnN0IGluaXQgPSBhc3luYyAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0QWRhcHRlcihvcHRpb25zKTtcblx0Y29uc3QgZ2V0RGF0YWJhc2VUeXBlID0gKGRhdGFiYXNlKSA9PiBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGF0YWJhc2UpIHx8IFwidW5rbm93blwiO1xuXHRjb25zdCBjdHggPSBhd2FpdCBjcmVhdGVBdXRoQ29udGV4dChhZGFwdGVyLCBvcHRpb25zLCBnZXREYXRhYmFzZVR5cGUpO1xuXHRjdHgucnVuTWlncmF0aW9ucyA9IGFzeW5jIGZ1bmN0aW9uKCkge1xuXHRcdGlmICghb3B0aW9ucy5kYXRhYmFzZSB8fCBcInVwZGF0ZU1hbnlcIiBpbiBvcHRpb25zLmRhdGFiYXNlKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRGF0YWJhc2UgaXMgbm90IHByb3ZpZGVkIG9yIGl0J3MgYW4gYWRhcHRlci4gTWlncmF0aW9ucyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCBhIGRhdGFiYXNlIGluc3RhbmNlLlwiKTtcblx0XHRjb25zdCB7IHJ1bk1pZ3JhdGlvbnMgfSA9IGF3YWl0IGdldE1pZ3JhdGlvbnMob3B0aW9ucyk7XG5cdFx0YXdhaXQgcnVuTWlncmF0aW9ucygpO1xuXHR9O1xuXHRyZXR1cm4gY3R4O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpbml0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/context/init.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* binding */ HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* binding */ SECURE_COOKIE_PREFIX),\n/* harmony export */   parseSetCookieHeader: () => (/* binding */ parseSetCookieHeader),\n/* harmony export */   setCookieToHeader: () => (/* binding */ setCookieToHeader),\n/* harmony export */   splitSetCookieHeader: () => (/* binding */ splitSetCookieHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* binding */ stripSecureCookiePrefix)\n/* harmony export */ });\n//#region src/cookies/cookie-utils.ts\nconst SECURE_COOKIE_PREFIX = \"__Secure-\";\nconst HOST_COOKIE_PREFIX = \"__Host-\";\n/**\n* Remove __Secure- or __Host- prefix from cookie name.\n*/\nfunction stripSecureCookiePrefix(cookieName) {\n\tif (cookieName.startsWith(SECURE_COOKIE_PREFIX)) return cookieName.slice(9);\n\tif (cookieName.startsWith(HOST_COOKIE_PREFIX)) return cookieName.slice(7);\n\treturn cookieName;\n}\n/**\n* Split `Set-Cookie` header, handling commas in `Expires` dates.\n*/\nfunction splitSetCookieHeader(setCookie) {\n\tif (!setCookie) return [];\n\tconst result = [];\n\tlet current = \"\";\n\tlet i = 0;\n\twhile (i < setCookie.length) {\n\t\tconst c = setCookie[i];\n\t\tif (c === \",\") {\n\t\t\tconst lower = current.toLowerCase();\n\t\t\tif (lower.includes(\"expires=\") && !lower.includes(\"gmt\")) {\n\t\t\t\tcurrent += c;\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tconst trimmed$1 = current.trim();\n\t\t\t\tif (trimmed$1) result.push(trimmed$1);\n\t\t\t\tcurrent = \"\";\n\t\t\t\ti++;\n\t\t\t\tif (i < setCookie.length && setCookie[i] === \" \") i++;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tcurrent += c;\n\t\ti++;\n\t}\n\tconst trimmed = current.trim();\n\tif (trimmed) result.push(trimmed);\n\treturn result;\n}\nfunction parseSetCookieHeader(setCookie) {\n\tconst cookies = /* @__PURE__ */ new Map();\n\tsplitSetCookieHeader(setCookie).forEach((cookieString) => {\n\t\tconst [nameValue, ...attributes] = cookieString.split(\";\").map((part) => part.trim());\n\t\tconst [name, ...valueParts] = (nameValue || \"\").split(\"=\");\n\t\tconst value = valueParts.join(\"=\");\n\t\tif (!name || value === void 0) return;\n\t\tconst attrObj = { value };\n\t\tattributes.forEach((attribute) => {\n\t\t\tconst [attrName, ...attrValueParts] = attribute.split(\"=\");\n\t\t\tconst attrValue = attrValueParts.join(\"=\");\n\t\t\tconst normalizedAttrName = attrName.trim().toLowerCase();\n\t\t\tswitch (normalizedAttrName) {\n\t\t\t\tcase \"max-age\":\n\t\t\t\t\tattrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"expires\":\n\t\t\t\t\tattrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"domain\":\n\t\t\t\t\tattrObj.domain = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"path\":\n\t\t\t\t\tattrObj.path = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"secure\":\n\t\t\t\t\tattrObj.secure = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"httponly\":\n\t\t\t\t\tattrObj.httponly = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"samesite\":\n\t\t\t\t\tattrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tattrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tcookies.set(name, attrObj);\n\t});\n\treturn cookies;\n}\nfunction setCookieToHeader(headers) {\n\treturn (context) => {\n\t\tconst setCookieHeader = context.response.headers.get(\"set-cookie\");\n\t\tif (!setCookieHeader) return;\n\t\tconst cookieMap = /* @__PURE__ */ new Map();\n\t\t(headers.get(\"cookie\") || \"\").split(\";\").forEach((cookie) => {\n\t\t\tconst [name, ...rest] = cookie.trim().split(\"=\");\n\t\t\tif (name && rest.length > 0) cookieMap.set(name, rest.join(\"=\"));\n\t\t});\n\t\tparseSetCookieHeader(setCookieHeader).forEach((value, name) => {\n\t\t\tcookieMap.set(name, value.value);\n\t\t});\n\t\tconst updatedCookies = Array.from(cookieMap.entries()).map(([name, value]) => `${name}=${value}`).join(\"; \");\n\t\theaders.set(\"cookie\", updatedCookies);\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=cookie-utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2Nvb2tpZXMvY29va2llLXV0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxtRkFBbUYsS0FBSyxHQUFHLE1BQU0sV0FBVztBQUM1RztBQUNBO0FBQ0E7O0FBRUE7QUFDNEk7QUFDNUkiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29va2llc1xcY29va2llLXV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2Nvb2tpZXMvY29va2llLXV0aWxzLnRzXG5jb25zdCBTRUNVUkVfQ09PS0lFX1BSRUZJWCA9IFwiX19TZWN1cmUtXCI7XG5jb25zdCBIT1NUX0NPT0tJRV9QUkVGSVggPSBcIl9fSG9zdC1cIjtcbi8qKlxuKiBSZW1vdmUgX19TZWN1cmUtIG9yIF9fSG9zdC0gcHJlZml4IGZyb20gY29va2llIG5hbWUuXG4qL1xuZnVuY3Rpb24gc3RyaXBTZWN1cmVDb29raWVQcmVmaXgoY29va2llTmFtZSkge1xuXHRpZiAoY29va2llTmFtZS5zdGFydHNXaXRoKFNFQ1VSRV9DT09LSUVfUFJFRklYKSkgcmV0dXJuIGNvb2tpZU5hbWUuc2xpY2UoOSk7XG5cdGlmIChjb29raWVOYW1lLnN0YXJ0c1dpdGgoSE9TVF9DT09LSUVfUFJFRklYKSkgcmV0dXJuIGNvb2tpZU5hbWUuc2xpY2UoNyk7XG5cdHJldHVybiBjb29raWVOYW1lO1xufVxuLyoqXG4qIFNwbGl0IGBTZXQtQ29va2llYCBoZWFkZXIsIGhhbmRsaW5nIGNvbW1hcyBpbiBgRXhwaXJlc2AgZGF0ZXMuXG4qL1xuZnVuY3Rpb24gc3BsaXRTZXRDb29raWVIZWFkZXIoc2V0Q29va2llKSB7XG5cdGlmICghc2V0Q29va2llKSByZXR1cm4gW107XG5cdGNvbnN0IHJlc3VsdCA9IFtdO1xuXHRsZXQgY3VycmVudCA9IFwiXCI7XG5cdGxldCBpID0gMDtcblx0d2hpbGUgKGkgPCBzZXRDb29raWUubGVuZ3RoKSB7XG5cdFx0Y29uc3QgYyA9IHNldENvb2tpZVtpXTtcblx0XHRpZiAoYyA9PT0gXCIsXCIpIHtcblx0XHRcdGNvbnN0IGxvd2VyID0gY3VycmVudC50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0aWYgKGxvd2VyLmluY2x1ZGVzKFwiZXhwaXJlcz1cIikgJiYgIWxvd2VyLmluY2x1ZGVzKFwiZ210XCIpKSB7XG5cdFx0XHRcdGN1cnJlbnQgKz0gYztcblx0XHRcdFx0aSsrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgdHJpbW1lZCQxID0gY3VycmVudC50cmltKCk7XG5cdFx0XHRcdGlmICh0cmltbWVkJDEpIHJlc3VsdC5wdXNoKHRyaW1tZWQkMSk7XG5cdFx0XHRcdGN1cnJlbnQgPSBcIlwiO1xuXHRcdFx0XHRpKys7XG5cdFx0XHRcdGlmIChpIDwgc2V0Q29va2llLmxlbmd0aCAmJiBzZXRDb29raWVbaV0gPT09IFwiIFwiKSBpKys7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Y3VycmVudCArPSBjO1xuXHRcdGkrKztcblx0fVxuXHRjb25zdCB0cmltbWVkID0gY3VycmVudC50cmltKCk7XG5cdGlmICh0cmltbWVkKSByZXN1bHQucHVzaCh0cmltbWVkKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHBhcnNlU2V0Q29va2llSGVhZGVyKHNldENvb2tpZSkge1xuXHRjb25zdCBjb29raWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0c3BsaXRTZXRDb29raWVIZWFkZXIoc2V0Q29va2llKS5mb3JFYWNoKChjb29raWVTdHJpbmcpID0+IHtcblx0XHRjb25zdCBbbmFtZVZhbHVlLCAuLi5hdHRyaWJ1dGVzXSA9IGNvb2tpZVN0cmluZy5zcGxpdChcIjtcIikubWFwKChwYXJ0KSA9PiBwYXJ0LnRyaW0oKSk7XG5cdFx0Y29uc3QgW25hbWUsIC4uLnZhbHVlUGFydHNdID0gKG5hbWVWYWx1ZSB8fCBcIlwiKS5zcGxpdChcIj1cIik7XG5cdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZVBhcnRzLmpvaW4oXCI9XCIpO1xuXHRcdGlmICghbmFtZSB8fCB2YWx1ZSA9PT0gdm9pZCAwKSByZXR1cm47XG5cdFx0Y29uc3QgYXR0ck9iaiA9IHsgdmFsdWUgfTtcblx0XHRhdHRyaWJ1dGVzLmZvckVhY2goKGF0dHJpYnV0ZSkgPT4ge1xuXHRcdFx0Y29uc3QgW2F0dHJOYW1lLCAuLi5hdHRyVmFsdWVQYXJ0c10gPSBhdHRyaWJ1dGUuc3BsaXQoXCI9XCIpO1xuXHRcdFx0Y29uc3QgYXR0clZhbHVlID0gYXR0clZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdFx0XHRjb25zdCBub3JtYWxpemVkQXR0ck5hbWUgPSBhdHRyTmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHN3aXRjaCAobm9ybWFsaXplZEF0dHJOYW1lKSB7XG5cdFx0XHRcdGNhc2UgXCJtYXgtYWdlXCI6XG5cdFx0XHRcdFx0YXR0ck9ialtcIm1heC1hZ2VcIl0gPSBhdHRyVmFsdWUgPyBwYXJzZUludChhdHRyVmFsdWUudHJpbSgpLCAxMCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJleHBpcmVzXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5leHBpcmVzID0gYXR0clZhbHVlID8gbmV3IERhdGUoYXR0clZhbHVlLnRyaW0oKSkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkb21haW5cIjpcblx0XHRcdFx0XHRhdHRyT2JqLmRvbWFpbiA9IGF0dHJWYWx1ZSA/IGF0dHJWYWx1ZS50cmltKCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJwYXRoXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5wYXRoID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKSA6IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInNlY3VyZVwiOlxuXHRcdFx0XHRcdGF0dHJPYmouc2VjdXJlID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImh0dHBvbmx5XCI6XG5cdFx0XHRcdFx0YXR0ck9iai5odHRwb25seSA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzYW1lc2l0ZVwiOlxuXHRcdFx0XHRcdGF0dHJPYmouc2FtZXNpdGUgPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YXR0ck9ialtub3JtYWxpemVkQXR0ck5hbWVdID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKSA6IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y29va2llcy5zZXQobmFtZSwgYXR0ck9iaik7XG5cdH0pO1xuXHRyZXR1cm4gY29va2llcztcbn1cbmZ1bmN0aW9uIHNldENvb2tpZVRvSGVhZGVyKGhlYWRlcnMpIHtcblx0cmV0dXJuIChjb250ZXh0KSA9PiB7XG5cdFx0Y29uc3Qgc2V0Q29va2llSGVhZGVyID0gY29udGV4dC5yZXNwb25zZS5oZWFkZXJzLmdldChcInNldC1jb29raWVcIik7XG5cdFx0aWYgKCFzZXRDb29raWVIZWFkZXIpIHJldHVybjtcblx0XHRjb25zdCBjb29raWVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdChoZWFkZXJzLmdldChcImNvb2tpZVwiKSB8fCBcIlwiKS5zcGxpdChcIjtcIikuZm9yRWFjaCgoY29va2llKSA9PiB7XG5cdFx0XHRjb25zdCBbbmFtZSwgLi4ucmVzdF0gPSBjb29raWUudHJpbSgpLnNwbGl0KFwiPVwiKTtcblx0XHRcdGlmIChuYW1lICYmIHJlc3QubGVuZ3RoID4gMCkgY29va2llTWFwLnNldChuYW1lLCByZXN0LmpvaW4oXCI9XCIpKTtcblx0XHR9KTtcblx0XHRwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWVIZWFkZXIpLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XG5cdFx0XHRjb29raWVNYXAuc2V0KG5hbWUsIHZhbHVlLnZhbHVlKTtcblx0XHR9KTtcblx0XHRjb25zdCB1cGRhdGVkQ29va2llcyA9IEFycmF5LmZyb20oY29va2llTWFwLmVudHJpZXMoKSkubWFwKChbbmFtZSwgdmFsdWVdKSA9PiBgJHtuYW1lfT0ke3ZhbHVlfWApLmpvaW4oXCI7IFwiKTtcblx0XHRoZWFkZXJzLnNldChcImNvb2tpZVwiLCB1cGRhdGVkQ29va2llcyk7XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZVRvSGVhZGVyLCBzcGxpdFNldENvb2tpZUhlYWRlciwgc3RyaXBTZWN1cmVDb29raWVQcmVmaXggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvb2tpZS11dGlscy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX),\n/* harmony export */   createCookieGetter: () => (/* binding */ createCookieGetter),\n/* harmony export */   createSessionStore: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore),\n/* harmony export */   deleteSessionCookie: () => (/* binding */ deleteSessionCookie),\n/* harmony export */   expireCookie: () => (/* binding */ expireCookie),\n/* harmony export */   getChunkedCookie: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getChunkedCookie),\n/* harmony export */   getCookieCache: () => (/* binding */ getCookieCache),\n/* harmony export */   getCookies: () => (/* binding */ getCookies),\n/* harmony export */   getSessionCookie: () => (/* binding */ getSessionCookie),\n/* harmony export */   parseCookies: () => (/* binding */ parseCookies),\n/* harmony export */   parseSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.parseSetCookieHeader),\n/* harmony export */   setCookieCache: () => (/* binding */ setCookieCache),\n/* harmony export */   setCookieToHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieToHeader),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   splitSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.splitSetCookieHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.stripSecureCookiePrefix)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-store.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/time.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cookie-utils.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/cookies/index.ts\nfunction createCookieGetter(options) {\n\tconst secureCookiePrefix = (options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL ? options.baseURL.startsWith(\"https://\") ? true : false : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.isProduction) ? _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX : \"\";\n\tconst crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n\tconst domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n\tif (crossSubdomainEnabled && !domain) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"baseURL is required when crossSubdomainCookies are enabled\");\n\tfunction createCookie(cookieName, overrideAttributes = {}) {\n\t\tconst prefix = options.advanced?.cookiePrefix || \"better-auth\";\n\t\tconst name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n\t\tconst attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n\t\treturn {\n\t\t\tname: `${secureCookiePrefix}${name}`,\n\t\t\tattributes: {\n\t\t\t\tsecure: !!secureCookiePrefix,\n\t\t\t\tsameSite: \"lax\",\n\t\t\t\tpath: \"/\",\n\t\t\t\thttpOnly: true,\n\t\t\t\t...crossSubdomainEnabled ? { domain } : {},\n\t\t\t\t...options.advanced?.defaultCookieAttributes,\n\t\t\t\t...overrideAttributes,\n\t\t\t\t...attributes\n\t\t\t}\n\t\t};\n\t}\n\treturn createCookie;\n}\nfunction getCookies(options) {\n\tconst createCookie = createCookieGetter(options);\n\tconst sessionToken = createCookie(\"session_token\", { maxAge: options.session?.expiresIn || (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_5__.sec)(\"7d\") });\n\tconst sessionData = createCookie(\"session_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst accountData = createCookie(\"account_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst dontRememberToken = createCookie(\"dont_remember\");\n\treturn {\n\t\tsessionToken: {\n\t\t\tname: sessionToken.name,\n\t\t\tattributes: sessionToken.attributes\n\t\t},\n\t\tsessionData: {\n\t\t\tname: sessionData.name,\n\t\t\tattributes: sessionData.attributes\n\t\t},\n\t\tdontRememberToken: {\n\t\t\tname: dontRememberToken.name,\n\t\t\tattributes: dontRememberToken.attributes\n\t\t},\n\t\taccountData: {\n\t\t\tname: accountData.name,\n\t\t\tattributes: accountData.attributes\n\t\t}\n\t};\n}\nasync function setCookieCache(ctx, session, dontRememberMe) {\n\tif (!ctx.context.options.session?.cookieCache?.enabled) return;\n\tconst filteredSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.filterOutputFields)(session.session, ctx.context.options.session?.additionalFields);\n\tconst filteredUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\tlet version = \"1\";\n\tif (versionConfig) {\n\t\tif (typeof versionConfig === \"string\") version = versionConfig;\n\t\telse if (typeof versionConfig === \"function\") {\n\t\t\tconst result = versionConfig(session.session, session.user);\n\t\t\tversion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t}\n\t}\n\tconst sessionData = {\n\t\tsession: filteredSession,\n\t\tuser: filteredUser,\n\t\tupdatedAt: Date.now(),\n\t\tversion\n\t};\n\tconst options = {\n\t\t...ctx.context.authCookies.sessionData.attributes,\n\t\tmaxAge: dontRememberMe ? void 0 : ctx.context.authCookies.sessionData.attributes.maxAge\n\t};\n\tconst expiresAtDate = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(options.maxAge || 60, \"sec\").getTime();\n\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\tlet data;\n\tif (strategy === \"jwe\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncodeJWT)(sessionData, ctx.context.secret, \"better-auth-session\", options.maxAge || 300);\n\telse if (strategy === \"jwt\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.signJWT)(sessionData, ctx.context.secret, options.maxAge || 300);\n\telse data = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__.base64Url.encode(JSON.stringify({\n\t\tsession: sessionData,\n\t\texpiresAt: expiresAtDate,\n\t\tsignature: await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx.context.secret, JSON.stringify({\n\t\t\t...sessionData,\n\t\t\texpiresAt: expiresAtDate\n\t\t}))\n\t}), { padding: false });\n\tif (data.length > 4093) {\n\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\tconst cookies = sessionStore.chunk(data, options);\n\t\tsessionStore.setCookies(cookies);\n\t} else {\n\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\tif (sessionStore.hasChunks()) {\n\t\t\tconst cleanCookies = sessionStore.clean();\n\t\t\tsessionStore.setCookies(cleanCookies);\n\t\t}\n\t\tctx.setCookie(ctx.context.authCookies.sessionData.name, data, options);\n\t}\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\tconst accountData = await (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccountCookie)(ctx);\n\t\tif (accountData) await (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccountCookie)(ctx, accountData);\n\t}\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n\tconst dontRememberMeCookie = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\tdontRememberMe = dontRememberMe !== void 0 ? dontRememberMe : !!dontRememberMeCookie;\n\tconst options = ctx.context.authCookies.sessionToken.attributes;\n\tconst maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n\tawait ctx.setSignedCookie(ctx.context.authCookies.sessionToken.name, session.session.token, ctx.context.secret, {\n\t\t...options,\n\t\tmaxAge,\n\t\t...overrides\n\t});\n\tif (dontRememberMe) await ctx.setSignedCookie(ctx.context.authCookies.dontRememberToken.name, \"true\", ctx.context.secret, ctx.context.authCookies.dontRememberToken.attributes);\n\tawait setCookieCache(ctx, session, dontRememberMe);\n\tctx.context.setNewSession(session);\n}\n/**\n* Expires a cookie by setting `maxAge: 0` while preserving its attributes\n*/\nfunction expireCookie(ctx, cookie) {\n\tctx.setCookie(cookie.name, \"\", {\n\t\t...cookie.attributes,\n\t\tmaxAge: 0\n\t});\n}\nfunction deleteSessionCookie(ctx, skipDontRememberMe) {\n\texpireCookie(ctx, ctx.context.authCookies.sessionToken);\n\texpireCookie(ctx, ctx.context.authCookies.sessionData);\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\texpireCookie(ctx, ctx.context.authCookies.accountData);\n\t\tconst accountStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createAccountStore)(ctx.context.authCookies.accountData.name, ctx.context.authCookies.accountData.attributes, ctx);\n\t\tconst cleanCookies$1 = accountStore.clean();\n\t\taccountStore.setCookies(cleanCookies$1);\n\t}\n\tif (ctx.context.oauthConfig.storeStateStrategy === \"cookie\") expireCookie(ctx, ctx.context.createAuthCookie(\"oauth_state\"));\n\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, ctx.context.authCookies.sessionData.attributes, ctx);\n\tconst cleanCookies = sessionStore.clean();\n\tsessionStore.setCookies(cleanCookies);\n\tif (!skipDontRememberMe) expireCookie(ctx, ctx.context.authCookies.dontRememberToken);\n}\nfunction parseCookies(cookieHeader) {\n\tconst cookies = cookieHeader.split(\"; \");\n\tconst cookieMap = /* @__PURE__ */ new Map();\n\tcookies.forEach((cookie) => {\n\t\tconst [name, value] = cookie.split(/=(.*)/s);\n\t\tcookieMap.set(name, value);\n\t});\n\treturn cookieMap;\n}\nconst getSessionCookie = (request, config) => {\n\tif (config?.cookiePrefix) if (config.cookieName) config.cookiePrefix = `${config.cookiePrefix}-`;\n\telse config.cookiePrefix = `${config.cookiePrefix}.`;\n\tconst cookies = (\"headers\" in request ? request.headers : request).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } = config || {};\n\tconst name = `${cookiePrefix}${cookieName}`;\n\tconst secureCookieName = `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${name}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tconst sessionToken = parsedCookie.get(name) || parsedCookie.get(secureCookieName);\n\tif (sessionToken) return sessionToken;\n\treturn null;\n};\nconst getCookieCache = async (request, config) => {\n\tconst cookies = (request instanceof Headers ? request : request.headers).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } = config || {};\n\tconst name = config?.isSecure !== void 0 ? config.isSecure ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}` : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.isProduction ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tlet sessionData = parsedCookie.get(name);\n\tif (!sessionData) {\n\t\tconst chunks = [];\n\t\tfor (const [cookieName$1, value] of parsedCookie.entries()) if (cookieName$1.startsWith(name + \".\")) {\n\t\t\tconst parts = cookieName$1.split(\".\");\n\t\t\tconst indexStr = parts[parts.length - 1];\n\t\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\t\tif (!isNaN(index)) chunks.push({\n\t\t\t\tindex,\n\t\t\t\tvalue\n\t\t\t});\n\t\t}\n\t\tif (chunks.length > 0) {\n\t\t\tchunks.sort((a, b) => a.index - b.index);\n\t\t\tsessionData = chunks.map((c) => c.value).join(\"\");\n\t\t}\n\t}\n\tif (sessionData) {\n\t\tconst secret = config?.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.env.BETTER_AUTH_SECRET;\n\t\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\");\n\t\tconst strategy = config?.strategy || \"compact\";\n\t\tif (strategy === \"jwe\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecodeJWT)(sessionData, secret, \"better-auth-session\");\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else if (strategy === \"jwt\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyJWT)(sessionData, secret);\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst sessionDataPayload = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__.base64Url.decode(sessionData)));\n\t\t\tif (!sessionDataPayload) return null;\n\t\t\tif (!await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(secret, JSON.stringify({\n\t\t\t\t...sessionDataPayload.session,\n\t\t\t\texpiresAt: sessionDataPayload.expiresAt\n\t\t\t}), sessionDataPayload.signature)) return null;\n\t\t\tif (config?.version && sessionDataPayload.session) {\n\t\t\t\tconst cookieVersion = sessionDataPayload.session.version || \"1\";\n\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\tconst result = config.version(sessionDataPayload.session.session, sessionDataPayload.session.user);\n\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t}\n\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t}\n\t\t\treturn sessionDataPayload.session;\n\t\t}\n\t}\n\treturn null;\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2Nvb2tpZXMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0QztBQUNPO0FBQzRDO0FBQ29DO0FBQy9FO0FBQ1o7QUFDOEg7QUFDNUc7QUFDQTtBQUNrQjtBQUN0QjtBQUNIO0FBQ0U7O0FBRXJEO0FBQ0E7QUFDQSw0TEFBNEwsK0RBQVksSUFBSSxtRUFBb0I7QUFDaE87QUFDQTtBQUNBLGlEQUFpRCxvRUFBZTtBQUNoRSwwREFBMEQ7QUFDMUQ7QUFDQSxtRUFBbUUsT0FBTyxHQUFHLFdBQVc7QUFDeEY7QUFDQTtBQUNBLFlBQVksbUJBQW1CLEVBQUUsS0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFNBQVMsSUFBSTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxzQ0FBc0Msb0RBQUcsUUFBUTtBQUN2RyxvREFBb0QscURBQXFEO0FBQ3pHLG9EQUFvRCxxREFBcUQ7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkVBQWtCO0FBQzNDLHNCQUFzQiwrREFBZTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdFQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3REFBTztBQUM5QjtBQUNBO0FBQ0Esc0NBQXNDLG1FQUFrQjtBQUN4RCwyQ0FBMkMsd0RBQU87QUFDbEQsYUFBYSxpRUFBUztBQUN0QjtBQUNBO0FBQ0EsbUJBQW1CLG9FQUFVO0FBQzdCO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxLQUFLLGdCQUFnQjtBQUN2QjtBQUNBLHVCQUF1QixzRUFBa0I7QUFDekM7QUFDQTtBQUNBLEdBQUc7QUFDSCx1QkFBdUIsc0VBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9FQUFnQjtBQUM1Qyx5QkFBeUIsb0VBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0VBQWtCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNFQUFrQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQkFBb0I7QUFDL0YsK0JBQStCLG9CQUFvQjtBQUNuRDtBQUNBO0FBQ0EsU0FBUyw4REFBOEQ7QUFDdkUsaUJBQWlCLGFBQWEsRUFBRSxXQUFXO0FBQzNDLDZCQUE2QixtRUFBb0IsQ0FBQyxFQUFFLEtBQUs7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNERBQTREO0FBQ3JFLGlFQUFpRSxtRUFBb0IsQ0FBQyxFQUFFLGFBQWEsR0FBRyxXQUFXLE9BQU8sYUFBYSxHQUFHLFdBQVcsSUFBSSwrREFBWSxNQUFNLG1FQUFvQixDQUFDLEVBQUUsYUFBYSxHQUFHLFdBQVcsT0FBTyxhQUFhLEdBQUcsV0FBVztBQUMvUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHNEQUFHO0FBQ3RDLHlCQUF5QixvRUFBZTtBQUN4QztBQUNBO0FBQ0EseUJBQXlCLG1FQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRUFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oseUJBQXlCLDBEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdFQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw4QkFBOEIsc0VBQWEsQ0FBQyw4REFBTSxRQUFRLGlFQUFTO0FBQ25FO0FBQ0EsY0FBYyxvRUFBVTtBQUN4QjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnRUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VVO0FBQ3ZVIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvb2tpZXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgc2lnbkpXVCwgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNFbmNvZGVKV1QsIHZlcmlmeUpXVCB9IGZyb20gXCIuLi9jcnlwdG8vand0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWNjb3VudFN0b3JlLCBjcmVhdGVTZXNzaW9uU3RvcmUsIGdldEFjY291bnRDb29raWUsIGdldENodW5rZWRDb29raWUsIHNldEFjY291bnRDb29raWUgfSBmcm9tIFwiLi9zZXNzaW9uLXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2lzLXByb21pc2UubWpzXCI7XG5pbXBvcnQgeyBzZWMgfSBmcm9tIFwiLi4vdXRpbHMvdGltZS5tanNcIjtcbmltcG9ydCB7IEhPU1RfQ09PS0lFX1BSRUZJWCwgU0VDVVJFX0NPT0tJRV9QUkVGSVgsIHBhcnNlU2V0Q29va2llSGVhZGVyLCBzZXRDb29raWVUb0hlYWRlciwgc3BsaXRTZXRDb29raWVIZWFkZXIsIHN0cmlwU2VjdXJlQ29va2llUHJlZml4IH0gZnJvbSBcIi4vY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZW52LCBpc1Byb2R1Y3Rpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGZpbHRlck91dHB1dEZpZWxkcywgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgYmFzZTY0VXJsIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iYXNlNjRcIjtcbmltcG9ydCB7IGJpbmFyeSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmluYXJ5XCI7XG5pbXBvcnQgeyBjcmVhdGVITUFDIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9obWFjXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29va2llcy9pbmRleC50c1xuZnVuY3Rpb24gY3JlYXRlQ29va2llR2V0dGVyKG9wdGlvbnMpIHtcblx0Y29uc3Qgc2VjdXJlQ29va2llUHJlZml4ID0gKG9wdGlvbnMuYWR2YW5jZWQ/LnVzZVNlY3VyZUNvb2tpZXMgIT09IHZvaWQgMCA/IG9wdGlvbnMuYWR2YW5jZWQ/LnVzZVNlY3VyZUNvb2tpZXMgOiBvcHRpb25zLmJhc2VVUkwgPyBvcHRpb25zLmJhc2VVUkwuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpID8gdHJ1ZSA6IGZhbHNlIDogaXNQcm9kdWN0aW9uKSA/IFNFQ1VSRV9DT09LSUVfUFJFRklYIDogXCJcIjtcblx0Y29uc3QgY3Jvc3NTdWJkb21haW5FbmFibGVkID0gISFvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmVuYWJsZWQ7XG5cdGNvbnN0IGRvbWFpbiA9IGNyb3NzU3ViZG9tYWluRW5hYmxlZCA/IG9wdGlvbnMuYWR2YW5jZWQ/LmNyb3NzU3ViRG9tYWluQ29va2llcz8uZG9tYWluIHx8IChvcHRpb25zLmJhc2VVUkwgPyBuZXcgVVJMKG9wdGlvbnMuYmFzZVVSTCkuaG9zdG5hbWUgOiB2b2lkIDApIDogdm9pZCAwO1xuXHRpZiAoY3Jvc3NTdWJkb21haW5FbmFibGVkICYmICFkb21haW4pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJiYXNlVVJMIGlzIHJlcXVpcmVkIHdoZW4gY3Jvc3NTdWJkb21haW5Db29raWVzIGFyZSBlbmFibGVkXCIpO1xuXHRmdW5jdGlvbiBjcmVhdGVDb29raWUoY29va2llTmFtZSwgb3ZlcnJpZGVBdHRyaWJ1dGVzID0ge30pIHtcblx0XHRjb25zdCBwcmVmaXggPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVQcmVmaXggfHwgXCJiZXR0ZXItYXV0aFwiO1xuXHRcdGNvbnN0IG5hbWUgPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVzPy5bY29va2llTmFtZV0/Lm5hbWUgfHwgYCR7cHJlZml4fS4ke2Nvb2tpZU5hbWV9YDtcblx0XHRjb25zdCBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hZHZhbmNlZD8uY29va2llcz8uW2Nvb2tpZU5hbWVdPy5hdHRyaWJ1dGVzO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBgJHtzZWN1cmVDb29raWVQcmVmaXh9JHtuYW1lfWAsXG5cdFx0XHRhdHRyaWJ1dGVzOiB7XG5cdFx0XHRcdHNlY3VyZTogISFzZWN1cmVDb29raWVQcmVmaXgsXG5cdFx0XHRcdHNhbWVTaXRlOiBcImxheFwiLFxuXHRcdFx0XHRwYXRoOiBcIi9cIixcblx0XHRcdFx0aHR0cE9ubHk6IHRydWUsXG5cdFx0XHRcdC4uLmNyb3NzU3ViZG9tYWluRW5hYmxlZCA/IHsgZG9tYWluIH0gOiB7fSxcblx0XHRcdFx0Li4ub3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXMsXG5cdFx0XHRcdC4uLm92ZXJyaWRlQXR0cmlidXRlcyxcblx0XHRcdFx0Li4uYXR0cmlidXRlc1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIGNyZWF0ZUNvb2tpZTtcbn1cbmZ1bmN0aW9uIGdldENvb2tpZXMob3B0aW9ucykge1xuXHRjb25zdCBjcmVhdGVDb29raWUgPSBjcmVhdGVDb29raWVHZXR0ZXIob3B0aW9ucyk7XG5cdGNvbnN0IHNlc3Npb25Ub2tlbiA9IGNyZWF0ZUNvb2tpZShcInNlc3Npb25fdG9rZW5cIiwgeyBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IHNlYyhcIjdkXCIpIH0pO1xuXHRjb25zdCBzZXNzaW9uRGF0YSA9IGNyZWF0ZUNvb2tpZShcInNlc3Npb25fZGF0YVwiLCB7IG1heEFnZTogb3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMCB9KTtcblx0Y29uc3QgYWNjb3VudERhdGEgPSBjcmVhdGVDb29raWUoXCJhY2NvdW50X2RhdGFcIiwgeyBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZSB8fCAzMDAgfSk7XG5cdGNvbnN0IGRvbnRSZW1lbWJlclRva2VuID0gY3JlYXRlQ29va2llKFwiZG9udF9yZW1lbWJlclwiKTtcblx0cmV0dXJuIHtcblx0XHRzZXNzaW9uVG9rZW46IHtcblx0XHRcdG5hbWU6IHNlc3Npb25Ub2tlbi5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogc2Vzc2lvblRva2VuLmF0dHJpYnV0ZXNcblx0XHR9LFxuXHRcdHNlc3Npb25EYXRhOiB7XG5cdFx0XHRuYW1lOiBzZXNzaW9uRGF0YS5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogc2Vzc2lvbkRhdGEuYXR0cmlidXRlc1xuXHRcdH0sXG5cdFx0ZG9udFJlbWVtYmVyVG9rZW46IHtcblx0XHRcdG5hbWU6IGRvbnRSZW1lbWJlclRva2VuLm5hbWUsXG5cdFx0XHRhdHRyaWJ1dGVzOiBkb250UmVtZW1iZXJUb2tlbi5hdHRyaWJ1dGVzXG5cdFx0fSxcblx0XHRhY2NvdW50RGF0YToge1xuXHRcdFx0bmFtZTogYWNjb3VudERhdGEubmFtZSxcblx0XHRcdGF0dHJpYnV0ZXM6IGFjY291bnREYXRhLmF0dHJpYnV0ZXNcblx0XHR9XG5cdH07XG59XG5hc3luYyBmdW5jdGlvbiBzZXRDb29raWVDYWNoZShjdHgsIHNlc3Npb24sIGRvbnRSZW1lbWJlck1lKSB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uZW5hYmxlZCkgcmV0dXJuO1xuXHRjb25zdCBmaWx0ZXJlZFNlc3Npb24gPSBmaWx0ZXJPdXRwdXRGaWVsZHMoc2Vzc2lvbi5zZXNzaW9uLCBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmFkZGl0aW9uYWxGaWVsZHMpO1xuXHRjb25zdCBmaWx0ZXJlZFVzZXIgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0Y29uc3QgdmVyc2lvbkNvbmZpZyA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnZlcnNpb247XG5cdGxldCB2ZXJzaW9uID0gXCIxXCI7XG5cdGlmICh2ZXJzaW9uQ29uZmlnKSB7XG5cdFx0aWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcInN0cmluZ1wiKSB2ZXJzaW9uID0gdmVyc2lvbkNvbmZpZztcblx0XHRlbHNlIGlmICh0eXBlb2YgdmVyc2lvbkNvbmZpZyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSB2ZXJzaW9uQ29uZmlnKHNlc3Npb24uc2Vzc2lvbiwgc2Vzc2lvbi51c2VyKTtcblx0XHRcdHZlcnNpb24gPSBpc1Byb21pc2UocmVzdWx0KSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHR9XG5cdH1cblx0Y29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG5cdFx0c2Vzc2lvbjogZmlsdGVyZWRTZXNzaW9uLFxuXHRcdHVzZXI6IGZpbHRlcmVkVXNlcixcblx0XHR1cGRhdGVkQXQ6IERhdGUubm93KCksXG5cdFx0dmVyc2lvblxuXHR9O1xuXHRjb25zdCBvcHRpb25zID0ge1xuXHRcdC4uLmN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLmF0dHJpYnV0ZXMsXG5cdFx0bWF4QWdlOiBkb250UmVtZW1iZXJNZSA/IHZvaWQgMCA6IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLmF0dHJpYnV0ZXMubWF4QWdlXG5cdH07XG5cdGNvbnN0IGV4cGlyZXNBdERhdGUgPSBnZXREYXRlKG9wdGlvbnMubWF4QWdlIHx8IDYwLCBcInNlY1wiKS5nZXRUaW1lKCk7XG5cdGNvbnN0IHN0cmF0ZWd5ID0gY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uc3RyYXRlZ3kgfHwgXCJjb21wYWN0XCI7XG5cdGxldCBkYXRhO1xuXHRpZiAoc3RyYXRlZ3kgPT09IFwiandlXCIpIGRhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNvZGVKV1Qoc2Vzc2lvbkRhdGEsIGN0eC5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1zZXNzaW9uXCIsIG9wdGlvbnMubWF4QWdlIHx8IDMwMCk7XG5cdGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSBkYXRhID0gYXdhaXQgc2lnbkpXVChzZXNzaW9uRGF0YSwgY3R4LmNvbnRleHQuc2VjcmV0LCBvcHRpb25zLm1heEFnZSB8fCAzMDApO1xuXHRlbHNlIGRhdGEgPSBiYXNlNjRVcmwuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRzZXNzaW9uOiBzZXNzaW9uRGF0YSxcblx0XHRleHBpcmVzQXQ6IGV4cGlyZXNBdERhdGUsXG5cdFx0c2lnbmF0dXJlOiBhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnNpZ24oY3R4LmNvbnRleHQuc2VjcmV0LCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHQuLi5zZXNzaW9uRGF0YSxcblx0XHRcdGV4cGlyZXNBdDogZXhwaXJlc0F0RGF0ZVxuXHRcdH0pKVxuXHR9KSwgeyBwYWRkaW5nOiBmYWxzZSB9KTtcblx0aWYgKGRhdGEubGVuZ3RoID4gNDA5Mykge1xuXHRcdGNvbnN0IHNlc3Npb25TdG9yZSA9IGNyZWF0ZVNlc3Npb25TdG9yZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lLCBvcHRpb25zLCBjdHgpO1xuXHRcdGNvbnN0IGNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2h1bmsoZGF0YSwgb3B0aW9ucyk7XG5cdFx0c2Vzc2lvblN0b3JlLnNldENvb2tpZXMoY29va2llcyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3Qgc2Vzc2lvblN0b3JlID0gY3JlYXRlU2Vzc2lvblN0b3JlKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIG9wdGlvbnMsIGN0eCk7XG5cdFx0aWYgKHNlc3Npb25TdG9yZS5oYXNDaHVua3MoKSkge1xuXHRcdFx0Y29uc3QgY2xlYW5Db29raWVzID0gc2Vzc2lvblN0b3JlLmNsZWFuKCk7XG5cdFx0XHRzZXNzaW9uU3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRcdH1cblx0XHRjdHguc2V0Q29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIGRhdGEsIG9wdGlvbnMpO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkge1xuXHRcdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRcdGlmIChhY2NvdW50RGF0YSkgYXdhaXQgc2V0QWNjb3VudENvb2tpZShjdHgsIGFjY291bnREYXRhKTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHNlc3Npb24sIGRvbnRSZW1lbWJlck1lLCBvdmVycmlkZXMpIHtcblx0Y29uc3QgZG9udFJlbWVtYmVyTWVDb29raWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdGRvbnRSZW1lbWJlck1lID0gZG9udFJlbWVtYmVyTWUgIT09IHZvaWQgMCA/IGRvbnRSZW1lbWJlck1lIDogISFkb250UmVtZW1iZXJNZUNvb2tpZTtcblx0Y29uc3Qgb3B0aW9ucyA9IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5hdHRyaWJ1dGVzO1xuXHRjb25zdCBtYXhBZ2UgPSBkb250UmVtZW1iZXJNZSA/IHZvaWQgMCA6IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZXhwaXJlc0luO1xuXHRhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBzZXNzaW9uLnNlc3Npb24udG9rZW4sIGN0eC5jb250ZXh0LnNlY3JldCwge1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0bWF4QWdlLFxuXHRcdC4uLm92ZXJyaWRlc1xuXHR9KTtcblx0aWYgKGRvbnRSZW1lbWJlck1lKSBhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIFwidHJ1ZVwiLCBjdHguY29udGV4dC5zZWNyZXQsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLmF0dHJpYnV0ZXMpO1xuXHRhd2FpdCBzZXRDb29raWVDYWNoZShjdHgsIHNlc3Npb24sIGRvbnRSZW1lbWJlck1lKTtcblx0Y3R4LmNvbnRleHQuc2V0TmV3U2Vzc2lvbihzZXNzaW9uKTtcbn1cbi8qKlxuKiBFeHBpcmVzIGEgY29va2llIGJ5IHNldHRpbmcgYG1heEFnZTogMGAgd2hpbGUgcHJlc2VydmluZyBpdHMgYXR0cmlidXRlc1xuKi9cbmZ1bmN0aW9uIGV4cGlyZUNvb2tpZShjdHgsIGNvb2tpZSkge1xuXHRjdHguc2V0Q29va2llKGNvb2tpZS5uYW1lLCBcIlwiLCB7XG5cdFx0Li4uY29va2llLmF0dHJpYnV0ZXMsXG5cdFx0bWF4QWdlOiAwXG5cdH0pO1xufVxuZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgsIHNraXBEb250UmVtZW1iZXJNZSkge1xuXHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4pO1xuXHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkge1xuXHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmFjY291bnREYXRhKTtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuYWNjb3VudERhdGEubmFtZSwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuYWNjb3VudERhdGEuYXR0cmlidXRlcywgY3R4KTtcblx0XHRjb25zdCBjbGVhbkNvb2tpZXMkMSA9IGFjY291bnRTdG9yZS5jbGVhbigpO1xuXHRcdGFjY291bnRTdG9yZS5zZXRDb29raWVzKGNsZWFuQ29va2llcyQxKTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5ID09PSBcImNvb2tpZVwiKSBleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFwib2F1dGhfc3RhdGVcIikpO1xuXHRjb25zdCBzZXNzaW9uU3RvcmUgPSBjcmVhdGVTZXNzaW9uU3RvcmUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEuYXR0cmlidXRlcywgY3R4KTtcblx0Y29uc3QgY2xlYW5Db29raWVzID0gc2Vzc2lvblN0b3JlLmNsZWFuKCk7XG5cdHNlc3Npb25TdG9yZS5zZXRDb29raWVzKGNsZWFuQ29va2llcyk7XG5cdGlmICghc2tpcERvbnRSZW1lbWJlck1lKSBleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbik7XG59XG5mdW5jdGlvbiBwYXJzZUNvb2tpZXMoY29va2llSGVhZGVyKSB7XG5cdGNvbnN0IGNvb2tpZXMgPSBjb29raWVIZWFkZXIuc3BsaXQoXCI7IFwiKTtcblx0Y29uc3QgY29va2llTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0Y29va2llcy5mb3JFYWNoKChjb29raWUpID0+IHtcblx0XHRjb25zdCBbbmFtZSwgdmFsdWVdID0gY29va2llLnNwbGl0KC89KC4qKS9zKTtcblx0XHRjb29raWVNYXAuc2V0KG5hbWUsIHZhbHVlKTtcblx0fSk7XG5cdHJldHVybiBjb29raWVNYXA7XG59XG5jb25zdCBnZXRTZXNzaW9uQ29va2llID0gKHJlcXVlc3QsIGNvbmZpZykgPT4ge1xuXHRpZiAoY29uZmlnPy5jb29raWVQcmVmaXgpIGlmIChjb25maWcuY29va2llTmFtZSkgY29uZmlnLmNvb2tpZVByZWZpeCA9IGAke2NvbmZpZy5jb29raWVQcmVmaXh9LWA7XG5cdGVsc2UgY29uZmlnLmNvb2tpZVByZWZpeCA9IGAke2NvbmZpZy5jb29raWVQcmVmaXh9LmA7XG5cdGNvbnN0IGNvb2tpZXMgPSAoXCJoZWFkZXJzXCIgaW4gcmVxdWVzdCA/IHJlcXVlc3QuaGVhZGVycyA6IHJlcXVlc3QpLmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVzKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgeyBjb29raWVOYW1lID0gXCJzZXNzaW9uX3Rva2VuXCIsIGNvb2tpZVByZWZpeCA9IFwiYmV0dGVyLWF1dGguXCIgfSA9IGNvbmZpZyB8fCB7fTtcblx0Y29uc3QgbmFtZSA9IGAke2Nvb2tpZVByZWZpeH0ke2Nvb2tpZU5hbWV9YDtcblx0Y29uc3Qgc2VjdXJlQ29va2llTmFtZSA9IGAke1NFQ1VSRV9DT09LSUVfUFJFRklYfSR7bmFtZX1gO1xuXHRjb25zdCBwYXJzZWRDb29raWUgPSBwYXJzZUNvb2tpZXMoY29va2llcyk7XG5cdGNvbnN0IHNlc3Npb25Ub2tlbiA9IHBhcnNlZENvb2tpZS5nZXQobmFtZSkgfHwgcGFyc2VkQ29va2llLmdldChzZWN1cmVDb29raWVOYW1lKTtcblx0aWYgKHNlc3Npb25Ub2tlbikgcmV0dXJuIHNlc3Npb25Ub2tlbjtcblx0cmV0dXJuIG51bGw7XG59O1xuY29uc3QgZ2V0Q29va2llQ2FjaGUgPSBhc3luYyAocmVxdWVzdCwgY29uZmlnKSA9PiB7XG5cdGNvbnN0IGNvb2tpZXMgPSAocmVxdWVzdCBpbnN0YW5jZW9mIEhlYWRlcnMgPyByZXF1ZXN0IDogcmVxdWVzdC5oZWFkZXJzKS5nZXQoXCJjb29raWVcIik7XG5cdGlmICghY29va2llcykgcmV0dXJuIG51bGw7XG5cdGNvbnN0IHsgY29va2llTmFtZSA9IFwic2Vzc2lvbl9kYXRhXCIsIGNvb2tpZVByZWZpeCA9IFwiYmV0dGVyLWF1dGhcIiB9ID0gY29uZmlnIHx8IHt9O1xuXHRjb25zdCBuYW1lID0gY29uZmlnPy5pc1NlY3VyZSAhPT0gdm9pZCAwID8gY29uZmlnLmlzU2VjdXJlID8gYCR7U0VDVVJFX0NPT0tJRV9QUkVGSVh9JHtjb29raWVQcmVmaXh9LiR7Y29va2llTmFtZX1gIDogYCR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YCA6IGlzUHJvZHVjdGlvbiA/IGAke1NFQ1VSRV9DT09LSUVfUFJFRklYfSR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YCA6IGAke2Nvb2tpZVByZWZpeH0uJHtjb29raWVOYW1lfWA7XG5cdGNvbnN0IHBhcnNlZENvb2tpZSA9IHBhcnNlQ29va2llcyhjb29raWVzKTtcblx0bGV0IHNlc3Npb25EYXRhID0gcGFyc2VkQ29va2llLmdldChuYW1lKTtcblx0aWYgKCFzZXNzaW9uRGF0YSkge1xuXHRcdGNvbnN0IGNodW5rcyA9IFtdO1xuXHRcdGZvciAoY29uc3QgW2Nvb2tpZU5hbWUkMSwgdmFsdWVdIG9mIHBhcnNlZENvb2tpZS5lbnRyaWVzKCkpIGlmIChjb29raWVOYW1lJDEuc3RhcnRzV2l0aChuYW1lICsgXCIuXCIpKSB7XG5cdFx0XHRjb25zdCBwYXJ0cyA9IGNvb2tpZU5hbWUkMS5zcGxpdChcIi5cIik7XG5cdFx0XHRjb25zdCBpbmRleFN0ciA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRcdFx0Y29uc3QgaW5kZXggPSBwYXJzZUludChpbmRleFN0ciB8fCBcIjBcIiwgMTApO1xuXHRcdFx0aWYgKCFpc05hTihpbmRleCkpIGNodW5rcy5wdXNoKHtcblx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdHZhbHVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKGNodW5rcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjaHVua3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXHRcdFx0c2Vzc2lvbkRhdGEgPSBjaHVua3MubWFwKChjKSA9PiBjLnZhbHVlKS5qb2luKFwiXCIpO1xuXHRcdH1cblx0fVxuXHRpZiAoc2Vzc2lvbkRhdGEpIHtcblx0XHRjb25zdCBzZWNyZXQgPSBjb25maWc/LnNlY3JldCB8fCBlbnYuQkVUVEVSX0FVVEhfU0VDUkVUO1xuXHRcdGlmICghc2VjcmV0KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiZ2V0Q29va2llQ2FjaGUgcmVxdWlyZXMgYSBzZWNyZXQgdG8gYmUgcHJvdmlkZWQuIEVpdGhlciBwYXNzIGl0IGFzIGFuIG9wdGlvbiBvciBzZXQgdGhlIEJFVFRFUl9BVVRIX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZVwiKTtcblx0XHRjb25zdCBzdHJhdGVneSA9IGNvbmZpZz8uc3RyYXRlZ3kgfHwgXCJjb21wYWN0XCI7XG5cdFx0aWYgKHN0cmF0ZWd5ID09PSBcImp3ZVwiKSB7XG5cdFx0XHRjb25zdCBwYXlsb2FkID0gYXdhaXQgc3ltbWV0cmljRGVjb2RlSldUKHNlc3Npb25EYXRhLCBzZWNyZXQsIFwiYmV0dGVyLWF1dGgtc2Vzc2lvblwiKTtcblx0XHRcdGlmIChwYXlsb2FkICYmIHBheWxvYWQuc2Vzc2lvbiAmJiBwYXlsb2FkLnVzZXIpIHtcblx0XHRcdFx0aWYgKGNvbmZpZz8udmVyc2lvbikge1xuXHRcdFx0XHRcdGNvbnN0IGNvb2tpZVZlcnNpb24gPSBwYXlsb2FkLnZlcnNpb24gfHwgXCIxXCI7XG5cdFx0XHRcdFx0bGV0IGV4cGVjdGVkVmVyc2lvbiA9IFwiMVwiO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwic3RyaW5nXCIpIGV4cGVjdGVkVmVyc2lvbiA9IGNvbmZpZy52ZXJzaW9uO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBjb25maWcudmVyc2lvbihwYXlsb2FkLnNlc3Npb24sIHBheWxvYWQudXNlcik7XG5cdFx0XHRcdFx0XHRleHBlY3RlZFZlcnNpb24gPSBpc1Byb21pc2UocmVzdWx0KSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGNvb2tpZVZlcnNpb24gIT09IGV4cGVjdGVkVmVyc2lvbikgcmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHBheWxvYWQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSB7XG5cdFx0XHRjb25zdCBwYXlsb2FkID0gYXdhaXQgdmVyaWZ5SldUKHNlc3Npb25EYXRhLCBzZWNyZXQpO1xuXHRcdFx0aWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zZXNzaW9uICYmIHBheWxvYWQudXNlcikge1xuXHRcdFx0XHRpZiAoY29uZmlnPy52ZXJzaW9uKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29va2llVmVyc2lvbiA9IHBheWxvYWQudmVyc2lvbiB8fCBcIjFcIjtcblx0XHRcdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJzdHJpbmdcIikgZXhwZWN0ZWRWZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGNvbmZpZy52ZXJzaW9uID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbmZpZy52ZXJzaW9uKHBheWxvYWQuc2Vzc2lvbiwgcGF5bG9hZC51c2VyKTtcblx0XHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IGlzUHJvbWlzZShyZXN1bHQpID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoY29va2llVmVyc2lvbiAhPT0gZXhwZWN0ZWRWZXJzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcGF5bG9hZDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBzZXNzaW9uRGF0YVBheWxvYWQgPSBzYWZlSlNPTlBhcnNlKGJpbmFyeS5kZWNvZGUoYmFzZTY0VXJsLmRlY29kZShzZXNzaW9uRGF0YSkpKTtcblx0XHRcdGlmICghc2Vzc2lvbkRhdGFQYXlsb2FkKSByZXR1cm4gbnVsbDtcblx0XHRcdGlmICghYXdhaXQgY3JlYXRlSE1BQyhcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS52ZXJpZnkoc2VjcmV0LCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdC4uLnNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLFxuXHRcdFx0XHRleHBpcmVzQXQ6IHNlc3Npb25EYXRhUGF5bG9hZC5leHBpcmVzQXRcblx0XHRcdH0pLCBzZXNzaW9uRGF0YVBheWxvYWQuc2lnbmF0dXJlKSkgcmV0dXJuIG51bGw7XG5cdFx0XHRpZiAoY29uZmlnPy52ZXJzaW9uICYmIHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uKSB7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZVZlcnNpb24gPSBzZXNzaW9uRGF0YVBheWxvYWQuc2Vzc2lvbi52ZXJzaW9uIHx8IFwiMVwiO1xuXHRcdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRcdGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwic3RyaW5nXCIpIGV4cGVjdGVkVmVyc2lvbiA9IGNvbmZpZy52ZXJzaW9uO1xuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbmZpZy52ZXJzaW9uKHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLnNlc3Npb24sIHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLnVzZXIpO1xuXHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IGlzUHJvbWlzZShyZXN1bHQpID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjb29raWVWZXJzaW9uICE9PSBleHBlY3RlZFZlcnNpb24pIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgY3JlYXRlQ29va2llR2V0dGVyLCBjcmVhdGVTZXNzaW9uU3RvcmUsIGRlbGV0ZVNlc3Npb25Db29raWUsIGV4cGlyZUNvb2tpZSwgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0Q29va2llQ2FjaGUsIGdldENvb2tpZXMsIGdldFNlc3Npb25Db29raWUsIHBhcnNlQ29va2llcywgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZUNhY2hlLCBzZXRDb29raWVUb0hlYWRlciwgc2V0U2Vzc2lvbkNvb2tpZSwgc3BsaXRTZXRDb29raWVIZWFkZXIsIHN0cmlwU2VjdXJlQ29va2llUHJlZml4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccountStore: () => (/* binding */ createAccountStore),\n/* harmony export */   createSessionStore: () => (/* binding */ createSessionStore),\n/* harmony export */   getAccountCookie: () => (/* binding */ getAccountCookie),\n/* harmony export */   getChunkedCookie: () => (/* binding */ getChunkedCookie),\n/* harmony export */   getSessionQuerySchema: () => (/* binding */ getSessionQuerySchema),\n/* harmony export */   setAccountCookie: () => (/* binding */ setAccountCookie)\n/* harmony export */ });\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n//#region src/cookies/session-store.ts\nconst ALLOWED_COOKIE_SIZE = 4096;\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 200;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n* Parse cookies from the request headers\n*/\nfunction parseCookiesFromContext(ctx) {\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return {};\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\treturn cookies;\n}\n/**\n* Extract the chunk index from a cookie name\n*/\nfunction getChunkIndex(cookieName) {\n\tconst parts = cookieName.split(\".\");\n\tconst lastPart = parts[parts.length - 1];\n\tconst index = parseInt(lastPart || \"0\", 10);\n\treturn isNaN(index) ? 0 : index;\n}\n/**\n* Read all existing chunks from cookies\n*/\nfunction readExistingChunks(cookieName, ctx) {\n\tconst chunks = {};\n\tconst cookies = parseCookiesFromContext(ctx);\n\tfor (const [name, value] of Object.entries(cookies)) if (name.startsWith(cookieName)) chunks[name] = value;\n\treturn chunks;\n}\n/**\n* Get the full session data by joining all chunks\n*/\nfunction joinChunks(chunks) {\n\treturn Object.keys(chunks).sort((a, b) => {\n\t\treturn getChunkIndex(a) - getChunkIndex(b);\n\t}).map((key) => chunks[key]).join(\"\");\n}\n/**\n* Split a cookie value into chunks if needed\n*/\nfunction chunkCookie(storeName, cookie, chunks, logger) {\n\tconst chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n\tif (chunkCount === 1) {\n\t\tchunks[cookie.name] = cookie.value;\n\t\treturn [cookie];\n\t}\n\tconst cookies = [];\n\tfor (let i = 0; i < chunkCount; i++) {\n\t\tconst name = `${cookie.name}.${i}`;\n\t\tconst start = i * CHUNK_SIZE;\n\t\tconst value = cookie.value.substring(start, start + CHUNK_SIZE);\n\t\tcookies.push({\n\t\t\t...cookie,\n\t\t\tname,\n\t\t\tvalue\n\t\t});\n\t\tchunks[name] = value;\n\t}\n\tlogger.debug(`CHUNKING_${storeName.toUpperCase()}_COOKIE`, {\n\t\tmessage: `${storeName} cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n\t\temptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n\t\tvalueSize: cookie.value.length,\n\t\tchunkCount,\n\t\tchunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE)\n\t});\n\treturn cookies;\n}\n/**\n* Get all cookies that should be cleaned (removed)\n*/\nfunction getCleanCookies(chunks, cookieOptions) {\n\tconst cleanedChunks = {};\n\tfor (const name in chunks) cleanedChunks[name] = {\n\t\tname,\n\t\tvalue: \"\",\n\t\tattributes: {\n\t\t\t...cookieOptions,\n\t\t\tmaxAge: 0\n\t\t}\n\t};\n\treturn cleanedChunks;\n}\n/**\n* Create a session store for handling cookie chunking.\n* When session data exceeds 4KB, it automatically splits it into multiple cookies.\n*\n* Based on next-auth's SessionStore implementation.\n* @see https://github.com/nextauthjs/next-auth/blob/27b2519b84b8eb9cf053775dea29d577d2aa0098/packages/next-auth/src/core/lib/cookie.ts\n*/\nconst storeFactory = (storeName) => (cookieName, cookieOptions, ctx) => {\n\tconst chunks = readExistingChunks(cookieName, ctx);\n\tconst logger = ctx.context.logger;\n\treturn {\n\t\tgetValue() {\n\t\t\treturn joinChunks(chunks);\n\t\t},\n\t\thasChunks() {\n\t\t\treturn Object.keys(chunks).length > 0;\n\t\t},\n\t\tchunk(value, options) {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\tconst cookies = cleanedChunks;\n\t\t\tconst chunked = chunkCookie(storeName, {\n\t\t\t\tname: cookieName,\n\t\t\t\tvalue,\n\t\t\t\tattributes: {\n\t\t\t\t\t...cookieOptions,\n\t\t\t\t\t...options\n\t\t\t\t}\n\t\t\t}, chunks, logger);\n\t\t\tfor (const chunk of chunked) cookies[chunk.name] = chunk;\n\t\t\treturn Object.values(cookies);\n\t\t},\n\t\tclean() {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\treturn Object.values(cleanedChunks);\n\t\t},\n\t\tsetCookies(cookies) {\n\t\t\tfor (const cookie of cookies) ctx.setCookie(cookie.name, cookie.value, cookie.attributes);\n\t\t}\n\t};\n};\nconst createSessionStore = storeFactory(\"Session\");\nconst createAccountStore = storeFactory(\"Account\");\nfunction getChunkedCookie(ctx, cookieName) {\n\tconst value = ctx.getCookie(cookieName);\n\tif (value) return value;\n\tconst chunks = [];\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return null;\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\tfor (const [name, val] of Object.entries(cookies)) if (name.startsWith(cookieName + \".\")) {\n\t\tconst indexStr = name.split(\".\").at(-1);\n\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\tif (!isNaN(index)) chunks.push({\n\t\t\tindex,\n\t\t\tvalue: val\n\t\t});\n\t}\n\tif (chunks.length > 0) {\n\t\tchunks.sort((a, b) => a.index - b.index);\n\t\treturn chunks.map((c) => c.value).join(\"\");\n\t}\n\treturn null;\n}\nasync function setAccountCookie(c, accountData) {\n\tconst accountDataCookie = c.context.authCookies.accountData;\n\tconst options = {\n\t\tmaxAge: 300,\n\t\t...accountDataCookie.attributes\n\t};\n\tconst data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncodeJWT)(accountData, c.context.secret, \"better-auth-account\", options.maxAge);\n\tif (data.length > ALLOWED_COOKIE_SIZE) {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tconst cookies = accountStore.chunk(data, options);\n\t\taccountStore.setCookies(cookies);\n\t} else {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tif (accountStore.hasChunks()) {\n\t\t\tconst cleanCookies = accountStore.clean();\n\t\t\taccountStore.setCookies(cleanCookies);\n\t\t}\n\t\tc.setCookie(accountDataCookie.name, data, options);\n\t}\n}\nasync function getAccountCookie(c) {\n\tconst accountCookie = getChunkedCookie(c, c.context.authCookies.accountData.name);\n\tif (accountCookie) {\n\t\tconst accountData = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecodeJWT)(accountCookie, c.context.secret, \"better-auth-account\"));\n\t\tif (accountData) return accountData;\n\t}\n\treturn null;\n}\nconst getSessionQuerySchema = zod__WEBPACK_IMPORTED_MODULE_3__.optional(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n\tdisableCookieCache: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable cookie cache and fetch session from database\" }).optional(),\n\tdisableRefresh: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable session refresh. Useful for checking session status, without updating the session\" }).optional()\n}));\n\n//#endregion\n\n//# sourceMappingURL=session-store.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2Nvb2tpZXMvc2Vzc2lvbi1zdG9yZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUEyRTtBQUM5QztBQUMyQjtBQUMvQjs7QUFFekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakMsa0JBQWtCLFlBQVksR0FBRyxFQUFFO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMEJBQTBCLHdCQUF3QjtBQUNsRCxjQUFjLFdBQVcseUJBQXlCLHFCQUFxQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtRUFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzRUFBYSxPQUFPLG1FQUFrQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5Q0FBVSxDQUFDLHVDQUFRO0FBQ2pELHFCQUFxQiwrQ0FBZ0IsVUFBVSxxRUFBcUU7QUFDcEgsaUJBQWlCLCtDQUFnQixVQUFVLDBHQUEwRztBQUNySixDQUFDOztBQUVEO0FBQytIO0FBQy9IIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvb2tpZXNcXHNlc3Npb24tc3RvcmUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRW5jb2RlSldUIH0gZnJvbSBcIi4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgXCIuLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9jb29raWVzL3Nlc3Npb24tc3RvcmUudHNcbmNvbnN0IEFMTE9XRURfQ09PS0lFX1NJWkUgPSA0MDk2O1xuY29uc3QgRVNUSU1BVEVEX0VNUFRZX0NPT0tJRV9TSVpFID0gMjAwO1xuY29uc3QgQ0hVTktfU0laRSA9IEFMTE9XRURfQ09PS0lFX1NJWkUgLSBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkU7XG4vKipcbiogUGFyc2UgY29va2llcyBmcm9tIHRoZSByZXF1ZXN0IGhlYWRlcnNcbiovXG5mdW5jdGlvbiBwYXJzZUNvb2tpZXNGcm9tQ29udGV4dChjdHgpIHtcblx0Y29uc3QgY29va2llSGVhZGVyID0gY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVIZWFkZXIpIHJldHVybiB7fTtcblx0Y29uc3QgY29va2llcyA9IHt9O1xuXHRjb25zdCBwYWlycyA9IGNvb2tpZUhlYWRlci5zcGxpdChcIjsgXCIpO1xuXHRmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcblx0XHRjb25zdCBbbmFtZSwgLi4udmFsdWVQYXJ0c10gPSBwYWlyLnNwbGl0KFwiPVwiKTtcblx0XHRpZiAobmFtZSAmJiB2YWx1ZVBhcnRzLmxlbmd0aCA+IDApIGNvb2tpZXNbbmFtZV0gPSB2YWx1ZVBhcnRzLmpvaW4oXCI9XCIpO1xuXHR9XG5cdHJldHVybiBjb29raWVzO1xufVxuLyoqXG4qIEV4dHJhY3QgdGhlIGNodW5rIGluZGV4IGZyb20gYSBjb29raWUgbmFtZVxuKi9cbmZ1bmN0aW9uIGdldENodW5rSW5kZXgoY29va2llTmFtZSkge1xuXHRjb25zdCBwYXJ0cyA9IGNvb2tpZU5hbWUuc3BsaXQoXCIuXCIpO1xuXHRjb25zdCBsYXN0UGFydCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRjb25zdCBpbmRleCA9IHBhcnNlSW50KGxhc3RQYXJ0IHx8IFwiMFwiLCAxMCk7XG5cdHJldHVybiBpc05hTihpbmRleCkgPyAwIDogaW5kZXg7XG59XG4vKipcbiogUmVhZCBhbGwgZXhpc3RpbmcgY2h1bmtzIGZyb20gY29va2llc1xuKi9cbmZ1bmN0aW9uIHJlYWRFeGlzdGluZ0NodW5rcyhjb29raWVOYW1lLCBjdHgpIHtcblx0Y29uc3QgY2h1bmtzID0ge307XG5cdGNvbnN0IGNvb2tpZXMgPSBwYXJzZUNvb2tpZXNGcm9tQ29udGV4dChjdHgpO1xuXHRmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29va2llcykpIGlmIChuYW1lLnN0YXJ0c1dpdGgoY29va2llTmFtZSkpIGNodW5rc1tuYW1lXSA9IHZhbHVlO1xuXHRyZXR1cm4gY2h1bmtzO1xufVxuLyoqXG4qIEdldCB0aGUgZnVsbCBzZXNzaW9uIGRhdGEgYnkgam9pbmluZyBhbGwgY2h1bmtzXG4qL1xuZnVuY3Rpb24gam9pbkNodW5rcyhjaHVua3MpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKGNodW5rcykuc29ydCgoYSwgYikgPT4ge1xuXHRcdHJldHVybiBnZXRDaHVua0luZGV4KGEpIC0gZ2V0Q2h1bmtJbmRleChiKTtcblx0fSkubWFwKChrZXkpID0+IGNodW5rc1trZXldKS5qb2luKFwiXCIpO1xufVxuLyoqXG4qIFNwbGl0IGEgY29va2llIHZhbHVlIGludG8gY2h1bmtzIGlmIG5lZWRlZFxuKi9cbmZ1bmN0aW9uIGNodW5rQ29va2llKHN0b3JlTmFtZSwgY29va2llLCBjaHVua3MsIGxvZ2dlcikge1xuXHRjb25zdCBjaHVua0NvdW50ID0gTWF0aC5jZWlsKGNvb2tpZS52YWx1ZS5sZW5ndGggLyBDSFVOS19TSVpFKTtcblx0aWYgKGNodW5rQ291bnQgPT09IDEpIHtcblx0XHRjaHVua3NbY29va2llLm5hbWVdID0gY29va2llLnZhbHVlO1xuXHRcdHJldHVybiBbY29va2llXTtcblx0fVxuXHRjb25zdCBjb29raWVzID0gW107XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKSB7XG5cdFx0Y29uc3QgbmFtZSA9IGAke2Nvb2tpZS5uYW1lfS4ke2l9YDtcblx0XHRjb25zdCBzdGFydCA9IGkgKiBDSFVOS19TSVpFO1xuXHRcdGNvbnN0IHZhbHVlID0gY29va2llLnZhbHVlLnN1YnN0cmluZyhzdGFydCwgc3RhcnQgKyBDSFVOS19TSVpFKTtcblx0XHRjb29raWVzLnB1c2goe1xuXHRcdFx0Li4uY29va2llLFxuXHRcdFx0bmFtZSxcblx0XHRcdHZhbHVlXG5cdFx0fSk7XG5cdFx0Y2h1bmtzW25hbWVdID0gdmFsdWU7XG5cdH1cblx0bG9nZ2VyLmRlYnVnKGBDSFVOS0lOR18ke3N0b3JlTmFtZS50b1VwcGVyQ2FzZSgpfV9DT09LSUVgLCB7XG5cdFx0bWVzc2FnZTogYCR7c3RvcmVOYW1lfSBjb29raWUgZXhjZWVkcyBhbGxvd2VkICR7QUxMT1dFRF9DT09LSUVfU0laRX0gYnl0ZXMuYCxcblx0XHRlbXB0eUNvb2tpZVNpemU6IEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSxcblx0XHR2YWx1ZVNpemU6IGNvb2tpZS52YWx1ZS5sZW5ndGgsXG5cdFx0Y2h1bmtDb3VudCxcblx0XHRjaHVua3M6IGNvb2tpZXMubWFwKChjKSA9PiBjLnZhbHVlLmxlbmd0aCArIEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSlcblx0fSk7XG5cdHJldHVybiBjb29raWVzO1xufVxuLyoqXG4qIEdldCBhbGwgY29va2llcyB0aGF0IHNob3VsZCBiZSBjbGVhbmVkIChyZW1vdmVkKVxuKi9cbmZ1bmN0aW9uIGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpIHtcblx0Y29uc3QgY2xlYW5lZENodW5rcyA9IHt9O1xuXHRmb3IgKGNvbnN0IG5hbWUgaW4gY2h1bmtzKSBjbGVhbmVkQ2h1bmtzW25hbWVdID0ge1xuXHRcdG5hbWUsXG5cdFx0dmFsdWU6IFwiXCIsXG5cdFx0YXR0cmlidXRlczoge1xuXHRcdFx0Li4uY29va2llT3B0aW9ucyxcblx0XHRcdG1heEFnZTogMFxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGNsZWFuZWRDaHVua3M7XG59XG4vKipcbiogQ3JlYXRlIGEgc2Vzc2lvbiBzdG9yZSBmb3IgaGFuZGxpbmcgY29va2llIGNodW5raW5nLlxuKiBXaGVuIHNlc3Npb24gZGF0YSBleGNlZWRzIDRLQiwgaXQgYXV0b21hdGljYWxseSBzcGxpdHMgaXQgaW50byBtdWx0aXBsZSBjb29raWVzLlxuKlxuKiBCYXNlZCBvbiBuZXh0LWF1dGgncyBTZXNzaW9uU3RvcmUgaW1wbGVtZW50YXRpb24uXG4qIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25leHRhdXRoanMvbmV4dC1hdXRoL2Jsb2IvMjdiMjUxOWI4NGI4ZWI5Y2YwNTM3NzVkZWEyOWQ1NzdkMmFhMDA5OC9wYWNrYWdlcy9uZXh0LWF1dGgvc3JjL2NvcmUvbGliL2Nvb2tpZS50c1xuKi9cbmNvbnN0IHN0b3JlRmFjdG9yeSA9IChzdG9yZU5hbWUpID0+IChjb29raWVOYW1lLCBjb29raWVPcHRpb25zLCBjdHgpID0+IHtcblx0Y29uc3QgY2h1bmtzID0gcmVhZEV4aXN0aW5nQ2h1bmtzKGNvb2tpZU5hbWUsIGN0eCk7XG5cdGNvbnN0IGxvZ2dlciA9IGN0eC5jb250ZXh0LmxvZ2dlcjtcblx0cmV0dXJuIHtcblx0XHRnZXRWYWx1ZSgpIHtcblx0XHRcdHJldHVybiBqb2luQ2h1bmtzKGNodW5rcyk7XG5cdFx0fSxcblx0XHRoYXNDaHVua3MoKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMoY2h1bmtzKS5sZW5ndGggPiAwO1xuXHRcdH0sXG5cdFx0Y2h1bmsodmFsdWUsIG9wdGlvbnMpIHtcblx0XHRcdGNvbnN0IGNsZWFuZWRDaHVua3MgPSBnZXRDbGVhbkNvb2tpZXMoY2h1bmtzLCBjb29raWVPcHRpb25zKTtcblx0XHRcdGZvciAoY29uc3QgbmFtZSBpbiBjaHVua3MpIGRlbGV0ZSBjaHVua3NbbmFtZV07XG5cdFx0XHRjb25zdCBjb29raWVzID0gY2xlYW5lZENodW5rcztcblx0XHRcdGNvbnN0IGNodW5rZWQgPSBjaHVua0Nvb2tpZShzdG9yZU5hbWUsIHtcblx0XHRcdFx0bmFtZTogY29va2llTmFtZSxcblx0XHRcdFx0dmFsdWUsXG5cdFx0XHRcdGF0dHJpYnV0ZXM6IHtcblx0XHRcdFx0XHQuLi5jb29raWVPcHRpb25zLFxuXHRcdFx0XHRcdC4uLm9wdGlvbnNcblx0XHRcdFx0fVxuXHRcdFx0fSwgY2h1bmtzLCBsb2dnZXIpO1xuXHRcdFx0Zm9yIChjb25zdCBjaHVuayBvZiBjaHVua2VkKSBjb29raWVzW2NodW5rLm5hbWVdID0gY2h1bms7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LnZhbHVlcyhjb29raWVzKTtcblx0XHR9LFxuXHRcdGNsZWFuKCkge1xuXHRcdFx0Y29uc3QgY2xlYW5lZENodW5rcyA9IGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpO1xuXHRcdFx0Zm9yIChjb25zdCBuYW1lIGluIGNodW5rcykgZGVsZXRlIGNodW5rc1tuYW1lXTtcblx0XHRcdHJldHVybiBPYmplY3QudmFsdWVzKGNsZWFuZWRDaHVua3MpO1xuXHRcdH0sXG5cdFx0c2V0Q29va2llcyhjb29raWVzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNvb2tpZSBvZiBjb29raWVzKSBjdHguc2V0Q29va2llKGNvb2tpZS5uYW1lLCBjb29raWUudmFsdWUsIGNvb2tpZS5hdHRyaWJ1dGVzKTtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgY3JlYXRlU2Vzc2lvblN0b3JlID0gc3RvcmVGYWN0b3J5KFwiU2Vzc2lvblwiKTtcbmNvbnN0IGNyZWF0ZUFjY291bnRTdG9yZSA9IHN0b3JlRmFjdG9yeShcIkFjY291bnRcIik7XG5mdW5jdGlvbiBnZXRDaHVua2VkQ29va2llKGN0eCwgY29va2llTmFtZSkge1xuXHRjb25zdCB2YWx1ZSA9IGN0eC5nZXRDb29raWUoY29va2llTmFtZSk7XG5cdGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuXHRjb25zdCBjaHVua3MgPSBbXTtcblx0Y29uc3QgY29va2llSGVhZGVyID0gY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVIZWFkZXIpIHJldHVybiBudWxsO1xuXHRjb25zdCBjb29raWVzID0ge307XG5cdGNvbnN0IHBhaXJzID0gY29va2llSGVhZGVyLnNwbGl0KFwiOyBcIik7XG5cdGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuXHRcdGNvbnN0IFtuYW1lLCAuLi52YWx1ZVBhcnRzXSA9IHBhaXIuc3BsaXQoXCI9XCIpO1xuXHRcdGlmIChuYW1lICYmIHZhbHVlUGFydHMubGVuZ3RoID4gMCkgY29va2llc1tuYW1lXSA9IHZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdH1cblx0Zm9yIChjb25zdCBbbmFtZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhjb29raWVzKSkgaWYgKG5hbWUuc3RhcnRzV2l0aChjb29raWVOYW1lICsgXCIuXCIpKSB7XG5cdFx0Y29uc3QgaW5kZXhTdHIgPSBuYW1lLnNwbGl0KFwiLlwiKS5hdCgtMSk7XG5cdFx0Y29uc3QgaW5kZXggPSBwYXJzZUludChpbmRleFN0ciB8fCBcIjBcIiwgMTApO1xuXHRcdGlmICghaXNOYU4oaW5kZXgpKSBjaHVua3MucHVzaCh7XG5cdFx0XHRpbmRleCxcblx0XHRcdHZhbHVlOiB2YWxcblx0XHR9KTtcblx0fVxuXHRpZiAoY2h1bmtzLmxlbmd0aCA+IDApIHtcblx0XHRjaHVua3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXHRcdHJldHVybiBjaHVua3MubWFwKChjKSA9PiBjLnZhbHVlKS5qb2luKFwiXCIpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0QWNjb3VudENvb2tpZShjLCBhY2NvdW50RGF0YSkge1xuXHRjb25zdCBhY2NvdW50RGF0YUNvb2tpZSA9IGMuY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YTtcblx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRtYXhBZ2U6IDMwMCxcblx0XHQuLi5hY2NvdW50RGF0YUNvb2tpZS5hdHRyaWJ1dGVzXG5cdH07XG5cdGNvbnN0IGRhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNvZGVKV1QoYWNjb3VudERhdGEsIGMuY29udGV4dC5zZWNyZXQsIFwiYmV0dGVyLWF1dGgtYWNjb3VudFwiLCBvcHRpb25zLm1heEFnZSk7XG5cdGlmIChkYXRhLmxlbmd0aCA+IEFMTE9XRURfQ09PS0lFX1NJWkUpIHtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoYWNjb3VudERhdGFDb29raWUubmFtZSwgb3B0aW9ucywgYyk7XG5cdFx0Y29uc3QgY29va2llcyA9IGFjY291bnRTdG9yZS5jaHVuayhkYXRhLCBvcHRpb25zKTtcblx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjb29raWVzKTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoYWNjb3VudERhdGFDb29raWUubmFtZSwgb3B0aW9ucywgYyk7XG5cdFx0aWYgKGFjY291bnRTdG9yZS5oYXNDaHVua3MoKSkge1xuXHRcdFx0Y29uc3QgY2xlYW5Db29raWVzID0gYWNjb3VudFN0b3JlLmNsZWFuKCk7XG5cdFx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRcdH1cblx0XHRjLnNldENvb2tpZShhY2NvdW50RGF0YUNvb2tpZS5uYW1lLCBkYXRhLCBvcHRpb25zKTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudENvb2tpZShjKSB7XG5cdGNvbnN0IGFjY291bnRDb29raWUgPSBnZXRDaHVua2VkQ29va2llKGMsIGMuY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YS5uYW1lKTtcblx0aWYgKGFjY291bnRDb29raWUpIHtcblx0XHRjb25zdCBhY2NvdW50RGF0YSA9IHNhZmVKU09OUGFyc2UoYXdhaXQgc3ltbWV0cmljRGVjb2RlSldUKGFjY291bnRDb29raWUsIGMuY29udGV4dC5zZWNyZXQsIFwiYmV0dGVyLWF1dGgtYWNjb3VudFwiKSk7XG5cdFx0aWYgKGFjY291bnREYXRhKSByZXR1cm4gYWNjb3VudERhdGE7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5jb25zdCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEgPSB6Lm9wdGlvbmFsKHoub2JqZWN0KHtcblx0ZGlzYWJsZUNvb2tpZUNhY2hlOiB6LmNvZXJjZS5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgY29va2llIGNhY2hlIGFuZCBmZXRjaCBzZXNzaW9uIGZyb20gZGF0YWJhc2VcIiB9KS5vcHRpb25hbCgpLFxuXHRkaXNhYmxlUmVmcmVzaDogei5jb2VyY2UuYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIHNlc3Npb24gcmVmcmVzaC4gVXNlZnVsIGZvciBjaGVja2luZyBzZXNzaW9uIHN0YXR1cywgd2l0aG91dCB1cGRhdGluZyB0aGUgc2Vzc2lvblwiIH0pLm9wdGlvbmFsKClcbn0pKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBY2NvdW50U3RvcmUsIGNyZWF0ZVNlc3Npb25TdG9yZSwgZ2V0QWNjb3VudENvb2tpZSwgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLCBzZXRBY2NvdW50Q29va2llIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLXN0b3JlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* binding */ constantTimeEqual)\n/* harmony export */ });\n//#region src/crypto/buffer.ts\n/**\n* Compare two buffers in constant time.\n*/\nfunction constantTimeEqual(a, b) {\n\tif (typeof a === \"string\") a = new TextEncoder().encode(a);\n\tif (typeof b === \"string\") b = new TextEncoder().encode(b);\n\tconst aBuffer = new Uint8Array(a);\n\tconst bBuffer = new Uint8Array(b);\n\tlet c = aBuffer.length ^ bBuffer.length;\n\tconst length = Math.max(aBuffer.length, bBuffer.length);\n\tfor (let i = 0; i < length; i++) c |= (i < aBuffer.length ? aBuffer[i] : 0) ^ (i < bBuffer.length ? bBuffer[i] : 0);\n\treturn c === 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=buffer.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NyeXB0by9idWZmZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjcnlwdG9cXGJ1ZmZlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jcnlwdG8vYnVmZmVyLnRzXG4vKipcbiogQ29tcGFyZSB0d28gYnVmZmVycyBpbiBjb25zdGFudCB0aW1lLlxuKi9cbmZ1bmN0aW9uIGNvbnN0YW50VGltZUVxdWFsKGEsIGIpIHtcblx0aWYgKHR5cGVvZiBhID09PSBcInN0cmluZ1wiKSBhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGEpO1xuXHRpZiAodHlwZW9mIGIgPT09IFwic3RyaW5nXCIpIGIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYik7XG5cdGNvbnN0IGFCdWZmZXIgPSBuZXcgVWludDhBcnJheShhKTtcblx0Y29uc3QgYkJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGIpO1xuXHRsZXQgYyA9IGFCdWZmZXIubGVuZ3RoIF4gYkJ1ZmZlci5sZW5ndGg7XG5cdGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KGFCdWZmZXIubGVuZ3RoLCBiQnVmZmVyLmxlbmd0aCk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGMgfD0gKGkgPCBhQnVmZmVyLmxlbmd0aCA/IGFCdWZmZXJbaV0gOiAwKSBeIChpIDwgYkJ1ZmZlci5sZW5ndGggPyBiQnVmZmVyW2ldIDogMCk7XG5cdHJldHVybiBjID09PSAwO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* reexport safe */ _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual),\n/* harmony export */   generateRandomString: () => (/* reexport safe */ _random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString),\n/* harmony export */   getCryptoKey: () => (/* binding */ getCryptoKey),\n/* harmony export */   hashPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.hashPassword),\n/* harmony export */   makeSignature: () => (/* binding */ makeSignature),\n/* harmony export */   signJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecodeJWT),\n/* harmony export */   symmetricDecrypt: () => (/* binding */ symmetricDecrypt),\n/* harmony export */   symmetricEncodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncodeJWT),\n/* harmony export */   symmetricEncrypt: () => (/* binding */ symmetricEncrypt),\n/* harmony export */   verifyJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.verifyJWT),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./password.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./random.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @noble/ciphers/chacha.js */ \"(rsc)/./node_modules/.pnpm/@noble+ciphers@2.1.1/node_modules/@noble/ciphers/chacha.js\");\n/* harmony import */ var _noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @noble/ciphers/utils.js */ \"(rsc)/./node_modules/.pnpm/@noble+ciphers@2.1.1/node_modules/@noble/ciphers/utils.js\");\n\n\n\n\n\n\n\n\n\n//#region src/crypto/index.ts\nconst algorithm = {\n\tname: \"HMAC\",\n\thash: \"SHA-256\"\n};\nconst symmetricEncrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.utf8ToBytes)(data);\n\treturn (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.bytesToHex)((0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes)).encrypt(dataAsBytes));\n};\nconst symmetricDecrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.hexToBytes)(data);\n\tconst chacha = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes));\n\treturn new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\nconst getCryptoKey = async (secret) => {\n\tconst secretBuf = typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n\treturn await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().importKey(\"raw\", secretBuf, algorithm, false, [\"sign\", \"verify\"]);\n};\nconst makeSignature = async (value, secret) => {\n\tconst key = await getCryptoKey(secret);\n\tconst signature = await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().sign(algorithm.name, key, new TextEncoder().encode(value));\n\treturn btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NyeXB0by9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDc0M7QUFDekI7QUFDVjtBQUNJO0FBQ0g7QUFDUTtBQUMrQjs7QUFFNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxXQUFXO0FBQzdDLDBCQUEwQixtRUFBVTtBQUNwQyxxQkFBcUIsb0VBQVc7QUFDaEMsUUFBUSxtRUFBVSxDQUFDLHFFQUFZLENBQUMsdUVBQWlCO0FBQ2pEO0FBQ0Esa0NBQWtDLFdBQVc7QUFDN0MsMEJBQTBCLG1FQUFVO0FBQ3BDLHFCQUFxQixtRUFBVTtBQUMvQixnQkFBZ0IscUVBQVksQ0FBQyx1RUFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNFQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0VBQWtCO0FBQzNDO0FBQ0E7O0FBRUE7QUFDOE07QUFDOU0iLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY3J5cHRvXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uc3RhbnRUaW1lRXF1YWwgfSBmcm9tIFwiLi9idWZmZXIubWpzXCI7XG5pbXBvcnQgeyBzaWduSldULCBzeW1tZXRyaWNEZWNvZGVKV1QsIHN5bW1ldHJpY0VuY29kZUpXVCwgdmVyaWZ5SldUIH0gZnJvbSBcIi4vand0Lm1qc1wiO1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9yYW5kb20ubWpzXCI7XG5pbXBvcnQgeyBnZXRXZWJjcnlwdG9TdWJ0bGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyB4Y2hhY2hhMjBwb2x5MTMwNSB9IGZyb20gXCJAbm9ibGUvY2lwaGVycy9jaGFjaGEuanNcIjtcbmltcG9ydCB7IGJ5dGVzVG9IZXgsIGhleFRvQnl0ZXMsIG1hbmFnZWROb25jZSwgdXRmOFRvQnl0ZXMgfSBmcm9tIFwiQG5vYmxlL2NpcGhlcnMvdXRpbHMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jcnlwdG8vaW5kZXgudHNcbmNvbnN0IGFsZ29yaXRobSA9IHtcblx0bmFtZTogXCJITUFDXCIsXG5cdGhhc2g6IFwiU0hBLTI1NlwiXG59O1xuY29uc3Qgc3ltbWV0cmljRW5jcnlwdCA9IGFzeW5jICh7IGtleSwgZGF0YSB9KSA9PiB7XG5cdGNvbnN0IGtleUFzQnl0ZXMgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3Qoa2V5KTtcblx0Y29uc3QgZGF0YUFzQnl0ZXMgPSB1dGY4VG9CeXRlcyhkYXRhKTtcblx0cmV0dXJuIGJ5dGVzVG9IZXgobWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSkuZW5jcnlwdChkYXRhQXNCeXRlcykpO1xufTtcbmNvbnN0IHN5bW1ldHJpY0RlY3J5cHQgPSBhc3luYyAoeyBrZXksIGRhdGEgfSkgPT4ge1xuXHRjb25zdCBrZXlBc0J5dGVzID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KGtleSk7XG5cdGNvbnN0IGRhdGFBc0J5dGVzID0gaGV4VG9CeXRlcyhkYXRhKTtcblx0Y29uc3QgY2hhY2hhID0gbWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSk7XG5cdHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoY2hhY2hhLmRlY3J5cHQoZGF0YUFzQnl0ZXMpKTtcbn07XG5jb25zdCBnZXRDcnlwdG9LZXkgPSBhc3luYyAoc2VjcmV0KSA9PiB7XG5cdGNvbnN0IHNlY3JldEJ1ZiA9IHR5cGVvZiBzZWNyZXQgPT09IFwic3RyaW5nXCIgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VjcmV0KSA6IHNlY3JldDtcblx0cmV0dXJuIGF3YWl0IGdldFdlYmNyeXB0b1N1YnRsZSgpLmltcG9ydEtleShcInJhd1wiLCBzZWNyZXRCdWYsIGFsZ29yaXRobSwgZmFsc2UsIFtcInNpZ25cIiwgXCJ2ZXJpZnlcIl0pO1xufTtcbmNvbnN0IG1ha2VTaWduYXR1cmUgPSBhc3luYyAodmFsdWUsIHNlY3JldCkgPT4ge1xuXHRjb25zdCBrZXkgPSBhd2FpdCBnZXRDcnlwdG9LZXkoc2VjcmV0KTtcblx0Y29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgZ2V0V2ViY3J5cHRvU3VidGxlKCkuc2lnbihhbGdvcml0aG0ubmFtZSwga2V5LCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodmFsdWUpKTtcblx0cmV0dXJuIGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShzaWduYXR1cmUpKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnN0YW50VGltZUVxdWFsLCBnZW5lcmF0ZVJhbmRvbVN0cmluZywgZ2V0Q3J5cHRvS2V5LCBoYXNoUGFzc3dvcmQsIG1ha2VTaWduYXR1cmUsIHNpZ25KV1QsIHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jb2RlSldULCBzeW1tZXRyaWNFbmNyeXB0LCB2ZXJpZnlKV1QsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signJWT: () => (/* binding */ signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* binding */ symmetricDecodeJWT),\n/* harmony export */   symmetricEncodeJWT: () => (/* binding */ symmetricEncodeJWT),\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @noble/hashes/hkdf.js */ \"(rsc)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/hkdf.js\");\n/* harmony import */ var _noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/sha2.js */ \"(rsc)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/sha2.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@6.1.3/node_modules/jose/dist/webapi/jwt/decrypt.js\");\n\n\n\n\n//#region src/crypto/jwt.ts\nasync function signJWT(payload, secret, expiresIn = 3600) {\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n}\nasync function verifyJWT(token, secret) {\n\ttry {\n\t\treturn (await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, new TextEncoder().encode(secret))).payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\nconst info = new Uint8Array([\n\t66,\n\t101,\n\t116,\n\t116,\n\t101,\n\t114,\n\t65,\n\t117,\n\t116,\n\t104,\n\t46,\n\t106,\n\t115,\n\t32,\n\t71,\n\t101,\n\t110,\n\t101,\n\t114,\n\t97,\n\t116,\n\t101,\n\t100,\n\t32,\n\t69,\n\t110,\n\t99,\n\t114,\n\t121,\n\t112,\n\t116,\n\t105,\n\t111,\n\t110,\n\t32,\n\t75,\n\t101,\n\t121\n]);\nconst now = () => Date.now() / 1e3 | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\nasync function symmetricEncodeJWT(payload, secret, salt, expiresIn = 3600) {\n\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\tconst thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\tkty: \"oct\",\n\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t}, \"sha256\");\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_6__.EncryptJWT(payload).setProtectedHeader({\n\t\talg,\n\t\tenc,\n\t\tkid: thumbprint\n\t}).setIssuedAt().setExpirationTime(now() + expiresIn).setJti(crypto.randomUUID()).encrypt(encryptionSecret);\n}\nasync function symmetricDecodeJWT(token, secret, salt) {\n\tif (!token) return null;\n\ttry {\n\t\tconst { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_7__.jwtDecrypt)(token, async ({ kid }) => {\n\t\t\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\t\t\tif (kid === void 0) return encryptionSecret;\n\t\t\tif (kid === await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\t\t\tkty: \"oct\",\n\t\t\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t\t\t}, \"sha256\")) return encryptionSecret;\n\t\t\tthrow new Error(\"no matching decryption secret\");\n\t\t}, {\n\t\t\tclockTolerance: 15,\n\t\t\tkeyManagementAlgorithms: [alg],\n\t\t\tcontentEncryptionAlgorithms: [enc, \"A256GCM\"]\n\t\t});\n\t\treturn payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=jwt.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NyeXB0by9qd3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUNFO0FBQ3NEOztBQUVyRztBQUNBO0FBQ0Esa0JBQWtCLHlDQUFPLCtCQUErQixjQUFjO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQ0FBUztBQUN6QixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyREFBSSxDQUFDLHlEQUFNO0FBQ3JDLDBCQUEwQiw0REFBc0I7QUFDaEQ7QUFDQSxLQUFLLHdDQUFnQjtBQUNyQixFQUFFO0FBQ0Ysa0JBQWtCLDRDQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsVUFBVSxRQUFRLGdEQUFVLGlCQUFpQixLQUFLO0FBQzVELDRCQUE0QiwyREFBSSxDQUFDLHlEQUFNO0FBQ3ZDO0FBQ0EscUJBQXFCLDREQUFzQjtBQUMzQztBQUNBLE9BQU8sd0NBQWdCO0FBQ3ZCLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3NFO0FBQ3RFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xcand0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoa2RmIH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvaGtkZi5qc1wiO1xuaW1wb3J0IHsgc2hhMjU2IH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvc2hhMi5qc1wiO1xuaW1wb3J0IHsgRW5jcnlwdEpXVCwgU2lnbkpXVCwgYmFzZTY0dXJsLCBjYWxjdWxhdGVKd2tUaHVtYnByaW50LCBqd3REZWNyeXB0LCBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9qd3QudHNcbmFzeW5jIGZ1bmN0aW9uIHNpZ25KV1QocGF5bG9hZCwgc2VjcmV0LCBleHBpcmVzSW4gPSAzNjAwKSB7XG5cdHJldHVybiBhd2FpdCBuZXcgU2lnbkpXVChwYXlsb2FkKS5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IFwiSFMyNTZcIiB9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMykgKyBleHBpcmVzSW4pLnNpZ24obmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5SldUKHRva2VuLCBzZWNyZXQpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gKGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkpKS5wYXlsb2FkO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuY29uc3QgaW5mbyA9IG5ldyBVaW50OEFycmF5KFtcblx0NjYsXG5cdDEwMSxcblx0MTE2LFxuXHQxMTYsXG5cdDEwMSxcblx0MTE0LFxuXHQ2NSxcblx0MTE3LFxuXHQxMTYsXG5cdDEwNCxcblx0NDYsXG5cdDEwNixcblx0MTE1LFxuXHQzMixcblx0NzEsXG5cdDEwMSxcblx0MTEwLFxuXHQxMDEsXG5cdDExNCxcblx0OTcsXG5cdDExNixcblx0MTAxLFxuXHQxMDAsXG5cdDMyLFxuXHQ2OSxcblx0MTEwLFxuXHQ5OSxcblx0MTE0LFxuXHQxMjEsXG5cdDExMixcblx0MTE2LFxuXHQxMDUsXG5cdDExMSxcblx0MTEwLFxuXHQzMixcblx0NzUsXG5cdDEwMSxcblx0MTIxXG5dKTtcbmNvbnN0IG5vdyA9ICgpID0+IERhdGUubm93KCkgLyAxZTMgfCAwO1xuY29uc3QgYWxnID0gXCJkaXJcIjtcbmNvbnN0IGVuYyA9IFwiQTI1NkNCQy1IUzUxMlwiO1xuYXN5bmMgZnVuY3Rpb24gc3ltbWV0cmljRW5jb2RlSldUKHBheWxvYWQsIHNlY3JldCwgc2FsdCwgZXhwaXJlc0luID0gMzYwMCkge1xuXHRjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gaGtkZihzaGEyNTYsIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzZWNyZXQpLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2FsdCksIGluZm8sIDY0KTtcblx0Y29uc3QgdGh1bWJwcmludCA9IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoe1xuXHRcdGt0eTogXCJvY3RcIixcblx0XHRrOiBiYXNlNjR1cmwuZW5jb2RlKGVuY3J5cHRpb25TZWNyZXQpXG5cdH0sIFwic2hhMjU2XCIpO1xuXHRyZXR1cm4gYXdhaXQgbmV3IEVuY3J5cHRKV1QocGF5bG9hZCkuc2V0UHJvdGVjdGVkSGVhZGVyKHtcblx0XHRhbGcsXG5cdFx0ZW5jLFxuXHRcdGtpZDogdGh1bWJwcmludFxuXHR9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKG5vdygpICsgZXhwaXJlc0luKS5zZXRKdGkoY3J5cHRvLnJhbmRvbVVVSUQoKSkuZW5jcnlwdChlbmNyeXB0aW9uU2VjcmV0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHN5bW1ldHJpY0RlY29kZUpXVCh0b2tlbiwgc2VjcmV0LCBzYWx0KSB7XG5cdGlmICghdG9rZW4pIHJldHVybiBudWxsO1xuXHR0cnkge1xuXHRcdGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0RGVjcnlwdCh0b2tlbiwgYXN5bmMgKHsga2lkIH0pID0+IHtcblx0XHRcdGNvbnN0IGVuY3J5cHRpb25TZWNyZXQgPSBoa2RmKHNoYTI1NiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCksIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzYWx0KSwgaW5mbywgNjQpO1xuXHRcdFx0aWYgKGtpZCA9PT0gdm9pZCAwKSByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcblx0XHRcdGlmIChraWQgPT09IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoe1xuXHRcdFx0XHRrdHk6IFwib2N0XCIsXG5cdFx0XHRcdGs6IGJhc2U2NHVybC5lbmNvZGUoZW5jcnlwdGlvblNlY3JldClcblx0XHRcdH0sIFwic2hhMjU2XCIpKSByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vIG1hdGNoaW5nIGRlY3J5cHRpb24gc2VjcmV0XCIpO1xuXHRcdH0sIHtcblx0XHRcdGNsb2NrVG9sZXJhbmNlOiAxNSxcblx0XHRcdGtleU1hbmFnZW1lbnRBbGdvcml0aG1zOiBbYWxnXSxcblx0XHRcdGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtczogW2VuYywgXCJBMjU2R0NNXCJdXG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBheWxvYWQ7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnbkpXVCwgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNFbmNvZGVKV1QsIHZlcmlmeUpXVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9and0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/jwt.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/scrypt.js */ \"(rsc)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/scrypt.js\");\n/* harmony import */ var _noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @noble/hashes/utils.js */ \"(rsc)/./node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/utils.js\");\n\n\n\n\n\n\n//#region src/crypto/password.ts\nconst config = {\n\tN: 16384,\n\tr: 16,\n\tp: 1,\n\tdkLen: 64\n};\nasync function generateKey(password, salt) {\n\treturn await (0,_noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__.scryptAsync)(password.normalize(\"NFKC\"), salt, {\n\t\tN: config.N,\n\t\tp: config.p,\n\t\tr: config.r,\n\t\tdkLen: config.dkLen,\n\t\tmaxmem: 128 * config.N * config.r * 2\n\t});\n}\nconst hashPassword = async (password) => {\n\tconst salt = _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(crypto.getRandomValues(new Uint8Array(16)));\n\tconst key = await generateKey(password, salt);\n\treturn `${salt}:${_better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(key)}`;\n};\nconst verifyPassword = async ({ hash, password }) => {\n\tconst [salt, key] = hash.split(\":\");\n\tif (!salt || !key) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Invalid password hash\");\n\treturn (0,_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await generateKey(password, salt), (0,_noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__.hexToBytes)(key));\n};\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NyeXB0by9wYXNzd29yZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRDtBQUNTO0FBQ2I7QUFDUztBQUNGOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvRUFBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxjQUFjLHVEQUFHO0FBQ2pCO0FBQ0EsV0FBVyxLQUFLLEdBQUcsdURBQUcsYUFBYTtBQUNuQztBQUNBLGdDQUFnQyxnQkFBZ0I7QUFDaEQ7QUFDQSw4QkFBOEIsb0VBQWU7QUFDN0MsUUFBUSw4REFBaUIsb0NBQW9DLGtFQUFVO0FBQ3ZFOztBQUVBO0FBQ3dDO0FBQ3hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xccGFzc3dvcmQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH0gZnJvbSBcIi4vYnVmZmVyLm1qc1wiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBoZXggfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2hleFwiO1xuaW1wb3J0IHsgc2NyeXB0QXN5bmMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9zY3J5cHQuanNcIjtcbmltcG9ydCB7IGhleFRvQnl0ZXMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9wYXNzd29yZC50c1xuY29uc3QgY29uZmlnID0ge1xuXHROOiAxNjM4NCxcblx0cjogMTYsXG5cdHA6IDEsXG5cdGRrTGVuOiA2NFxufTtcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KSB7XG5cdHJldHVybiBhd2FpdCBzY3J5cHRBc3luYyhwYXNzd29yZC5ub3JtYWxpemUoXCJORktDXCIpLCBzYWx0LCB7XG5cdFx0TjogY29uZmlnLk4sXG5cdFx0cDogY29uZmlnLnAsXG5cdFx0cjogY29uZmlnLnIsXG5cdFx0ZGtMZW46IGNvbmZpZy5ka0xlbixcblx0XHRtYXhtZW06IDEyOCAqIGNvbmZpZy5OICogY29uZmlnLnIgKiAyXG5cdH0pO1xufVxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkKSA9PiB7XG5cdGNvbnN0IHNhbHQgPSBoZXguZW5jb2RlKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTYpKSk7XG5cdGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KTtcblx0cmV0dXJuIGAke3NhbHR9OiR7aGV4LmVuY29kZShrZXkpfWA7XG59O1xuY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBhc3luYyAoeyBoYXNoLCBwYXNzd29yZCB9KSA9PiB7XG5cdGNvbnN0IFtzYWx0LCBrZXldID0gaGFzaC5zcGxpdChcIjpcIik7XG5cdGlmICghc2FsdCB8fCAha2V5KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiSW52YWxpZCBwYXNzd29yZCBoYXNoXCIpO1xuXHRyZXR1cm4gY29uc3RhbnRUaW1lRXF1YWwoYXdhaXQgZ2VuZXJhdGVLZXkocGFzc3dvcmQsIHNhbHQpLCBoZXhUb0J5dGVzKGtleSkpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYXNoUGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/.pnpm/@better-auth+utils@0.3.0/node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n//#region src/crypto/random.ts\nconst generateRandomString = (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__.createRandomStringGenerator)(\"a-z\", \"0-9\", \"A-Z\", \"-_\");\n\n//#endregion\n\n//# sourceMappingURL=random.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NyeXB0by9yYW5kb20ubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdFOztBQUV4RTtBQUNBLDZCQUE2QixzRkFBMkI7O0FBRXhEO0FBQ2dDO0FBQ2hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xccmFuZG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbVwiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9yYW5kb20udHNcbmNvbnN0IGdlbmVyYXRlUmFuZG9tU3RyaW5nID0gY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yKFwiYS16XCIsIFwiMC05XCIsIFwiQS1aXCIsIFwiLV9cIik7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhbmRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseAdapter: () => (/* binding */ getBaseAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n//#region src/db/adapter-base.ts\nasync function getBaseAdapter(options, handleDirectDatabase) {\n\tlet adapter;\n\tif (!options.database) {\n\t\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options);\n\t\tconst memoryDB = Object.keys(tables).reduce((acc, key) => {\n\t\t\tacc[key] = [];\n\t\t\treturn acc;\n\t\t}, {});\n\t\tconst { memoryAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/memory-adapter/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\"));\n\t\tadapter = memoryAdapter(memoryDB)(options);\n\t} else if (typeof options.database === \"function\") adapter = options.database(options);\n\telse adapter = await handleDirectDatabase(options);\n\tif (!adapter.transaction) {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation.\");\n\t\tadapter.transaction = async (cb) => {\n\t\t\treturn cb(adapter);\n\t\t};\n\t}\n\treturn adapter;\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2FkYXB0ZXItYmFzZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBQ047O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1FQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQLFVBQVUsZ0JBQWdCLFFBQVEsOFdBQThDO0FBQ2hGO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFLHlEQUFNO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxhZGFwdGVyLWJhc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyLWJhc2UudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEJhc2VBZGFwdGVyKG9wdGlvbnMsIGhhbmRsZURpcmVjdERhdGFiYXNlKSB7XG5cdGxldCBhZGFwdGVyO1xuXHRpZiAoIW9wdGlvbnMuZGF0YWJhc2UpIHtcblx0XHRjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRcdGNvbnN0IG1lbW9yeURCID0gT2JqZWN0LmtleXModGFibGVzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG5cdFx0XHRhY2Nba2V5XSA9IFtdO1xuXHRcdFx0cmV0dXJuIGFjYztcblx0XHR9LCB7fSk7XG5cdFx0Y29uc3QgeyBtZW1vcnlBZGFwdGVyIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9pbmRleC5tanNcIik7XG5cdFx0YWRhcHRlciA9IG1lbW9yeUFkYXB0ZXIobWVtb3J5REIpKG9wdGlvbnMpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGFiYXNlID09PSBcImZ1bmN0aW9uXCIpIGFkYXB0ZXIgPSBvcHRpb25zLmRhdGFiYXNlKG9wdGlvbnMpO1xuXHRlbHNlIGFkYXB0ZXIgPSBhd2FpdCBoYW5kbGVEaXJlY3REYXRhYmFzZShvcHRpb25zKTtcblx0aWYgKCFhZGFwdGVyLnRyYW5zYWN0aW9uKSB7XG5cdFx0bG9nZ2VyLndhcm4oXCJBZGFwdGVyIGRvZXMgbm90IGNvcnJlY3RseSBpbXBsZW1lbnQgdHJhbnNhY3Rpb24gZnVuY3Rpb24sIHBhdGNoaW5nIGl0IGF1dG9tYXRpY2FsbHkuIFBsZWFzZSB1cGRhdGUgeW91ciBhZGFwdGVyIGltcGxlbWVudGF0aW9uLlwiKTtcblx0XHRhZGFwdGVyLnRyYW5zYWN0aW9uID0gYXN5bmMgKGNiKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2IoYWRhcHRlcik7XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gYWRhcHRlcjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRCYXNlQWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci1iYXNlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAdapter: () => (/* binding */ getAdapter)\n/* harmony export */ });\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/db/adapter-kysely.ts\nasync function getAdapter(options) {\n\treturn (0,_adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseAdapter)(options, async (opts) => {\n\t\tconst { createKyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\tconst { kysely, databaseType, transaction } = await createKyselyAdapter(opts);\n\t\tif (!kysely) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Failed to initialize database adapter\");\n\t\tconst { kyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\treturn kyselyAdapter(kysely, {\n\t\t\ttype: databaseType || \"sqlite\",\n\t\t\tdebugLogs: opts.database && \"debugLogs\" in opts.database ? opts.database.debugLogs : false,\n\t\t\ttransaction\n\t\t})(opts);\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-kysely.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2FkYXB0ZXIta3lzZWx5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDTTs7QUFFMUQ7QUFDQTtBQUNBLFFBQVEsaUVBQWM7QUFDdEIsVUFBVSxzQkFBc0IsUUFBUSw4V0FBOEM7QUFDdEYsVUFBVSxvQ0FBb0M7QUFDOUMseUJBQXlCLG9FQUFlO0FBQ3hDLFVBQVUsZ0JBQWdCLFFBQVEsOFdBQThDO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcYWRhcHRlci1reXNlbHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VBZGFwdGVyIH0gZnJvbSBcIi4vYWRhcHRlci1iYXNlLm1qc1wiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvYWRhcHRlci1reXNlbHkudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEFkYXB0ZXIob3B0aW9ucykge1xuXHRyZXR1cm4gZ2V0QmFzZUFkYXB0ZXIob3B0aW9ucywgYXN5bmMgKG9wdHMpID0+IHtcblx0XHRjb25zdCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIgfSA9IGF3YWl0IGltcG9ydChcIi4uL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2luZGV4Lm1qc1wiKTtcblx0XHRjb25zdCB7IGt5c2VseSwgZGF0YWJhc2VUeXBlLCB0cmFuc2FjdGlvbiB9ID0gYXdhaXQgY3JlYXRlS3lzZWx5QWRhcHRlcihvcHRzKTtcblx0XHRpZiAoIWt5c2VseSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlIGFkYXB0ZXJcIik7XG5cdFx0Y29uc3QgeyBreXNlbHlBZGFwdGVyIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9pbmRleC5tanNcIik7XG5cdFx0cmV0dXJuIGt5c2VseUFkYXB0ZXIoa3lzZWx5LCB7XG5cdFx0XHR0eXBlOiBkYXRhYmFzZVR5cGUgfHwgXCJzcWxpdGVcIixcblx0XHRcdGRlYnVnTG9nczogb3B0cy5kYXRhYmFzZSAmJiBcImRlYnVnTG9nc1wiIGluIG9wdHMuZGF0YWJhc2UgPyBvcHRzLmRhdGFiYXNlLmRlYnVnTG9ncyA6IGZhbHNlLFxuXHRcdFx0dHJhbnNhY3Rpb25cblx0XHR9KShvcHRzKTtcblx0fSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0QWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci1reXNlbHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertFromDB: () => (/* binding */ convertFromDB),\n/* harmony export */   convertToDB: () => (/* binding */ convertToDB)\n/* harmony export */ });\n//#region src/db/field-converter.ts\nfunction convertToDB(fields, values) {\n\tconst result = values.id ? { id: values.id } : {};\n\tfor (const key in fields) {\n\t\tconst field = fields[key];\n\t\tconst value = values[key];\n\t\tif (value === void 0) continue;\n\t\tresult[field.fieldName || key] = value;\n\t}\n\treturn result;\n}\nfunction convertFromDB(fields, values) {\n\tif (!values) return null;\n\tconst result = { id: values.id };\n\tfor (const [key, value] of Object.entries(fields)) result[key] = values[value.fieldName || key];\n\treturn result;\n}\n\n//#endregion\n\n//# sourceMappingURL=field-converter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2ZpZWxkLWNvbnZlcnRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0EsOEJBQThCLGdCQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDc0M7QUFDdEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGZpZWxkLWNvbnZlcnRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9kYi9maWVsZC1jb252ZXJ0ZXIudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb0RCKGZpZWxkcywgdmFsdWVzKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHZhbHVlcy5pZCA/IHsgaWQ6IHZhbHVlcy5pZCB9IDoge307XG5cdGZvciAoY29uc3Qga2V5IGluIGZpZWxkcykge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNba2V5XTtcblx0XHRpZiAodmFsdWUgPT09IHZvaWQgMCkgY29udGludWU7XG5cdFx0cmVzdWx0W2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXldID0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRGcm9tREIoZmllbGRzLCB2YWx1ZXMpIHtcblx0aWYgKCF2YWx1ZXMpIHJldHVybiBudWxsO1xuXHRjb25zdCByZXN1bHQgPSB7IGlkOiB2YWx1ZXMuaWQgfTtcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmllbGRzKSkgcmVzdWx0W2tleV0gPSB2YWx1ZXNbdmFsdWUuZmllbGROYW1lIHx8IGtleV07XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udmVydEZyb21EQiwgY29udmVydFRvREIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpZWxkLWNvbnZlcnRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFieldAttribute: () => (/* binding */ createFieldAttribute)\n/* harmony export */ });\n//#region src/db/field.ts\nconst createFieldAttribute = (type, config) => {\n\treturn {\n\t\ttype,\n\t\t...config\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=field.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2ZpZWxkLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGZpZWxkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2RiL2ZpZWxkLnRzXG5jb25zdCBjcmVhdGVGaWVsZEF0dHJpYnV0ZSA9ICh0eXBlLCBjb25maWcpID0+IHtcblx0cmV0dXJuIHtcblx0XHR0eXBlLFxuXHRcdC4uLmNvbmZpZ1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVGaWVsZEF0dHJpYnV0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmllbGQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMigrations: () => (/* binding */ getMigrations),\n/* harmony export */   matchType: () => (/* binding */ matchType)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/.pnpm/kysely@0.28.10/node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/get-migration.ts\nconst map = {\n\tpostgres: {\n\t\tstring: [\n\t\t\t\"character varying\",\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int4\",\n\t\t\t\"integer\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"numeric\",\n\t\t\t\"real\",\n\t\t\t\"double precision\"\n\t\t],\n\t\tboolean: [\"bool\", \"boolean\"],\n\t\tdate: [\n\t\t\t\"timestamptz\",\n\t\t\t\"timestamp\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\", \"jsonb\"]\n\t},\n\tmysql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"integer\",\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"boolean\", \"tinyint\"],\n\t\tdate: [\n\t\t\t\"timestamp\",\n\t\t\t\"datetime\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\"]\n\t},\n\tsqlite: {\n\t\tstring: [\"TEXT\"],\n\t\tnumber: [\"INTEGER\", \"REAL\"],\n\t\tboolean: [\"INTEGER\", \"BOOLEAN\"],\n\t\tdate: [\"DATE\", \"INTEGER\"],\n\t\tjson: [\"TEXT\"]\n\t},\n\tmssql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"nvarchar\",\n\t\t\t\"uniqueidentifier\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"bit\", \"smallint\"],\n\t\tdate: [\n\t\t\t\"datetime2\",\n\t\t\t\"date\",\n\t\t\t\"datetime\"\n\t\t],\n\t\tjson: [\"varchar\", \"nvarchar\"]\n\t}\n};\nfunction matchType(columnDataType, fieldType, dbType) {\n\tfunction normalize(type) {\n\t\treturn type.toLowerCase().split(\"(\")[0].trim();\n\t}\n\tif (fieldType === \"string[]\" || fieldType === \"number[]\") return columnDataType.toLowerCase().includes(\"json\");\n\tconst types = map[dbType];\n\treturn (Array.isArray(fieldType) ? types[\"string\"].map((t) => t.toLowerCase()) : types[fieldType].map((t) => t.toLowerCase())).includes(normalize(columnDataType));\n}\n/**\n* Get the current PostgreSQL schema (search_path) for the database connection\n* Returns the first schema in the search_path, defaulting to 'public' if not found\n*/\nasync function getPostgresSchema(db) {\n\ttry {\n\t\tconst result = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`SHOW search_path`.execute(db);\n\t\tif (result.rows[0]?.search_path) return result.rows[0].search_path.split(\",\").map((s) => s.trim()).map((s) => s.replace(/^[\"']|[\"']$/g, \"\")).filter((s) => !s.startsWith(\"$\"))[0] || \"public\";\n\t} catch {}\n\treturn \"public\";\n}\nasync function getMigrations(config) {\n\tconst betterAuthSchema = (0,_get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.getSchema)(config);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.createLogger)(config.logger);\n\tlet { kysely: db, databaseType: dbType } = await (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter)(config);\n\tif (!dbType) {\n\t\tlogger$1.warn(\"Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this.\");\n\t\tdbType = \"sqlite\";\n\t}\n\tif (!db) {\n\t\tlogger$1.error(\"Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter.\");\n\t\tprocess.exit(1);\n\t}\n\tlet currentSchema = \"public\";\n\tif (dbType === \"postgres\") {\n\t\tcurrentSchema = await getPostgresSchema(db);\n\t\tlogger$1.debug(`PostgreSQL migration: Using schema '${currentSchema}' (from search_path)`);\n\t\ttry {\n\t\t\tif (!(await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT schema_name \n\t\t\t\tFROM information_schema.schemata \n\t\t\t\tWHERE schema_name = ${currentSchema}\n\t\t\t`.execute(db)).rows[0]) logger$1.warn(`Schema '${currentSchema}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`);\n\t\t} catch (error) {\n\t\t\tlogger$1.debug(`Could not verify schema existence: ${error instanceof Error ? error.message : String(error)}`);\n\t\t}\n\t}\n\tconst allTableMetadata = await db.introspection.getTables();\n\tlet tableMetadata = allTableMetadata;\n\tif (dbType === \"postgres\") try {\n\t\tconst tablesInSchema = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT table_name \n\t\t\t\tFROM information_schema.tables \n\t\t\t\tWHERE table_schema = ${currentSchema}\n\t\t\t\tAND table_type = 'BASE TABLE'\n\t\t\t`.execute(db);\n\t\tconst tableNamesInSchema = new Set(tablesInSchema.rows.map((row) => row.table_name));\n\t\ttableMetadata = allTableMetadata.filter((table) => table.schema === currentSchema && tableNamesInSchema.has(table.name));\n\t\tlogger$1.debug(`Found ${tableMetadata.length} table(s) in schema '${currentSchema}': ${tableMetadata.map((t) => t.name).join(\", \") || \"(none)\"}`);\n\t} catch (error) {\n\t\tlogger$1.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${error instanceof Error ? error.message : String(error)}`);\n\t}\n\tconst toBeCreated = [];\n\tconst toBeAdded = [];\n\tfor (const [key, value] of Object.entries(betterAuthSchema)) {\n\t\tconst table = tableMetadata.find((t) => t.name === key);\n\t\tif (!table) {\n\t\t\tconst tIndex = toBeCreated.findIndex((t) => t.table === key);\n\t\t\tconst tableData = {\n\t\t\t\ttable: key,\n\t\t\t\tfields: value.fields,\n\t\t\t\torder: value.order || Infinity\n\t\t\t};\n\t\t\tconst insertIndex = toBeCreated.findIndex((t) => (t.order || Infinity) > tableData.order);\n\t\t\tif (insertIndex === -1) if (tIndex === -1) toBeCreated.push(tableData);\n\t\t\telse toBeCreated[tIndex].fields = {\n\t\t\t\t...toBeCreated[tIndex].fields,\n\t\t\t\t...value.fields\n\t\t\t};\n\t\t\telse toBeCreated.splice(insertIndex, 0, tableData);\n\t\t\tcontinue;\n\t\t}\n\t\tconst toBeAddedFields = {};\n\t\tfor (const [fieldName, field] of Object.entries(value.fields)) {\n\t\t\tconst column = table.columns.find((c) => c.name === fieldName);\n\t\t\tif (!column) {\n\t\t\t\ttoBeAddedFields[fieldName] = field;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (matchType(column.dataType, field.type, dbType)) continue;\n\t\t\telse logger$1.warn(`Field ${fieldName} in table ${key} has a different type in the database. Expected ${field.type} but got ${column.dataType}.`);\n\t\t}\n\t\tif (Object.keys(toBeAddedFields).length > 0) toBeAdded.push({\n\t\t\ttable: key,\n\t\t\tfields: toBeAddedFields,\n\t\t\torder: value.order || Infinity\n\t\t});\n\t}\n\tconst migrations = [];\n\tconst useUUIDs = config.advanced?.database?.generateId === \"uuid\";\n\tconst useNumberId = config.advanced?.database?.useNumberId || config.advanced?.database?.generateId === \"serial\";\n\tfunction getType(field, fieldName) {\n\t\tconst type = field.type;\n\t\tconst provider = dbType || \"sqlite\";\n\t\tconst typeMap = {\n\t\t\tstring: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"text\",\n\t\t\t\tmysql: field.unique ? \"varchar(255)\" : field.references ? \"varchar(36)\" : field.sortable ? \"varchar(255)\" : field.index ? \"varchar(255)\" : \"text\",\n\t\t\t\tmssql: field.unique || field.sortable ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"varchar(8000)\"\n\t\t\t},\n\t\t\tboolean: {\n\t\t\t\tsqlite: \"integer\",\n\t\t\t\tpostgres: \"boolean\",\n\t\t\t\tmysql: \"boolean\",\n\t\t\t\tmssql: \"smallint\"\n\t\t\t},\n\t\t\tnumber: {\n\t\t\t\tsqlite: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tpostgres: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmysql: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmssql: field.bigint ? \"bigint\" : \"integer\"\n\t\t\t},\n\t\t\tdate: {\n\t\t\t\tsqlite: \"date\",\n\t\t\t\tpostgres: \"timestamptz\",\n\t\t\t\tmysql: \"timestamp(3)\",\n\t\t\t\tmssql: (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`datetime2(3)`\n\t\t\t},\n\t\t\tjson: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tpostgres: useNumberId ? (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`integer GENERATED BY DEFAULT AS IDENTITY` : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\tforeignKeyId: {\n\t\t\t\tpostgres: useNumberId ? \"integer\" : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\t\"string[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\t\"number[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t}\n\t\t};\n\t\tif (fieldName === \"id\" || field.references?.field === \"id\") {\n\t\t\tif (fieldName === \"id\") return typeMap.id[provider];\n\t\t\treturn typeMap.foreignKeyId[provider];\n\t\t}\n\t\tif (Array.isArray(type)) return \"text\";\n\t\tif (!(type in typeMap)) throw new Error(`Unsupported field type '${String(type)}' for field '${fieldName}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: \"string\") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);\n\t\treturn typeMap[type][provider];\n\t}\n\tconst getModelName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetModelName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tconst getFieldName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetFieldName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tfunction getReferencePath(model, field) {\n\t\ttry {\n\t\t\treturn `${getModelName(model)}.${getFieldName({\n\t\t\t\tmodel,\n\t\t\t\tfield\n\t\t\t})}`;\n\t\t} catch {\n\t\t\treturn `${model}.${field}`;\n\t\t}\n\t}\n\tif (toBeAdded.length) for (const table of toBeAdded) for (const [fieldName, field] of Object.entries(table.fields)) {\n\t\tconst type = getType(field, fieldName);\n\t\tconst builder = db.schema.alterTable(table.table);\n\t\tif (field.index) {\n\t\t\tconst index = db.schema.alterTable(table.table).addIndex(`${table.table}_${fieldName}_idx`);\n\t\t\tmigrations.push(index);\n\t\t}\n\t\tconst built = builder.addColumn(fieldName, type, (col) => {\n\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\tif (field.unique) col = col.unique();\n\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\treturn col;\n\t\t});\n\t\tmigrations.push(built);\n\t}\n\tconst toBeIndexed = [];\n\tif (config.advanced?.database?.useNumberId) logger$1.warn(\"`useNumberId` is deprecated. Please use `generateId` with `serial` instead.\");\n\tif (toBeCreated.length) for (const table of toBeCreated) {\n\t\tconst idType = getType({ type: useNumberId ? \"number\" : \"string\" }, \"id\");\n\t\tlet dbT = db.schema.createTable(table.table).addColumn(\"id\", idType, (col) => {\n\t\t\tif (useNumberId) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"sqlite\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"mssql\") return col.identity().primaryKey().notNull();\n\t\t\t\treturn col.autoIncrement().primaryKey().notNull();\n\t\t\t}\n\t\t\tif (useUUIDs) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`pg_catalog.gen_random_uuid()`).notNull();\n\t\t\t\treturn col.primaryKey().notNull();\n\t\t\t}\n\t\t\treturn col.primaryKey().notNull();\n\t\t});\n\t\tfor (const [fieldName, field] of Object.entries(table.fields)) {\n\t\t\tconst type = getType(field, fieldName);\n\t\t\tdbT = dbT.addColumn(fieldName, type, (col) => {\n\t\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\t\tif (field.unique) col = col.unique();\n\t\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\t\treturn col;\n\t\t\t});\n\t\t\tif (field.index) {\n\t\t\t\tconst builder = db.schema.createIndex(`${table.table}_${fieldName}_${field.unique ? \"uidx\" : \"idx\"}`).on(table.table).columns([fieldName]);\n\t\t\t\ttoBeIndexed.push(field.unique ? builder.unique() : builder);\n\t\t\t}\n\t\t}\n\t\tmigrations.push(dbT);\n\t}\n\tif (toBeIndexed.length) for (const index of toBeIndexed) migrations.push(index);\n\tasync function runMigrations() {\n\t\tfor (const migration of migrations) await migration.execute();\n\t}\n\tasync function compileMigrations() {\n\t\treturn migrations.map((m) => m.compile().sql).join(\";\\n\\n\") + \";\";\n\t}\n\treturn {\n\t\ttoBeCreated,\n\t\ttoBeAdded,\n\t\trunMigrations,\n\t\tcompileMigrations\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=get-migration.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2dldC1taWdyYXRpb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTZFO0FBQ2hDO0FBQ1E7QUFDQTtBQUN4QjtBQUNxRDs7QUFFbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJDQUFHO0FBQzFCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwwREFBUztBQUNuQyxrQkFBa0IsbUVBQVk7QUFDOUIsT0FBTyxtQ0FBbUMsUUFBUSx5RkFBbUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxjQUFjO0FBQ3RFO0FBQ0EsZUFBZSwyQ0FBRztBQUNsQjtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLG9EQUFvRCxjQUFjO0FBQ2xFLElBQUk7QUFDSix3REFBd0QsdURBQXVEO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkNBQUc7QUFDbEM7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzQkFBc0Isc0JBQXNCLGNBQWMsS0FBSyx3REFBd0Q7QUFDakosR0FBRztBQUNILDBGQUEwRix1REFBdUQ7QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXLFdBQVcsS0FBSyxpREFBaUQsWUFBWSxVQUFVLGdCQUFnQjtBQUNqSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkNBQUc7QUFDZCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDRCQUE0QiwyQ0FBRztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxhQUFhLGVBQWUsVUFBVTtBQUMzRztBQUNBO0FBQ0Esc0JBQXNCLDhFQUFnQjtBQUN0QyxVQUFVLG1FQUFhO0FBQ3ZCO0FBQ0EsRUFBRTtBQUNGLHNCQUFzQiw4RUFBZ0I7QUFDdEMsVUFBVSxtRUFBYTtBQUN2QjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsYUFBYSxvQkFBb0IsR0FBRztBQUNwQztBQUNBO0FBQ0EsSUFBSSxFQUFFO0FBQ04sSUFBSTtBQUNKLGFBQWEsTUFBTSxHQUFHLE1BQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFlBQVksR0FBRyxVQUFVO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZMQUE2TCwyQ0FBRztBQUNoTSw0QkFBNEIsMkNBQUc7QUFDL0I7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5Q0FBeUM7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSwyQ0FBRztBQUNwRTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOExBQThMLDJDQUFHO0FBQ2pNLDZCQUE2QiwyQ0FBRztBQUNoQztBQUNBLElBQUk7QUFDSjtBQUNBLDZDQUE2QyxZQUFZLEdBQUcsVUFBVSxHQUFHLDhCQUE4QjtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxXQUFXO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0M7QUFDcEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGdldC1taWdyYXRpb24ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvZGlhbGVjdC5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYSB9IGZyb20gXCIuL2dldC1zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRBdXRoVGFibGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCI7XG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5pbXBvcnQgeyBpbml0R2V0RmllbGROYW1lLCBpbml0R2V0TW9kZWxOYW1lIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiL2FkYXB0ZXJcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9nZXQtbWlncmF0aW9uLnRzXG5jb25zdCBtYXAgPSB7XG5cdHBvc3RncmVzOiB7XG5cdFx0c3RyaW5nOiBbXG5cdFx0XHRcImNoYXJhY3RlciB2YXJ5aW5nXCIsXG5cdFx0XHRcInZhcmNoYXJcIixcblx0XHRcdFwidGV4dFwiLFxuXHRcdFx0XCJ1dWlkXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnQ0XCIsXG5cdFx0XHRcImludGVnZXJcIixcblx0XHRcdFwiYmlnaW50XCIsXG5cdFx0XHRcInNtYWxsaW50XCIsXG5cdFx0XHRcIm51bWVyaWNcIixcblx0XHRcdFwicmVhbFwiLFxuXHRcdFx0XCJkb3VibGUgcHJlY2lzaW9uXCJcblx0XHRdLFxuXHRcdGJvb2xlYW46IFtcImJvb2xcIiwgXCJib29sZWFuXCJdLFxuXHRcdGRhdGU6IFtcblx0XHRcdFwidGltZXN0YW1wdHpcIixcblx0XHRcdFwidGltZXN0YW1wXCIsXG5cdFx0XHRcImRhdGVcIlxuXHRcdF0sXG5cdFx0anNvbjogW1wianNvblwiLCBcImpzb25iXCJdXG5cdH0sXG5cdG15c3FsOiB7XG5cdFx0c3RyaW5nOiBbXG5cdFx0XHRcInZhcmNoYXJcIixcblx0XHRcdFwidGV4dFwiLFxuXHRcdFx0XCJ1dWlkXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnRlZ2VyXCIsXG5cdFx0XHRcImludFwiLFxuXHRcdFx0XCJiaWdpbnRcIixcblx0XHRcdFwic21hbGxpbnRcIixcblx0XHRcdFwiZGVjaW1hbFwiLFxuXHRcdFx0XCJmbG9hdFwiLFxuXHRcdFx0XCJkb3VibGVcIlxuXHRcdF0sXG5cdFx0Ym9vbGVhbjogW1wiYm9vbGVhblwiLCBcInRpbnlpbnRcIl0sXG5cdFx0ZGF0ZTogW1xuXHRcdFx0XCJ0aW1lc3RhbXBcIixcblx0XHRcdFwiZGF0ZXRpbWVcIixcblx0XHRcdFwiZGF0ZVwiXG5cdFx0XSxcblx0XHRqc29uOiBbXCJqc29uXCJdXG5cdH0sXG5cdHNxbGl0ZToge1xuXHRcdHN0cmluZzogW1wiVEVYVFwiXSxcblx0XHRudW1iZXI6IFtcIklOVEVHRVJcIiwgXCJSRUFMXCJdLFxuXHRcdGJvb2xlYW46IFtcIklOVEVHRVJcIiwgXCJCT09MRUFOXCJdLFxuXHRcdGRhdGU6IFtcIkRBVEVcIiwgXCJJTlRFR0VSXCJdLFxuXHRcdGpzb246IFtcIlRFWFRcIl1cblx0fSxcblx0bXNzcWw6IHtcblx0XHRzdHJpbmc6IFtcblx0XHRcdFwidmFyY2hhclwiLFxuXHRcdFx0XCJudmFyY2hhclwiLFxuXHRcdFx0XCJ1bmlxdWVpZGVudGlmaWVyXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnRcIixcblx0XHRcdFwiYmlnaW50XCIsXG5cdFx0XHRcInNtYWxsaW50XCIsXG5cdFx0XHRcImRlY2ltYWxcIixcblx0XHRcdFwiZmxvYXRcIixcblx0XHRcdFwiZG91YmxlXCJcblx0XHRdLFxuXHRcdGJvb2xlYW46IFtcImJpdFwiLCBcInNtYWxsaW50XCJdLFxuXHRcdGRhdGU6IFtcblx0XHRcdFwiZGF0ZXRpbWUyXCIsXG5cdFx0XHRcImRhdGVcIixcblx0XHRcdFwiZGF0ZXRpbWVcIlxuXHRcdF0sXG5cdFx0anNvbjogW1widmFyY2hhclwiLCBcIm52YXJjaGFyXCJdXG5cdH1cbn07XG5mdW5jdGlvbiBtYXRjaFR5cGUoY29sdW1uRGF0YVR5cGUsIGZpZWxkVHlwZSwgZGJUeXBlKSB7XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZSh0eXBlKSB7XG5cdFx0cmV0dXJuIHR5cGUudG9Mb3dlckNhc2UoKS5zcGxpdChcIihcIilbMF0udHJpbSgpO1xuXHR9XG5cdGlmIChmaWVsZFR5cGUgPT09IFwic3RyaW5nW11cIiB8fCBmaWVsZFR5cGUgPT09IFwibnVtYmVyW11cIikgcmV0dXJuIGNvbHVtbkRhdGFUeXBlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJqc29uXCIpO1xuXHRjb25zdCB0eXBlcyA9IG1hcFtkYlR5cGVdO1xuXHRyZXR1cm4gKEFycmF5LmlzQXJyYXkoZmllbGRUeXBlKSA/IHR5cGVzW1wic3RyaW5nXCJdLm1hcCgodCkgPT4gdC50b0xvd2VyQ2FzZSgpKSA6IHR5cGVzW2ZpZWxkVHlwZV0ubWFwKCh0KSA9PiB0LnRvTG93ZXJDYXNlKCkpKS5pbmNsdWRlcyhub3JtYWxpemUoY29sdW1uRGF0YVR5cGUpKTtcbn1cbi8qKlxuKiBHZXQgdGhlIGN1cnJlbnQgUG9zdGdyZVNRTCBzY2hlbWEgKHNlYXJjaF9wYXRoKSBmb3IgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiogUmV0dXJucyB0aGUgZmlyc3Qgc2NoZW1hIGluIHRoZSBzZWFyY2hfcGF0aCwgZGVmYXVsdGluZyB0byAncHVibGljJyBpZiBub3QgZm91bmRcbiovXG5hc3luYyBmdW5jdGlvbiBnZXRQb3N0Z3Jlc1NjaGVtYShkYikge1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBTSE9XIHNlYXJjaF9wYXRoYC5leGVjdXRlKGRiKTtcblx0XHRpZiAocmVzdWx0LnJvd3NbMF0/LnNlYXJjaF9wYXRoKSByZXR1cm4gcmVzdWx0LnJvd3NbMF0uc2VhcmNoX3BhdGguc3BsaXQoXCIsXCIpLm1hcCgocykgPT4gcy50cmltKCkpLm1hcCgocykgPT4gcy5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csIFwiXCIpKS5maWx0ZXIoKHMpID0+ICFzLnN0YXJ0c1dpdGgoXCIkXCIpKVswXSB8fCBcInB1YmxpY1wiO1xuXHR9IGNhdGNoIHt9XG5cdHJldHVybiBcInB1YmxpY1wiO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0TWlncmF0aW9ucyhjb25maWcpIHtcblx0Y29uc3QgYmV0dGVyQXV0aFNjaGVtYSA9IGdldFNjaGVtYShjb25maWcpO1xuXHRjb25zdCBsb2dnZXIkMSA9IGNyZWF0ZUxvZ2dlcihjb25maWcubG9nZ2VyKTtcblx0bGV0IHsga3lzZWx5OiBkYiwgZGF0YWJhc2VUeXBlOiBkYlR5cGUgfSA9IGF3YWl0IGNyZWF0ZUt5c2VseUFkYXB0ZXIoY29uZmlnKTtcblx0aWYgKCFkYlR5cGUpIHtcblx0XHRsb2dnZXIkMS53YXJuKFwiQ291bGQgbm90IGRldGVybWluZSBkYXRhYmFzZSB0eXBlLCBkZWZhdWx0aW5nIHRvIHNxbGl0ZS4gUGxlYXNlIHByb3ZpZGUgYSB0eXBlIGluIHRoZSBkYXRhYmFzZSBvcHRpb25zIHRvIGF2b2lkIHRoaXMuXCIpO1xuXHRcdGRiVHlwZSA9IFwic3FsaXRlXCI7XG5cdH1cblx0aWYgKCFkYikge1xuXHRcdGxvZ2dlciQxLmVycm9yKFwiT25seSBreXNlbHkgYWRhcHRlciBpcyBzdXBwb3J0ZWQgZm9yIG1pZ3JhdGlvbnMuIFlvdSBjYW4gdXNlIGBnZW5lcmF0ZWAgY29tbWFuZCB0byBnZW5lcmF0ZSB0aGUgc2NoZW1hLCBpZiB5b3UncmUgdXNpbmcgYSBkaWZmZXJlbnQgYWRhcHRlci5cIik7XG5cdFx0cHJvY2Vzcy5leGl0KDEpO1xuXHR9XG5cdGxldCBjdXJyZW50U2NoZW1hID0gXCJwdWJsaWNcIjtcblx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSB7XG5cdFx0Y3VycmVudFNjaGVtYSA9IGF3YWl0IGdldFBvc3RncmVzU2NoZW1hKGRiKTtcblx0XHRsb2dnZXIkMS5kZWJ1ZyhgUG9zdGdyZVNRTCBtaWdyYXRpb246IFVzaW5nIHNjaGVtYSAnJHtjdXJyZW50U2NoZW1hfScgKGZyb20gc2VhcmNoX3BhdGgpYCk7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICghKGF3YWl0IHNxbGBcblx0XHRcdFx0U0VMRUNUIHNjaGVtYV9uYW1lIFxuXHRcdFx0XHRGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5zY2hlbWF0YSBcblx0XHRcdFx0V0hFUkUgc2NoZW1hX25hbWUgPSAke2N1cnJlbnRTY2hlbWF9XG5cdFx0XHRgLmV4ZWN1dGUoZGIpKS5yb3dzWzBdKSBsb2dnZXIkMS53YXJuKGBTY2hlbWEgJyR7Y3VycmVudFNjaGVtYX0nIGRvZXMgbm90IGV4aXN0LiBUYWJsZXMgd2lsbCBiZSBpbnNwZWN0ZWQgZnJvbSBhdmFpbGFibGUgc2NoZW1hcy4gQ29uc2lkZXIgY3JlYXRpbmcgdGhlIHNjaGVtYSBmaXJzdCBvciBjaGVja2luZyB5b3VyIGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24uYCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGxvZ2dlciQxLmRlYnVnKGBDb3VsZCBub3QgdmVyaWZ5IHNjaGVtYSBleGlzdGVuY2U6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHRcdH1cblx0fVxuXHRjb25zdCBhbGxUYWJsZU1ldGFkYXRhID0gYXdhaXQgZGIuaW50cm9zcGVjdGlvbi5nZXRUYWJsZXMoKTtcblx0bGV0IHRhYmxlTWV0YWRhdGEgPSBhbGxUYWJsZU1ldGFkYXRhO1xuXHRpZiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIpIHRyeSB7XG5cdFx0Y29uc3QgdGFibGVzSW5TY2hlbWEgPSBhd2FpdCBzcWxgXG5cdFx0XHRcdFNFTEVDVCB0YWJsZV9uYW1lIFxuXHRcdFx0XHRGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgXG5cdFx0XHRcdFdIRVJFIHRhYmxlX3NjaGVtYSA9ICR7Y3VycmVudFNjaGVtYX1cblx0XHRcdFx0QU5EIHRhYmxlX3R5cGUgPSAnQkFTRSBUQUJMRSdcblx0XHRcdGAuZXhlY3V0ZShkYik7XG5cdFx0Y29uc3QgdGFibGVOYW1lc0luU2NoZW1hID0gbmV3IFNldCh0YWJsZXNJblNjaGVtYS5yb3dzLm1hcCgocm93KSA9PiByb3cudGFibGVfbmFtZSkpO1xuXHRcdHRhYmxlTWV0YWRhdGEgPSBhbGxUYWJsZU1ldGFkYXRhLmZpbHRlcigodGFibGUpID0+IHRhYmxlLnNjaGVtYSA9PT0gY3VycmVudFNjaGVtYSAmJiB0YWJsZU5hbWVzSW5TY2hlbWEuaGFzKHRhYmxlLm5hbWUpKTtcblx0XHRsb2dnZXIkMS5kZWJ1ZyhgRm91bmQgJHt0YWJsZU1ldGFkYXRhLmxlbmd0aH0gdGFibGUocykgaW4gc2NoZW1hICcke2N1cnJlbnRTY2hlbWF9JzogJHt0YWJsZU1ldGFkYXRhLm1hcCgodCkgPT4gdC5uYW1lKS5qb2luKFwiLCBcIikgfHwgXCIobm9uZSlcIn1gKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRsb2dnZXIkMS53YXJuKGBDb3VsZCBub3QgZmlsdGVyIHRhYmxlcyBieSBzY2hlbWEuIFVzaW5nIGFsbCBkaXNjb3ZlcmVkIHRhYmxlcy4gRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHR9XG5cdGNvbnN0IHRvQmVDcmVhdGVkID0gW107XG5cdGNvbnN0IHRvQmVBZGRlZCA9IFtdO1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhiZXR0ZXJBdXRoU2NoZW1hKSkge1xuXHRcdGNvbnN0IHRhYmxlID0gdGFibGVNZXRhZGF0YS5maW5kKCh0KSA9PiB0Lm5hbWUgPT09IGtleSk7XG5cdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0Y29uc3QgdEluZGV4ID0gdG9CZUNyZWF0ZWQuZmluZEluZGV4KCh0KSA9PiB0LnRhYmxlID09PSBrZXkpO1xuXHRcdFx0Y29uc3QgdGFibGVEYXRhID0ge1xuXHRcdFx0XHR0YWJsZToga2V5LFxuXHRcdFx0XHRmaWVsZHM6IHZhbHVlLmZpZWxkcyxcblx0XHRcdFx0b3JkZXI6IHZhbHVlLm9yZGVyIHx8IEluZmluaXR5XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgaW5zZXJ0SW5kZXggPSB0b0JlQ3JlYXRlZC5maW5kSW5kZXgoKHQpID0+ICh0Lm9yZGVyIHx8IEluZmluaXR5KSA+IHRhYmxlRGF0YS5vcmRlcik7XG5cdFx0XHRpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSBpZiAodEluZGV4ID09PSAtMSkgdG9CZUNyZWF0ZWQucHVzaCh0YWJsZURhdGEpO1xuXHRcdFx0ZWxzZSB0b0JlQ3JlYXRlZFt0SW5kZXhdLmZpZWxkcyA9IHtcblx0XHRcdFx0Li4udG9CZUNyZWF0ZWRbdEluZGV4XS5maWVsZHMsXG5cdFx0XHRcdC4uLnZhbHVlLmZpZWxkc1xuXHRcdFx0fTtcblx0XHRcdGVsc2UgdG9CZUNyZWF0ZWQuc3BsaWNlKGluc2VydEluZGV4LCAwLCB0YWJsZURhdGEpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGNvbnN0IHRvQmVBZGRlZEZpZWxkcyA9IHt9O1xuXHRcdGZvciAoY29uc3QgW2ZpZWxkTmFtZSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlLmZpZWxkcykpIHtcblx0XHRcdGNvbnN0IGNvbHVtbiA9IHRhYmxlLmNvbHVtbnMuZmluZCgoYykgPT4gYy5uYW1lID09PSBmaWVsZE5hbWUpO1xuXHRcdFx0aWYgKCFjb2x1bW4pIHtcblx0XHRcdFx0dG9CZUFkZGVkRmllbGRzW2ZpZWxkTmFtZV0gPSBmaWVsZDtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWF0Y2hUeXBlKGNvbHVtbi5kYXRhVHlwZSwgZmllbGQudHlwZSwgZGJUeXBlKSkgY29udGludWU7XG5cdFx0XHRlbHNlIGxvZ2dlciQxLndhcm4oYEZpZWxkICR7ZmllbGROYW1lfSBpbiB0YWJsZSAke2tleX0gaGFzIGEgZGlmZmVyZW50IHR5cGUgaW4gdGhlIGRhdGFiYXNlLiBFeHBlY3RlZCAke2ZpZWxkLnR5cGV9IGJ1dCBnb3QgJHtjb2x1bW4uZGF0YVR5cGV9LmApO1xuXHRcdH1cblx0XHRpZiAoT2JqZWN0LmtleXModG9CZUFkZGVkRmllbGRzKS5sZW5ndGggPiAwKSB0b0JlQWRkZWQucHVzaCh7XG5cdFx0XHR0YWJsZToga2V5LFxuXHRcdFx0ZmllbGRzOiB0b0JlQWRkZWRGaWVsZHMsXG5cdFx0XHRvcmRlcjogdmFsdWUub3JkZXIgfHwgSW5maW5pdHlcblx0XHR9KTtcblx0fVxuXHRjb25zdCBtaWdyYXRpb25zID0gW107XG5cdGNvbnN0IHVzZVVVSURzID0gY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJ1dWlkXCI7XG5cdGNvbnN0IHVzZU51bWJlcklkID0gY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIjtcblx0ZnVuY3Rpb24gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKSB7XG5cdFx0Y29uc3QgdHlwZSA9IGZpZWxkLnR5cGU7XG5cdFx0Y29uc3QgcHJvdmlkZXIgPSBkYlR5cGUgfHwgXCJzcWxpdGVcIjtcblx0XHRjb25zdCB0eXBlTWFwID0ge1xuXHRcdFx0c3RyaW5nOiB7XG5cdFx0XHRcdHNxbGl0ZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBvc3RncmVzOiBcInRleHRcIixcblx0XHRcdFx0bXlzcWw6IGZpZWxkLnVuaXF1ZSA/IFwidmFyY2hhcigyNTUpXCIgOiBmaWVsZC5yZWZlcmVuY2VzID8gXCJ2YXJjaGFyKDM2KVwiIDogZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQuaW5kZXggPyBcInZhcmNoYXIoMjU1KVwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG1zc3FsOiBmaWVsZC51bmlxdWUgfHwgZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQucmVmZXJlbmNlcyA/IFwidmFyY2hhcigzNilcIiA6IFwidmFyY2hhcig4MDAwKVwiXG5cdFx0XHR9LFxuXHRcdFx0Ym9vbGVhbjoge1xuXHRcdFx0XHRzcWxpdGU6IFwiaW50ZWdlclwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJib29sZWFuXCIsXG5cdFx0XHRcdG15c3FsOiBcImJvb2xlYW5cIixcblx0XHRcdFx0bXNzcWw6IFwic21hbGxpbnRcIlxuXHRcdFx0fSxcblx0XHRcdG51bWJlcjoge1xuXHRcdFx0XHRzcWxpdGU6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0cG9zdGdyZXM6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0bXlzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0bXNzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIlxuXHRcdFx0fSxcblx0XHRcdGRhdGU6IHtcblx0XHRcdFx0c3FsaXRlOiBcImRhdGVcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwidGltZXN0YW1wdHpcIixcblx0XHRcdFx0bXlzcWw6IFwidGltZXN0YW1wKDMpXCIsXG5cdFx0XHRcdG1zc3FsOiBzcWxgZGF0ZXRpbWUyKDMpYFxuXHRcdFx0fSxcblx0XHRcdGpzb246IHtcblx0XHRcdFx0c3FsaXRlOiBcInRleHRcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwianNvbmJcIixcblx0XHRcdFx0bXlzcWw6IFwianNvblwiLFxuXHRcdFx0XHRtc3NxbDogXCJ2YXJjaGFyKDgwMDApXCJcblx0XHRcdH0sXG5cdFx0XHRpZDoge1xuXHRcdFx0XHRwb3N0Z3JlczogdXNlTnVtYmVySWQgPyBzcWxgaW50ZWdlciBHRU5FUkFURUQgQlkgREVGQVVMVCBBUyBJREVOVElUWWAgOiB1c2VVVUlEcyA/IFwidXVpZFwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG15c3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdG1zc3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdHNxbGl0ZTogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IFwidGV4dFwiXG5cdFx0XHR9LFxuXHRcdFx0Zm9yZWlnbktleUlkOiB7XG5cdFx0XHRcdHBvc3RncmVzOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInV1aWRcIiA6IFwidGV4dFwiLFxuXHRcdFx0XHRteXNxbDogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IHVzZVVVSURzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuXHRcdFx0XHRtc3NxbDogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IHVzZVVVSURzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuXHRcdFx0XHRzcWxpdGU6IHVzZU51bWJlcklkID8gXCJpbnRlZ2VyXCIgOiBcInRleHRcIlxuXHRcdFx0fSxcblx0XHRcdFwic3RyaW5nW11cIjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fSxcblx0XHRcdFwibnVtYmVyW11cIjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKGZpZWxkTmFtZSA9PT0gXCJpZFwiIHx8IGZpZWxkLnJlZmVyZW5jZXM/LmZpZWxkID09PSBcImlkXCIpIHtcblx0XHRcdGlmIChmaWVsZE5hbWUgPT09IFwiaWRcIikgcmV0dXJuIHR5cGVNYXAuaWRbcHJvdmlkZXJdO1xuXHRcdFx0cmV0dXJuIHR5cGVNYXAuZm9yZWlnbktleUlkW3Byb3ZpZGVyXTtcblx0XHR9XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHJldHVybiBcInRleHRcIjtcblx0XHRpZiAoISh0eXBlIGluIHR5cGVNYXApKSB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGZpZWxkIHR5cGUgJyR7U3RyaW5nKHR5cGUpfScgZm9yIGZpZWxkICcke2ZpZWxkTmFtZX0nLiBBbGxvd2VkIHR5cGVzIGFyZTogc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIGRhdGUsIHN0cmluZ1tdLCBudW1iZXJbXS4gSWYgeW91IG5lZWQgdG8gc3RvcmUgc3RydWN0dXJlZCBkYXRhLCBzdG9yZSBpdCBhcyBhIEpTT04gc3RyaW5nICh0eXBlOiBcInN0cmluZ1wiKSBvciBzcGxpdCBpdCBpbnRvIHByaW1pdGl2ZSBmaWVsZHMuIFNlZSBodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL2FkdmFuY2VkL3NjaGVtYSNhZGRpdGlvbmFsLWZpZWxkc2ApO1xuXHRcdHJldHVybiB0eXBlTWFwW3R5cGVdW3Byb3ZpZGVyXTtcblx0fVxuXHRjb25zdCBnZXRNb2RlbE5hbWUgPSBpbml0R2V0TW9kZWxOYW1lKHtcblx0XHRzY2hlbWE6IGdldEF1dGhUYWJsZXMoY29uZmlnKSxcblx0XHR1c2VQbHVyYWw6IGZhbHNlXG5cdH0pO1xuXHRjb25zdCBnZXRGaWVsZE5hbWUgPSBpbml0R2V0RmllbGROYW1lKHtcblx0XHRzY2hlbWE6IGdldEF1dGhUYWJsZXMoY29uZmlnKSxcblx0XHR1c2VQbHVyYWw6IGZhbHNlXG5cdH0pO1xuXHRmdW5jdGlvbiBnZXRSZWZlcmVuY2VQYXRoKG1vZGVsLCBmaWVsZCkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYCR7Z2V0TW9kZWxOYW1lKG1vZGVsKX0uJHtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZmllbGRcblx0XHRcdH0pfWA7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gYCR7bW9kZWx9LiR7ZmllbGR9YDtcblx0XHR9XG5cdH1cblx0aWYgKHRvQmVBZGRlZC5sZW5ndGgpIGZvciAoY29uc3QgdGFibGUgb2YgdG9CZUFkZGVkKSBmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG5cdFx0Y29uc3QgdHlwZSA9IGdldFR5cGUoZmllbGQsIGZpZWxkTmFtZSk7XG5cdFx0Y29uc3QgYnVpbGRlciA9IGRiLnNjaGVtYS5hbHRlclRhYmxlKHRhYmxlLnRhYmxlKTtcblx0XHRpZiAoZmllbGQuaW5kZXgpIHtcblx0XHRcdGNvbnN0IGluZGV4ID0gZGIuc2NoZW1hLmFsdGVyVGFibGUodGFibGUudGFibGUpLmFkZEluZGV4KGAke3RhYmxlLnRhYmxlfV8ke2ZpZWxkTmFtZX1faWR4YCk7XG5cdFx0XHRtaWdyYXRpb25zLnB1c2goaW5kZXgpO1xuXHRcdH1cblx0XHRjb25zdCBidWlsdCA9IGJ1aWxkZXIuYWRkQ29sdW1uKGZpZWxkTmFtZSwgdHlwZSwgKGNvbCkgPT4ge1xuXHRcdFx0Y29sID0gZmllbGQucmVxdWlyZWQgIT09IGZhbHNlID8gY29sLm5vdE51bGwoKSA6IGNvbDtcblx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSBjb2wgPSBjb2wucmVmZXJlbmNlcyhnZXRSZWZlcmVuY2VQYXRoKGZpZWxkLnJlZmVyZW5jZXMubW9kZWwsIGZpZWxkLnJlZmVyZW5jZXMuZmllbGQpKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcblx0XHRcdGlmIChmaWVsZC51bmlxdWUpIGNvbCA9IGNvbC51bmlxdWUoKTtcblx0XHRcdGlmIChmaWVsZC50eXBlID09PSBcImRhdGVcIiAmJiB0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiIHx8IGRiVHlwZSA9PT0gXCJteXNxbFwiIHx8IGRiVHlwZSA9PT0gXCJtc3NxbFwiKSkgaWYgKGRiVHlwZSA9PT0gXCJteXNxbFwiKSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUCgzKWApO1xuXHRcdFx0ZWxzZSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUGApO1xuXHRcdFx0cmV0dXJuIGNvbDtcblx0XHR9KTtcblx0XHRtaWdyYXRpb25zLnB1c2goYnVpbHQpO1xuXHR9XG5cdGNvbnN0IHRvQmVJbmRleGVkID0gW107XG5cdGlmIChjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCkgbG9nZ2VyJDEud2FybihcImB1c2VOdW1iZXJJZGAgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBgZ2VuZXJhdGVJZGAgd2l0aCBgc2VyaWFsYCBpbnN0ZWFkLlwiKTtcblx0aWYgKHRvQmVDcmVhdGVkLmxlbmd0aCkgZm9yIChjb25zdCB0YWJsZSBvZiB0b0JlQ3JlYXRlZCkge1xuXHRcdGNvbnN0IGlkVHlwZSA9IGdldFR5cGUoeyB0eXBlOiB1c2VOdW1iZXJJZCA/IFwibnVtYmVyXCIgOiBcInN0cmluZ1wiIH0sIFwiaWRcIik7XG5cdFx0bGV0IGRiVCA9IGRiLnNjaGVtYS5jcmVhdGVUYWJsZSh0YWJsZS50YWJsZSkuYWRkQ29sdW1uKFwiaWRcIiwgaWRUeXBlLCAoY29sKSA9PiB7XG5cdFx0XHRpZiAodXNlTnVtYmVySWQpIHtcblx0XHRcdFx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdGVsc2UgaWYgKGRiVHlwZSA9PT0gXCJzcWxpdGVcIikgcmV0dXJuIGNvbC5wcmltYXJ5S2V5KCkubm90TnVsbCgpO1xuXHRcdFx0XHRlbHNlIGlmIChkYlR5cGUgPT09IFwibXNzcWxcIikgcmV0dXJuIGNvbC5pZGVudGl0eSgpLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdHJldHVybiBjb2wuYXV0b0luY3JlbWVudCgpLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodXNlVVVJRHMpIHtcblx0XHRcdFx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5kZWZhdWx0VG8oc3FsYHBnX2NhdGFsb2cuZ2VuX3JhbmRvbV91dWlkKClgKS5ub3ROdWxsKCk7XG5cdFx0XHRcdHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHR9KTtcblx0XHRmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG5cdFx0XHRjb25zdCB0eXBlID0gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKTtcblx0XHRcdGRiVCA9IGRiVC5hZGRDb2x1bW4oZmllbGROYW1lLCB0eXBlLCAoY29sKSA9PiB7XG5cdFx0XHRcdGNvbCA9IGZpZWxkLnJlcXVpcmVkICE9PSBmYWxzZSA/IGNvbC5ub3ROdWxsKCkgOiBjb2w7XG5cdFx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSBjb2wgPSBjb2wucmVmZXJlbmNlcyhnZXRSZWZlcmVuY2VQYXRoKGZpZWxkLnJlZmVyZW5jZXMubW9kZWwsIGZpZWxkLnJlZmVyZW5jZXMuZmllbGQpKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcblx0XHRcdFx0aWYgKGZpZWxkLnVuaXF1ZSkgY29sID0gY29sLnVuaXF1ZSgpO1xuXHRcdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gXCJkYXRlXCIgJiYgdHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiICYmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIiB8fCBkYlR5cGUgPT09IFwibXlzcWxcIiB8fCBkYlR5cGUgPT09IFwibXNzcWxcIikpIGlmIChkYlR5cGUgPT09IFwibXlzcWxcIikgY29sID0gY29sLmRlZmF1bHRUbyhzcWxgQ1VSUkVOVF9USU1FU1RBTVAoMylgKTtcblx0XHRcdFx0ZWxzZSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUGApO1xuXHRcdFx0XHRyZXR1cm4gY29sO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZmllbGQuaW5kZXgpIHtcblx0XHRcdFx0Y29uc3QgYnVpbGRlciA9IGRiLnNjaGVtYS5jcmVhdGVJbmRleChgJHt0YWJsZS50YWJsZX1fJHtmaWVsZE5hbWV9XyR7ZmllbGQudW5pcXVlID8gXCJ1aWR4XCIgOiBcImlkeFwifWApLm9uKHRhYmxlLnRhYmxlKS5jb2x1bW5zKFtmaWVsZE5hbWVdKTtcblx0XHRcdFx0dG9CZUluZGV4ZWQucHVzaChmaWVsZC51bmlxdWUgPyBidWlsZGVyLnVuaXF1ZSgpIDogYnVpbGRlcik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG1pZ3JhdGlvbnMucHVzaChkYlQpO1xuXHR9XG5cdGlmICh0b0JlSW5kZXhlZC5sZW5ndGgpIGZvciAoY29uc3QgaW5kZXggb2YgdG9CZUluZGV4ZWQpIG1pZ3JhdGlvbnMucHVzaChpbmRleCk7XG5cdGFzeW5jIGZ1bmN0aW9uIHJ1bk1pZ3JhdGlvbnMoKSB7XG5cdFx0Zm9yIChjb25zdCBtaWdyYXRpb24gb2YgbWlncmF0aW9ucykgYXdhaXQgbWlncmF0aW9uLmV4ZWN1dGUoKTtcblx0fVxuXHRhc3luYyBmdW5jdGlvbiBjb21waWxlTWlncmF0aW9ucygpIHtcblx0XHRyZXR1cm4gbWlncmF0aW9ucy5tYXAoKG0pID0+IG0uY29tcGlsZSgpLnNxbCkuam9pbihcIjtcXG5cXG5cIikgKyBcIjtcIjtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHRvQmVDcmVhdGVkLFxuXHRcdHRvQmVBZGRlZCxcblx0XHRydW5NaWdyYXRpb25zLFxuXHRcdGNvbXBpbGVNaWdyYXRpb25zXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0TWlncmF0aW9ucywgbWF0Y2hUeXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtbWlncmF0aW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSchema: () => (/* binding */ getSchema)\n/* harmony export */ });\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\");\n\n\n//#region src/db/get-schema.ts\nfunction getSchema(config) {\n\tconst tables = (0, _index_mjs__WEBPACK_IMPORTED_MODULE_0__.db_exports.getAuthTables)(config);\n\tconst schema = {};\n\tfor (const key in tables) {\n\t\tconst table = tables[key];\n\t\tconst fields = table.fields;\n\t\tconst actualFields = {};\n\t\tObject.entries(fields).forEach(([key$1, field]) => {\n\t\t\tactualFields[field.fieldName || key$1] = field;\n\t\t\tif (field.references) {\n\t\t\t\tconst refTable = tables[field.references.model];\n\t\t\t\tif (refTable) actualFields[field.fieldName || key$1].references = {\n\t\t\t\t\t...field.references,\n\t\t\t\t\tmodel: refTable.modelName,\n\t\t\t\t\tfield: field.references.field\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tif (schema[table.modelName]) {\n\t\t\tschema[table.modelName].fields = {\n\t\t\t\t...schema[table.modelName].fields,\n\t\t\t\t...actualFields\n\t\t\t};\n\t\t\tcontinue;\n\t\t}\n\t\tschema[table.modelName] = {\n\t\t\tfields: actualFields,\n\t\t\torder: table.order || Infinity\n\t\t};\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2dldC1zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlDOztBQUV6QztBQUNBO0FBQ0Esb0JBQW9CLGtEQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3FCO0FBQ3JCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxnZXQtc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYl9leHBvcnRzIH0gZnJvbSBcIi4vaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvZ2V0LXNjaGVtYS50c1xuZnVuY3Rpb24gZ2V0U2NoZW1hKGNvbmZpZykge1xuXHRjb25zdCB0YWJsZXMgPSAoMCwgZGJfZXhwb3J0cy5nZXRBdXRoVGFibGVzKShjb25maWcpO1xuXHRjb25zdCBzY2hlbWEgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gdGFibGVzKSB7XG5cdFx0Y29uc3QgdGFibGUgPSB0YWJsZXNba2V5XTtcblx0XHRjb25zdCBmaWVsZHMgPSB0YWJsZS5maWVsZHM7XG5cdFx0Y29uc3QgYWN0dWFsRmllbGRzID0ge307XG5cdFx0T2JqZWN0LmVudHJpZXMoZmllbGRzKS5mb3JFYWNoKChba2V5JDEsIGZpZWxkXSkgPT4ge1xuXHRcdFx0YWN0dWFsRmllbGRzW2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXkkMV0gPSBmaWVsZDtcblx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSB7XG5cdFx0XHRcdGNvbnN0IHJlZlRhYmxlID0gdGFibGVzW2ZpZWxkLnJlZmVyZW5jZXMubW9kZWxdO1xuXHRcdFx0XHRpZiAocmVmVGFibGUpIGFjdHVhbEZpZWxkc1tmaWVsZC5maWVsZE5hbWUgfHwga2V5JDFdLnJlZmVyZW5jZXMgPSB7XG5cdFx0XHRcdFx0Li4uZmllbGQucmVmZXJlbmNlcyxcblx0XHRcdFx0XHRtb2RlbDogcmVmVGFibGUubW9kZWxOYW1lLFxuXHRcdFx0XHRcdGZpZWxkOiBmaWVsZC5yZWZlcmVuY2VzLmZpZWxkXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdKSB7XG5cdFx0XHRzY2hlbWFbdGFibGUubW9kZWxOYW1lXS5maWVsZHMgPSB7XG5cdFx0XHRcdC4uLnNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdLmZpZWxkcyxcblx0XHRcdFx0Li4uYWN0dWFsRmllbGRzXG5cdFx0XHR9O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdID0ge1xuXHRcdFx0ZmllbGRzOiBhY3R1YWxGaWVsZHMsXG5cdFx0XHRvcmRlcjogdGFibGUub3JkZXIgfHwgSW5maW5pdHlcblx0XHR9O1xuXHR9XG5cdHJldHVybiBzY2hlbWE7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0U2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtc2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.accountSchema),\n/* harmony export */   convertFromDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB),\n/* harmony export */   convertToDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.coreSchema),\n/* harmony export */   createFieldAttribute: () => (/* reexport safe */ _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute),\n/* harmony export */   createInternalAdapter: () => (/* reexport safe */ _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter),\n/* harmony export */   db_exports: () => (/* binding */ db_exports),\n/* harmony export */   getAdapter: () => (/* reexport safe */ _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.getAuthTables),\n/* harmony export */   getBaseAdapter: () => (/* reexport safe */ _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter),\n/* harmony export */   getMigrations: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations),\n/* harmony export */   getSchema: () => (/* reexport safe */ _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema),\n/* harmony export */   getWithHooks: () => (/* reexport safe */ _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks),\n/* harmony export */   matchType: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType),\n/* harmony export */   mergeSchema: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData),\n/* harmony export */   parseSessionInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.rateLimitSchema),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.sessionSchema),\n/* harmony export */   toZodSchema: () => (/* reexport safe */ _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.userSchema),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.verificationSchema)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\");\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adapter-kysely.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _field_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./field.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field.mjs\");\n/* harmony import */ var _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./field-converter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/field-converter.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./internal-adapter.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./to-zod.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./get-schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./get-migration.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/db/index.ts\nvar db_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__export)({\n\tconvertFromDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB,\n\tconvertToDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB,\n\tcreateFieldAttribute: () => _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute,\n\tcreateInternalAdapter: () => _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter,\n\tgetAdapter: () => _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter,\n\tgetBaseAdapter: () => _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter,\n\tgetMigrations: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations,\n\tgetSchema: () => _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema,\n\tgetWithHooks: () => _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks,\n\tmatchType: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType,\n\tmergeSchema: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema,\n\tparseAccountInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput,\n\tparseAccountOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput,\n\tparseAdditionalUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput,\n\tparseInputData: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData,\n\tparseSessionInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput,\n\tparseSessionOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput,\n\tparseUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput,\n\tparseUserOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput,\n\ttoZodSchema: () => _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema\n});\n\n(0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__reExport)(db_exports, _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__);\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ3BCO0FBQ0Y7QUFDQztBQUNnQjtBQUNpSTtBQUNwSjtBQUNlO0FBQ3BCO0FBQ0U7QUFDa0I7O0FBRTNCOztBQUVwQztBQUNBLGlDQUFpQyx1RUFBUTtBQUN6QyxzQkFBc0IsK0RBQWE7QUFDbkMsb0JBQW9CLDZEQUFXO0FBQy9CLDZCQUE2Qiw0REFBb0I7QUFDakQsOEJBQThCLHdFQUFxQjtBQUNuRCxtQkFBbUIsMkRBQVU7QUFDN0IsdUJBQXVCLDZEQUFjO0FBQ3JDLHNCQUFzQiw4REFBYTtBQUNuQyxrQkFBa0Isc0RBQVM7QUFDM0IscUJBQXFCLHlEQUFZO0FBQ2pDLGtCQUFrQiwwREFBUztBQUMzQixvQkFBb0Isb0RBQVc7QUFDL0IsMEJBQTBCLDBEQUFpQjtBQUMzQywyQkFBMkIsMkRBQWtCO0FBQzdDLGlDQUFpQyxpRUFBd0I7QUFDekQsdUJBQXVCLHVEQUFjO0FBQ3JDLDBCQUEwQiwwREFBaUI7QUFDM0MsMkJBQTJCLDJEQUFrQjtBQUM3Qyx1QkFBdUIsdURBQWM7QUFDckMsd0JBQXdCLHdEQUFlO0FBQ3ZDLG9CQUFvQixvREFBVztBQUMvQixDQUFDO0FBQ29FO0FBQ3JFLHlFQUFVLGFBQWEsa0RBQTRCOztBQUVuRDtBQUNpVztBQUNqVyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0LCBfX3JlRXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlQWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXItYmFzZS5tanNcIjtcbmltcG9ydCB7IGdldEFkYXB0ZXIgfSBmcm9tIFwiLi9hZGFwdGVyLWt5c2VseS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUZpZWxkQXR0cmlidXRlIH0gZnJvbSBcIi4vZmllbGQubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiB9IGZyb20gXCIuL2ZpZWxkLWNvbnZlcnRlci5tanNcIjtcbmltcG9ydCB7IG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2l0aEhvb2tzIH0gZnJvbSBcIi4vd2l0aC1ob29rcy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUludGVybmFsQWRhcHRlciB9IGZyb20gXCIuL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuL3RvLXpvZC5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYSB9IGZyb20gXCIuL2dldC1zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRNaWdyYXRpb25zLCBtYXRjaFR5cGUgfSBmcm9tIFwiLi9nZXQtbWlncmF0aW9uLm1qc1wiO1xuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIlxuXG4vLyNyZWdpb24gc3JjL2RiL2luZGV4LnRzXG52YXIgZGJfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdGNvbnZlcnRGcm9tREI6ICgpID0+IGNvbnZlcnRGcm9tREIsXG5cdGNvbnZlcnRUb0RCOiAoKSA9PiBjb252ZXJ0VG9EQixcblx0Y3JlYXRlRmllbGRBdHRyaWJ1dGU6ICgpID0+IGNyZWF0ZUZpZWxkQXR0cmlidXRlLFxuXHRjcmVhdGVJbnRlcm5hbEFkYXB0ZXI6ICgpID0+IGNyZWF0ZUludGVybmFsQWRhcHRlcixcblx0Z2V0QWRhcHRlcjogKCkgPT4gZ2V0QWRhcHRlcixcblx0Z2V0QmFzZUFkYXB0ZXI6ICgpID0+IGdldEJhc2VBZGFwdGVyLFxuXHRnZXRNaWdyYXRpb25zOiAoKSA9PiBnZXRNaWdyYXRpb25zLFxuXHRnZXRTY2hlbWE6ICgpID0+IGdldFNjaGVtYSxcblx0Z2V0V2l0aEhvb2tzOiAoKSA9PiBnZXRXaXRoSG9va3MsXG5cdG1hdGNoVHlwZTogKCkgPT4gbWF0Y2hUeXBlLFxuXHRtZXJnZVNjaGVtYTogKCkgPT4gbWVyZ2VTY2hlbWEsXG5cdHBhcnNlQWNjb3VudElucHV0OiAoKSA9PiBwYXJzZUFjY291bnRJbnB1dCxcblx0cGFyc2VBY2NvdW50T3V0cHV0OiAoKSA9PiBwYXJzZUFjY291bnRPdXRwdXQsXG5cdHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dDogKCkgPT4gcGFyc2VBZGRpdGlvbmFsVXNlcklucHV0LFxuXHRwYXJzZUlucHV0RGF0YTogKCkgPT4gcGFyc2VJbnB1dERhdGEsXG5cdHBhcnNlU2Vzc2lvbklucHV0OiAoKSA9PiBwYXJzZVNlc3Npb25JbnB1dCxcblx0cGFyc2VTZXNzaW9uT3V0cHV0OiAoKSA9PiBwYXJzZVNlc3Npb25PdXRwdXQsXG5cdHBhcnNlVXNlcklucHV0OiAoKSA9PiBwYXJzZVVzZXJJbnB1dCxcblx0cGFyc2VVc2VyT3V0cHV0OiAoKSA9PiBwYXJzZVVzZXJPdXRwdXQsXG5cdHRvWm9kU2NoZW1hOiAoKSA9PiB0b1pvZFNjaGVtYVxufSk7XG5pbXBvcnQgKiBhcyBpbXBvcnRfX19iZXR0ZXJfYXV0aF9jb3JlX2RiIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuX19yZUV4cG9ydChkYl9leHBvcnRzLCBpbXBvcnRfX19iZXR0ZXJfYXV0aF9jb3JlX2RiKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiwgY3JlYXRlRmllbGRBdHRyaWJ1dGUsIGNyZWF0ZUludGVybmFsQWRhcHRlciwgZGJfZXhwb3J0cywgZ2V0QWRhcHRlciwgZ2V0QmFzZUFkYXB0ZXIsIGdldE1pZ3JhdGlvbnMsIGdldFNjaGVtYSwgZ2V0V2l0aEhvb2tzLCBtYXRjaFR5cGUsIG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0LCB0b1pvZFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInternalAdapter: () => (/* binding */ createInternalAdapter)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/internal-adapter.ts\nconst createInternalAdapter = (adapter, ctx) => {\n\tconst logger = ctx.logger;\n\tconst options = ctx.options;\n\tconst secondaryStorage = options.secondaryStorage;\n\tconst sessionExpiration = options.session?.expiresIn || 3600 * 24 * 7;\n\tconst { createWithHooks, updateWithHooks, updateManyWithHooks, deleteWithHooks, deleteManyWithHooks } = (0,_with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__.getWithHooks)(adapter, ctx);\n\tasync function refreshUserSessions(user) {\n\t\tif (!secondaryStorage) return;\n\t\tconst listRaw = await secondaryStorage.get(`active-sessions-${user.id}`);\n\t\tif (!listRaw) return;\n\t\tconst now = Date.now();\n\t\tconst validSessions = ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || []).filter((s) => s.expiresAt > now);\n\t\tawait Promise.all(validSessions.map(async ({ token }) => {\n\t\t\tconst cached = await secondaryStorage.get(token);\n\t\t\tif (!cached) return;\n\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(cached);\n\t\t\tif (!parsed) return;\n\t\t\tconst sessionTTL = Math.max(Math.floor(new Date(parsed.session.expiresAt).getTime() - now) / 1e3, 0);\n\t\t\tawait secondaryStorage.set(token, JSON.stringify({\n\t\t\t\tsession: parsed.session,\n\t\t\t\tuser\n\t\t\t}), Math.floor(sessionTTL));\n\t\t}));\n\t}\n\treturn {\n\t\tcreateOAuthUser: async (user, account) => {\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.runWithTransaction)(adapter, async () => {\n\t\t\t\tconst createdUser = await createWithHooks({\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t...user\n\t\t\t\t}, \"user\", void 0);\n\t\t\t\treturn {\n\t\t\t\t\tuser: createdUser,\n\t\t\t\t\taccount: await createWithHooks({\n\t\t\t\t\t\t...account,\n\t\t\t\t\t\tuserId: createdUser.id,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}, \"account\", void 0)\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tcreateUser: async (user) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...user,\n\t\t\t\temail: user.email?.toLowerCase()\n\t\t\t}, \"user\", void 0);\n\t\t},\n\t\tcreateAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tlistSessions: async (userId) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\tif (!currentList) return [];\n\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\tconst now = Date.now();\n\t\t\t\tconst seenTokens = /* @__PURE__ */ new Set();\n\t\t\t\tconst sessions = [];\n\t\t\t\tfor (const { token, expiresAt } of list) {\n\t\t\t\t\tif (expiresAt <= now || seenTokens.has(token)) continue;\n\t\t\t\t\tseenTokens.add(token);\n\t\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\t\tif (!data) continue;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = typeof data === \"string\" ? JSON.parse(data) : data;\n\t\t\t\t\t\tif (!parsed?.session) continue;\n\t\t\t\t\t\tsessions.push((0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...parsed.session,\n\t\t\t\t\t\t\texpiresAt: new Date(parsed.session.expiresAt)\n\t\t\t\t\t\t}));\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions;\n\t\t\t}\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistUsers: async (limit, offset, sortBy, where) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\tlimit,\n\t\t\t\toffset,\n\t\t\t\tsortBy,\n\t\t\t\twhere\n\t\t\t});\n\t\t},\n\t\tcountTotalUsers: async (where) => {\n\t\t\tconst total = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).count({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere\n\t\t\t});\n\t\t\tif (typeof total === \"string\") return parseInt(total);\n\t\t\treturn total;\n\t\t},\n\t\tdeleteUser: async (userId) => {\n\t\t\tif (!secondaryStorage || options.session?.storeSessionInDatabase) await deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"session\", void 0);\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t},\n\t\tcreateSession: async (userId, dontRememberMe, override, overrideAll) => {\n\t\t\tconst ctx$1 = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAuthContext)().catch(() => null);\n\t\t\tconst headers = ctx$1?.headers || ctx$1?.request?.headers;\n\t\t\tconst { id: _, ...rest } = override || {};\n\t\t\tconst defaultAdditionalFields = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionInput)(ctx$1?.context.options ?? options, {});\n\t\t\tconst data = {\n\t\t\t\tipAddress: ctx$1?.request || ctx$1?.headers ? (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__.getIp)(ctx$1?.request || ctx$1?.headers, ctx$1?.context.options) || \"\" : \"\",\n\t\t\t\tuserAgent: headers?.get(\"user-agent\") || \"\",\n\t\t\t\t...rest,\n\t\t\t\texpiresAt: dontRememberMe ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(3600 * 24, \"sec\") : (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(sessionExpiration, \"sec\"),\n\t\t\t\tuserId,\n\t\t\t\ttoken: (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.generateId)(32),\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...defaultAdditionalFields,\n\t\t\t\t...overrideAll ? rest : {}\n\t\t\t};\n\t\t\treturn await createWithHooks(data, \"session\", secondaryStorage ? {\n\t\t\t\tfn: async (sessionData) => {\n\t\t\t\t\t/**\n\t\t\t\t\t* store the session token for the user\n\t\t\t\t\t* so we can retrieve it later for listing sessions\n\t\t\t\t\t*/\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tlist = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tlist = list.filter((session) => session.expiresAt > now && session.token !== data.token);\n\t\t\t\t\t}\n\t\t\t\t\tconst sorted = [...list, {\n\t\t\t\t\t\ttoken: data.token,\n\t\t\t\t\t\texpiresAt: data.expiresAt.getTime()\n\t\t\t\t\t}].sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt ?? data.expiresAt.getTime();\n\t\t\t\t\tconst furthestSessionTTL = Math.max(Math.floor((furthestSessionExp - now) / 1e3), 0);\n\t\t\t\t\tif (furthestSessionTTL > 0) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(sorted), furthestSessionTTL);\n\t\t\t\t\tconst user = await adapter.findOne({\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((data.expiresAt.getTime() - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) await secondaryStorage.set(data.token, JSON.stringify({\n\t\t\t\t\t\tsession: sessionData,\n\t\t\t\t\t\tuser\n\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\treturn sessionData;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tfindSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessionStringified = await secondaryStorage.get(token);\n\t\t\t\tif (!sessionStringified && !options.session?.storeSessionInDatabase) return null;\n\t\t\t\tif (sessionStringified) {\n\t\t\t\t\tconst s = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(sessionStringified);\n\t\t\t\t\tif (!s) return null;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(s.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.session.updatedAt)\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: token,\n\t\t\t\t\tfield: \"token\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { user, ...session } = result;\n\t\t\tif (!user) return null;\n\t\t\treturn {\n\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, session),\n\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, user)\n\t\t\t};\n\t\t},\n\t\tfindSessions: async (sessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessions$1 = [];\n\t\t\t\tfor (const sessionToken of sessionTokens) {\n\t\t\t\t\tconst sessionStringified = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (sessionStringified) try {\n\t\t\t\t\t\tconst s = typeof sessionStringified === \"string\" ? JSON.parse(sessionStringified) : sessionStringified;\n\t\t\t\t\t\tif (!s?.session) continue;\n\t\t\t\t\t\tconst session = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsessions$1.push(session);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions$1;\n\t\t\t}\n\t\t\tconst sessions = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"token\",\n\t\t\t\t\tvalue: sessionTokens,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!sessions.length) return [];\n\t\t\tif (sessions.some((session) => !session.user)) return [];\n\t\t\treturn sessions.map((_session) => {\n\t\t\t\tconst { user, ...session } = _session;\n\t\t\t\treturn {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateSession: async (sessionToken, session) => {\n\t\t\treturn await updateWithHooks(session, [{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: sessionToken\n\t\t\t}], \"session\", secondaryStorage ? {\n\t\t\t\tasync fn(data) {\n\t\t\t\t\tconst currentSession = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (!currentSession) return null;\n\t\t\t\t\tconst parsedSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentSession);\n\t\t\t\t\tif (!parsedSession) return null;\n\t\t\t\t\tconst mergedSession = {\n\t\t\t\t\t\t...parsedSession.session,\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\texpiresAt: new Date(data.expiresAt ?? parsedSession.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(parsedSession.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(data.updatedAt ?? parsedSession.session.updatedAt)\n\t\t\t\t\t};\n\t\t\t\t\tconst updatedSession = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, mergedSession);\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tconst expiresMs = new Date(updatedSession.expiresAt).getTime();\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((expiresMs - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) {\n\t\t\t\t\t\tawait secondaryStorage.set(sessionToken, JSON.stringify({\n\t\t\t\t\t\t\tsession: updatedSession,\n\t\t\t\t\t\t\tuser: parsedSession.user\n\t\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\t\tconst listKey = `active-sessions-${updatedSession.userId}`;\n\t\t\t\t\t\tconst listRaw = await secondaryStorage.get(listKey);\n\t\t\t\t\t\tconst sorted = (listRaw ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || [] : []).filter((s) => s.token !== sessionToken && s.expiresAt > now).concat([{\n\t\t\t\t\t\t\ttoken: sessionToken,\n\t\t\t\t\t\t\texpiresAt: expiresMs\n\t\t\t\t\t\t}]).sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt;\n\t\t\t\t\t\tif (furthestSessionExp && furthestSessionExp > now) await secondaryStorage.set(listKey, JSON.stringify(sorted), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(listKey);\n\t\t\t\t\t}\n\t\t\t\t\treturn updatedSession;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tdeleteSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\tif (data) {\n\t\t\t\t\tconst { session } = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(data) ?? {};\n\t\t\t\t\tif (!session) {\n\t\t\t\t\t\tlogger.error(\"Session not found in secondary storage\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst userId = session.userId;\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tconst filtered = list.filter((session$1) => session$1.expiresAt > now && session$1.token !== token);\n\t\t\t\t\t\tconst furthestSessionExp = filtered.sort((a, b) => a.expiresAt - b.expiresAt).at(-1)?.expiresAt;\n\t\t\t\t\t\tif (filtered.length > 0 && furthestSessionExp && furthestSessionExp > Date.now()) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(filtered), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(`active-sessions-${userId}`);\n\t\t\t\t\t} else logger.error(\"Active sessions list not found in secondary storage\");\n\t\t\t\t}\n\t\t\t\tawait secondaryStorage.delete(token);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: token\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tdeleteAccounts: async (userId) => {\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteAccount: async (accountId) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: accountId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteSessions: async (userIdOrSessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tif (typeof userIdOrSessionTokens === \"string\") {\n\t\t\t\t\tconst activeSession = await secondaryStorage.get(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t\tconst sessions = activeSession ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(activeSession) : [];\n\t\t\t\t\tif (!sessions) return;\n\t\t\t\t\tfor (const session of sessions) await secondaryStorage.delete(session.token);\n\t\t\t\t\tawait secondaryStorage.delete(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t} else for (const sessionToken of userIdOrSessionTokens) if (await secondaryStorage.get(sessionToken)) await secondaryStorage.delete(sessionToken);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: Array.isArray(userIdOrSessionTokens) ? \"token\" : \"userId\",\n\t\t\t\tvalue: userIdOrSessionTokens,\n\t\t\t\toperator: Array.isArray(userIdOrSessionTokens) ? \"in\" : void 0\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tfindOAuthUser: async (email, accountId, providerId) => {\n\t\t\tconst account = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: accountId,\n\t\t\t\t\tfield: \"accountId\"\n\t\t\t\t}, {\n\t\t\t\t\tvalue: providerId,\n\t\t\t\t\tfield: \"providerId\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (account) if (account.user) return {\n\t\t\t\tuser: account.user,\n\t\t\t\tlinkedAccount: account,\n\t\t\t\taccounts: [account]\n\t\t\t};\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\tlinkedAccount: account,\n\t\t\t\t\taccounts: [account]\n\t\t\t\t};\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\tlinkedAccount: null,\n\t\t\t\t\taccounts: await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\t\t\tmodel: \"account\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tvalue: user.id,\n\t\t\t\t\t\t\tfield: \"userId\"\n\t\t\t\t\t\t}]\n\t\t\t\t\t}) || []\n\t\t\t\t};\n\t\t\t\telse return null;\n\t\t\t}\n\t\t},\n\t\tfindUserByEmail: async (email, options$1) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\tfield: \"email\"\n\t\t\t\t}],\n\t\t\t\tjoin: { ...options$1?.includeAccounts ? { account: true } : {} }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { account: accounts, ...user } = result;\n\t\t\treturn {\n\t\t\t\tuser,\n\t\t\t\taccounts: accounts ?? []\n\t\t\t};\n\t\t},\n\t\tfindUserById: async (userId) => {\n\t\t\tif (!userId) return null;\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlinkAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tupdateUser: async (userId, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdateUserByEmail: async (email, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"email\",\n\t\t\t\tvalue: email.toLowerCase()\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdatePassword: async (userId, password) => {\n\t\t\tawait updateManyWithHooks({ password }, [{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}, {\n\t\t\t\tfield: \"providerId\",\n\t\t\t\tvalue: \"credential\"\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tfindAccounts: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccount: async (accountId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByProviderId: async (accountId, providerId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"providerId\",\n\t\t\t\t\tvalue: providerId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByUserId: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tupdateAccount: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tcreateVerificationValue: async (data) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...data\n\t\t\t}, \"verification\", void 0);\n\t\t},\n\t\tfindVerificationValue: async (identifier) => {\n\t\t\tconst verification = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"verification\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"identifier\",\n\t\t\t\t\tvalue: identifier\n\t\t\t\t}],\n\t\t\t\tsortBy: {\n\t\t\t\t\tfield: \"createdAt\",\n\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t},\n\t\t\t\tlimit: 1\n\t\t\t});\n\t\t\tif (!options.verification?.disableCleanup) await deleteManyWithHooks([{\n\t\t\t\tfield: \"expiresAt\",\n\t\t\t\tvalue: /* @__PURE__ */ new Date(),\n\t\t\t\toperator: \"lt\"\n\t\t\t}], \"verification\", void 0);\n\t\t\treturn verification[0];\n\t\t},\n\t\tdeleteVerificationValue: async (id) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tdeleteVerificationByIdentifier: async (identifier) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"identifier\",\n\t\t\t\tvalue: identifier\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tupdateVerificationValue: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=internal-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2ludGVybmFsLWFkYXB0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEM7QUFDUTtBQUNrQztBQUN0QztBQUN5RDtBQUNyQzs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw4RkFBOEYsRUFBRSw2REFBWTtBQUNySDtBQUNBO0FBQ0EsZ0VBQWdFLFFBQVE7QUFDeEU7QUFDQTtBQUNBLHlCQUF5QixzRUFBYTtBQUN0QywrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0Esa0JBQWtCLHNFQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNkVBQWtCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxzRUFBc0UsT0FBTztBQUM3RTtBQUNBLGlCQUFpQixzRUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUFrQjtBQUN0QztBQUNBO0FBQ0EsT0FBTztBQUNQLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLDhCQUE4Qiw0RUFBaUI7QUFDL0M7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLGdGQUFxQjtBQUM1QztBQUNBLFdBQVcsaUJBQWlCO0FBQzVCLG1DQUFtQyw4REFBaUIsc0NBQXNDO0FBQzFGO0FBQ0Esa0RBQWtELGdFQUFLO0FBQ3ZEO0FBQ0E7QUFDQSxnQ0FBZ0Msd0RBQU8scUJBQXFCLHdEQUFPO0FBQ25FO0FBQ0EsV0FBVyxtRUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLE9BQU87QUFDOUU7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzRUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSwrRUFBK0UsT0FBTztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0VBQWE7QUFDNUI7QUFDQTtBQUNBLGVBQWUsK0RBQWtCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFlBQVksNERBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0RUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLElBQUk7QUFDSjtBQUNBLFdBQVcsbUJBQW1CO0FBQzlCO0FBQ0E7QUFDQSxhQUFhLCtEQUFrQjtBQUMvQixVQUFVLDREQUFlO0FBQ3pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDRFQUFpQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzRUFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx5Q0FBeUMsc0JBQXNCO0FBQy9EO0FBQ0EsZ0NBQWdDLHNFQUFhO0FBQzdDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFVBQVUsRUFBRSxzRUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLE9BQU87QUFDOUU7QUFDQSxtQkFBbUIsc0VBQWE7QUFDaEM7QUFDQTtBQUNBO0FBQ0Esc0lBQXNJLE9BQU87QUFDN0ksNERBQTRELE9BQU87QUFDbkUsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxzQkFBc0I7QUFDL0Ysc0NBQXNDLHNFQUFhO0FBQ25EO0FBQ0E7QUFDQSxzREFBc0Qsc0JBQXNCO0FBQzVFLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsZ0NBQWdDLDRFQUFpQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDRFQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0RUFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0RUFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLCtCQUErQiw0RUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSxrQ0FBa0MsZ0JBQWdCO0FBQzlELElBQUk7QUFDSjtBQUNBLFdBQVcsNkJBQTZCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0JBQStCLFVBQVU7QUFDekM7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHFDQUFxQyw0RUFBaUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ2lDO0FBQ2pDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxpbnRlcm5hbC1hZGFwdGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2Vzc2lvbklucHV0LCBwYXJzZVNlc3Npb25PdXRwdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IGdldFdpdGhIb29rcyB9IGZyb20gXCIuL3dpdGgtaG9va3MubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QWRhcHRlciwgZ2V0Q3VycmVudEF1dGhDb250ZXh0LCBydW5XaXRoVHJhbnNhY3Rpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCwgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL2RiL2ludGVybmFsLWFkYXB0ZXIudHNcbmNvbnN0IGNyZWF0ZUludGVybmFsQWRhcHRlciA9IChhZGFwdGVyLCBjdHgpID0+IHtcblx0Y29uc3QgbG9nZ2VyID0gY3R4LmxvZ2dlcjtcblx0Y29uc3Qgb3B0aW9ucyA9IGN0eC5vcHRpb25zO1xuXHRjb25zdCBzZWNvbmRhcnlTdG9yYWdlID0gb3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlO1xuXHRjb25zdCBzZXNzaW9uRXhwaXJhdGlvbiA9IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IDM2MDAgKiAyNCAqIDc7XG5cdGNvbnN0IHsgY3JlYXRlV2l0aEhvb2tzLCB1cGRhdGVXaXRoSG9va3MsIHVwZGF0ZU1hbnlXaXRoSG9va3MsIGRlbGV0ZVdpdGhIb29rcywgZGVsZXRlTWFueVdpdGhIb29rcyB9ID0gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCk7XG5cdGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hVc2VyU2Vzc2lvbnModXNlcikge1xuXHRcdGlmICghc2Vjb25kYXJ5U3RvcmFnZSkgcmV0dXJuO1xuXHRcdGNvbnN0IGxpc3RSYXcgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlci5pZH1gKTtcblx0XHRpZiAoIWxpc3RSYXcpIHJldHVybjtcblx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdGNvbnN0IHZhbGlkU2Vzc2lvbnMgPSAoc2FmZUpTT05QYXJzZShsaXN0UmF3KSB8fCBbXSkuZmlsdGVyKChzKSA9PiBzLmV4cGlyZXNBdCA+IG5vdyk7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodmFsaWRTZXNzaW9ucy5tYXAoYXN5bmMgKHsgdG9rZW4gfSkgPT4ge1xuXHRcdFx0Y29uc3QgY2FjaGVkID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQodG9rZW4pO1xuXHRcdFx0aWYgKCFjYWNoZWQpIHJldHVybjtcblx0XHRcdGNvbnN0IHBhcnNlZCA9IHNhZmVKU09OUGFyc2UoY2FjaGVkKTtcblx0XHRcdGlmICghcGFyc2VkKSByZXR1cm47XG5cdFx0XHRjb25zdCBzZXNzaW9uVFRMID0gTWF0aC5tYXgoTWF0aC5mbG9vcihuZXcgRGF0ZShwYXJzZWQuc2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKSAtIG5vdykgLyAxZTMsIDApO1xuXHRcdFx0YXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQodG9rZW4sIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdHVzZXJcblx0XHRcdH0pLCBNYXRoLmZsb29yKHNlc3Npb25UVEwpKTtcblx0XHR9KSk7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRjcmVhdGVPQXV0aFVzZXI6IGFzeW5jICh1c2VyLCBhY2NvdW50KSA9PiB7XG5cdFx0XHRyZXR1cm4gcnVuV2l0aFRyYW5zYWN0aW9uKGFkYXB0ZXIsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHQuLi51c2VyXG5cdFx0XHRcdH0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IGNyZWF0ZWRVc2VyLFxuXHRcdFx0XHRcdGFjY291bnQ6IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyh7XG5cdFx0XHRcdFx0XHQuLi5hY2NvdW50LFxuXHRcdFx0XHRcdFx0dXNlcklkOiBjcmVhdGVkVXNlci5pZCxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHRcdFx0fSwgXCJhY2NvdW50XCIsIHZvaWQgMClcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y3JlYXRlVXNlcjogYXN5bmMgKHVzZXIpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi51c2VyLFxuXHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbD8udG9Mb3dlckNhc2UoKVxuXHRcdFx0fSwgXCJ1c2VyXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRjcmVhdGVBY2NvdW50OiBhc3luYyAoYWNjb3VudCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IGNyZWF0ZVdpdGhIb29rcyh7XG5cdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdC4uLmFjY291bnRcblx0XHRcdH0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0bGlzdFNlc3Npb25zOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50TGlzdCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCk7XG5cdFx0XHRcdGlmICghY3VycmVudExpc3QpIHJldHVybiBbXTtcblx0XHRcdFx0Y29uc3QgbGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHRjb25zdCBzZWVuVG9rZW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbnMgPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCB7IHRva2VuLCBleHBpcmVzQXQgfSBvZiBsaXN0KSB7XG5cdFx0XHRcdFx0aWYgKGV4cGlyZXNBdCA8PSBub3cgfHwgc2VlblRva2Vucy5oYXModG9rZW4pKSBjb250aW51ZTtcblx0XHRcdFx0XHRzZWVuVG9rZW5zLmFkZCh0b2tlbik7XG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHRva2VuKTtcblx0XHRcdFx0XHRpZiAoIWRhdGEpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2UoZGF0YSkgOiBkYXRhO1xuXHRcdFx0XHRcdFx0aWYgKCFwYXJzZWQ/LnNlc3Npb24pIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0c2Vzc2lvbnMucHVzaChwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUocGFyc2VkLnNlc3Npb24uZXhwaXJlc0F0KVxuXHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXNzaW9ucztcblx0XHRcdH1cblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwic2Vzc2lvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGxpc3RVc2VyczogYXN5bmMgKGxpbWl0LCBvZmZzZXQsIHNvcnRCeSwgd2hlcmUpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRsaW1pdCxcblx0XHRcdFx0b2Zmc2V0LFxuXHRcdFx0XHRzb3J0QnksXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGNvdW50VG90YWxVc2VyczogYXN5bmMgKHdoZXJlKSA9PiB7XG5cdFx0XHRjb25zdCB0b3RhbCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuY291bnQoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHRcdGlmICh0eXBlb2YgdG90YWwgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXJzZUludCh0b3RhbCk7XG5cdFx0XHRyZXR1cm4gdG90YWw7XG5cdFx0fSxcblx0XHRkZWxldGVVc2VyOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRpZiAoIXNlY29uZGFyeVN0b3JhZ2UgfHwgb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlKSBhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJzZXNzaW9uXCIsIHZvaWQgMCk7XG5cdFx0XHRhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0fV0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0Y3JlYXRlU2Vzc2lvbjogYXN5bmMgKHVzZXJJZCwgZG9udFJlbWVtYmVyTWUsIG92ZXJyaWRlLCBvdmVycmlkZUFsbCkgPT4ge1xuXHRcdFx0Y29uc3QgY3R4JDEgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRcdGNvbnN0IGhlYWRlcnMgPSBjdHgkMT8uaGVhZGVycyB8fCBjdHgkMT8ucmVxdWVzdD8uaGVhZGVycztcblx0XHRcdGNvbnN0IHsgaWQ6IF8sIC4uLnJlc3QgfSA9IG92ZXJyaWRlIHx8IHt9O1xuXHRcdFx0Y29uc3QgZGVmYXVsdEFkZGl0aW9uYWxGaWVsZHMgPSBwYXJzZVNlc3Npb25JbnB1dChjdHgkMT8uY29udGV4dC5vcHRpb25zID8/IG9wdGlvbnMsIHt9KTtcblx0XHRcdGNvbnN0IGRhdGEgPSB7XG5cdFx0XHRcdGlwQWRkcmVzczogY3R4JDE/LnJlcXVlc3QgfHwgY3R4JDE/LmhlYWRlcnMgPyBnZXRJcChjdHgkMT8ucmVxdWVzdCB8fCBjdHgkMT8uaGVhZGVycywgY3R4JDE/LmNvbnRleHQub3B0aW9ucykgfHwgXCJcIiA6IFwiXCIsXG5cdFx0XHRcdHVzZXJBZ2VudDogaGVhZGVycz8uZ2V0KFwidXNlci1hZ2VudFwiKSB8fCBcIlwiLFxuXHRcdFx0XHQuLi5yZXN0LFxuXHRcdFx0XHRleHBpcmVzQXQ6IGRvbnRSZW1lbWJlck1lID8gZ2V0RGF0ZSgzNjAwICogMjQsIFwic2VjXCIpIDogZ2V0RGF0ZShzZXNzaW9uRXhwaXJhdGlvbiwgXCJzZWNcIiksXG5cdFx0XHRcdHVzZXJJZCxcblx0XHRcdFx0dG9rZW46IGdlbmVyYXRlSWQoMzIpLFxuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5kZWZhdWx0QWRkaXRpb25hbEZpZWxkcyxcblx0XHRcdFx0Li4ub3ZlcnJpZGVBbGwgPyByZXN0IDoge31cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKGRhdGEsIFwic2Vzc2lvblwiLCBzZWNvbmRhcnlTdG9yYWdlID8ge1xuXHRcdFx0XHRmbjogYXN5bmMgKHNlc3Npb25EYXRhKSA9PiB7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBzdG9yZSB0aGUgc2Vzc2lvbiB0b2tlbiBmb3IgdGhlIHVzZXJcblx0XHRcdFx0XHQqIHNvIHdlIGNhbiByZXRyaWV2ZSBpdCBsYXRlciBmb3IgbGlzdGluZyBzZXNzaW9uc1xuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudExpc3QgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRcdGxldCBsaXN0ID0gW107XG5cdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRpZiAoY3VycmVudExpc3QpIHtcblx0XHRcdFx0XHRcdGxpc3QgPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRMaXN0KSB8fCBbXTtcblx0XHRcdFx0XHRcdGxpc3QgPSBsaXN0LmZpbHRlcigoc2Vzc2lvbikgPT4gc2Vzc2lvbi5leHBpcmVzQXQgPiBub3cgJiYgc2Vzc2lvbi50b2tlbiAhPT0gZGF0YS50b2tlbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHNvcnRlZCA9IFsuLi5saXN0LCB7XG5cdFx0XHRcdFx0XHR0b2tlbjogZGF0YS50b2tlbixcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDogZGF0YS5leHBpcmVzQXQuZ2V0VGltZSgpXG5cdFx0XHRcdFx0fV0uc29ydCgoYSwgYikgPT4gYS5leHBpcmVzQXQgLSBiLmV4cGlyZXNBdCk7XG5cdFx0XHRcdFx0Y29uc3QgZnVydGhlc3RTZXNzaW9uRXhwID0gc29ydGVkLmF0KC0xKT8uZXhwaXJlc0F0ID8/IGRhdGEuZXhwaXJlc0F0LmdldFRpbWUoKTtcblx0XHRcdFx0XHRjb25zdCBmdXJ0aGVzdFNlc3Npb25UVEwgPSBNYXRoLm1heChNYXRoLmZsb29yKChmdXJ0aGVzdFNlc3Npb25FeHAgLSBub3cpIC8gMWUzKSwgMCk7XG5cdFx0XHRcdFx0aWYgKGZ1cnRoZXN0U2Vzc2lvblRUTCA+IDApIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCwgSlNPTi5zdHJpbmdpZnkoc29ydGVkKSwgZnVydGhlc3RTZXNzaW9uVFRMKTtcblx0XHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IHNlc3Npb25UVEwgPSBNYXRoLm1heChNYXRoLmZsb29yKChkYXRhLmV4cGlyZXNBdC5nZXRUaW1lKCkgLSBub3cpIC8gMWUzKSwgMCk7XG5cdFx0XHRcdFx0aWYgKHNlc3Npb25UVEwgPiAwKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldChkYXRhLnRva2VuLCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBzZXNzaW9uRGF0YSxcblx0XHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0XHR9KSwgc2Vzc2lvblRUTCk7XG5cdFx0XHRcdFx0cmV0dXJuIHNlc3Npb25EYXRhO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRleGVjdXRlTWFpbkZuOiBvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2Vcblx0XHRcdH0gOiB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZmluZFNlc3Npb246IGFzeW5jICh0b2tlbikgPT4ge1xuXHRcdFx0aWYgKHNlY29uZGFyeVN0b3JhZ2UpIHtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvblN0cmluZ2lmaWVkID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQodG9rZW4pO1xuXHRcdFx0XHRpZiAoIXNlc3Npb25TdHJpbmdpZmllZCAmJiAhb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0aWYgKHNlc3Npb25TdHJpbmdpZmllZCkge1xuXHRcdFx0XHRcdGNvbnN0IHMgPSBzYWZlSlNPTlBhcnNlKHNlc3Npb25TdHJpbmdpZmllZCk7XG5cdFx0XHRcdFx0aWYgKCFzKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnMuc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShzLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzLnNlc3Npb24uY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzLnNlc3Npb24udXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucy51c2VyLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcInNlc3Npb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0dmFsdWU6IHRva2VuLFxuXHRcdFx0XHRcdGZpZWxkOiBcInRva2VuXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdXNlcjogdHJ1ZSB9XG5cdFx0XHR9KTtcblx0XHRcdGlmICghcmVzdWx0KSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHsgdXNlciwgLi4uc2Vzc2lvbiB9ID0gcmVzdWx0O1xuXHRcdFx0aWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywgc2Vzc2lvbiksXG5cdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHgub3B0aW9ucywgdXNlcilcblx0XHRcdH07XG5cdFx0fSxcblx0XHRmaW5kU2Vzc2lvbnM6IGFzeW5jIChzZXNzaW9uVG9rZW5zKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRjb25zdCBzZXNzaW9ucyQxID0gW107XG5cdFx0XHRcdGZvciAoY29uc3Qgc2Vzc2lvblRva2VuIG9mIHNlc3Npb25Ub2tlbnMpIHtcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uU3RyaW5naWZpZWQgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRcdGlmIChzZXNzaW9uU3RyaW5naWZpZWQpIHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzID0gdHlwZW9mIHNlc3Npb25TdHJpbmdpZmllZCA9PT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2Uoc2Vzc2lvblN0cmluZ2lmaWVkKSA6IHNlc3Npb25TdHJpbmdpZmllZDtcblx0XHRcdFx0XHRcdGlmICghcz8uc2Vzc2lvbikgY29udGludWU7XG5cdFx0XHRcdFx0XHRjb25zdCBzZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdFx0Li4ucy5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUocy5zZXNzaW9uLmV4cGlyZXNBdClcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHRcdC4uLnMudXNlcixcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocy51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHNlc3Npb25zJDEucHVzaChzZXNzaW9uKTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2Vzc2lvbnMkMTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHNlc3Npb25zID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInNlc3Npb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIixcblx0XHRcdFx0XHR2YWx1ZTogc2Vzc2lvblRva2Vucyxcblx0XHRcdFx0XHRvcGVyYXRvcjogXCJpblwiXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRqb2luOiB7IHVzZXI6IHRydWUgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIXNlc3Npb25zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXHRcdFx0aWYgKHNlc3Npb25zLnNvbWUoKHNlc3Npb24pID0+ICFzZXNzaW9uLnVzZXIpKSByZXR1cm4gW107XG5cdFx0XHRyZXR1cm4gc2Vzc2lvbnMubWFwKChfc2Vzc2lvbikgPT4ge1xuXHRcdFx0XHRjb25zdCB7IHVzZXIsIC4uLnNlc3Npb24gfSA9IF9zZXNzaW9uO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHNlc3Npb24sXG5cdFx0XHRcdFx0dXNlclxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR1cGRhdGVTZXNzaW9uOiBhc3luYyAoc2Vzc2lvblRva2VuLCBzZXNzaW9uKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKHNlc3Npb24sIFt7XG5cdFx0XHRcdGZpZWxkOiBcInRva2VuXCIsXG5cdFx0XHRcdHZhbHVlOiBzZXNzaW9uVG9rZW5cblx0XHRcdH1dLCBcInNlc3Npb25cIiwgc2Vjb25kYXJ5U3RvcmFnZSA/IHtcblx0XHRcdFx0YXN5bmMgZm4oZGF0YSkge1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKTtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRTZXNzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWRTZXNzaW9uID0gc2FmZUpTT05QYXJzZShjdXJyZW50U2Vzc2lvbik7XG5cdFx0XHRcdFx0aWYgKCFwYXJzZWRTZXNzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCBtZXJnZWRTZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0Li4ucGFyc2VkU2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUoZGF0YS5leHBpcmVzQXQgPz8gcGFyc2VkU2Vzc2lvbi5zZXNzaW9uLmV4cGlyZXNBdCksXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHBhcnNlZFNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShkYXRhLnVwZGF0ZWRBdCA/PyBwYXJzZWRTZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0KVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29uc3QgdXBkYXRlZFNlc3Npb24gPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIG1lcmdlZFNlc3Npb24pO1xuXHRcdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdFx0Y29uc3QgZXhwaXJlc01zID0gbmV3IERhdGUodXBkYXRlZFNlc3Npb24uZXhwaXJlc0F0KS5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IoKGV4cGlyZXNNcyAtIG5vdykgLyAxZTMpLCAwKTtcblx0XHRcdFx0XHRpZiAoc2Vzc2lvblRUTCA+IDApIHtcblx0XHRcdFx0XHRcdGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KHNlc3Npb25Ub2tlbiwgSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB1cGRhdGVkU2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkU2Vzc2lvbi51c2VyXG5cdFx0XHRcdFx0XHR9KSwgc2Vzc2lvblRUTCk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaXN0S2V5ID0gYGFjdGl2ZS1zZXNzaW9ucy0ke3VwZGF0ZWRTZXNzaW9uLnVzZXJJZH1gO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGlzdFJhdyA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGxpc3RLZXkpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc29ydGVkID0gKGxpc3RSYXcgPyBzYWZlSlNPTlBhcnNlKGxpc3RSYXcpIHx8IFtdIDogW10pLmZpbHRlcigocykgPT4gcy50b2tlbiAhPT0gc2Vzc2lvblRva2VuICYmIHMuZXhwaXJlc0F0ID4gbm93KS5jb25jYXQoW3tcblx0XHRcdFx0XHRcdFx0dG9rZW46IHNlc3Npb25Ub2tlbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBleHBpcmVzTXNcblx0XHRcdFx0XHRcdH1dKS5zb3J0KChhLCBiKSA9PiBhLmV4cGlyZXNBdCAtIGIuZXhwaXJlc0F0KTtcblx0XHRcdFx0XHRcdGNvbnN0IGZ1cnRoZXN0U2Vzc2lvbkV4cCA9IHNvcnRlZC5hdCgtMSk/LmV4cGlyZXNBdDtcblx0XHRcdFx0XHRcdGlmIChmdXJ0aGVzdFNlc3Npb25FeHAgJiYgZnVydGhlc3RTZXNzaW9uRXhwID4gbm93KSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldChsaXN0S2V5LCBKU09OLnN0cmluZ2lmeShzb3J0ZWQpLCBNYXRoLmZsb29yKChmdXJ0aGVzdFNlc3Npb25FeHAgLSBub3cpIC8gMWUzKSk7XG5cdFx0XHRcdFx0XHRlbHNlIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKGxpc3RLZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdXBkYXRlZFNlc3Npb247XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGV4ZWN1dGVNYWluRm46IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZVxuXHRcdFx0fSA6IHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVTZXNzaW9uOiBhc3luYyAodG9rZW4pID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG5cdFx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBzZXNzaW9uIH0gPSBzYWZlSlNPTlBhcnNlKGRhdGEpID8/IHt9O1xuXHRcdFx0XHRcdGlmICghc2Vzc2lvbikge1xuXHRcdFx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiU2Vzc2lvbiBub3QgZm91bmQgaW4gc2Vjb25kYXJ5IHN0b3JhZ2VcIik7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHVzZXJJZCA9IHNlc3Npb24udXNlcklkO1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRMaXN0ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gKTtcblx0XHRcdFx0XHRpZiAoY3VycmVudExpc3QpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxpc3QgPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRMaXN0KSB8fCBbXTtcblx0XHRcdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWx0ZXJlZCA9IGxpc3QuZmlsdGVyKChzZXNzaW9uJDEpID0+IHNlc3Npb24kMS5leHBpcmVzQXQgPiBub3cgJiYgc2Vzc2lvbiQxLnRva2VuICE9PSB0b2tlbik7XG5cdFx0XHRcdFx0XHRjb25zdCBmdXJ0aGVzdFNlc3Npb25FeHAgPSBmaWx0ZXJlZC5zb3J0KChhLCBiKSA9PiBhLmV4cGlyZXNBdCAtIGIuZXhwaXJlc0F0KS5hdCgtMSk/LmV4cGlyZXNBdDtcblx0XHRcdFx0XHRcdGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwICYmIGZ1cnRoZXN0U2Vzc2lvbkV4cCAmJiBmdXJ0aGVzdFNlc3Npb25FeHAgPiBEYXRlLm5vdygpKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWAsIEpTT04uc3RyaW5naWZ5KGZpbHRlcmVkKSwgTWF0aC5mbG9vcigoZnVydGhlc3RTZXNzaW9uRXhwIC0gbm93KSAvIDFlMykpO1xuXHRcdFx0XHRcdFx0ZWxzZSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRcdH0gZWxzZSBsb2dnZXIuZXJyb3IoXCJBY3RpdmUgc2Vzc2lvbnMgbGlzdCBub3QgZm91bmQgaW4gc2Vjb25kYXJ5IHN0b3JhZ2VcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5kZWxldGUodG9rZW4pO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSB8fCBjdHgub3B0aW9ucy5zZXNzaW9uPy5wcmVzZXJ2ZVNlc3Npb25JbkRhdGFiYXNlKSByZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIixcblx0XHRcdFx0dmFsdWU6IHRva2VuXG5cdFx0XHR9XSwgXCJzZXNzaW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVBY2NvdW50czogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlTWFueVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0fV0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZGVsZXRlQWNjb3VudDogYXN5bmMgKGFjY291bnRJZCkgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlV2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBhY2NvdW50SWRcblx0XHRcdH1dLCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGRlbGV0ZVNlc3Npb25zOiBhc3luYyAodXNlcklkT3JTZXNzaW9uVG9rZW5zKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHVzZXJJZE9yU2Vzc2lvblRva2VucyA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZVNlc3Npb24gPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkT3JTZXNzaW9uVG9rZW5zfWApO1xuXHRcdFx0XHRcdGNvbnN0IHNlc3Npb25zID0gYWN0aXZlU2Vzc2lvbiA/IHNhZmVKU09OUGFyc2UoYWN0aXZlU2Vzc2lvbikgOiBbXTtcblx0XHRcdFx0XHRpZiAoIXNlc3Npb25zKSByZXR1cm47XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzZXNzaW9uIG9mIHNlc3Npb25zKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShzZXNzaW9uLnRva2VuKTtcblx0XHRcdFx0XHRhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkT3JTZXNzaW9uVG9rZW5zfWApO1xuXHRcdFx0XHR9IGVsc2UgZm9yIChjb25zdCBzZXNzaW9uVG9rZW4gb2YgdXNlcklkT3JTZXNzaW9uVG9rZW5zKSBpZiAoYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKSkgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5kZWxldGUoc2Vzc2lvblRva2VuKTtcblx0XHRcdFx0aWYgKCFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UgfHwgY3R4Lm9wdGlvbnMuc2Vzc2lvbj8ucHJlc2VydmVTZXNzaW9uSW5EYXRhYmFzZSkgcmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgZGVsZXRlTWFueVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogQXJyYXkuaXNBcnJheSh1c2VySWRPclNlc3Npb25Ub2tlbnMpID8gXCJ0b2tlblwiIDogXCJ1c2VySWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZE9yU2Vzc2lvblRva2Vucyxcblx0XHRcdFx0b3BlcmF0b3I6IEFycmF5LmlzQXJyYXkodXNlcklkT3JTZXNzaW9uVG9rZW5zKSA/IFwiaW5cIiA6IHZvaWQgMFxuXHRcdFx0fV0sIFwic2Vzc2lvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZmluZE9BdXRoVXNlcjogYXN5bmMgKGVtYWlsLCBhY2NvdW50SWQsIHByb3ZpZGVySWQpID0+IHtcblx0XHRcdGNvbnN0IGFjY291bnQgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWQsXG5cdFx0XHRcdFx0ZmllbGQ6IFwiYWNjb3VudElkXCJcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdHZhbHVlOiBwcm92aWRlcklkLFxuXHRcdFx0XHRcdGZpZWxkOiBcInByb3ZpZGVySWRcIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyB1c2VyOiB0cnVlIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKGFjY291bnQpIGlmIChhY2NvdW50LnVzZXIpIHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IGFjY291bnQudXNlcixcblx0XHRcdFx0bGlua2VkQWNjb3VudDogYWNjb3VudCxcblx0XHRcdFx0YWNjb3VudHM6IFthY2NvdW50XVxuXHRcdFx0fTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHR2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCJcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHVzZXIpIHJldHVybiB7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHRsaW5rZWRBY2NvdW50OiBhY2NvdW50LFxuXHRcdFx0XHRcdGFjY291bnRzOiBbYWNjb3VudF1cblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHRmaWVsZDogXCJlbWFpbFwiXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh1c2VyKSByZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXIsXG5cdFx0XHRcdFx0bGlua2VkQWNjb3VudDogbnVsbCxcblx0XHRcdFx0XHRhY2NvdW50czogYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdFx0dmFsdWU6IHVzZXIuaWQsXG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pIHx8IFtdXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRmaW5kVXNlckJ5RW1haWw6IGFzeW5jIChlbWFpbCwgb3B0aW9ucyQxKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdHZhbHVlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgLi4ub3B0aW9ucyQxPy5pbmNsdWRlQWNjb3VudHMgPyB7IGFjY291bnQ6IHRydWUgfSA6IHt9IH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyBhY2NvdW50OiBhY2NvdW50cywgLi4udXNlciB9ID0gcmVzdWx0O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcixcblx0XHRcdFx0YWNjb3VudHM6IGFjY291bnRzID8/IFtdXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0ZmluZFVzZXJCeUlkOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRpZiAoIXVzZXJJZCkgcmV0dXJuIG51bGw7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bGlua0FjY291bnQ6IGFzeW5jIChhY2NvdW50KSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0Li4uYWNjb3VudFxuXHRcdFx0fSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHR1cGRhdGVVc2VyOiBhc3luYyAodXNlcklkLCBkYXRhKSA9PiB7XG5cdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKGRhdGEsIFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH1dLCBcInVzZXJcIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IHJlZnJlc2hVc2VyU2Vzc2lvbnModXNlcik7XG5cdFx0XHRyZXR1cm4gdXNlcjtcblx0XHR9LFxuXHRcdHVwZGF0ZVVzZXJCeUVtYWlsOiBhc3luYyAoZW1haWwsIGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB1cGRhdGVXaXRoSG9va3MoZGF0YSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIixcblx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKClcblx0XHRcdH1dLCBcInVzZXJcIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IHJlZnJlc2hVc2VyU2Vzc2lvbnModXNlcik7XG5cdFx0XHRyZXR1cm4gdXNlcjtcblx0XHR9LFxuXHRcdHVwZGF0ZVBhc3N3b3JkOiBhc3luYyAodXNlcklkLCBwYXNzd29yZCkgPT4ge1xuXHRcdFx0YXdhaXQgdXBkYXRlTWFueVdpdGhIb29rcyh7IHBhc3N3b3JkIH0sIFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9LCB7XG5cdFx0XHRcdGZpZWxkOiBcInByb3ZpZGVySWRcIixcblx0XHRcdFx0dmFsdWU6IFwiY3JlZGVudGlhbFwiXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRmaW5kQWNjb3VudHM6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwiYWNjb3VudFwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGZpbmRBY2NvdW50OiBhc3luYyAoYWNjb3VudElkKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwiYWNjb3VudFwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJhY2NvdW50SWRcIixcblx0XHRcdFx0XHR2YWx1ZTogYWNjb3VudElkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGZpbmRBY2NvdW50QnlQcm92aWRlcklkOiBhc3luYyAoYWNjb3VudElkLCBwcm92aWRlcklkKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwiYWNjb3VudFwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJhY2NvdW50SWRcIixcblx0XHRcdFx0XHR2YWx1ZTogYWNjb3VudElkXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRmaWVsZDogXCJwcm92aWRlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHByb3ZpZGVySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEFjY291bnRCeVVzZXJJZDogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dXBkYXRlQWNjb3VudDogYXN5bmMgKGlkLCBkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKGRhdGEsIFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0fV0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0Y3JlYXRlVmVyaWZpY2F0aW9uVmFsdWU6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0Li4uZGF0YVxuXHRcdFx0fSwgXCJ2ZXJpZmljYXRpb25cIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGZpbmRWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGlkZW50aWZpZXIpID0+IHtcblx0XHRcdGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJ2ZXJpZmljYXRpb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRlbnRpZmllclwiLFxuXHRcdFx0XHRcdHZhbHVlOiBpZGVudGlmaWVyXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRzb3J0Qnk6IHtcblx0XHRcdFx0XHRmaWVsZDogXCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRkaXJlY3Rpb246IFwiZGVzY1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxpbWl0OiAxXG5cdFx0XHR9KTtcblx0XHRcdGlmICghb3B0aW9ucy52ZXJpZmljYXRpb24/LmRpc2FibGVDbGVhbnVwKSBhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImV4cGlyZXNBdFwiLFxuXHRcdFx0XHR2YWx1ZTogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdG9wZXJhdG9yOiBcImx0XCJcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdFx0cmV0dXJuIHZlcmlmaWNhdGlvblswXTtcblx0XHR9LFxuXHRcdGRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlOiBhc3luYyAoaWQpID0+IHtcblx0XHRcdGF3YWl0IGRlbGV0ZVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogaWRcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZGVsZXRlVmVyaWZpY2F0aW9uQnlJZGVudGlmaWVyOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlV2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkZW50aWZpZXJcIixcblx0XHRcdFx0dmFsdWU6IGlkZW50aWZpZXJcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0dXBkYXRlVmVyaWZpY2F0aW9uVmFsdWU6IGFzeW5jIChpZCwgZGF0YSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IHVwZGF0ZVdpdGhIb29rcyhkYXRhLCBbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogaWRcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbC1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/internal-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeSchema: () => (/* binding */ mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* binding */ parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* binding */ parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* binding */ parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* binding */ parseInputData),\n/* harmony export */   parseSessionInput: () => (/* binding */ parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* binding */ parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* binding */ parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* binding */ parseUserOutput)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n\n\n\n//#region src/db/schema.ts\nconst cache = /* @__PURE__ */ new WeakMap();\nfunction parseOutputData(data, schema) {\n\tconst fields = schema.fields;\n\tconst parsedData = {};\n\tfor (const key in data) {\n\t\tconst field = fields[key];\n\t\tif (!field) {\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (field.returned === false && key !== \"id\") continue;\n\t\tparsedData[key] = data[key];\n\t}\n\treturn parsedData;\n}\nfunction getFields(options, table, mode) {\n\tconst cacheKey = `${table}:${mode}`;\n\tif (!cache.has(options)) cache.set(options, /* @__PURE__ */ new Map());\n\tconst tableCache = cache.get(options);\n\tif (tableCache.has(cacheKey)) return tableCache.get(cacheKey);\n\tconst coreSchema = mode === \"output\" ? (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options)[table]?.fields ?? {} : {};\n\tconst additionalFields = table === \"user\" || table === \"session\" || table === \"account\" ? options[table]?.additionalFields : void 0;\n\tlet schema = {\n\t\t...coreSchema,\n\t\t...additionalFields ?? {}\n\t};\n\tfor (const plugin of options.plugins || []) if (plugin.schema && plugin.schema[table]) schema = {\n\t\t...schema,\n\t\t...plugin.schema[table].fields\n\t};\n\ttableCache.set(cacheKey, schema);\n\treturn schema;\n}\nfunction parseUserOutput(options, user) {\n\treturn parseOutputData(user, { fields: getFields(options, \"user\", \"output\") });\n}\nfunction parseSessionOutput(options, session) {\n\treturn parseOutputData(session, { fields: getFields(options, \"session\", \"output\") });\n}\nfunction parseAccountOutput(options, account) {\n\tconst { accessToken: _accessToken, refreshToken: _refreshToken, idToken: _idToken, accessTokenExpiresAt: _accessTokenExpiresAt, refreshTokenExpiresAt: _refreshTokenExpiresAt, password: _password, ...rest } = parseOutputData(account, { fields: getFields(options, \"account\", \"output\") });\n\treturn rest;\n}\nfunction parseInputData(data, schema) {\n\tconst action = schema.action || \"create\";\n\tconst fields = schema.fields;\n\tconst parsedData = Object.assign(Object.create(null), null);\n\tfor (const key in fields) {\n\t\tif (key in data) {\n\t\t\tif (fields[key].input === false) {\n\t\t\t\tif (fields[key].defaultValue !== void 0) {\n\t\t\t\t\tif (action !== \"update\") {\n\t\t\t\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (data[key]) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is not allowed to be set` });\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].validator?.input && data[key] !== void 0) {\n\t\t\t\tconst result = fields[key].validator.input[\"~standard\"].validate(data[key]);\n\t\t\t\tif (result instanceof Promise) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Async validation is not supported for additional fields\" });\n\t\t\t\tif (\"issues\" in result && result.issues) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: result.issues[0]?.message || \"Validation Error\" });\n\t\t\t\tparsedData[key] = result.value;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].transform?.input && data[key] !== void 0) {\n\t\t\t\tparsedData[key] = fields[key].transform?.input(data[key]);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].defaultValue !== void 0 && action === \"create\") {\n\t\t\tif (typeof fields[key].defaultValue === \"function\") {\n\t\t\t\tparsedData[key] = fields[key].defaultValue();\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].required && action === \"create\") throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is required` });\n\t}\n\treturn parsedData;\n}\nfunction parseUserInput(options, user = {}, action) {\n\treturn parseInputData(user, {\n\t\tfields: getFields(options, \"user\", \"input\"),\n\t\taction\n\t});\n}\nfunction parseAdditionalUserInput(options, user) {\n\tconst schema = getFields(options, \"user\", \"input\");\n\treturn parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n\treturn parseInputData(account, { fields: getFields(options, \"account\", \"input\") });\n}\nfunction parseSessionInput(options, session) {\n\treturn parseInputData(session, { fields: getFields(options, \"session\", \"input\") });\n}\nfunction mergeSchema(schema, newSchema) {\n\tif (!newSchema) return schema;\n\tfor (const table in newSchema) {\n\t\tconst newModelName = newSchema[table]?.modelName;\n\t\tif (newModelName) schema[table].modelName = newModelName;\n\t\tfor (const field in schema[table].fields) {\n\t\t\tconst newField = newSchema[table]?.fields?.[field];\n\t\t\tif (!newField) continue;\n\t\t\tschema[table].fields[field].fieldName = newField;\n\t\t}\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL3NjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDZDs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixNQUFNLEdBQUcsS0FBSztBQUNuQztBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUVBQWEsK0JBQStCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhDQUE4QztBQUM5RTtBQUNBO0FBQ0EsbUNBQW1DLGlEQUFpRDtBQUNwRjtBQUNBO0FBQ0EsU0FBUyxzTUFBc00sNkJBQTZCLGlEQUFpRDtBQUM3UjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQVEsa0JBQWtCLFlBQVksS0FBSywyQkFBMkI7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsaURBQVEsNEJBQTRCLG9FQUFvRTtBQUNySix1REFBdUQsaURBQVEsa0JBQWtCLDBEQUEwRDtBQUMzSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsaURBQVEsa0JBQWtCLFlBQVksS0FBSyxjQUFjO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLElBQUksZ0JBQWdCO0FBQ3JEO0FBQ0E7QUFDQSxrQ0FBa0MsZ0RBQWdEO0FBQ2xGO0FBQ0E7QUFDQSxrQ0FBa0MsZ0RBQWdEO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0w7QUFDaEwiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXHNjaGVtYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXV0aFRhYmxlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9zY2hlbWEudHNcbmNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwYXJzZU91dHB1dERhdGEoZGF0YSwgc2NoZW1hKSB7XG5cdGNvbnN0IGZpZWxkcyA9IHNjaGVtYS5maWVsZHM7XG5cdGNvbnN0IHBhcnNlZERhdGEgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0aWYgKCFmaWVsZCkge1xuXHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZGF0YVtrZXldO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmIChmaWVsZC5yZXR1cm5lZCA9PT0gZmFsc2UgJiYga2V5ICE9PSBcImlkXCIpIGNvbnRpbnVlO1xuXHRcdHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0fVxuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cbmZ1bmN0aW9uIGdldEZpZWxkcyhvcHRpb25zLCB0YWJsZSwgbW9kZSkge1xuXHRjb25zdCBjYWNoZUtleSA9IGAke3RhYmxlfToke21vZGV9YDtcblx0aWYgKCFjYWNoZS5oYXMob3B0aW9ucykpIGNhY2hlLnNldChvcHRpb25zLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcblx0Y29uc3QgdGFibGVDYWNoZSA9IGNhY2hlLmdldChvcHRpb25zKTtcblx0aWYgKHRhYmxlQ2FjaGUuaGFzKGNhY2hlS2V5KSkgcmV0dXJuIHRhYmxlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblx0Y29uc3QgY29yZVNjaGVtYSA9IG1vZGUgPT09IFwib3V0cHV0XCIgPyBnZXRBdXRoVGFibGVzKG9wdGlvbnMpW3RhYmxlXT8uZmllbGRzID8/IHt9IDoge307XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHMgPSB0YWJsZSA9PT0gXCJ1c2VyXCIgfHwgdGFibGUgPT09IFwic2Vzc2lvblwiIHx8IHRhYmxlID09PSBcImFjY291bnRcIiA/IG9wdGlvbnNbdGFibGVdPy5hZGRpdGlvbmFsRmllbGRzIDogdm9pZCAwO1xuXHRsZXQgc2NoZW1hID0ge1xuXHRcdC4uLmNvcmVTY2hlbWEsXG5cdFx0Li4uYWRkaXRpb25hbEZpZWxkcyA/PyB7fVxuXHR9O1xuXHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBvcHRpb25zLnBsdWdpbnMgfHwgW10pIGlmIChwbHVnaW4uc2NoZW1hICYmIHBsdWdpbi5zY2hlbWFbdGFibGVdKSBzY2hlbWEgPSB7XG5cdFx0Li4uc2NoZW1hLFxuXHRcdC4uLnBsdWdpbi5zY2hlbWFbdGFibGVdLmZpZWxkc1xuXHR9O1xuXHR0YWJsZUNhY2hlLnNldChjYWNoZUtleSwgc2NoZW1hKTtcblx0cmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIHBhcnNlVXNlck91dHB1dChvcHRpb25zLCB1c2VyKSB7XG5cdHJldHVybiBwYXJzZU91dHB1dERhdGEodXNlciwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJvdXRwdXRcIikgfSk7XG59XG5mdW5jdGlvbiBwYXJzZVNlc3Npb25PdXRwdXQob3B0aW9ucywgc2Vzc2lvbikge1xuXHRyZXR1cm4gcGFyc2VPdXRwdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJzZXNzaW9uXCIsIFwib3V0cHV0XCIpIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50T3V0cHV0KG9wdGlvbnMsIGFjY291bnQpIHtcblx0Y29uc3QgeyBhY2Nlc3NUb2tlbjogX2FjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IF9yZWZyZXNoVG9rZW4sIGlkVG9rZW46IF9pZFRva2VuLCBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogX2FjY2Vzc1Rva2VuRXhwaXJlc0F0LCByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IF9yZWZyZXNoVG9rZW5FeHBpcmVzQXQsIHBhc3N3b3JkOiBfcGFzc3dvcmQsIC4uLnJlc3QgfSA9IHBhcnNlT3V0cHV0RGF0YShhY2NvdW50LCB7IGZpZWxkczogZ2V0RmllbGRzKG9wdGlvbnMsIFwiYWNjb3VudFwiLCBcIm91dHB1dFwiKSB9KTtcblx0cmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBwYXJzZUlucHV0RGF0YShkYXRhLCBzY2hlbWEpIHtcblx0Y29uc3QgYWN0aW9uID0gc2NoZW1hLmFjdGlvbiB8fCBcImNyZWF0ZVwiO1xuXHRjb25zdCBmaWVsZHMgPSBzY2hlbWEuZmllbGRzO1xuXHRjb25zdCBwYXJzZWREYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBudWxsKTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSB7XG5cdFx0aWYgKGtleSBpbiBkYXRhKSB7XG5cdFx0XHRpZiAoZmllbGRzW2tleV0uaW5wdXQgPT09IGZhbHNlKSB7XG5cdFx0XHRcdGlmIChmaWVsZHNba2V5XS5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmIChhY3Rpb24gIT09IFwidXBkYXRlXCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGF0YVtrZXldKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGAke2tleX0gaXMgbm90IGFsbG93ZWQgdG8gYmUgc2V0YCB9KTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZmllbGRzW2tleV0udmFsaWRhdG9yPy5pbnB1dCAmJiBkYXRhW2tleV0gIT09IHZvaWQgMCkge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBmaWVsZHNba2V5XS52YWxpZGF0b3IuaW5wdXRbXCJ+c3RhbmRhcmRcIl0udmFsaWRhdGUoZGF0YVtrZXldKTtcblx0XHRcdFx0aWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiQXN5bmMgdmFsaWRhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGZvciBhZGRpdGlvbmFsIGZpZWxkc1wiIH0pO1xuXHRcdFx0XHRpZiAoXCJpc3N1ZXNcIiBpbiByZXN1bHQgJiYgcmVzdWx0Lmlzc3VlcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiByZXN1bHQuaXNzdWVzWzBdPy5tZXNzYWdlIHx8IFwiVmFsaWRhdGlvbiBFcnJvclwiIH0pO1xuXHRcdFx0XHRwYXJzZWREYXRhW2tleV0gPSByZXN1bHQudmFsdWU7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGZpZWxkc1trZXldLnRyYW5zZm9ybT8uaW5wdXQgJiYgZGF0YVtrZXldICE9PSB2b2lkIDApIHtcblx0XHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZmllbGRzW2tleV0udHJhbnNmb3JtPy5pbnB1dChkYXRhW2tleV0pO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlICE9PSB2b2lkIDAgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG5cdFx0XHRpZiAodHlwZW9mIGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSgpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoZmllbGRzW2tleV0ucmVxdWlyZWQgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGAke2tleX0gaXMgcmVxdWlyZWRgIH0pO1xuXHR9XG5cdHJldHVybiBwYXJzZWREYXRhO1xufVxuZnVuY3Rpb24gcGFyc2VVc2VySW5wdXQob3B0aW9ucywgdXNlciA9IHt9LCBhY3Rpb24pIHtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHVzZXIsIHtcblx0XHRmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJpbnB1dFwiKSxcblx0XHRhY3Rpb25cblx0fSk7XG59XG5mdW5jdGlvbiBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQob3B0aW9ucywgdXNlcikge1xuXHRjb25zdCBzY2hlbWEgPSBnZXRGaWVsZHMob3B0aW9ucywgXCJ1c2VyXCIsIFwiaW5wdXRcIik7XG5cdHJldHVybiBwYXJzZUlucHV0RGF0YSh1c2VyIHx8IHt9LCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50SW5wdXQob3B0aW9ucywgYWNjb3VudCkge1xuXHRyZXR1cm4gcGFyc2VJbnB1dERhdGEoYWNjb3VudCwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcImFjY291bnRcIiwgXCJpbnB1dFwiKSB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlU2Vzc2lvbklucHV0KG9wdGlvbnMsIHNlc3Npb24pIHtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJzZXNzaW9uXCIsIFwiaW5wdXRcIikgfSk7XG59XG5mdW5jdGlvbiBtZXJnZVNjaGVtYShzY2hlbWEsIG5ld1NjaGVtYSkge1xuXHRpZiAoIW5ld1NjaGVtYSkgcmV0dXJuIHNjaGVtYTtcblx0Zm9yIChjb25zdCB0YWJsZSBpbiBuZXdTY2hlbWEpIHtcblx0XHRjb25zdCBuZXdNb2RlbE5hbWUgPSBuZXdTY2hlbWFbdGFibGVdPy5tb2RlbE5hbWU7XG5cdFx0aWYgKG5ld01vZGVsTmFtZSkgc2NoZW1hW3RhYmxlXS5tb2RlbE5hbWUgPSBuZXdNb2RlbE5hbWU7XG5cdFx0Zm9yIChjb25zdCBmaWVsZCBpbiBzY2hlbWFbdGFibGVdLmZpZWxkcykge1xuXHRcdFx0Y29uc3QgbmV3RmllbGQgPSBuZXdTY2hlbWFbdGFibGVdPy5maWVsZHM/LltmaWVsZF07XG5cdFx0XHRpZiAoIW5ld0ZpZWxkKSBjb250aW51ZTtcblx0XHRcdHNjaGVtYVt0YWJsZV0uZmllbGRzW2ZpZWxkXS5maWVsZE5hbWUgPSBuZXdGaWVsZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHNjaGVtYTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtZXJnZVNjaGVtYSwgcGFyc2VBY2NvdW50SW5wdXQsIHBhcnNlQWNjb3VudE91dHB1dCwgcGFyc2VBZGRpdGlvbmFsVXNlcklucHV0LCBwYXJzZUlucHV0RGF0YSwgcGFyc2VTZXNzaW9uSW5wdXQsIHBhcnNlU2Vzc2lvbk91dHB1dCwgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toZodSchema: () => (/* binding */ toZodSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/index.js\");\n\n\n//#region src/db/to-zod.ts\nfunction toZodSchema({ fields, isClientSide }) {\n\tconst zodFields = Object.keys(fields).reduce((acc, key) => {\n\t\tconst field = fields[key];\n\t\tif (!field) return acc;\n\t\tif (isClientSide && field.input === false) return acc;\n\t\tlet schema;\n\t\tif (field.type === \"json\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.json ? zod__WEBPACK_IMPORTED_MODULE_0__.json() : zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse if (field.type === \"string[]\" || field.type === \"number[]\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.array(field.type === \"string[]\" ? zod__WEBPACK_IMPORTED_MODULE_0__.string() : zod__WEBPACK_IMPORTED_MODULE_0__.number());\n\t\telse if (Array.isArray(field.type)) schema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse schema = zod__WEBPACK_IMPORTED_MODULE_1__[field.type]();\n\t\tif (field?.required === false) schema = schema.optional();\n\t\tif (!isClientSide && field?.returned === false) return acc;\n\t\treturn {\n\t\t\t...acc,\n\t\t\t[key]: schema\n\t\t};\n\t}, {});\n\treturn zod__WEBPACK_IMPORTED_MODULE_0__.object(zodFields);\n}\n\n//#endregion\n\n//# sourceMappingURL=to-zod.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL3RvLXpvZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlCOztBQUV6QjtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQ0FBTSxHQUFHLHFDQUFNLEtBQUssb0NBQUs7QUFDL0QsNEVBQTRFLHNDQUFPLDZCQUE2Qix1Q0FBUSxLQUFLLHVDQUFRO0FBQ3JJLCtDQUErQyxvQ0FBSztBQUNwRCxnQkFBZ0IsZ0NBQUM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ04sUUFBUSx1Q0FBUTtBQUNoQjs7QUFFQTtBQUN1QjtBQUN2QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcdG8tem9kLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi90by16b2QudHNcbmZ1bmN0aW9uIHRvWm9kU2NoZW1hKHsgZmllbGRzLCBpc0NsaWVudFNpZGUgfSkge1xuXHRjb25zdCB6b2RGaWVsZHMgPSBPYmplY3Qua2V5cyhmaWVsZHMpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcblx0XHRjb25zdCBmaWVsZCA9IGZpZWxkc1trZXldO1xuXHRcdGlmICghZmllbGQpIHJldHVybiBhY2M7XG5cdFx0aWYgKGlzQ2xpZW50U2lkZSAmJiBmaWVsZC5pbnB1dCA9PT0gZmFsc2UpIHJldHVybiBhY2M7XG5cdFx0bGV0IHNjaGVtYTtcblx0XHRpZiAoZmllbGQudHlwZSA9PT0gXCJqc29uXCIpIHNjaGVtYSA9IHouanNvbiA/IHouanNvbigpIDogei5hbnkoKTtcblx0XHRlbHNlIGlmIChmaWVsZC50eXBlID09PSBcInN0cmluZ1tdXCIgfHwgZmllbGQudHlwZSA9PT0gXCJudW1iZXJbXVwiKSBzY2hlbWEgPSB6LmFycmF5KGZpZWxkLnR5cGUgPT09IFwic3RyaW5nW11cIiA/IHouc3RyaW5nKCkgOiB6Lm51bWJlcigpKTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpZWxkLnR5cGUpKSBzY2hlbWEgPSB6LmFueSgpO1xuXHRcdGVsc2Ugc2NoZW1hID0geltmaWVsZC50eXBlXSgpO1xuXHRcdGlmIChmaWVsZD8ucmVxdWlyZWQgPT09IGZhbHNlKSBzY2hlbWEgPSBzY2hlbWEub3B0aW9uYWwoKTtcblx0XHRpZiAoIWlzQ2xpZW50U2lkZSAmJiBmaWVsZD8ucmV0dXJuZWQgPT09IGZhbHNlKSByZXR1cm4gYWNjO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5hY2MsXG5cdFx0XHRba2V5XTogc2NoZW1hXG5cdFx0fTtcblx0fSwge30pO1xuXHRyZXR1cm4gei5vYmplY3Qoem9kRmllbGRzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b1pvZFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG8tem9kLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/to-zod.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWithHooks: () => (/* binding */ getWithHooks)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/db/with-hooks.ts\nfunction getWithHooks(adapter, ctx) {\n\tconst hooks = ctx.hooks;\n\tasync function createWithHooks(data, model, customCreateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(actualData, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customCreated = customCreateFn ? await customCreateFn.fn(actualData) : null;\n\t\tconst created = !customCreateFn || customCreateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).create({\n\t\t\tmodel,\n\t\t\tdata: actualData,\n\t\t\tforceAllowId: true\n\t\t}) : customCreated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.after;\n\t\t\tif (toRun) await toRun(created, context);\n\t\t}\n\t\treturn created;\n\t}\n\tasync function updateWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).update({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function updateManyWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).updateMany({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function deleteWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entityToDelete = null;\n\t\ttry {\n\t\t\tentityToDelete = (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit: 1\n\t\t\t}))[0] || null;\n\t\t} catch {}\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entityToDelete, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).delete({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entityToDelete, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\tasync function deleteManyWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entitiesToDelete = [];\n\t\ttry {\n\t\t\tentitiesToDelete = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t} catch {}\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entity, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).deleteMany({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entity, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\treturn {\n\t\tcreateWithHooks,\n\t\tupdateWithHooks,\n\t\tupdateManyWithHooks,\n\t\tdeleteWithHooks,\n\t\tdeleteManyWithHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=with-hooks.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL3dpdGgtaG9va3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFGOztBQUVyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsNEVBQWlCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsNEVBQWlCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsNEVBQWlCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRkFBcUI7QUFDN0M7QUFDQTtBQUNBLGtDQUFrQyw0RUFBaUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRiw0RUFBaUI7QUFDbEc7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRkFBcUI7QUFDN0M7QUFDQTtBQUNBLG1DQUFtQyw0RUFBaUI7QUFDcEQ7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsNEVBQWlCO0FBQ2xHO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcd2l0aC1ob29rcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIsIGdldEN1cnJlbnRBdXRoQ29udGV4dCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvd2l0aC1ob29rcy50c1xuZnVuY3Rpb24gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCkge1xuXHRjb25zdCBob29rcyA9IGN0eC5ob29rcztcblx0YXN5bmMgZnVuY3Rpb24gY3JlYXRlV2l0aEhvb2tzKGRhdGEsIG1vZGVsLCBjdXN0b21DcmVhdGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgYWN0dWFsRGF0YSA9IGRhdGE7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5jcmVhdGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0b1J1bihhY3R1YWxEYXRhLCBjb250ZXh0KTtcblx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQpIGFjdHVhbERhdGEgPSB7XG5cdFx0XHRcdFx0Li4uYWN0dWFsRGF0YSxcblx0XHRcdFx0XHQuLi5yZXN1bHQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21DcmVhdGVkID0gY3VzdG9tQ3JlYXRlRm4gPyBhd2FpdCBjdXN0b21DcmVhdGVGbi5mbihhY3R1YWxEYXRhKSA6IG51bGw7XG5cdFx0Y29uc3QgY3JlYXRlZCA9ICFjdXN0b21DcmVhdGVGbiB8fCBjdXN0b21DcmVhdGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5jcmVhdGUoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRkYXRhOiBhY3R1YWxEYXRhLFxuXHRcdFx0Zm9yY2VBbGxvd0lkOiB0cnVlXG5cdFx0fSkgOiBjdXN0b21DcmVhdGVkO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uY3JlYXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oY3JlYXRlZCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdHJldHVybiBjcmVhdGVkO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdpdGhIb29rcyhkYXRhLCB3aGVyZSwgbW9kZWwsIGN1c3RvbVVwZGF0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBhY3R1YWxEYXRhID0gZGF0YTtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LnVwZGF0ZT8uYmVmb3JlO1xuXHRcdFx0aWYgKHRvUnVuKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGRhdGEsIGNvbnRleHQpO1xuXHRcdFx0XHRpZiAocmVzdWx0ID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3VsdCkgYWN0dWFsRGF0YSA9IHtcblx0XHRcdFx0XHQuLi5hY3R1YWxEYXRhLFxuXHRcdFx0XHRcdC4uLnJlc3VsdC5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbVVwZGF0ZWQgPSBjdXN0b21VcGRhdGVGbiA/IGF3YWl0IGN1c3RvbVVwZGF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcblx0XHRjb25zdCB1cGRhdGVkID0gIWN1c3RvbVVwZGF0ZUZuIHx8IGN1c3RvbVVwZGF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLnVwZGF0ZSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHVwZGF0ZTogYWN0dWFsRGF0YSxcblx0XHRcdHdoZXJlXG5cdFx0fSkgOiBjdXN0b21VcGRhdGVkO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4odXBkYXRlZCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdHJldHVybiB1cGRhdGVkO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1hbnlXaXRoSG9va3MoZGF0YSwgd2hlcmUsIG1vZGVsLCBjdXN0b21VcGRhdGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgYWN0dWFsRGF0YSA9IGRhdGE7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0b1J1bihkYXRhLCBjb250ZXh0KTtcblx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQpIGFjdHVhbERhdGEgPSB7XG5cdFx0XHRcdFx0Li4uYWN0dWFsRGF0YSxcblx0XHRcdFx0XHQuLi5yZXN1bHQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21VcGRhdGVkID0gY3VzdG9tVXBkYXRlRm4gPyBhd2FpdCBjdXN0b21VcGRhdGVGbi5mbihhY3R1YWxEYXRhKSA6IG51bGw7XG5cdFx0Y29uc3QgdXBkYXRlZCA9ICFjdXN0b21VcGRhdGVGbiB8fCBjdXN0b21VcGRhdGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS51cGRhdGVNYW55KHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0dXBkYXRlOiBhY3R1YWxEYXRhLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbVVwZGF0ZWQ7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmFmdGVyO1xuXHRcdFx0aWYgKHRvUnVuKSBhd2FpdCB0b1J1bih1cGRhdGVkLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHVwZGF0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVsZXRlV2l0aEhvb2tzKHdoZXJlLCBtb2RlbCwgY3VzdG9tRGVsZXRlRm4pIHtcblx0XHRjb25zdCBjb250ZXh0ID0gYXdhaXQgZ2V0Q3VycmVudEF1dGhDb250ZXh0KCkuY2F0Y2goKCkgPT4gbnVsbCk7XG5cdFx0bGV0IGVudGl0eVRvRGVsZXRlID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0ZW50aXR5VG9EZWxldGUgPSAoYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZSxcblx0XHRcdFx0bGltaXQ6IDFcblx0XHRcdH0pKVswXSB8fCBudWxsO1xuXHRcdH0gY2F0Y2gge31cblx0XHRpZiAoZW50aXR5VG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5iZWZvcmU7XG5cdFx0XHRpZiAodG9SdW4pIHtcblx0XHRcdFx0aWYgKGF3YWl0IHRvUnVuKGVudGl0eVRvRGVsZXRlLCBjb250ZXh0KSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21EZWxldGVkID0gY3VzdG9tRGVsZXRlRm4gPyBhd2FpdCBjdXN0b21EZWxldGVGbi5mbih3aGVyZSkgOiBudWxsO1xuXHRcdGNvbnN0IGRlbGV0ZWQgPSAhY3VzdG9tRGVsZXRlRm4gfHwgY3VzdG9tRGVsZXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZGVsZXRlKHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbURlbGV0ZWQ7XG5cdFx0aWYgKGVudGl0eVRvRGVsZXRlKSBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LmRlbGV0ZT8uYWZ0ZXI7XG5cdFx0XHRpZiAodG9SdW4pIGF3YWl0IHRvUnVuKGVudGl0eVRvRGVsZXRlLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRlbGV0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVsZXRlTWFueVdpdGhIb29rcyh3aGVyZSwgbW9kZWwsIGN1c3RvbURlbGV0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBlbnRpdGllc1RvRGVsZXRlID0gW107XG5cdFx0dHJ5IHtcblx0XHRcdGVudGl0aWVzVG9EZWxldGUgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIHt9XG5cdFx0Zm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXNUb0RlbGV0ZSkgZm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5kZWxldGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRpZiAoYXdhaXQgdG9SdW4oZW50aXR5LCBjb250ZXh0KSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21EZWxldGVkID0gY3VzdG9tRGVsZXRlRm4gPyBhd2FpdCBjdXN0b21EZWxldGVGbi5mbih3aGVyZSkgOiBudWxsO1xuXHRcdGNvbnN0IGRlbGV0ZWQgPSAhY3VzdG9tRGVsZXRlRm4gfHwgY3VzdG9tRGVsZXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZGVsZXRlTWFueSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHdoZXJlXG5cdFx0fSkgOiBjdXN0b21EZWxldGVkO1xuXHRcdGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzVG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oZW50aXR5LCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRlbGV0ZWQ7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRjcmVhdGVXaXRoSG9va3MsXG5cdFx0dXBkYXRlV2l0aEhvb2tzLFxuXHRcdHVwZGF0ZU1hbnlXaXRoSG9va3MsXG5cdFx0ZGVsZXRlV2l0aEhvb2tzLFxuXHRcdGRlbGV0ZU1hbnlXaXRoSG9va3Ncblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRXaXRoSG9va3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGgtaG9va3MubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/db/with-hooks.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/index.mjs":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/index.mjs ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError),\n/* harmony export */   BASE_ERROR_CODES: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BASE_ERROR_CODES),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BetterAuthError),\n/* harmony export */   ENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.ENV),\n/* harmony export */   HIDE_METADATA: () => (/* reexport safe */ _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__.HIDE_METADATA),\n/* harmony export */   TTY_COLORS: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.TTY_COLORS),\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.accountSchema),\n/* harmony export */   betterAuth: () => (/* reexport safe */ _auth_full_mjs__WEBPACK_IMPORTED_MODULE_5__.betterAuth),\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.capitalizeFirstLetter),\n/* harmony export */   clientCredentialsToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.clientCredentialsToken),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.coreSchema),\n/* harmony export */   createAuthorizationCodeRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationCodeRequest),\n/* harmony export */   createAuthorizationURL: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationURL),\n/* harmony export */   createClientCredentialsTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createClientCredentialsTokenRequest),\n/* harmony export */   createLogger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.createLogger),\n/* harmony export */   createRateLimitKey: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.createRateLimitKey),\n/* harmony export */   createRefreshAccessTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createRefreshAccessTokenRequest),\n/* harmony export */   createTelemetry: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.createTelemetry),\n/* harmony export */   defineErrorCodes: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.defineErrorCodes),\n/* harmony export */   deprecate: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.deprecate),\n/* harmony export */   env: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.env),\n/* harmony export */   filterOutputFields: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.filterOutputFields),\n/* harmony export */   generateCodeChallenge: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.generateCodeChallenge),\n/* harmony export */   generateGenericState: () => (/* reexport safe */ _state_mjs__WEBPACK_IMPORTED_MODULE_0__.generateGenericState),\n/* harmony export */   generateId: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_3__.generateId),\n/* harmony export */   generateState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.generateState),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.getAuthTables),\n/* harmony export */   getBooleanEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getBooleanEnvVar),\n/* harmony export */   getColorDepth: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getColorDepth),\n/* harmony export */   getCurrentAdapter: () => (/* reexport safe */ _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__.getCurrentAdapter),\n/* harmony export */   getEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getEnvVar),\n/* harmony export */   getJwks: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getJwks),\n/* harmony export */   getOAuth2Tokens: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getOAuth2Tokens),\n/* harmony export */   getTelemetryAuthConfig: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.getTelemetryAuthConfig),\n/* harmony export */   isDevelopment: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isDevelopment),\n/* harmony export */   isProduction: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isProduction),\n/* harmony export */   isTest: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isTest),\n/* harmony export */   isValidIP: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.isValidIP),\n/* harmony export */   levels: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.levels),\n/* harmony export */   logger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.logger),\n/* harmony export */   nodeENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.nodeENV),\n/* harmony export */   normalizeIP: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.normalizeIP),\n/* harmony export */   normalizePathname: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.normalizePathname),\n/* harmony export */   parseGenericState: () => (/* reexport safe */ _state_mjs__WEBPACK_IMPORTED_MODULE_0__.parseGenericState),\n/* harmony export */   parseState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.rateLimitSchema),\n/* harmony export */   refreshAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.refreshAccessToken),\n/* harmony export */   safeJSONParse: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.safeJSONParse),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.sessionSchema),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.shouldPublishLog),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.userSchema),\n/* harmony export */   validateAuthorizationCode: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateAuthorizationCode),\n/* harmony export */   validateToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateToken),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.verificationSchema),\n/* harmony export */   verifyAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyAccessToken),\n/* harmony export */   verifyJwsAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyJwsAccessToken)\n/* harmony export */ });\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./oauth2/state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/hide-metadata.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./api/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _auth_full_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./auth/full.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/auth/full.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/telemetry */ \"(rsc)/./node_modules/.pnpm/@better-auth+telemetry@1.4._c11636a3ce6f8b05864a09e345ba4713/node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var _better_auth_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNFO0FBQ1A7QUFDTDtBQUNYO0FBQ0o7QUFDRTtBQUNpQjtBQUNtQjs7QUFFaEQ7O0FBRUc7O0FBRUM7O0FBRUU7O0FBRUM7O0FBRUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBwYXJzZUdlbmVyaWNTdGF0ZSB9IGZyb20gXCIuL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTdGF0ZSwgcGFyc2VTdGF0ZSB9IGZyb20gXCIuL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi91dGlscy9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcIi4vYXV0aC9mdWxsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgY3JlYXRlVGVsZW1ldHJ5LCBnZXRUZWxlbWV0cnlBdXRoQ29uZmlnIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC90ZWxlbWV0cnlcIjtcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlXCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiXG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiXG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9vYXV0aDJcIlxuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIlxuXG5leHBvcnQgeyBBUElFcnJvciwgSElERV9NRVRBREFUQSwgYmV0dGVyQXV0aCwgY3JlYXRlVGVsZW1ldHJ5LCBnZW5lcmF0ZUdlbmVyaWNTdGF0ZSwgZ2VuZXJhdGVJZCwgZ2VuZXJhdGVTdGF0ZSwgZ2V0Q3VycmVudEFkYXB0ZXIsIGdldFRlbGVtZXRyeUF1dGhDb25maWcsIHBhcnNlR2VuZXJpY1N0YXRlLCBwYXJzZVN0YXRlIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/integrations/next-js.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/integrations/next-js.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nextCookies: () => (/* binding */ nextCookies),\n/* harmony export */   toNextJsHandler: () => (/* binding */ toNextJsHandler)\n/* harmony export */ });\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/integrations/next-js.ts\nfunction toNextJsHandler(auth) {\n\tconst handler = async (request) => {\n\t\treturn \"handler\" in auth ? auth.handler(request) : auth(request);\n\t};\n\treturn {\n\t\tGET: handler,\n\t\tPOST: handler,\n\t\tPATCH: handler,\n\t\tPUT: handler,\n\t\tDELETE: handler\n\t};\n}\nconst nextCookies = () => {\n\treturn {\n\t\tid: \"next-cookies\",\n\t\thooks: { after: [{\n\t\t\tmatcher(ctx) {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst returned = ctx.context.responseHeaders;\n\t\t\t\tif (\"_flag\" in ctx && ctx._flag === \"router\") return;\n\t\t\t\tif (returned instanceof Headers) {\n\t\t\t\t\tconst setCookies = returned?.get(\"set-cookie\");\n\t\t\t\t\tif (!setCookies) return;\n\t\t\t\t\tconst parsed = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.parseSetCookieHeader)(setCookies);\n\t\t\t\t\tconst { cookies } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/next@15.5.10_@babel+core@7._354e965a902584de4951c501fbcccc32\").then(__webpack_require__.bind(__webpack_require__, /*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.5.10_@babel+core@7._354e965a902584de4951c501fbcccc32/node_modules/next/dist/api/headers.js\"));\n\t\t\t\t\tlet cookieHelper;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcookieHelper = await cookies();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error instanceof Error && error.message.startsWith(\"`cookies` was called outside a request scope.\")) return;\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t\tparsed.forEach((value, key) => {\n\t\t\t\t\t\tif (!key) return;\n\t\t\t\t\t\tconst opts = {\n\t\t\t\t\t\t\tsameSite: value.samesite,\n\t\t\t\t\t\t\tsecure: value.secure,\n\t\t\t\t\t\t\tmaxAge: value[\"max-age\"],\n\t\t\t\t\t\t\thttpOnly: value.httponly,\n\t\t\t\t\t\t\tdomain: value.domain,\n\t\t\t\t\t\t\tpath: value.path\n\t\t\t\t\t\t};\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookieHelper.set(key, decodeURIComponent(value.value), opts);\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t})\n\t\t}] }\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=next-js.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2ludGVncmF0aW9ucy9uZXh0LWpzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtRTtBQUNyQztBQUMrQjs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLElBQUk7QUFDSixZQUFZLDJFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtFQUFvQjtBQUN4QyxhQUFhLFVBQVUsUUFBUSw0VEFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxpbnRlZ3JhdGlvbnNcXG5leHQtanMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlU2V0Q29va2llSGVhZGVyIH0gZnJvbSBcIi4uL2Nvb2tpZXMvY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IFwiLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2ludGVncmF0aW9ucy9uZXh0LWpzLnRzXG5mdW5jdGlvbiB0b05leHRKc0hhbmRsZXIoYXV0aCkge1xuXHRjb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRyZXR1cm4gXCJoYW5kbGVyXCIgaW4gYXV0aCA/IGF1dGguaGFuZGxlcihyZXF1ZXN0KSA6IGF1dGgocmVxdWVzdCk7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0R0VUOiBoYW5kbGVyLFxuXHRcdFBPU1Q6IGhhbmRsZXIsXG5cdFx0UEFUQ0g6IGhhbmRsZXIsXG5cdFx0UFVUOiBoYW5kbGVyLFxuXHRcdERFTEVURTogaGFuZGxlclxuXHR9O1xufVxuY29uc3QgbmV4dENvb2tpZXMgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibmV4dC1jb29raWVzXCIsXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyKGN0eCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJldHVybmVkID0gY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzO1xuXHRcdFx0XHRpZiAoXCJfZmxhZ1wiIGluIGN0eCAmJiBjdHguX2ZsYWcgPT09IFwicm91dGVyXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHJldHVybmVkIGluc3RhbmNlb2YgSGVhZGVycykge1xuXHRcdFx0XHRcdGNvbnN0IHNldENvb2tpZXMgPSByZXR1cm5lZD8uZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRcdFx0XHRpZiAoIXNldENvb2tpZXMpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWVzKTtcblx0XHRcdFx0XHRjb25zdCB7IGNvb2tpZXMgfSA9IGF3YWl0IGltcG9ydChcIm5leHQvaGVhZGVyc1wiKTtcblx0XHRcdFx0XHRsZXQgY29va2llSGVscGVyO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb29raWVIZWxwZXIgPSBhd2FpdCBjb29raWVzKCk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcImBjb29raWVzYCB3YXMgY2FsbGVkIG91dHNpZGUgYSByZXF1ZXN0IHNjb3BlLlwiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBhcnNlZC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIWtleSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3Qgb3B0cyA9IHtcblx0XHRcdFx0XHRcdFx0c2FtZVNpdGU6IHZhbHVlLnNhbWVzaXRlLFxuXHRcdFx0XHRcdFx0XHRzZWN1cmU6IHZhbHVlLnNlY3VyZSxcblx0XHRcdFx0XHRcdFx0bWF4QWdlOiB2YWx1ZVtcIm1heC1hZ2VcIl0sXG5cdFx0XHRcdFx0XHRcdGh0dHBPbmx5OiB2YWx1ZS5odHRwb25seSxcblx0XHRcdFx0XHRcdFx0ZG9tYWluOiB2YWx1ZS5kb21haW4sXG5cdFx0XHRcdFx0XHRcdHBhdGg6IHZhbHVlLnBhdGhcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb29raWVIZWxwZXIuc2V0KGtleSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlLnZhbHVlKSwgb3B0cyk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHt9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1dIH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbmV4dENvb2tpZXMsIHRvTmV4dEpzSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV4dC1qcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/integrations/next-js.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleOAuthUserInfo: () => (/* binding */ handleOAuthUserInfo)\n/* harmony export */ });\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/session-store.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/routes/email-verification.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/link-account.ts\nasync function handleOAuthUserInfo(c, opts) {\n\tconst { userInfo, account, callbackURL, disableSignUp, overrideUserInfo } = opts;\n\tconst dbUser = await c.context.internalAdapter.findOAuthUser(userInfo.email.toLowerCase(), account.accountId, account.providerId).catch((e) => {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Better auth was unable to query your database.\\nError: \", e);\n\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=internal_server_error`);\n\t});\n\tlet user = dbUser?.user;\n\tconst isRegister = !user;\n\tif (dbUser) {\n\t\tconst linkedAccount = dbUser.linkedAccount ?? dbUser.accounts.find((acc) => acc.providerId === account.providerId && acc.accountId === account.accountId);\n\t\tif (!linkedAccount) {\n\t\t\tconst accountLinking = c.context.options.account?.accountLinking;\n\t\t\tconst trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n\t\t\tif (!(opts.isTrustedProvider || trustedProviders?.includes(account.providerId)) && !userInfo.emailVerified || accountLinking?.enabled === false || accountLinking?.disableImplicitLinking === true) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.isDevelopment)()) _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.warn(`User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"account not linked\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait c.context.internalAdapter.linkAccount({\n\t\t\t\t\tproviderId: account.providerId,\n\t\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t\t\tuserId: dbUser.user.id,\n\t\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Unable to link account\", e);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"unable to link account\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t} else {\n\t\t\tconst freshTokens = c.context.options.account?.updateAccountOnSignIn !== false ? Object.fromEntries(Object.entries({\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope\n\t\t\t}).filter(([_, value]) => value !== void 0)) : {};\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, {\n\t\t\t\t...linkedAccount,\n\t\t\t\t...freshTokens\n\t\t\t});\n\t\t\tif (Object.keys(freshTokens).length > 0) await c.context.internalAdapter.updateAccount(linkedAccount.id, freshTokens);\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t}\n\t\tif (overrideUserInfo) {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tuser = await c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\temailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif (disableSignUp) return {\n\t\t\terror: \"signup disabled\",\n\t\t\tdata: null,\n\t\t\tisRegister: false\n\t\t};\n\t\ttry {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tconst accountData = {\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope,\n\t\t\t\tproviderId: account.providerId,\n\t\t\t\taccountId: userInfo.id.toString()\n\t\t\t};\n\t\t\tconst { user: createdUser, account: createdAccount } = await c.context.internalAdapter.createOAuthUser({\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase()\n\t\t\t}, accountData);\n\t\t\tuser = createdUser;\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, createdAccount);\n\t\t\tif (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp && c.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\t\tconst token = await (0,_api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__.createEmailVerificationToken)(c.context.secret, user.email, void 0, c.context.options.emailVerification?.expiresIn);\n\t\t\t\tconst url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\t\tawait c.context.runInBackgroundOrAwait(c.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser,\n\t\t\t\t\turl,\n\t\t\t\t\ttoken\n\t\t\t\t}, c.request));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(e);\n\t\t\tif (e instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError) return {\n\t\t\t\terror: e.message,\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t\treturn {\n\t\t\t\terror: \"unable to create user\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t}\n\t}\n\tif (!user) return {\n\t\terror: \"unable to create user\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\tconst session = await c.context.internalAdapter.createSession(user.id);\n\tif (!session) return {\n\t\terror: \"unable to create session\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\treturn {\n\t\tdata: {\n\t\t\tsession,\n\t\t\tuser\n\t\t},\n\t\terror: null,\n\t\tisRegister\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=link-account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L29hdXRoMi9saW5rLWFjY291bnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnRTtBQUNyQjtBQUN5QztBQUN4QztBQUNrQjs7QUFFOUQ7QUFDQTtBQUNBLFNBQVMsa0VBQWtFO0FBQzNFO0FBQ0EsRUFBRSx5REFBTTtBQUNSLGdFQUFnRSxrQkFBa0I7QUFDbEYsc0JBQXNCLFNBQVM7QUFDL0IsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9FQUFhLElBQUkseURBQU0sd0RBQXdELG1CQUFtQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3REFBWTtBQUNwQyx5QkFBeUIsd0RBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMLElBQUkseURBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0xBQWdMLHFCQUFxQjtBQUNyTSxJQUFJO0FBQ0o7QUFDQTtBQUNBLHVCQUF1Qix3REFBWTtBQUNuQyx3QkFBd0Isd0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDREQUE0RCw0RUFBZ0I7QUFDNUU7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLGdMQUFnTCxxQkFBcUI7QUFDck07QUFDQTtBQUNBLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0EsdUJBQXVCLHdEQUFZO0FBQ25DLHdCQUF3Qix3REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkNBQTZDO0FBQ3hEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0REFBNEQsNEVBQWdCO0FBQzVFO0FBQ0Esd0JBQXdCLGdHQUE0QjtBQUNwRCxtQkFBbUIsa0JBQWtCLHNCQUFzQixNQUFNLGVBQWUsWUFBWTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSixHQUFHLHlEQUFNO0FBQ1Qsb0JBQW9CLG9EQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDK0I7QUFDL0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcb2F1dGgyXFxsaW5rLWFjY291bnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldEFjY291bnRDb29raWUgfSBmcm9tIFwiLi4vY29va2llcy9zZXNzaW9uLXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgc2V0VG9rZW5VdGlsIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSBcIi4uL2FwaS9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuXG4vLyNyZWdpb24gc3JjL29hdXRoMi9saW5rLWFjY291bnQudHNcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU9BdXRoVXNlckluZm8oYywgb3B0cykge1xuXHRjb25zdCB7IHVzZXJJbmZvLCBhY2NvdW50LCBjYWxsYmFja1VSTCwgZGlzYWJsZVNpZ25VcCwgb3ZlcnJpZGVVc2VySW5mbyB9ID0gb3B0cztcblx0Y29uc3QgZGJVc2VyID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kT0F1dGhVc2VyKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCksIGFjY291bnQuYWNjb3VudElkLCBhY2NvdW50LnByb3ZpZGVySWQpLmNhdGNoKChlKSA9PiB7XG5cdFx0bG9nZ2VyLmVycm9yKFwiQmV0dGVyIGF1dGggd2FzIHVuYWJsZSB0byBxdWVyeSB5b3VyIGRhdGFiYXNlLlxcbkVycm9yOiBcIiwgZSk7XG5cdFx0Y29uc3QgZXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPWludGVybmFsX3NlcnZlcl9lcnJvcmApO1xuXHR9KTtcblx0bGV0IHVzZXIgPSBkYlVzZXI/LnVzZXI7XG5cdGNvbnN0IGlzUmVnaXN0ZXIgPSAhdXNlcjtcblx0aWYgKGRiVXNlcikge1xuXHRcdGNvbnN0IGxpbmtlZEFjY291bnQgPSBkYlVzZXIubGlua2VkQWNjb3VudCA/PyBkYlVzZXIuYWNjb3VudHMuZmluZCgoYWNjKSA9PiBhY2MucHJvdmlkZXJJZCA9PT0gYWNjb3VudC5wcm92aWRlcklkICYmIGFjYy5hY2NvdW50SWQgPT09IGFjY291bnQuYWNjb3VudElkKTtcblx0XHRpZiAoIWxpbmtlZEFjY291bnQpIHtcblx0XHRcdGNvbnN0IGFjY291bnRMaW5raW5nID0gYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc7XG5cdFx0XHRjb25zdCB0cnVzdGVkUHJvdmlkZXJzID0gYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnM7XG5cdFx0XHRpZiAoIShvcHRzLmlzVHJ1c3RlZFByb3ZpZGVyIHx8IHRydXN0ZWRQcm92aWRlcnM/LmluY2x1ZGVzKGFjY291bnQucHJvdmlkZXJJZCkpICYmICF1c2VySW5mby5lbWFpbFZlcmlmaWVkIHx8IGFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSB8fCBhY2NvdW50TGlua2luZz8uZGlzYWJsZUltcGxpY2l0TGlua2luZyA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRpZiAoaXNEZXZlbG9wbWVudCgpKSBsb2dnZXIud2FybihgVXNlciBhbHJlYWR5IGV4aXN0IGJ1dCBhY2NvdW50IGlzbid0IGxpbmtlZCB0byAke2FjY291bnQucHJvdmlkZXJJZH0uIFRvIHJlYWQgbW9yZSBhYm91dCBob3cgYWNjb3VudCBsaW5raW5nIHdvcmtzIGluIEJldHRlciBBdXRoIHNlZSBodHRwczovL3d3dy5iZXR0ZXItYXV0aC5jb20vZG9jcy9jb25jZXB0cy91c2Vycy1hY2NvdW50cyNhY2NvdW50LWxpbmtpbmcuYCk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZXJyb3I6IFwiYWNjb3VudCBub3QgbGlua2VkXCIsXG5cdFx0XHRcdFx0ZGF0YTogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5saW5rQWNjb3VudCh7XG5cdFx0XHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0XHRcdGFjY291bnRJZDogdXNlckluZm8uaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHR1c2VySWQ6IGRiVXNlci51c2VyLmlkLFxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiBhY2NvdW50LnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGxpbmsgYWNjb3VudFwiLCBlKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRlcnJvcjogXCJ1bmFibGUgdG8gbGluayBhY2NvdW50XCIsXG5cdFx0XHRcdFx0ZGF0YTogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHVzZXJJbmZvLmVtYWlsVmVyaWZpZWQgJiYgIWRiVXNlci51c2VyLmVtYWlsVmVyaWZpZWQgJiYgdXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSA9PT0gZGJVc2VyLnVzZXIuZW1haWwpIGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihkYlVzZXIudXNlci5pZCwgeyBlbWFpbFZlcmlmaWVkOiB0cnVlIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBmcmVzaFRva2VucyA9IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnVwZGF0ZUFjY291bnRPblNpZ25JbiAhPT0gZmFsc2UgPyBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoe1xuXHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5yZWZyZXNoVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZVxuXHRcdFx0fSkuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdm9pZCAwKSkgOiB7fTtcblx0XHRcdGlmIChjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIGF3YWl0IHNldEFjY291bnRDb29raWUoYywge1xuXHRcdFx0XHQuLi5saW5rZWRBY2NvdW50LFxuXHRcdFx0XHQuLi5mcmVzaFRva2Vuc1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoT2JqZWN0LmtleXMoZnJlc2hUb2tlbnMpLmxlbmd0aCA+IDApIGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChsaW5rZWRBY2NvdW50LmlkLCBmcmVzaFRva2Vucyk7XG5cdFx0XHRpZiAodXNlckluZm8uZW1haWxWZXJpZmllZCAmJiAhZGJVc2VyLnVzZXIuZW1haWxWZXJpZmllZCAmJiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCkgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGRiVXNlci51c2VyLmlkLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdFx0fVxuXHRcdGlmIChvdmVycmlkZVVzZXJJbmZvKSB7XG5cdFx0XHRjb25zdCB7IGlkOiBfLCAuLi5yZXN0VXNlckluZm8gfSA9IHVzZXJJbmZvO1xuXHRcdFx0dXNlciA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihkYlVzZXIudXNlci5pZCwge1xuXHRcdFx0XHQuLi5yZXN0VXNlckluZm8sXG5cdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCA/IGRiVXNlci51c2VyLmVtYWlsVmVyaWZpZWQgfHwgdXNlckluZm8uZW1haWxWZXJpZmllZCA6IHVzZXJJbmZvLmVtYWlsVmVyaWZpZWRcblx0XHRcdH0pO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRpZiAoZGlzYWJsZVNpZ25VcCkgcmV0dXJuIHtcblx0XHRcdGVycm9yOiBcInNpZ251cCBkaXNhYmxlZFwiLFxuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdFx0fTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgeyBpZDogXywgLi4ucmVzdFVzZXJJbmZvIH0gPSB1c2VySW5mbztcblx0XHRcdGNvbnN0IGFjY291bnREYXRhID0ge1xuXHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQuYWNjZXNzVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZSxcblx0XHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IHVzZXJJbmZvLmlkLnRvU3RyaW5nKClcblx0XHRcdH07XG5cdFx0XHRjb25zdCB7IHVzZXI6IGNyZWF0ZWRVc2VyLCBhY2NvdW50OiBjcmVhdGVkQWNjb3VudCB9ID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVPQXV0aFVzZXIoe1xuXHRcdFx0XHQuLi5yZXN0VXNlckluZm8sXG5cdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpXG5cdFx0XHR9LCBhY2NvdW50RGF0YSk7XG5cdFx0XHR1c2VyID0gY3JlYXRlZFVzZXI7XG5cdFx0XHRpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGMsIGNyZWF0ZWRBY2NvdW50KTtcblx0XHRcdGlmICghdXNlckluZm8uZW1haWxWZXJpZmllZCAmJiB1c2VyICYmIGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAgJiYgYy5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oYy5jb250ZXh0LnNlY3JldCwgdXNlci5lbWFpbCwgdm9pZCAwLCBjLmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdFx0Y29uc3QgdXJsID0gYCR7Yy5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRcdGF3YWl0IGMuY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHR1cmwsXG5cdFx0XHRcdFx0dG9rZW5cblx0XHRcdFx0fSwgYy5yZXF1ZXN0KSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bG9nZ2VyLmVycm9yKGUpO1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcikgcmV0dXJuIHtcblx0XHRcdFx0ZXJyb3I6IGUubWVzc2FnZSxcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHVzZXJcIixcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdGlmICghdXNlcikgcmV0dXJuIHtcblx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHVzZXJcIixcblx0XHRkYXRhOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdH07XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci5pZCk7XG5cdGlmICghc2Vzc2lvbikgcmV0dXJuIHtcblx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHNlc3Npb25cIixcblx0XHRkYXRhOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdH07XG5cdHJldHVybiB7XG5cdFx0ZGF0YToge1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXJcblx0XHR9LFxuXHRcdGVycm9yOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXJcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saW5rLWFjY291bnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/link-account.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateState: () => (/* binding */ generateState),\n/* harmony export */   parseState: () => (/* binding */ parseState)\n/* harmony export */ });\n/* harmony import */ var _api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/middlewares/oauth.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/random.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/state.ts\nasync function generateState(c, link, additionalData) {\n\tconst callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n\tif (!callbackURL) throw new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"callbackURL is required\" });\n\tconst codeVerifier = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(128);\n\tconst stateData = {\n\t\t...additionalData ? additionalData : {},\n\t\tcallbackURL,\n\t\tcodeVerifier,\n\t\terrorURL: c.body?.errorCallbackURL,\n\t\tnewUserURL: c.body?.newUserCallbackURL,\n\t\tlink,\n\t\texpiresAt: Date.now() + 600 * 1e3,\n\t\trequestSignUp: c.body?.requestSignUp\n\t};\n\tawait (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(stateData);\n\ttry {\n\t\treturn (0,_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateGenericState)(c, stateData);\n\t} catch (error) {\n\t\tc.context.logger.error(\"Failed to create verification\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\tmessage: \"Unable to create verification\",\n\t\t\tcause: error\n\t\t});\n\t}\n}\nasync function parseState(c) {\n\tconst state = c.query.state || c.body.state;\n\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tlet parsedData;\n\ttry {\n\t\tparsedData = await (0,_state_mjs__WEBPACK_IMPORTED_MODULE_3__.parseGenericState)(c, state);\n\t} catch (error) {\n\t\tc.context.logger.error(\"Failed to parse state\", error);\n\t\tif (error instanceof _state_mjs__WEBPACK_IMPORTED_MODULE_3__.StateError && error.code === \"state_security_mismatch\") throw c.redirect(`${errorURL}?error=state_mismatch`);\n\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t}\n\tif (!parsedData.errorURL) parsedData.errorURL = errorURL;\n\tif (parsedData) await (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(parsedData);\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L29hdXRoMi9zdGF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2RDtBQUNEO0FBQy9CO0FBQ3NEO0FBQzVDOztBQUV2QztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQVEsa0JBQWtCLG9DQUFvQztBQUMzRixzQkFBc0Isd0VBQW9CO0FBQzFDO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHlFQUFhO0FBQ3BCO0FBQ0EsU0FBUyxnRUFBb0I7QUFDN0IsR0FBRztBQUNIO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGtCQUFrQjtBQUNqRjtBQUNBO0FBQ0EscUJBQXFCLDZEQUFpQjtBQUN0QyxHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsa0RBQVUsa0VBQWtFLFNBQVM7QUFDNUcsc0JBQXNCLFNBQVM7QUFDL0I7QUFDQTtBQUNBLHVCQUF1Qix5RUFBYTtBQUNwQztBQUNBOztBQUVBO0FBQ3FDO0FBQ3JDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXG9hdXRoMlxcc3RhdGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi4vYXBpL21pZGRsZXdhcmVzL29hdXRoLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCBcIi4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IFN0YXRlRXJyb3IsIGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBwYXJzZUdlbmVyaWNTdGF0ZSB9IGZyb20gXCIuLi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3N0YXRlLnRzXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0YXRlKGMsIGxpbmssIGFkZGl0aW9uYWxEYXRhKSB7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gYy5ib2R5Py5jYWxsYmFja1VSTCB8fCBjLmNvbnRleHQub3B0aW9ucy5iYXNlVVJMO1xuXHRpZiAoIWNhbGxiYWNrVVJMKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiY2FsbGJhY2tVUkwgaXMgcmVxdWlyZWRcIiB9KTtcblx0Y29uc3QgY29kZVZlcmlmaWVyID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMTI4KTtcblx0Y29uc3Qgc3RhdGVEYXRhID0ge1xuXHRcdC4uLmFkZGl0aW9uYWxEYXRhID8gYWRkaXRpb25hbERhdGEgOiB7fSxcblx0XHRjYWxsYmFja1VSTCxcblx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0ZXJyb3JVUkw6IGMuYm9keT8uZXJyb3JDYWxsYmFja1VSTCxcblx0XHRuZXdVc2VyVVJMOiBjLmJvZHk/Lm5ld1VzZXJDYWxsYmFja1VSTCxcblx0XHRsaW5rLFxuXHRcdGV4cGlyZXNBdDogRGF0ZS5ub3coKSArIDYwMCAqIDFlMyxcblx0XHRyZXF1ZXN0U2lnblVwOiBjLmJvZHk/LnJlcXVlc3RTaWduVXBcblx0fTtcblx0YXdhaXQgc2V0T0F1dGhTdGF0ZShzdGF0ZURhdGEpO1xuXHR0cnkge1xuXHRcdHJldHVybiBnZW5lcmF0ZUdlbmVyaWNTdGF0ZShjLCBzdGF0ZURhdGEpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHZlcmlmaWNhdGlvblwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcblx0XHRcdG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGNyZWF0ZSB2ZXJpZmljYXRpb25cIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pO1xuXHR9XG59XG5hc3luYyBmdW5jdGlvbiBwYXJzZVN0YXRlKGMpIHtcblx0Y29uc3Qgc3RhdGUgPSBjLnF1ZXJ5LnN0YXRlIHx8IGMuYm9keS5zdGF0ZTtcblx0Y29uc3QgZXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRsZXQgcGFyc2VkRGF0YTtcblx0dHJ5IHtcblx0XHRwYXJzZWREYXRhID0gYXdhaXQgcGFyc2VHZW5lcmljU3RhdGUoYywgc3RhdGUpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2Ugc3RhdGVcIiwgZXJyb3IpO1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIFN0YXRlRXJyb3IgJiYgZXJyb3IuY29kZSA9PT0gXCJzdGF0ZV9zZWN1cml0eV9taXNtYXRjaFwiKSB0aHJvdyBjLnJlZGlyZWN0KGAke2Vycm9yVVJMfT9lcnJvcj1zdGF0ZV9taXNtYXRjaGApO1xuXHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPXBsZWFzZV9yZXN0YXJ0X3RoZV9wcm9jZXNzYCk7XG5cdH1cblx0aWYgKCFwYXJzZWREYXRhLmVycm9yVVJMKSBwYXJzZWREYXRhLmVycm9yVVJMID0gZXJyb3JVUkw7XG5cdGlmIChwYXJzZWREYXRhKSBhd2FpdCBzZXRPQXV0aFN0YXRlKHBhcnNlZERhdGEpO1xuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0ZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptOAuthToken: () => (/* binding */ decryptOAuthToken),\n/* harmony export */   setTokenUtil: () => (/* binding */ setTokenUtil)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n\n\n//#region src/oauth2/utils.ts\nfunction decryptOAuthToken(token, ctx) {\n\tif (!token) return token;\n\tif (ctx.options.account?.encryptOAuthTokens) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\nfunction setTokenUtil(token, ctx) {\n\tif (ctx.options.account?.encryptOAuthTokens && token) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L29hdXRoMi91dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlFOztBQUV6RTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsbUVBQWdCO0FBQ3JFO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsOERBQThELG1FQUFnQjtBQUM5RTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDMkM7QUFDM0MiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcb2F1dGgyXFx1dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3V0aWxzLnRzXG5mdW5jdGlvbiBkZWNyeXB0T0F1dGhUb2tlbih0b2tlbiwgY3R4KSB7XG5cdGlmICghdG9rZW4pIHJldHVybiB0b2tlbjtcblx0aWYgKGN0eC5vcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucykgcmV0dXJuIHN5bW1ldHJpY0RlY3J5cHQoe1xuXHRcdGtleTogY3R4LnNlY3JldCxcblx0XHRkYXRhOiB0b2tlblxuXHR9KTtcblx0cmV0dXJuIHRva2VuO1xufVxuZnVuY3Rpb24gc2V0VG9rZW5VdGlsKHRva2VuLCBjdHgpIHtcblx0aWYgKGN0eC5vcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucyAmJiB0b2tlbikgcmV0dXJuIHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdGtleTogY3R4LnNlY3JldCxcblx0XHRkYXRhOiB0b2tlblxuXHR9KTtcblx0cmV0dXJuIHRva2VuO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRlY3J5cHRPQXV0aFRva2VuLCBzZXRUb2tlblV0aWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateError: () => (/* binding */ StateError),\n/* harmony export */   generateGenericState: () => (/* binding */ generateGenericState),\n/* harmony export */   parseGenericState: () => (/* binding */ parseGenericState)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto/random.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cookies/index.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@4.3.6/node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n\n//#region src/state.ts\nconst stateDataSchema = zod__WEBPACK_IMPORTED_MODULE_4__.looseObject({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\tcodeVerifier: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\terrorURL: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n\tnewUserURL: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_4__.number(),\n\tlink: zod__WEBPACK_IMPORTED_MODULE_4__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_4__.coerce.string()\n\t}).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().optional()\n});\nvar StateError = class extends _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError {\n\tcode;\n\tdetails;\n\tconstructor(message, options) {\n\t\tsuper(message, options);\n\t\tthis.code = options.code;\n\t\tthis.details = options.details;\n\t}\n};\nasync function generateGenericState(c, stateData, settings) {\n\tconst state = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32);\n\tif (c.context.oauthConfig.storeStateStrategy === \"cookie\") {\n\t\tconst encryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncrypt)({\n\t\t\tkey: c.context.secret,\n\t\t\tdata: JSON.stringify(stateData)\n\t\t});\n\t\tconst stateCookie$1 = c.context.createAuthCookie(settings?.cookieName ?? \"oauth_state\", { maxAge: 600 });\n\t\tc.setCookie(stateCookie$1.name, encryptedData, stateCookie$1.attributes);\n\t\treturn {\n\t\t\tstate,\n\t\t\tcodeVerifier: stateData.codeVerifier\n\t\t};\n\t}\n\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"state\", { maxAge: 300 });\n\tawait c.setSignedCookie(stateCookie.name, state, c.context.secret, stateCookie.attributes);\n\tconst expiresAt = /* @__PURE__ */ new Date();\n\texpiresAt.setMinutes(expiresAt.getMinutes() + 10);\n\tconst verification = await c.context.internalAdapter.createVerificationValue({\n\t\tvalue: JSON.stringify(stateData),\n\t\tidentifier: state,\n\t\texpiresAt\n\t});\n\tif (!verification) throw new StateError(\"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\", { code: \"state_generation_error\" });\n\treturn {\n\t\tstate: verification.identifier,\n\t\tcodeVerifier: stateData.codeVerifier\n\t};\n}\nasync function parseGenericState(c, state, settings) {\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\tlet parsedData;\n\tif (storeStateStrategy === \"cookie\") {\n\t\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"oauth_state\");\n\t\tconst encryptedData = c.getCookie(stateCookie.name);\n\t\tif (!encryptedData) throw new StateError(\"State mismatch: auth state cookie not found\", {\n\t\t\tcode: \"state_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\ttry {\n\t\t\tconst decryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecrypt)({\n\t\t\t\tkey: c.context.secret,\n\t\t\t\tdata: encryptedData\n\t\t\t});\n\t\t\tparsedData = stateDataSchema.parse(JSON.parse(decryptedData));\n\t\t} catch (error) {\n\t\t\tthrow new StateError(\"State invalid: Failed to decrypt or parse auth state\", {\n\t\t\t\tcode: \"state_invalid\",\n\t\t\t\tdetails: { state },\n\t\t\t\tcause: error\n\t\t\t});\n\t\t}\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(c, stateCookie);\n\t} else {\n\t\tconst data = await c.context.internalAdapter.findVerificationValue(state);\n\t\tif (!data) throw new StateError(\"State mismatch: verification not found\", {\n\t\t\tcode: \"state_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\tparsedData = stateDataSchema.parse(JSON.parse(data.value));\n\t\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"state\");\n\t\tconst stateCookieValue = await c.getSignedCookie(stateCookie.name, c.context.secret);\n\t\tif (!c.context.oauthConfig.skipStateCookieCheck && (!stateCookieValue || stateCookieValue !== state)) throw new StateError(\"State mismatch: State not persisted correctly\", {\n\t\t\tcode: \"state_security_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(c, stateCookie);\n\t\tawait c.context.internalAdapter.deleteVerificationValue(data.id);\n\t}\n\tif (parsedData.expiresAt < Date.now()) throw new StateError(\"Invalid state: request expired\", {\n\t\tcode: \"state_mismatch\",\n\t\tdetails: { expiresAt: parsedData.expiresAt }\n\t});\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3N0YXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEyRDtBQUNhO0FBQ3JCO0FBQ087QUFDakM7O0FBRXpCO0FBQ0Esd0JBQXdCLDRDQUFhO0FBQ3JDLGNBQWMsdUNBQVE7QUFDdEIsZUFBZSx1Q0FBUTtBQUN2QixXQUFXLHVDQUFRO0FBQ25CLGFBQWEsdUNBQVE7QUFDckIsWUFBWSx1Q0FBUTtBQUNwQixPQUFPLHVDQUFRO0FBQ2YsU0FBUyx1Q0FBUTtBQUNqQixVQUFVLDhDQUFlO0FBQ3pCLEVBQUU7QUFDRixnQkFBZ0Isd0NBQVM7QUFDekIsQ0FBQztBQUNELCtCQUErQixvRUFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdFQUFvQjtBQUNuQztBQUNBLDhCQUE4QixtRUFBZ0I7QUFDOUM7QUFDQTtBQUNBLEdBQUc7QUFDSCw0RkFBNEYsYUFBYTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsYUFBYTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixrTEFBa0wsZ0NBQWdDO0FBQ2xOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLEdBQUc7QUFDSDtBQUNBLCtCQUErQixtRUFBZ0I7QUFDL0M7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRSxnRUFBWTtBQUNkLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsR0FBRztBQUNILEVBQUUsZ0VBQVk7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUMrRDtBQUMvRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzdGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IGV4cGlyZUNvb2tpZSB9IGZyb20gXCIuL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL3N0YXRlLnRzXG5jb25zdCBzdGF0ZURhdGFTY2hlbWEgPSB6Lmxvb3NlT2JqZWN0KHtcblx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCksXG5cdGNvZGVWZXJpZmllcjogei5zdHJpbmcoKSxcblx0ZXJyb3JVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0bmV3VXNlclVSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRleHBpcmVzQXQ6IHoubnVtYmVyKCksXG5cdGxpbms6IHoub2JqZWN0KHtcblx0XHRlbWFpbDogei5zdHJpbmcoKSxcblx0XHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHJlcXVlc3RTaWduVXA6IHouYm9vbGVhbigpLm9wdGlvbmFsKClcbn0pO1xudmFyIFN0YXRlRXJyb3IgPSBjbGFzcyBleHRlbmRzIEJldHRlckF1dGhFcnJvciB7XG5cdGNvZGU7XG5cdGRldGFpbHM7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcblx0XHRzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcblx0XHR0aGlzLmNvZGUgPSBvcHRpb25zLmNvZGU7XG5cdFx0dGhpcy5kZXRhaWxzID0gb3B0aW9ucy5kZXRhaWxzO1xuXHR9XG59O1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVHZW5lcmljU3RhdGUoYywgc3RhdGVEYXRhLCBzZXR0aW5ncykge1xuXHRjb25zdCBzdGF0ZSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyKTtcblx0aWYgKGMuY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3kgPT09IFwiY29va2llXCIpIHtcblx0XHRjb25zdCBlbmNyeXB0ZWREYXRhID0gYXdhaXQgc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0XHRrZXk6IGMuY29udGV4dC5zZWNyZXQsXG5cdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShzdGF0ZURhdGEpXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc3RhdGVDb29raWUkMSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKHNldHRpbmdzPy5jb29raWVOYW1lID8/IFwib2F1dGhfc3RhdGVcIiwgeyBtYXhBZ2U6IDYwMCB9KTtcblx0XHRjLnNldENvb2tpZShzdGF0ZUNvb2tpZSQxLm5hbWUsIGVuY3J5cHRlZERhdGEsIHN0YXRlQ29va2llJDEuYXR0cmlidXRlcyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0YXRlLFxuXHRcdFx0Y29kZVZlcmlmaWVyOiBzdGF0ZURhdGEuY29kZVZlcmlmaWVyXG5cdFx0fTtcblx0fVxuXHRjb25zdCBzdGF0ZUNvb2tpZSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKHNldHRpbmdzPy5jb29raWVOYW1lID8/IFwic3RhdGVcIiwgeyBtYXhBZ2U6IDMwMCB9KTtcblx0YXdhaXQgYy5zZXRTaWduZWRDb29raWUoc3RhdGVDb29raWUubmFtZSwgc3RhdGUsIGMuY29udGV4dC5zZWNyZXQsIHN0YXRlQ29va2llLmF0dHJpYnV0ZXMpO1xuXHRjb25zdCBleHBpcmVzQXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0ZXhwaXJlc0F0LnNldE1pbnV0ZXMoZXhwaXJlc0F0LmdldE1pbnV0ZXMoKSArIDEwKTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0dmFsdWU6IEpTT04uc3RyaW5naWZ5KHN0YXRlRGF0YSksXG5cdFx0aWRlbnRpZmllcjogc3RhdGUsXG5cdFx0ZXhwaXJlc0F0XG5cdH0pO1xuXHRpZiAoIXZlcmlmaWNhdGlvbikgdGhyb3cgbmV3IFN0YXRlRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHZlcmlmaWNhdGlvbi4gTWFrZSBzdXJlIHRoZSBkYXRhYmFzZSBhZGFwdGVyIGlzIHByb3Blcmx5IHdvcmtpbmcgYW5kIHRoZXJlIGlzIGEgdmVyaWZpY2F0aW9uIHRhYmxlIGluIHRoZSBkYXRhYmFzZVwiLCB7IGNvZGU6IFwic3RhdGVfZ2VuZXJhdGlvbl9lcnJvclwiIH0pO1xuXHRyZXR1cm4ge1xuXHRcdHN0YXRlOiB2ZXJpZmljYXRpb24uaWRlbnRpZmllcixcblx0XHRjb2RlVmVyaWZpZXI6IHN0YXRlRGF0YS5jb2RlVmVyaWZpZXJcblx0fTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlR2VuZXJpY1N0YXRlKGMsIHN0YXRlLCBzZXR0aW5ncykge1xuXHRjb25zdCBzdG9yZVN0YXRlU3RyYXRlZ3kgPSBjLmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5O1xuXHRsZXQgcGFyc2VkRGF0YTtcblx0aWYgKHN0b3JlU3RhdGVTdHJhdGVneSA9PT0gXCJjb29raWVcIikge1xuXHRcdGNvbnN0IHN0YXRlQ29va2llID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoc2V0dGluZ3M/LmNvb2tpZU5hbWUgPz8gXCJvYXV0aF9zdGF0ZVwiKTtcblx0XHRjb25zdCBlbmNyeXB0ZWREYXRhID0gYy5nZXRDb29raWUoc3RhdGVDb29raWUubmFtZSk7XG5cdFx0aWYgKCFlbmNyeXB0ZWREYXRhKSB0aHJvdyBuZXcgU3RhdGVFcnJvcihcIlN0YXRlIG1pc21hdGNoOiBhdXRoIHN0YXRlIGNvb2tpZSBub3QgZm91bmRcIiwge1xuXHRcdFx0Y29kZTogXCJzdGF0ZV9taXNtYXRjaFwiLFxuXHRcdFx0ZGV0YWlsczogeyBzdGF0ZSB9XG5cdFx0fSk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRlY3J5cHRlZERhdGEgPSBhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRcdFx0a2V5OiBjLmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0XHRkYXRhOiBlbmNyeXB0ZWREYXRhXG5cdFx0XHR9KTtcblx0XHRcdHBhcnNlZERhdGEgPSBzdGF0ZURhdGFTY2hlbWEucGFyc2UoSlNPTi5wYXJzZShkZWNyeXB0ZWREYXRhKSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgaW52YWxpZDogRmFpbGVkIHRvIGRlY3J5cHQgb3IgcGFyc2UgYXV0aCBzdGF0ZVwiLCB7XG5cdFx0XHRcdGNvZGU6IFwic3RhdGVfaW52YWxpZFwiLFxuXHRcdFx0XHRkZXRhaWxzOiB7IHN0YXRlIH0sXG5cdFx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGV4cGlyZUNvb2tpZShjLCBzdGF0ZUNvb2tpZSk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKHN0YXRlKTtcblx0XHRpZiAoIWRhdGEpIHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgbWlzbWF0Y2g6IHZlcmlmaWNhdGlvbiBub3QgZm91bmRcIiwge1xuXHRcdFx0Y29kZTogXCJzdGF0ZV9taXNtYXRjaFwiLFxuXHRcdFx0ZGV0YWlsczogeyBzdGF0ZSB9XG5cdFx0fSk7XG5cdFx0cGFyc2VkRGF0YSA9IHN0YXRlRGF0YVNjaGVtYS5wYXJzZShKU09OLnBhcnNlKGRhdGEudmFsdWUpKTtcblx0XHRjb25zdCBzdGF0ZUNvb2tpZSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKHNldHRpbmdzPy5jb29raWVOYW1lID8/IFwic3RhdGVcIik7XG5cdFx0Y29uc3Qgc3RhdGVDb29raWVWYWx1ZSA9IGF3YWl0IGMuZ2V0U2lnbmVkQ29va2llKHN0YXRlQ29va2llLm5hbWUsIGMuY29udGV4dC5zZWNyZXQpO1xuXHRcdGlmICghYy5jb250ZXh0Lm9hdXRoQ29uZmlnLnNraXBTdGF0ZUNvb2tpZUNoZWNrICYmICghc3RhdGVDb29raWVWYWx1ZSB8fCBzdGF0ZUNvb2tpZVZhbHVlICE9PSBzdGF0ZSkpIHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgbWlzbWF0Y2g6IFN0YXRlIG5vdCBwZXJzaXN0ZWQgY29ycmVjdGx5XCIsIHtcblx0XHRcdGNvZGU6IFwic3RhdGVfc2VjdXJpdHlfbWlzbWF0Y2hcIixcblx0XHRcdGRldGFpbHM6IHsgc3RhdGUgfVxuXHRcdH0pO1xuXHRcdGV4cGlyZUNvb2tpZShjLCBzdGF0ZUNvb2tpZSk7XG5cdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZShkYXRhLmlkKTtcblx0fVxuXHRpZiAocGFyc2VkRGF0YS5leHBpcmVzQXQgPCBEYXRlLm5vdygpKSB0aHJvdyBuZXcgU3RhdGVFcnJvcihcIkludmFsaWQgc3RhdGU6IHJlcXVlc3QgZXhwaXJlZFwiLCB7XG5cdFx0Y29kZTogXCJzdGF0ZV9taXNtYXRjaFwiLFxuXHRcdGRldGFpbHM6IHsgZXhwaXJlc0F0OiBwYXJzZWREYXRhLmV4cGlyZXNBdCB9XG5cdH0pO1xuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTdGF0ZUVycm9yLCBnZW5lcmF0ZUdlbmVyaWNTdGF0ZSwgcGFyc2VHZW5lcmljU3RhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SECRET: () => (/* binding */ DEFAULT_SECRET)\n/* harmony export */ });\n//#region src/utils/constants.ts\nconst DEFAULT_SECRET = \"better-auth-secret-12345678901234567890\";\n\n//#endregion\n\n//# sourceMappingURL=constants.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2NvbnN0YW50cy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGNvbnN0YW50cy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9jb25zdGFudHMudHNcbmNvbnN0IERFRkFVTFRfU0VDUkVUID0gXCJiZXR0ZXItYXV0aC1zZWNyZXQtMTIzNDU2Nzg5MDEyMzQ1Njc4OTBcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBERUZBVUxUX1NFQ1JFVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/constants.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDate: () => (/* binding */ getDate)\n/* harmony export */ });\n//#region src/utils/date.ts\nconst getDate = (span, unit = \"ms\") => {\n\treturn new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\n//#endregion\n\n//# sourceMappingURL=date.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2RhdGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcZGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9kYXRlLnRzXG5jb25zdCBnZXREYXRlID0gKHNwYW4sIHVuaXQgPSBcIm1zXCIpID0+IHtcblx0cmV0dXJuIG5ldyBEYXRlKERhdGUubm93KCkgKyAodW5pdCA9PT0gXCJzZWNcIiA/IHNwYW4gKiAxZTMgOiBzcGFuKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldERhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/date.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIp: () => (/* binding */ getIp)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n//#region src/utils/get-request-ip.ts\nconst LOCALHOST_IP = \"127.0.0.1\";\nfunction getIp(req, options) {\n\tif (options.advanced?.ipAddress?.disableIpTracking) return null;\n\tconst headers = \"headers\" in req ? req.headers : req;\n\tconst ipHeaders = options.advanced?.ipAddress?.ipAddressHeaders || [\"x-forwarded-for\"];\n\tfor (const key of ipHeaders) {\n\t\tconst value = \"get\" in headers ? headers.get(key) : headers[key];\n\t\tif (typeof value === \"string\") {\n\t\t\tconst ip = value.split(\",\")[0].trim();\n\t\t\tif ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__.isValidIP)(ip)) return (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__.normalizeIP)(ip, { ipv6Subnet: options.advanced?.ipAddress?.ipv6Subnet });\n\t\t}\n\t}\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isTest)() || (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) return LOCALHOST_IP;\n\treturn null;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-request-ip.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2dldC1yZXF1ZXN0LWlwLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEQ7QUFDRzs7QUFFakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLGtFQUFTLGFBQWEsb0VBQVcsT0FBTyxxREFBcUQ7QUFDcEc7QUFDQTtBQUNBLEtBQUssNkRBQU0sTUFBTSxvRUFBYTtBQUM5QjtBQUNBOztBQUVBO0FBQ2lCO0FBQ2pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFxnZXQtcmVxdWVzdC1pcC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgaXNUZXN0IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgaXNWYWxpZElQLCBub3JtYWxpemVJUCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2dldC1yZXF1ZXN0LWlwLnRzXG5jb25zdCBMT0NBTEhPU1RfSVAgPSBcIjEyNy4wLjAuMVwiO1xuZnVuY3Rpb24gZ2V0SXAocmVxLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmRpc2FibGVJcFRyYWNraW5nKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgaGVhZGVycyA9IFwiaGVhZGVyc1wiIGluIHJlcSA/IHJlcS5oZWFkZXJzIDogcmVxO1xuXHRjb25zdCBpcEhlYWRlcnMgPSBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwQWRkcmVzc0hlYWRlcnMgfHwgW1wieC1mb3J3YXJkZWQtZm9yXCJdO1xuXHRmb3IgKGNvbnN0IGtleSBvZiBpcEhlYWRlcnMpIHtcblx0XHRjb25zdCB2YWx1ZSA9IFwiZ2V0XCIgaW4gaGVhZGVycyA/IGhlYWRlcnMuZ2V0KGtleSkgOiBoZWFkZXJzW2tleV07XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc3QgaXAgPSB2YWx1ZS5zcGxpdChcIixcIilbMF0udHJpbSgpO1xuXHRcdFx0aWYgKGlzVmFsaWRJUChpcCkpIHJldHVybiBub3JtYWxpemVJUChpcCwgeyBpcHY2U3VibmV0OiBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwdjZTdWJuZXQgfSk7XG5cdFx0fVxuXHR9XG5cdGlmIChpc1Rlc3QoKSB8fCBpc0RldmVsb3BtZW50KCkpIHJldHVybiBMT0NBTEhPU1RfSVA7XG5cdHJldHVybiBudWxsO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldElwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtcmVxdWVzdC1pcC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/get-request-ip.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HIDE_METADATA: () => (/* binding */ HIDE_METADATA)\n/* harmony export */ });\n//#region src/utils/hide-metadata.ts\nconst HIDE_METADATA = { scope: \"server\" };\n\n//#endregion\n\n//# sourceMappingURL=hide-metadata.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLHdCQUF3Qjs7QUFFeEI7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGhpZGUtbWV0YWRhdGEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvaGlkZS1tZXRhZGF0YS50c1xuY29uc3QgSElERV9NRVRBREFUQSA9IHsgc2NvcGU6IFwic2VydmVyXCIgfTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBISURFX01FVEFEQVRBIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaWRlLW1ldGFkYXRhLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs ***!
  \***************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateId: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__.generateId)\n/* harmony export */ });\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../oauth2/state.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hide-metadata.mjs */ \"(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RTtBQUNQO0FBQ1o7QUFDaUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZUdlbmVyaWNTdGF0ZSwgcGFyc2VHZW5lcmljU3RhdGUgfSBmcm9tIFwiLi4vc3RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH0gZnJvbSBcIi4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkJDEgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuZXhwb3J0IHsgZ2VuZXJhdGVJZCQxIGFzIGdlbmVyYXRlSWQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPromise: () => (/* binding */ isPromise)\n/* harmony export */ });\n//#region src/utils/is-promise.ts\nfunction isPromise(obj) {\n\treturn !!obj && (typeof obj === \"object\" || typeof obj === \"function\") && typeof obj.then === \"function\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-promise.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2lzLXByb21pc2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaXMtcHJvbWlzZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1wcm9taXNlLnRzXG5mdW5jdGlvbiBpc1Byb21pc2Uob2JqKSB7XG5cdHJldHVybiAhIW9iaiAmJiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIpICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzUHJvbWlzZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtcHJvbWlzZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-promise.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkPassword: () => (/* binding */ checkPassword),\n/* harmony export */   validatePassword: () => (/* binding */ validatePassword)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/.pnpm/better-call@1.1.8_zod@4.3.6/node_modules/better-call/dist/index.mjs\");\n\n\n//#region src/utils/password.ts\nasync function validatePassword(ctx, data) {\n\tconst credentialAccount = (await ctx.context.internalAdapter.findAccounts(data.userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword) return false;\n\treturn await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: data.password\n\t});\n}\nasync function checkPassword(userId, c) {\n\tconst credentialAccount = (await c.context.internalAdapter.findAccounts(userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword || !c.body.password) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"No password credential found\" });\n\tif (!await c.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: c.body.password\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"Invalid password\" });\n\treturn true;\n}\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3Bhc3N3b3JkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsaURBQVEsa0JBQWtCLHlDQUF5QztBQUM5STtBQUNBO0FBQ0E7QUFDQSxFQUFFLGFBQWEsaURBQVEsa0JBQWtCLDZCQUE2QjtBQUN0RTtBQUNBOztBQUVBO0FBQzJDO0FBQzNDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFxwYXNzd29yZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9wYXNzd29yZC50c1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZChjdHgsIGRhdGEpIHtcblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhkYXRhLnVzZXJJZCkpPy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiKTtcblx0Y29uc3QgY3VycmVudFBhc3N3b3JkID0gY3JlZGVudGlhbEFjY291bnQ/LnBhc3N3b3JkO1xuXHRpZiAoIWNyZWRlbnRpYWxBY2NvdW50IHx8ICFjdXJyZW50UGFzc3dvcmQpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkXG5cdH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gY2hlY2tQYXNzd29yZCh1c2VySWQsIGMpIHtcblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHModXNlcklkKSk/LmZpbmQoKGFjY291bnQpID0+IGFjY291bnQucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3JlZGVudGlhbEFjY291bnQgfHwgIWN1cnJlbnRQYXNzd29yZCB8fCAhYy5ib2R5LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiTm8gcGFzc3dvcmQgY3JlZGVudGlhbCBmb3VuZFwiIH0pO1xuXHRpZiAoIWF3YWl0IGMuY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuXHRcdGhhc2g6IGN1cnJlbnRQYXNzd29yZCxcblx0XHRwYXNzd29yZDogYy5ib2R5LnBhc3N3b3JkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiSW52YWxpZCBwYXNzd29yZFwiIH0pO1xuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjaGVja1Bhc3N3b3JkLCB2YWxpZGF0ZVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ms: () => (/* binding */ ms),\n/* harmony export */   sec: () => (/* binding */ sec)\n/* harmony export */ });\n//#region src/utils/time.ts\nconst SEC = 1e3;\nconst MIN = SEC * 60;\nconst HOUR = MIN * 60;\nconst DAY = HOUR * 24;\nconst WEEK = DAY * 7;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;\nfunction parse(value) {\n\tconst match = REGEX.exec(value);\n\tif (!match || match[4] && match[1]) throw new TypeError(`Invalid time string format: \"${value}\". Use formats like \"7d\", \"30m\", \"1 hour\", etc.`);\n\tconst n = parseFloat(match[2]);\n\tconst unit = match[3].toLowerCase();\n\tlet result;\n\tswitch (unit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\":\n\t\t\tresult = n * YEAR;\n\t\t\tbreak;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\":\n\t\t\tresult = n * MONTH;\n\t\t\tbreak;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\":\n\t\t\tresult = n * WEEK;\n\t\t\tbreak;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\":\n\t\t\tresult = n * DAY;\n\t\t\tbreak;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\":\n\t\t\tresult = n * HOUR;\n\t\t\tbreak;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\":\n\t\t\tresult = n * MIN;\n\t\t\tbreak;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\":\n\t\t\tresult = n * SEC;\n\t\t\tbreak;\n\t\tdefault: throw new TypeError(`Unknown time unit: \"${unit}\"`);\n\t}\n\tif (match[1] === \"-\" || match[4] === \"ago\") return -result;\n\treturn result;\n}\n/**\n* Parse a time string and return the value in milliseconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in milliseconds\n* @throws TypeError if the string format is invalid\n*\n* @example\n* ms(\"1d\")          // 86400000\n* ms(\"2 hours\")     // 7200000\n* ms(\"30s\")         // 30000\n* ms(\"2 hours ago\") // -7200000\n*/\nfunction ms(value) {\n\treturn parse(value);\n}\n/**\n* Parse a time string and return the value in seconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in seconds (rounded)\n* @throws TypeError if the string format is invalid\n*\n* @example\n* sec(\"1d\")          // 86400\n* sec(\"2 hours\")     // 7200\n* sec(\"-30s\")        // -30\n* sec(\"2 hours ago\") // -7200\n*/\nfunction sec(value) {\n\treturn Math.round(parse(value) / 1e3);\n}\n\n//#endregion\n\n//# sourceMappingURL=time.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3RpbWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixNQUFNO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsS0FBSztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHRpbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGltZS50c1xuY29uc3QgU0VDID0gMWUzO1xuY29uc3QgTUlOID0gU0VDICogNjA7XG5jb25zdCBIT1VSID0gTUlOICogNjA7XG5jb25zdCBEQVkgPSBIT1VSICogMjQ7XG5jb25zdCBXRUVLID0gREFZICogNztcbmNvbnN0IE1PTlRIID0gREFZICogMzA7XG5jb25zdCBZRUFSID0gREFZICogMzY1LjI1O1xuY29uc3QgUkVHRVggPSAvXihcXCt8XFwtKT8gPyhcXGQrfFxcZCtcXC5cXGQrKSA/KHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8bW9udGhzP3xtb3x5ZWFycz98eXJzP3x5KSg/OiAoYWdvfGZyb20gbm93KSk/JC9pO1xuZnVuY3Rpb24gcGFyc2UodmFsdWUpIHtcblx0Y29uc3QgbWF0Y2ggPSBSRUdFWC5leGVjKHZhbHVlKTtcblx0aWYgKCFtYXRjaCB8fCBtYXRjaFs0XSAmJiBtYXRjaFsxXSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB0aW1lIHN0cmluZyBmb3JtYXQ6IFwiJHt2YWx1ZX1cIi4gVXNlIGZvcm1hdHMgbGlrZSBcIjdkXCIsIFwiMzBtXCIsIFwiMSBob3VyXCIsIGV0Yy5gKTtcblx0Y29uc3QgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xuXHRjb25zdCB1bml0ID0gbWF0Y2hbM10udG9Mb3dlckNhc2UoKTtcblx0bGV0IHJlc3VsdDtcblx0c3dpdGNoICh1bml0KSB7XG5cdFx0Y2FzZSBcInllYXJzXCI6XG5cdFx0Y2FzZSBcInllYXJcIjpcblx0XHRjYXNlIFwieXJzXCI6XG5cdFx0Y2FzZSBcInlyXCI6XG5cdFx0Y2FzZSBcInlcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBZRUFSO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1vbnRoc1wiOlxuXHRcdGNhc2UgXCJtb250aFwiOlxuXHRcdGNhc2UgXCJtb1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIE1PTlRIO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIndlZWtzXCI6XG5cdFx0Y2FzZSBcIndlZWtcIjpcblx0XHRjYXNlIFwid1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIFdFRUs7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiZGF5c1wiOlxuXHRcdGNhc2UgXCJkYXlcIjpcblx0XHRjYXNlIFwiZFwiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIERBWTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJob3Vyc1wiOlxuXHRcdGNhc2UgXCJob3VyXCI6XG5cdFx0Y2FzZSBcImhyc1wiOlxuXHRcdGNhc2UgXCJoclwiOlxuXHRcdGNhc2UgXCJoXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogSE9VUjtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJtaW51dGVzXCI6XG5cdFx0Y2FzZSBcIm1pbnV0ZVwiOlxuXHRcdGNhc2UgXCJtaW5zXCI6XG5cdFx0Y2FzZSBcIm1pblwiOlxuXHRcdGNhc2UgXCJtXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogTUlOO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInNlY29uZHNcIjpcblx0XHRjYXNlIFwic2Vjb25kXCI6XG5cdFx0Y2FzZSBcInNlY3NcIjpcblx0XHRjYXNlIFwic2VjXCI6XG5cdFx0Y2FzZSBcInNcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBTRUM7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIHRpbWUgdW5pdDogXCIke3VuaXR9XCJgKTtcblx0fVxuXHRpZiAobWF0Y2hbMV0gPT09IFwiLVwiIHx8IG1hdGNoWzRdID09PSBcImFnb1wiKSByZXR1cm4gLXJlc3VsdDtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBQYXJzZSBhIHRpbWUgc3RyaW5nIGFuZCByZXR1cm4gdGhlIHZhbHVlIGluIG1pbGxpc2Vjb25kcy5cbipcbiogQHBhcmFtIHZhbHVlIC0gQSB0aW1lIHN0cmluZyBsaWtlIFwiN2RcIiwgXCIzMG1cIiwgXCIxIGhvdXJcIiwgXCIyIGhvdXJzIGFnb1wiXG4qIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUgaW4gbWlsbGlzZWNvbmRzXG4qIEB0aHJvd3MgVHlwZUVycm9yIGlmIHRoZSBzdHJpbmcgZm9ybWF0IGlzIGludmFsaWRcbipcbiogQGV4YW1wbGVcbiogbXMoXCIxZFwiKSAgICAgICAgICAvLyA4NjQwMDAwMFxuKiBtcyhcIjIgaG91cnNcIikgICAgIC8vIDcyMDAwMDBcbiogbXMoXCIzMHNcIikgICAgICAgICAvLyAzMDAwMFxuKiBtcyhcIjIgaG91cnMgYWdvXCIpIC8vIC03MjAwMDAwXG4qL1xuZnVuY3Rpb24gbXModmFsdWUpIHtcblx0cmV0dXJuIHBhcnNlKHZhbHVlKTtcbn1cbi8qKlxuKiBQYXJzZSBhIHRpbWUgc3RyaW5nIGFuZCByZXR1cm4gdGhlIHZhbHVlIGluIHNlY29uZHMuXG4qXG4qIEBwYXJhbSB2YWx1ZSAtIEEgdGltZSBzdHJpbmcgbGlrZSBcIjdkXCIsIFwiMzBtXCIsIFwiMSBob3VyXCIsIFwiMiBob3VycyBhZ29cIlxuKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlIGluIHNlY29uZHMgKHJvdW5kZWQpXG4qIEB0aHJvd3MgVHlwZUVycm9yIGlmIHRoZSBzdHJpbmcgZm9ybWF0IGlzIGludmFsaWRcbipcbiogQGV4YW1wbGVcbiogc2VjKFwiMWRcIikgICAgICAgICAgLy8gODY0MDBcbiogc2VjKFwiMiBob3Vyc1wiKSAgICAgLy8gNzIwMFxuKiBzZWMoXCItMzBzXCIpICAgICAgICAvLyAtMzBcbiogc2VjKFwiMiBob3VycyBhZ29cIikgLy8gLTcyMDBcbiovXG5mdW5jdGlvbiBzZWModmFsdWUpIHtcblx0cmV0dXJuIE1hdGgucm91bmQocGFyc2UodmFsdWUpIC8gMWUzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtcywgc2VjIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/time.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3VybC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTRDO0FBQ2M7O0FBRTFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVksb0VBQWUsc0JBQXNCLElBQUk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRixvRUFBZSxzQkFBc0IsSUFBSTtBQUM1SCxHQUFHO0FBQ0gsdUJBQXVCLG9FQUFlO0FBQ3RDLFlBQVksb0VBQWUsc0JBQXNCLElBQUksdUNBQXVDLGNBQWM7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsS0FBSztBQUMvQyxXQUFXLFdBQVcsRUFBRSxLQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxLQUFLLHlDQUF5QyxLQUFLLHVCQUF1QixJQUFJLDJCQUEyQixJQUFJLElBQUksRUFBRSxHQUFHLElBQUksUUFBUSxJQUFJLGdEQUFnRCxJQUFJLHdDQUF3QyxJQUFJO0FBQzFRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzREFBRyxvQkFBb0Isc0RBQUcsZ0NBQWdDLHNEQUFHLDJCQUEyQixzREFBRyxnQ0FBZ0Msc0RBQUcsMEJBQTBCLHNEQUFHLG9CQUFvQixzREFBRztBQUNwTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaUJBQWlCLEtBQUssWUFBWTtBQUN4RCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9FQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDdUQ7QUFDdkQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHVybC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdXJsLnRzXG5mdW5jdGlvbiBjaGVja0hhc1BhdGgodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgVVJMKHVybCkucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKSB8fCBcIi9cIikgIT09IFwiL1wiO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGFzc2VydEhhc1Byb3RvY29sKHVybCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcblx0XHRpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHA6XCIgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFVSTCBtdXN0IGluY2x1ZGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLydgKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBCZXR0ZXJBdXRoRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gLCB7IGNhdXNlOiBlcnJvciB9KTtcblx0fVxufVxuZnVuY3Rpb24gd2l0aFBhdGgodXJsLCBwYXRoID0gXCIvYXBpL2F1dGhcIikge1xuXHRhc3NlcnRIYXNQcm90b2NvbCh1cmwpO1xuXHRpZiAoY2hlY2tIYXNQYXRoKHVybCkpIHJldHVybiB1cmw7XG5cdGNvbnN0IHRyaW1tZWRVcmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0aWYgKCFwYXRoIHx8IHBhdGggPT09IFwiL1wiKSByZXR1cm4gdHJpbW1lZFVybDtcblx0cGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcblx0cmV0dXJuIGAke3RyaW1tZWRVcmx9JHtwYXRofWA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3h5SGVhZGVyKGhlYWRlciwgdHlwZSkge1xuXHRpZiAoIWhlYWRlciB8fCBoZWFkZXIudHJpbSgpID09PSBcIlwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlID09PSBcInByb3RvXCIpIHJldHVybiBoZWFkZXIgPT09IFwiaHR0cFwiIHx8IGhlYWRlciA9PT0gXCJodHRwc1wiO1xuXHRpZiAodHlwZSA9PT0gXCJob3N0XCIpIHtcblx0XHRpZiAoW1xuXHRcdFx0L1xcLlxcLi8sXG5cdFx0XHQvXFwwLyxcblx0XHRcdC9bXFxzXS8sXG5cdFx0XHQvXlsuXS8sXG5cdFx0XHQvWzw+J1wiXS8sXG5cdFx0XHQvamF2YXNjcmlwdDovaSxcblx0XHRcdC9maWxlOi9pLFxuXHRcdFx0L2RhdGE6L2lcblx0XHRdLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChoZWFkZXIpKSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiAvXlthLXpBLVowLTldKFthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oXFwuW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKDpbMC05XXsxLDV9KT8kLy50ZXN0KGhlYWRlcikgfHwgL14oXFxkezEsM31cXC4pezN9XFxkezEsM30oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXlxcW1swLTlhLWZBLUY6XStcXF0oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXmxvY2FsaG9zdCg6WzAtOV17MSw1fSk/JC9pLnRlc3QoaGVhZGVyKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRCYXNlVVJMKHVybCwgcGF0aCwgcmVxdWVzdCwgbG9hZEVudiwgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRpZiAodXJsKSByZXR1cm4gd2l0aFBhdGgodXJsLCBwYXRoKTtcblx0aWYgKGxvYWRFbnYgIT09IGZhbHNlKSB7XG5cdFx0Y29uc3QgZnJvbUVudiA9IGVudi5CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5FWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19BVVRIX1VSTCB8fCAoZW52LkJBU0VfVVJMICE9PSBcIi9cIiA/IGVudi5CQVNFX1VSTCA6IHZvaWQgMCk7XG5cdFx0aWYgKGZyb21FbnYpIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcblx0fVxuXHRjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcblx0Y29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG5cdGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvICYmIHRydXN0ZWRQcm94eUhlYWRlcnMpIHtcblx0XHRpZiAodmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdFByb3RvLCBcInByb3RvXCIpICYmIHZhbGlkYXRlUHJveHlIZWFkZXIoZnJvbVJlcXVlc3QsIFwiaG9zdFwiKSkgdHJ5IHtcblx0XHRcdHJldHVybiB3aXRoUGF0aChgJHtmcm9tUmVxdWVzdFByb3RvfTovLyR7ZnJvbVJlcXVlc3R9YCwgcGF0aCk7XG5cdFx0fSBjYXRjaCAoX2Vycm9yKSB7fVxuXHR9XG5cdGlmIChyZXF1ZXN0KSB7XG5cdFx0Y29uc3QgdXJsJDEgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuXHRcdGlmICghdXJsJDEpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdHJldHVybiB3aXRoUGF0aCh1cmwkMSwgcGF0aCk7XG5cdH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uKSByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG59XG5mdW5jdGlvbiBnZXRPcmlnaW4odXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdHJldHVybiBwYXJzZWRVcmwub3JpZ2luID09PSBcIm51bGxcIiA/IG51bGwgOiBwYXJzZWRVcmwub3JpZ2luO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5wcm90b2NvbDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEhvc3QodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5ob3N0O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VVUkwsIGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   wildcardMatch: () => (/* binding */ wildcardMatch)\n/* harmony export */ });\n//#region src/utils/wildcard.ts\n/**\n* Escapes a character if it has a special meaning in regular expressions\n* and returns the character as is if it doesn't\n*/\nfunction escapeRegExpChar(char) {\n\tif (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") return `\\\\${char}`;\n\telse return char;\n}\n/**\n* Escapes all characters in a given string that have a special meaning in regular expressions\n*/\nfunction escapeRegExpString(str) {\n\tlet result = \"\";\n\tfor (let i = 0; i < str.length; i++) result += escapeRegExpChar(str[i]);\n\treturn result;\n}\n/**\n* Transforms one or more glob patterns into a RegExp pattern\n*/\nfunction transform(pattern, separator = true) {\n\tif (Array.isArray(pattern)) return `(?:${pattern.map((p) => `^${transform(p, separator)}$`).join(\"|\")})`;\n\tlet separatorSplitter = \"\";\n\tlet separatorMatcher = \"\";\n\tlet wildcard = \".\";\n\tif (separator === true) {\n\t\tseparatorSplitter = \"/\";\n\t\tseparatorMatcher = \"[/\\\\\\\\]\";\n\t\twildcard = \"[^/\\\\\\\\]\";\n\t} else if (separator) {\n\t\tseparatorSplitter = separator;\n\t\tseparatorMatcher = escapeRegExpString(separatorSplitter);\n\t\tif (separatorMatcher.length > 1) {\n\t\t\tseparatorMatcher = `(?:${separatorMatcher})`;\n\t\t\twildcard = `((?!${separatorMatcher}).)`;\n\t\t} else wildcard = `[^${separatorMatcher}]`;\n\t}\n\tconst requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n\tconst optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n\tconst segments = separator ? pattern.split(separatorSplitter) : [pattern];\n\tlet result = \"\";\n\tfor (let s = 0; s < segments.length; s++) {\n\t\tconst segment = segments[s];\n\t\tconst nextSegment = segments[s + 1];\n\t\tlet currentSeparator = \"\";\n\t\tif (!segment && s > 0) continue;\n\t\tif (separator) if (s === segments.length - 1) currentSeparator = optionalSeparator;\n\t\telse if (nextSegment !== \"**\") currentSeparator = requiredSeparator;\n\t\telse currentSeparator = \"\";\n\t\tif (separator && segment === \"**\") {\n\t\t\tif (currentSeparator) {\n\t\t\t\tresult += s === 0 ? \"\" : currentSeparator;\n\t\t\t\tresult += `(?:${wildcard}*?${currentSeparator})*?`;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let c = 0; c < segment.length; c++) {\n\t\t\tconst char = segment[c];\n\t\t\tif (char === \"\\\\\") {\n\t\t\t\tif (c < segment.length - 1) {\n\t\t\t\t\tresult += escapeRegExpChar(segment[c + 1]);\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t} else if (char === \"?\") result += wildcard;\n\t\t\telse if (char === \"*\") result += `${wildcard}*?`;\n\t\t\telse result += escapeRegExpChar(char);\n\t\t}\n\t\tresult += currentSeparator;\n\t}\n\treturn result;\n}\nfunction isMatch(regexp, sample) {\n\tif (typeof sample !== \"string\") throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n\treturn regexp.test(sample);\n}\n/**\n* Compiles one or more glob patterns into a RegExp and returns an isMatch function.\n* The isMatch function takes a sample string as its only argument and returns `true`\n* if the string matches the pattern(s).\n*\n* ```js\n* wildcardMatch('src/*.js')('src/index.js') //=> true\n* ```\n*\n* ```js\n* const isMatch = wildcardMatch('*.example.com', '.')\n* isMatch('foo.example.com') //=> true\n* isMatch('foo.bar.com') //=> false\n* ```\n*/\nfunction wildcardMatch(pattern, options) {\n\tif (typeof pattern !== \"string\" && !Array.isArray(pattern)) throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`);\n\tif (typeof options === \"string\" || typeof options === \"boolean\") options = { separator: options };\n\tif (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof options} given`);\n\toptions = options || {};\n\tif (options.separator === \"\\\\\") throw new Error(\"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\");\n\tconst regexpPattern = transform(pattern, options.separator);\n\tconst regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n\tconst fn = isMatch.bind(null, regexp);\n\tfn.options = options;\n\tfn.pattern = pattern;\n\tfn.regexp = regexp;\n\treturn fn;\n}\n\n//#endregion\n\n//# sourceMappingURL=wildcard.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3dpbGRjYXJkLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0xBQWdMLGdCQUFnQixnRUFBZ0UsS0FBSztBQUNyUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHVCQUF1Qix3QkFBd0IsY0FBYztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaUJBQWlCO0FBQzdDLHFCQUFxQixpQkFBaUI7QUFDdEMsSUFBSSxxQkFBcUIsaUJBQWlCO0FBQzFDO0FBQ0EsMENBQTBDLGlCQUFpQjtBQUMzRCwwQ0FBMEMsaUJBQWlCO0FBQzNEO0FBQ0E7QUFDQSxpQkFBaUIscUJBQXFCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVMsSUFBSSxpQkFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUNBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUYsZUFBZTtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvS0FBb0ssZ0JBQWdCO0FBQ3BMLDhFQUE4RTtBQUM5RSx3UEFBd1AsZ0JBQWdCO0FBQ3hRO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixjQUFjO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcd2lsZGNhcmQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvd2lsZGNhcmQudHNcbi8qKlxuKiBFc2NhcGVzIGEgY2hhcmFjdGVyIGlmIGl0IGhhcyBhIHNwZWNpYWwgbWVhbmluZyBpbiByZWd1bGFyIGV4cHJlc3Npb25zXG4qIGFuZCByZXR1cm5zIHRoZSBjaGFyYWN0ZXIgYXMgaXMgaWYgaXQgZG9lc24ndFxuKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cENoYXIoY2hhcikge1xuXHRpZiAoY2hhciA9PT0gXCItXCIgfHwgY2hhciA9PT0gXCJeXCIgfHwgY2hhciA9PT0gXCIkXCIgfHwgY2hhciA9PT0gXCIrXCIgfHwgY2hhciA9PT0gXCIuXCIgfHwgY2hhciA9PT0gXCIoXCIgfHwgY2hhciA9PT0gXCIpXCIgfHwgY2hhciA9PT0gXCJ8XCIgfHwgY2hhciA9PT0gXCJbXCIgfHwgY2hhciA9PT0gXCJdXCIgfHwgY2hhciA9PT0gXCJ7XCIgfHwgY2hhciA9PT0gXCJ9XCIgfHwgY2hhciA9PT0gXCIqXCIgfHwgY2hhciA9PT0gXCI/XCIgfHwgY2hhciA9PT0gXCJcXFxcXCIpIHJldHVybiBgXFxcXCR7Y2hhcn1gO1xuXHRlbHNlIHJldHVybiBjaGFyO1xufVxuLyoqXG4qIEVzY2FwZXMgYWxsIGNoYXJhY3RlcnMgaW4gYSBnaXZlbiBzdHJpbmcgdGhhdCBoYXZlIGEgc3BlY2lhbCBtZWFuaW5nIGluIHJlZ3VsYXIgZXhwcmVzc2lvbnNcbiovXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHBTdHJpbmcoc3RyKSB7XG5cdGxldCByZXN1bHQgPSBcIlwiO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgcmVzdWx0ICs9IGVzY2FwZVJlZ0V4cENoYXIoc3RyW2ldKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBUcmFuc2Zvcm1zIG9uZSBvciBtb3JlIGdsb2IgcGF0dGVybnMgaW50byBhIFJlZ0V4cCBwYXR0ZXJuXG4qL1xuZnVuY3Rpb24gdHJhbnNmb3JtKHBhdHRlcm4sIHNlcGFyYXRvciA9IHRydWUpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHJldHVybiBgKD86JHtwYXR0ZXJuLm1hcCgocCkgPT4gYF4ke3RyYW5zZm9ybShwLCBzZXBhcmF0b3IpfSRgKS5qb2luKFwifFwiKX0pYDtcblx0bGV0IHNlcGFyYXRvclNwbGl0dGVyID0gXCJcIjtcblx0bGV0IHNlcGFyYXRvck1hdGNoZXIgPSBcIlwiO1xuXHRsZXQgd2lsZGNhcmQgPSBcIi5cIjtcblx0aWYgKHNlcGFyYXRvciA9PT0gdHJ1ZSkge1xuXHRcdHNlcGFyYXRvclNwbGl0dGVyID0gXCIvXCI7XG5cdFx0c2VwYXJhdG9yTWF0Y2hlciA9IFwiWy9cXFxcXFxcXF1cIjtcblx0XHR3aWxkY2FyZCA9IFwiW14vXFxcXFxcXFxdXCI7XG5cdH0gZWxzZSBpZiAoc2VwYXJhdG9yKSB7XG5cdFx0c2VwYXJhdG9yU3BsaXR0ZXIgPSBzZXBhcmF0b3I7XG5cdFx0c2VwYXJhdG9yTWF0Y2hlciA9IGVzY2FwZVJlZ0V4cFN0cmluZyhzZXBhcmF0b3JTcGxpdHRlcik7XG5cdFx0aWYgKHNlcGFyYXRvck1hdGNoZXIubGVuZ3RoID4gMSkge1xuXHRcdFx0c2VwYXJhdG9yTWF0Y2hlciA9IGAoPzoke3NlcGFyYXRvck1hdGNoZXJ9KWA7XG5cdFx0XHR3aWxkY2FyZCA9IGAoKD8hJHtzZXBhcmF0b3JNYXRjaGVyfSkuKWA7XG5cdFx0fSBlbHNlIHdpbGRjYXJkID0gYFteJHtzZXBhcmF0b3JNYXRjaGVyfV1gO1xuXHR9XG5cdGNvbnN0IHJlcXVpcmVkU2VwYXJhdG9yID0gc2VwYXJhdG9yID8gYCR7c2VwYXJhdG9yTWF0Y2hlcn0rP2AgOiBcIlwiO1xuXHRjb25zdCBvcHRpb25hbFNlcGFyYXRvciA9IHNlcGFyYXRvciA/IGAke3NlcGFyYXRvck1hdGNoZXJ9Kj9gIDogXCJcIjtcblx0Y29uc3Qgc2VnbWVudHMgPSBzZXBhcmF0b3IgPyBwYXR0ZXJuLnNwbGl0KHNlcGFyYXRvclNwbGl0dGVyKSA6IFtwYXR0ZXJuXTtcblx0bGV0IHJlc3VsdCA9IFwiXCI7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc2VnbWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbc107XG5cdFx0Y29uc3QgbmV4dFNlZ21lbnQgPSBzZWdtZW50c1tzICsgMV07XG5cdFx0bGV0IGN1cnJlbnRTZXBhcmF0b3IgPSBcIlwiO1xuXHRcdGlmICghc2VnbWVudCAmJiBzID4gMCkgY29udGludWU7XG5cdFx0aWYgKHNlcGFyYXRvcikgaWYgKHMgPT09IHNlZ21lbnRzLmxlbmd0aCAtIDEpIGN1cnJlbnRTZXBhcmF0b3IgPSBvcHRpb25hbFNlcGFyYXRvcjtcblx0XHRlbHNlIGlmIChuZXh0U2VnbWVudCAhPT0gXCIqKlwiKSBjdXJyZW50U2VwYXJhdG9yID0gcmVxdWlyZWRTZXBhcmF0b3I7XG5cdFx0ZWxzZSBjdXJyZW50U2VwYXJhdG9yID0gXCJcIjtcblx0XHRpZiAoc2VwYXJhdG9yICYmIHNlZ21lbnQgPT09IFwiKipcIikge1xuXHRcdFx0aWYgKGN1cnJlbnRTZXBhcmF0b3IpIHtcblx0XHRcdFx0cmVzdWx0ICs9IHMgPT09IDAgPyBcIlwiIDogY3VycmVudFNlcGFyYXRvcjtcblx0XHRcdFx0cmVzdWx0ICs9IGAoPzoke3dpbGRjYXJkfSo/JHtjdXJyZW50U2VwYXJhdG9yfSkqP2A7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgYyA9IDA7IGMgPCBzZWdtZW50Lmxlbmd0aDsgYysrKSB7XG5cdFx0XHRjb25zdCBjaGFyID0gc2VnbWVudFtjXTtcblx0XHRcdGlmIChjaGFyID09PSBcIlxcXFxcIikge1xuXHRcdFx0XHRpZiAoYyA8IHNlZ21lbnQubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdHJlc3VsdCArPSBlc2NhcGVSZWdFeHBDaGFyKHNlZ21lbnRbYyArIDFdKTtcblx0XHRcdFx0XHRjKys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoY2hhciA9PT0gXCI/XCIpIHJlc3VsdCArPSB3aWxkY2FyZDtcblx0XHRcdGVsc2UgaWYgKGNoYXIgPT09IFwiKlwiKSByZXN1bHQgKz0gYCR7d2lsZGNhcmR9Kj9gO1xuXHRcdFx0ZWxzZSByZXN1bHQgKz0gZXNjYXBlUmVnRXhwQ2hhcihjaGFyKTtcblx0XHR9XG5cdFx0cmVzdWx0ICs9IGN1cnJlbnRTZXBhcmF0b3I7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGlzTWF0Y2gocmVnZXhwLCBzYW1wbGUpIHtcblx0aWYgKHR5cGVvZiBzYW1wbGUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoYFNhbXBsZSBtdXN0IGJlIGEgc3RyaW5nLCBidXQgJHt0eXBlb2Ygc2FtcGxlfSBnaXZlbmApO1xuXHRyZXR1cm4gcmVnZXhwLnRlc3Qoc2FtcGxlKTtcbn1cbi8qKlxuKiBDb21waWxlcyBvbmUgb3IgbW9yZSBnbG9iIHBhdHRlcm5zIGludG8gYSBSZWdFeHAgYW5kIHJldHVybnMgYW4gaXNNYXRjaCBmdW5jdGlvbi5cbiogVGhlIGlzTWF0Y2ggZnVuY3Rpb24gdGFrZXMgYSBzYW1wbGUgc3RyaW5nIGFzIGl0cyBvbmx5IGFyZ3VtZW50IGFuZCByZXR1cm5zIGB0cnVlYFxuKiBpZiB0aGUgc3RyaW5nIG1hdGNoZXMgdGhlIHBhdHRlcm4ocykuXG4qXG4qIGBgYGpzXG4qIHdpbGRjYXJkTWF0Y2goJ3NyYy8qLmpzJykoJ3NyYy9pbmRleC5qcycpIC8vPT4gdHJ1ZVxuKiBgYGBcbipcbiogYGBganNcbiogY29uc3QgaXNNYXRjaCA9IHdpbGRjYXJkTWF0Y2goJyouZXhhbXBsZS5jb20nLCAnLicpXG4qIGlzTWF0Y2goJ2Zvby5leGFtcGxlLmNvbScpIC8vPT4gdHJ1ZVxuKiBpc01hdGNoKCdmb28uYmFyLmNvbScpIC8vPT4gZmFsc2VcbiogYGBgXG4qL1xuZnVuY3Rpb24gd2lsZGNhcmRNYXRjaChwYXR0ZXJuLCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgcGF0dGVybiAhPT0gXCJzdHJpbmdcIiAmJiAhQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzaW5nbGUgcGF0dGVybiBzdHJpbmcgb3IgYW4gYXJyYXkgb2YgcGF0dGVybnMsIGJ1dCAke3R5cGVvZiBwYXR0ZXJufSBnaXZlbmApO1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwiYm9vbGVhblwiKSBvcHRpb25zID0geyBzZXBhcmF0b3I6IG9wdGlvbnMgfTtcblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgISh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9wdGlvbnMpKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIG9wdGlvbnMgb2JqZWN0IG9yIGEgc3RyaW5nL2Jvb2xlYW4gc2VwYXJhdG9yLCBidXQgJHt0eXBlb2Ygb3B0aW9uc30gZ2l2ZW5gKTtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdGlmIChvcHRpb25zLnNlcGFyYXRvciA9PT0gXCJcXFxcXCIpIHRocm93IG5ldyBFcnJvcihcIlxcXFwgaXMgbm90IGEgdmFsaWQgc2VwYXJhdG9yIGJlY2F1c2UgaXQgaXMgdXNlZCBmb3IgZXNjYXBpbmcuIFRyeSBzZXR0aW5nIHRoZSBzZXBhcmF0b3IgdG8gYHRydWVgIGluc3RlYWRcIik7XG5cdGNvbnN0IHJlZ2V4cFBhdHRlcm4gPSB0cmFuc2Zvcm0ocGF0dGVybiwgb3B0aW9ucy5zZXBhcmF0b3IpO1xuXHRjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKGBeJHtyZWdleHBQYXR0ZXJufSRgLCBvcHRpb25zLmZsYWdzKTtcblx0Y29uc3QgZm4gPSBpc01hdGNoLmJpbmQobnVsbCwgcmVnZXhwKTtcblx0Zm4ub3B0aW9ucyA9IG9wdGlvbnM7XG5cdGZuLnBhdHRlcm4gPSBwYXR0ZXJuO1xuXHRmbi5yZWdleHAgPSByZWdleHA7XG5cdHJldHVybiBmbjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB3aWxkY2FyZE1hdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aWxkY2FyZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/wildcard.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/broadcast-channel.mjs":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/broadcast-channel.mjs ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalBroadcastChannel: () => (/* binding */ getGlobalBroadcastChannel),\n/* harmony export */   kBroadcastChannel: () => (/* binding */ kBroadcastChannel)\n/* harmony export */ });\n//#region src/client/broadcast-channel.ts\nconst kBroadcastChannel = Symbol.for(\"better-auth:broadcast-channel\");\nconst now = () => Math.floor(Date.now() / 1e3);\nvar WindowBroadcastChannel = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tname;\n\tconstructor(name = \"better-auth.message\") {\n\t\tthis.name = name;\n\t}\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tpost(message) {\n\t\tif (typeof window === \"undefined\") return;\n\t\ttry {\n\t\t\tlocalStorage.setItem(this.name, JSON.stringify({\n\t\t\t\t...message,\n\t\t\t\ttimestamp: now()\n\t\t\t}));\n\t\t} catch {}\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst handler = (event) => {\n\t\t\tif (event.key !== this.name) return;\n\t\t\tconst message = JSON.parse(event.newValue ?? \"{}\");\n\t\t\tif (message?.event !== \"session\" || !message?.data) return;\n\t\t\tthis.listeners.forEach((listener) => listener(message));\n\t\t};\n\t\twindow.addEventListener(\"storage\", handler);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"storage\", handler);\n\t\t};\n\t}\n};\nfunction getGlobalBroadcastChannel(name = \"better-auth.message\") {\n\tif (!globalThis[kBroadcastChannel]) globalThis[kBroadcastChannel] = new WindowBroadcastChannel(name);\n\treturn globalThis[kBroadcastChannel];\n}\n\n//#endregion\n\n//# sourceMappingURL=broadcast-channel.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9icm9hZGNhc3QtY2hhbm5lbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0Q7QUFDeEQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxicm9hZGNhc3QtY2hhbm5lbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwudHNcbmNvbnN0IGtCcm9hZGNhc3RDaGFubmVsID0gU3ltYm9sLmZvcihcImJldHRlci1hdXRoOmJyb2FkY2FzdC1jaGFubmVsXCIpO1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbnZhciBXaW5kb3dCcm9hZGNhc3RDaGFubmVsID0gY2xhc3Mge1xuXHRsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRuYW1lO1xuXHRjb25zdHJ1Y3RvcihuYW1lID0gXCJiZXR0ZXItYXV0aC5tZXNzYWdlXCIpIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR9XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRwb3N0KG1lc3NhZ2UpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXHRcdHRyeSB7XG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLm5hbWUsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0Li4ubWVzc2FnZSxcblx0XHRcdFx0dGltZXN0YW1wOiBub3coKVxuXHRcdFx0fSkpO1xuXHRcdH0gY2F0Y2gge31cblx0fVxuXHRzZXR1cCgpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiAoKSA9PiB7fTtcblx0XHRjb25zdCBoYW5kbGVyID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQua2V5ICE9PSB0aGlzLm5hbWUpIHJldHVybjtcblx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50Lm5ld1ZhbHVlID8/IFwie31cIik7XG5cdFx0XHRpZiAobWVzc2FnZT8uZXZlbnQgIT09IFwic2Vzc2lvblwiIHx8ICFtZXNzYWdlPy5kYXRhKSByZXR1cm47XG5cdFx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIobWVzc2FnZSkpO1xuXHRcdH07XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIGhhbmRsZXIpO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgaGFuZGxlcik7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwobmFtZSA9IFwiYmV0dGVyLWF1dGgubWVzc2FnZVwiKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trQnJvYWRjYXN0Q2hhbm5lbF0pIGdsb2JhbFRoaXNba0Jyb2FkY2FzdENoYW5uZWxdID0gbmV3IFdpbmRvd0Jyb2FkY2FzdENoYW5uZWwobmFtZSk7XG5cdHJldHVybiBnbG9iYWxUaGlzW2tCcm9hZGNhc3RDaGFubmVsXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsLCBrQnJvYWRjYXN0Q2hhbm5lbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvYWRjYXN0LWNoYW5uZWwubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/broadcast-channel.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/config.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/config.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientConfig: () => (/* binding */ getClientConfig)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-plugins.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/fetch-plugins.mjs\");\n/* harmony import */ var _parser_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parser.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/parser.mjs\");\n/* harmony import */ var _session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-atom.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-atom.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(ssr)/./node_modules/.pnpm/defu@6.1.4/node_modules/defu/dist/defu.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-fetch/fetch */ \"(ssr)/./node_modules/.pnpm/@better-fetch+fetch@1.1.21/node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n\n//#region src/client/config.ts\nconst getClientConfig = (options, loadEnv) => {\n\tconst isCredentialsSupported = \"credentials\" in Request.prototype;\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(options?.baseURL, options?.basePath, void 0, loadEnv) ?? \"/api/auth\";\n\tconst pluginsFetchPlugins = options?.plugins?.flatMap((plugin) => plugin.fetchPlugins).filter((pl) => pl !== void 0) || [];\n\tconst lifeCyclePlugin = {\n\t\tid: \"lifecycle-hooks\",\n\t\tname: \"lifecycle-hooks\",\n\t\thooks: {\n\t\t\tonSuccess: options?.fetchOptions?.onSuccess,\n\t\t\tonError: options?.fetchOptions?.onError,\n\t\t\tonRequest: options?.fetchOptions?.onRequest,\n\t\t\tonResponse: options?.fetchOptions?.onResponse\n\t\t}\n\t};\n\tconst { onSuccess: _onSuccess, onError: _onError, onRequest: _onRequest, onResponse: _onResponse, ...restOfFetchOptions } = options?.fetchOptions || {};\n\tconst $fetch = (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.createFetch)({\n\t\tbaseURL,\n\t\t...isCredentialsSupported ? { credentials: \"include\" } : {},\n\t\tmethod: \"GET\",\n\t\tjsonParser(text) {\n\t\t\tif (!text) return null;\n\t\t\treturn (0,_parser_mjs__WEBPACK_IMPORTED_MODULE_2__.parseJSON)(text, { strict: false });\n\t\t},\n\t\tcustomFetchImpl: fetch,\n\t\t...restOfFetchOptions,\n\t\tplugins: [\n\t\t\tlifeCyclePlugin,\n\t\t\t...restOfFetchOptions.plugins || [],\n\t\t\t...options?.disableDefaultFetchPlugins ? [] : [_fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__.redirectPlugin],\n\t\t\t...pluginsFetchPlugins\n\t\t]\n\t});\n\tconst { $sessionSignal, session } = (0,_session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionAtom)($fetch, options);\n\tconst plugins = options?.plugins || [];\n\tlet pluginsActions = {};\n\tconst pluginsAtoms = {\n\t\t$sessionSignal,\n\t\tsession\n\t};\n\tconst pluginPathMethods = {\n\t\t\"/sign-out\": \"POST\",\n\t\t\"/revoke-sessions\": \"POST\",\n\t\t\"/revoke-other-sessions\": \"POST\",\n\t\t\"/delete-user\": \"POST\"\n\t};\n\tconst atomListeners = [{\n\t\tsignal: \"$sessionSignal\",\n\t\tmatcher(path) {\n\t\t\treturn path === \"/sign-out\" || path === \"/update-user\" || path === \"/sign-up/email\" || path === \"/sign-in/email\" || path === \"/delete-user\" || path === \"/verify-email\" || path === \"/revoke-sessions\" || path === \"/revoke-session\" || path === \"/change-email\";\n\t\t}\n\t}];\n\tfor (const plugin of plugins) {\n\t\tif (plugin.getAtoms) Object.assign(pluginsAtoms, plugin.getAtoms?.($fetch));\n\t\tif (plugin.pathMethods) Object.assign(pluginPathMethods, plugin.pathMethods);\n\t\tif (plugin.atomListeners) atomListeners.push(...plugin.atomListeners);\n\t}\n\tconst $store = {\n\t\tnotify: (signal) => {\n\t\t\tpluginsAtoms[signal].set(!pluginsAtoms[signal].get());\n\t\t},\n\t\tlisten: (signal, listener) => {\n\t\t\tpluginsAtoms[signal].subscribe(listener);\n\t\t},\n\t\tatoms: pluginsAtoms\n\t};\n\tfor (const plugin of plugins) if (plugin.getActions) pluginsActions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(plugin.getActions?.($fetch, $store, options) ?? {}, pluginsActions);\n\treturn {\n\t\tget baseURL() {\n\t\t\treturn baseURL;\n\t\t},\n\t\tpluginsActions,\n\t\tpluginsAtoms,\n\t\tpluginPathMethods,\n\t\tatomListeners,\n\t\t$fetch,\n\t\t$store\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=config.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9jb25maWcubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEM7QUFDTztBQUNaO0FBQ1c7QUFDZDtBQUNZOztBQUVsRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMERBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsa0hBQWtIO0FBQzNILGdCQUFnQixnRUFBVztBQUMzQjtBQUNBLGdDQUFnQyx5QkFBeUIsSUFBSTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxVQUFVLHNEQUFTLFNBQVMsZUFBZTtBQUMzQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCw4REFBYztBQUNoRTtBQUNBO0FBQ0EsRUFBRTtBQUNGLFNBQVMsMEJBQTBCLEVBQUUsaUVBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHVFQUF1RSwwQ0FBTSxtREFBbUQ7QUFDaEk7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxjb25maWcubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VVUkwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgcmVkaXJlY3RQbHVnaW4gfSBmcm9tIFwiLi9mZXRjaC1wbHVnaW5zLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VKU09OIH0gZnJvbSBcIi4vcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkF0b20gfSBmcm9tIFwiLi9zZXNzaW9uLWF0b20ubWpzXCI7XG5pbXBvcnQgeyBkZWZ1IGFzIGRlZnUkMSB9IGZyb20gXCJkZWZ1XCI7XG5pbXBvcnQgeyBjcmVhdGVGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L2NvbmZpZy50c1xuY29uc3QgZ2V0Q2xpZW50Q29uZmlnID0gKG9wdGlvbnMsIGxvYWRFbnYpID0+IHtcblx0Y29uc3QgaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA9IFwiY3JlZGVudGlhbHNcIiBpbiBSZXF1ZXN0LnByb3RvdHlwZTtcblx0Y29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwob3B0aW9ucz8uYmFzZVVSTCwgb3B0aW9ucz8uYmFzZVBhdGgsIHZvaWQgMCwgbG9hZEVudikgPz8gXCIvYXBpL2F1dGhcIjtcblx0Y29uc3QgcGx1Z2luc0ZldGNoUGx1Z2lucyA9IG9wdGlvbnM/LnBsdWdpbnM/LmZsYXRNYXAoKHBsdWdpbikgPT4gcGx1Z2luLmZldGNoUGx1Z2lucykuZmlsdGVyKChwbCkgPT4gcGwgIT09IHZvaWQgMCkgfHwgW107XG5cdGNvbnN0IGxpZmVDeWNsZVBsdWdpbiA9IHtcblx0XHRpZDogXCJsaWZlY3ljbGUtaG9va3NcIixcblx0XHRuYW1lOiBcImxpZmVjeWNsZS1ob29rc1wiLFxuXHRcdGhvb2tzOiB7XG5cdFx0XHRvblN1Y2Nlc3M6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25TdWNjZXNzLFxuXHRcdFx0b25FcnJvcjogb3B0aW9ucz8uZmV0Y2hPcHRpb25zPy5vbkVycm9yLFxuXHRcdFx0b25SZXF1ZXN0OiBvcHRpb25zPy5mZXRjaE9wdGlvbnM/Lm9uUmVxdWVzdCxcblx0XHRcdG9uUmVzcG9uc2U6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25SZXNwb25zZVxuXHRcdH1cblx0fTtcblx0Y29uc3QgeyBvblN1Y2Nlc3M6IF9vblN1Y2Nlc3MsIG9uRXJyb3I6IF9vbkVycm9yLCBvblJlcXVlc3Q6IF9vblJlcXVlc3QsIG9uUmVzcG9uc2U6IF9vblJlc3BvbnNlLCAuLi5yZXN0T2ZGZXRjaE9wdGlvbnMgfSA9IG9wdGlvbnM/LmZldGNoT3B0aW9ucyB8fCB7fTtcblx0Y29uc3QgJGZldGNoID0gY3JlYXRlRmV0Y2goe1xuXHRcdGJhc2VVUkwsXG5cdFx0Li4uaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA/IHsgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiIH0gOiB7fSxcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0anNvblBhcnNlcih0ZXh0KSB7XG5cdFx0XHRpZiAoIXRleHQpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHBhcnNlSlNPTih0ZXh0LCB7IHN0cmljdDogZmFsc2UgfSk7XG5cdFx0fSxcblx0XHRjdXN0b21GZXRjaEltcGw6IGZldGNoLFxuXHRcdC4uLnJlc3RPZkZldGNoT3B0aW9ucyxcblx0XHRwbHVnaW5zOiBbXG5cdFx0XHRsaWZlQ3ljbGVQbHVnaW4sXG5cdFx0XHQuLi5yZXN0T2ZGZXRjaE9wdGlvbnMucGx1Z2lucyB8fCBbXSxcblx0XHRcdC4uLm9wdGlvbnM/LmRpc2FibGVEZWZhdWx0RmV0Y2hQbHVnaW5zID8gW10gOiBbcmVkaXJlY3RQbHVnaW5dLFxuXHRcdFx0Li4ucGx1Z2luc0ZldGNoUGx1Z2luc1xuXHRcdF1cblx0fSk7XG5cdGNvbnN0IHsgJHNlc3Npb25TaWduYWwsIHNlc3Npb24gfSA9IGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucyk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zPy5wbHVnaW5zIHx8IFtdO1xuXHRsZXQgcGx1Z2luc0FjdGlvbnMgPSB7fTtcblx0Y29uc3QgcGx1Z2luc0F0b21zID0ge1xuXHRcdCRzZXNzaW9uU2lnbmFsLFxuXHRcdHNlc3Npb25cblx0fTtcblx0Y29uc3QgcGx1Z2luUGF0aE1ldGhvZHMgPSB7XG5cdFx0XCIvc2lnbi1vdXRcIjogXCJQT1NUXCIsXG5cdFx0XCIvcmV2b2tlLXNlc3Npb25zXCI6IFwiUE9TVFwiLFxuXHRcdFwiL3Jldm9rZS1vdGhlci1zZXNzaW9uc1wiOiBcIlBPU1RcIixcblx0XHRcIi9kZWxldGUtdXNlclwiOiBcIlBPU1RcIlxuXHR9O1xuXHRjb25zdCBhdG9tTGlzdGVuZXJzID0gW3tcblx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIixcblx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdHJldHVybiBwYXRoID09PSBcIi9zaWduLW91dFwiIHx8IHBhdGggPT09IFwiL3VwZGF0ZS11c2VyXCIgfHwgcGF0aCA9PT0gXCIvc2lnbi11cC9lbWFpbFwiIHx8IHBhdGggPT09IFwiL3NpZ24taW4vZW1haWxcIiB8fCBwYXRoID09PSBcIi9kZWxldGUtdXNlclwiIHx8IHBhdGggPT09IFwiL3ZlcmlmeS1lbWFpbFwiIHx8IHBhdGggPT09IFwiL3Jldm9rZS1zZXNzaW9uc1wiIHx8IHBhdGggPT09IFwiL3Jldm9rZS1zZXNzaW9uXCIgfHwgcGF0aCA9PT0gXCIvY2hhbmdlLWVtYWlsXCI7XG5cdFx0fVxuXHR9XTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykge1xuXHRcdGlmIChwbHVnaW4uZ2V0QXRvbXMpIE9iamVjdC5hc3NpZ24ocGx1Z2luc0F0b21zLCBwbHVnaW4uZ2V0QXRvbXM/LigkZmV0Y2gpKTtcblx0XHRpZiAocGx1Z2luLnBhdGhNZXRob2RzKSBPYmplY3QuYXNzaWduKHBsdWdpblBhdGhNZXRob2RzLCBwbHVnaW4ucGF0aE1ldGhvZHMpO1xuXHRcdGlmIChwbHVnaW4uYXRvbUxpc3RlbmVycykgYXRvbUxpc3RlbmVycy5wdXNoKC4uLnBsdWdpbi5hdG9tTGlzdGVuZXJzKTtcblx0fVxuXHRjb25zdCAkc3RvcmUgPSB7XG5cdFx0bm90aWZ5OiAoc2lnbmFsKSA9PiB7XG5cdFx0XHRwbHVnaW5zQXRvbXNbc2lnbmFsXS5zZXQoIXBsdWdpbnNBdG9tc1tzaWduYWxdLmdldCgpKTtcblx0XHR9LFxuXHRcdGxpc3RlbjogKHNpZ25hbCwgbGlzdGVuZXIpID0+IHtcblx0XHRcdHBsdWdpbnNBdG9tc1tzaWduYWxdLnN1YnNjcmliZShsaXN0ZW5lcik7XG5cdFx0fSxcblx0XHRhdG9tczogcGx1Z2luc0F0b21zXG5cdH07XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpIGlmIChwbHVnaW4uZ2V0QWN0aW9ucykgcGx1Z2luc0FjdGlvbnMgPSBkZWZ1JDEocGx1Z2luLmdldEFjdGlvbnM/LigkZmV0Y2gsICRzdG9yZSwgb3B0aW9ucykgPz8ge30sIHBsdWdpbnNBY3Rpb25zKTtcblx0cmV0dXJuIHtcblx0XHRnZXQgYmFzZVVSTCgpIHtcblx0XHRcdHJldHVybiBiYXNlVVJMO1xuXHRcdH0sXG5cdFx0cGx1Z2luc0FjdGlvbnMsXG5cdFx0cGx1Z2luc0F0b21zLFxuXHRcdHBsdWdpblBhdGhNZXRob2RzLFxuXHRcdGF0b21MaXN0ZW5lcnMsXG5cdFx0JGZldGNoLFxuXHRcdCRzdG9yZVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRDbGllbnRDb25maWcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/config.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/fetch-plugins.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/fetch-plugins.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redirectPlugin: () => (/* binding */ redirectPlugin)\n/* harmony export */ });\n//#region src/client/fetch-plugins.ts\nconst redirectPlugin = {\n\tid: \"redirect\",\n\tname: \"Redirect\",\n\thooks: { onSuccess(context) {\n\t\tif (context.data?.url && context.data?.redirect) {\n\t\t\tif (typeof window !== \"undefined\" && window.location) {\n\t\t\t\tif (window.location) try {\n\t\t\t\t\twindow.location.href = context.data.url;\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t}\n\t} }\n};\n\n//#endregion\n\n//# sourceMappingURL=fetch-plugins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9mZXRjaC1wbHVnaW5zLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEI7QUFDMUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxmZXRjaC1wbHVnaW5zLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9mZXRjaC1wbHVnaW5zLnRzXG5jb25zdCByZWRpcmVjdFBsdWdpbiA9IHtcblx0aWQ6IFwicmVkaXJlY3RcIixcblx0bmFtZTogXCJSZWRpcmVjdFwiLFxuXHRob29rczogeyBvblN1Y2Nlc3MoY29udGV4dCkge1xuXHRcdGlmIChjb250ZXh0LmRhdGE/LnVybCAmJiBjb250ZXh0LmRhdGE/LnJlZGlyZWN0KSB7XG5cdFx0XHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24pIHtcblx0XHRcdFx0aWYgKHdpbmRvdy5sb2NhdGlvbikgdHJ5IHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbnRleHQuZGF0YS51cmw7XG5cdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdH1cblx0XHR9XG5cdH0gfVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyByZWRpcmVjdFBsdWdpbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2gtcGx1Z2lucy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/fetch-plugins.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/focus-manager.mjs":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/focus-manager.mjs ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalFocusManager: () => (/* binding */ getGlobalFocusManager),\n/* harmony export */   kFocusManager: () => (/* binding */ kFocusManager)\n/* harmony export */ });\n//#region src/client/focus-manager.ts\nconst kFocusManager = Symbol.for(\"better-auth:focus-manager\");\nvar WindowFocusManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetFocused(focused) {\n\t\tthis.listeners.forEach((listener) => listener(focused));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof document === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst visibilityHandler = () => {\n\t\t\tif (document.visibilityState === \"visible\") this.setFocused(true);\n\t\t};\n\t\tdocument.addEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\t};\n\t}\n};\nfunction getGlobalFocusManager() {\n\tif (!globalThis[kFocusManager]) globalThis[kFocusManager] = new WindowFocusManager();\n\treturn globalThis[kFocusManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=focus-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9mb2N1cy1tYW5hZ2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dEO0FBQ2hEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxcZm9jdXMtbWFuYWdlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvZm9jdXMtbWFuYWdlci50c1xuY29uc3Qga0ZvY3VzTWFuYWdlciA9IFN5bWJvbC5mb3IoXCJiZXR0ZXItYXV0aDpmb2N1cy1tYW5hZ2VyXCIpO1xudmFyIFdpbmRvd0ZvY3VzTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0c3Vic2NyaWJlKGxpc3RlbmVyKSB7XG5cdFx0dGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcblx0XHR9O1xuXHR9XG5cdHNldEZvY3VzZWQoZm9jdXNlZCkge1xuXHRcdHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihmb2N1c2VkKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuICgpID0+IHt9O1xuXHRcdGNvbnN0IHZpc2liaWxpdHlIYW5kbGVyID0gKCkgPT4ge1xuXHRcdFx0aWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHRoaXMuc2V0Rm9jdXNlZCh0cnVlKTtcblx0XHR9O1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEZvY3VzTWFuYWdlcigpIHtcblx0aWYgKCFnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdKSBnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdID0gbmV3IFdpbmRvd0ZvY3VzTWFuYWdlcigpO1xuXHRyZXR1cm4gZ2xvYmFsVGhpc1trRm9jdXNNYW5hZ2VyXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxGb2N1c01hbmFnZXIsIGtGb2N1c01hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLW1hbmFnZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/focus-manager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/online-manager.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/online-manager.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalOnlineManager: () => (/* binding */ getGlobalOnlineManager),\n/* harmony export */   kOnlineManager: () => (/* binding */ kOnlineManager)\n/* harmony export */ });\n//#region src/client/online-manager.ts\nconst kOnlineManager = Symbol.for(\"better-auth:online-manager\");\nvar WindowOnlineManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tisOnline = typeof navigator !== \"undefined\" ? navigator.onLine : true;\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetOnline(online) {\n\t\tthis.isOnline = online;\n\t\tthis.listeners.forEach((listener) => listener(online));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst onOnline = () => this.setOnline(true);\n\t\tconst onOffline = () => this.setOnline(false);\n\t\twindow.addEventListener(\"online\", onOnline, false);\n\t\twindow.addEventListener(\"offline\", onOffline, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"online\", onOnline, false);\n\t\t\twindow.removeEventListener(\"offline\", onOffline, false);\n\t\t};\n\t}\n};\nfunction getGlobalOnlineManager() {\n\tif (!globalThis[kOnlineManager]) globalThis[kOnlineManager] = new WindowOnlineManager();\n\treturn globalThis[kOnlineManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=online-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9vbmxpbmUtbWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrRDtBQUNsRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXG9ubGluZS1tYW5hZ2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9vbmxpbmUtbWFuYWdlci50c1xuY29uc3Qga09ubGluZU1hbmFnZXIgPSBTeW1ib2wuZm9yKFwiYmV0dGVyLWF1dGg6b25saW5lLW1hbmFnZXJcIik7XG52YXIgV2luZG93T25saW5lTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0aXNPbmxpbmUgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiID8gbmF2aWdhdG9yLm9uTGluZSA6IHRydWU7XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRzZXRPbmxpbmUob25saW5lKSB7XG5cdFx0dGhpcy5pc09ubGluZSA9IG9ubGluZTtcblx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIob25saW5lKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gKCkgPT4ge307XG5cdFx0Y29uc3Qgb25PbmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZSh0cnVlKTtcblx0XHRjb25zdCBvbk9mZmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZShmYWxzZSk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgb25PbmxpbmUsIGZhbHNlKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIG9uT25saW5lLCBmYWxzZSk7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trT25saW5lTWFuYWdlcl0pIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdID0gbmV3IFdpbmRvd09ubGluZU1hbmFnZXIoKTtcblx0cmV0dXJuIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEdsb2JhbE9ubGluZU1hbmFnZXIsIGtPbmxpbmVNYW5hZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vbmxpbmUtbWFuYWdlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/online-manager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/parser.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/parser.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJSON: () => (/* binding */ parseJSON)\n/* harmony export */ });\n//#region src/client/parser.ts\nconst PROTO_POLLUTION_PATTERNS = {\n\tproto: /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n\tconstructor: /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n\tprotoShort: /\"__proto__\"\\s*:/,\n\tconstructorShort: /\"constructor\"\\s*:/\n};\nconst JSON_SIGNATURE = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nconst SPECIAL_VALUES = {\n\ttrue: true,\n\tfalse: false,\n\tnull: null,\n\tundefined: void 0,\n\tnan: NaN,\n\tinfinity: Number.POSITIVE_INFINITY,\n\t\"-infinity\": Number.NEGATIVE_INFINITY\n};\nconst ISO_DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\nfunction isValidDate(date) {\n\treturn date instanceof Date && !isNaN(date.getTime());\n}\nfunction parseISODate(value) {\n\tconst match = ISO_DATE_REGEX.exec(value);\n\tif (!match) return null;\n\tconst [, year, month, day, hour, minute, second, ms, offsetSign, offsetHour, offsetMinute] = match;\n\tconst date = new Date(Date.UTC(parseInt(year, 10), parseInt(month, 10) - 1, parseInt(day, 10), parseInt(hour, 10), parseInt(minute, 10), parseInt(second, 10), ms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0));\n\tif (offsetSign) {\n\t\tconst offset = (parseInt(offsetHour, 10) * 60 + parseInt(offsetMinute, 10)) * (offsetSign === \"+\" ? -1 : 1);\n\t\tdate.setUTCMinutes(date.getUTCMinutes() + offset);\n\t}\n\treturn isValidDate(date) ? date : null;\n}\nfunction betterJSONParse(value, options = {}) {\n\tconst { strict = false, warnings = false, reviver, parseDates = true } = options;\n\tif (typeof value !== \"string\") return value;\n\tconst trimmed = value.trim();\n\tif (trimmed.length > 0 && trimmed[0] === \"\\\"\" && trimmed.endsWith(\"\\\"\") && !trimmed.slice(1, -1).includes(\"\\\"\")) return trimmed.slice(1, -1);\n\tconst lowerValue = trimmed.toLowerCase();\n\tif (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) return SPECIAL_VALUES[lowerValue];\n\tif (!JSON_SIGNATURE.test(trimmed)) {\n\t\tif (strict) throw new SyntaxError(\"[better-json] Invalid JSON\");\n\t\treturn value;\n\t}\n\tif (Object.entries(PROTO_POLLUTION_PATTERNS).some(([key, pattern]) => {\n\t\tconst matches = pattern.test(trimmed);\n\t\tif (matches && warnings) console.warn(`[better-json] Detected potential prototype pollution attempt using ${key} pattern`);\n\t\treturn matches;\n\t}) && strict) throw new Error(\"[better-json] Potential prototype pollution attempt detected\");\n\ttry {\n\t\tconst secureReviver = (key, value$1) => {\n\t\t\tif (key === \"__proto__\" || key === \"constructor\" && value$1 && typeof value$1 === \"object\" && \"prototype\" in value$1) {\n\t\t\t\tif (warnings) console.warn(`[better-json] Dropping \"${key}\" key to prevent prototype pollution`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (parseDates && typeof value$1 === \"string\") {\n\t\t\t\tconst date = parseISODate(value$1);\n\t\t\t\tif (date) return date;\n\t\t\t}\n\t\t\treturn reviver ? reviver(key, value$1) : value$1;\n\t\t};\n\t\treturn JSON.parse(trimmed, secureReviver);\n\t} catch (error) {\n\t\tif (strict) throw error;\n\t\treturn value;\n\t}\n}\nfunction parseJSON(value, options = { strict: true }) {\n\treturn betterJSONParse(value, options);\n}\n\n//#endregion\n\n//# sourceMappingURL=parser.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9wYXJzZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0Esb0JBQW9CLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQUU7QUFDckk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsV0FBVyxLQUFLLE1BQU0sS0FBSztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFVBQVUsSUFBSSxrQkFBa0IsRUFBRSxNQUFNLEVBQUU7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QyxTQUFTLCtEQUErRDtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEdBQThHLEtBQUs7QUFDbkg7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsMERBQTBELElBQUk7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGNBQWM7QUFDcEQ7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHBhcnNlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvcGFyc2VyLnRzXG5jb25zdCBQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMgPSB7XG5cdHByb3RvOiAvXCIoPzpffFxcXFx1MHsyfTVbRmZdKXsyfSg/OnB8XFxcXHUwezJ9NzApKD86cnxcXFxcdTB7Mn03MikoPzpvfFxcXFx1MHsyfTZbRmZdKSg/OnR8XFxcXHUwezJ9NzQpKD86b3xcXFxcdTB7Mn02W0ZmXSkoPzpffFxcXFx1MHsyfTVbRmZdKXsyfVwiXFxzKjovLFxuXHRjb25zdHJ1Y3RvcjogL1wiKD86Y3xcXFxcdTAwNjMpKD86b3xcXFxcdTAwNltGZl0pKD86bnxcXFxcdTAwNltFZV0pKD86c3xcXFxcdTAwNzMpKD86dHxcXFxcdTAwNzQpKD86cnxcXFxcdTAwNzIpKD86dXxcXFxcdTAwNzUpKD86Y3xcXFxcdTAwNjMpKD86dHxcXFxcdTAwNzQpKD86b3xcXFxcdTAwNltGZl0pKD86cnxcXFxcdTAwNzIpXCJcXHMqOi8sXG5cdHByb3RvU2hvcnQ6IC9cIl9fcHJvdG9fX1wiXFxzKjovLFxuXHRjb25zdHJ1Y3RvclNob3J0OiAvXCJjb25zdHJ1Y3RvclwiXFxzKjovXG59O1xuY29uc3QgSlNPTl9TSUdOQVRVUkUgPSAvXlxccypbXCJbe118XlxccyotP1xcZHsxLDE2fShcXC5cXGR7MSwxN30pPyhbRWVdWystXT9cXGQrKT9cXHMqJC87XG5jb25zdCBTUEVDSUFMX1ZBTFVFUyA9IHtcblx0dHJ1ZTogdHJ1ZSxcblx0ZmFsc2U6IGZhbHNlLFxuXHRudWxsOiBudWxsLFxuXHR1bmRlZmluZWQ6IHZvaWQgMCxcblx0bmFuOiBOYU4sXG5cdGluZmluaXR5OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG5cdFwiLWluZmluaXR5XCI6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxufTtcbmNvbnN0IElTT19EQVRFX1JFR0VYID0gL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KVQoXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSg/OlxcLihcXGR7MSw3fSkpPyg/Olp8KFsrLV0pKFxcZHsyfSk6KFxcZHsyfSkpJC87XG5mdW5jdGlvbiBpc1ZhbGlkRGF0ZShkYXRlKSB7XG5cdHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xufVxuZnVuY3Rpb24gcGFyc2VJU09EYXRlKHZhbHVlKSB7XG5cdGNvbnN0IG1hdGNoID0gSVNPX0RBVEVfUkVHRVguZXhlYyh2YWx1ZSk7XG5cdGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuXHRjb25zdCBbLCB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbXMsIG9mZnNldFNpZ24sIG9mZnNldEhvdXIsIG9mZnNldE1pbnV0ZV0gPSBtYXRjaDtcblx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHBhcnNlSW50KHllYXIsIDEwKSwgcGFyc2VJbnQobW9udGgsIDEwKSAtIDEsIHBhcnNlSW50KGRheSwgMTApLCBwYXJzZUludChob3VyLCAxMCksIHBhcnNlSW50KG1pbnV0ZSwgMTApLCBwYXJzZUludChzZWNvbmQsIDEwKSwgbXMgPyBwYXJzZUludChtcy5wYWRFbmQoMywgXCIwXCIpLCAxMCkgOiAwKSk7XG5cdGlmIChvZmZzZXRTaWduKSB7XG5cdFx0Y29uc3Qgb2Zmc2V0ID0gKHBhcnNlSW50KG9mZnNldEhvdXIsIDEwKSAqIDYwICsgcGFyc2VJbnQob2Zmc2V0TWludXRlLCAxMCkpICogKG9mZnNldFNpZ24gPT09IFwiK1wiID8gLTEgOiAxKTtcblx0XHRkYXRlLnNldFVUQ01pbnV0ZXMoZGF0ZS5nZXRVVENNaW51dGVzKCkgKyBvZmZzZXQpO1xuXHR9XG5cdHJldHVybiBpc1ZhbGlkRGF0ZShkYXRlKSA/IGRhdGUgOiBudWxsO1xufVxuZnVuY3Rpb24gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3QgeyBzdHJpY3QgPSBmYWxzZSwgd2FybmluZ3MgPSBmYWxzZSwgcmV2aXZlciwgcGFyc2VEYXRlcyA9IHRydWUgfSA9IG9wdGlvbnM7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZTtcblx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcblx0aWYgKHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkWzBdID09PSBcIlxcXCJcIiAmJiB0cmltbWVkLmVuZHNXaXRoKFwiXFxcIlwiKSAmJiAhdHJpbW1lZC5zbGljZSgxLCAtMSkuaW5jbHVkZXMoXCJcXFwiXCIpKSByZXR1cm4gdHJpbW1lZC5zbGljZSgxLCAtMSk7XG5cdGNvbnN0IGxvd2VyVmFsdWUgPSB0cmltbWVkLnRvTG93ZXJDYXNlKCk7XG5cdGlmIChsb3dlclZhbHVlLmxlbmd0aCA8PSA5ICYmIGxvd2VyVmFsdWUgaW4gU1BFQ0lBTF9WQUxVRVMpIHJldHVybiBTUEVDSUFMX1ZBTFVFU1tsb3dlclZhbHVlXTtcblx0aWYgKCFKU09OX1NJR05BVFVSRS50ZXN0KHRyaW1tZWQpKSB7XG5cdFx0aWYgKHN0cmljdCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW2JldHRlci1qc29uXSBJbnZhbGlkIEpTT05cIik7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmIChPYmplY3QuZW50cmllcyhQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMpLnNvbWUoKFtrZXksIHBhdHRlcm5dKSA9PiB7XG5cdFx0Y29uc3QgbWF0Y2hlcyA9IHBhdHRlcm4udGVzdCh0cmltbWVkKTtcblx0XHRpZiAobWF0Y2hlcyAmJiB3YXJuaW5ncykgY29uc29sZS53YXJuKGBbYmV0dGVyLWpzb25dIERldGVjdGVkIHBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgdXNpbmcgJHtrZXl9IHBhdHRlcm5gKTtcblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSkgJiYgc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJbYmV0dGVyLWpzb25dIFBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgZGV0ZWN0ZWRcIik7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2VjdXJlUmV2aXZlciA9IChrZXksIHZhbHVlJDEpID0+IHtcblx0XHRcdGlmIChrZXkgPT09IFwiX19wcm90b19fXCIgfHwga2V5ID09PSBcImNvbnN0cnVjdG9yXCIgJiYgdmFsdWUkMSAmJiB0eXBlb2YgdmFsdWUkMSA9PT0gXCJvYmplY3RcIiAmJiBcInByb3RvdHlwZVwiIGluIHZhbHVlJDEpIHtcblx0XHRcdFx0aWYgKHdhcm5pbmdzKSBjb25zb2xlLndhcm4oYFtiZXR0ZXItanNvbl0gRHJvcHBpbmcgXCIke2tleX1cIiBrZXkgdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uYCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChwYXJzZURhdGVzICYmIHR5cGVvZiB2YWx1ZSQxID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSBwYXJzZUlTT0RhdGUodmFsdWUkMSk7XG5cdFx0XHRcdGlmIChkYXRlKSByZXR1cm4gZGF0ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXZpdmVyID8gcmV2aXZlcihrZXksIHZhbHVlJDEpIDogdmFsdWUkMTtcblx0XHR9O1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHRyaW1tZWQsIHNlY3VyZVJldml2ZXIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChzdHJpY3QpIHRocm93IGVycm9yO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxufVxuZnVuY3Rpb24gcGFyc2VKU09OKHZhbHVlLCBvcHRpb25zID0geyBzdHJpY3Q6IHRydWUgfSkge1xuXHRyZXR1cm4gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZUpTT04gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/parser.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/proxy.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/proxy.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDynamicPathProxy: () => (/* binding */ createDynamicPathProxy)\n/* harmony export */ });\n/* harmony import */ var _utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-atom.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-atom.mjs\");\n\n\n//#region src/client/proxy.ts\nfunction getMethod(path, knownPathMethods, args) {\n\tconst method = knownPathMethods[path];\n\tconst { fetchOptions, query: _query, ...body } = args || {};\n\tif (method) return method;\n\tif (fetchOptions?.method) return fetchOptions.method;\n\tif (body && Object.keys(body).length > 0) return \"POST\";\n\treturn \"GET\";\n}\nfunction createDynamicPathProxy(routes, client, knownPathMethods, atoms, atomListeners) {\n\tfunction createProxy(path = []) {\n\t\treturn new Proxy(function() {}, {\n\t\t\tget(_, prop) {\n\t\t\t\tif (typeof prop !== \"string\") return;\n\t\t\t\tif (prop === \"then\" || prop === \"catch\" || prop === \"finally\") return;\n\t\t\t\tconst fullPath = [...path, prop];\n\t\t\t\tlet current = routes;\n\t\t\t\tfor (const segment of fullPath) if (current && typeof current === \"object\" && segment in current) current = current[segment];\n\t\t\t\telse {\n\t\t\t\t\tcurrent = void 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (typeof current === \"function\") return current;\n\t\t\t\tif ((0,_utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__.isAtom)(current)) return current;\n\t\t\t\treturn createProxy(fullPath);\n\t\t\t},\n\t\t\tapply: async (_, __, args) => {\n\t\t\t\tconst routePath = \"/\" + path.map((segment) => segment.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`)).join(\"/\");\n\t\t\t\tconst arg = args[0] || {};\n\t\t\t\tconst fetchOptions = args[1] || {};\n\t\t\t\tconst { query, fetchOptions: argFetchOptions, ...body } = arg;\n\t\t\t\tconst options = {\n\t\t\t\t\t...fetchOptions,\n\t\t\t\t\t...argFetchOptions\n\t\t\t\t};\n\t\t\t\tconst method = getMethod(routePath, knownPathMethods, arg);\n\t\t\t\treturn await client(routePath, {\n\t\t\t\t\t...options,\n\t\t\t\t\tbody: method === \"GET\" ? void 0 : {\n\t\t\t\t\t\t...body,\n\t\t\t\t\t\t...options?.body || {}\n\t\t\t\t\t},\n\t\t\t\t\tquery: query || options?.query,\n\t\t\t\t\tmethod,\n\t\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\t\tawait options?.onSuccess?.(context);\n\t\t\t\t\t\tif (!atomListeners || options.disableSignal) return;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* We trigger listeners\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst matches = atomListeners.filter((s) => s.matcher(routePath));\n\t\t\t\t\t\tif (!matches.length) return;\n\t\t\t\t\t\tconst visited = /* @__PURE__ */ new Set();\n\t\t\t\t\t\tfor (const match of matches) {\n\t\t\t\t\t\t\tconst signal = atoms[match.signal];\n\t\t\t\t\t\t\tif (!signal) return;\n\t\t\t\t\t\t\tif (visited.has(match.signal)) continue;\n\t\t\t\t\t\t\tvisited.add(match.signal);\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t* To avoid race conditions we set the signal in a setTimeout\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tconst val = signal.get();\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsignal.set(!val);\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn createProxy();\n}\n\n//#endregion\n\n//# sourceMappingURL=proxy.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9wcm94eS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUNBQXVDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBEQUFNO0FBQ2Q7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0RkFBNEYscUJBQXFCO0FBQ2pIO0FBQ0E7QUFDQSxZQUFZLGdEQUFnRDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNrQztBQUNsQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHByb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0F0b20gfSBmcm9tIFwiLi4vdXRpbHMvaXMtYXRvbS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jbGllbnQvcHJveHkudHNcbmZ1bmN0aW9uIGdldE1ldGhvZChwYXRoLCBrbm93blBhdGhNZXRob2RzLCBhcmdzKSB7XG5cdGNvbnN0IG1ldGhvZCA9IGtub3duUGF0aE1ldGhvZHNbcGF0aF07XG5cdGNvbnN0IHsgZmV0Y2hPcHRpb25zLCBxdWVyeTogX3F1ZXJ5LCAuLi5ib2R5IH0gPSBhcmdzIHx8IHt9O1xuXHRpZiAobWV0aG9kKSByZXR1cm4gbWV0aG9kO1xuXHRpZiAoZmV0Y2hPcHRpb25zPy5tZXRob2QpIHJldHVybiBmZXRjaE9wdGlvbnMubWV0aG9kO1xuXHRpZiAoYm9keSAmJiBPYmplY3Qua2V5cyhib2R5KS5sZW5ndGggPiAwKSByZXR1cm4gXCJQT1NUXCI7XG5cdHJldHVybiBcIkdFVFwiO1xufVxuZnVuY3Rpb24gY3JlYXRlRHluYW1pY1BhdGhQcm94eShyb3V0ZXMsIGNsaWVudCwga25vd25QYXRoTWV0aG9kcywgYXRvbXMsIGF0b21MaXN0ZW5lcnMpIHtcblx0ZnVuY3Rpb24gY3JlYXRlUHJveHkocGF0aCA9IFtdKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm94eShmdW5jdGlvbigpIHt9LCB7XG5cdFx0XHRnZXQoXywgcHJvcCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHByb3AgIT09IFwic3RyaW5nXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHByb3AgPT09IFwidGhlblwiIHx8IHByb3AgPT09IFwiY2F0Y2hcIiB8fCBwcm9wID09PSBcImZpbmFsbHlcIikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCBwcm9wXTtcblx0XHRcdFx0bGV0IGN1cnJlbnQgPSByb3V0ZXM7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2VnbWVudCBvZiBmdWxsUGF0aCkgaWYgKGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09IFwib2JqZWN0XCIgJiYgc2VnbWVudCBpbiBjdXJyZW50KSBjdXJyZW50ID0gY3VycmVudFtzZWdtZW50XTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y3VycmVudCA9IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZW9mIGN1cnJlbnQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGN1cnJlbnQ7XG5cdFx0XHRcdGlmIChpc0F0b20oY3VycmVudCkpIHJldHVybiBjdXJyZW50O1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlUHJveHkoZnVsbFBhdGgpO1xuXHRcdFx0fSxcblx0XHRcdGFwcGx5OiBhc3luYyAoXywgX18sIGFyZ3MpID0+IHtcblx0XHRcdFx0Y29uc3Qgcm91dGVQYXRoID0gXCIvXCIgKyBwYXRoLm1hcCgoc2VnbWVudCkgPT4gc2VnbWVudC5yZXBsYWNlKC9bQS1aXS9nLCAobGV0dGVyKSA9PiBgLSR7bGV0dGVyLnRvTG93ZXJDYXNlKCl9YCkpLmpvaW4oXCIvXCIpO1xuXHRcdFx0XHRjb25zdCBhcmcgPSBhcmdzWzBdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCBmZXRjaE9wdGlvbnMgPSBhcmdzWzFdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCB7IHF1ZXJ5LCBmZXRjaE9wdGlvbnM6IGFyZ0ZldGNoT3B0aW9ucywgLi4uYm9keSB9ID0gYXJnO1xuXHRcdFx0XHRjb25zdCBvcHRpb25zID0ge1xuXHRcdFx0XHRcdC4uLmZldGNoT3B0aW9ucyxcblx0XHRcdFx0XHQuLi5hcmdGZXRjaE9wdGlvbnNcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgbWV0aG9kID0gZ2V0TWV0aG9kKHJvdXRlUGF0aCwga25vd25QYXRoTWV0aG9kcywgYXJnKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGNsaWVudChyb3V0ZVBhdGgsIHtcblx0XHRcdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0XHRcdGJvZHk6IG1ldGhvZCA9PT0gXCJHRVRcIiA/IHZvaWQgMCA6IHtcblx0XHRcdFx0XHRcdC4uLmJvZHksXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zPy5ib2R5IHx8IHt9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRxdWVyeTogcXVlcnkgfHwgb3B0aW9ucz8ucXVlcnksXG5cdFx0XHRcdFx0bWV0aG9kLFxuXHRcdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBvcHRpb25zPy5vblN1Y2Nlc3M/Lihjb250ZXh0KTtcblx0XHRcdFx0XHRcdGlmICghYXRvbUxpc3RlbmVycyB8fCBvcHRpb25zLmRpc2FibGVTaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0KiBXZSB0cmlnZ2VyIGxpc3RlbmVyc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSBhdG9tTGlzdGVuZXJzLmZpbHRlcigocykgPT4gcy5tYXRjaGVyKHJvdXRlUGF0aCkpO1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaGVzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgdmlzaXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2lnbmFsID0gYXRvbXNbbWF0Y2guc2lnbmFsXTtcblx0XHRcdFx0XHRcdFx0aWYgKCFzaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0aWYgKHZpc2l0ZWQuaGFzKG1hdGNoLnNpZ25hbCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR2aXNpdGVkLmFkZChtYXRjaC5zaWduYWwpO1xuXHRcdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdFx0KiBUbyBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2Ugc2V0IHRoZSBzaWduYWwgaW4gYSBzZXRUaW1lb3V0XG5cdFx0XHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHZhbCA9IHNpZ25hbC5nZXQoKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2lnbmFsLnNldCghdmFsKTtcblx0XHRcdFx0XHRcdFx0fSwgMTApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGNyZWF0ZVByb3h5KCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRHluYW1pY1BhdGhQcm94eSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJveHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/proxy.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/query.mjs":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/query.mjs ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuthQuery: () => (/* binding */ useAuthQuery)\n/* harmony export */ });\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/.pnpm/nanostores@1.1.0/node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/.pnpm/nanostores@1.1.0/node_modules/nanostores/lifecycle/index.js\");\n\n\n//#region src/client/query.ts\nconst isServer = () => typeof window === \"undefined\";\nconst useAuthQuery = (initializedAtom, path, $fetch, options) => {\n\tconst value = (0,nanostores__WEBPACK_IMPORTED_MODULE_0__.atom)({\n\t\tdata: null,\n\t\terror: null,\n\t\tisPending: true,\n\t\tisRefetching: false,\n\t\trefetch: (queryParams) => fn(queryParams)\n\t});\n\tconst fn = async (queryParams) => {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst opts = typeof options === \"function\" ? options({\n\t\t\t\tdata: value.get().data,\n\t\t\t\terror: value.get().error,\n\t\t\t\tisPending: value.get().isPending\n\t\t\t}) : options;\n\t\t\t$fetch(path, {\n\t\t\t\t...opts,\n\t\t\t\tquery: {\n\t\t\t\t\t...opts?.query,\n\t\t\t\t\t...queryParams?.query\n\t\t\t\t},\n\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tdata: context.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onSuccess?.(context);\n\t\t\t\t},\n\t\t\t\tasync onError(context) {\n\t\t\t\t\tconst { request } = context;\n\t\t\t\t\tconst retryAttempts = typeof request.retry === \"number\" ? request.retry : request.retry?.attempts;\n\t\t\t\t\tconst retryAttempt = request.retryAttempt || 0;\n\t\t\t\t\tif (retryAttempts && retryAttempt < retryAttempts) return;\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\terror: context.error,\n\t\t\t\t\t\tdata: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onError?.(context);\n\t\t\t\t},\n\t\t\t\tasync onRequest(context) {\n\t\t\t\t\tconst currentValue = value.get();\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tisPending: currentValue.data === null,\n\t\t\t\t\t\tdata: currentValue.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisRefetching: true,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onRequest?.(context);\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tvalue.set({\n\t\t\t\t\terror,\n\t\t\t\t\tdata: null,\n\t\t\t\t\tisPending: false,\n\t\t\t\t\tisRefetching: false,\n\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t});\n\t\t\t}).finally(() => {\n\t\t\t\tresolve(void 0);\n\t\t\t});\n\t\t});\n\t};\n\tinitializedAtom = Array.isArray(initializedAtom) ? initializedAtom : [initializedAtom];\n\tlet isMounted = false;\n\tfor (const initAtom of initializedAtom) initAtom.subscribe(async () => {\n\t\tif (isServer()) return;\n\t\tif (isMounted) await fn();\n\t\telse (0,nanostores__WEBPACK_IMPORTED_MODULE_1__.onMount)(value, () => {\n\t\t\tconst timeoutId = setTimeout(async () => {\n\t\t\t\tif (!isMounted) {\n\t\t\t\t\tawait fn();\n\t\t\t\t\tisMounted = true;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t\treturn () => {\n\t\t\t\tvalue.off();\n\t\t\t\tinitAtom.off();\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t};\n\t\t});\n\t});\n\treturn value;\n};\n\n//#endregion\n\n//# sourceMappingURL=query.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9xdWVyeS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDOztBQUUzQztBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0w7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLG1EQUFPO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxccXVlcnkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9xdWVyeS50c1xuY29uc3QgaXNTZXJ2ZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiO1xuY29uc3QgdXNlQXV0aFF1ZXJ5ID0gKGluaXRpYWxpemVkQXRvbSwgcGF0aCwgJGZldGNoLCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHZhbHVlID0gYXRvbSh7XG5cdFx0ZGF0YTogbnVsbCxcblx0XHRlcnJvcjogbnVsbCxcblx0XHRpc1BlbmRpbmc6IHRydWUsXG5cdFx0aXNSZWZldGNoaW5nOiBmYWxzZSxcblx0XHRyZWZldGNoOiAocXVlcnlQYXJhbXMpID0+IGZuKHF1ZXJ5UGFyYW1zKVxuXHR9KTtcblx0Y29uc3QgZm4gPSBhc3luYyAocXVlcnlQYXJhbXMpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IG9wdHMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiID8gb3B0aW9ucyh7XG5cdFx0XHRcdGRhdGE6IHZhbHVlLmdldCgpLmRhdGEsXG5cdFx0XHRcdGVycm9yOiB2YWx1ZS5nZXQoKS5lcnJvcixcblx0XHRcdFx0aXNQZW5kaW5nOiB2YWx1ZS5nZXQoKS5pc1BlbmRpbmdcblx0XHRcdH0pIDogb3B0aW9ucztcblx0XHRcdCRmZXRjaChwYXRoLCB7XG5cdFx0XHRcdC4uLm9wdHMsXG5cdFx0XHRcdHF1ZXJ5OiB7XG5cdFx0XHRcdFx0Li4ub3B0cz8ucXVlcnksXG5cdFx0XHRcdFx0Li4ucXVlcnlQYXJhbXM/LnF1ZXJ5XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGRhdGE6IGNvbnRleHQuZGF0YSxcblx0XHRcdFx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRcdGlzUmVmZXRjaGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25TdWNjZXNzPy4oY29udGV4dCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uRXJyb3IoY29udGV4dCkge1xuXHRcdFx0XHRcdGNvbnN0IHsgcmVxdWVzdCB9ID0gY29udGV4dDtcblx0XHRcdFx0XHRjb25zdCByZXRyeUF0dGVtcHRzID0gdHlwZW9mIHJlcXVlc3QucmV0cnkgPT09IFwibnVtYmVyXCIgPyByZXF1ZXN0LnJldHJ5IDogcmVxdWVzdC5yZXRyeT8uYXR0ZW1wdHM7XG5cdFx0XHRcdFx0Y29uc3QgcmV0cnlBdHRlbXB0ID0gcmVxdWVzdC5yZXRyeUF0dGVtcHQgfHwgMDtcblx0XHRcdFx0XHRpZiAocmV0cnlBdHRlbXB0cyAmJiByZXRyeUF0dGVtcHQgPCByZXRyeUF0dGVtcHRzKSByZXR1cm47XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGVycm9yOiBjb250ZXh0LmVycm9yLFxuXHRcdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRcdGlzUGVuZGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdFx0cmVmZXRjaDogdmFsdWUudmFsdWUucmVmZXRjaFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IG9wdHM/Lm9uRXJyb3I/Lihjb250ZXh0KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgb25SZXF1ZXN0KGNvbnRleHQpIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB2YWx1ZS5nZXQoKTtcblx0XHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBjdXJyZW50VmFsdWUuZGF0YSA9PT0gbnVsbCxcblx0XHRcdFx0XHRcdGRhdGE6IGN1cnJlbnRWYWx1ZS5kYXRhLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IG51bGwsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IHRydWUsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25SZXF1ZXN0Py4oY29udGV4dCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdGVycm9yLFxuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdHJlZmV0Y2g6IHZhbHVlLnZhbHVlLnJlZmV0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHR9KS5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0cmVzb2x2ZSh2b2lkIDApO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cdGluaXRpYWxpemVkQXRvbSA9IEFycmF5LmlzQXJyYXkoaW5pdGlhbGl6ZWRBdG9tKSA/IGluaXRpYWxpemVkQXRvbSA6IFtpbml0aWFsaXplZEF0b21dO1xuXHRsZXQgaXNNb3VudGVkID0gZmFsc2U7XG5cdGZvciAoY29uc3QgaW5pdEF0b20gb2YgaW5pdGlhbGl6ZWRBdG9tKSBpbml0QXRvbS5zdWJzY3JpYmUoYXN5bmMgKCkgPT4ge1xuXHRcdGlmIChpc1NlcnZlcigpKSByZXR1cm47XG5cdFx0aWYgKGlzTW91bnRlZCkgYXdhaXQgZm4oKTtcblx0XHRlbHNlIG9uTW91bnQodmFsdWUsICgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoIWlzTW91bnRlZCkge1xuXHRcdFx0XHRcdGF3YWl0IGZuKCk7XG5cdFx0XHRcdFx0aXNNb3VudGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMCk7XG5cdFx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0XHR2YWx1ZS5vZmYoKTtcblx0XHRcdFx0aW5pdEF0b20ub2ZmKCk7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fSk7XG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdXNlQXV0aFF1ZXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/query.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/index.mjs":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/index.mjs ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthClient: () => (/* binding */ createAuthClient),\n/* harmony export */   useStore: () => (/* reexport safe */ _react_store_mjs__WEBPACK_IMPORTED_MODULE_2__.useStore)\n/* harmony export */ });\n/* harmony import */ var _config_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/config.mjs\");\n/* harmony import */ var _proxy_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../proxy.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/proxy.mjs\");\n/* harmony import */ var _react_store_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./react-store.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/react-store.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/utils */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n//#region src/client/react/index.ts\nfunction getAtomKey(str) {\n\treturn `use${(0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__.capitalizeFirstLetter)(str)}`;\n}\nfunction createAuthClient(options) {\n\tconst { pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, $store, atomListeners } = (0,_config_mjs__WEBPACK_IMPORTED_MODULE_0__.getClientConfig)(options);\n\tconst resolvedHooks = {};\n\tfor (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[getAtomKey(key)] = () => (0,_react_store_mjs__WEBPACK_IMPORTED_MODULE_2__.useStore)(value);\n\treturn (0,_proxy_mjs__WEBPACK_IMPORTED_MODULE_1__.createDynamicPathProxy)({\n\t\t...pluginsActions,\n\t\t...resolvedHooks,\n\t\t$fetch,\n\t\t$store\n\t}, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9yZWFjdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdEO0FBQ007QUFDVDtBQUNtQjs7QUFFaEU7QUFDQTtBQUNBLGNBQWMsOEVBQXFCLE1BQU07QUFDekM7QUFDQTtBQUNBLFNBQVMsaUZBQWlGLEVBQUUsNERBQWU7QUFDM0c7QUFDQSxpR0FBaUcsMERBQVE7QUFDekcsUUFBUSxrRUFBc0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDc0M7QUFDdEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxyZWFjdFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENsaWVudENvbmZpZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEeW5hbWljUGF0aFByb3h5IH0gZnJvbSBcIi4uL3Byb3h5Lm1qc1wiO1xuaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tIFwiLi9yZWFjdC1zdG9yZS5tanNcIjtcbmltcG9ydCB7IGNhcGl0YWxpemVGaXJzdExldHRlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9yZWFjdC9pbmRleC50c1xuZnVuY3Rpb24gZ2V0QXRvbUtleShzdHIpIHtcblx0cmV0dXJuIGB1c2Uke2NhcGl0YWxpemVGaXJzdExldHRlcihzdHIpfWA7XG59XG5mdW5jdGlvbiBjcmVhdGVBdXRoQ2xpZW50KG9wdGlvbnMpIHtcblx0Y29uc3QgeyBwbHVnaW5QYXRoTWV0aG9kcywgcGx1Z2luc0FjdGlvbnMsIHBsdWdpbnNBdG9tcywgJGZldGNoLCAkc3RvcmUsIGF0b21MaXN0ZW5lcnMgfSA9IGdldENsaWVudENvbmZpZyhvcHRpb25zKTtcblx0Y29uc3QgcmVzb2x2ZWRIb29rcyA9IHt9O1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwbHVnaW5zQXRvbXMpKSByZXNvbHZlZEhvb2tzW2dldEF0b21LZXkoa2V5KV0gPSAoKSA9PiB1c2VTdG9yZSh2YWx1ZSk7XG5cdHJldHVybiBjcmVhdGVEeW5hbWljUGF0aFByb3h5KHtcblx0XHQuLi5wbHVnaW5zQWN0aW9ucyxcblx0XHQuLi5yZXNvbHZlZEhvb2tzLFxuXHRcdCRmZXRjaCxcblx0XHQkc3RvcmVcblx0fSwgJGZldGNoLCBwbHVnaW5QYXRoTWV0aG9kcywgcGx1Z2luc0F0b21zLCBhdG9tTGlzdGVuZXJzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBdXRoQ2xpZW50LCB1c2VTdG9yZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/react-store.mjs":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/react-store.mjs ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStore: () => (/* binding */ useStore)\n/* harmony export */ });\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/.pnpm/nanostores@1.1.0/node_modules/nanostores/listen-keys/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.10_@babel+core@7._354e965a902584de4951c501fbcccc32/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\n//#region src/client/react/react-store.ts\n/**\n* Subscribe to store changes and get store's value.\n*\n* Can be used with store builder too.\n*\n* ```js\n* import { useStore } from 'nanostores/react'\n*\n* import { router } from '../store/router'\n*\n* export const Layout = () => {\n*   let page = useStore(router)\n*   if (page.route === 'home') {\n*     return <HomePage />\n*   } else {\n*     return <Error404 />\n*   }\n* }\n* ```\n*\n* @param store Store instance.\n* @returns Store value.\n*/\nfunction useStore(store, options = {}) {\n\tconst snapshotRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(store.get());\n\tconst { keys, deps = [store, keys] } = options;\n\tconst subscribe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((onChange) => {\n\t\tconst emitChange = (value) => {\n\t\t\tif (snapshotRef.current === value) return;\n\t\t\tsnapshotRef.current = value;\n\t\t\tonChange();\n\t\t};\n\t\temitChange(store.value);\n\t\tif (keys?.length) return (0,nanostores__WEBPACK_IMPORTED_MODULE_1__.listenKeys)(store, keys, emitChange);\n\t\treturn store.listen(emitChange);\n\t}, deps);\n\tconst get = () => snapshotRef.current;\n\treturn (0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(subscribe, get, get);\n}\n\n//#endregion\n\n//# sourceMappingURL=react-store.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9yZWFjdC9yZWFjdC1zdG9yZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdDO0FBQzBCOztBQUVsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsV0FBVztBQUN0QjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMscUJBQXFCLDZDQUFNO0FBQzNCLFNBQVMsNkJBQTZCO0FBQ3RDLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQVU7QUFDckM7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxRQUFRLDJEQUFvQjtBQUM1Qjs7QUFFQTtBQUNvQjtBQUNwQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHJlYWN0XFxyZWFjdC1zdG9yZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbGlzdGVuS2V5cyB9IGZyb20gXCJuYW5vc3RvcmVzXCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VTeW5jRXh0ZXJuYWxTdG9yZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9yZWFjdC9yZWFjdC1zdG9yZS50c1xuLyoqXG4qIFN1YnNjcmliZSB0byBzdG9yZSBjaGFuZ2VzIGFuZCBnZXQgc3RvcmUncyB2YWx1ZS5cbipcbiogQ2FuIGJlIHVzZWQgd2l0aCBzdG9yZSBidWlsZGVyIHRvby5cbipcbiogYGBganNcbiogaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICduYW5vc3RvcmVzL3JlYWN0J1xuKlxuKiBpbXBvcnQgeyByb3V0ZXIgfSBmcm9tICcuLi9zdG9yZS9yb3V0ZXInXG4qXG4qIGV4cG9ydCBjb25zdCBMYXlvdXQgPSAoKSA9PiB7XG4qICAgbGV0IHBhZ2UgPSB1c2VTdG9yZShyb3V0ZXIpXG4qICAgaWYgKHBhZ2Uucm91dGUgPT09ICdob21lJykge1xuKiAgICAgcmV0dXJuIDxIb21lUGFnZSAvPlxuKiAgIH0gZWxzZSB7XG4qICAgICByZXR1cm4gPEVycm9yNDA0IC8+XG4qICAgfVxuKiB9XG4qIGBgYFxuKlxuKiBAcGFyYW0gc3RvcmUgU3RvcmUgaW5zdGFuY2UuXG4qIEByZXR1cm5zIFN0b3JlIHZhbHVlLlxuKi9cbmZ1bmN0aW9uIHVzZVN0b3JlKHN0b3JlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3Qgc25hcHNob3RSZWYgPSB1c2VSZWYoc3RvcmUuZ2V0KCkpO1xuXHRjb25zdCB7IGtleXMsIGRlcHMgPSBbc3RvcmUsIGtleXNdIH0gPSBvcHRpb25zO1xuXHRjb25zdCBzdWJzY3JpYmUgPSB1c2VDYWxsYmFjaygob25DaGFuZ2UpID0+IHtcblx0XHRjb25zdCBlbWl0Q2hhbmdlID0gKHZhbHVlKSA9PiB7XG5cdFx0XHRpZiAoc25hcHNob3RSZWYuY3VycmVudCA9PT0gdmFsdWUpIHJldHVybjtcblx0XHRcdHNuYXBzaG90UmVmLmN1cnJlbnQgPSB2YWx1ZTtcblx0XHRcdG9uQ2hhbmdlKCk7XG5cdFx0fTtcblx0XHRlbWl0Q2hhbmdlKHN0b3JlLnZhbHVlKTtcblx0XHRpZiAoa2V5cz8ubGVuZ3RoKSByZXR1cm4gbGlzdGVuS2V5cyhzdG9yZSwga2V5cywgZW1pdENoYW5nZSk7XG5cdFx0cmV0dXJuIHN0b3JlLmxpc3RlbihlbWl0Q2hhbmdlKTtcblx0fSwgZGVwcyk7XG5cdGNvbnN0IGdldCA9ICgpID0+IHNuYXBzaG90UmVmLmN1cnJlbnQ7XG5cdHJldHVybiB1c2VTeW5jRXh0ZXJuYWxTdG9yZShzdWJzY3JpYmUsIGdldCwgZ2V0KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB1c2VTdG9yZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3Qtc3RvcmUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/react/react-store.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-atom.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-atom.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionAtom: () => (/* binding */ getSessionAtom)\n/* harmony export */ });\n/* harmony import */ var _query_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session-refresh.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-refresh.mjs\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/.pnpm/nanostores@1.1.0/node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/.pnpm/nanostores@1.1.0/node_modules/nanostores/lifecycle/index.js\");\n\n\n\n\n//#region src/client/session-atom.ts\nfunction getSessionAtom($fetch, options) {\n\tconst $signal = (0,nanostores__WEBPACK_IMPORTED_MODULE_2__.atom)(false);\n\tconst session = (0,_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)($signal, \"/get-session\", $fetch, { method: \"GET\" });\n\t(0,nanostores__WEBPACK_IMPORTED_MODULE_3__.onMount)(session, () => {\n\t\tconst refreshManager = (0,_session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__.createSessionRefreshManager)({\n\t\t\tsessionAtom: session,\n\t\t\tsessionSignal: $signal,\n\t\t\t$fetch,\n\t\t\toptions\n\t\t});\n\t\trefreshManager.init();\n\t\treturn () => {\n\t\t\trefreshManager.cleanup();\n\t\t};\n\t});\n\treturn {\n\t\tsession,\n\t\t$sessionSignal: $signal\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9zZXNzaW9uLWF0b20ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJDO0FBQ3lCO0FBQ3pCOztBQUUzQztBQUNBO0FBQ0EsaUJBQWlCLGdEQUFJO0FBQ3JCLGlCQUFpQix3REFBWSxvQ0FBb0MsZUFBZTtBQUNoRixDQUFDLG1EQUFPO0FBQ1IseUJBQXlCLGlGQUEyQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVzZXJcXERvd25sb2Fkc1xcbmlraS1wcmVtaXVtLS0tY2luZW1hdGljLWZvb3R3ZWFyXFxub2RlX21vZHVsZXNcXC5wbnBtXFxiZXR0ZXItYXV0aEAxLjQuMThfZHJpenpsZS1fMjYxYzg3YzJiZWZhMTIzYzFmNTI4MTkzNjI4NDQ5NzlcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxcc2Vzc2lvbi1hdG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoUXVlcnkgfSBmcm9tIFwiLi9xdWVyeS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlciB9IGZyb20gXCIuL3Nlc3Npb24tcmVmcmVzaC5tanNcIjtcbmltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9zZXNzaW9uLWF0b20udHNcbmZ1bmN0aW9uIGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucykge1xuXHRjb25zdCAkc2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0IHNlc3Npb24gPSB1c2VBdXRoUXVlcnkoJHNpZ25hbCwgXCIvZ2V0LXNlc3Npb25cIiwgJGZldGNoLCB7IG1ldGhvZDogXCJHRVRcIiB9KTtcblx0b25Nb3VudChzZXNzaW9uLCAoKSA9PiB7XG5cdFx0Y29uc3QgcmVmcmVzaE1hbmFnZXIgPSBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIoe1xuXHRcdFx0c2Vzc2lvbkF0b206IHNlc3Npb24sXG5cdFx0XHRzZXNzaW9uU2lnbmFsOiAkc2lnbmFsLFxuXHRcdFx0JGZldGNoLFxuXHRcdFx0b3B0aW9uc1xuXHRcdH0pO1xuXHRcdHJlZnJlc2hNYW5hZ2VyLmluaXQoKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0cmVmcmVzaE1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH07XG5cdH0pO1xuXHRyZXR1cm4ge1xuXHRcdHNlc3Npb24sXG5cdFx0JHNlc3Npb25TaWduYWw6ICRzaWduYWxcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRTZXNzaW9uQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi1hdG9tLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-refresh.mjs":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-refresh.mjs ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSessionRefreshManager: () => (/* binding */ createSessionRefreshManager)\n/* harmony export */ });\n/* harmony import */ var _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broadcast-channel.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/broadcast-channel.mjs\");\n/* harmony import */ var _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focus-manager.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/focus-manager.mjs\");\n/* harmony import */ var _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./online-manager.mjs */ \"(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/online-manager.mjs\");\n\n\n\n\n//#region src/client/session-refresh.ts\nconst now = () => Math.floor(Date.now() / 1e3);\n/**\n* Rate limit: don't refetch on focus if a session request was made within this many seconds\n*/\nconst FOCUS_REFETCH_RATE_LIMIT_SECONDS = 5;\nfunction createSessionRefreshManager(opts) {\n\tconst { sessionAtom, sessionSignal, $fetch, options = {} } = opts;\n\tconst refetchInterval = options.sessionOptions?.refetchInterval ?? 0;\n\tconst refetchOnWindowFocus = options.sessionOptions?.refetchOnWindowFocus ?? true;\n\tconst refetchWhenOffline = options.sessionOptions?.refetchWhenOffline ?? false;\n\tconst state = {\n\t\tlastSync: 0,\n\t\tlastSessionRequest: 0,\n\t\tcachedSession: void 0\n\t};\n\tconst shouldRefetch = () => {\n\t\treturn refetchWhenOffline || (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().isOnline;\n\t};\n\tconst triggerRefetch = (event) => {\n\t\tif (!shouldRefetch()) return;\n\t\tif (event?.event === \"storage\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\treturn;\n\t\t}\n\t\tconst currentSession = sessionAtom.get();\n\t\tif (event?.event === \"poll\") {\n\t\t\tstate.lastSessionRequest = now();\n\t\t\t$fetch(\"/get-session\").then((res) => {\n\t\t\t\tif (res.error) sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: res.error\n\t\t\t\t});\n\t\t\t\telse sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: res.data,\n\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t\t\tstate.lastSync = now();\n\t\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\t}).catch(() => {});\n\t\t\treturn;\n\t\t}\n\t\tif (event?.event === \"visibilitychange\") {\n\t\t\tif (now() - state.lastSessionRequest < FOCUS_REFETCH_RATE_LIMIT_SECONDS) return;\n\t\t\tstate.lastSessionRequest = now();\n\t\t}\n\t\tif (currentSession?.data === null || currentSession?.data === void 0 || event?.event === \"visibilitychange\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t}\n\t};\n\tconst broadcastSessionUpdate = (trigger) => {\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().post({\n\t\t\tevent: \"session\",\n\t\t\tdata: { trigger },\n\t\t\tclientId: Math.random().toString(36).substring(7)\n\t\t});\n\t};\n\tconst setupPolling = () => {\n\t\tif (refetchInterval && refetchInterval > 0) state.pollInterval = setInterval(() => {\n\t\t\tif (sessionAtom.get()?.data) triggerRefetch({ event: \"poll\" });\n\t\t}, refetchInterval * 1e3);\n\t};\n\tconst setupBroadcast = () => {\n\t\tstate.unsubscribeBroadcast = (0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"storage\" });\n\t\t});\n\t};\n\tconst setupFocusRefetch = () => {\n\t\tif (!refetchOnWindowFocus) return;\n\t\tstate.unsubscribeFocus = (0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst setupOnlineRefetch = () => {\n\t\tstate.unsubscribeOnline = (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().subscribe((online) => {\n\t\t\tif (online) triggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst init = () => {\n\t\tsetupPolling();\n\t\tsetupBroadcast();\n\t\tsetupFocusRefetch();\n\t\tsetupOnlineRefetch();\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().setup();\n\t\t(0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().setup();\n\t\t(0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().setup();\n\t};\n\tconst cleanup = () => {\n\t\tif (state.pollInterval) {\n\t\t\tclearInterval(state.pollInterval);\n\t\t\tstate.pollInterval = void 0;\n\t\t}\n\t\tif (state.unsubscribeBroadcast) {\n\t\t\tstate.unsubscribeBroadcast();\n\t\t\tstate.unsubscribeBroadcast = void 0;\n\t\t}\n\t\tif (state.unsubscribeFocus) {\n\t\t\tstate.unsubscribeFocus();\n\t\t\tstate.unsubscribeFocus = void 0;\n\t\t}\n\t\tif (state.unsubscribeOnline) {\n\t\t\tstate.unsubscribeOnline();\n\t\t\tstate.unsubscribeOnline = void 0;\n\t\t}\n\t\tstate.lastSync = 0;\n\t\tstate.lastSessionRequest = 0;\n\t\tstate.cachedSession = void 0;\n\t};\n\treturn {\n\t\tinit,\n\t\tcleanup,\n\t\ttriggerRefetch,\n\t\tbroadcastSessionUpdate\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-refresh.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9zZXNzaW9uLXJlZnJlc2gubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBb0U7QUFDUjtBQUNFOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbURBQW1EO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwyRUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUksZ0JBQWdCO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsaUZBQXlCO0FBQzNCO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxlQUFlO0FBQ2hFLEdBQUc7QUFDSDtBQUNBO0FBQ0EsK0JBQStCLGlGQUF5QjtBQUN4RCxvQkFBb0Isa0JBQWtCO0FBQ3RDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseUVBQXFCO0FBQ2hELG9CQUFvQiwyQkFBMkI7QUFDL0MsR0FBRztBQUNIO0FBQ0E7QUFDQSw0QkFBNEIsMkVBQXNCO0FBQ2xELGdDQUFnQywyQkFBMkI7QUFDM0QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsaUZBQXlCO0FBQzNCLEVBQUUseUVBQXFCO0FBQ3ZCLEVBQUUsMkVBQXNCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdUM7QUFDdkMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxzZXNzaW9uLXJlZnJlc2gubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwgfSBmcm9tIFwiLi9icm9hZGNhc3QtY2hhbm5lbC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbEZvY3VzTWFuYWdlciB9IGZyb20gXCIuL2ZvY3VzLW1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyIH0gZnJvbSBcIi4vb25saW5lLW1hbmFnZXIubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L3Nlc3Npb24tcmVmcmVzaC50c1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbi8qKlxuKiBSYXRlIGxpbWl0OiBkb24ndCByZWZldGNoIG9uIGZvY3VzIGlmIGEgc2Vzc2lvbiByZXF1ZXN0IHdhcyBtYWRlIHdpdGhpbiB0aGlzIG1hbnkgc2Vjb25kc1xuKi9cbmNvbnN0IEZPQ1VTX1JFRkVUQ0hfUkFURV9MSU1JVF9TRUNPTkRTID0gNTtcbmZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlcihvcHRzKSB7XG5cdGNvbnN0IHsgc2Vzc2lvbkF0b20sIHNlc3Npb25TaWduYWwsICRmZXRjaCwgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xuXHRjb25zdCByZWZldGNoSW50ZXJ2YWwgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoSW50ZXJ2YWwgPz8gMDtcblx0Y29uc3QgcmVmZXRjaE9uV2luZG93Rm9jdXMgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoT25XaW5kb3dGb2N1cyA/PyB0cnVlO1xuXHRjb25zdCByZWZldGNoV2hlbk9mZmxpbmUgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoV2hlbk9mZmxpbmUgPz8gZmFsc2U7XG5cdGNvbnN0IHN0YXRlID0ge1xuXHRcdGxhc3RTeW5jOiAwLFxuXHRcdGxhc3RTZXNzaW9uUmVxdWVzdDogMCxcblx0XHRjYWNoZWRTZXNzaW9uOiB2b2lkIDBcblx0fTtcblx0Y29uc3Qgc2hvdWxkUmVmZXRjaCA9ICgpID0+IHtcblx0XHRyZXR1cm4gcmVmZXRjaFdoZW5PZmZsaW5lIHx8IGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKS5pc09ubGluZTtcblx0fTtcblx0Y29uc3QgdHJpZ2dlclJlZmV0Y2ggPSAoZXZlbnQpID0+IHtcblx0XHRpZiAoIXNob3VsZFJlZmV0Y2goKSkgcmV0dXJuO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwic3RvcmFnZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBjdXJyZW50U2Vzc2lvbiA9IHNlc3Npb25BdG9tLmdldCgpO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwicG9sbFwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSBub3coKTtcblx0XHRcdCRmZXRjaChcIi9nZXQtc2Vzc2lvblwiKS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0aWYgKHJlcy5lcnJvcikgc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdGVycm9yOiByZXMuZXJyb3Jcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGVsc2Ugc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiByZXMuZGF0YSxcblx0XHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RhdGUubGFzdFN5bmMgPSBub3coKTtcblx0XHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0fSkuY2F0Y2goKCkgPT4ge30pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoZXZlbnQ/LmV2ZW50ID09PSBcInZpc2liaWxpdHljaGFuZ2VcIikge1xuXHRcdFx0aWYgKG5vdygpIC0gc3RhdGUubGFzdFNlc3Npb25SZXF1ZXN0IDwgRk9DVVNfUkVGRVRDSF9SQVRFX0xJTUlUX1NFQ09ORFMpIHJldHVybjtcblx0XHRcdHN0YXRlLmxhc3RTZXNzaW9uUmVxdWVzdCA9IG5vdygpO1xuXHRcdH1cblx0XHRpZiAoY3VycmVudFNlc3Npb24/LmRhdGEgPT09IG51bGwgfHwgY3VycmVudFNlc3Npb24/LmRhdGEgPT09IHZvaWQgMCB8fCBldmVudD8uZXZlbnQgPT09IFwidmlzaWJpbGl0eWNoYW5nZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgYnJvYWRjYXN0U2Vzc2lvblVwZGF0ZSA9ICh0cmlnZ2VyKSA9PiB7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnBvc3Qoe1xuXHRcdFx0ZXZlbnQ6IFwic2Vzc2lvblwiLFxuXHRcdFx0ZGF0YTogeyB0cmlnZ2VyIH0sXG5cdFx0XHRjbGllbnRJZDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpXG5cdFx0fSk7XG5cdH07XG5cdGNvbnN0IHNldHVwUG9sbGluZyA9ICgpID0+IHtcblx0XHRpZiAocmVmZXRjaEludGVydmFsICYmIHJlZmV0Y2hJbnRlcnZhbCA+IDApIHN0YXRlLnBvbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGlmIChzZXNzaW9uQXRvbS5nZXQoKT8uZGF0YSkgdHJpZ2dlclJlZmV0Y2goeyBldmVudDogXCJwb2xsXCIgfSk7XG5cdFx0fSwgcmVmZXRjaEludGVydmFsICogMWUzKTtcblx0fTtcblx0Y29uc3Qgc2V0dXBCcm9hZGNhc3QgPSAoKSA9PiB7XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QgPSBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsKCkuc3Vic2NyaWJlKCgpID0+IHtcblx0XHRcdHRyaWdnZXJSZWZldGNoKHsgZXZlbnQ6IFwic3RvcmFnZVwiIH0pO1xuXHRcdH0pO1xuXHR9O1xuXHRjb25zdCBzZXR1cEZvY3VzUmVmZXRjaCA9ICgpID0+IHtcblx0XHRpZiAoIXJlZmV0Y2hPbldpbmRvd0ZvY3VzKSByZXR1cm47XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IGdldEdsb2JhbEZvY3VzTWFuYWdlcigpLnN1YnNjcmliZSgoKSA9PiB7XG5cdFx0XHR0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3Qgc2V0dXBPbmxpbmVSZWZldGNoID0gKCkgPT4ge1xuXHRcdHN0YXRlLnVuc3Vic2NyaWJlT25saW5lID0gZ2V0R2xvYmFsT25saW5lTWFuYWdlcigpLnN1YnNjcmliZSgob25saW5lKSA9PiB7XG5cdFx0XHRpZiAob25saW5lKSB0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3QgaW5pdCA9ICgpID0+IHtcblx0XHRzZXR1cFBvbGxpbmcoKTtcblx0XHRzZXR1cEJyb2FkY2FzdCgpO1xuXHRcdHNldHVwRm9jdXNSZWZldGNoKCk7XG5cdFx0c2V0dXBPbmxpbmVSZWZldGNoKCk7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnNldHVwKCk7XG5cdFx0Z2V0R2xvYmFsRm9jdXNNYW5hZ2VyKCkuc2V0dXAoKTtcblx0XHRnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyKCkuc2V0dXAoKTtcblx0fTtcblx0Y29uc3QgY2xlYW51cCA9ICgpID0+IHtcblx0XHRpZiAoc3RhdGUucG9sbEludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHN0YXRlLnBvbGxJbnRlcnZhbCk7XG5cdFx0XHRzdGF0ZS5wb2xsSW50ZXJ2YWwgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdGlmIChzdGF0ZS51bnN1YnNjcmliZUJyb2FkY2FzdCkge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QoKTtcblx0XHRcdHN0YXRlLnVuc3Vic2NyaWJlQnJvYWRjYXN0ID0gdm9pZCAwO1xuXHRcdH1cblx0XHRpZiAoc3RhdGUudW5zdWJzY3JpYmVGb2N1cykge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cygpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IHZvaWQgMDtcblx0XHR9XG5cdFx0aWYgKHN0YXRlLnVuc3Vic2NyaWJlT25saW5lKSB7XG5cdFx0XHRzdGF0ZS51bnN1YnNjcmliZU9ubGluZSgpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVPbmxpbmUgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdHN0YXRlLmxhc3RTeW5jID0gMDtcblx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSAwO1xuXHRcdHN0YXRlLmNhY2hlZFNlc3Npb24gPSB2b2lkIDA7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0aW5pdCxcblx0XHRjbGVhbnVwLFxuXHRcdHRyaWdnZXJSZWZldGNoLFxuXHRcdGJyb2FkY2FzdFNlc3Npb25VcGRhdGVcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24tcmVmcmVzaC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/client/session-refresh.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-atom.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-atom.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAtom: () => (/* binding */ isAtom)\n/* harmony export */ });\n//#region src/utils/is-atom.ts\nfunction isAtom(value) {\n\treturn typeof value === \"object\" && value !== null && \"get\" in value && typeof value.get === \"function\" && \"lc\" in value && typeof value.lc === \"number\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2lzLWF0b20ubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrQjtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxVc2VyXFxEb3dubG9hZHNcXG5pa2ktcHJlbWl1bS0tLWNpbmVtYXRpYy1mb290d2Vhclxcbm9kZV9tb2R1bGVzXFwucG5wbVxcYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5XFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaXMtYXRvbS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1hdG9tLnRzXG5mdW5jdGlvbiBpc0F0b20odmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBcImdldFwiIGluIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5nZXQgPT09IFwiZnVuY3Rpb25cIiAmJiBcImxjXCIgaW4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLmxjID09PSBcIm51bWJlclwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtYXRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/is-atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(ssr)/./node_modules/.pnpm/@better-auth+core@1.4.18_@b_0b2b890b28b8f3380433f58b733d628d/node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYmV0dGVyLWF1dGhAMS40LjE4X2RyaXp6bGUtXzI2MWM4N2MyYmVmYTEyM2MxZjUyODE5MzYyODQ0OTc5L25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3VybC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTRDO0FBQ2M7O0FBRTFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVksb0VBQWUsc0JBQXNCLElBQUk7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRixvRUFBZSxzQkFBc0IsSUFBSTtBQUM1SCxHQUFHO0FBQ0gsdUJBQXVCLG9FQUFlO0FBQ3RDLFlBQVksb0VBQWUsc0JBQXNCLElBQUksdUNBQXVDLGNBQWM7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsS0FBSztBQUMvQyxXQUFXLFdBQVcsRUFBRSxLQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxLQUFLLHlDQUF5QyxLQUFLLHVCQUF1QixJQUFJLDJCQUEyQixJQUFJLElBQUksRUFBRSxHQUFHLElBQUksUUFBUSxJQUFJLGdEQUFnRCxJQUFJLHdDQUF3QyxJQUFJO0FBQzFRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzREFBRyxvQkFBb0Isc0RBQUcsZ0NBQWdDLHNEQUFHLDJCQUEyQixzREFBRyxnQ0FBZ0Msc0RBQUcsMEJBQTBCLHNEQUFHLG9CQUFvQixzREFBRztBQUNwTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaUJBQWlCLEtBQUssWUFBWTtBQUN4RCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9FQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDdUQ7QUFDdkQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG93bmxvYWRzXFxuaWtpLXByZW1pdW0tLS1jaW5lbWF0aWMtZm9vdHdlYXJcXG5vZGVfbW9kdWxlc1xcLnBucG1cXGJldHRlci1hdXRoQDEuNC4xOF9kcml6emxlLV8yNjFjODdjMmJlZmExMjNjMWY1MjgxOTM2Mjg0NDk3OVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHVybC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdXJsLnRzXG5mdW5jdGlvbiBjaGVja0hhc1BhdGgodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgVVJMKHVybCkucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKSB8fCBcIi9cIikgIT09IFwiL1wiO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGFzc2VydEhhc1Byb3RvY29sKHVybCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcblx0XHRpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHA6XCIgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFVSTCBtdXN0IGluY2x1ZGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLydgKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBCZXR0ZXJBdXRoRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gLCB7IGNhdXNlOiBlcnJvciB9KTtcblx0fVxufVxuZnVuY3Rpb24gd2l0aFBhdGgodXJsLCBwYXRoID0gXCIvYXBpL2F1dGhcIikge1xuXHRhc3NlcnRIYXNQcm90b2NvbCh1cmwpO1xuXHRpZiAoY2hlY2tIYXNQYXRoKHVybCkpIHJldHVybiB1cmw7XG5cdGNvbnN0IHRyaW1tZWRVcmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0aWYgKCFwYXRoIHx8IHBhdGggPT09IFwiL1wiKSByZXR1cm4gdHJpbW1lZFVybDtcblx0cGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcblx0cmV0dXJuIGAke3RyaW1tZWRVcmx9JHtwYXRofWA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3h5SGVhZGVyKGhlYWRlciwgdHlwZSkge1xuXHRpZiAoIWhlYWRlciB8fCBoZWFkZXIudHJpbSgpID09PSBcIlwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlID09PSBcInByb3RvXCIpIHJldHVybiBoZWFkZXIgPT09IFwiaHR0cFwiIHx8IGhlYWRlciA9PT0gXCJodHRwc1wiO1xuXHRpZiAodHlwZSA9PT0gXCJob3N0XCIpIHtcblx0XHRpZiAoW1xuXHRcdFx0L1xcLlxcLi8sXG5cdFx0XHQvXFwwLyxcblx0XHRcdC9bXFxzXS8sXG5cdFx0XHQvXlsuXS8sXG5cdFx0XHQvWzw+J1wiXS8sXG5cdFx0XHQvamF2YXNjcmlwdDovaSxcblx0XHRcdC9maWxlOi9pLFxuXHRcdFx0L2RhdGE6L2lcblx0XHRdLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChoZWFkZXIpKSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiAvXlthLXpBLVowLTldKFthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oXFwuW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKDpbMC05XXsxLDV9KT8kLy50ZXN0KGhlYWRlcikgfHwgL14oXFxkezEsM31cXC4pezN9XFxkezEsM30oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXlxcW1swLTlhLWZBLUY6XStcXF0oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXmxvY2FsaG9zdCg6WzAtOV17MSw1fSk/JC9pLnRlc3QoaGVhZGVyKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRCYXNlVVJMKHVybCwgcGF0aCwgcmVxdWVzdCwgbG9hZEVudiwgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRpZiAodXJsKSByZXR1cm4gd2l0aFBhdGgodXJsLCBwYXRoKTtcblx0aWYgKGxvYWRFbnYgIT09IGZhbHNlKSB7XG5cdFx0Y29uc3QgZnJvbUVudiA9IGVudi5CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5FWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19BVVRIX1VSTCB8fCAoZW52LkJBU0VfVVJMICE9PSBcIi9cIiA/IGVudi5CQVNFX1VSTCA6IHZvaWQgMCk7XG5cdFx0aWYgKGZyb21FbnYpIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcblx0fVxuXHRjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcblx0Y29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG5cdGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvICYmIHRydXN0ZWRQcm94eUhlYWRlcnMpIHtcblx0XHRpZiAodmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdFByb3RvLCBcInByb3RvXCIpICYmIHZhbGlkYXRlUHJveHlIZWFkZXIoZnJvbVJlcXVlc3QsIFwiaG9zdFwiKSkgdHJ5IHtcblx0XHRcdHJldHVybiB3aXRoUGF0aChgJHtmcm9tUmVxdWVzdFByb3RvfTovLyR7ZnJvbVJlcXVlc3R9YCwgcGF0aCk7XG5cdFx0fSBjYXRjaCAoX2Vycm9yKSB7fVxuXHR9XG5cdGlmIChyZXF1ZXN0KSB7XG5cdFx0Y29uc3QgdXJsJDEgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuXHRcdGlmICghdXJsJDEpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdHJldHVybiB3aXRoUGF0aCh1cmwkMSwgcGF0aCk7XG5cdH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uKSByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG59XG5mdW5jdGlvbiBnZXRPcmlnaW4odXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdHJldHVybiBwYXJzZWRVcmwub3JpZ2luID09PSBcIm51bGxcIiA/IG51bGwgOiBwYXJzZWRVcmwub3JpZ2luO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5wcm90b2NvbDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEhvc3QodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5ob3N0O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VVUkwsIGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/better-auth@1.4.18_drizzle-_261c87c2befa123c1f52819362844979/node_modules/better-auth/dist/utils/url.mjs\n");

/***/ })

};
;